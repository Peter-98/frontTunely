(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(_n,It,L)=>{"use strict";L.d(It,{nm:()=>tt});var c=L(8623);L(4650),L(259);var ft=L(5861),qe=L(2951),Je=L(4859),Le=L(2090),ke=L(1877);const H=new Map,De={activated:!1,tokenObservers:[]},it={initialized:!1,enabled:!1};function Be(mt){return H.get(mt)||Object.assign({},De)}function yt(){return it}const ot="https://content-firebaseappcheck.googleapis.com/v1",Ae="exchangeDebugToken",Me={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class gt{constructor(lt,xt,Yt,gn,$n){if(this.operation=lt,this.retryPolicy=xt,this.getWaitDuration=Yt,this.lowerBound=gn,this.upperBound=$n,this.pending=null,this.nextErrorWaitInterval=gn,gn>$n)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(lt){var xt=this;return(0,ft.Z)(function*(){xt.stop();try{xt.pending=new Le.BH,yield function et(mt){return new Promise(lt=>{setTimeout(lt,mt)})}(xt.getNextRun(lt)),xt.pending.resolve(),yield xt.pending.promise,xt.pending=new Le.BH,yield xt.operation(),xt.pending.resolve(),yield xt.pending.promise,xt.process(!0).catch(()=>{})}catch(Yt){xt.retryPolicy(Yt)?xt.process(!1).catch(()=>{}):xt.stop()}})()}getNextRun(lt){if(lt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const xt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),xt}}}const Ke=new Le.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Hn(mt,lt){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,ft.Z)(function*({url:mt,body:lt},xt){const Yt={"Content-Type":"application/json"},gn=xt.getImmediate({optional:!0});if(gn){const Ni=yield gn.getHeartbeatsHeader();Ni&&(Yt["X-Firebase-Client"]=Ni)}const $n={method:"POST",body:JSON.stringify(lt),headers:Yt};let jr,dr;try{jr=yield fetch(mt,$n)}catch(Ni){throw Ke.create("fetch-network-error",{originalErrorMessage:null==Ni?void 0:Ni.message})}if(200!==jr.status)throw Ke.create("fetch-status-error",{httpStatus:jr.status});try{dr=yield jr.json()}catch(Ni){throw Ke.create("fetch-parse-error",{originalErrorMessage:null==Ni?void 0:Ni.message})}const Rr=dr.ttl.match(/^([\d.]+)(s)$/);if(!Rr||!Rr[2]||isNaN(Number(Rr[1])))throw Ke.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${dr.ttl}`});const as=1e3*Number(Rr[1]),so=Date.now();return{token:dr.token,expireTimeMillis:so+as,issuedAtTimeMillis:so}})).apply(this,arguments)}const hr="firebase-app-check-database",Cr=1,Pr="firebase-app-check-store";let tr=null;function Fr(mt,lt){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,ft.Z)(function*(mt,lt){const Yt=(yield function nn(){return tr||(tr=new Promise((mt,lt)=>{try{const xt=indexedDB.open(hr,Cr);xt.onsuccess=Yt=>{mt(Yt.target.result)},xt.onerror=Yt=>{var gn;lt(Ke.create("storage-open",{originalErrorMessage:null===(gn=Yt.target.error)||void 0===gn?void 0:gn.message}))},xt.onupgradeneeded=Yt=>{0===Yt.oldVersion&&Yt.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(xt){lt(Ke.create("storage-open",{originalErrorMessage:null==xt?void 0:xt.message}))}}),tr)}()).transaction(Pr,"readwrite"),$n=Yt.objectStore(Pr).put({compositeKey:mt,value:lt});return new Promise((jr,dr)=>{$n.onsuccess=Rr=>{jr()},Yt.onerror=Rr=>{var as;dr(Ke.create("storage-set",{originalErrorMessage:null===(as=Rr.target.error)||void 0===as?void 0:as.message}))}})})).apply(this,arguments)}const Lr=new ke.Yd("@firebase/app-check");function Ir(mt,lt){return(0,Le.hl)()?function ei(mt,lt){return Fr(function Wn(mt){return`${mt.options.appId}-${mt.name}`}(mt),lt)}(mt,lt).catch(xt=>{Lr.warn(`Failed to write token to IndexedDB. Error: ${xt}`)}):Promise.resolve()}function Dn(){return ai.apply(this,arguments)}function ai(){return(ai=(0,ft.Z)(function*(){const mt=yt();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gr={error:"UNKNOWN_ERROR"};function zr(mt){return Le.US.encodeString(JSON.stringify(mt),!1)}function $t(mt){return We.apply(this,arguments)}function We(){return(We=(0,ft.Z)(function*(mt,lt=!1){const xt=mt.app;!function Jt(mt){if(!Be(mt).activated)throw Ke.create("use-before-activation",{appName:mt.name})}(xt);const Yt=Be(xt);let $n,gn=Yt.token;if(gn&&!pt(gn)&&(Yt.token=void 0,gn=void 0),!gn){const Rr=yield Yt.cachedTokenPromise;Rr&&(pt(Rr)?gn=Rr:yield Ir(xt,void 0))}if(!lt&&gn&&pt(gn))return{token:gn.token};let dr,jr=!1;if(function ti(){return yt().enabled}()){Yt.exchangeTokenPromise||(Yt.exchangeTokenPromise=Hn(function lr(mt,lt){const{projectId:xt,appId:Yt,apiKey:gn}=mt.options;return{url:`${ot}/projects/${xt}/apps/${Yt}:${Ae}?key=${gn}`,body:{debug_token:lt}}}(xt,yield Dn()),mt.heartbeatServiceProvider).finally(()=>{Yt.exchangeTokenPromise=void 0}),jr=!0);const Rr=yield Yt.exchangeTokenPromise;return yield Ir(xt,Rr),Yt.token=Rr,{token:Rr.token}}try{Yt.exchangeTokenPromise||(Yt.exchangeTokenPromise=Yt.provider.getToken().finally(()=>{Yt.exchangeTokenPromise=void 0}),jr=!0),gn=yield Be(xt).exchangeTokenPromise}catch(Rr){"appCheck/throttled"===Rr.code?Lr.warn(Rr.message):Lr.error(Rr),$n=Rr}return gn?$n?dr=pt(gn)?{token:gn.token,internalError:$n}:yn($n):(dr={token:gn.token},Yt.token=gn,yield Ir(xt,gn)):dr=yn($n),jr&&function At(mt,lt){const xt=Be(mt).tokenObservers;for(const Yt of xt)try{"EXTERNAL"===Yt.type&&null!=lt.error?Yt.error(lt.error):Yt.next(lt)}catch(gn){}}(xt,dr),dr})).apply(this,arguments)}function _e(mt,lt){const xt=Be(mt),Yt=xt.tokenObservers.filter(gn=>gn.next!==lt);0===Yt.length&&xt.tokenRefresher&&xt.tokenRefresher.isRunning()&&xt.tokenRefresher.stop(),xt.tokenObservers=Yt}function me(mt){const{app:lt}=mt,xt=Be(lt);let Yt=xt.tokenRefresher;Yt||(Yt=function He(mt){const{app:lt}=mt;return new gt((0,ft.Z)(function*(){let Yt;if(Yt=Be(lt).token?yield $t(mt,!0):yield $t(mt),Yt.error)throw Yt.error;if(Yt.internalError)throw Yt.internalError}),()=>!0,()=>{const xt=Be(lt);if(xt.token){let Yt=xt.token.issuedAtTimeMillis+.5*(xt.token.expireTimeMillis-xt.token.issuedAtTimeMillis)+3e5;return Yt=Math.min(Yt,xt.token.expireTimeMillis-3e5),Math.max(0,Yt-Date.now())}return 0},Me.RETRIAL_MIN_WAIT,Me.RETRIAL_MAX_WAIT)}(mt),xt.tokenRefresher=Yt),!Yt.isRunning()&&xt.isTokenAutoRefreshEnabled&&Yt.start()}function pt(mt){return mt.expireTimeMillis-Date.now()>0}function yn(mt){return{token:zr(gr),error:mt}}class $e{constructor(lt,xt){this.app=lt,this.heartbeatServiceProvider=xt}_delete(){const{tokenObservers:lt}=Be(this.app);for(const xt of lt)_e(this.app,xt.next);return Promise.resolve()}}const Tr="app-check-internal";!function Wi(){(0,qe._registerComponent)(new Je.wA("app-check",mt=>function Ve(mt,lt){return new $e(mt,lt)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,lt,xt)=>{mt.getProvider(Tr).initialize()})),(0,qe._registerComponent)(new Je.wA(Tr,mt=>function fe(mt){return{getToken:lt=>$t(mt,lt),addTokenListener:lt=>function Lt(mt,lt,xt,Yt){const{app:gn}=mt,$n=Be(gn);if($n.tokenObservers=[...$n.tokenObservers,{next:xt,error:Yt,type:lt}],$n.token&&pt($n.token)){const dr=$n.token;Promise.resolve().then(()=>{xt({token:dr.token}),me(mt)}).catch(()=>{})}$n.cachedTokenPromise.then(()=>me(mt))}(mt,"INTERNAL",lt),removeTokenListener:lt=>_e(mt.app,lt)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qe.registerVersion)("@firebase/app-check","0.7.0")}();class tt{constructor(){return(0,c.vb)("app-check")}}typeof window<"u"&&window},1205:(_n,It,L)=>{"use strict";L.d(It,{zQ:()=>ot,ww:()=>at,rT:()=>it,f7:()=>_t,L6:()=>H,_Q:()=>De,lh:()=>Be,Qv:()=>ke,nw:()=>yt});var c=L(4650),q=L(958),G=L(9646),Te=L(9751),Pe=L(8996),Fe=L(6451),ge=L(5363),Se=L(3900),Ue=L(4004),pe=L(6063);class re extends q.x{constructor(Ae=1/0,Me=1/0,we=pe.l){super(),this._bufferSize=Ae,this._windowTime=Me,this._timestampProvider=we,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Me===1/0,this._bufferSize=Math.max(1,Ae),this._windowTime=Math.max(1,Me)}next(Ae){const{isStopped:Me,_buffer:we,_infiniteTimeWindow:gt,_timestampProvider:et,_windowTime:Qe}=this;Me||(we.push(Ae),!gt&&we.push(et.now()+Qe)),this._trimBuffer(),super.next(Ae)}_subscribe(Ae){this._throwIfClosed(),this._trimBuffer();const Me=this._innerSubscribe(Ae),{_infiniteTimeWindow:we,_buffer:gt}=this,et=gt.slice();for(let Qe=0;Qe<et.length&&!Ae.closed;Qe+=we?1:2)Ae.next(et[Qe]);return this._checkFinalizedStatuses(Ae),Me}_trimBuffer(){const{_bufferSize:Ae,_timestampProvider:Me,_buffer:we,_infiniteTimeWindow:gt}=this,et=(gt?1:2)*Ae;if(Ae<1/0&&et<we.length&&we.splice(0,we.length-et),!gt){const Qe=Me.now();let Ke=0;for(let jt=1;jt<we.length&&we[jt]<=Qe;jt+=2)Ke=jt;Ke&&we.splice(0,Ke+1)}}}var de=L(3099);function Oe(Xe,Ae,Me){let we,gt=!1;return Xe&&"object"==typeof Xe?({bufferSize:we=1/0,windowTime:Ae=1/0,refCount:gt=!1,scheduler:Me}=Xe):we=null!=Xe?Xe:1/0,(0,de.B)({connector:()=>new re(we,Ae,Me),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:gt})}var Ge=L(590),ut=L(576);function Pt(Xe,Ae){return(0,ut.m)(Ae)?(0,Se.w)(()=>Xe,Ae):(0,Se.w)(()=>Xe)}var be=L(9468),Ie=L(9300),he=L(8623),dt=L(2011),ft=L(6895),qe=L(6217),Je=L(9260);const ke=new c.OlP("angularfire2.auth.use-emulator"),H=new c.OlP("angularfire2.auth.settings"),De=new c.OlP("angularfire2.auth.tenant-id"),it=new c.OlP("angularfire2.auth.langugage-code"),Be=new c.OlP("angularfire2.auth.use-device-language"),_t=new c.OlP("angularfire.auth.persistence"),yt=(Xe,Ae,Me,we,gt,et,Qe,Ke)=>(0,dt.cc)(`${Xe.name}.auth`,"AngularFireAuth",Xe.name,()=>{const jt=Ae.runOutsideAngular(()=>Xe.auth());if(Me&&jt.useEmulator(...Me),we&&(jt.tenantId=we),jt.languageCode=gt,et&&jt.useDeviceLanguage(),Qe)for(const[Jt,tn]of Object.entries(Qe))jt.settings[Jt]=tn;return Ke&&jt.setPersistence(Ke),jt},[Me,we,gt,et,Qe,Ke]);let ot=(()=>{class Xe{constructor(Me,we,gt,et,Qe,Ke,jt,Jt,tn,Tt,Hn,Gn){const ar=new q.x,cn=(0,G.of)(void 0).pipe((0,ge.Q)(Qe.outsideAngular),(0,Se.w)(()=>et.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,3042)))),(0,Ue.U)(()=>(0,dt.on)(Me,et,we)),(0,Ue.U)(lr=>yt(lr,et,Ke,Jt,tn,Tt,jt,Hn)),Oe({bufferSize:1,refCount:!1}));if((0,ft.PM)(gt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{cn.pipe((0,Ge.P)()).subscribe();const hr=cn.pipe((0,Se.w)(Un=>Un.getRedirectResult().then(tr=>tr,()=>null)),he.iC,Oe({bufferSize:1,refCount:!1})),Cr=cn.pipe((0,Se.w)(Un=>new Te.y(tr=>({unsubscribe:et.runOutsideAngular(()=>Un.onAuthStateChanged(nn=>tr.next(nn),nn=>tr.error(nn),()=>tr.complete()))})))),Pr=cn.pipe((0,Se.w)(Un=>new Te.y(tr=>({unsubscribe:et.runOutsideAngular(()=>Un.onIdTokenChanged(nn=>tr.next(nn),nn=>tr.error(nn),()=>tr.complete()))}))));this.authState=hr.pipe(Pt(Cr),(0,be.R)(Qe.outsideAngular),(0,ge.Q)(Qe.insideAngular)),this.user=hr.pipe(Pt(Pr),(0,be.R)(Qe.outsideAngular),(0,ge.Q)(Qe.insideAngular)),this.idToken=this.user.pipe((0,Se.w)(Un=>Un?(0,Pe.D)(Un.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,Se.w)(Un=>Un?(0,Pe.D)(Un.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Fe.T)(hr,ar,this.authState.pipe((0,Ie.h)(Un=>!Un))).pipe((0,Ue.U)(Un=>null!=Un&&Un.user?Un:null),(0,be.R)(Qe.outsideAngular),(0,ge.Q)(Qe.insideAngular))}return(0,dt.pX)(this,cn,et,{spy:{apply:(lr,hr,Cr)=>{(lr.startsWith("signIn")||lr.startsWith("createUser"))&&Cr.then(Pr=>ar.next(Pr))}}})}}return Xe.\u0275fac=function(Me){return new(Me||Xe)(c.LFG(dt.Dh),c.LFG(dt.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(he.HU),c.LFG(ke,8),c.LFG(H,8),c.LFG(De,8),c.LFG(it,8),c.LFG(Be,8),c.LFG(_t,8),c.LFG(qe.nm,8))},Xe.\u0275prov=c.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"any"}),Xe})(),at=(()=>{class Xe{constructor(){Je.Z.registerVersion("angularfire",he.q4.full,"auth-compat")}}return Xe.\u0275fac=function(Me){return new(Me||Xe)},Xe.\u0275mod=c.oAB({type:Xe}),Xe.\u0275inj=c.cJS({providers:[ot]}),Xe})()},1762:(_n,It,L)=>{"use strict";L.d(It,{ST:()=>kp,yb:()=>f_});var c=L(4650),q=L(4986),G=L(9751),Te=L(8996),Pe=L(9646),Fe=L(8623),ge=L(8675),Se=L(4482),Ue=L(5403);function pe(){return(0,Se.e)((r,e)=>{let t,s=!1;r.subscribe((0,Ue.x)(e,d=>{const g=t;t=d,s&&e.next([g,d]),s=!0}))})}var H,re=L(4004),de=L(5026),Oe=L(1884),Ge=L(9300),ut=L(2011),Pt=L(6895),Ie=(L(3042),L(3942)),he=L(5861),dt=L(2951),ft=L(4859),qe=L(1877),Je=L(2090),Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke={},De=De||{},it=Le||self;function Be(){}function _t(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function yt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var at="closure_uid_"+(1e9*Math.random()>>>0),Xe=0;function Ae(r,e,t){return r.call.apply(r.bind,arguments)}function Me(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,s),r.apply(e,d)}}return function(){return r.apply(e,arguments)}}function we(r,e,t){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ae:Me).apply(null,arguments)}function gt(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function et(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,d,g){for(var w=Array(arguments.length-2),P=2;P<arguments.length;P++)w[P-2]=arguments[P];return e.prototype[d].apply(s,w)}}function Qe(){this.s=this.s,this.o=this.o}Qe.prototype.s=!1,Qe.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function ot(r){Object.prototype.hasOwnProperty.call(r,at)&&r[at]||(r[at]=++Xe)}(this)},Qe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jt=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Jt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function tn(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(_t(s)){const d=r.length||0,g=s.length||0;r.length=d+g;for(let w=0;w<g;w++)r[d+w]=s[w]}else r.push(s)}}function Tt(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var Hn=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{it.addEventListener("test",Be,e),it.removeEventListener("test",Be,e)}catch(t){}return r}();function Gn(r){return/^[\s\xa0]*$/.test(r)}var ar=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function cn(r,e){return r<e?-1:r>e?1:0}function lr(){var r=it.navigator;return r&&(r=r.userAgent)?r:""}function hr(r){return-1!=lr().indexOf(r)}function Cr(r){return Cr[" "](r),r}function Pr(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}Cr[" "]=Be;var Fr,r,Un=hr("Opera"),tr=hr("Trident")||hr("MSIE"),nn=hr("Edge"),ui=nn||tr,ei=hr("Gecko")&&!(-1!=lr().toLowerCase().indexOf("webkit")&&!hr("Edge"))&&!(hr("Trident")||hr("MSIE"))&&!hr("Edge"),Nr=-1!=lr().toLowerCase().indexOf("webkit")&&!hr("Edge");function Dr(){var r=it.document;return r?r.documentMode:void 0}e:{var Fn="",Cn=(r=lr(),ei?/rv:([^\);]+)(\)|;)/.exec(r):nn?/Edge\/([\d\.]+)/.exec(r):tr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Nr?/WebKit\/(\S+)/.exec(r):Un?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Cn&&(Fn=Cn?Cn[1]:""),tr){var mn=Dr();if(null!=mn&&mn>parseFloat(Fn)){Fr=String(mn);break e}}Fr=Fn}var Wn={},Ir=it.document&&tr&&(Dr()||parseInt(Fr,10))||void 0;function oi(r,e){if(Tt.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(ei){e:{try{Cr(e.nodeName);var d=!0;break e}catch(g){}d=!1}d||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:xr[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&oi.$.h.call(this)}}et(oi,Tt);var xr={2:"touch",3:"pen",4:"mouse"};oi.prototype.h=function(){oi.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var ti="closure_listenable_"+(1e6*Math.random()|0),Dn=0;function ai(r,e,t,s,d){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=d,this.key=++Dn,this.fa=this.ia=!1}function pi(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function gr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function zr(r){const e={};for(const t in r)e[t]=r[t];return e}const $t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(r,e){let t,s;for(let d=1;d<arguments.length;d++){for(t in s=arguments[d],s)r[t]=s[t];for(let g=0;g<$t.length;g++)t=$t[g],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function rt(r){this.src=r,this.g={},this.h=0}function Xt(r,e){var t=e.type;if(t in r.g){var g,s=r.g[t],d=jt(s,e);(g=0<=d)&&Array.prototype.splice.call(s,d,1),g&&(pi(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Lt(r,e,t,s){for(var d=0;d<r.length;++d){var g=r[d];if(!g.fa&&g.listener==e&&g.capture==!!t&&g.la==s)return d}return-1}rt.prototype.add=function(r,e,t,s,d){var g=r.toString();(r=this.g[g])||(r=this.g[g]=[],this.h++);var w=Lt(r,e,s,d);return-1<w?(e=r[w],t||(e.ia=!1)):((e=new ai(e,this.src,g,!!s,d)).ia=t,r.push(e)),e};var _e="closure_lm_"+(1e6*Math.random()|0),me={};function He(r,e,t,s,d){if(s&&s.once)return yn(r,e,t,s,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)He(r,e[g],t,s,d);return null}return t=ye(t),r&&r[ti]?r.O(e,t,yt(s)?!!s.capture:!!s,d):At(r,e,t,!1,s,d)}function At(r,e,t,s,d,g){if(!e)throw Error("Invalid event type");var w=yt(d)?!!d.capture:!!d,P=kt(r);if(P||(r[_e]=P=new rt(r)),(t=P.add(e,t,s,w,g)).proxy)return t;if(s=function pt(){const e=Ye;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Hn||(d=w),void 0===d&&(d=!1),r.addEventListener(e.toString(),s,d);else if(r.attachEvent)r.attachEvent(fe(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function yn(r,e,t,s,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)yn(r,e[g],t,s,d);return null}return t=ye(t),r&&r[ti]?r.P(e,t,yt(s)?!!s.capture:!!s,d):At(r,e,t,!0,s,d)}function $e(r,e,t,s,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)$e(r,e[g],t,s,d);else s=yt(s)?!!s.capture:!!s,t=ye(t),r&&r[ti]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Lt(g=r.g[e],t,s,d))&&(pi(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete r.g[e],r.h--))):r&&(r=kt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Lt(e,t,s,d)),(t=-1<r?e[r]:null)&&Ve(t))}function Ve(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[ti])Xt(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(fe(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=kt(e))?(Xt(t,r),0==t.h&&(t.src=null,e[_e]=null)):pi(r)}}}function fe(r){return r in me?me[r]:me[r]="on"+r}function Ye(r,e){if(r.fa)r=!0;else{e=new oi(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Ve(r),r=t.call(s,e)}return r}function kt(r){return(r=r[_e])instanceof rt?r:null}var le="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(r){return"function"==typeof r?r:(r[le]||(r[le]=function(e){return r.handleEvent(e)}),r[le])}function St(){Qe.call(this),this.i=new rt(this),this.S=this,this.J=null}function vt(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Tt(e,r);else if(e instanceof Tt)e.target=e.target||r;else{var d=e;We(e=new Tt(s,r),d)}if(d=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];d=Ut(w,s,!0,e)&&d}if(d=Ut(w=e.g=r,s,!0,e)&&d,d=Ut(w,s,!1,e)&&d,t)for(g=0;g<t.length;g++)d=Ut(w=e.g=t[g],s,!1,e)&&d}function Ut(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.fa&&w.capture==t){var P=w.listener,z=w.la||w.src;w.ia&&Xt(r.i,w),d=!1!==P.call(z,s)&&d}}return d&&!s.defaultPrevented}et(St,Qe),St.prototype[ti]=!0,St.prototype.removeEventListener=function(r,e,t,s){$e(this,r,e,t,s)},St.prototype.N=function(){if(St.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)pi(t[s]);delete r.g[e],r.h--}}this.J=null},St.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},St.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var je=it.JSON.stringify;function Ne(){var r=ni;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Pn,Nt=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new un,r=>r.reset());class un{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sn(r){it.setTimeout(()=>{throw r},0)}function Kn(r,e){Pn||function cr(){var r=it.Promise.resolve(void 0);Pn=function(){r.then(mi)}}(),Qn||(Pn(),Qn=!0),ni.add(r,e)}var Qn=!1,ni=new class Ct{constructor(){this.h=this.g=null}add(e,t){const s=Nt.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function mi(){for(var r;r=Ne();){try{r.h.call(r.g)}catch(t){Sn(t)}var e=Nt;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Qn=!1}function li(r,e){St.call(this),this.h=r||1,this.g=e||it,this.j=we(this.qb,this),this.l=Date.now()}function Pi(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function Ji(r,e,t){if("function"==typeof r)t&&(r=we(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=we(r.handleEvent,r)}return 2147483647<Number(e)?-1:it.setTimeout(r,e||0)}function Zr(r){r.g=Ji(()=>{r.g=null,r.i&&(r.i=!1,Zr(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}et(li,St),(H=li.prototype).ga=!1,H.T=null,H.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(Pi(this),this.start()))}},H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},H.N=function(){li.$.N.call(this),Pi(this),delete this.g};class An extends Qe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zr(this)}N(){super.N(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(r){Qe.call(this),this.h=r,this.g={}}et(ir,Qe);var Xr=[];function Tr(r,e,t,s){Array.isArray(t)||(t&&(Xr[0]=t.toString()),t=Xr);for(var d=0;d<t.length;d++){var g=He(e,t[d],s||r.handleEvent,!1,r.h||r);if(!g)break;r.g[g.key]=g}}function Wi(r){gr(r.g,function(e,t){this.g.hasOwnProperty(t)&&Ve(e)},r),r.g={}}function te(){this.g=!0}function bt(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ce(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var d=s[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<d.length;w++)d[w]=""}}}return je(t)}catch(P){return e}}(r,t)+(s?" "+s:"")})}ir.prototype.N=function(){ir.$.N.call(this),Wi(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.Ea=function(){this.g=!1},te.prototype.info=function(){};var nt={},Et=null;function qt(){return Et=Et||new St}function Kt(r){Tt.call(this,nt.Ta,r)}function pn(r){const e=qt();vt(e,new Kt(e))}function kn(r,e){Tt.call(this,nt.STAT_EVENT,r),this.stat=e}function qn(r){const e=qt();vt(e,new kn(e,r))}function Vr(r,e){Tt.call(this,nt.Ua,r),this.size=e}function mr(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){r()},e)}nt.Ta="serverreachability",et(Kt,Tt),nt.STAT_EVENT="statevent",et(kn,Tt),nt.Ua="timingevent",et(Vr,Tt);var Bi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fs(){}function lt(){}fs.prototype.h=null;var $n,xt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yt(){Tt.call(this,"d")}function gn(){Tt.call(this,"c")}function jr(){}function dr(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new ir(this),this.P=as,this.V=new li(r=ui?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}et(Yt,Tt),et(gn,Tt),et(jr,fs),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},$n=new jr;var as=45e3,so={},Ni={};function Ki(r,e,t){r.L=1,r.v=ps(ts(e)),r.s=t,r.S=!0,cs(r,null)}function cs(r,e){r.G=Date.now(),Ro(r),r.A=ts(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),ks(t.i,"t",s),r.C=0,t=r.l.I,r.h=new Rr,r.g=qi(r.l,t?e:null,!r.s),0<r.O&&(r.M=new An(we(r.Pa,r,r.g),r.O)),Tr(r.U,r.g,"readystatechange",r.nb),e=r.I?zr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),pn(),function Ee(r,e,t,s,d,g){r.info(function(){if(r.g)if(g)for(var w="",P=g.split("&"),z=0;z<P.length;z++){var X=P[z].split("=");if(1<X.length){var ae=X[0];X=X[1];var Ze=ae.split("_");w=2<=Ze.length&&"type"==Ze[1]?w+(ae+"=")+X+"&":w+(ae+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+s+") [attempt "+d+"]: "+e+"\n"+t+"\n"+w})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Wo(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Ks(r,e,t){let d,s=!0;for(;!r.J&&r.C<t.length;){if(d=es(r,t),d==Ni){4==e&&(r.o=4,qn(14),s=!1),bt(r.j,r.m,null,"[Incomplete Response]");break}if(d==so){r.o=4,qn(15),bt(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}bt(r.j,r.m,d,null),ao(r,d)}Wo(r)&&d!=Ni&&d!=so&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,qn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),tl(e),e.L=!0,qn(11))):(bt(r.j,r.m,t,"[Invalid Chunked Response]"),Mo(r),ws(r))}function es(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Ni:(t=Number(e.substring(t,s)),isNaN(t)?so:(s+=1)+t>e.length?Ni:(e=e.substr(s,t),r.C=s+t,e))}function Ro(r){r.Y=Date.now()+r.P,oo(r,r.P)}function oo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=mr(we(r.lb,r),e)}function la(r){r.B&&(it.clearTimeout(r.B),r.B=null)}function ws(r){0==r.l.H||r.J||ja(r.l,r)}function Mo(r){la(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Pi(r.V),Wi(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function ao(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Gr(t.h,r)))if(!r.K&&Gr(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(X){s=null}if(Array.isArray(s)&&3==s.length){var d=s;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Da(t),Vs(t)}Oo(t),qn(18)}}else t.Fa=d[1],0<t.Fa-t.V&&37500>d[2]&&t.M&&0==t.A&&!t.v&&(t.v=mr(we(t.ib,t),6e3));if(1>=$s(t.h)&&t.na){try{t.na()}catch(X){}t.na=void 0}}else Qs(t,11)}else if((r.K||t.g==r)&&Da(t),!Gn(e))for(d=t.Ja.g.parse(e),e=0;e<d.length;e++){let X=d[e];if(t.V=X[0],X=X[1],2==t.H)if("c"==X[0]){t.J=X[1],t.oa=X[2];const ae=X[3];null!=ae&&(t.qa=ae,t.j.info("VER="+t.qa));const Ze=X[4];null!=Ze&&(t.Ga=Ze,t.j.info("SVER="+t.Ga));const Mt=X[5];null!=Mt&&"number"==typeof Mt&&0<Mt&&(t.K=s=1.5*Mt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const sn=r.g;if(sn){const Tn=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tn){var g=s.h;g.g||-1==Tn.indexOf("spdy")&&-1==Tn.indexOf("quic")&&-1==Tn.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(qo(g,g.h),g.h=null))}if(s.F){const Rn=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rn&&(s.Da=Rn,ri(s.G,s.F,Rn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var w=r;if((s=t).wa=Ta(s,s.I?s.oa:null,s.Y),w.K){rs(s.h,w);var P=w,z=s.K;z&&P.setTimeout(z),P.B&&(la(P),Ro(P)),s.g=w}else ba(s);0<t.i.length&&Ca(t)}else"stop"!=X[0]&&"close"!=X[0]||Qs(t,7);else 3==t.H&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?Qs(t,7):Qo(t):"noop"!=X[0]&&t.l&&t.l.Aa(X),t.A=0)}pn()}catch(X){}}function lo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(_t(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Pl(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(_t(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Eo(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(_t(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),d=s.length,g=0;g<d;g++)e.call(void 0,s[g],t&&t[g],r)}(H=dr.prototype).setTimeout=function(r){this.P=r},H.nb=function(r){r=r.target;const e=this.M;e&&3==$r(r)?e.l():this.Pa(r)},H.Pa=function(r){try{if(r==this.g)e:{const ae=$r(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ae)&&(3!=ae||ui||this.g&&(this.h.h||this.g.ja()||ms(this.g)))){this.J||4!=ae||7==e||pn(),la(this);var t=this.g.da();this.aa=t;t:if(Wo(this)){var s=ms(this.g);r="";var d=s.length,g=4==$r(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mo(this),ws(this);var w="";break t}this.h.i=new it.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:g&&e==d-1});s.splice(0,d),this.h.g+=r,this.C=0,w=this.h.g}else w=this.g.ja();if(this.i=200==t,function tt(r,e,t,s,d,g,w){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.W,ae,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var P,z=this.g;if((P=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gn(P)){var X=P;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,qn(12),Mo(this),ws(this);break e}bt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,t)}this.S?(Ks(this,ae,w),ui&&this.i&&3==ae&&(Tr(this.U,this.V,"tick",this.mb),this.V.start())):(bt(this.j,this.m,w,null),ao(this,w)),4==ae&&Mo(this),this.i&&!this.J&&(4==ae?ja(this.l,this):(this.i=!1,Ro(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,qn(12)):(this.o=0,qn(13)),Mo(this),ws(this)}}}catch(ae){}},H.mb=function(){if(this.g){var r=$r(this.g),e=this.g.ja();this.C<e.length&&(la(this),Ks(this,r,e),this.i&&4!=r&&Ro(this))}},H.cancel=function(){this.J=!0,Mo(this)},H.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ht(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(pn(),qn(17)),Mo(this),this.o=2,ws(this)):oo(this,this.Y-r)};var us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qs(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof qs){this.h=void 0!==e?e:r.h,Ys(this,r.j),this.s=r.s,this.g=r.g,ua(this,r.m),this.l=r.l,e=r.i;var t=new Ss;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ds(this,t),this.o=r.o}else r&&(t=String(r).match(us))?(this.h=!!e,Ys(this,t[1]||"",!0),this.s=Io(t[2]||""),this.g=Io(t[3]||"",!0),ua(this,t[4]),this.l=Io(t[5]||"",!0),ds(this,t[6]||"",!0),this.o=Io(t[7]||"")):(this.h=!!e,this.i=new Ss(null,this.h))}function ts(r){return new qs(r)}function Ys(r,e,t){r.j=t?Io(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function ua(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function ds(r,e,t){e instanceof Ss?(r.i=e,function Ko(r,e){e&&!r.j&&(As(r),r.i=null,r.g.forEach(function(t,s){var d=s.toLowerCase();s!=d&&(Di(this,s),ks(this,d,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Fs(e,wo)),r.i=new Ss(e,r.h))}function ri(r,e,t){r.i.set(e,t)}function ps(r){return ri(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Io(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Fs(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,co),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function co(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}qs.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Fs(e,wa,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Fs(e,wa,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Fs(t,"/"==t.charAt(0)?da:ns,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Fs(t,Ja)),r.join("")};var wa=/[#\/\?@]/g,ns=/[#\?:]/g,da=/[#\?]/g,wo=/[#\?@]/g,Ja=/#/g;function Ss(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function As(r){r.g||(r.g=new Map,r.h=0,r.i&&function ca(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),d=null;if(0<=s){var g=r[t].substring(0,s);d=r[t].substring(s+1)}else g=r[t];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Di(r,e){As(r),e=Ti(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Ls(r,e){return As(r),e=Ti(r,e),r.g.has(e)}function ks(r,e,t){Di(r,e),0<t.length&&(r.i=null,r.g.set(Ti(r,e),Jt(t)),r.h+=t.length)}function Ti(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Ui(r){this.l=r||Ua,r=it.PerformanceNavigationTiming?0<(r=it.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(it.g&&it.g.Ka&&it.g.Ka()&&it.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(H=Ss.prototype).add=function(r,e){As(this),this.i=null,r=Ti(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},H.forEach=function(r,e){As(this),this.g.forEach(function(t,s){t.forEach(function(d){r.call(e,d,s,this)},this)},this)},H.sa=function(){As(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const d=r[s];for(let g=0;g<d.length;g++)t.push(e[s])}return t},H.Z=function(r){As(this);let e=[];if("string"==typeof r)Ls(this,r)&&(e=e.concat(this.g.get(Ti(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},H.set=function(r,e){return As(this),this.i=null,Ls(this,r=Ti(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},H.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},H.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const g=encodeURIComponent(String(s)),w=this.Z(s);for(s=0;s<w.length;s++){var d=g;""!==w[s]&&(d+="="+encodeURIComponent(String(w[s]))),r.push(d)}}return this.i=r.join("&")};var Ua=10;function uo(r){return!!r.h||!!r.g&&r.g.size>=r.j}function $s(r){return r.h?1:r.g?r.g.size:0}function Gr(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function qo(r,e){r.g?r.g.add(e):r.h=e}function rs(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Va(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Jt(r.i)}function gs(){}function Yo(){this.g=new gs}function Co(r,e,t){const s=t||"";try{lo(r,function(d,g){let w=d;yt(d)&&(w=je(d)),e.push(s+g+"="+encodeURIComponent(w))})}catch(d){throw e.push(s+"type="+encodeURIComponent("_badmap")),d}}function ho(r,e,t,s,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(s)}catch(g){}}function Xs(r){this.l=r.fc||null,this.j=r.ob||!1}function Bs(r,e){St.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=Zo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ui.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},gs.prototype.stringify=function(r){return it.JSON.stringify(r,void 0)},gs.prototype.parse=function(r){return it.JSON.parse(r,void 0)},et(Xs,fs),Xs.prototype.g=function(){return new Bs(this.l,this.j)},Xs.prototype.i=function(r){return function(){return r}}({}),et(Bs,St);var Zo=0;function ha(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function xi(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Us(r)}function Us(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(H=Bs.prototype).open=function(r,e){if(this.readyState!=Zo)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Us(this)},H.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||it).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xi(this)),this.readyState=Zo},H.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ha(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},H.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?xi(this):Us(this),3==this.readyState&&ha(this)}},H.Za=function(r){this.g&&(this.response=this.responseText=r,xi(this))},H.Ya=function(r){this.g&&(this.response=r,xi(this))},H.ka=function(){this.g&&xi(this)},H.setRequestHeader=function(r,e){this.v.append(r,e)},H.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},H.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var y=it.JSON.parse;function I(r){St.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=f,this.L=this.M=!1}et(I,St);var f="",T=/^https?$/i,K=["POST","PUT"];function an(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,En(r),Sr(r)}function En(r){r.F||(r.F=!0,vt(r,"complete"),vt(r,"error"))}function Xn(r){if(r.h&&typeof De<"u"&&(!r.C[1]||4!=$r(r)||2!=r.da()))if(r.v&&4==$r(r))Ji(r.La,0,r);else if(vt(r,"readystatechange"),4==$r(r)){r.h=!1;try{const P=r.da();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===P){var d=String(r.I).match(us)[1]||null;if(!d&&it.self&&it.self.location){var g=it.self.location.protocol;d=g.substr(0,g.length-1)}s=!T.test(d?d.toLowerCase():"")}t=s}if(t)vt(r,"complete"),vt(r,"success");else{r.m=6;try{var w=2<$r(r)?r.g.statusText:""}catch(z){w=""}r.j=w+" ["+r.da()+"]",En(r)}}finally{Sr(r)}}}function Sr(r,e){if(r.g){di(r);const t=r.g,s=r.C[0]?Be:null;r.g=null,r.C=null,e||vt(r,"ready");try{t.onreadystatechange=s}catch(d){}}}function di(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(it.clearTimeout(r.A),r.A=null)}function $r(r){return r.g?r.g.readyState:0}function ms(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case f:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cs(r){let e="";return gr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function wi(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Cs(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ri(r,e,t))}function Fi(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Xo(r){this.Ga=0,this.i=[],this.j=new te,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fi("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fi("baseRetryDelayMs",5e3,r),this.hb=Fi("retryDelaySeedMs",1e4,r),this.eb=Fi("forwardChannelMaxRetries",2,r),this.xa=Fi("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new Ui(r&&r.concurrentRequestLimit),this.Ja=new Yo,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Qo(r){if(el(r),3==r.H){var e=r.W++,t=ts(r.G);ri(t,"SID",r.J),ri(t,"RID",e),ri(t,"TYPE","terminate"),Po(r,t),(e=new dr(r,r.j,e,void 0)).L=2,e.v=ps(ts(t)),t=!1,it.navigator&&it.navigator.sendBeacon&&(t=it.navigator.sendBeacon(e.v.toString(),"")),!t&&it.Image&&((new Image).src=e.v,t=!0),t||(e.g=qi(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ro(e)}Jo(r)}function Vs(r){r.g&&(tl(r),r.g.cancel(),r.g=null)}function el(r){Vs(r),r.u&&(it.clearTimeout(r.u),r.u=null),Da(r),r.h.cancel(),r.m&&("number"==typeof r.m&&it.clearTimeout(r.m),r.m=null)}function Ca(r){uo(r.h)||r.m||(r.m=!0,Kn(r.Na,r),r.C=0)}function ml(r,e){var t;t=e?e.m:r.W++;const s=ts(r.G);ri(s,"SID",r.J),ri(s,"RID",t),ri(s,"AID",r.V),Po(r,s),r.o&&r.s&&wi(s,r.o,r.s),t=new dr(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=yl(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),qo(r.h,t),Ki(t,s,e)}function Po(r,e){r.ma&&gr(r.ma,function(t,s){ri(e,s,t)}),r.l&&lo({},function(t,s){ri(e,s,t)})}function yl(r,e,t){t=Math.min(r.i.length,t);var s=r.l?we(r.l.Va,r.l,r):null;e:{var d=r.i;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=d[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let P=!0;for(let z=0;z<t;z++){let X=d[z].h;const ae=d[z].g;if(X-=g,0>X)g=Math.max(0,d[z].h-100),P=!1;else try{Co(ae,w,"req"+X+"_")}catch(Ze){s&&s(ae)}}if(P){s=w.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function ba(r){r.g||r.u||(r.ba=1,Kn(r.Ma,r),r.A=0)}function Oo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=mr(we(r.Ma,r),ko(r,r.A)),r.A++,0))}function tl(r){null!=r.B&&(it.clearTimeout(r.B),r.B=null)}function fa(r){r.g=new dr(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=ts(r.wa);ri(e,"RID","rpc"),ri(e,"SID",r.J),ri(e,"CI",r.M?"0":"1"),ri(e,"AID",r.V),ri(e,"TYPE","xmlhttp"),Po(r,e),r.o&&r.s&&wi(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ps(ts(e)),t.s=null,t.S=!0,cs(t,r)}function Da(r){null!=r.v&&(it.clearTimeout(r.v),r.v=null)}function ja(r,e){var t=null;if(r.g==e){Da(r),tl(r),r.g=null;var s=2}else{if(!Gr(r.h,e))return;t=e.F,rs(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var d=r.C;vt(s=qt(),new Vr(s,t)),Ca(r)}else ba(r);else if(3==(d=e.o)||0==d&&0<r.ta||!(1==s&&function ql(r,e){return!($s(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=mr(we(r.Na,r,e),ko(r,r.C)),r.C++,0)))}(r,e)||2==s&&Oo(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),d){case 1:Qs(r,5);break;case 4:Qs(r,10);break;case 3:Qs(r,6);break;default:Qs(r,2)}}function ko(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Qs(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=we(r.pb,r);t||(t=new qs("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||Ys(t,"https"),ps(t)),function Er(r,e){const t=new te;if(it.Image){const s=new Image;s.onload=gt(ho,t,s,"TestLoadImage: loaded",!0,e),s.onerror=gt(ho,t,s,"TestLoadImage: error",!1,e),s.onabort=gt(ho,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=gt(ho,t,s,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else qn(2);r.H=0,r.l&&r.l.za(e),Jo(r),el(r)}function Jo(r){if(r.H=0,r.pa=[],r.l){const e=Va(r.h);(0!=e.length||0!=r.i.length)&&(tn(r.pa,e),tn(r.pa,r.i),r.h.i.length=0,Jt(r.i),r.i.length=0),r.l.ya()}}function Ta(r,e,t){var s=t instanceof qs?ts(t):new qs(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),ua(s,s.m);else{var d=it.location;s=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var g=new qs(null,void 0);s&&Ys(g,s),e&&(g.g=e),d&&ua(g,d),t&&(g.l=t),s=g}return e=r.Da,(t=r.F)&&e&&ri(s,t,e),ri(s,"VER",r.qa),Po(r,s),s}function qi(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new I(t&&r.Ha&&!r.va?new Xs({ob:!0}):r.va)).Oa(r.I),e}function No(){}function Yi(){if(tr&&!(10<=Number(Ir)))throw Error("Environmental error: no available transport.")}function Ri(r,e){St.call(this),this.g=new Xo(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Gn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new fo(this)}function Hr(r){Yt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Uc(){gn.call(this),this.status=1}function fo(r){this.g=r}function ys(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fo(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var d=0;16>d;++d)s[d]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(d=0;16>d;++d)s[d]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var g=r.g[3],w=(e=r.g[0])+(g^(t=r.g[1])&((d=r.g[2])^g))+s[0]+3614090360&4294967295;w=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=(t=(d=(g=(e=t+(w<<7&4294967295|w>>>25))+((w=g+(d^e&(t^d))+s[1]+3905402710&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^g&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(g^e))+s[3]+3250441966&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(d^g))+s[4]+4118548399&4294967295)<<7&4294967295|w>>>25))+((w=g+(d^e&(t^d))+s[5]+1200080426&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^g&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(g^e))+s[7]+4249261313&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(d^g))+s[8]+1770035416&4294967295)<<7&4294967295|w>>>25))+((w=g+(d^e&(t^d))+s[9]+2336552879&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^g&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(g^e))+s[11]+2304563134&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(d^g))+s[12]+1804603682&4294967295)<<7&4294967295|w>>>25))+((w=g+(d^e&(t^d))+s[13]+4254626195&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^g&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(g^e))+s[15]+1236535329&4294967295)<<22&4294967295|w>>>10))+((w=e+(d^g&(t^d))+s[1]+4129170786&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^d&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(g^e))+s[11]+643717713&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(d^g))+s[0]+3921069994&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^g&(t^d))+s[5]+3593408605&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^d&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(g^e))+s[15]+3634488961&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(d^g))+s[4]+3889429448&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^g&(t^d))+s[9]+568446438&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^d&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(g^e))+s[3]+4107603335&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(d^g))+s[8]+1163531501&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^g&(t^d))+s[13]+2850285829&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^d&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(g^e))+s[7]+1735328473&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(d^g))+s[12]+2368359562&4294967295)<<20&4294967295|w>>>12))+((w=e+(t^d^g)+s[5]+4294588738&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^d)+s[8]+2272392833&4294967295)<<11&4294967295|w>>>21))+((w=d+(g^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^g^e)+s[14]+4259657740&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^g)+s[1]+2763975236&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^d)+s[4]+1272893353&4294967295)<<11&4294967295|w>>>21))+((w=d+(g^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^g^e)+s[10]+3200236656&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^g)+s[13]+681279174&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^d)+s[0]+3936430074&4294967295)<<11&4294967295|w>>>21))+((w=d+(g^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^g^e)+s[6]+76029189&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^g)+s[9]+3654602809&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^d)+s[12]+3873151461&4294967295)<<11&4294967295|w>>>21))+((w=d+(g^e^t)+s[15]+530742520&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^g^e)+s[2]+3299628645&4294967295)<<23&4294967295|w>>>9))+((w=e+(d^(t|~g))+s[0]+4096336452&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~d))+s[7]+1126891415&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(g|~t))+s[14]+2878612391&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(d|~e))+s[5]+4237533241&4294967295)<<21&4294967295|w>>>11))+((w=e+(d^(t|~g))+s[12]+1700485571&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~d))+s[3]+2399980690&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(g|~t))+s[10]+4293915773&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(d|~e))+s[1]+2240044497&4294967295)<<21&4294967295|w>>>11))+((w=e+(d^(t|~g))+s[8]+1873313359&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~d))+s[15]+4264355552&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(g|~t))+s[6]+2734768916&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(d|~e))+s[13]+1309151649&4294967295)<<21&4294967295|w>>>11))+((g=(e=t+((w=e+(d^(t|~g))+s[4]+4149444226&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~d))+s[11]+3174756917&4294967295)<<10&4294967295|w>>>22))^((d=g+((w=d+(e^(g|~t))+s[2]+718787259&4294967295)<<15&4294967295|w>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(d+(w<<21&4294967295|w>>>11))&4294967295,r.g[2]=r.g[2]+d&4294967295,r.g[3]=r.g[3]+g&4294967295}function hi(r,e){this.h=e;for(var t=[],s=!0,d=r.length-1;0<=d;d--){var g=0|r[d];s&&g==e||(t[d]=g,s=!1)}this.g=t}(H=I.prototype).Oa=function(r){this.M=r},H.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$n.g(),this.C=function mt(r){return r.h||(r.h=r.i())}(this.u?this.u:$n),this.g.onreadystatechange=we(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(g){return void an(this,g)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var d in s)t.set(d,s[d]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const g of s.keys())t.set(g,s.get(g))}s=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),d=it.FormData&&r instanceof it.FormData,!(0<=jt(K,e))||s||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,w]of t)this.g.setRequestHeader(g,w);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{di(this),0<this.B&&((this.L=function ze(r){return tr&&function Lr(){return Pr(Wn,9,function(){let r=0;const e=ar(String(Fr)).split("."),t=ar("9").split("."),s=Math.max(e.length,t.length);for(let w=0;0==r&&w<s;w++){var d=e[w]||"",g=t[w]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;r=cn(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||cn(0==d[2].length,0==g[2].length)||cn(d[2],g[2]),d=d[3],g=g[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=we(this.ua,this)):this.A=Ji(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(g){an(this,g)}},H.ua=function(){typeof De<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))},H.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,vt(this,"complete"),vt(this,"abort"),Sr(this))},H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sr(this,!0)),I.$.N.call(this)},H.La=function(){this.s||(this.G||this.v||this.l?Xn(this):this.kb())},H.kb=function(){Xn(this)},H.da=function(){try{return 2<$r(this)?this.g.status:-1}catch(r){return-1}},H.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},H.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),y(e)}},H.Ia=function(){return this.m},H.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(H=Xo.prototype).qa=8,H.H=1,H.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const d=new dr(this,this.j,r,void 0);let g=this.s;if(this.U&&(g?(g=zr(g),We(g,this.U)):g=this.U),null!==this.o||this.O||(d.I=g,g=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yl(this,d,e),ri(t=ts(this.G),"RID",r),ri(t,"CVER",22),this.F&&ri(t,"X-HTTP-Session-Id",this.F),Po(this,t),g&&(this.O?e="headers="+encodeURIComponent(String(Cs(g)))+"&"+e:this.o&&wi(t,this.o,g)),qo(this.h,d),this.bb&&ri(t,"TYPE","init"),this.P?(ri(t,"$req",e),ri(t,"SID","null"),d.ba=!0,Ki(d,t,null)):Ki(d,t,e),this.H=2}}else 3==this.H&&(r?ml(this,r):0==this.i.length||uo(this.h)||ml(this))},H.Ma=function(){if(this.u=null,fa(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=mr(we(this.jb,this),r)}},H.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,qn(10),Vs(this),fa(this))},H.ib=function(){null!=this.v&&(this.v=null,Vs(this),Oo(this),qn(19))},H.pb=function(r){r?(this.j.info("Successfully pinged google.com"),qn(2)):(this.j.info("Failed to ping google.com"),qn(1))},(H=No.prototype).Ba=function(){},H.Aa=function(){},H.za=function(){},H.ya=function(){},H.Va=function(){},Yi.prototype.g=function(r,e){return new Ri(r,e)},et(Ri,St),Ri.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;qn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=Ta(r,null,r.Y),Ca(r)},Ri.prototype.close=function(){Qo(this.g)},Ri.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=je(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&Ca(e)},Ri.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,Ri.$.N.call(this)},et(Hr,Yt),et(Uc,gn),et(fo,No),fo.prototype.Ba=function(){vt(this.g,"a")},fo.prototype.Aa=function(r){vt(this.g,new Hr(r))},fo.prototype.za=function(r){vt(this.g,new Uc)},fo.prototype.ya=function(){vt(this.g,"b")},et(ys,function Yl(){this.blockSize=-1}),ys.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ys.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,d=this.h,g=0;g<e;){if(0==d)for(;g<=t;)Fo(this,r,g),g+=this.blockSize;if("string"==typeof r){for(;g<e;)if(s[d++]=r.charCodeAt(g++),d==this.blockSize){Fo(this,s),d=0;break}}else for(;g<e;)if(s[d++]=r[g++],d==this.blockSize){Fo(this,s),d=0;break}}this.h=d,this.i+=e},ys.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Zl={};function pa(r){return-128<=r&&128>r?Pr(Zl,r,function(e){return new hi([0|e],0>e?-1:0)}):new hi([0|r],0>r?-1:0)}function F(r){if(isNaN(r)||!isFinite(r))return ne;if(0>r)return vr(F(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=$;return new hi(e,0)}var $=4294967296,ne=pa(0),Re=pa(1),Wt=pa(16777216);function en(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Bn(r){return-1==r.h}function vr(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new hi(t,~r.h).add(Re)}function qr(r,e){return r.add(vr(e))}function Mr(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wr(r,e){this.g=r,this.h=e}function Zi(r,e){if(en(e))throw Error("division by zero");if(en(r))return new wr(ne,ne);if(Bn(r))return e=Zi(vr(r),e),new wr(vr(e.g),vr(e.h));if(Bn(e))return e=Zi(r,vr(e)),new wr(vr(e.g),e.h);if(30<r.g.length){if(Bn(r)||Bn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Re,s=e;0>=s.X(r);)t=Ci(t),s=Ci(s);var d=Vi(t,1),g=Vi(s,1);for(s=Vi(s,2),t=Vi(t,2);!en(s);){var w=g.add(s);0>=w.X(r)&&(d=d.add(t),g=w),s=Vi(s,1),t=Vi(t,1)}return e=qr(r,d.R(e)),new wr(d,e)}for(d=ne;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),w=(g=F(t)).R(e);Bn(w)||0<w.X(r);)w=(g=F(t-=s)).R(e);en(g)&&(g=Re),d=d.add(g),r=qr(r,w)}return new wr(d,r)}function Ci(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new hi(t,r.h)}function Vi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,d=[],g=0;g<s;g++)d[g]=0<e?r.D(g+t)>>>e|r.D(g+t+1)<<32-e:r.D(g+t);return new hi(d,r.h)}(H=hi.prototype).ea=function(){if(Bn(this))return-vr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:$+s)*e,e*=$}return r},H.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(en(this))return"0";if(Bn(this))return"-"+vr(this).toString(r);for(var e=F(Math.pow(r,6)),t=this,s="";;){var d=Zi(t,e).g,g=((0<(t=qr(t,d.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(en(t=d))return g+s;for(;6>g.length;)g="0"+g;s=g+s}},H.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},H.X=function(r){return Bn(r=qr(this,r))?-1:en(r)?0:1},H.abs=function(){return Bn(this)?vr(this):this},H.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,d=0;d<=e;d++){var g=s+(65535&this.D(d))+(65535&r.D(d)),w=(g>>>16)+(this.D(d)>>>16)+(r.D(d)>>>16);s=w>>>16,t[d]=(w&=65535)<<16|(g&=65535)}return new hi(t,-2147483648&t[t.length-1]?-1:0)},H.R=function(r){if(en(this)||en(r))return ne;if(Bn(this))return Bn(r)?vr(this).R(vr(r)):vr(vr(this).R(r));if(Bn(r))return vr(this.R(vr(r)));if(0>this.X(Wt)&&0>r.X(Wt))return F(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var d=0;d<r.g.length;d++){var g=this.D(s)>>>16,w=65535&this.D(s),P=r.D(d)>>>16,z=65535&r.D(d);t[2*s+2*d]+=w*z,Mr(t,2*s+2*d),t[2*s+2*d+1]+=g*z,Mr(t,2*s+2*d+1),t[2*s+2*d+1]+=w*P,Mr(t,2*s+2*d+1),t[2*s+2*d+2]+=g*P,Mr(t,2*s+2*d+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new hi(t,0)},H.gb=function(r){return Zi(this,r).h},H.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new hi(t,this.h&r.h)},H.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new hi(t,this.h|r.h)},H.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new hi(t,this.h^r.h)},Yi.prototype.createWebChannel=Yi.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,fr.COMPLETE="complete",lt.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",St.prototype.listen=St.prototype.O,I.prototype.listenOnce=I.prototype.P,I.prototype.getLastError=I.prototype.Sa,I.prototype.getLastErrorCode=I.prototype.Ia,I.prototype.getStatus=I.prototype.da,I.prototype.getResponseJson=I.prototype.Wa,I.prototype.getResponseText=I.prototype.ja,I.prototype.send=I.prototype.ha,I.prototype.setWithCredentials=I.prototype.Oa,ys.prototype.digest=ys.prototype.l,ys.prototype.reset=ys.prototype.reset,ys.prototype.update=ys.prototype.j,hi.prototype.add=hi.prototype.add,hi.prototype.multiply=hi.prototype.R,hi.prototype.modulo=hi.prototype.gb,hi.prototype.compare=hi.prototype.X,hi.prototype.toNumber=hi.prototype.ea,hi.prototype.toString=hi.prototype.toString,hi.prototype.getBits=hi.prototype.D,hi.fromNumber=F,hi.fromString=function Y(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return vr(Y(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=F(Math.pow(e,8)),s=ne,d=0;d<r.length;d+=8){var g=Math.min(8,r.length-d),w=parseInt(r.substring(d,d+g),e);8>g?(g=F(Math.pow(e,g)),s=s.R(g).add(F(w))):s=(s=s.R(t)).add(F(w))}return s};var ga=ke.createWebChannelTransport=function(){return new Yi},gi=ke.getStatEventTarget=function(){return qt()},bs=ke.ErrorCode=Bi,Oi=ke.EventType=fr,po=ke.Event=nt,Lo=ke.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nl=ke.FetchXmlHttpFactory=Xs,Sa=ke.WebChannel=lt,vl=ke.XhrIo=I,rl=ke.Md5=ys,Aa=ke.Integer=hi;const pc="@firebase/firestore";class Xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");let il="9.21.0";const is=new qe.Yd("@firebase/firestore");function gc(){return is.logLevel}function hn(r,...e){if(is.logLevel<=qe.in.DEBUG){const t=e.map(_l);is.debug(`Firestore (${il}): ${r}`,...t)}}function ss(r,...e){if(is.logLevel<=qe.in.ERROR){const t=e.map(_l);is.error(`Firestore (${il}): ${r}`,...t)}}function fi(r,...e){if(is.logLevel<=qe.in.WARN){const t=e.map(_l);is.warn(`Firestore (${il}): ${r}`,...t)}}function _l(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function Zn(r="Unexpected state"){const e=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: `+r;throw ss(e),new Error(e)}function or(r,e){r||Zn()}function Nn(r,e){return r}const Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dn extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ji{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ea{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xi.UNAUTHENTICATED))}shutdown(){}}class Ha{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xl{constructor(e){this.t=e,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let d=this.i;const g=X=>this.i!==d?(d=this.i,t(X)):Promise.resolve();let w=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new ji,e.enqueueRetryable(()=>g(this.currentUser))};const P=()=>{const X=w;e.enqueueRetryable((0,he.Z)(function*(){yield X.promise,yield g(s.currentUser)}))},z=X=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(X=>z(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?z(X):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new ji)}},0),P()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(or("string"==typeof s.accessToken),new ea(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return or(null===e||"string"==typeof e),new Xi(e)}}class El{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Xi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Vc{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new El(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class za{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Il{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=g=>{null!=g.error&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.T;return this.T=g.token,hn("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const d=g=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.I.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.I.getImmediate({optional:!0});g?d(g):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(or("string"==typeof t.token),this.T=t.token,new za(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vc(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class ta{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const d=vc(40);for(let g=0;g<d.length;++g)s.length<20&&d[g]<t&&(s+=e.charAt(d[g]%e.length))}return s}}function pr(r,e){return r<e?-1:r>e?1:0}function Js(r,e,t){return r.length===e.length&&r.every((s,d)=>t(s,e[d]))}function $o(r){return r+"\0"}class yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dn(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dn(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new dn(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dn(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yi.fromMillis(Date.now())}static fromDate(e){return yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new yi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nr(e)}static min(){return new nr(new yi(0,0))}static max(){return new nr(new yi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class go{constructor(e,t,s){void 0===t?t=0:t>e.length&&Zn(),void 0===s?s=e.length-t:s>e.length-t&&Zn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===go.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof go?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let d=0;d<s;d++){const g=e.get(d),w=t.get(d);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vi extends go{construct(e,t,s){return new vi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new dn(Bt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(d=>d.length>0))}return new vi(t)}static emptyPath(){return new vi([])}}const mu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends go{construct(e,t,s){return new Ar(e,t,s)}static isValidIdentifier(e){return mu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let s="",d=0;const g=()=>{if(0===s.length)throw new dn(Bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let w=!1;for(;d<e.length;){const P=e[d];if("\\"===P){if(d+1===e.length)throw new dn(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const z=e[d+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new dn(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=z,d+=2}else"`"===P?(w=!w,d++):"."!==P||w?(s+=P,d++):(g(),d++)}if(g(),w)throw new dn(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class On{constructor(e){this.path=e}static fromPath(e){return new On(vi.fromString(e))}static fromName(e){return new On(vi.fromString(e).popFirst(5))}static empty(){return new On(vi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new On(new vi(e.slice()))}}class Ql{constructor(e,t,s,d){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=d}}function _c(r){return r.fields.find(e=>2===e.kind)}function eo(r){return r.fields.filter(e=>2!==e.kind)}Ql.UNKNOWN_ID=-1;class Jl{constructor(e,t){this.fieldPath=e,this.kind=t}}class xa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xa(0,_i.min())}}function vu(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,d=nr.fromTimestamp(1e9===s?new yi(t+1,0):new yi(t,s));return new _i(d,On.empty(),e)}function mo(r){return new _i(r.readTime,r.key,-1)}class _i{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new _i(nr.min(),On.empty(),-1)}static max(){return new _i(nr.max(),On.empty(),-1)}}function ec(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=On.comparator(r.documentKey,e.documentKey),0!==t?t:pr(r.largestBatchId,e.largestBatchId))}const wl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vs(r){return na.apply(this,arguments)}function na(){return na=(0,he.Z)(function*(r){if(r.code!==Bt.FAILED_PRECONDITION||r.message!==wl)throw r;hn("LocalStore","Unexpectedly lost primary lease")}),na.apply(this,arguments)}class Ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ft((s,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,d)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ft?t:Ft.resolve(t)}catch(t){return Ft.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ft.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ft.reject(t)}static resolve(e){return new Ft((t,s)=>{t(e)})}static reject(e){return new Ft((t,s)=>{s(e)})}static waitFor(e){return new Ft((t,s)=>{let d=0,g=0,w=!1;e.forEach(P=>{++d,P.next(()=>{++g,w&&g===d&&t()},z=>s(z))}),w=!0,g===d&&t()})}static or(e){let t=Ft.resolve(!1);for(const s of e)t=t.next(d=>d?Ft.resolve(d):s());return t}static forEach(e,t){const s=[];return e.forEach((d,g)=>{s.push(t.call(this,d,g))}),this.waitFor(s)}static mapArray(e,t){return new Ft((s,d)=>{const g=e.length,w=new Array(g);let P=0;for(let z=0;z<g;z++){const X=z;t(e[X]).next(ae=>{w[X]=ae,++P,P===g&&s(w)},ae=>d(ae))}})}static doWhile(e,t){return new Ft((s,d)=>{const g=()=>{!0===e()?t().next(()=>{g()},d):s()};g()})}}class Ra{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new ji,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Or(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const d=b(s.target.error);this.R.reject(new Or(e,d))}}static open(e,t,s,d){try{return new Ra(t,e.transaction(d,s))}catch(g){throw new Or(t,g)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(hn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hi(t)}}class Br{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Br.S((0,Je.z$)())&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return hn("SimpleDb","Removing database:",e),A(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Je.hl)())return!1;if(Br.C())return!0;const e=(0,Je.z$)(),t=Br.S(e),s=0<t&&t<10,d=Br.N(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,he.Z)(function*(){return t.db||(hn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,d)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{s(w.target.result)},g.onblocked=()=>{d(new Or(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const P=w.target.error;d("VersionError"===P.name?new dn(Bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new dn(Bt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new Or(e,P))},g.onupgradeneeded=w=>{hn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.$(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{hn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,d){var g=this;return(0,he.Z)(function*(){const w="readonly"===t;let P=0;for(;;){++P;try{g.db=yield g.O(e);const z=Ra.open(g.db,e,w?"readonly":"readwrite",s),X=d(z).next(ae=>(z.P(),ae)).catch(ae=>(z.abort(ae),Ft.reject(ae))).toPromise();return X.catch(()=>{}),yield z.v,X}catch(z){const X=z,ae="FirebaseError"!==X.name&&P<3;if(hn("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ae),g.close(),!ae)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Si{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return A(this.L.delete())}}class Or extends dn{constructor(e,t){super(Bt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function js(r){return"IndexedDbTransactionError"===r.name}class Hi{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(hn("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(hn("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),A(s)}add(e){return hn("SimpleDb","ADD",this.store.name,e,e),A(this.store.add(e))}get(e){return A(this.store.get(e)).next(t=>(void 0===t&&(t=null),hn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return hn("SimpleDb","DELETE",this.store.name,e),A(this.store.delete(e))}count(){return hn("SimpleDb","COUNT",this.store.name),A(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const d=this.cursor(s),g=[];return this.W(d,(w,P)=>{g.push(P)}).next(()=>g)}{const d=this.store.getAll(s.range);return new Ft((g,w)=>{d.onerror=P=>{w(P.target.error)},d.onsuccess=P=>{g(P.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ft((d,g)=>{s.onerror=w=>{g(w.target.error)},s.onsuccess=w=>{d(w.target.result)}})}J(e,t){hn("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const d=this.cursor(s);return this.W(d,(g,w,P)=>P.delete())}X(e,t){let s;t?s=e:(s={},t=e);const d=this.cursor(s);return this.W(d,t)}Z(e){const t=this.cursor({});return new Ft((s,d)=>{t.onerror=g=>{const w=b(g.target.error);d(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(P=>{P?w.continue():s()}):s()}})}W(e,t){const s=[];return new Ft((d,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const P=w.target.result;if(!P)return void d();const z=new Si(P),X=t(P.primaryKey,P.value,z);if(X instanceof Ft){const ae=X.catch(Ze=>(z.done(),Ft.reject(Ze)));s.push(ae)}z.isDone?d():null===z.K?P.continue():P.continue(z.K)}}).next(()=>Ft.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function A(r){return new Ft((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const d=b(s.target.error);t(d)}})}let R=!1;function b(r){const e=Br.S((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new dn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return R||(R=!0,setTimeout(()=>{throw s},0)),s}}return r}class O{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;hn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{hn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){js(s)?hn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield vs(s)}yield t.et(6e4)}))}}class j{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let d=t,g=!0;return Ft.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!s.has(w))return hn("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,d).next(P=>{d-=P,s.add(w)});g=!1})).next(()=>t-d)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,s).next(g=>{const w=g.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(d,g)).next(P=>(hn("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,t,P))).next(()=>w.size)}))}rt(e,t){let s=e;return t.changes.forEach((d,g)=>{const w=mo(g);ec(w,s)>0&&(s=w)}),new _i(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Q=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>s.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function se(r){return null==r}function ct(r){return 0===r&&1/r==-1/0}function zt(r){return"number"==typeof r&&Number.isInteger(r)&&!ct(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function ln(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Vn(e)),e=Jn(r.get(t),e);return Vn(e)}function Jn(r,e){let t=e;const s=r.length;for(let d=0;d<s;d++){const g=r.charAt(d);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Vn(r){return r+"\x01\x01"}function Kr(r){const e=r.length;if(or(e>=2),2===e)return or("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),vi.emptyPath();const t=e-2,s=[];let d="";for(let g=0;g<e;){const w=r.indexOf("\x01",g);switch((w<0||w>t)&&Zn(),r.charAt(w+1)){case"\x01":const P=r.substring(g,w);let z;0===d.length?z=P:(d+=P,z=d,d=""),s.push(z);break;case"\x10":d+=r.substring(g,w),d+="\0";break;case"\x11":d+=r.substring(g,w+1);break;default:Zn()}g=w+2}return new vi(s)}const os=["userId","batchId"];function Ai(r,e){return[r,ln(e)]}function Do(r,e,t){return[r,ln(e),t]}const _s={},ma=["prefixPath","collectionGroup","readTime","documentId"],Ga=["prefixPath","collectionGroup","documentId"],ra=["collectionGroup","readTime","prefixPath","documentId"],to=["canonicalId","targetId"],Ic=["targetId","path"],wc=["path","targetId"],Wa=["collectionId","parent"],Ur=["indexId","uid"],tc=["uid","sequenceNumber"],Hc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kh=["indexId","uid","orderedDocumentKey"],Ma=["userId","collectionPath","documentId"],_u=["userId","collectionPath","largestBatchId"],Bo=["userId","collectionGroup","largestBatchId"],zc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ia=[...zc,"documentOverlays"],Gd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uo=Gd,Eu=[...Uo,"indexConfiguration","indexState","indexEntries"];class Cl extends jc{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ds(r,e){const t=Nn(r);return Br.M(t.at,e)}function Nh(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ya(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function bl(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class $i{constructor(e,t){this.comparator=e,this.root=t||N.EMPTY}insert(e,t){return new $i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,N.BLACK,null,null))}remove(e){return new $i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,N.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const d=this.comparator(e,s.key);if(0===d)return t+s.left.size;d<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gc(this.root,e,this.comparator,!0)}}class Gc{constructor(e,t,s,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class N{constructor(e,t,s,d,g){this.key=e,this.value=t,this.color=null!=s?s:N.RED,this.left=null!=d?d:N.EMPTY,this.right=null!=g?g:N.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,d,g){return new N(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=d?d:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let d=this;const g=s(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,t,s),null):0===g?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,s)),d.fixUp()}removeMin(){if(this.left.isEmpty())return N.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return N.EMPTY;s=d.right.min(),d=d.copy(s.key,s.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,N.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,N.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zn();const e=this.left.check();if(e!==this.right.check())throw Zn();return e+(this.isRed()?0:1)}}N.EMPTY=null,N.RED=!0,N.BLACK=!1,N.EMPTY=new class{constructor(){this.size=0}get key(){throw Zn()}get value(){throw Zn()}get color(){throw Zn()}get left(){throw Zn()}get right(){throw Zn()}copy(r,e,t,s,d){return this}insert(r,e,t){return new N(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class V{constructor(e){this.comparator=e,this.data=new $i(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const d=s.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ee(this.data.getIterator())}getIteratorFrom(e){return new ee(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof V)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new V(this.comparator);return t.data=e,t}}class ee{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ve(r){return r.hasNext()?r.getNext():void 0}class ht{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new ht([])}unionWith(e){let t=new V(Ar.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ht(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ot extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Ot("Invalid base64 string: "+d):d}}(e);return new bn(t)}static fromUint8Array(e){const t=function(s){let d="";for(let g=0;g<s.length;++g)d+=String.fromCharCode(s[g]);return d}(e);return new bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const jn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(r){if(or(!!r),"string"==typeof r){let e=0;const t=jn.exec(r);if(or(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rr(r.seconds),nanos:rr(r.nanos)}}function rr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function In(r){return"string"==typeof r?bn.fromBase64String(r):bn.fromUint8Array(r)}function To(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ls(r){const e=r.mapValue.fields.__previous_value__;return To(e)?ls(e):e}function sl(r){const e=Yn(r.mapValue.fields.__local_write_time__.timestampValue);return new yi(e.seconds,e.nanos)}class bi{constructor(e,t,s,d,g,w,P,z){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=d,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=P,this.useFetchStreams=z}}class yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}const no={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},va={nullValue:"NULL_VALUE"};function Ka(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?To(r)?4:Fh(r)?9007199254740991:10:Zn()}function Vo(r,e){if(r===e)return!0;const t=Ka(r);if(t!==Ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sl(r).isEqual(sl(e));case 3:return function(s,d){if("string"==typeof s.timestampValue&&"string"==typeof d.timestampValue&&s.timestampValue.length===d.timestampValue.length)return s.timestampValue===d.timestampValue;const g=Yn(s.timestampValue),w=Yn(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return d=e,In(r.bytesValue).isEqual(In(d.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,d){return rr(s.geoPointValue.latitude)===rr(d.geoPointValue.latitude)&&rr(s.geoPointValue.longitude)===rr(d.geoPointValue.longitude)}(r,e);case 2:return function(s,d){if("integerValue"in s&&"integerValue"in d)return rr(s.integerValue)===rr(d.integerValue);if("doubleValue"in s&&"doubleValue"in d){const g=rr(s.doubleValue),w=rr(d.doubleValue);return g===w?ct(g)===ct(w):isNaN(g)&&isNaN(w)}return!1}(r,e);case 9:return Js(r.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(s,d){const g=s.mapValue.fields||{},w=d.mapValue.fields||{};if(Nh(g)!==Nh(w))return!1;for(const P in g)if(g.hasOwnProperty(P)&&(void 0===w[P]||!Vo(g[P],w[P])))return!1;return!0}(r,e);default:return Zn()}var d}function nc(r,e){return void 0!==(r.values||[]).find(t=>Vo(t,e))}function ol(r,e){if(r===e)return 0;const t=Ka(r),s=Ka(e);if(t!==s)return pr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pr(r.booleanValue,e.booleanValue);case 2:return function(d,g){const w=rr(d.integerValue||d.doubleValue),P=rr(g.integerValue||g.doubleValue);return w<P?-1:w>P?1:w===P?0:isNaN(w)?isNaN(P)?0:-1:1}(r,e);case 3:return Rf(r.timestampValue,e.timestampValue);case 4:return Rf(sl(r),sl(e));case 5:return pr(r.stringValue,e.stringValue);case 6:return function(d,g){const w=In(d),P=In(g);return w.compareTo(P)}(r.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),P=g.split("/");for(let z=0;z<w.length&&z<P.length;z++){const X=pr(w[z],P[z]);if(0!==X)return X}return pr(w.length,P.length)}(r.referenceValue,e.referenceValue);case 8:return function(d,g){const w=pr(rr(d.latitude),rr(g.latitude));return 0!==w?w:pr(rr(d.longitude),rr(g.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(d,g){const w=d.values||[],P=g.values||[];for(let z=0;z<w.length&&z<P.length;++z){const X=ol(w[z],P[z]);if(X)return X}return pr(w.length,P.length)}(r.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===no.mapValue&&g===no.mapValue)return 0;if(d===no.mapValue)return 1;if(g===no.mapValue)return-1;const w=d.fields||{},P=Object.keys(w),z=g.fields||{},X=Object.keys(z);P.sort(),X.sort();for(let ae=0;ae<P.length&&ae<X.length;++ae){const Ze=pr(P[ae],X[ae]);if(0!==Ze)return Ze;const Mt=ol(w[P[ae]],z[X[ae]]);if(0!==Mt)return Mt}return pr(P.length,X.length)}(r.mapValue,e.mapValue);default:throw Zn()}}function Rf(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return pr(r,e);const t=Yn(r),s=Yn(e),d=pr(t.seconds,s.seconds);return 0!==d?d:pr(t.nanos,s.nanos)}function rc(r){return ic(r)}function ic(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const d=Yn(s);return`time(${d.seconds},${d.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?In(r.bytesValue).toBase64():"referenceValue"in r?On.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let d="[",g=!0;for(const w of s.values||[])g?g=!1:d+=",",d+=ic(w);return d+"]"}(r.arrayValue):"mapValue"in r?function(s){const d=Object.keys(s.fields||{}).sort();let g="{",w=!0;for(const P of d)w?w=!1:g+=",",g+=`${P}:${ic(s.fields[P])}`;return g+"}"}(r.mapValue):Zn();var e}function xs(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function sd(r){return!!r&&"integerValue"in r}function Iu(r){return!!r&&"arrayValue"in r}function Kd(r){return!!r&&"nullValue"in r}function ro(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Cc(r){return!!r&&"mapValue"in r}function bc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ya(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=bc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bc(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Fh(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function qd(r){return"nullValue"in r?va:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?xs(yo.empty(),On.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Zn()}function Lh(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?xs(yo.empty(),On.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?no:Zn()}function od(r,e){const t=ol(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Dc(r,e){const t=ol(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class jo{constructor(e){this.value=e}static empty(){return new jo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=Ar.emptyPath(),s={},d=[];e.forEach((w,P)=>{if(!t.isImmediateParentOf(P)){const z=this.getFieldsMap(t);this.applyChanges(z,s,d),s={},d=[],t=P.popLast()}w?s[P.lastSegment()]=bc(w):d.push(P.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,d)}delete(e){const t=this.field(e.popLast());Cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let d=t.mapValue.fields[e.get(s)];Cc(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,s){ya(t,(d,g)=>e[d]=g);for(const d of s)delete e[d]}clone(){return new jo(bc(this.value))}}function Tc(r){const e=[];return ya(r.fields,(t,s)=>{const d=new Ar([t]);if(Cc(s)){const g=Tc(s.mapValue).fields;if(0===g.length)e.push(d);else for(const w of g)e.push(d.child(w))}else e.push(d)}),new ht(e)}class zi{constructor(e,t,s,d,g,w,P){this.key=e,this.documentType=t,this.version=s,this.readTime=d,this.createTime=g,this.data=w,this.documentState=P}static newInvalidDocument(e){return new zi(e,0,nr.min(),nr.min(),nr.min(),jo.empty(),0)}static newFoundDocument(e,t,s,d){return new zi(e,1,t,nr.min(),s,d,0)}static newNoDocument(e,t){return new zi(e,2,t,nr.min(),nr.min(),jo.empty(),0)}static newUnknownDocument(e,t){return new zi(e,3,t,nr.min(),nr.min(),jo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dl{constructor(e,t){this.position=e,this.inclusive=t}}function wu(r,e,t){let s=0;for(let d=0;d<r.position.length;d++){const g=e[d],w=r.position[d];if(s=g.field.isKeyField()?On.comparator(On.fromName(w.referenceValue),t.key):ol(w,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function Cu(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vo(r.position[t],e.position[t]))return!1;return!0}class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ad(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Yd{}class Ei extends Yd{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ac(e,t,s):"array-contains"===t?new Fp(e,s):"in"===t?new ld(e,s):"not-in"===t?new Au(e,s):"array-contains-any"===t?new xc(e,s):new Ei(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new kg(e,s):new qc(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ol(t,this.value)):null!==t&&Ka(this.value)===Ka(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mi extends Yd{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Mi(e,t)}matches(e){return io(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function io(r){return"and"===r.op}function Wc(r){return"or"===r.op}function Ol(r){return Du(r)&&io(r)}function Du(r){for(const e of r.filters)if(e instanceof Mi)return!1;return!0}function Kc(r){if(r instanceof Ei)return r.field.canonicalString()+r.op.toString()+rc(r.value);if(Ol(r))return r.filters.map(e=>Kc(e)).join(",");{const e=r.filters.map(t=>Kc(t)).join(",");return`${r.op}(${e})`}}function Tu(r,e){return r instanceof Ei?(t=r,(s=e)instanceof Ei&&t.op===s.op&&t.field.isEqual(s.field)&&Vo(t.value,s.value)):r instanceof Mi?function(t,s){return s instanceof Mi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((d,g,w)=>d&&Tu(g,s.filters[w]),!0)}(r,e):void Zn();var t,s}function kl(r,e){const t=r.filters.concat(e);return Mi.create(t,r.op)}function Sc(r){return r instanceof Ei?`${(e=r).field.canonicalString()} ${e.op} ${rc(e.value)}`:r instanceof Mi?function(e){return e.op.toString()+" {"+e.getFilters().map(Sc).join(" ,")+"}"}(r):"Filter";var e}class Ac extends Ei{constructor(e,t,s){super(e,t,s),this.key=On.fromName(s.referenceValue)}matches(e){const t=On.comparator(e.key,this.key);return this.matchesComparison(t)}}class kg extends Ei{constructor(e,t){super(e,"in",t),this.keys=Su(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qc extends Ei{constructor(e,t){super(e,"not-in",t),this.keys=Su(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Su(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>On.fromName(s.referenceValue))}class Fp extends Ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Iu(t)&&nc(t.arrayValue,this.value)}}class ld extends Ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&nc(this.value.arrayValue,t)}}class Au extends Ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!nc(this.value.arrayValue,t)}}class xc extends Ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Iu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>nc(this.value.arrayValue,s))}}class Zd{constructor(e,t=null,s=[],d=[],g=null,w=null,P=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=d,this.limit=g,this.startAt=w,this.endAt=P,this.ft=null}}function xu(r,e=null,t=[],s=[],d=null,g=null,w=null){return new Zd(r,e,t,s,d,g,w)}function _a(r){const e=Nn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Kc(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),se(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>rc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>rc(s)).join(",")),e.ft=t}return e.ft}function Rc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ad(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Tu(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Cu(r.startAt,e.startAt)&&Cu(r.endAt,e.endAt)}function cd(r){return On.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Ii(r,e){return r.filters.filter(t=>t instanceof Ei&&t.field.isEqual(e))}function qa(r,e,t){let s=va,d=!0;for(const g of Ii(r,e)){let w=va,P=!0;switch(g.op){case"<":case"<=":w=qd(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,P=!1;break;case"!=":case"not-in":w=va}od({value:s,inclusive:d},{value:w,inclusive:P})<0&&(s=w,d=P)}if(null!==t)for(let g=0;g<r.orderBy.length;++g)if(r.orderBy[g].field.isEqual(e)){const w=t.position[g];od({value:s,inclusive:d},{value:w,inclusive:t.inclusive})<0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}function Yc(r,e,t){let s=no,d=!0;for(const g of Ii(r,e)){let w=no,P=!0;switch(g.op){case">=":case">":w=Lh(g.value),P=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,P=!1;break;case"!=":case"not-in":w=no}Dc({value:s,inclusive:d},{value:w,inclusive:P})>0&&(s=w,d=P)}if(null!==t)for(let g=0;g<r.orderBy.length;++g)if(r.orderBy[g].field.isEqual(e)){const w=t.position[g];Dc({value:s,inclusive:d},{value:w,inclusive:t.inclusive})>0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}class Tl{constructor(e,t=null,s=[],d=[],g=null,w="F",P=null,z=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=d,this.limit=g,this.limitType=w,this.startAt=P,this.endAt=z,this.dt=null,this._t=null}}function Mf(r,e,t,s,d,g,w,P){return new Tl(r,e,t,s,d,g,w,P)}function Sl(r){return new Tl(r)}function sc(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Zc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function al(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ru(r){return null!==r.collectionGroup}function sa(r){const e=Nn(r);if(null===e.dt){e.dt=[];const t=al(e),s=Zc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new bu(t)),e.dt.push(new bu(Ar.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e.dt.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new bu(Ar.keyField(),g))}}}return e.dt}function vo(r){const e=Nn(r);if(!e._t)if("F"===e.limitType)e._t=xu(e.path,e.collectionGroup,sa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of sa(e))t.push(new bu(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new Dl(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Dl(e.startAt.position,e.startAt.inclusive):null;e._t=xu(e.path,e.collectionGroup,t,e.filters,e.limit,s,d)}return e._t}function oc(r,e){e.getFirstInequalityField(),al(r);const t=r.filters.concat([e]);return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xc(r,e,t){return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ac(r,e){return Rc(vo(r),vo(e))&&r.limitType===e.limitType}function Xd(r){return`${_a(vo(r))}|lt:${r.limitType}`}function ud(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Sc(s)).join(", ")}]`),se(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>rc(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>rc(s)).join(",")),`Target(${t})`}(vo(r))}; limitType=${r.limitType})`}function Qc(r,e){return e.isFoundDocument()&&function(t,s){const d=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):On.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(r,e)&&function(t,s){for(const d of sa(t))if(!d.field.isKeyField()&&null===s.data.field(d.field))return!1;return!0}(r,e)&&function(t,s){for(const d of t.filters)if(!d.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(d,g,w){const P=wu(d,g,w);return d.inclusive?P<=0:P<0}(t.startAt,sa(t),s)||t.endAt&&!function(d,g,w){const P=wu(d,g,w);return d.inclusive?P>=0:P>0}(t.endAt,sa(t),s)));var t,s}function Jc(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Pf(r){return(e,t)=>{let s=!1;for(const d of sa(r)){const g=$h(d,e,t);if(0!==g)return g;s=s||d.field.isKeyField()}return 0}}function $h(r,e,t){const s=r.field.isKeyField()?On.comparator(e.key,t.key):function(d,g,w){const P=g.data.field(d),z=w.data.field(d);return null!==P&&null!==z?ol(P,z):Zn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Zn()}}class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[d,g]of s)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),d=this.inner[s];if(void 0===d)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let d=0;d<s.length;d++)if(this.equalsFn(s[d][0],e))return 1===s.length?delete this.inner[t]:s.splice(d,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(t,s)=>{for(const[d,g]of s)e(d,g)})}isEmpty(){return bl(this.inner)}size(){return this.innerSize}}const Lp=new $i(On.comparator);function So(){return Lp}const Bh=new $i(On.comparator);function eu(...r){let e=Bh;for(const t of r)e=e.insert(t.key,t);return e}function dd(r){let e=Bh;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ll(){return tu()}function Fl(){return tu()}function tu(){return new Nl(r=>r.toString(),(r,e)=>r.isEqual(e))}const Uh=new $i(On.comparator),hd=new V(On.comparator);function Qr(...r){let e=hd;for(const t of r)e=e.add(t);return e}const Mu=new V(pr);function Qd(){return Mu}function Pu(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ct(e)?"-0":e}}function fd(r){return{integerValue:""+r}}function oa(r,e){return zt(e)?fd(e):Pu(r,e)}class Ll{constructor(){this._=void 0}}function pd(r,e,t){return r instanceof Mc?function(s,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return d&&To(d)&&(d=ls(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(t,e):r instanceof nu?Jd(r,e):r instanceof Bl?Al(r,e):function(s,d){const g=$l(s,d),w=ru(g)+ru(s.wt);return sd(g)&&sd(s.wt)?fd(w):Pu(s.serializer,w)}(r,e)}function Of(r,e,t){return r instanceof nu?Jd(r,e):r instanceof Bl?Al(r,e):t}function $l(r,e){return r instanceof aa?sd(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Mc extends Ll{}class nu extends Ll{constructor(e){super(),this.elements=e}}function Jd(r,e){const t=Vh(e);for(const s of r.elements)t.some(d=>Vo(d,s))||t.push(s);return{arrayValue:{values:t}}}class Bl extends Ll{constructor(e){super(),this.elements=e}}function Al(r,e){let t=Vh(e);for(const s of r.elements)t=t.filter(d=>!Vo(d,s));return{arrayValue:{values:t}}}class aa extends Ll{constructor(e,t){super(),this.serializer=e,this.wt=t}}function ru(r){return rr(r.integerValue||r.doubleValue)}function Vh(r){return Iu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class iu{constructor(e,t){this.field=e,this.transform=t}}class Pa{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class gd{}function Ul(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new D(r.key,hs.none()):new Ho(r.key,r.data,hs.none());{const t=r.data,s=jo.empty();let d=new V(Ar.comparator);for(let g of e.fields)if(!d.has(g)){let w=t.field(g);null===w&&g.length>1&&(g=g.popLast(),w=t.field(g)),null===w?s.delete(g):s.set(g,w),d=d.add(g)}return new Ya(r.key,s,new ht(d.toArray()),hs.none())}}function md(r,e,t){r instanceof Ho?function(s,d,g){const w=s.value.clone(),P=Nu(s.fieldTransforms,d,g.transformResults);w.setAll(P),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(r,e,t):r instanceof Ya?function(s,d,g){if(!Ou(s.precondition,d))return void d.convertToUnknownDocument(g.version);const w=Nu(s.fieldTransforms,d,g.transformResults),P=d.data;P.setAll(eh(s)),P.setAll(w),d.convertToFoundDocument(g.version,P).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function su(r,e,t,s){return r instanceof Ho?function(d,g,w,P){if(!Ou(d.precondition,g))return w;const z=d.value.clone(),X=th(d.fieldTransforms,P,g);return z.setAll(X),g.convertToFoundDocument(g.version,z).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ya?function(d,g,w,P){if(!Ou(d.precondition,g))return w;const z=th(d.fieldTransforms,P,g),X=g.data;return X.setAll(eh(d)),X.setAll(z),g.convertToFoundDocument(g.version,X).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ae=>ae.field))}(r,e,t,s):(w=t,Ou(r.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function Nf(r,e){let t=null;for(const s of r.fieldTransforms){const d=e.data.field(s.field),g=$l(s.transform,d||null);null!=g&&(null===t&&(t=jo.empty()),t.set(s.field,g))}return t||null}function ku(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Js(t,s,(d,g)=>function kf(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof nu&&s instanceof nu||t instanceof Bl&&s instanceof Bl?Js(t.elements,s.elements,Vo):t instanceof aa&&s instanceof aa?Vo(t.wt,s.wt):t instanceof Mc&&s instanceof Mc);var t,s}(d,g))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class Ho extends gd{constructor(e,t,s,d=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Ya extends gd{constructor(e,t,s,d,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function eh(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Nu(r,e,t){const s=new Map;or(r.length===t.length);for(let d=0;d<t.length;d++){const g=r[d],w=g.transform,P=e.data.field(g.field);s.set(g.field,Of(w,P,t[d]))}return s}function th(r,e,t){const s=new Map;for(const d of r){const g=d.transform,w=t.data.field(d.field);s.set(d.field,pd(g,w,e))}return s}class D extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _{constructor(e,t,s,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=d}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&md(g,e,s[d])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=su(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=su(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Fl();return this.mutations.forEach(d=>{const g=e.get(d.key),w=g.overlayedDocument;let P=this.applyToLocalView(w,g.mutatedFields);P=t.has(d.key)?null:P;const z=Ul(w,P);null!==z&&s.set(d.key,z),w.isValidDocument()||w.convertToNoDocument(nr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qr())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(t,s)=>ku(t,s))&&Js(this.baseMutations,e.baseMutations,(t,s)=>ku(t,s))}}class x{constructor(e,t,s,d){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=d}static from(e,t,s){or(e.mutations.length===s.length);let d=Uh;const g=e.mutations;for(let w=0;w<g.length;w++)d=d.insert(g[w].key,s[w].version);return new x(e,t,s,d)}}class W{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class st{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dt,Zt;function Mn(r){switch(r){default:return Zn();case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0}}function er(r){if(void 0===r)return ss("GRPC error has no .code"),Bt.UNKNOWN;switch(r){case Dt.OK:return Bt.OK;case Dt.CANCELLED:return Bt.CANCELLED;case Dt.UNKNOWN:return Bt.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Bt.INTERNAL;case Dt.UNAVAILABLE:return Bt.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Bt.NOT_FOUND;case Dt.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case Dt.ABORTED:return Bt.ABORTED;case Dt.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case Dt.DATA_LOSS:return Bt.DATA_LOSS;default:return Zn()}}(Zt=Dt||(Dt={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class zn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Gi}static getOrCreateInstance(){return null===Gi&&(Gi=new zn),Gi}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Gi=null;function Ao(){return new TextEncoder}const yd=new Aa([4294967295,4294967295],0);function vd(r){const e=Ao().encode(r),t=new rl;return t.update(e),new Uint8Array(t.digest())}function nh(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),d=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new Aa([t,s],0),new Aa([d,g],0)]}class Es{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pc(`Invalid padding: ${t}`);if(s<0)throw new Pc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Pc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Pc(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Aa.fromNumber(this.yt)}Tt(e,t,s){let d=e.add(t.multiply(Aa.fromNumber(s)));return 1===d.compare(yd)&&(d=new Aa([d.getBits(0),d.getBits(1)],0)),d.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=vd(e),[s,d]=nh(t);for(let g=0;g<this.hashCount;g++){const w=this.Tt(s,d,g);if(!this.Et(w))return!1}return!0}static create(e,t,s){const d=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),w=new Es(g,d,t);return s.forEach(P=>w.insert(P)),w}insert(e){if(0===this.yt)return;const t=vd(e),[s,d]=nh(t);for(let g=0;g<this.hashCount;g++){const w=this.Tt(s,d,g);this.Rt(w)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ou{constructor(e,t,s,d,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const d=new Map;return d.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ou(nr.min(),d,new $i(pr),So(),Qr())}}class Ea{constructor(e,t,s,d,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ea(s,t,Qr(),Qr(),Qr())}}class Vl{constructor(e,t,s,d){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=d}}class rh{constructor(e,t){this.targetId=e,this.bt=t}}class jh{constructor(e,t,s=bn.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=d}}class Ff{constructor(){this.Vt=0,this.St=Vm(),this.Dt=bn.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Qr(),t=Qr(),s=Qr();return this.St.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:s=s.add(d);break;default:Zn()}}),new Ea(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Vm()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Fu{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=So(),this.jt=ih(),this.zt=new $i(pr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Zn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,d)=>{this.Zt(d)&&t(d)})}ee(e){var t;const s=e.targetId,d=e.bt.count,g=this.ne(s);if(g){const w=g.target;if(cd(w))if(0===d){const P=new On(w.path);this.Jt(s,P,zi.newNoDocument(P,nr.min()))}else or(1===d);else{const P=this.se(s);if(P!==d){const z=this.ie(e,P);0!==z&&(this.te(s),this.zt=this.zt.insert(s,2===z?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=zn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(X,ae,Ze){var Mt,sn,Tn,Rn,ur,ii;const ki={localCacheCount:ae,existenceFilterCount:Ze.count},si=Ze.unchangedNames;return si&&(ki.bloomFilter={applied:0===X,hashCount:null!==(Mt=null==si?void 0:si.hashCount)&&void 0!==Mt?Mt:0,bitmapLength:null!==(Rn=null===(Tn=null===(sn=null==si?void 0:si.bits)||void 0===sn?void 0:sn.bitmap)||void 0===Tn?void 0:Tn.length)&&void 0!==Rn?Rn:0,padding:null!==(ii=null===(ur=null==si?void 0:si.bits)||void 0===ur?void 0:ur.padding)&&void 0!==ii?ii:0}),ki}(z,P,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:d}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:g="",padding:w=0},hashCount:P=0}=s;let z,X;try{z=In(g).toUint8Array()}catch(ae){if(ae instanceof Ot)return fi("Decoding the base64 bloom filter in existence filter failed ("+ae.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ae}try{X=new Es(z,w,P)}catch(ae){return fi(ae instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",ae),1}return 0===X.yt?1:d!==t-this.re(e.targetId,X)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let d=0;return s.forEach(g=>{const w=this.Kt.oe(),P=`projects/${w.projectId}/databases/${w.database}/documents/${g.path.canonicalString()}`;t.At(P)||(this.Jt(e,g,null),d++)}),d}ue(e){const t=new Map;this.Gt.forEach((g,w)=>{const P=this.ne(w);if(P){if(g.current&&cd(P.target)){const z=new On(P.target.path);null!==this.Qt.get(z)||this.ce(w,z)||this.Jt(w,z,zi.newNoDocument(z,e))}g.kt&&(t.set(w,g.Ot()),g.$t())}});let s=Qr();this.jt.forEach((g,w)=>{let P=!0;w.forEachWhile(z=>{const X=this.ne(z);return!X||"TargetPurposeLimboResolution"===X.purpose||(P=!1,!1)}),P&&(s=s.add(g))}),this.Qt.forEach((g,w)=>w.setReadTime(e));const d=new ou(e,t,this.zt,this.Qt,s);return this.Qt=So(),this.jt=ih(),this.zt=new $i(pr),d}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const d=this.Xt(e);this.ce(e,t)?d.Ft(t,1):d.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Ff,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new V(pr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||hn("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Ff),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function ih(){return new $i(On.comparator)}function Vm(){return new $i(On.comparator)}const Ng={asc:"ASCENDING",desc:"DESCENDING"},Lu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$p={and:"AND",or:"OR"};class _d{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hh(r,e){return r.useProto3Json||se(e)?e:{value:e}}function $u(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bp(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zh(r,e){return $u(r,e.toTimestamp())}function Rs(r){return or(!!r),nr.fromTimestamp(function(e){const t=Yn(e);return new yi(t.seconds,t.nanos)}(r))}function sh(r,e){return(t=r,new vi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oh(r){const e=vi.fromString(r);return or(Zh(e)),e}function ah(r,e){return sh(r.databaseId,e.path)}function jl(r,e){const t=oh(e);if(t.get(1)!==r.databaseId.projectId)throw new dn(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new dn(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new On(Up(t))}function Ed(r,e){return sh(r.databaseId,e)}function Lf(r){const e=oh(r);return 4===e.length?vi.emptyPath():Up(e)}function lh(r){return new vi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Up(r){return or(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Oc(r,e,t){return{name:ah(r,e),fields:t.value.mapValue.fields}}function $f(r,e,t){const s=jl(r,e.name),d=Rs(e.updateTime),g=e.createTime?Rs(e.createTime):nr.min(),w=new jo({mapValue:{fields:e.fields}}),P=zi.newFoundDocument(s,d,g,w);return t&&P.setHasCommittedMutations(),t?P.setHasCommittedMutations():P}function Wh(r,e){let t;if(e instanceof Ho)t={update:Oc(r,e.key,e.value)};else if(e instanceof D)t={delete:ah(r,e.key)};else if(e instanceof Ya)t={update:Oc(r,e.key,e.data),updateMask:Yh(e.fieldMask)};else{if(!(e instanceof v))return Zn();t={verify:ah(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof Mc)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof nu)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Bl)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof aa)return{fieldPath:g.field.canonicalString(),increment:w.wt};throw Zn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:zh(r,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Zn()),t;var d}function Kh(r,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?hs.updateTime(Rs(d.updateTime)):void 0!==d.exists?hs.exists(d.exists):hs.none():hs.none(),s=e.updateTransforms?e.updateTransforms.map(d=>function(g,w){let P=null;"setToServerValue"in w?(or("REQUEST_TIME"===w.setToServerValue),P=new Mc):"appendMissingElements"in w?P=new nu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?P=new Bl(w.removeAllFromArray.values||[]):"increment"in w?P=new aa(g,w.increment):Zn();const z=Ar.fromServerFormat(w.fieldPath);return new iu(z,P)}(r,d)):[];var d;if(e.update){const d=jl(r,e.update.name),g=new jo({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new ht((e.updateMask.fieldPaths||[]).map(X=>Ar.fromServerFormat(X)));return new Ya(d,g,w,t,s)}return new Ho(d,g,t,s)}if(e.delete){const d=jl(r,e.delete);return new D(d,t)}if(e.verify){const d=jl(r,e.verify);return new v(d,t)}return Zn()}function kc(r,e){return{documents:[Ed(r,e.path)]}}function ch(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ed(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ed(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const d=function(z){if(0!==z.length)return Vf(Mi.create(z,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const g=function(z){if(0!==z.length)return z.map(X=>{return{field:lc((ae=X).field),direction:Uf(ae.dir)};var ae})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=Hh(r,e.limit);var P,z;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt={before:!(z=e.endAt).inclusive,values:z.position}),t}function uh(r){let e=Lf(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let d=null;if(s>0){or(1===s);const ae=t.from[0];ae.allDescendants?d=ae.collectionId:e=e.child(ae.collectionId)}let g=[];t.where&&(g=function(ae){const Ze=Bu(ae);return Ze instanceof Mi&&Ol(Ze)?Ze.getFilters():[Ze]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ae=>{return new bu(wd((Ze=ae).field),function(Mt){switch(Mt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ze.direction));var Ze}));let P=null;t.limit&&(P=function(ae){let Ze;return Ze="object"==typeof ae?ae.value:ae,se(Ze)?null:Ze}(t.limit));let z=null;var ae;t.startAt&&(z=new Dl((ae=t.startAt).values||[],!!ae.before));let X=null;return t.endAt&&(X=function(ae){return new Dl(ae.values||[],!ae.before)}(t.endAt)),Mf(e,d,w,g,P,"F",z,X)}function Bu(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wd(e.unaryFilter.field);return Ei.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=wd(e.unaryFilter.field);return Ei.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=wd(e.unaryFilter.field);return Ei.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=wd(e.unaryFilter.field);return Ei.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Zn()}}(r):void 0!==r.fieldFilter?Ei.create(wd((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Mi.create(e.compositeFilter.filters.map(t=>Bu(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Zn()}}(e.compositeFilter.op))}(r):Zn();var e}function Uf(r){return Ng[r]}function Id(r){return Lu[r]}function jm(r){return $p[r]}function lc(r){return{fieldPath:r.canonicalString()}}function wd(r){return Ar.fromServerFormat(r.fieldPath)}function Vf(r){return r instanceof Ei?function(e){if("=="===e.op){if(ro(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NAN"}};if(Kd(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ro(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NAN"}};if(Kd(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(e.field),op:Id(e.op),value:e.value}}}(r):r instanceof Mi?function(e){const t=e.getFilters().map(s=>Vf(s));return 1===t.length?t[0]:{compositeFilter:{op:jm(e.op),filters:t}}}(r):Zn()}function Yh(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zh(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class au{constructor(e,t,s,d,g=nr.min(),w=nr.min(),P=bn.EMPTY_BYTE_STRING,z=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=P,this.expectedCount=z}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jp{constructor(e){this.le=e}}function jf(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ah(d=r.le,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:$u(d,g.version.toTimestamp()),createTime:$u(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Uu(e.version)};else{if(!e.isUnknownDocument())return Zn();s.unknownDocument={path:t.path.toArray(),version:Uu(e.version)}}var d,g;return s}function cc(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Uu(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hl(r){const e=new yi(r.seconds,r.nanoseconds);return nr.fromTimestamp(e)}function Za(r,e){const t=(e.baseMutations||[]).map(g=>Kh(r.le,g));for(let g=0;g<e.mutations.length-1;++g)g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(e.mutations[g].updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g);const s=e.mutations.map(g=>Kh(r.le,g)),d=yi.fromMillis(e.localWriteTimeMs);return new _(e.batchId,d,t,s)}function cl(r){const e=Hl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Hl(r.lastLimboFreeSnapshotVersion):nr.min();let s;var d;return void 0!==r.query.documents?(or(1===(d=r.query).documents.length),s=vo(Sl(Lf(d.documents[0])))):s=vo(uh(r.query)),new au(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,bn.fromBase64String(r.resumeToken))}function Cd(r,e){const t=Uu(e.snapshotVersion),s=Uu(e.lastLimboFreeSnapshotVersion);let d;d=cd(e.target)?kc(r.le,e.target):ch(r.le,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_a(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:d}}function Hp(r){const e=uh({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Xc(e,e.limit,"L"):e}function Hf(r,e){return new W(e.largestBatchId,Kh(r.le,e.overlayMutation))}function zf(r,e){const t=e.path.lastSegment();return[r,ln(e.path.popLast()),t]}function bd(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Uu(s.readTime),documentKey:ln(s.documentKey.path),largestBatchId:s.largestBatchId}}class dh{getBundleMetadata(e,t){return Gf(e).get(t).next(s=>{if(s)return{id:(d=s).bundleId,createTime:Hl(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Gf(e).put({bundleId:(s=t).id,createTime:Uu(Rs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Xa(e).get(t).next(s=>{if(s)return{name:(d=s).name,query:Hp(d.bundledQuery),readTime:Hl(d.readTime)};var d})}saveNamedQuery(e,t){return Xa(e).put({name:(s=t).name,readTime:Uu(Rs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Gf(r){return Ds(r,"bundles")}function Xa(r){return Ds(r,"namedQueries")}class Xh{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new Xh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(zf(this.userId,t)).next(s=>s?Hf(this.serializer,s):null)}getOverlays(e,t){const s=ll();return Ft.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){const d=[];return s.forEach((g,w)=>{const P=new W(t,w);d.push(this.de(e,P))}),Ft.waitFor(d)}removeOverlaysForBatchId(e,t,s){const d=new Set;t.forEach(w=>d.add(ln(w.getCollectionPath())));const g=[];return d.forEach(w=>{const P=IDBKeyRange.bound([this.userId,w,s],[this.userId,w,s+1],!1,!0);g.push(Dd(e).J("collectionPathOverlayIndex",P))}),Ft.waitFor(g)}getOverlaysForCollection(e,t,s){const d=ll(),g=ln(t),w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",w).next(P=>{for(const z of P){const X=Hf(this.serializer,z);d.set(X.getKey(),X)}return d})}getOverlaysForCollectionGroup(e,t,s,d){const g=ll();let w;const P=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:P},(z,X,ae)=>{const Ze=Hf(this.serializer,X);g.size()<d||Ze.largestBatchId===w?(g.set(Ze.getKey(),Ze),w=Ze.largestBatchId):ae.done()}).next(()=>g)}de(e,t){return Dd(e).put(function(s,d,g){const[w,P,z]=zf(d,g.mutation.key);return{userId:d,collectionPath:P,documentId:z,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Wh(s.le,g.mutation)}}(this.serializer,this.userId,t))}}function Dd(r){return Ds(r,"documentOverlays")}class ul{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(rr(e.integerValue));else if("doubleValue"in e){const s=rr(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),ct(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(In(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?Fh(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Zn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const d of Object.keys(s))this.Ie(d,t),this.we(s[d],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const d of s)this.we(d,t)}Ae(e,t){this.ge(t,37),On.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Fg(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function dl(r){const e=64-function(t){let s=0;for(let d=0;d<8;++d){const g=Fg(255&t[d]);if(s+=g,8!==g)break}return s}(r);return Math.ceil(e/8)}ul.be=new ul;class Lg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const d=t.codePointAt(0);this.Se(240|d>>>18),this.Se(128|63&d>>>12),this.Se(128|63&d>>>6),this.Se(128|63&d)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const d=t.codePointAt(0);this.xe(240|d>>>18),this.xe(128|63&d>>>12),this.xe(128|63&d>>>6),this.xe(128|63&d)}}this.Ne()}Oe(e){const t=this.$e(e),s=dl(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Be(e){const t=this.$e(e),s=dl(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let d=1;d<t.length;++d)t[d]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const d=new Uint8Array(s);d.set(this.buffer),this.buffer=d}}class Hm{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class $g{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Qh{constructor(){this.Qe=new Lg,this.je=new Hm(this.Qe),this.ze=new $g(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Td{constructor(e,t,s,d){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=d}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Td(this.indexId,this.documentKey,this.arrayValue,s)}}function xl(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=uc(r.arrayValue,e.arrayValue),0!==t?t:(t=uc(r.directionalValue,e.directionalValue),0!==t?t:On.comparator(r.documentKey,e.documentKey)))}function uc(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Jh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){or(e.collectionGroup===this.collectionId);const t=_c(e);if(void 0!==t&&!this.tn(t))return!1;const s=eo(e);let d=0,g=0;for(;d<s.length&&this.tn(s[d]);++d);if(d===s.length)return!0;if(void 0!==this.Xe){const w=s[d];if(!this.en(this.Xe,w)||!this.nn(this.Je[g++],w))return!1;++d}for(;d<s.length;++d)if(g>=this.Je.length||!this.nn(this.Je[g++],s[d]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zp(r){var e,t;if(or(r instanceof Ei||r instanceof Mi),r instanceof Ei){if(r instanceof ld){const d=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(g=>Ei.create(r.field,"==",g)))||[];return Mi.create(d,"or")}return r}const s=r.filters.map(d=>zp(d));return Mi.create(s,r.op)}function zm(r){if(0===r.getFilters().length)return[];const e=Kf(zp(r));return or(Wf(e)),Bg(e)||hh(e)?[e]:e.getFilters()}function Bg(r){return r instanceof Ei}function hh(r){return r instanceof Mi&&Ol(r)}function Wf(r){return Bg(r)||hh(r)||function(e){if(e instanceof Mi&&Wc(e)){for(const t of e.getFilters())if(!Bg(t)&&!hh(t))return!1;return!0}return!1}(r)}function Kf(r){if(or(r instanceof Ei||r instanceof Mi),r instanceof Ei)return r;if(1===r.filters.length)return Kf(r.filters[0]);const e=r.filters.map(s=>Kf(s));let t=Mi.create(e,r.op);return t=ef(t),Wf(t)?t:(or(t instanceof Mi),or(io(t)),or(t.filters.length>1),t.filters.reduce((s,d)=>fh(s,d)))}function fh(r,e){let t;return or(r instanceof Ei||r instanceof Mi),or(e instanceof Ei||e instanceof Mi),t=r instanceof Ei?e instanceof Ei?Mi.create([r,e],"and"):Ug(r,e):e instanceof Ei?Ug(e,r):function(s,d){if(or(s.filters.length>0&&d.filters.length>0),io(s)&&io(d))return kl(s,d.getFilters());const g=Wc(s)?s:d,w=Wc(s)?d:s,P=g.filters.map(z=>fh(z,w));return Mi.create(P,"or")}(r,e),ef(t)}function Ug(r,e){if(io(e))return kl(e,r.getFilters());{const t=e.filters.map(s=>fh(r,s));return Mi.create(t,"or")}}function ef(r){if(or(r instanceof Ei||r instanceof Mi),r instanceof Ei)return r;const e=r.getFilters();if(1===e.length)return ef(e[0]);if(Du(r))return r;const t=e.map(d=>ef(d)),s=[];return t.forEach(d=>{d instanceof Ei?s.push(d):d instanceof Mi&&(d.op===r.op?s.push(...d.filters):s.push(d))}),1===s.length?s[0]:Mi.create(s,r.op)}class Gm{constructor(){this.sn=new qf}addToCollectionParentIndex(e,t){return this.sn.add(t),Ft.resolve()}getCollectionParents(e,t){return Ft.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return Ft.resolve()}deleteFieldIndex(e,t){return Ft.resolve()}getDocumentsMatchingTarget(e,t){return Ft.resolve(null)}getIndexType(e,t){return Ft.resolve(0)}getFieldIndexes(e,t){return Ft.resolve([])}getNextCollectionGroupToUpdate(e){return Ft.resolve(null)}getMinOffset(e,t){return Ft.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return Ft.resolve(_i.min())}updateCollectionGroup(e,t,s){return Ft.resolve()}updateIndexEntries(e,t){return Ft.resolve()}}class qf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t]||new V(vi.comparator),g=!d.has(s);return this.index[t]=d.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t];return d&&d.has(s)}getEntries(e){return(this.index[e]||new V(vi.comparator)).toArray()}}const hl=new Uint8Array(0);class Wm{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new qf,this.on=new Nl(s=>_a(s),(s,d)=>Rc(s,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const g={collectionId:s,parent:ln(d)};return Gp(e).put(g)}return Ft.resolve()}getCollectionParents(e,t){const s=[],d=IDBKeyRange.bound([t,""],[$o(t),""],!1,!0);return Gp(e).j(d).next(g=>{for(const w of g){if(w.collectionId!==t)break;s.push(Kr(w.parent))}return s})}addFieldIndex(e,t){const s=tf(e),d={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var w;delete d.indexId;const g=s.add(d);if(t.indexState){const w=nf(e);return g.next(P=>{w.put(bd(P,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=tf(e),d=nf(e),g=Sd(e);return s.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Sd(e);let d=!0;const g=new Map;return Ft.forEach(this.un(t),w=>this.cn(e,w).next(P=>{d&&(d=!!P),g.set(w,P)})).next(()=>{if(d){let w=Qr();const P=[];return Ft.forEach(g,(z,X)=>{var ae;hn("IndexedDbIndexManager",`Using index ${ae=z,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(si=>`${si.fieldPath}:${si.kind}`).join(",")}`} to execute ${_a(t)}`);const Ze=function(si,$a){const Os=_c($a);if(void 0===Os)return null;for(const Is of Ii(si,Os.fieldPath))switch(Is.op){case"array-contains-any":return Is.value.arrayValue.values||[];case"array-contains":return[Is.value]}return null}(X,z),Mt=function(si,$a){const Os=new Map;for(const Is of eo($a))for(const Ba of Ii(si,Is.fieldPath))switch(Ba.op){case"==":case"in":Os.set(Is.fieldPath.canonicalString(),Ba.value);break;case"not-in":case"!=":return Os.set(Is.fieldPath.canonicalString(),Ba.value),Array.from(Os.values())}return null}(X,z),sn=function(si,$a){const Os=[];let Is=!0;for(const Ba of eo($a)){const Oh=0===Ba.kind?qa(si,Ba.fieldPath,si.startAt):Yc(si,Ba.fieldPath,si.startAt);Os.push(Oh.value),Is&&(Is=Oh.inclusive)}return new Dl(Os,Is)}(X,z),Tn=function(si,$a){const Os=[];let Is=!0;for(const Ba of eo($a)){const Oh=0===Ba.kind?Yc(si,Ba.fieldPath,si.endAt):qa(si,Ba.fieldPath,si.endAt);Os.push(Oh.value),Is&&(Is=Oh.inclusive)}return new Dl(Os,Is)}(X,z),Rn=this.an(z,X,sn),ur=this.an(z,X,Tn),ii=this.hn(z,X,Mt),ki=this.ln(z.indexId,Ze,Rn,sn.inclusive,ur,Tn.inclusive,ii);return Ft.forEach(ki,si=>s.H(si,t.limit).next($a=>{$a.forEach(Os=>{const Is=On.fromSegments(Os.documentKey);w.has(Is)||(w=w.add(Is),P.push(Is))})}))}).next(()=>P)}return Ft.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:zm(Mi.create(e.filters,"and")).map(s=>xu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,d,g,w,P){const z=(null!=t?t.length:1)*Math.max(s.length,g.length),X=z/(null!=t?t.length:1),ae=[];for(let Ze=0;Ze<z;++Ze){const Mt=t?this.fn(t[Ze/X]):hl,sn=this.dn(e,Mt,s[Ze%X],d),Tn=this._n(e,Mt,g[Ze%X],w),Rn=P.map(ur=>this.dn(e,Mt,ur,!0));ae.push(...this.createRange(sn,Tn,Rn))}return ae}dn(e,t,s,d){const g=new Td(e,On.empty(),t,s);return d?g:g.He()}_n(e,t,s,d){const g=new Td(e,On.empty(),t,s);return d?g.He():g}cn(e,t){const s=new Jh(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let w=null;for(const P of g)s.Ze(P)&&(!w||P.fields.length>w.fields.length)&&(w=P);return w})}getIndexType(e,t){let s=2;const d=this.un(t);return Ft.forEach(d,g=>this.cn(e,g).next(w=>{w?0!==s&&w.fields.length<function(P){let z=new V(Ar.comparator),X=!1;for(const ae of P.filters)for(const Ze of ae.getFlattenedFilters())Ze.field.isKeyField()||("array-contains"===Ze.op||"array-contains-any"===Ze.op?X=!0:z=z.add(Ze.field));for(const ae of P.orderBy)ae.field.isKeyField()||(z=z.add(ae.field));return z.size+(X?1:0)}(g)&&(s=1):s=0})).next(()=>null!==t.limit&&d.length>1&&2===s?1:s)}wn(e,t){const s=new Qh;for(const d of eo(e)){const g=t.data.field(d.fieldPath);if(null==g)return null;const w=s.We(d.kind);ul.be._e(g,w)}return s.Ge()}fn(e){const t=new Qh;return ul.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new Qh;return ul.be._e(xs(this.databaseId,t),s.We(function(d){const g=eo(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let d=[];d.push(new Qh);let g=0;for(const w of eo(e)){const P=s[g++];for(const z of d)if(this.gn(t,w.fieldPath)&&Iu(P))d=this.yn(d,w,P);else{const X=z.We(w.kind);ul.be._e(P,X)}}return this.pn(d)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const d=[...e],g=[];for(const w of s.arrayValue.values||[])for(const P of d){const z=new Qh;z.seed(P.Ge()),ul.be._e(w,z.We(t.kind)),g.push(z)}return g}gn(e,t){return!!e.filters.find(s=>s instanceof Ei&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=tf(e),d=nf(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(g=>{const w=[];return Ft.forEach(g,P=>d.get([P.indexId,this.uid]).next(z=>{w.push(function(X,ae){const Ze=ae?new xa(ae.sequenceNumber,new _i(Hl(ae.readTime),new On(Kr(ae.documentKey)),ae.largestBatchId)):xa.empty(),Mt=X.fields.map(([sn,Tn])=>new Jl(Ar.fromServerFormat(sn),Tn));return new Ql(X.indexId,X.collectionGroup,Mt,Ze)}(P,z))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,d)=>{const g=s.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:pr(s.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const d=tf(e),g=nf(e);return this.In(e).next(w=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(P=>Ft.forEach(P,z=>g.put(bd(z.indexId,this.user,w,s)))))}updateIndexEntries(e,t){const s=new Map;return Ft.forEach(t,(d,g)=>{const w=s.get(d.collectionGroup);return(w?Ft.resolve(w):this.getFieldIndexes(e,d.collectionGroup)).next(P=>(s.set(d.collectionGroup,P),Ft.forEach(P,z=>this.Tn(e,d,z).next(X=>{const ae=this.En(g,z);return X.isEqual(ae)?Ft.resolve():this.An(e,g,z,X,ae)}))))})}Rn(e,t,s,d){return Sd(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,d){return Sd(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const d=Sd(e);let g=new V(xl);return d.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(w,P)=>{g=g.add(new Td(s.indexId,t,P.arrayValue,P.directionalValue))}).next(()=>g)}En(e,t){let s=new V(xl);const d=this.wn(t,e);if(null==d)return s;const g=_c(t);if(null!=g){const w=e.data.field(g.fieldPath);if(Iu(w))for(const P of w.arrayValue.values||[])s=s.add(new Td(t.indexId,e.key,this.fn(P),d))}else s=s.add(new Td(t.indexId,e.key,hl,d));return s}An(e,t,s,d,g){hn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(P,z,X,ae,Ze){const Mt=P.getIterator(),sn=z.getIterator();let Tn=ve(Mt),Rn=ve(sn);for(;Tn||Rn;){let ur=!1,ii=!1;if(Tn&&Rn){const ki=X(Tn,Rn);ki<0?ii=!0:ki>0&&(ur=!0)}else null!=Tn?ii=!0:ur=!0;ur?(ae(Rn),Rn=ve(sn)):ii?(Ze(Tn),Tn=ve(Mt)):(Tn=ve(Mt),Rn=ve(sn))}}(d,g,xl,P=>{w.push(this.Rn(e,t,s,P))},P=>{w.push(this.vn(e,t,s,P))}),Ft.waitFor(w)}In(e){let t=1;return nf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,d,g)=>{g.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((w,P)=>xl(w,P)).filter((w,P,z)=>!P||0!==xl(w,z[P-1]));const d=[];d.push(e);for(const w of s){const P=xl(w,e),z=xl(w,t);if(0===P)d[0]=e.He();else if(P>0&&z<0)d.push(w),d.push(w.He());else if(z>0)break}d.push(t);const g=[];for(let w=0;w<d.length;w+=2){if(this.Pn(d[w],d[w+1]))return[];g.push(IDBKeyRange.bound([d[w].indexId,this.uid,d[w].arrayValue,d[w].directionalValue,hl,[]],[d[w+1].indexId,this.uid,d[w+1].arrayValue,d[w+1].directionalValue,hl,[]]))}return g}Pn(e,t){return xl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ad)}getMinOffset(e,t){return Ft.mapArray(this.un(t),s=>this.cn(e,s).next(d=>d||Zn())).next(Ad)}}function Gp(r){return Ds(r,"collectionParents")}function Sd(r){return Ds(r,"indexEntries")}function tf(r){return Ds(r,"indexConfiguration")}function nf(r){return Ds(r,"indexState")}function Ad(r){or(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const d=r[s].indexState.offset;ec(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}const Nc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Oa(e,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yf(r,e,t){const s=r.store("mutations"),d=r.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let P=0;const z=s.X({range:w},(ae,Ze,Mt)=>(P++,Mt.delete()));g.push(z.next(()=>{or(1===P)}));const X=[];for(const ae of t.mutations){const Ze=Do(e,ae.key.path,t.batchId);g.push(d.delete(Ze)),X.push(ae.key)}return Ft.waitFor(g).next(()=>X)}function xd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Zn();e=r.noDocument}return JSON.stringify(e).length}Oa.DEFAULT_COLLECTION_PERCENTILE=10,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oa.DEFAULT=new Oa(41943040,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oa.DISABLED=new Oa(-1,0,0);class Yr{constructor(e,t,s,d){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=d,this.bn={}}static fe(e,t,s,d){or(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Yr(g,t,s,d)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).X({index:"userMutationsIndex",range:s},(d,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,s,d){const g=ju(e),w=lu(e);return w.add({}).next(P=>{or("number"==typeof P);const z=new _(P,t,s,d),X=function(Mt,sn,Tn){const Rn=Tn.baseMutations.map(ii=>Wh(Mt.le,ii)),ur=Tn.mutations.map(ii=>Wh(Mt.le,ii));return{userId:sn,batchId:Tn.batchId,localWriteTimeMs:Tn.localWriteTime.toMillis(),baseMutations:Rn,mutations:ur}}(this.serializer,this.userId,z),ae=[];let Ze=new V((Mt,sn)=>pr(Mt.canonicalString(),sn.canonicalString()));for(const Mt of d){const sn=Do(this.userId,Mt.key.path,P);Ze=Ze.add(Mt.key.path.popLast()),ae.push(w.put(X)),ae.push(g.put(sn,_s))}return Ze.forEach(Mt=>{ae.push(this.indexManager.addToCollectionParentIndex(e,Mt))}),e.addOnCommittedListener(()=>{this.bn[P]=z.keys()}),Ft.waitFor(ae).next(()=>z)})}lookupMutationBatch(e,t){return lu(e).get(t).next(s=>s?(or(s.userId===this.userId),Za(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?Ft.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const d=s.keys();return this.bn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,d=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return lu(e).X({index:"userMutationsIndex",range:d},(w,P,z)=>{P.userId===this.userId&&(or(P.batchId>=s),g=Za(this.serializer,P)),z.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return lu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(d,g,w)=>{s=g.batchId,w.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).j("userMutationsIndex",t).next(s=>s.map(d=>Za(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ai(this.userId,t.path),d=IDBKeyRange.lowerBound(s),g=[];return ju(e).X({range:d},(w,P,z)=>{const[X,ae,Ze]=w,Mt=Kr(ae);if(X===this.userId&&t.path.isEqual(Mt))return lu(e).get(Ze).next(sn=>{if(!sn)throw Zn();or(sn.userId===this.userId),g.push(Za(this.serializer,sn))});z.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new V(pr);const d=[];return t.forEach(g=>{const w=Ai(this.userId,g.path),P=IDBKeyRange.lowerBound(w),z=ju(e).X({range:P},(X,ae,Ze)=>{const[Mt,sn,Tn]=X,Rn=Kr(sn);Mt===this.userId&&g.path.isEqual(Rn)?s=s.add(Tn):Ze.done()});d.push(z)}),Ft.waitFor(d).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1,g=Ai(this.userId,s),w=IDBKeyRange.lowerBound(g);let P=new V(pr);return ju(e).X({range:w},(z,X,ae)=>{const[Ze,Mt,sn]=z,Tn=Kr(Mt);Ze===this.userId&&s.isPrefixOf(Tn)?Tn.length===d&&(P=P.add(sn)):ae.done()}).next(()=>this.Sn(e,P))}Sn(e,t){const s=[],d=[];return t.forEach(g=>{d.push(lu(e).get(g).next(w=>{if(null===w)throw Zn();or(w.userId===this.userId),s.push(Za(this.serializer,w))}))}),Ft.waitFor(d).next(()=>s)}removeMutationBatch(e,t){return Yf(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),Ft.forEach(s,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ft.resolve();const s=IDBKeyRange.lowerBound([this.userId]),d=[];return ju(e).X({range:s},(g,w,P)=>{if(g[0]===this.userId){const z=Kr(g[1]);d.push(z)}else P.done()}).next(()=>{or(0===d.length)})})}containsKey(e,t){return Vu(e,this.userId,t)}Cn(e){return Wp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vu(r,e,t){const s=Ai(e,t.path),d=s[1],g=IDBKeyRange.lowerBound(s);let w=!1;return ju(r).X({range:g,Y:!0},(P,z,X)=>{const[ae,Ze,Mt]=P;ae===e&&Ze===d&&(w=!0),X.done()}).next(()=>w)}function lu(r){return Ds(r,"mutations")}function ju(r){return Ds(r,"documentMutations")}function Wp(r){return Ds(r,"mutationQueues")}class Hu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Hu(0)}static kn(){return new Hu(-1)}}class rf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new Hu(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>nr.fromTimestamp(new yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(d=>(d.highestListenSequenceNumber=t,s&&(d.lastRemoteSnapshotVersion=s.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.On(e,d)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zu(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(or(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let d=0;const g=[];return zu(e).X((w,P)=>{const z=cl(P);z.sequenceNumber<=t&&null===s.get(z.targetId)&&(d++,g.push(this.removeTargetData(e,z)))}).next(()=>Ft.waitFor(g)).next(()=>d)}forEachTarget(e,t){return zu(e).X((s,d)=>{const g=cl(d);t(g)})}Mn(e){return sf(e).get("targetGlobalKey").next(t=>(or(null!==t),t))}On(e,t){return sf(e).put("targetGlobalKey",t)}$n(e,t){return zu(e).put(Cd(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=_a(t),d=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return zu(e).X({range:d,index:"queryTargetsIndex"},(w,P,z)=>{const X=cl(P);Rc(t,X.target)&&(g=X,z.done())}).next(()=>g)}addMatchingKeys(e,t,s){const d=[],g=Gu(e);return t.forEach(w=>{const P=ln(w.path);d.push(g.put({targetId:s,path:P})),d.push(this.referenceDelegate.addReference(e,s,w))}),Ft.waitFor(d)}removeMatchingKeys(e,t,s){const d=Gu(e);return Ft.forEach(t,g=>{const w=ln(g.path);return Ft.waitFor([d.delete([s,w]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=Gu(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(d)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),d=Gu(e);let g=Qr();return d.X({range:s,Y:!0},(w,P,z)=>{const X=Kr(w[1]),ae=new On(X);g=g.add(ae)}).next(()=>g)}containsKey(e,t){const s=ln(t.path),d=IDBKeyRange.bound([s],[$o(s)],!1,!0);let g=0;return Gu(e).X({index:"documentTargetsIndex",Y:!0,range:d},([w,P],z,X)=>{0!==w&&(g++,X.done())}).next(()=>g>0)}he(e,t){return zu(e).get(t).next(s=>s?cl(s):null)}}function zu(r){return Ds(r,"targets")}function sf(r){return Ds(r,"targetGlobal")}function Gu(r){return Ds(r,"targetDocuments")}function Vg([r,e],[t,s]){const d=pr(r,t);return 0===d?pr(e,s):d}class jg{constructor(e){this.Bn=e,this.buffer=new V(Vg),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Vg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;hn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){js(s)?hn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield vs(s)}yield t.Gn(3e5)}))}}class qp{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ft.resolve(Q.ct);const s=new jg(t);return this.Qn.forEachTarget(e,d=>s.Un(d.sequenceNumber)).next(()=>this.Qn.zn(e,d=>s.Un(d))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector","Garbage collection skipped; disabled"),Ft.resolve(Nc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nc):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,d,g,w,P,z,X;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ze=>(Ze>this.params.maximumSequenceNumbersToCollect?(hn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ze}`),d=this.params.maximumSequenceNumbersToCollect):d=Ze,w=Date.now(),this.nthSequenceNumber(e,d))).next(Ze=>(s=Ze,P=Date.now(),this.removeTargets(e,s,t))).next(Ze=>(g=Ze,z=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ze=>(X=Date.now(),gc()<=qe.in.DEBUG&&hn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ae}ms\n\tDetermined least recently used ${d} in `+(P-w)+`ms\n\tRemoved ${g} targets in `+(z-P)+`ms\n\tRemoved ${Ze} documents in `+(X-z)+`ms\nTotal Duration: ${X-ae}ms`),Ft.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:Ze})))}}class Hg{constructor(e,t){this.db=e,this.garbageCollector=function Wu(r,e){return new qp(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(d=>s+d))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,d)=>t(d))}addReference(e,t,s){return Rd(e,s)}removeReference(e,t,s){return Rd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Rd(e,t)}Yn(e,t){return function(s,d){let g=!1;return Wp(s).Z(w=>Vu(s,w,d).next(P=>(P&&(g=!0),Ft.resolve(!P)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Jn(e,(w,P)=>{if(P<=t){const z=this.Yn(e,w).next(X=>{if(!X)return g++,s.getEntry(e,w).next(()=>(s.removeEntry(w,nr.min()),Gu(e).delete([0,ln(w.path)])))});d.push(z)}}).next(()=>Ft.waitFor(d)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Rd(e,t)}Jn(e,t){const s=Gu(e);let d,g=Q.ct;return s.X({index:"documentTargetsIndex"},([w,P],{path:z,sequenceNumber:X})=>{0===w?(g!==Q.ct&&t(new On(Kr(d)),g),g=X,d=z):g=Q.ct}).next(()=>{g!==Q.ct&&t(new On(Kr(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rd(r,e){return Gu(r).put((s=r.currentSequenceNumber,{targetId:0,path:ln(e.path),sequenceNumber:s}));var s}class ph{constructor(){this.changes=new Nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ft.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Fc(e).put(s)}removeEntry(e,t,s){return Fc(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],cc(g),w[w.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=zi.newInvalidDocument(t);return Fc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ia(t))},(d,g)=>{s=this.Zn(t,g)}).next(()=>s)}ts(e,t){let s={size:0,document:zi.newInvalidDocument(t)};return Fc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ia(t))},(d,g)=>{s={document:this.Zn(t,g),size:xd(g)}}).next(()=>s)}getEntries(e,t){let s=So();return this.es(e,t,(d,g)=>{const w=this.Zn(d,g);s=s.insert(d,w)}).next(()=>s)}ns(e,t){let s=So(),d=new $i(On.comparator);return this.es(e,t,(g,w)=>{const P=this.Zn(g,w);s=s.insert(g,P),d=d.insert(g,xd(w))}).next(()=>({documents:s,ss:d}))}es(e,t,s){if(t.isEmpty())return Ft.resolve();let d=new V(Zp);t.forEach(z=>d=d.add(z));const g=IDBKeyRange.bound(Ia(d.first()),Ia(d.last())),w=d.getIterator();let P=w.getNext();return Fc(e).X({index:"documentKeyIndex",range:g},(z,X,ae)=>{const Ze=On.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;P&&Zp(P,Ze)<0;)s(P,null),P=w.getNext();P&&P.isEqual(Ze)&&(s(P,X),P=w.hasNext()?w.getNext():null),P?ae.G(Ia(P)):ae.done()}).next(()=>{for(;P;)s(P,null),P=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,s,d){const g=t.path,w=[g.popLast().toArray(),g.lastSegment(),cc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],P=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fc(e).j(IDBKeyRange.bound(w,P,!0)).next(z=>{let X=So();for(const ae of z){const Ze=this.Zn(On.fromSegments(ae.prefixPath.concat(ae.collectionGroup,ae.documentId)),ae);Ze.isFoundDocument()&&(Qc(t,Ze)||d.has(Ze.key))&&(X=X.insert(Ze.key,Ze))}return X})}getAllFromCollectionGroup(e,t,s,d){let g=So();const w=Md(t,s),P=Md(t,_i.max());return Fc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,P,!0)},(z,X,ae)=>{const Ze=this.Zn(On.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);g=g.insert(Ze.key,Ze),g.size===d&&ae.done()}).next(()=>g)}newChangeBuffer(e){return new Yp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ku(e).get("remoteDocumentGlobalKey").next(t=>(or(!!t),t))}Xn(e,t){return Ku(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function Jy(r,e){let t;if(e.document)t=$f(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=On.fromSegments(e.noDocument.path),d=Hl(e.noDocument.readTime);t=zi.newNoDocument(s,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zn();{const s=On.fromSegments(e.unknownDocument.path),d=Hl(e.unknownDocument.version);t=zi.newUnknownDocument(s,d)}}return e.readTime&&t.setReadTime(function(s){const d=new yi(s[0],s[1]);return nr.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(nr.min()))return s}return zi.newInvalidDocument(e)}}function fl(r){return new zg(r)}class Yp extends ph{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Nl(s=>s.toString(),(s,d)=>s.isEqual(d))}applyChanges(e){const t=[];let s=0,d=new V((g,w)=>pr(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const P=this.os.get(g);if(t.push(this.rs.removeEntry(e,g,P.readTime)),w.isValidDocument()){const z=jf(this.rs.serializer,w);d=d.add(g.path.popLast());const X=xd(z);s+=X-P.size,t.push(this.rs.addEntry(e,g,z))}else if(s-=P.size,this.trackRemovals){const z=jf(this.rs.serializer,w.convertToNoDocument(nr.min()));t.push(this.rs.addEntry(e,g,z))}}),d.forEach(g=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.rs.updateMetadata(e,s)),Ft.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:d})=>(d.forEach((g,w)=>{this.os.set(g,{size:w,readTime:s.get(g).readTime})}),s))}}function Ku(r){return Ds(r,"remoteDocumentGlobal")}function Fc(r){return Ds(r,"remoteDocumentsV14")}function Ia(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Md(r,e){const t=e.documentKey.path.toArray();return[r,cc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zp(r,e){const t=r.path.toArray(),s=e.path.toArray();let d=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(d=pr(t[g],s[g]),d)return d;return d=pr(t.length,s.length),d||(d=pr(t[t.length-2],s[s.length-2]),d||pr(t[t.length-1],s[s.length-1]))}class Pd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qu{constructor(e,t,s,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=d}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(s=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==s&&su(s.mutation,d,ht.empty(),yi.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Qr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Qr()){const d=ll();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,s).next(g=>{let w=eu();return g.forEach((P,z)=>{w=w.insert(P,z.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const s=ll();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Qr()))}populateOverlays(e,t,s){const d=[];return s.forEach(g=>{t.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((w,P)=>{t.set(w,P)})})}computeViews(e,t,s,d){let g=So();const w=tu(),P=tu();return t.forEach((z,X)=>{const ae=s.get(X.key);d.has(X.key)&&(void 0===ae||ae.mutation instanceof Ya)?g=g.insert(X.key,X):void 0!==ae?(w.set(X.key,ae.mutation.getFieldMask()),su(ae.mutation,X,ae.mutation.getFieldMask(),yi.now())):w.set(X.key,ht.empty())}),this.recalculateAndSaveOverlays(e,g).next(z=>(z.forEach((X,ae)=>w.set(X,ae)),t.forEach((X,ae)=>{var Ze;return P.set(X,new Pd(ae,null!==(Ze=w.get(X))&&void 0!==Ze?Ze:null))}),P))}recalculateAndSaveOverlays(e,t){const s=tu();let d=new $i((w,P)=>w-P),g=Qr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const P of w)P.keys().forEach(z=>{const X=t.get(z);if(null===X)return;let ae=s.get(z)||ht.empty();ae=P.applyToLocalView(X,ae),s.set(z,ae);const Ze=(d.get(P.batchId)||Qr()).add(z);d=d.insert(P.batchId,Ze)})}).next(()=>{const w=[],P=d.getReverseIterator();for(;P.hasNext();){const z=P.getNext(),X=z.key,ae=z.value,Ze=Fl();ae.forEach(Mt=>{if(!g.has(Mt)){const sn=Ul(t.get(Mt),s.get(Mt));null!==sn&&Ze.set(Mt,sn),g=g.add(Mt)}}),w.push(this.documentOverlayCache.saveOverlays(e,X,Ze))}return Ft.waitFor(w)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return On.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ru(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var d}getNextDocuments(e,t,s,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,d).next(g=>{const w=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,d-g.size):Ft.resolve(ll());let P=-1,z=g;return w.next(X=>Ft.forEach(X,(ae,Ze)=>(P<Ze.largestBatchId&&(P=Ze.largestBatchId),g.get(ae)?Ft.resolve():this.remoteDocumentCache.getEntry(e,ae).next(Mt=>{z=z.insert(ae,Mt)}))).next(()=>this.populateOverlays(e,X,g)).next(()=>this.computeViews(e,z,X,Qr())).next(ae=>({batchId:P,changes:dd(ae)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new On(t)).next(s=>{let d=eu();return s.isFoundDocument()&&(d=d.insert(s.key,s)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const d=t.collectionGroup;let g=eu();return this.indexManager.getCollectionParents(e,d).next(w=>Ft.forEach(w,P=>{const z=(X=t,ae=P.child(d),new Tl(ae,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,ae;return this.getDocumentsMatchingCollectionQuery(e,z,s).next(X=>{X.forEach((ae,Ze)=>{g=g.insert(ae,Ze)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,d))).next(g=>{d.forEach((P,z)=>{const X=z.getKey();null===g.get(X)&&(g=g.insert(X,zi.newInvalidDocument(X)))});let w=eu();return g.forEach((P,z)=>{const X=d.get(P);void 0!==X&&su(X.mutation,z,ht.empty(),yi.now()),Qc(t,z)&&(w=w.insert(P,z))}),w})}}class Km{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return Ft.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:Rs(s.createTime)}),Ft.resolve()}getNamedQuery(e,t){return Ft.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:Hp(s.bundledQuery),readTime:Rs(s.readTime)}),Ft.resolve();var s}}class Zf{constructor(){this.overlays=new $i(On.comparator),this.hs=new Map}getOverlay(e,t){return Ft.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ll();return Ft.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((d,g)=>{this.de(e,t,g)}),Ft.resolve()}removeOverlaysForBatchId(e,t,s){const d=this.hs.get(s);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.hs.delete(s)),Ft.resolve()}getOverlaysForCollection(e,t,s){const d=ll(),g=t.length+1,w=new On(t.child("")),P=this.overlays.getIteratorFrom(w);for(;P.hasNext();){const z=P.getNext().value,X=z.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===g&&z.largestBatchId>s&&d.set(z.getKey(),z)}return Ft.resolve(d)}getOverlaysForCollectionGroup(e,t,s,d){let g=new $i((X,ae)=>X-ae);const w=this.overlays.getIterator();for(;w.hasNext();){const X=w.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>s){let ae=g.get(X.largestBatchId);null===ae&&(ae=ll(),g=g.insert(X.largestBatchId,ae)),ae.set(X.getKey(),X)}}const P=ll(),z=g.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((X,ae)=>P.set(X,ae)),!(P.size()>=d)););return Ft.resolve(P)}de(e,t,s){const d=this.overlays.get(s.key);if(null!==d){const w=this.hs.get(d.largestBatchId).delete(s.key);this.hs.set(d.largestBatchId,w)}this.overlays=this.overlays.insert(s.key,new W(t,s));let g=this.hs.get(t);void 0===g&&(g=Qr(),this.hs.set(t,g)),this.hs.set(t,g.add(s.key))}}class Xp{constructor(){this.ls=new V(_o.fs),this.ds=new V(_o._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new _o(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new _o(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new On(new vi([])),s=new _o(t,e),d=new _o(t,e+1),g=[];return this.ds.forEachInRange([s,d],w=>{this.gs(w),g.push(w.key)}),g}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new On(new vi([])),s=new _o(t,e),d=new _o(t,e+1);let g=Qr();return this.ds.forEachInRange([s,d],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new _o(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class _o{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return On.comparator(e.key,t.key)||pr(e.Es,t.Es)}static _s(e,t){return pr(e.Es,t.Es)||On.comparator(e.key,t.key)}}class qm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new V(_o.fs)}checkEmpty(e){return Ft.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,d){const g=this.As;this.As++;const w=new _(g,t,s,d);this.mutationQueue.push(w);for(const P of d)this.Rs=this.Rs.add(new _o(P.key,g)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return Ft.resolve(w)}lookupMutationBatch(e,t){return Ft.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.Ps(t+1),g=d<0?0:d;return Ft.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new _o(t,0),d=new _o(t,Number.POSITIVE_INFINITY),g=[];return this.Rs.forEachInRange([s,d],w=>{const P=this.vs(w.Es);g.push(P)}),Ft.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new V(pr);return t.forEach(d=>{const g=new _o(d,0),w=new _o(d,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([g,w],P=>{s=s.add(P.Es)})}),Ft.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1;let g=s;On.isDocumentKey(g)||(g=g.child(""));const w=new _o(new On(g),0);let P=new V(pr);return this.Rs.forEachWhile(z=>{const X=z.key.path;return!!s.isPrefixOf(X)&&(X.length===d&&(P=P.add(z.Es)),!0)},w),Ft.resolve(this.bs(P))}bs(e){const t=[];return e.forEach(s=>{const d=this.vs(s);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){or(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Ft.forEach(t.mutations,d=>{const g=new _o(d.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new _o(t,0),d=this.Rs.firstAfterOrEqual(s);return Ft.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Ft.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ym{constructor(e){this.Ss=e,this.docs=new $i(On.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,d=this.docs.get(s),g=d?d.size:0,w=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ft.resolve(s?s.document.mutableCopy():zi.newInvalidDocument(t))}getEntries(e,t){let s=So();return t.forEach(d=>{const g=this.docs.get(d);s=s.insert(d,g?g.document.mutableCopy():zi.newInvalidDocument(d))}),Ft.resolve(s)}getDocumentsMatchingQuery(e,t,s,d){let g=So();const w=t.path,P=new On(w.child("")),z=this.docs.getIteratorFrom(P);for(;z.hasNext();){const{key:X,value:{document:ae}}=z.getNext();if(!w.isPrefixOf(X.path))break;X.path.length>w.length+1||ec(mo(ae),s)<=0||(d.has(ae.key)||Qc(t,ae))&&(g=g.insert(ae.key,ae.mutableCopy()))}return Ft.resolve(g)}getAllFromCollectionGroup(e,t,s,d){Zn()}Ds(e,t){return Ft.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Zm(this)}getSize(e){return Ft.resolve(this.size)}}class Zm extends ph{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,d)=>{d.isValidDocument()?t.push(this.rs.addEntry(e,d)):this.rs.removeEntry(s)}),Ft.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Xm{constructor(e){this.persistence=e,this.Cs=new Nl(t=>_a(t),Rc),this.lastRemoteSnapshotVersion=nr.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Xp,this.targetCount=0,this.ks=Hu.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,d)=>t(d)),Ft.resolve()}getLastRemoteSnapshotVersion(e){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ft.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),Ft.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new Hu(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,Ft.resolve()}updateTargetData(e,t){return this.$n(t),Ft.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(e,t,s){let d=0;const g=[];return this.Cs.forEach((w,P)=>{P.sequenceNumber<=t&&null===s.get(P.targetId)&&(this.Cs.delete(w),g.push(this.removeMatchingKeysForTargetId(e,P.targetId)),d++)}),Ft.waitFor(g).next(()=>d)}getTargetCount(e){return Ft.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return Ft.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),Ft.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const d=this.persistence.referenceDelegate,g=[];return d&&t.forEach(w=>{g.push(d.markPotentiallyOrphaned(e,w))}),Ft.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),Ft.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return Ft.resolve(s)}containsKey(e,t){return Ft.resolve(this.Ns.containsKey(t))}}class Od{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Q(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Xm(this),this.indexManager=new Gm,this.remoteDocumentCache=new Ym(s=>this.referenceDelegate.Bs(s)),this.serializer=new jp(t),this.Ls=new Km(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new qm(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){hn("MemoryPersistence","Starting transaction:",e);const d=new af(this.Os.next());return this.referenceDelegate.qs(),s(d).next(g=>this.referenceDelegate.Us(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Ks(e,t){return Ft.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class af extends jc{constructor(e){super(),this.currentSequenceNumber=e}}class Yu{constructor(e){this.persistence=e,this.Gs=new Xp,this.Qs=null}static js(e){return new Yu(e)}get zs(){if(this.Qs)return this.Qs;throw Zn()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),Ft.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),Ft.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),Ft.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(d=>this.zs.add(d.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(g=>this.zs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.zs,s=>{const d=On.fromPath(s);return this.Ws(e,d).next(g=>{g||t.removeEntry(d,nr.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return Ft.or([()=>Ft.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class Qp{constructor(e){this.serializer=e}$(e,t,s,d){const g=new Ra("createOrUpgrade",t);var P;s<1&&d>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",os,{unique:!0}),P.createObjectStore("documentMutations"),lf(e),function(P){P.createObjectStore("remoteDocuments")}(e));let w=Ft.resolve();return s<3&&d>=3&&(0!==s&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),lf(e)),w=w.next(()=>function(P){const z=P.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nr.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",X)}(g))),s<4&&d>=4&&(0!==s&&(w=w.next(()=>function(P,z){return z.store("mutations").j().next(X=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",os,{unique:!0});const ae=z.store("mutations"),Ze=X.map(Mt=>ae.put(Mt));return Ft.waitFor(Ze)})}(e,g))),w=w.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&d>=5&&(w=w.next(()=>this.Js(g))),s<6&&d>=6&&(w=w.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(g)))),s<7&&d>=7&&(w=w.next(()=>this.Xs(g))),s<8&&d>=8&&(w=w.next(()=>this.Zs(e,g))),s<9&&d>=9&&(w=w.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&d>=10&&(w=w.next(()=>this.ti(g))),s<11&&d>=11&&(w=w.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&d>=12&&(w=w.next(()=>{!function(P){const z=P.createObjectStore("documentOverlays",{keyPath:Ma});z.createIndex("collectionPathOverlayIndex",_u,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",Bo,{unique:!1})}(e)})),s<13&&d>=13&&(w=w.next(()=>function(P){const z=P.createObjectStore("remoteDocumentsV14",{keyPath:ma});z.createIndex("documentKeyIndex",Ga),z.createIndex("collectionGroupIndex",ra)}(e)).next(()=>this.ei(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&d>=14&&(w=w.next(()=>this.ni(e,g))),s<15&&d>=15&&(w=w.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:Ur}).createIndex("sequenceNumberIndex",tc,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:Hc}).createIndex("documentKeyIndex",kh,{unique:!1})}(e))),w}Ys(e){let t=0;return e.store("remoteDocuments").X((s,d)=>{t+=xd(d)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(d=>Ft.forEach(d,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",w).next(P=>Ft.forEach(P,z=>{or(z.userId===g.userId);const X=Za(this.serializer,z);return Yf(e,g.userId,X).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return s.X((w,P)=>{const z=new vi(w),X=[0,ln(z)];g.push(t.get(X).next(ae=>ae?Ft.resolve():t.put({targetId:0,path:ln(z),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Ft.waitFor(g))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Wa});const s=t.store("collectionParents"),d=new qf,g=w=>{if(d.add(w)){const P=w.lastSegment(),z=w.popLast();return s.put({collectionId:P,parent:ln(z)})}};return t.store("remoteDocuments").X({Y:!0},(w,P)=>{const z=new vi(w);return g(z.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([w,P,z],X)=>{const ae=Kr(P);return g(ae.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,d)=>{const g=cl(d),w=Cd(this.serializer,g);return t.put(w)})}ei(e,t){const s=t.store("remoteDocuments"),d=[];return s.X((g,w)=>{const P=t.store("remoteDocumentsV14"),z=(X=w,X.document?new On(vi.fromString(X.document.name).popFirst(5)):X.noDocument?On.fromSegments(X.noDocument.path):X.unknownDocument?On.fromSegments(X.unknownDocument.path):Zn()).path.toArray();var X;const ae={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};d.push(P.put(ae))}).next(()=>Ft.waitFor(d))}ni(e,t){const s=t.store("mutations"),d=fl(this.serializer),g=new Od(Yu.js,this.serializer.le);return s.j().next(w=>{const P=new Map;return w.forEach(z=>{var X;let ae=null!==(X=P.get(z.userId))&&void 0!==X?X:Qr();Za(this.serializer,z).keys().forEach(Ze=>ae=ae.add(Ze)),P.set(z.userId,ae)}),Ft.forEach(P,(z,X)=>{const ae=new Xi(X),Ze=Xh.fe(this.serializer,ae),Mt=g.getIndexManager(ae),sn=Yr.fe(ae,this.serializer,Mt,g.referenceDelegate);return new qu(d,sn,Ze,Mt).recalculateAndSaveOverlaysForDocumentKeys(new Cl(t,Q.ct),z).next()})})}}function lf(r){r.createObjectStore("targetDocuments",{keyPath:Ic}).createIndex("documentTargetsIndex",wc,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",to,{unique:!0}),r.createObjectStore("targetGlobal")}const Jp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gh{constructor(e,t,s,d,g,w,P,z,X,ae,Ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=g,this.window=w,this.document=P,this.ii=X,this.ri=ae,this.oi=Ze,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Mt=>Promise.resolve(),!gh.D())throw new dn(Bt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hg(this,d),this.fi=t+"main",this.serializer=new jp(z),this.di=new Br(this.fi,this.oi,new Qp(this.serializer)),this.Fs=new rf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fl(this.serializer),this.Ls=new dh,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ae&&ss("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dn(Bt.FAILED_PRECONDITION,Jp);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Q(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,he.Z)(function*(d){if(t.started)return e(d)});return function(d){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,he.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(js(e))return hn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return hn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return mh(e).get("owner").next(t=>Ft.resolve(this.Ri(t)))}vi(e){return Rl(e).delete(this.clientId)}Pi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const d=Ds(s,"clientMetadata");return d.j().next(g=>{const w=e.Vi(g,18e5),P=g.filter(z=>-1===w.indexOf(z));return Ft.forEach(P,z=>d.delete(z.clientId)).next(()=>P)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?Ft.resolve(!0):mh(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new dn(Bt.FAILED_PRECONDITION,Jp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rl(e).j().next(s=>void 0===this.Vi(s,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&hn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Cl(t,Q.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Rl(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return Yr.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wm(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return Xh.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){hn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",g=15===(w=this.oi)?Eu:14===w?Uo:13===w?Gd:12===w?ia:11===w?zc:void Zn();var w;let P;return this.di.runTransaction(e,d,g,z=>(P=new Cl(z,this.Os?this.Os.next():Q.ct),"readwrite-primary"===t?this.Ii(P).next(X=>!!X||this.Ti(P)).next(X=>{if(!X)throw ss(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new dn(Bt.FAILED_PRECONDITION,wl);return s(P)}).next(X=>this.Ai(P).next(()=>X)):this.Oi(P).next(()=>s(P)))).then(z=>(P.raiseOnCommittedEvent(),z))}Oi(e){return mh(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new dn(Bt.FAILED_PRECONDITION,Jp)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mh(e).put("owner",t)}static D(){return Br.D()}Ei(e){const t=mh(e);return t.get("owner").next(s=>this.Ri(s)?(hn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ft.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(ss(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,Je.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return hn("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ss("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){ss("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mh(r){return Ds(r,"owner")}function Rl(r){return Ds(r,"clientMetadata")}function cu(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Xf{constructor(e,t,s,d){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=d}static Bi(e,t){let s=Qr(),d=Qr();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new Xf(e,t.fromCache,s,d)}}class Gg{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,d){return this.Ui(e,t).next(g=>g||this.Ki(e,t,d,s)).next(g=>g||this.Gi(e,t))}Ui(e,t){if(sc(t))return Ft.resolve(null);let s=vo(t);return this.indexManager.getIndexType(e,s).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=Xc(t,null,"F"),s=vo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(g=>{const w=Qr(...g);return this.qi.getDocuments(e,w).next(P=>this.indexManager.getMinOffset(e,s).next(z=>{const X=this.Qi(t,P);return this.ji(t,X,w,z.readTime)?this.Ui(e,Xc(t,null,"F")):this.zi(e,X,t,z)}))})))}Ki(e,t,s,d){return sc(t)||d.isEqual(nr.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(g=>{const w=this.Qi(t,g);return this.ji(t,w,s,d)?this.Gi(e,t):(gc()<=qe.in.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ud(t)),this.zi(e,w,t,vu(d,-1)))})}Qi(e,t){let s=new V(Pf(e));return t.forEach((d,g)=>{Qc(e,g)&&(s=s.add(g))}),s}ji(e,t,s,d){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Gi(e,t){return gc()<=qe.in.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",ud(t)),this.qi.getDocumentsMatchingQuery(e,t,_i.min())}zi(e,t,s,d){return this.qi.getDocumentsMatchingQuery(e,s,d).next(g=>(t.forEach(w=>{g=g.insert(w.key,w)}),g))}}class Wg{constructor(e,t,s,d){this.persistence=e,this.Wi=t,this.serializer=d,this.Hi=new $i(pr),this.Ji=new Nl(g=>_a(g),Rc),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qu(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function eg(r,e,t,s){return new Wg(r,e,t,s)}function Kg(r,e){return yh.apply(this,arguments)}function yh(){return yh=(0,he.Z)(function*(r,e){const t=Nn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let d;return t.mutationQueue.getAllMutationBatches(s).next(g=>(d=g,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const w=[],P=[];let z=Qr();for(const X of d){w.push(X.batchId);for(const ae of X.mutations)z=z.add(ae.key)}for(const X of g){P.push(X.batchId);for(const ae of X.mutations)z=z.add(ae.key)}return t.localDocuments.getDocuments(s,z).next(X=>({tr:X,removedBatchIds:w,addedBatchIds:P}))})})}),yh.apply(this,arguments)}function Qf(r){const e=Nn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function Jf(r,e,t){let s=Qr(),d=Qr();return t.forEach(g=>s=s.add(g)),e.getEntries(r,s).next(g=>{let w=So();return t.forEach((P,z)=>{const X=g.get(P);z.isFoundDocument()!==X.isFoundDocument()&&(d=d.add(P)),z.isNoDocument()&&z.version.isEqual(nr.min())?(e.removeEntry(P,z.readTime),w=w.insert(P,z)):!X.isValidDocument()||z.version.compareTo(X.version)>0||0===z.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(z),w=w.insert(P,z)):hn("LocalStore","Ignoring outdated watch update for ",P,". Current version:",X.version," Watch version:",z.version)}),{er:w,nr:d}})}function ep(r,e){const t=Nn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Nd(r,e){const t=Nn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let d;return t.Fs.getTargetData(s,e).next(g=>g?(d=g,Ft.resolve(d)):t.Fs.allocateTargetId(s).next(w=>(d=new au(e,w,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,d).next(()=>d))))}).then(s=>{const d=t.Hi.get(s.targetId);return(null===d||s.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function Zu(r,e,t){return uf.apply(this,arguments)}function uf(){return uf=(0,he.Z)(function*(r,e,t){const s=Nn(r),d=s.Hi.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,w=>s.persistence.referenceDelegate.removeTarget(w,d)))}catch(w){if(!js(w))throw w;hn("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(d.target)}),uf.apply(this,arguments)}function _h(r,e,t){const s=Nn(r);let d=nr.min(),g=Qr();return s.persistence.runTransaction("Execute query","readonly",w=>function(P,z,X){const ae=Nn(P),Ze=ae.Ji.get(X);return void 0!==Ze?Ft.resolve(ae.Hi.get(Ze)):ae.Fs.getTargetData(z,X)}(s,w,vo(e)).next(P=>{if(P)return d=P.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(w,P.targetId).next(z=>{g=z})}).next(()=>s.Wi.getDocumentsMatchingQuery(w,e,t?d:nr.min(),t?g:Qr())).next(P=>(qg(s,Jc(e),P),{documents:P,sr:g})))}function tg(r,e){const t=Nn(r),s=Nn(t.Fs),d=t.Hi.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",g=>s.he(g,e).next(w=>w?w.target:null))}function tp(r,e){const t=Nn(r),s=t.Yi.get(e)||nr.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Xi.getAllFromCollectionGroup(d,e,vu(s,-1),Number.MAX_SAFE_INTEGER)).then(d=>(qg(t,e,d),d))}function qg(r,e,t){let s=r.Yi.get(e)||nr.min();t.forEach((d,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),r.Yi.set(e,s)}function np(){return np=(0,he.Z)(function*(r,e,t,s){const d=Nn(r);let g=Qr(),w=So();for(const X of t){const ae=e.ir(X.metadata.name);X.document&&(g=g.add(ae));const Ze=e.rr(X);Ze.setReadTime(e.ur(X.metadata.readTime)),w=w.insert(ae,Ze)}const P=d.Xi.newChangeBuffer({trackRemovals:!0}),z=yield Nd(d,(X=s,vo(Sl(vi.fromString(`__bundle__/docs/${X}`)))));var X;return d.persistence.runTransaction("Apply bundle documents","readwrite",X=>Jf(X,P,w).next(ae=>(P.apply(X),ae)).next(ae=>d.Fs.removeMatchingKeysForTargetId(X,z.targetId).next(()=>d.Fs.addMatchingKeys(X,g,z.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(X,ae.er,ae.nr)).next(()=>ae.er)))}),np.apply(this,arguments)}function Jm(r,e){return pl.apply(this,arguments)}function pl(){return pl=(0,he.Z)(function*(r,e,t=Qr()){const s=yield Nd(r,vo(Hp(e.bundledQuery))),d=Nn(r);return d.persistence.runTransaction("Save named query","readwrite",g=>{const w=Rs(e.readTime);if(s.snapshotVersion.compareTo(w)>=0)return d.Ls.saveNamedQuery(g,e);const P=s.withResumeToken(bn.EMPTY_BYTE_STRING,w);return d.Hi=d.Hi.insert(P.targetId,P),d.Fs.updateTargetData(g,P).next(()=>d.Fs.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>d.Fs.addMatchingKeys(g,t,s.targetId)).next(()=>d.Ls.saveNamedQuery(g,e))})}),pl.apply(this,arguments)}function ng(r,e){return`firestore_clients_${r}_${e}`}function rp(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function ip(r,e){return`firestore_targets_${r}_${e}`}class ka{constructor(e,t,s,d){this.user=e,this.batchId=t,this.state=s,this.error=d}static cr(e,t,s){const d=JSON.parse(s);let g,w="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return w&&d.error&&(w="string"==typeof d.error.message&&"string"==typeof d.error.code,w&&(g=new dn(d.error.code,d.error.message))),w?new ka(e,t,d.state,g):(ss("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let d,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(d=new dn(s.error.code,s.error.message))),g?new Fd(e,s.state,d):(ss("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let d="object"==typeof s&&s.activeTargetIds instanceof Array,g=Qd();for(let w=0;d&&w<s.activeTargetIds.length;++w)d=zt(s.activeTargetIds[w]),g=g.add(s.activeTargetIds[w]);return d?new sp(e,g):(ss("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yg{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yg(t.clientId,t.onlineState):(ss("SharedClientState",`Failed to parse online state: ${e}`),null)}}class df{constructor(){this.activeTargetIds=Qd()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class op{constructor(e,t,s,d,g){this.window=e,this.si=t,this.persistenceKey=s,this.dr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new $i(pr),this.started=!1,this.gr=[];const w=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.yr=ng(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new df),this.Ir=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Mi();for(const d of t){if(d===e.dr)continue;const g=e.getItem(ng(e.persistenceKey,d));if(g){const w=sp.cr(d,g);w&&(e.mr=e.mr.insert(w.clientId,w))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const d=e.Pr(s);d&&e.br(d)}for(const d of e.gr)e.wr(d);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ip(this.persistenceKey,e));if(s){const d=Fd.cr(e,s);d&&(t=d.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ip(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(d=>{this.Dr(d)}),this.currentUser=e,s.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return hn("SharedClientState","READ",e,t),t}setItem(e,t){hn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){hn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(hn("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void ss("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const d=t.Or(s.key);return t.$r(d,null)}{const d=t.Fr(s.key,s.newValue);if(d)return t.$r(d.clientId,d)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const d=t.Br(s.key,s.newValue);if(d)return t.Lr(d)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const d=t.qr(s.key,s.newValue);if(d)return t.Ur(d)}}else if(s.key===t.Ar){if(null!==s.newValue){const d=t.Pr(s.newValue);if(d)return t.br(d)}}else if(s.key===t.pr){const d=function(g){let w=Q.ct;if(null!=g)try{const P=JSON.parse(g);or("number"==typeof P),w=P}catch(P){ss("SharedClientState","Failed to read sequence number from WebStorage",P)}return w}(s.newValue);d!==Q.ct&&t.sequenceNumberHandler(d)}else if(s.key===t.Rr){const d=t.Kr(s.newValue);yield Promise.all(d.map(g=>t.syncEngine.Gr(g)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const d=new ka(this.currentUser,e,t,s),g=rp(this.persistenceKey,this.currentUser,e);this.setItem(g,d.ar())}Dr(e){const t=rp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const d=ip(this.persistenceKey,e),g=new Fd(e,t,s);this.setItem(d,g.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return sp.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),d=Number(s[1]);return ka.cr(new Xi(void 0!==s[2]?s[2]:null),d,t)}qr(e,t){const s=this.Er.exec(e),d=Number(s[1]);return Fd.cr(d,t)}Pr(e){return Yg.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);hn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),d=this.Vr(this.mr),g=this.Vr(s),w=[],P=[];return g.forEach(z=>{d.has(z)||w.push(z)}),d.forEach(z=>{g.has(z)||P.push(z)}),this.syncEngine.zr(w,P).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Qd();return e.forEach((s,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class rg{constructor(){this.Wr=new df,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new df,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ey{Jr(e){}shutdown(){}}class Zg{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){hn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){hn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ap=null;function lp(){return null===ap?ap=268435456+Math.round(2147483648*Math.random()):ap++,"0x"+ap.toString(16)}const ty={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ig{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Na="WebChannelConnection";class ny extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,d,g){const w=lp(),P=this.Io(e,t);hn("RestConnection",`Sending RPC '${e}' ${w}:`,P,s);const z={};return this.To(z,d,g),this.Eo(e,P,z,s).then(X=>(hn("RestConnection",`Received RPC '${e}' ${w}: `,X),X),X=>{throw fi("RestConnection",`RPC '${e}' ${w} failed with error: `,X,"url: ",P,"request:",s),X})}Ao(e,t,s,d,g,w){return this.po(e,t,s,d,g)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+il,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,g)=>e[g]=d),s&&s.headers.forEach((d,g)=>e[g]=d)}Io(e,t){return`${this.wo}/v1/${t}:${ty[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,d){const g=lp();return new Promise((w,P)=>{const z=new vl;z.setWithCredentials(!0),z.listenOnce(Oi.COMPLETE,()=>{try{switch(z.getLastErrorCode()){case bs.NO_ERROR:const ae=z.getResponseJson();hn(Na,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(ae)),w(ae);break;case bs.TIMEOUT:hn(Na,`RPC '${e}' ${g} timed out`),P(new dn(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case bs.HTTP_ERROR:const Ze=z.getStatus();if(hn(Na,`RPC '${e}' ${g} failed with status:`,Ze,"response text:",z.getResponseText()),Ze>0){let Mt=z.getResponseJson();Array.isArray(Mt)&&(Mt=Mt[0]);const sn=null==Mt?void 0:Mt.error;if(sn&&sn.status&&sn.message){const Tn=function(Rn){const ur=Rn.toLowerCase().replace(/_/g,"-");return Object.values(Bt).indexOf(ur)>=0?ur:Bt.UNKNOWN}(sn.status);P(new dn(Tn,sn.message))}else P(new dn(Bt.UNKNOWN,"Server responded with status "+z.getStatus()))}else P(new dn(Bt.UNAVAILABLE,"Connection failed."));break;default:Zn()}}finally{hn(Na,`RPC '${e}' ${g} completed.`)}});const X=JSON.stringify(d);hn(Na,`RPC '${e}' ${g} sending request:`,d),z.send(t,"POST",X,s,15)})}Ro(e,t,s){const d=lp(),g=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=ga(),P=gi(),z={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(z.xmlHttpFactory=new nl({})),this.To(z.initMessageHeaders,t,s),z.encodeInitMessageHeaders=!0;const X=g.join("");hn(Na,`Creating RPC '${e}' stream ${d}: ${X}`,z);const ae=w.createWebChannel(X,z);let Ze=!1,Mt=!1;const sn=new ig({io:Rn=>{Mt?hn(Na,`Not sending because RPC '${e}' stream ${d} is closed:`,Rn):(Ze||(hn(Na,`Opening RPC '${e}' stream ${d} transport.`),ae.open(),Ze=!0),hn(Na,`RPC '${e}' stream ${d} sending:`,Rn),ae.send(Rn))},ro:()=>ae.close()}),Tn=(Rn,ur,ii)=>{Rn.listen(ur,ki=>{try{ii(ki)}catch(si){setTimeout(()=>{throw si},0)}})};return Tn(ae,Sa.EventType.OPEN,()=>{Mt||hn(Na,`RPC '${e}' stream ${d} transport opened.`)}),Tn(ae,Sa.EventType.CLOSE,()=>{Mt||(Mt=!0,hn(Na,`RPC '${e}' stream ${d} transport closed`),sn.fo())}),Tn(ae,Sa.EventType.ERROR,Rn=>{Mt||(Mt=!0,fi(Na,`RPC '${e}' stream ${d} transport errored:`,Rn),sn.fo(new dn(Bt.UNAVAILABLE,"The operation could not be completed")))}),Tn(ae,Sa.EventType.MESSAGE,Rn=>{var ur;if(!Mt){const ii=Rn.data[0];or(!!ii);const si=ii.error||(null===(ur=ii[0])||void 0===ur?void 0:ur.error);if(si){hn(Na,`RPC '${e}' stream ${d} received error:`,si);const $a=si.status;let Os=function(Ba){const Oh=Dt[Ba];if(void 0!==Oh)return er(Oh)}($a),Is=si.message;void 0===Os&&(Os=Bt.INTERNAL,Is="Unknown error status: "+$a+" with message "+si.message),Mt=!0,sn.fo(new dn(Os,Is)),ae.close()}else hn(Na,`RPC '${e}' stream ${d} received:`,ii),sn._o(ii)}}),Tn(P,po.STAT_EVENT,Rn=>{Rn.stat===Lo.PROXY?hn(Na,`RPC '${e}' stream ${d} detected buffering proxy`):Rn.stat===Lo.NOPROXY&&hn(Na,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{sn.lo()},0),sn}}function Xg(){return typeof window<"u"?window:null}function cp(){return typeof document<"u"?document:null}function hf(r){return new _d(r,!0)}class zl{constructor(e,t,s=1e3,d=1.5,g=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=d,this.bo=g,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),d=Math.max(0,t-s);d>0&&hn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,d,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class up{constructor(e,t,s,d,g,w,P,z){this.si=e,this.Mo=s,this.Oo=d,this.connection=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=P,this.listener=z,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new zl(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,he.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,he.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,he.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Bt.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Bt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,d])=>{this.$o===t&&this.Xo(s,d)},s=>{e(()=>{const d=new dn(Bt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(d)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(d=>{s(()=>this.Zo(d))}),this.stream.onMessage(d=>{s(()=>this.onMessage(d))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,he.Z)(function*(){e.state=0,e.start()}))}Zo(e){return hn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(hn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ev extends up{constructor(e,t,s,d,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,d,w),this.serializer=g}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Gh(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:Zn(),d=e.targetChange.targetIds||[],g=function(z,X){return z.useProto3Json?(or(void 0===X||"string"==typeof X),bn.fromBase64String(X||"")):(or(void 0===X||X instanceof Uint8Array),bn.fromUint8Array(X||new Uint8Array))}(r,e.targetChange.resumeToken),w=e.targetChange.cause,P=w&&function(z){const X=void 0===z.code?Bt.UNKNOWN:er(z.code);return new dn(X,z.message||"")}(w);t=new jh(s,d,g,P||null)}else if("documentChange"in e){const s=e.documentChange,d=jl(r,s.document.name),g=Rs(s.document.updateTime),w=s.document.createTime?Rs(s.document.createTime):nr.min(),P=new jo({mapValue:{fields:s.document.fields}}),z=zi.newFoundDocument(d,g,w,P);t=new Vl(s.targetIds||[],s.removedTargetIds||[],z.key,z)}else if("documentDelete"in e){const s=e.documentDelete,d=jl(r,s.document),g=s.readTime?Rs(s.readTime):nr.min(),w=zi.newNoDocument(d,g);t=new Vl([],s.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const s=e.documentRemove,d=jl(r,s.document);t=new Vl([],s.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Zn();{const s=e.filter,{count:d=0,unchangedNames:g}=s,w=new st(d,g);t=new rh(s.targetId,w)}}var z;return t}(this.serializer,e),s=function(d){if(!("targetChange"in d))return nr.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?nr.min():g.readTime?Rs(g.readTime):nr.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=lh(this.serializer),t.addTarget=function(d,g){let w;const P=g.target;if(w=cd(P)?{documents:kc(d,P)}:{query:ch(d,P)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=Bp(d,g.resumeToken);const z=Hh(d,g.expectedCount);null!==z&&(w.expectedCount=z)}else if(g.snapshotVersion.compareTo(nr.min())>0){w.readTime=$u(d,g.snapshotVersion.toTimestamp());const z=Hh(d,g.expectedCount);null!==z&&(w.expectedCount=z)}return w}(this.serializer,e);const s=function Bf(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=lh(this.serializer),t.removeTarget=e,this.zo(t)}}class tv extends up{constructor(e,t,s,d,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,d,w),this.serializer=g,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(or(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function qh(r,e){return r&&r.length>0?(or(void 0!==e),r.map(t=>function(s,d){let g=Rs(s.updateTime?s.updateTime:d);return g.isEqual(nr.min())&&(g=Rs(d)),new Pa(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Rs(e.commitTime);return this.listener.uu(s,t)}return or(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=lh(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Wh(this.serializer,s))};this.zo(t)}}class Qg extends class{}{constructor(e,t,s,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=d,this.hu=!1}lu(){if(this.hu)throw new dn(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.po(e,t,s,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new dn(Bt.UNKNOWN,d.toString())})}Ao(e,t,s,d){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Ao(e,t,s,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new dn(Bt.UNKNOWN,g.toString())})}terminate(){this.hu=!0}}class Jg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(ss(t),this.wu=!1):hn("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class og{constructor(e,t,s,d,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=g,this.vu.Jr(P=>{s.enqueueAndForget((0,he.Z)(function*(){var z;hu(w)&&(hn("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,he.Z)(function*(X){const ae=Nn(X);ae.Au.add(4),yield uu(ae),ae.Pu.set("Unknown"),ae.Au.delete(4),yield ff(ae)}),function(X){return z.apply(this,arguments)})(w))}))}),this.Pu=new Jg(s,d)}}function ff(r){return ag.apply(this,arguments)}function ag(){return ag=(0,he.Z)(function*(r){if(hu(r))for(const e of r.Ru)yield e(!0)}),ag.apply(this,arguments)}function uu(r){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,he.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Gl.apply(this,arguments)}function Hs(r,e){const t=Nn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),hp(t)?dp(t):wh(t).Uo()&&du(t,e))}function Fa(r,e){const t=Nn(r),s=wh(t);t.Eu.delete(e),s.Uo()&&iy(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():hu(t)&&t.Pu.set("Unknown"))}function du(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wh(r).nu(e)}function iy(r,e){r.bu.Lt(e),wh(r).su(e)}function dp(r){r.bu=new Fu({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),wh(r).start(),r.Pu.mu()}function hp(r){return hu(r)&&!wh(r).qo()&&r.Eu.size>0}function hu(r){return 0===Nn(r).Au.size}function lg(r){r.bu=void 0}function cg(r){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,he.Z)(function*(r){r.Eu.forEach((e,t)=>{du(r,e)})}),Wl.apply(this,arguments)}function pf(r,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,he.Z)(function*(r,e){lg(r),hp(r)?(r.Pu.pu(e),dp(r)):r.Pu.set("Unknown")}),Ld.apply(this,arguments)}function Eh(r,e,t){return $d.apply(this,arguments)}function $d(){return $d=(0,he.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof jh&&2===e.state&&e.cause)try{yield(s=(0,he.Z)(function*(d,g){const w=g.cause;for(const P of g.targetIds)d.Eu.has(P)&&(yield d.remoteSyncer.rejectListen(P,w),d.Eu.delete(P),d.bu.removeTarget(P))}),function(d,g){return s.apply(this,arguments)})(r,e)}catch(s){hn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield gf(r,s)}else if(e instanceof Vl?r.bu.Wt(e):e instanceof rh?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(nr.min()))try{const s=yield Qf(r.localStore);t.compareTo(s)>=0&&(yield function(d,g){const w=d.bu.ue(g);return w.targetChanges.forEach((P,z)=>{if(P.resumeToken.approximateByteSize()>0){const X=d.Eu.get(z);X&&d.Eu.set(z,X.withResumeToken(P.resumeToken,g))}}),w.targetMismatches.forEach((P,z)=>{const X=d.Eu.get(P);if(!X)return;d.Eu.set(P,X.withResumeToken(bn.EMPTY_BYTE_STRING,X.snapshotVersion)),iy(d,P);const ae=new au(X.target,P,z,X.sequenceNumber);du(d,ae)}),d.remoteSyncer.applyRemoteEvent(w)}(r,t))}catch(s){hn("RemoteStore","Failed to raise snapshot:",s),yield gf(r,s)}var s}),$d.apply(this,arguments)}function gf(r,e,t){return mf.apply(this,arguments)}function mf(){return mf=(0,he.Z)(function*(r,e,t){if(!js(e))throw e;r.Au.add(1),yield uu(r),r.Pu.set("Offline"),t||(t=()=>Qf(r.localStore)),r.asyncQueue.enqueueRetryable((0,he.Z)(function*(){hn("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield ff(r)}))}),mf.apply(this,arguments)}function em(r,e){return e().catch(t=>gf(r,t,e))}function Ih(r){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,he.Z)(function*(r){const e=Nn(r),t=Qu(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;tm(e);)try{const d=yield ep(e.localStore,s);if(null===d){0===e.Tu.length&&t.Qo();break}s=d.batchId,sy(e,d)}catch(d){yield gf(e,d)}nm(e)&&rm(e)}),Xu.apply(this,arguments)}function tm(r){return hu(r)&&r.Tu.length<10}function sy(r,e){r.Tu.push(e);const t=Qu(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function nm(r){return hu(r)&&!Qu(r).qo()&&r.Tu.length>0}function rm(r){Qu(r).start()}function oy(r){return fp.apply(this,arguments)}function fp(){return fp=(0,he.Z)(function*(r){Qu(r).au()}),fp.apply(this,arguments)}function ay(r){return ug.apply(this,arguments)}function ug(){return ug=(0,he.Z)(function*(r){const e=Qu(r);for(const t of r.Tu)e.ou(t.mutations)}),ug.apply(this,arguments)}function im(r,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,he.Z)(function*(r,e,t){const s=r.Tu.shift(),d=x.from(s,e,t);yield em(r,()=>r.remoteSyncer.applySuccessfulWrite(d)),yield Ih(r)}),pp.apply(this,arguments)}function dg(r,e){return hg.apply(this,arguments)}function hg(){return hg=(0,he.Z)(function*(r,e){var t;e&&Qu(r).ru&&(yield(t=(0,he.Z)(function*(s,d){if(Mn(g=d.code)&&g!==Bt.ABORTED){const w=s.Tu.shift();Qu(s).Go(),yield em(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,d)),yield Ih(s)}var g}),function(s,d){return t.apply(this,arguments)})(r,e)),nm(r)&&rm(r)}),hg.apply(this,arguments)}function gp(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,he.Z)(function*(r,e){const t=Nn(r);t.asyncQueue.verifyOperationInProgress(),hn("RemoteStore","RemoteStore received new credentials");const s=hu(t);t.Au.add(3),yield uu(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield ff(t)}),fg.apply(this,arguments)}function mp(r,e){return pg.apply(this,arguments)}function pg(){return pg=(0,he.Z)(function*(r,e){const t=Nn(r);e?(t.Au.delete(2),yield ff(t)):e||(t.Au.add(2),yield uu(t),t.Pu.set("Unknown"))}),pg.apply(this,arguments)}function wh(r){return r.Vu||(r.Vu=function(e,t,s){const d=Nn(e);return d.lu(),new ev(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,s)}(r.datastore,r.asyncQueue,{oo:cg.bind(null,r),co:pf.bind(null,r),eu:Eh.bind(null,r)}),r.Ru.push(function(){var e=(0,he.Z)(function*(t){t?(r.Vu.Go(),hp(r)?dp(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),lg(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function Qu(r){return r.Su||(r.Su=function(e,t,s){const d=Nn(e);return d.lu(),new tv(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,s)}(r.datastore,r.asyncQueue,{oo:oy.bind(null,r),co:dg.bind(null,r),cu:ay.bind(null,r),uu:im.bind(null,r)}),r.Ru.push(function(){var e=(0,he.Z)(function*(t){t?(r.Su.Go(),yield Ih(r)):(yield r.Su.stop(),r.Tu.length>0&&(hn("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class u{constructor(e,t,s,d,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=d,this.removalCallback=g,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,s,d,g){const w=Date.now()+s,P=new u(e,t,w,d,g);return P.start(s),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dn(Bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a(r,e){if(ss("AsyncQueue",`${e}: ${r}`),js(r))return new dn(Bt.UNAVAILABLE,`${e}: ${r}`);throw r}class l{constructor(e){this.comparator=e?(t,s)=>e(t,s)||On.comparator(t.key,s.key):(t,s)=>On.comparator(t.key,s.key),this.keyedMap=eu(),this.sortedSet=new $i(this.comparator)}static emptySet(e){return new l(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new l;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class m{constructor(){this.Du=new $i(On.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Zn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class C{constructor(e,t,s,d,g,w,P,z,X){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=d,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=P,this.excludesMetadataChanges=z,this.hasCachedResults=X}static fromInitialDocuments(e,t,s,d,g){const w=[];return t.forEach(P=>{w.push({type:0,doc:P})}),new C(e,t,l.emptySet(t),w,s,d,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==s[d].type||!t[d].doc.isEqual(s[d].doc))return!1;return!0}}class M{constructor(){this.xu=void 0,this.listeners=[]}}class U{constructor(){this.queries=new Nl(e=>Xd(e),ac),this.onlineState="Unknown",this.Nu=new Set}}function J(r,e){return ue.apply(this,arguments)}function ue(){return ue=(0,he.Z)(function*(r,e){const t=Nn(r),s=e.query;let d=!1,g=t.queries.get(s);if(g||(d=!0,g=new M),d)try{g.xu=yield t.onListen(s)}catch(w){const P=a(w,`Initialization of query '${ud(e.query)}' failed`);return void e.onError(P)}t.queries.set(s,g),g.listeners.push(e),e.ku(t.onlineState),g.xu&&e.Mu(g.xu)&&vn(t)}),ue.apply(this,arguments)}function Ce(r,e){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,he.Z)(function*(r,e){const t=Nn(r),s=e.query;let d=!1;const g=t.queries.get(s);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),d=0===g.listeners.length)}if(d)return t.queries.delete(s),t.onUnlisten(s)}),Rt.apply(this,arguments)}function Gt(r,e){const t=Nn(r);let s=!1;for(const d of e){const w=t.queries.get(d.query);if(w){for(const P of w.listeners)P.Mu(d)&&(s=!0);w.xu=d}}s&&vn(t)}function Qt(r,e,t){const s=Nn(r),d=s.queries.get(e);if(d)for(const g of d.listeners)g.onError(t);s.queries.delete(e)}function vn(r){r.Nu.forEach(e=>{e.next()})}class Ln{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const d of e.docChanges)3!==d.type&&s.push(d);e=new C(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=C.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class yr{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Jr{constructor(e){this.serializer=e}ir(e){return jl(this.serializer,e)}rr(e){return e.metadata.exists?$f(this.serializer,e.document,!1):zi.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Rs(e)}}class zs{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qi(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=vi.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Jr(this.serializer);for(const d of e)if(d.metadata.queries){const g=s.ir(d.metadata.name);for(const w of d.metadata.queries){const P=(t.get(w)||Qr()).add(g);t.set(w,P)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function Qm(r,e,t,s){return np.apply(this,arguments)}(e.localStore,new Jr(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const d of e.queries)yield Jm(e.localStore,d,s.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function Qi(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Ts{constructor(e){this.key=e}}class Ms{constructor(e){this.key=e}}class Kl{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Qr(),this.mutatedKeys=Qr(),this.Zu=Pf(e),this.tc=new l(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new m,d=t?t.tc:this.tc;let g=t?t.mutatedKeys:this.mutatedKeys,w=d,P=!1;const z="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,X="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ae,Ze)=>{const Mt=d.get(ae),sn=Qc(this.query,Ze)?Ze:null,Tn=!!Mt&&this.mutatedKeys.has(Mt.key),Rn=!!sn&&(sn.hasLocalMutations||this.mutatedKeys.has(sn.key)&&sn.hasCommittedMutations);let ur=!1;Mt&&sn?Mt.data.isEqual(sn.data)?Tn!==Rn&&(s.track({type:3,doc:sn}),ur=!0):this.ic(Mt,sn)||(s.track({type:2,doc:sn}),ur=!0,(z&&this.Zu(sn,z)>0||X&&this.Zu(sn,X)<0)&&(P=!0)):!Mt&&sn?(s.track({type:0,doc:sn}),ur=!0):Mt&&!sn&&(s.track({type:1,doc:Mt}),ur=!0,(z||X)&&(P=!0)),ur&&(sn?(w=w.add(sn),g=Rn?g.add(ae):g.delete(ae)):(w=w.delete(ae),g=g.delete(ae)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ae="F"===this.query.limitType?w.last():w.first();w=w.delete(ae.key),g=g.delete(ae.key),s.track({type:1,doc:ae})}return{tc:w,sc:s,ji:P,mutatedKeys:g}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const d=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const g=e.sc.Cu();g.sort((X,ae)=>function(Ze,Mt){const sn=Tn=>{switch(Tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zn()}};return sn(Ze)-sn(Mt)}(X.type,ae.type)||this.Zu(X.doc,ae.doc)),this.rc(s);const w=t?this.oc():[],P=0===this.Xu.size&&this.current?1:0,z=P!==this.Yu;return this.Yu=P,0!==g.length||z?{snapshot:new C(this.query,e.tc,d,g,e.mutatedKeys,0===P,z,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:w}:{uc:w}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new m,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Qr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new Ms(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new Ts(s))}),t}ac(e){this.Ju=e.sr,this.Xu=Qr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return C.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class dc{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Ju{constructor(e){this.key=e,this.lc=!1}}class Lc{constructor(e,t,s,d,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.fc={},this.dc=new Nl(P=>Xd(P),ac),this._c=new Map,this.wc=new Set,this.mc=new $i(On.comparator),this.gc=new Map,this.yc=new Xp,this.Ic={},this.Tc=new Map,this.Ec=Hu.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function ed(r,e){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,he.Z)(function*(r,e){const t=pm(r);let s,d;const g=t.dc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),d=g.view.hc();else{const w=yield Nd(t.localStore,vo(e)),P=t.sharedClientState.addLocalQueryTarget(w.targetId);s=w.targetId,d=yield bh(t,e,s,"current"===P,w.resumeToken),t.isPrimaryClient&&Hs(t.remoteStore,w)}return d}),Ch.apply(this,arguments)}function bh(r,e,t,s,d){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,he.Z)(function*(r,e,t,s,d){r.Rc=(Ze,Mt,sn)=>{return(Tn=(0,he.Z)(function*(Rn,ur,ii,ki){let si=ur.view.nc(ii);si.ji&&(si=yield _h(Rn.localStore,ur.query,!1).then(({documents:Is})=>ur.view.nc(Is,si)));const $a=ki&&ki.targetChanges.get(ur.targetId),Os=ur.view.applyChanges(si,Rn.isPrimaryClient,$a);return vg(Rn,ur.targetId,Os.uc),Os.snapshot}),function(Rn,ur,ii,ki){return Tn.apply(this,arguments)})(r,Ze,Mt,sn);var Tn};const g=yield _h(r.localStore,e,!0),w=new Kl(e,g.sr),P=w.nc(g.documents),z=Ea.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,d),X=w.applyChanges(P,r.isPrimaryClient,z);vg(r,t,X.uc);const ae=new dc(e,t,w);return r.dc.set(e,ae),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),X.snapshot}),Dh.apply(this,arguments)}function nv(r,e){return sm.apply(this,arguments)}function sm(){return sm=(0,he.Z)(function*(r,e){const t=Nn(r),s=t.dc.get(e),d=t._c.get(s.targetId);if(d.length>1)return t._c.set(s.targetId,d.filter(g=>!ac(g,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Zu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Fa(t.remoteStore,s.targetId),Bd(t,s.targetId)}).catch(vs))):(Bd(t,s.targetId),yield Zu(t.localStore,s.targetId,!0))}),sm.apply(this,arguments)}function om(){return om=(0,he.Z)(function*(r,e,t){const s=gm(r);try{const d=yield function(g,w){const P=Nn(g),z=yi.now(),X=w.reduce((Mt,sn)=>Mt.add(sn.key),Qr());let ae,Ze;return P.persistence.runTransaction("Locally write mutations","readwrite",Mt=>{let sn=So(),Tn=Qr();return P.Xi.getEntries(Mt,X).next(Rn=>{sn=Rn,sn.forEach((ur,ii)=>{ii.isValidDocument()||(Tn=Tn.add(ur))})}).next(()=>P.localDocuments.getOverlayedDocuments(Mt,sn)).next(Rn=>{ae=Rn;const ur=[];for(const ii of w){const ki=Nf(ii,ae.get(ii.key).overlayedDocument);null!=ki&&ur.push(new Ya(ii.key,ki,Tc(ki.value.mapValue),hs.exists(!0)))}return P.mutationQueue.addMutationBatch(Mt,z,ur,w)}).next(Rn=>{Ze=Rn;const ur=Rn.applyToLocalDocumentSet(ae,Tn);return P.documentOverlayCache.saveOverlays(Mt,Rn.batchId,ur)})}).then(()=>({batchId:Ze.batchId,changes:dd(ae)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(d.batchId),function(g,w,P){let z=g.Ic[g.currentUser.toKey()];z||(z=new $i(pr)),z=z.insert(w,P),g.Ic[g.currentUser.toKey()]=z}(s,d.batchId,t),yield $c(s,d.changes),yield Ih(s.remoteStore)}catch(d){const g=a(d,"Failed to persist write");t.reject(g)}}),om.apply(this,arguments)}function ly(r,e){return am.apply(this,arguments)}function am(){return am=(0,he.Z)(function*(r,e){const t=Nn(r);try{const s=yield function cf(r,e){const t=Nn(r),s=e.snapshotVersion;let d=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.Xi.newChangeBuffer({trackRemovals:!0});d=t.Hi;const P=[];e.targetChanges.forEach((ae,Ze)=>{const Mt=d.get(Ze);if(!Mt)return;P.push(t.Fs.removeMatchingKeys(g,ae.removedDocuments,Ze).next(()=>t.Fs.addMatchingKeys(g,ae.addedDocuments,Ze)));let sn=Mt.withSequenceNumber(g.currentSequenceNumber);var Tn,Rn,ur;null!==e.targetMismatches.get(Ze)?sn=sn.withResumeToken(bn.EMPTY_BYTE_STRING,nr.min()).withLastLimboFreeSnapshotVersion(nr.min()):ae.resumeToken.approximateByteSize()>0&&(sn=sn.withResumeToken(ae.resumeToken,s)),d=d.insert(Ze,sn),Rn=sn,ur=ae,(0===(Tn=Mt).resumeToken.approximateByteSize()||Rn.snapshotVersion.toMicroseconds()-Tn.snapshotVersion.toMicroseconds()>=3e8||ur.addedDocuments.size+ur.modifiedDocuments.size+ur.removedDocuments.size>0)&&P.push(t.Fs.updateTargetData(g,sn))});let z=So(),X=Qr();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&P.push(t.persistence.referenceDelegate.updateLimboDocument(g,ae))}),P.push(Jf(g,w,e.documentUpdates).next(ae=>{z=ae.er,X=ae.nr})),!s.isEqual(nr.min())){const ae=t.Fs.getLastRemoteSnapshotVersion(g).next(Ze=>t.Fs.setTargetsMetadata(g,g.currentSequenceNumber,s));P.push(ae)}return Ft.waitFor(P).next(()=>w.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,z,X)).next(()=>z)}).then(g=>(t.Hi=d,g))}(t.localStore,e);e.targetChanges.forEach((d,g)=>{const w=t.gc.get(g);w&&(or(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?w.lc=!0:d.modifiedDocuments.size>0?or(w.lc):d.removedDocuments.size>0&&(or(w.lc),w.lc=!1))}),yield $c(t,s,e)}catch(s){yield vs(s)}}),am.apply(this,arguments)}function cy(r,e,t){const s=Nn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const d=[];s.dc.forEach((g,w)=>{const P=w.view.ku(e);P.snapshot&&d.push(P.snapshot)}),function(g,w){const P=Nn(g);P.onlineState=w;let z=!1;P.queries.forEach((X,ae)=>{for(const Ze of ae.listeners)Ze.ku(w)&&(z=!0)}),z&&vn(P)}(s.eventManager,e),d.length&&s.fc.eu(d),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function iv(r,e,t){return lm.apply(this,arguments)}function lm(){return lm=(0,he.Z)(function*(r,e,t){const s=Nn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const d=s.gc.get(e),g=d&&d.key;if(g){let w=new $i(On.comparator);w=w.insert(g,zi.newNoDocument(g,nr.min()));const P=Qr().add(g),z=new ou(nr.min(),new Map,new $i(pr),w,P);yield ly(s,z),s.mc=s.mc.remove(g),s.gc.delete(e),yp(s)}else yield Zu(s.localStore,e,!1).then(()=>Bd(s,e,t)).catch(vs)}),lm.apply(this,arguments)}function w_(r,e){return uy.apply(this,arguments)}function uy(){return uy=(0,he.Z)(function*(r,e){const t=Nn(r),s=e.batch.batchId;try{const d=yield function vh(r,e){const t=Nn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const d=e.batch.keys(),g=t.Xi.newChangeBuffer({trackRemovals:!0});return function(w,P,z,X){const ae=z.batch,Ze=ae.keys();let Mt=Ft.resolve();return Ze.forEach(sn=>{Mt=Mt.next(()=>X.getEntry(P,sn)).next(Tn=>{const Rn=z.docVersions.get(sn);or(null!==Rn),Tn.version.compareTo(Rn)<0&&(ae.applyToRemoteDocument(Tn,z),Tn.isValidDocument()&&(Tn.setReadTime(z.commitVersion),X.addEntry(Tn)))})}),Mt.next(()=>w.mutationQueue.removeMutationBatch(P,ae))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let P=Qr();for(let z=0;z<w.mutationResults.length;++z)w.mutationResults[z].transformResults.length>0&&(P=P.add(w.batch.mutations[z].key));return P}(e))).next(()=>t.localDocuments.getDocuments(s,d))})}(t.localStore,e);hy(t,s,null),mg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield $c(t,d)}catch(d){yield vs(d)}}),uy.apply(this,arguments)}function sv(r,e,t){return dy.apply(this,arguments)}function dy(){return dy=(0,he.Z)(function*(r,e,t){const s=Nn(r);try{const d=yield function(g,w){const P=Nn(g);return P.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let X;return P.mutationQueue.lookupMutationBatch(z,w).next(ae=>(or(null!==ae),X=ae.keys(),P.mutationQueue.removeMutationBatch(z,ae))).next(()=>P.mutationQueue.performConsistencyCheck(z)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(z,X,w)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,X)).next(()=>P.localDocuments.getDocuments(z,X))})}(s.localStore,e);hy(s,e,t),mg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield $c(s,d)}catch(d){yield vs(d)}}),dy.apply(this,arguments)}function gg(){return gg=(0,he.Z)(function*(r,e){const t=Nn(r);hu(t.remoteStore)||hn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=Nn(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>w.mutationQueue.getHighestUnacknowledgedBatchId(P))}(t.localStore);if(-1===s)return void e.resolve();const d=t.Tc.get(s)||[];d.push(e),t.Tc.set(s,d)}catch(s){const d=a(s,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),gg.apply(this,arguments)}function mg(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function hy(r,e,t){const s=Nn(r);let d=s.Ic[s.currentUser.toKey()];if(d){const g=d.get(e);g&&(t?g.reject(t):g.resolve(),d=d.remove(e)),s.Ic[s.currentUser.toKey()]=d}}function Bd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||yg(r,s)})}function yg(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(Fa(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),yp(r))}function vg(r,e,t){for(const s of t)s instanceof Ts?(r.yc.addReference(s.key,e),C_(r,s)):s instanceof Ms?(hn("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||yg(r,s.key)):Zn()}function C_(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(hn("SyncEngine","New document in limbo: "+t),r.wc.add(s),yp(r))}function yp(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new On(vi.fromString(e)),s=r.Ec.next();r.gc.set(s,new Ju(t)),r.mc=r.mc.insert(t,s),Hs(r.remoteStore,new au(vo(Sl(t.path)),s,"TargetPurposeLimboResolution",Q.ct))}}function $c(r,e,t){return _g.apply(this,arguments)}function _g(){return _g=(0,he.Z)(function*(r,e,t){const s=Nn(r),d=[],g=[],w=[];var P;s.dc.isEmpty()||(s.dc.forEach((P,z)=>{w.push(s.Rc(z,e,t).then(X=>{if((X||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(z.targetId,null!=X&&X.fromCache?"not-current":"current"),X){d.push(X);const ae=Xf.Bi(z.targetId,X);g.push(ae)}}))}),yield Promise.all(w),s.fc.eu(d),yield(P=(0,he.Z)(function*(z,X){const ae=Nn(z);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ze=>Ft.forEach(X,Mt=>Ft.forEach(Mt.$i,sn=>ae.persistence.referenceDelegate.addReference(Ze,Mt.targetId,sn)).next(()=>Ft.forEach(Mt.Fi,sn=>ae.persistence.referenceDelegate.removeReference(Ze,Mt.targetId,sn)))))}catch(Ze){if(!js(Ze))throw Ze;hn("LocalStore","Failed to update sequence numbers: "+Ze)}for(const Ze of X){const Mt=Ze.targetId;if(!Ze.fromCache){const sn=ae.Hi.get(Mt),Rn=sn.withLastLimboFreeSnapshotVersion(sn.snapshotVersion);ae.Hi=ae.Hi.insert(Mt,Rn)}}}),function(z,X){return P.apply(this,arguments)})(s.localStore,g))}),_g.apply(this,arguments)}function av(r,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,he.Z)(function*(r,e){const t=Nn(r);if(!t.currentUser.isEqual(e)){hn("SyncEngine","User change. New user:",e.toKey());const s=yield Kg(t.localStore,e);t.currentUser=e,(d=t).Tc.forEach(w=>{w.forEach(P=>{P.reject(new dn(Bt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield $c(t,s.tr)}var d}),Eg.apply(this,arguments)}function lv(r,e){const t=Nn(r),s=t.gc.get(e);if(s&&s.lc)return Qr().add(s.key);{let d=Qr();const g=t._c.get(e);if(!g)return d;for(const w of g){const P=t.dc.get(w);d=d.unionWith(P.view.ec)}return d}}function cv(r,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,he.Z)(function*(r,e){const t=Nn(r),s=yield _h(t.localStore,e.query,!0),d=e.view.ac(s);return t.isPrimaryClient&&vg(t,e.targetId,d.uc),d}),Ig.apply(this,arguments)}function uv(r,e){return fy.apply(this,arguments)}function fy(){return fy=(0,he.Z)(function*(r,e){const t=Nn(r);return tp(t.localStore,e).then(s=>$c(t,s))}),fy.apply(this,arguments)}function dv(r,e,t,s){return cm.apply(this,arguments)}function cm(){return cm=(0,he.Z)(function*(r,e,t,s){const d=Nn(r),g=yield function(w,P){const z=Nn(w),X=Nn(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",ae=>X.Vn(ae,P).next(Ze=>Ze?z.localDocuments.getDocuments(ae,Ze):Ft.resolve(null)))}(d.localStore,e);var P;null!==g?("pending"===t?yield Ih(d.remoteStore):"acknowledged"===t||"rejected"===t?(hy(d,e,s||null),mg(d,e),P=e,Nn(Nn(d.localStore).mutationQueue).Dn(P)):Zn(),yield $c(d,g)):hn("SyncEngine","Cannot apply mutation batch with id: "+e)}),cm.apply(this,arguments)}function um(){return um=(0,he.Z)(function*(r,e){const t=Nn(r);if(pm(t),gm(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),d=yield fv(t,s.toArray());t.Ac=!0,yield mp(t.remoteStore,!0);for(const g of d)Hs(t.remoteStore,g)}else if(!1===e&&!1!==t.Ac){const s=[];let d=Promise.resolve();t._c.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?s.push(w):d=d.then(()=>(Bd(t,w),Zu(t.localStore,w,!0))),Fa(t.remoteStore,w)}),yield d,yield fv(t,s),function(g){const w=Nn(g);w.gc.forEach((P,z)=>{Fa(w.remoteStore,z)}),w.yc.Is(),w.gc=new Map,w.mc=new $i(On.comparator)}(t),t.Ac=!1,yield mp(t.remoteStore,!1)}}),um.apply(this,arguments)}function fv(r,e,t){return dm.apply(this,arguments)}function dm(){return dm=(0,he.Z)(function*(r,e,t){const s=Nn(r),d=[],g=[];for(const w of e){let P;const z=s._c.get(w);if(z&&0!==z.length){P=yield Nd(s.localStore,vo(z[0]));for(const X of z){const ae=s.dc.get(X),Ze=yield cv(s,ae);Ze.snapshot&&g.push(Ze.snapshot)}}else{const X=yield tg(s.localStore,w);P=yield Nd(s.localStore,X),yield bh(s,py(X),w,!1,P.resumeToken)}d.push(P)}return s.fc.eu(g),d}),dm.apply(this,arguments)}function py(r){return Mf(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function pv(r){const e=Nn(r);return Nn(Nn(e.localStore).persistence).Mi()}function gy(r,e,t,s){return hm.apply(this,arguments)}function hm(){return hm=(0,he.Z)(function*(r,e,t,s){const d=Nn(r);if(d.Ac)return void hn("SyncEngine","Ignoring unexpected query state notification.");const g=d._c.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield tp(d.localStore,Jc(g[0])),P=ou.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bn.EMPTY_BYTE_STRING);yield $c(d,w,P);break}case"rejected":yield Zu(d.localStore,e,!0),Bd(d,e,s);break;default:Zn()}}),hm.apply(this,arguments)}function gv(r,e,t){return fm.apply(this,arguments)}function fm(){return fm=(0,he.Z)(function*(r,e,t){const s=pm(r);if(s.Ac){for(const d of e){if(s._c.has(d)){hn("SyncEngine","Adding an already active target "+d);continue}const g=yield tg(s.localStore,d),w=yield Nd(s.localStore,g);yield bh(s,py(g),w.targetId,!1,w.resumeToken),Hs(s.remoteStore,w)}for(const d of t)s._c.has(d)&&(yield Zu(s.localStore,d,!1).then(()=>{Fa(s.remoteStore,d),Bd(s,d)}).catch(vs))}}),fm.apply(this,arguments)}function pm(r){const e=Nn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ly.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iv.bind(null,e),e.fc.eu=Gt.bind(null,e.eventManager),e.fc.vc=Qt.bind(null,e.eventManager),e}function gm(r){const e=Nn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sv.bind(null,e),e}class vp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.serializer=hf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return eg(this.persistence,new Gg,e.initialUser,this.serializer)}createPersistence(e){return new Od(Yu.js,this.serializer)}createSharedClientState(e){return new rg}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _p extends vp{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,he.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield gm(s.bc.syncEngine),yield Ih(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return eg(this.persistence,new Gg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Kp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new j(t,this.persistence);return new O(e.asyncQueue,s)}createPersistence(e){const t=cu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Oa.withCacheSize(this.cacheSizeBytes):Oa.DEFAULT;return new gh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Xg(),cp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rg}}class Ud extends _p{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,he.Z)(function*(){yield t().call(s,e);const d=s.bc.syncEngine;s.sharedClientState instanceof op&&(s.sharedClientState.syncEngine={Qr:dv.bind(null,d),jr:gy.bind(null,d),zr:gv.bind(null,d),Mi:pv.bind(null,d),Gr:uv.bind(null,d)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var g=(0,he.Z)(function*(w){yield function hv(r,e){return um.apply(this,arguments)}(s.bc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Xg();if(!op.D(t))throw new dn(Bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=cu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new op(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ep{initialize(e,t){var s=this;return(0,he.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=d=>cy(s.syncEngine,d,1),s.remoteStore.remoteSyncer.handleCredentialChange=av.bind(null,s.syncEngine),yield mp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new U}createDatastore(e){const t=hf(e.databaseInfo.databaseId),s=new ny(e.databaseInfo);return new Qg(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,d=e.asyncQueue,g=P=>cy(this.syncEngine,P,0),w=Zg.D()?new Zg:new ey,new og(t,s,d,g,w);var t,s,d,g,w}createSyncEngine(e,t){return function(s,d,g,w,P,z,X){const ae=new Lc(s,d,g,w,P,z);return X&&(ae.Ac=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const s=Nn(t);hn("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield uu(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vv(r,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yf{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new ji,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),d=Number(s);isNaN(d)&&e.kc(`length string (${s}) is not valid number`);const g=yield e.Mc(d);return new yr(JSON.parse(g),t.length+d)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,he.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,he.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class my{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new dn(Bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(d=(0,he.Z)(function*(g,w){const P=Nn(g),z=lh(P.serializer)+"/documents",X={documents:w.map(sn=>ah(P.serializer,sn))},ae=yield P.Ao("BatchGetDocuments",z,X,w.length),Ze=new Map;ae.forEach(sn=>{const Tn=function Vp(r,e){return"found"in e?function(t,s){or(!!s.found);const d=jl(t,s.found.name),g=Rs(s.found.updateTime),w=s.found.createTime?Rs(s.found.createTime):nr.min(),P=new jo({mapValue:{fields:s.found.fields}});return zi.newFoundDocument(d,g,w,P)}(r,e):"missing"in e?function(t,s){or(!!s.missing),or(!!s.readTime);const d=jl(t,s.missing),g=Rs(s.readTime);return zi.newNoDocument(d,g)}(r,e):Zn()}(P.serializer,sn);Ze.set(Tn.key.toString(),Tn)});const Mt=[];return w.forEach(sn=>{const Tn=Ze.get(sn.toString());or(!!Tn),Mt.push(Tn)}),Mt}),function(g,w){return d.apply(this,arguments)})(t.datastore,e);var d;return s.forEach(d=>t.recordVersion(d)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new D(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,d)=>{const g=On.fromPath(d);e.mutations.push(new v(g,e.precondition(g)))}),yield(s=(0,he.Z)(function*(d,g){const w=Nn(d),P=lh(w.serializer)+"/documents",z={writes:g.map(X=>Wh(w.serializer,X))};yield w.po("Commit",P,z)}),function(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zn();t=nr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new dn(Bt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nr.min())?hs.exists(!1):hs.updateTime(t):hs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nr.min()))throw new dn(Bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hs.updateTime(t)}return hs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class b_{constructor(e,t,s,d,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=d,this.deferred=g,this.Fc=s.maxAttempts,this.Lo=new zl(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,he.Z)(function*(){const t=new my(e.datastore),s=e.Lc(t);s&&s.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.qc(g)}))}).catch(d=>{e.qc(d)})}))}Lc(e){try{const t=this.updateFunction(e);return!se(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Mn(t)}return!1}}class yy{constructor(e,t,s,d){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=d,this.user=Xi.UNAUTHENTICATED,this.clientId=ta.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var w=(0,he.Z)(function*(P){hn("FirestoreClient","Received user=",P.uid),yield g.authCredentialListener(P),g.user=P});return function(P){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(hn("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dn(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const d=a(s,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function vy(r,e){return _v.apply(this,arguments)}function _v(){return _v=(0,he.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),hn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var d=(0,he.Z)(function*(g){s.isEqual(g)||(yield Kg(e.localStore,g),s=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),_v.apply(this,arguments)}function _y(r,e){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,he.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield wy(r);hn("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(d=>gp(e.remoteStore,d)),r.setAppCheckTokenChangeListener((d,g)=>gp(e.remoteStore,g)),r._onlineComponents=e}),Ey.apply(this,arguments)}function Iy(r){return"FirebaseError"===r.name?r.code===Bt.FAILED_PRECONDITION||r.code===Bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function wy(r){return zo.apply(this,arguments)}function zo(){return zo=(0,he.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){hn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Iy(t))throw t;fi("Error using user provided cache. Falling back to memory cache: "+t),yield vy(r,new vp)}}else hn("FirestoreClient","Using default OfflineComponentProvider"),yield vy(r,new vp);return r._offlineComponents}),zo.apply(this,arguments)}function wg(r){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,he.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(hn("FirestoreClient","Using user provided OnlineComponentProvider"),yield _y(r,r._uninitializedComponentsProvider._online)):(hn("FirestoreClient","Using default OnlineComponentProvider"),yield _y(r,new Ep))),r._onlineComponents}),Cy.apply(this,arguments)}function Ev(r){return wy(r).then(e=>e.persistence)}function Cg(r){return wy(r).then(e=>e.localStore)}function Iv(r){return wg(r).then(e=>e.remoteStore)}function mm(r){return wg(r).then(e=>e.syncEngine)}function fu(r){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,he.Z)(function*(r){const e=yield wg(r),t=e.eventManager;return t.onListen=ed.bind(null,e.syncEngine),t.onUnlisten=nv.bind(null,e.syncEngine),t}),Dy.apply(this,arguments)}function Ty(r,e,t={}){const s=new ji;return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(d,g,w,P,z){const X=new Ip({next:Ze=>{g.enqueueAndForget(()=>Ce(d,ae));const Mt=Ze.docs.has(w);!Mt&&Ze.fromCache?z.reject(new dn(Bt.UNAVAILABLE,"Failed to get document because the client is offline.")):Mt&&Ze.fromCache&&P&&"server"===P.source?z.reject(new dn(Bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Ze)},error:Ze=>z.reject(Ze)}),ae=new Ln(Sl(w.path),X,{includeMetadataChanges:!0,Uu:!0});return J(d,ae)}(yield fu(r),r.asyncQueue,e,t,s)})),s.promise}function Sy(r,e,t={}){const s=new ji;return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(d,g,w,P,z){const X=new Ip({next:Ze=>{g.enqueueAndForget(()=>Ce(d,ae)),Ze.fromCache&&"server"===P.source?z.reject(new dn(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Ze)},error:Ze=>z.reject(Ze)}),ae=new Ln(w,X,{includeMetadataChanges:!0,Uu:!0});return J(d,ae)}(yield fu(r),r.asyncQueue,e,t,s)})),s.promise}const pu=new Map;function hc(r,e,t){if(!t)throw new dn(Bt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Bc(r,e,t,s){if(!0===e&&!0===s)throw new dn(Bt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function xy(r){if(!On.isDocumentKey(r))throw new dn(Bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ry(r){if(On.isDocumentKey(r))throw new dn(Bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ym(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Zn()}function Li(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new dn(Bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ym(r);throw new dn(Bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Cv(r,e){if(e<=0)throw new dn(Bt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class bv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new dn(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dn(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,t,s,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dn(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dn(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gu;switch(t.type){case"firstParty":return new Vc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new dn(Bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pu.get(e);t&&(hn("ComponentProvider","Removing Datastore"),pu.delete(e),t.terminate())}(this),Promise.resolve()}}class Gs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gs(this.firestore,e,this._key)}}class La{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class nd extends La{constructor(e,t,s){super(e,t,Sl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gs(this.firestore,null,new On(e))}withConverter(e){return new nd(this.firestore,e,this._path)}}function My(r,e,...t){if(r=(0,Je.m9)(r),hc("collection","path",e),r instanceof vf){const s=vi.fromString(e,...t);return Ry(s),new nd(r,null,s)}{if(!(r instanceof Gs||r instanceof nd))throw new dn(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return Ry(s),new nd(r.firestore,null,s)}}function _f(r,e,...t){if(r=(0,Je.m9)(r),1===arguments.length&&(e=ta.A()),hc("doc","path",e),r instanceof vf){const s=vi.fromString(e,...t);return xy(s),new Gs(r,null,new On(s))}{if(!(r instanceof Gs||r instanceof nd))throw new dn(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return xy(s),new Gs(r.firestore,r instanceof nd?r.converter:null,new On(s))}}function Tv(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),(r instanceof Gs||r instanceof nd)&&(e instanceof Gs||e instanceof nd)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function vm(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),r instanceof La&&e instanceof La&&r.firestore===e.firestore&&ac(r._query,e._query)&&r.converter===e.converter}class Sv{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new zl(this,"async_queue_retry"),this.Yc=()=>{const t=cp();t&&hn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=cp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=cp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new ji;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,he.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!js(t))throw t;hn("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,ss("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const d=u.createAndSchedule(this,e,t,s,g=>this.ea(g));return this.jc.push(d),d}Xc(){this.zc&&Zn()}verifyOperationInProgress(){}na(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function bg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const d of["next","error","complete"])if(d in s&&"function"==typeof s[d])return!0;return!1}(r)}class _m{constructor(){this._progressObserver={},this._taskCompletionResolver=new ji,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ps extends vf{constructor(e,t,s,d){super(e,t,s,d),this.type="firestore",this._queue=new Sv,this._persistenceKey=(null==d?void 0:d.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Oy(this),this._firestoreClient.terminate()}}function xo(r){return r._firestoreClient||Oy(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Oy(r){var e,t,s;const d=r._freezeSettings(),g=(P=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new bi(r._databaseId,P,r._persistenceKey,(X=d).host,X.ssl,X.experimentalForceLongPolling,X.experimentalAutoDetectLongPolling,X.useFetchStreams));var P,X;r._firestoreClient=new yy(r._authCredentials,r._appCheckCredentials,r._queue,g),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=d.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function Mv(r,e,t){const s=new ji;return r.asyncQueue.enqueue((0,he.Z)(function*(){try{yield vy(r,t),yield _y(r,e),s.resolve()}catch(d){const g=d;if(!Iy(g))throw g;fi("Error enabling indexeddb cache. Falling back to memory cache: "+g),s.reject(g)}})).then(()=>s.promise)}function Pv(r){if(r._initialized||r._terminated)throw new dn(Bt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rd(bn.fromBase64String(e))}catch(t){throw new dn(Bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rd(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new dn(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ef{constructor(e){this._methodName=e}}class Em{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dn(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dn(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}}const L_=/^__.*__$/;class $_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ho(e,this.data,t,this.fieldTransforms)}}class ky{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ny(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zn()}}class Tg{constructor(e,t,s,d,g,w){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=d,void 0===g&&this.oa(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ca({path:s,ha:!1});return d.la(e),d}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ca({path:s,ha:!1});return d.oa(),d}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return bm(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ny(this.ua)&&L_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ov{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||hf(e)}ga(e,t,s,d=!1){return new Tg({ua:e,methodName:t,ma:s,path:Ar.emptyPath(),ha:!1,wa:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Th(r){const e=r._freezeSettings(),t=hf(r._databaseId);return new Ov(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Sg(r,e,t,s,d,g={}){const w=r.ga(g.merge||g.mergeFields?2:0,e,t,d);Cm("Data must be an object, but it was:",w,s);const P=wm(s,w);let z,X;if(g.merge)z=new ht(w.fieldMask),X=w.fieldTransforms;else if(g.mergeFields){const ae=[];for(const Ze of g.mergeFields){const Mt=Dp(e,Ze,t);if(!w.contains(Mt))throw new dn(Bt.INVALID_ARGUMENT,`Field '${Mt}' is specified in your field mask but missing from your input data.`);Fv(ae,Mt)||ae.push(Mt)}z=new ht(ae),X=w.fieldTransforms.filter(Ze=>z.covers(Ze.field))}else z=null,X=w.fieldTransforms;return new $_(new jo(P),z,X)}class Cp extends Ef{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cp}}function Fy(r,e,t){return new Tg({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Im extends Ef{_toFieldTransform(e){return new iu(e.path,new Mc)}isEqual(e){return e instanceof Im}}class kv extends Ef{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Fy(this,e,!0),s=this.ya.map(g=>bp(g,t)),d=new nu(s);return new iu(e.path,d)}isEqual(e){return this===e}}class Nv extends Ef{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Fy(this,e,!0),s=this.ya.map(g=>bp(g,t)),d=new Bl(s);return new iu(e.path,d)}isEqual(e){return this===e}}class If extends Ef{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new aa(e.serializer,oa(e.serializer,this.pa));return new iu(e.path,t)}isEqual(e){return this===e}}function Ly(r,e,t,s){const d=r.ga(1,e,t);Cm("Data must be an object, but it was:",d,s);const g=[],w=jo.empty();ya(s,(z,X)=>{const ae=kr(e,z,t);X=(0,Je.m9)(X);const Ze=d.fa(ae);if(X instanceof Cp)g.push(ae);else{const Mt=bp(X,Ze);null!=Mt&&(g.push(ae),w.set(ae,Mt))}});const P=new ht(g);return new ky(w,P,d.fieldTransforms)}function $y(r,e,t,s,d,g){const w=r.ga(1,e,t),P=[Dp(e,s,t)],z=[d];if(g.length%2!=0)throw new dn(Bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Mt=0;Mt<g.length;Mt+=2)P.push(Dp(e,g[Mt])),z.push(g[Mt+1]);const X=[],ae=jo.empty();for(let Mt=P.length-1;Mt>=0;--Mt)if(!Fv(X,P[Mt])){const sn=P[Mt];let Tn=z[Mt];Tn=(0,Je.m9)(Tn);const Rn=w.fa(sn);if(Tn instanceof Cp)X.push(sn);else{const ur=bp(Tn,Rn);null!=ur&&(X.push(sn),ae.set(sn,ur))}}const Ze=new ht(X);return new ky(ae,Ze,w.fieldTransforms)}function wf(r,e,t,s=!1){return bp(t,r.ga(s?4:3,e))}function bp(r,e){if(B_(r=(0,Je.m9)(r)))return Cm("Unsupported field value:",e,r),wm(r,e);if(r instanceof Ef)return function(t,s){if(!Ny(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(s);d&&s.fieldTransforms.push(d)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const d=[];let g=0;for(const w of t){let P=bp(w,s.da(g));null==P&&(P={nullValue:"NULL_VALUE"}),d.push(P),g++}return{arrayValue:{values:d}}}(r,e)}return function(t,s){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oa(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=yi.fromDate(t);return{timestampValue:$u(s.serializer,d)}}if(t instanceof yi){const d=new yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$u(s.serializer,d)}}if(t instanceof Em)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rd)return{bytesValue:Bp(s.serializer,t._byteString)};if(t instanceof Gs){const d=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(d))throw s._a(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:sh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ym(t)}`)}(r,e)}function wm(r,e){const t={};return bl(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(r,(s,d)=>{const g=bp(d,e.aa(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function B_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof yi||r instanceof Em||r instanceof rd||r instanceof Gs||r instanceof Ef)}function Cm(r,e,t){if(!B_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ym(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function Dp(r,e,t){if((e=(0,Je.m9)(e))instanceof Vd)return e._internalPath;if("string"==typeof e)return kr(r,e);throw bm("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function kr(r,e,t){if(e.search(tE)>=0)throw bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vd(...e.split("."))._internalPath}catch(s){throw bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bm(r,e,t,s,d){const g=s&&!s.isEmpty(),w=void 0!==d;let P=`Function ${e}() called with invalid data`;t&&(P+=" (via `toFirestore()`)"),P+=". ";let z="";return(g||w)&&(z+=" (found",g&&(z+=` in field ${s}`),w&&(z+=` in document ${d}`),z+=")"),new dn(Bt.INVALID_ARGUMENT,P+r+z)}function Fv(r,e){return r.some(t=>t.isEqual(e))}class Ag{constructor(e,t,s,d,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Gs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tp extends Ag{data(){return super.data()}}function Dm(r,e){return"string"==typeof e?kr(r,e):e instanceof Vd?e._internalPath:e._delegate._internalPath}function xg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new dn(Bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class Ns extends Sp{}function Cf(r,e,...t){let s=[];e instanceof Sp&&s.push(e),s=s.concat(t),function(d){const g=d.filter(P=>P instanceof xp).length,w=d.filter(P=>P instanceof Ap).length;if(g>1||g>0&&w>0)throw new dn(Bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const d of s)r=d._apply(r);return r}class Ap extends Ns{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){const t=this._parse(e);return Rp(e._query,t),new La(e.firestore,e.converter,oc(e._query,t))}_parse(e){const t=Th(e.firestore);return function(d,g,w,P,z,X,ae){let Ze;if(z.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new dn(Bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){Uv(ae,X);const Mt=[];for(const sn of ae)Mt.push(Uy(P,d,sn));Ze={arrayValue:{values:Mt}}}else Ze=Uy(P,d,ae)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||Uv(ae,X),Ze=wf(w,"where",ae,"in"===X||"not-in"===X);return Ei.create(z,X,Ze)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class xp extends Sp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,d){let g=s;const w=d.getFlattenedFilters();for(const P of w)Rp(g,P),g=oc(g,P)}(e._query,t),new La(e.firestore,e.converter,oc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tm extends Ns{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tm(e,t)}_apply(e){const t=function(s,d,g){if(null!==s.startAt)throw new dn(Bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new dn(Bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new bu(d,g);return function(P,z){if(null===Zc(P)){const X=al(P);null!==X&&Mp(0,X,z.field)}}(s,w),w}(e._query,this._field,this._direction);return new La(e.firestore,e.converter,function(s,d){const g=s.explicitOrderBy.concat([d]);return new Tl(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Sm extends Ns{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Sm(e,t,s)}_apply(e){return new La(e.firestore,e.converter,Xc(e._query,this._limit,this._limitType))}}class Sh extends Ns{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Sh(e,t,s)}_apply(e){const t=By(e,this.type,this._docOrFields,this._inclusive);return new La(e.firestore,e.converter,(d=t,new Tl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,d,s.endAt)));var s,d}}class Am extends Ns{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Am(e,t,s)}_apply(e){const t=By(e,this.type,this._docOrFields,this._inclusive);return new La(e.firestore,e.converter,(d=t,new Tl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,d)));var s,d}}function By(r,e,t,s){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof Ag)return function(d,g,w,P,z){if(!P)throw new dn(Bt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const X=[];for(const ae of sa(d))if(ae.field.isKeyField())X.push(xs(g,P.key));else{const Ze=P.data.field(ae.field);if(To(Ze))throw new dn(Bt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ze){const Mt=ae.field.canonicalString();throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Mt}' (used as the orderBy) does not exist.`)}X.push(Ze)}return new Dl(X,z)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const d=Th(r.firestore);return function(g,w,P,z,X,ae){const Ze=g.explicitOrderBy;if(X.length>Ze.length)throw new dn(Bt.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Mt=[];for(let sn=0;sn<X.length;sn++){const Tn=X[sn];if(Ze[sn].field.isKeyField()){if("string"!=typeof Tn)throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof Tn}`);if(!Ru(g)&&-1!==Tn.indexOf("/"))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${Tn}' contains a slash.`);const Rn=g.path.child(vi.fromString(Tn));if(!On.isDocumentKey(Rn))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Rn}' is not because it contains an odd number of segments.`);const ur=new On(Rn);Mt.push(xs(w,ur))}else{const Rn=wf(P,z,Tn);Mt.push(Rn)}}return new Dl(Mt,ae)}(r._query,r.firestore._databaseId,d,e,t,s)}}function Uy(r,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new dn(Bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ru(e)&&-1!==t.indexOf("/"))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vi.fromString(t));if(!On.isDocumentKey(s))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xs(r,new On(s))}if(t instanceof Gs)return xs(r,t._key);throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(t)}.`)}function Uv(r,e){if(!Array.isArray(r)||0===r.length)throw new dn(Bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rp(r,e){if(e.isInequality()){const s=al(r),d=e.field;if(null!==s&&!s.isEqual(d))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${d.toString()}'`);const g=Zc(r);null!==g&&Mp(0,d,g)}const t=function(s,d){for(const g of s)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new dn(Bt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Mp(r,e,t){if(!t.isEqual(e))throw new dn(Bt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Vy{convertValue(e,t="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(In(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ya(e,(d,g)=>{s[d]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new Em(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ls(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const t=Yn(e);return new yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vi.fromString(e);or(Zh(s));const d=new yo(s.get(1),s.get(3)),g=new On(s.popFirst(5));return d.isEqual(t)||ss(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Rm(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class jv extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new rd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gs(this.firestore,null,t)}}class bf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ah extends Ag{constructor(e,t,s,d,g,w){super(e,t,s,d,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Dm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mm extends Ah{data(e={}){return super.data(e)}}class Df{constructor(e,t,s,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new bf(d.hasPendingWrites,d.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mm(this._firestore,this._userDataWriter,s.key,s,new bf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dn(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,d){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(w=>({type:"added",doc:new Mm(s._firestore,s._userDataWriter,w.doc.key,w.doc,new bf(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const P=new Mm(s._firestore,s._userDataWriter,w.doc.key,w.doc,new bf(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter);let z=-1,X=-1;return 0!==w.type&&(z=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),X=g.indexOf(w.doc.key)),{type:rE(w.type),doc:P,oldIndex:z,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zn()}}function jy(r,e){return r instanceof Ah&&e instanceof Ah?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Df&&e instanceof Df&&r._firestore===e._firestore&&vm(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class xh extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new rd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gs(this.firestore,null,t)}}function zv(r,e,t){r=Li(r,Gs);const s=Li(r.firestore,Ps),d=Rm(r.converter,e,t);return Pp(s,[Sg(Th(s),"setDoc",r._key,d,null!==r.converter,t).toMutation(r._key,hs.none())])}function Gv(r,e,t,...s){r=Li(r,Gs);const d=Li(r.firestore,Ps),g=Th(d);let w;return w="string"==typeof(e=(0,Je.m9)(e))||e instanceof Vd?$y(g,"updateDoc",r._key,e,t,s):Ly(g,"updateDoc",r._key,e),Pp(d,[w.toMutation(r._key,hs.exists(!0))])}function Hy(r,...e){var t,s,d;r=(0,Je.m9)(r);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||bg(e[w])||(g=e[w],w++);const P={includeMetadataChanges:g.includeMetadataChanges};if(bg(e[w])){const Ze=e[w];e[w]=null===(t=Ze.next)||void 0===t?void 0:t.bind(Ze),e[w+1]=null===(s=Ze.error)||void 0===s?void 0:s.bind(Ze),e[w+2]=null===(d=Ze.complete)||void 0===d?void 0:d.bind(Ze)}let z,X,ae;if(r instanceof Gs)X=Li(r.firestore,Ps),ae=Sl(r._key.path),z={next:Ze=>{e[w]&&e[w](Tf(X,r,Ze))},error:e[w+1],complete:e[w+2]};else{const Ze=Li(r,La);X=Li(Ze.firestore,Ps),ae=Ze._query;const Mt=new xh(X);z={next:sn=>{e[w]&&e[w](new Df(X,Mt,Ze,sn))},error:e[w+1],complete:e[w+2]},xg(r._query)}return function(Ze,Mt,sn,Tn){const Rn=new Ip(Tn),ur=new Ln(Mt,Rn,sn);return Ze.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return J(yield fu(Ze),ur)})),()=>{Rn.Sc(),Ze.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Ce(yield fu(Ze),ur)}))}}(xo(X),ae,P,z)}function Pp(r,e){return function(t,s){const d=new ji;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function rv(r,e,t){return om.apply(this,arguments)}(yield mm(t),s,d)})),d.promise}(xo(r),e)}function Tf(r,e,t){const s=t.docs.get(e._key),d=new xh(r);return new Ah(r,d,e._key,s,new bf(t.hasPendingWrites,t.fromCache),e.converter)}const zy={maxAttempts:5};class Xv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Th(e)}set(e,t,s){this._verifyNotCommitted();const d=jd(e,this._firestore),g=Rm(d.converter,t,s),w=Sg(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,s);return this._mutations.push(w.toMutation(d._key,hs.none())),this}update(e,t,s,...d){this._verifyNotCommitted();const g=jd(e,this._firestore);let w;return w="string"==typeof(t=(0,Je.m9)(t))||t instanceof Vd?$y(this._dataReader,"WriteBatch.update",g._key,t,s,d):Ly(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jd(e,this._firestore);return this._mutations=this._mutations.concat(new D(t._key,hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dn(Bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jd(r,e){if((r=(0,Je.m9)(r)).firestore!==e)throw new dn(Bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Th(e)}get(e){const t=jd(e,this._firestore),s=new jv(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Zn();const g=d[0];if(g.isFoundDocument())return new Ag(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new Ag(this._firestore,s,t._key,null,t.converter);throw Zn()})}set(e,t,s){const d=jd(e,this._firestore),g=Rm(d.converter,t,s),w=Sg(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,s);return this._transaction.set(d._key,w),this}update(e,t,s,...d){const g=jd(e,this._firestore);let w;return w="string"==typeof(t=(0,Je.m9)(t))||t instanceof Vd?$y(this._dataReader,"Transaction.update",g._key,t,s,d):Ly(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=jd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jd(e,this._firestore),s=new xh(this._firestore);return super.get(e).then(d=>new Ah(this._firestore,s,t._key,d._document,new bf(!1,!1),t.converter))}}!function(r,e=!0){il=dt.SDK_VERSION,(0,dt._registerComponent)(new ft.wA("firestore",(t,{instanceIdentifier:s,options:d})=>{const g=t.getProvider("app").getImmediate(),w=new Ps(new Xl(t.getProvider("auth-internal")),new Il(t.getProvider("app-check-internal")),function(P,z){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new dn(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(P.options.projectId,z)}(g,s),g);return d=Object.assign({useFetchStreams:e},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,dt.registerVersion)(pc,"3.11.0",r),(0,dt.registerVersion)(pc,"3.11.0","esm2017")}();function Om(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dn("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Qv(){if(typeof Uint8Array>"u")throw new dn("unimplemented","Uint8Arrays are not available in this environment.")}function Jv(){if(!function on(){return typeof atob<"u"}())throw new dn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Mg{constructor(e){this._delegate=e}static fromBase64String(e){return Jv(),new Mg(rd.fromBase64String(e))}static fromUint8Array(e){return Qv(),new Mg(rd.fromUint8Array(e))}toBase64(){return Jv(),this._delegate.toBase64()}toUint8Array(){return Qv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Pg(r){return function Wy(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class e_{enableIndexedDbPersistence(e,t){return function xv(r,e){Pv(r=Li(r,Ps));const t=xo(r);if(t._uninitializedComponentsProvider)throw new dn(Bt.FAILED_PRECONDITION,"SDK cache is already specified.");fi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),d=new Ep;return Mv(t,d,new _p(d,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Rv(r){Pv(r=Li(r,Ps));const e=xo(r);if(e._uninitializedComponentsProvider)throw new dn(Bt.FAILED_PRECONDITION,"SDK cache is already specified.");fi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Ep;return Mv(e,s,new Ud(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R_(r){if(r._initialized&&!r._terminated)throw new dn(Bt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ji;return r._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(s){if(!Br.D())return Promise.resolve();const d=s+"main";yield Br.delete(d)}),function(s){return t.apply(this,arguments)})(cu(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class km{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function wp(r,e,t,s={}){var d;const g=(r=Li(r,vf))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let w,P;if("string"==typeof s.mockUserToken)w=s.mockUserToken,P=Xi.MOCK_USER;else{w=(0,Je.Sg)(s.mockUserToken,null===(d=r._app)||void 0===d?void 0:d.options.projectId);const z=s.mockUserToken.sub||s.mockUserToken.user_id;if(!z)throw new dn(Bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Xi(z)}r._authCredentials=new Ha(new ea(w,P))}}(this._delegate,e,t,s)}enableNetwork(){return function P_(r){return function D_(r){return r.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield Ev(r),t=yield Iv(r);return e.setNetworkEnabled(!0),function(s){const d=Nn(s);return d.Au.delete(0),ff(d)}(t)}))}(xo(r=Li(r,Ps)))}(this._delegate)}disableNetwork(){return function O_(r){return function wv(r){return r.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield Ev(r),t=yield Iv(r);return e.setNetworkEnabled(!1),(s=(0,he.Z)(function*(d){const g=Nn(d);g.Au.add(0),yield uu(g),g.Pu.set("Offline")}),function(d){return s.apply(this,arguments)})(t);var s}))}(xo(r=Li(r,Ps)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Bc("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function M_(r){return function(e){const t=new ji;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function ov(r,e){return gg.apply(this,arguments)}(yield mm(e),t)})),t.promise}(xo(r=Li(r,Ps)))}(this._delegate)}onSnapshotsInSync(e){return function e0(r,e){return function Ay(r,e){const t=new Ip(e);return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return s=yield fu(r),d=t,Nn(s).Nu.add(d),void d.next();var s,d})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return s=yield fu(r),d=t,void Nn(s).Nu.delete(d);var s,d}))}}(xo(r=Li(r,Ps)),bg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new dn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Af(this,My(this._delegate,e))}catch(t){throw gl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qa(this,_f(this._delegate,e))}catch(t){throw gl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ml(this,function Dv(r,e){if(r=Li(r,vf),hc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dn(Bt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new La(r,null,(t=e,new Tl(vi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Li(r,Ps);const s=Object.assign(Object.assign({},zy),t);return function(d){if(d.maxAttempts<1)throw new dn(Bt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const P=new ji;return d.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const z=yield function by(r){return wg(r).then(e=>e.datastore)}(d);new b_(d.asyncQueue,z,w,g,P).run()})),P.promise}(xo(r),d=>e(new a0(r,d)),s)}(this._delegate,t=>e(new Fm(this,t)))}batch(){return xo(this._delegate),new t_(new Xv(this._delegate,e=>Pp(this._delegate,e)))}loadBundle(e){return function k_(r,e){const t=xo(r=Li(r,Ps)),s=new _m;return function td(r,e,t,s){const d=function(g,w){let P;return P="string"==typeof g?Ao().encode(g):g,z=function(z,X){if(z instanceof Uint8Array)return vv(z,X);if(z instanceof ArrayBuffer)return vv(new Uint8Array(z),X);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new yf(z,w);var z}(t,hf(e));r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function mv(r,e,t){const s=Nn(r);var d;(d=(0,he.Z)(function*(g,w,P){try{const z=yield w.getMetadata();if(yield function(Mt,sn){const Tn=Nn(Mt),Rn=Rs(sn.createTime);return Tn.persistence.runTransaction("hasNewerBundle","readonly",ur=>Tn.Ls.getBundleMetadata(ur,sn.id)).then(ur=>!!ur&&ur.createTime.compareTo(Rn)>=0)}(g.localStore,z))return yield w.close(),P._completeWith({taskState:"Success",documentsLoaded:(Mt=z).totalDocuments,bytesLoaded:Mt.totalBytes,totalDocuments:Mt.totalDocuments,totalBytes:Mt.totalBytes}),Promise.resolve(new Set);P._updateProgress(Qi(z));const X=new zs(z,g.localStore,w.serializer);let ae=yield w.Pc();for(;ae;){const Mt=yield X.ju(ae);Mt&&P._updateProgress(Mt),ae=yield w.Pc()}const Ze=yield X.complete();return yield $c(g,Ze.Hu,void 0),yield function(Mt,sn){const Tn=Nn(Mt);return Tn.persistence.runTransaction("Save bundle","readwrite",Rn=>Tn.Ls.saveBundleMetadata(Rn,sn))}(g.localStore,z),P._completeWith(Ze.progress),Promise.resolve(Ze.Wu)}catch(z){return fi("SyncEngine",`Loading bundle failed with ${z}`),P._failWith(z),Promise.resolve(new Set)}var Mt}),function(g,w,P){return d.apply(this,arguments)})(s,e,t).then(d=>{s.sharedClientState.notifyBundleLoaded(d)})}(yield mm(r),d,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function N_(r,e){return function S_(r,e){return r.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,s){const d=Nn(t);return d.persistence.runTransaction("Get named query","readonly",g=>d.Ls.getNamedQuery(g,s))}(yield Cg(r),e)}))}(xo(r=Li(r,Ps)),e).then(t=>t?new La(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Ml(this,t):null)}}class Nm extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mg(new rd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qa.forKey(t,this.firestore,null)}}class Fm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nm(e)}get(e){const t=Hd(e);return this._delegate.get(t).then(s=>new Op(this._firestore,new Ah(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const d=Hd(e);return s?(Om("Transaction.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Hd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Hd(e);return this._delegate.delete(t),this}}class t_{constructor(e){this._delegate=e}set(e,t,s){const d=Hd(e);return s?(Om("WriteBatch.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Hd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Hd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Mm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Rh.INSTANCES;let d=s.get(e);d||(d=new WeakMap,s.set(e,d));let g=d.get(t);return g||(g=new Rh(e,new Nm(e),t),d.set(t,g)),g}}Rh.INSTANCES=new WeakMap;class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new dn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qa(t,new Gs(t._delegate,s,new On(e)))}static forKey(e,t,s){return new Qa(t,new Gs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Af(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Af(this.firestore,My(this._delegate,e))}catch(t){throw gl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof Gs&&Tv(this._delegate,e)}set(e,t){t=Om("DocumentReference.set",t);try{return t?zv(this._delegate,e,t):zv(this._delegate,e)}catch(s){throw gl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Gv(this._delegate,e):Gv(this._delegate,e,t,...s)}catch(d){throw gl(d,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return Pp(Li(r.firestore,Ps),[new D(r._key,hs.none())])}(this._delegate)}onSnapshot(...e){const t=n_(e),s=v0(e,d=>new Op(this.firestore,new Ah(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Hy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z_(r){r=Li(r,Gs);const e=Li(r.firestore,Ps),t=xo(e),s=new xh(e);return function T_(r,e){const t=new ji;return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(s=(0,he.Z)(function*(d,g,w){try{const P=yield function(z,X){const ae=Nn(z);return ae.persistence.runTransaction("read document","readonly",Ze=>ae.localDocuments.getDocument(Ze,X))}(d,g);P.isFoundDocument()?w.resolve(P):P.isNoDocument()?w.resolve(null):w.reject(new dn(Bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const z=a(P,`Failed to get document '${g} from cache`);w.reject(z)}}),function(d,g,w){return s.apply(this,arguments)})(yield Cg(r),e,t);var s})),t.promise}(t,r._key).then(d=>new Ah(e,s,r._key,d,new bf(null!==d&&d.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Hv(r){r=Li(r,Gs);const e=Li(r.firestore,Ps);return Ty(xo(e),r._key,{source:"server"}).then(t=>Tf(e,r,t))}(this._delegate):function Pm(r){r=Li(r,Gs);const e=Li(r.firestore,Ps);return Ty(xo(e),r._key).then(t=>Tf(e,r,t))}(this._delegate),t.then(s=>new Op(this.firestore,new Ah(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function gl(r,e,t){return r.message=r.message.replace(e,t),r}function n_(r){for(const e of r)if("object"==typeof e&&!Pg(e))return e;return{}}function v0(r,e){var t,s;let d;return d=Pg(r[0])?r[0]:Pg(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(s=d.complete)||void 0===s?void 0:s.bind(d)}}class Op{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jy(this._delegate,e._delegate)}}class Sf extends Op{data(e){const t=this._delegate.data(e);return function yc(r,e){r||Zn()}(void 0!==t),t}}class Ml{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nm(e)}where(e,t,s){try{return new Ml(this.firestore,Cf(this._delegate,function Lv(r,e,t){const s=e,d=Dm("where",r);return Ap._create(d,s,t)}(e,t,s)))}catch(d){throw gl(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ml(this.firestore,Cf(this._delegate,function $v(r,e="asc"){const t=e,s=Dm("orderBy",r);return Tm._create(s,t)}(e,t)))}catch(s){throw gl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ml(this.firestore,Cf(this._delegate,function j_(r){return Cv("limit",r),Sm._create("limit",r,"F")}(e)))}catch(t){throw gl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ml(this.firestore,Cf(this._delegate,function H_(r){return Cv("limitToLast",r),Sm._create("limitToLast",r,"L")}(e)))}catch(t){throw gl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ml(this.firestore,Cf(this._delegate,function z_(...r){return Sh._create("startAt",r,!0)}(...e)))}catch(t){throw gl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ml(this.firestore,Cf(this._delegate,function G_(...r){return Sh._create("startAfter",r,!1)}(...e)))}catch(t){throw gl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ml(this.firestore,Cf(this._delegate,function xm(...r){return Am._create("endBefore",r,!1)}(...e)))}catch(t){throw gl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ml(this.firestore,Cf(this._delegate,function Bv(...r){return Am._create("endAt",r,!0)}(...e)))}catch(t){throw gl(t,"endAt()","Query.endAt()")}}isEqual(e){return vm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(r){r=Li(r,La);const e=Li(r.firestore,Ps),t=xo(e),s=new xh(e);return function Q0(r,e){const t=new ji;return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(s=(0,he.Z)(function*(d,g,w){try{const P=yield _h(d,g,!0),z=new Kl(g,P.sr),X=z.nc(P.documents),ae=z.applyChanges(X,!1);w.resolve(ae.snapshot)}catch(P){const z=a(P,`Failed to execute query '${g} against cache`);w.reject(z)}}),function(d,g,w){return s.apply(this,arguments)})(yield Cg(r),e,t);var s})),t.promise}(t,r._query).then(d=>new Df(e,s,r,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function Q_(r){r=Li(r,La);const e=Li(r.firestore,Ps),t=xo(e),s=new xh(e);return Sy(t,r._query,{source:"server"}).then(d=>new Df(e,s,r,d))}(this._delegate):function Rg(r){r=Li(r,La);const e=Li(r.firestore,Ps),t=xo(e),s=new xh(e);return xg(r._query),Sy(t,r._query).then(d=>new Df(e,s,r,d))}(this._delegate),t.then(s=>new qy(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=n_(e),s=v0(e,d=>new qy(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Hy(this._delegate,t,s)}withConverter(e){return new Ml(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}class Ky{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ml(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ky(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Sf(this._firestore,s))})}isEqual(e){return jy(this._delegate,e._delegate)}}class Af extends Ml{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qa(this.firestore,e):null}doc(e){try{return new Qa(this.firestore,void 0===e?_f(this._delegate):_f(this._delegate,e))}catch(t){throw gl(t,"doc()","CollectionReference.doc()")}}add(e){return function J_(r,e){const t=Li(r.firestore,Ps),s=_f(r),d=Rm(r.converter,e);return Pp(t,[Sg(Th(r.firestore),"addDoc",s._key,d,null!==r.converter,{}).toMutation(s._key,hs.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Qa(this.firestore,t))}isEqual(e){return Tv(this._delegate,e._delegate)}withConverter(e){return new Af(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function Hd(r){return Li(r,Gs)}class Lm{constructor(...e){this._delegate=new Vd(...e)}static documentId(){return new Lm(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof Vd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function u0(){return new Im("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mh(e)}static delete(){const e=function c0(){return new Cp("deleteField")}();return e._methodName="FieldValue.delete",new Mh(e)}static arrayUnion(...e){const t=function d0(...r){return new kv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Mh(t)}static arrayRemove(...e){const t=function h0(...r){return new Nv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Mh(t)}static increment(e){const t=function f0(r){return new If("increment",r)}(e);return t._methodName="FieldValue.increment",new Mh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const r_={Firestore:km,GeoPoint:Em,Timestamp:yi,Blob:Mg,Transaction:Fm,WriteBatch:t_,DocumentReference:Qa,DocumentSnapshot:Op,Query:Ml,QueryDocumentSnapshot:Sf,QuerySnapshot:qy,CollectionReference:Af,FieldPath:Lm,FieldValue:Mh,setLogLevel:function y0(r){!function mc(r){is.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function i_(r,e){r.INTERNAL.registerComponent(new ft.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(s,d)},"PUBLIC").setServiceProps(Object.assign({},r_)))})(r,(e,t)=>new km(e,t,new e_)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(Ie.Z);var Ph=L(1205),E0=L(6217),I0=L(9260);function w0(r,e){return function s_(r,e=q.z){return new G.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function Yy(r,e){return w0(r,e).pipe((0,re.U)(t=>({payload:t,type:"query"})))}function $m(r,e){return Yy(r,e).pipe((0,ge.O)(void 0),pe(),(0,re.U)(([t,s])=>{const d=s.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((w,P)=>{const z=d.find(ae=>ae.doc.ref.isEqual(w.ref)),X=null==t?void 0:t.payload.docs.find(ae=>ae.ref.isEqual(w.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(w.metadata)||!z&&X&&JSON.stringify(X.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:P,newIndex:P,type:"modified",doc:w}})}),g}))}function C0(r,e,t){return $m(r,t).pipe((0,de.R)((s,d)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function a_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zy(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Zy(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zy(r,e.oldIndex,1)}return r}(r,s))}),r}(s,d.map(g=>g.payload),e),[]),(0,Oe.x)(),(0,re.U)(s=>s.map(d=>({type:d.type,payload:d}))))}function Zy(r,e,t,...s){const d=r.slice();return d.splice(e,t,...s),d}function l_(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class c_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=$m(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,re.U)(s=>s.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,ge.O)(void 0),pe(),(0,Ge.h)(([s,d])=>d.length>0||!s),(0,re.U)(([s,d])=>d),Fe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=l_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return Yy(this.query,this.afs.schedulers.outsideAngular).pipe((0,re.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Fe.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Fe.iC)}add(e){return this.ref.add(e)}doc(e){return new u_(this.ref.doc(e),this.afs)}}class u_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:d,query:g}=h_(s,t);return new c_(d,g,this.afs)}snapshotChanges(){return function o_(r,e){return w0(r,e).pipe((0,ge.O)(void 0),pe(),(0,re.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,re.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Te.D)(this.ref.get(e)).pipe(Fe.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$m(this.query,this.afs.schedulers.outsideAngular).pipe((0,re.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Ge.h)(t=>t.length>0),Fe.iC):$m(this.query,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=l_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return Yy(this.query,this.afs.schedulers.outsideAngular).pipe((0,re.U)(s=>s.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Fe.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Fe.iC)}}const Xy=new c.OlP("angularfire2.enableFirestorePersistence"),d_=new c.OlP("angularfire2.firestore.persistenceSettings"),T0=new c.OlP("angularfire2.firestore.settings"),S0=new c.OlP("angularfire2.firestore.use-emulator");function h_(r,e=(t=>t)){return{query:e(r),ref:r}}let kp=(()=>{class r{constructor(t,s,d,g,w,P,z,X,ae,Ze,Mt,sn,Tn,Rn,ur,ii,ki){this.schedulers=z;const si=(0,ut.on)(t,P,s),$a=ae;Ze&&(0,Ph.nw)(si,P,Mt,Tn,Rn,ur,sn,ii),[this.firestore,this.persistenceEnabled$]=(0,ut.cc)(`${si.name}.firestore`,"AngularFirestore",si.name,()=>{const Os=P.runOutsideAngular(()=>si.firestore());if(g&&Os.settings(g),$a&&Os.useEmulator(...$a),d&&!(0,Pt.PM)(w)){const Is=()=>{try{return(0,Te.D)(Os.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(Ba){return typeof console<"u"&&console.warn(Ba),(0,Pe.of)(!1)}};return[Os,P.runOutsideAngular(Is)]}return[Os,(0,Pe.of)(!1)]},[g,$a,d])}collection(t,s){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:w}=h_(d,s),P=this.schedulers.ngZone.run(()=>g);return new c_(P,w,this)}collectionGroup(t,s){const d=s||(w=>w),g=this.firestore.collectionGroup(t);return new D0(d(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>s);return new u_(d,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ut.Dh),c.LFG(ut.xv,8),c.LFG(Xy,8),c.LFG(T0,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Fe.HU),c.LFG(d_,8),c.LFG(S0,8),c.LFG(Ph.zQ,8),c.LFG(Ph.Qv,8),c.LFG(Ph.L6,8),c.LFG(Ph._Q,8),c.LFG(Ph.rT,8),c.LFG(Ph.lh,8),c.LFG(Ph.f7,8),c.LFG(E0.nm,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),f_=(()=>{class r{constructor(){I0.Z.registerVersion("angularfire",Fe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:Xy,useValue:!0},{provide:d_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[kp]}),r})()},2011:(_n,It,L)=>{"use strict";L.d(It,{Dh:()=>Se,GT:()=>Fe,cc:()=>Ge,hO:()=>Oe,on:()=>pe,pX:()=>Pe,xv:()=>Ue});var c=L(4650),q=L(9260),G=L(8623);_n=L.hmd(_n);const Te=["ngOnDestroy"],Pe=(Ie,he,dt,ft={})=>new Proxy(Ie,{get:(qe,Je)=>dt.runOutsideAngular(()=>{var Le;if(Ie[Je])return!(null===(Le=null==ft?void 0:ft.spy)||void 0===Le)&&Le.get&&ft.spy.get(Je,Ie[Je]),Ie[Je];if(Te.indexOf(Je)>-1)return()=>{};const ke=he.toPromise().then(H=>{const De=H&&H[Je];return"function"==typeof De?De.bind(H):De&&De.then?De.then(it=>dt.run(()=>it)):dt.run(()=>De)});return new Proxy(()=>{},{get:(H,De)=>ke[De],apply:(H,De,it)=>ke.then(Be=>{var _t;const yt=Be&&Be(...it);return!(null===(_t=null==ft?void 0:ft.spy)||void 0===_t)&&_t.apply&&ft.spy.apply(Je,it,yt),yt})})})}),Fe=(Ie,he)=>{he.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(ft=>{Object.defineProperty(Ie.prototype,ft,Object.getOwnPropertyDescriptor(dt.prototype||dt,ft))})})};class ge{constructor(he){return he}}const Se=new c.OlP("angularfire2.app.options"),Ue=new c.OlP("angularfire2.app.name");function pe(Ie,he,dt){const qe="object"==typeof dt&&dt||{};qe.name=qe.name||"string"==typeof dt&&dt||"[DEFAULT]";const Le=q.Z.apps.filter(ke=>ke&&ke.name===qe.name)[0]||he.runOutsideAngular(()=>q.Z.initializeApp(Ie,qe));try{JSON.stringify(Ie)!==JSON.stringify(Le.options)&&re("error",`${Le.name} Firebase App already initialized with different options${_n.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ke){}return new ge(Le)}const re=(Ie,...he)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ie](...he)},de={provide:ge,useFactory:pe,deps:[Se,c.R0b,[new c.FiY,Ue]]};let Oe=(()=>{class Ie{constructor(dt){q.Z.registerVersion("angularfire",G.q4.full,"core"),q.Z.registerVersion("angularfire",G.q4.full,"app-compat"),q.Z.registerVersion("angular",c.q4F.full,dt.toString())}static initializeApp(dt,ft){return{ngModule:Ie,providers:[{provide:Se,useValue:dt},{provide:Ue,useValue:ft}]}}}return Ie.\u0275fac=function(dt){return new(dt||Ie)(c.LFG(c.Lbi))},Ie.\u0275mod=c.oAB({type:Ie}),Ie.\u0275inj=c.cJS({providers:[de]}),Ie})();function Ge(Ie,he,dt,ft,qe){const[,Je,Le]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Ie)||[];if(Je)return function ut(Ie,he){try{return Ie.toString()===he.toString()}catch(dt){return Ie===he}}(qe,Le)||(be("error",`${he} was already initialized on the ${dt} Firebase App with different settings.${Pt?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:qe,was:Le})),Je;{const ke=ft();return globalThis.\u0275AngularfireInstanceCache.push([Ie,ke,qe]),ke}}const Pt=!!_n.hot,be=(Ie,...he)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ie](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8623:(_n,It,L)=>{"use strict";L.d(It,{q4:()=>ma,iC:()=>ya,fc:()=>Ds,HU:()=>Gd,vb:()=>_u,JM:()=>Ma});var c=L(4650),q=L(259),G=L(5861),Te=L(2951),Pe=L(2090),Fe=L(4859),ge=L(1877);const Se=(N,V)=>V.some(ee=>N instanceof ee);let Ue,pe;const Oe=new WeakMap,Ge=new WeakMap,ut=new WeakMap,Pt=new WeakMap,be=new WeakMap;let dt={get(N,V,ee){if(N instanceof IDBTransaction){if("done"===V)return Ge.get(N);if("objectStoreNames"===V)return N.objectStoreNames||ut.get(N);if("store"===V)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Le(N[V])},set:(N,V,ee)=>(N[V]=ee,!0),has:(N,V)=>N instanceof IDBTransaction&&("done"===V||"store"===V)||V in N};function Je(N){return"function"==typeof N?function qe(N){return N!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(N)?function(...V){return N.apply(ke(this),V),Le(Oe.get(this))}:function(...V){return Le(N.apply(ke(this),V))}:function(V,...ee){const ve=N.call(ke(this),V,...ee);return ut.set(ve,V.sort?V.sort():[V]),Le(ve)}}(N):(N instanceof IDBTransaction&&function he(N){if(Ge.has(N))return;const V=new Promise((ee,ve)=>{const ht=()=>{N.removeEventListener("complete",Ot),N.removeEventListener("error",on),N.removeEventListener("abort",on)},Ot=()=>{ee(),ht()},on=()=>{ve(N.error||new DOMException("AbortError","AbortError")),ht()};N.addEventListener("complete",Ot),N.addEventListener("error",on),N.addEventListener("abort",on)});Ge.set(N,V)}(N),Se(N,function re(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(N,dt):N)}function Le(N){if(N instanceof IDBRequest)return function Ie(N){const V=new Promise((ee,ve)=>{const ht=()=>{N.removeEventListener("success",Ot),N.removeEventListener("error",on)},Ot=()=>{ee(Le(N.result)),ht()},on=()=>{ve(N.error),ht()};N.addEventListener("success",Ot),N.addEventListener("error",on)});return V.then(ee=>{ee instanceof IDBCursor&&Oe.set(ee,N)}).catch(()=>{}),be.set(V,N),V}(N);if(Pt.has(N))return Pt.get(N);const V=Je(N);return V!==N&&(Pt.set(N,V),be.set(V,N)),V}const ke=N=>be.get(N);function H(N,V,{blocked:ee,upgrade:ve,blocking:ht,terminated:Ot}={}){const on=indexedDB.open(N,V),bn=Le(on);return ve&&on.addEventListener("upgradeneeded",jn=>{ve(Le(on.result),jn.oldVersion,jn.newVersion,Le(on.transaction))}),ee&&on.addEventListener("blocked",()=>ee()),bn.then(jn=>{Ot&&jn.addEventListener("close",()=>Ot()),ht&&jn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),bn}function De(N,{blocked:V}={}){const ee=indexedDB.deleteDatabase(N);return V&&ee.addEventListener("blocked",()=>V()),Le(ee).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],_t=new Map;function yt(N,V){if(!(N instanceof IDBDatabase)||V in N||"string"!=typeof V)return;if(_t.get(V))return _t.get(V);const ee=V.replace(/FromIndex$/,""),ve=V!==ee,ht=Be.includes(ee);if(!(ee in(ve?IDBIndex:IDBObjectStore).prototype)||!ht&&!it.includes(ee))return;const Ot=function(){var on=(0,G.Z)(function*(bn,...jn){const Yn=this.transaction(bn,ht?"readwrite":"readonly");let rr=Yn.store;return ve&&(rr=rr.index(jn.shift())),(yield Promise.all([rr[ee](...jn),ht&&Yn.done]))[0]});return function(jn){return on.apply(this,arguments)}}();return _t.set(V,Ot),Ot}!function ft(N){dt=N(dt)}(N=>({...N,get:(V,ee,ve)=>yt(V,ee)||N.get(V,ee,ve),has:(V,ee)=>!!yt(V,ee)||N.has(V,ee)}));const ot="@firebase/installations",at="0.6.4",Xe=1e4,Ae=`w:${at}`,Me="FIS_v2",we="https://firebaseinstallations.googleapis.com/v1",gt=36e5,jt=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Jt(N){return N instanceof Pe.ZR&&N.code.includes("request-failed")}function tn({projectId:N}){return`${we}/projects/${N}/installations`}function Tt(N){return{token:N.token,requestStatus:2,expiresIn:Cr(N.expiresIn),creationTime:Date.now()}}function Hn(N,V){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,G.Z)(function*(N,V){const ve=(yield V.json()).error;return jt.create("request-failed",{requestName:N,serverCode:ve.code,serverMessage:ve.message,serverStatus:ve.status})})).apply(this,arguments)}function ar({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function lr(N){return hr.apply(this,arguments)}function hr(){return(hr=(0,G.Z)(function*(N){const V=yield N();return V.status>=500&&V.status<600?N():V})).apply(this,arguments)}function Cr(N){return Number(N.replace("s","000"))}function tr(){return(tr=(0,G.Z)(function*({appConfig:N,heartbeatServiceProvider:V},{fid:ee}){const ve=tn(N),ht=ar(N),Ot=V.getImmediate({optional:!0});if(Ot){const Yn=yield Ot.getHeartbeatsHeader();Yn&&ht.append("x-firebase-client",Yn)}const bn={method:"POST",headers:ht,body:JSON.stringify({fid:ee,authVersion:Me,appId:N.appId,sdkVersion:Ae})},jn=yield lr(()=>fetch(ve,bn));if(jn.ok){const Yn=yield jn.json();return{fid:Yn.fid||ee,registrationStatus:2,refreshToken:Yn.refreshToken,authToken:Tt(Yn.authToken)}}throw yield Hn("Create Installation",jn)})).apply(this,arguments)}function nn(N){return new Promise(V=>{setTimeout(V,N)})}const ei=/^[cdef][\w-]{21}$/,Nr="";function Dr(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const ee=function Fr(N){return function ui(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return ei.test(ee)?ee:Nr}catch(N){return Nr}}function Fn(N){return`${N.appName}!${N.appId}`}const Cn=new Map;function mn(N,V){const ee=Fn(N);rn(ee,V),function _r(N,V){const ee=function oi(){return!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=N=>{rn(N.data.key,N.data.fid)}),Ir}();ee&&ee.postMessage({key:N,fid:V}),function xr(){0===Cn.size&&Ir&&(Ir.close(),Ir=null)}()}(ee,V)}function rn(N,V){const ee=Cn.get(N);if(ee)for(const ve of ee)ve(V)}let Ir=null;const ti="firebase-installations-database",Dn=1,ai="firebase-installations-store";let pi=null;function gr(){return pi||(pi=H(ti,Dn,{upgrade:(N,V)=>{0===V&&N.createObjectStore(ai)}})),pi}function zr(N,V){return $t.apply(this,arguments)}function $t(){return($t=(0,G.Z)(function*(N,V){const ee=Fn(N),ht=(yield gr()).transaction(ai,"readwrite"),Ot=ht.objectStore(ai),on=yield Ot.get(ee);return yield Ot.put(V,ee),yield ht.done,(!on||on.fid!==V.fid)&&mn(N,V.fid),V})).apply(this,arguments)}function We(N){return rt.apply(this,arguments)}function rt(){return(rt=(0,G.Z)(function*(N){const V=Fn(N),ve=(yield gr()).transaction(ai,"readwrite");yield ve.objectStore(ai).delete(V),yield ve.done})).apply(this,arguments)}function Xt(N,V){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,G.Z)(function*(N,V){const ee=Fn(N),ht=(yield gr()).transaction(ai,"readwrite"),Ot=ht.objectStore(ai),on=yield Ot.get(ee),bn=V(on);return void 0===bn?yield Ot.delete(ee):yield Ot.put(bn,ee),yield ht.done,bn&&(!on||on.fid!==bn.fid)&&mn(N,bn.fid),bn})).apply(this,arguments)}function _e(N){return me.apply(this,arguments)}function me(){return me=(0,G.Z)(function*(N){let V;const ee=yield Xt(N.appConfig,ve=>{const ht=function He(N){return Ye(N||{fid:Dr(),registrationStatus:0})}(ve),Ot=function At(N,V){if(0===V.registrationStatus){if(!navigator.onLine)return{installationEntry:V,registrationPromise:Promise.reject(jt.create("app-offline"))};const ee={fid:V.fid,registrationStatus:1,registrationTime:Date.now()},ve=function pt(N,V){return yn.apply(this,arguments)}(N,ee);return{installationEntry:ee,registrationPromise:ve}}return 1===V.registrationStatus?{installationEntry:V,registrationPromise:$e(N)}:{installationEntry:V}}(N,ht);return V=Ot.registrationPromise,Ot.installationEntry});return ee.fid===Nr?{installationEntry:yield V}:{installationEntry:ee,registrationPromise:V}}),me.apply(this,arguments)}function yn(){return yn=(0,G.Z)(function*(N,V){try{const ee=yield function Un(N,V){return tr.apply(this,arguments)}(N,V);return zr(N.appConfig,ee)}catch(ee){throw Jt(ee)&&409===ee.customData.serverCode?yield We(N.appConfig):yield zr(N.appConfig,{fid:V.fid,registrationStatus:0}),ee}}),yn.apply(this,arguments)}function $e(N){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,G.Z)(function*(N){let V=yield fe(N.appConfig);for(;1===V.registrationStatus;)yield nn(100),V=yield fe(N.appConfig);if(0===V.registrationStatus){const{installationEntry:ee,registrationPromise:ve}=yield _e(N);return ve||ee}return V})).apply(this,arguments)}function fe(N){return Xt(N,V=>{if(!V)throw jt.create("installation-not-found");return Ye(V)})}function Ye(N){return function kt(N){return 1===N.registrationStatus&&N.registrationTime+Xe<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function ye(){return(ye=(0,G.Z)(function*({appConfig:N,heartbeatServiceProvider:V},ee){const ve=function St(N,{fid:V}){return`${tn(N)}/${V}/authTokens:generate`}(N,ee),ht=function cn(N,{refreshToken:V}){const ee=ar(N);return ee.append("Authorization",function Pr(N){return`${Me} ${N}`}(V)),ee}(N,ee),Ot=V.getImmediate({optional:!0});if(Ot){const Yn=yield Ot.getHeartbeatsHeader();Yn&&ht.append("x-firebase-client",Yn)}const bn={method:"POST",headers:ht,body:JSON.stringify({installation:{sdkVersion:Ae,appId:N.appId}})},jn=yield lr(()=>fetch(ve,bn));if(jn.ok)return Tt(yield jn.json());throw yield Hn("Generate Auth Token",jn)})).apply(this,arguments)}function vt(N){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,G.Z)(function*(N,V=!1){let ee;const ve=yield Xt(N.appConfig,Ot=>{if(!Sn(Ot))throw jt.create("not-registered");const on=Ot.authToken;if(!V&&function Kn(N){return 2===N.requestStatus&&!function Pn(N){const V=Date.now();return V<N.creationTime||N.creationTime+N.expiresIn<V+gt}(N)}(on))return Ot;if(1===on.requestStatus)return ee=function je(N,V){return Ne.apply(this,arguments)}(N,V),Ot;{if(!navigator.onLine)throw jt.create("app-offline");const bn=function cr(N){const V={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:V})}(Ot);return ee=function Nt(N,V){return un.apply(this,arguments)}(N,bn),bn}});return ee?yield ee:ve.authToken}),Ut.apply(this,arguments)}function Ne(){return(Ne=(0,G.Z)(function*(N,V){let ee=yield Ct(N.appConfig);for(;1===ee.authToken.requestStatus;)yield nn(100),ee=yield Ct(N.appConfig);const ve=ee.authToken;return 0===ve.requestStatus?vt(N,V):ve})).apply(this,arguments)}function Ct(N){return Xt(N,V=>{if(!Sn(V))throw jt.create("not-registered");return function Qn(N){return 1===N.requestStatus&&N.requestTime+Xe<Date.now()}(V.authToken)?Object.assign(Object.assign({},V),{authToken:{requestStatus:0}}):V})}function un(){return un=(0,G.Z)(function*(N,V){try{const ee=yield function le(N,V){return ye.apply(this,arguments)}(N,V),ve=Object.assign(Object.assign({},V),{authToken:ee});return yield zr(N.appConfig,ve),ee}catch(ee){if(!Jt(ee)||401!==ee.customData.serverCode&&404!==ee.customData.serverCode){const ve=Object.assign(Object.assign({},V),{authToken:{requestStatus:0}});yield zr(N.appConfig,ve)}else yield We(N.appConfig);throw ee}}),un.apply(this,arguments)}function Sn(N){return void 0!==N&&2===N.registrationStatus}function mi(){return(mi=(0,G.Z)(function*(N){const V=N,{installationEntry:ee,registrationPromise:ve}=yield _e(V);return ve?ve.catch(console.error):vt(V).catch(console.error),ee.fid})).apply(this,arguments)}function Pi(){return Pi=(0,G.Z)(function*(N,V=!1){const ee=N;return yield function Ji(N){return Zr.apply(this,arguments)}(ee),(yield vt(ee,V)).token}),Pi.apply(this,arguments)}function Zr(){return(Zr=(0,G.Z)(function*(N){const{registrationPromise:V}=yield _e(N);V&&(yield V)})).apply(this,arguments)}function bt(N){return jt.create("missing-app-config-values",{valueName:N})}const Ht="installations",nt=N=>{const V=N.getProvider("app").getImmediate(),ee=function tt(N){if(!N||!N.options)throw bt("App Configuration");if(!N.name)throw bt("App Name");const V=["projectId","apiKey","appId"];for(const ee of V)if(!N.options[ee])throw bt(ee);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(V);return{app:V,appConfig:ee,heartbeatServiceProvider:(0,Te._getProvider)(V,"heartbeat"),_delete:()=>Promise.resolve()}},Et=N=>{const V=N.getProvider("app").getImmediate(),ee=(0,Te._getProvider)(V,Ht).getImmediate();return{getId:()=>function ni(N){return mi.apply(this,arguments)}(ee),getToken:ht=>function li(N){return Pi.apply(this,arguments)}(ee,ht)}};(function qt(){(0,Te._registerComponent)(new Fe.wA(Ht,nt,"PUBLIC")),(0,Te._registerComponent)(new Fe.wA("installations-internal",Et,"PRIVATE"))})(),(0,Te.registerVersion)(ot,at),(0,Te.registerVersion)(ot,at,"esm2017");const Kt="@firebase/remote-config",mr=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class es{constructor(V,ee,ve,ht){this.client=V,this.storage=ee,this.storageCache=ve,this.logger=ht}isCachedDataFresh(V,ee){if(!ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ve=Date.now()-ee,ht=ve<=V;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ve}. Cache max age millis (minimumFetchIntervalMillis setting): ${V}. Is cache hit: ${ht}.`),ht}fetch(V){var ee=this;return(0,G.Z)(function*(){const[ve,ht]=yield Promise.all([ee.storage.getLastSuccessfulFetchTimestampMillis(),ee.storage.getLastSuccessfulFetchResponse()]);if(ht&&ee.isCachedDataFresh(V.cacheMaxAgeMillis,ve))return ht;V.eTag=ht&&ht.eTag;const Ot=yield ee.client.fetch(V),on=[ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ot.status&&on.push(ee.storage.setLastSuccessfulFetchResponse(Ot)),yield Promise.all(on),Ot})()}}function Ro(N=navigator){return N.languages&&N.languages[0]||N.language}class oo{constructor(V,ee,ve,ht,Ot,on){this.firebaseInstallations=V,this.sdkVersion=ee,this.namespace=ve,this.projectId=ht,this.apiKey=Ot,this.appId=on}fetch(V){var ee=this;return(0,G.Z)(function*(){const[ve,ht]=yield Promise.all([ee.firebaseInstallations.getId(),ee.firebaseInstallations.getToken()]),on=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ee.projectId}/namespaces/${ee.namespace}:fetch?key=${ee.apiKey}`,bn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":V.eTag||"*"},jn={sdk_version:ee.sdkVersion,app_instance_id:ve,app_instance_id_token:ht,app_id:ee.appId,language_code:Ro()},Yn={method:"POST",headers:bn,body:JSON.stringify(jn)},rr=fetch(on,Yn),In=new Promise((no,va)=>{V.signal.addEventListener(()=>{const Ka=new Error("The operation was aborted.");Ka.name="AbortError",va(Ka)})});let To;try{yield Promise.race([rr,In]),To=yield rr}catch(no){let va="fetch-client-network";throw"AbortError"===(null==no?void 0:no.name)&&(va="fetch-timeout"),mr.create(va,{originalErrorMessage:null==no?void 0:no.message})}let ls=To.status;const sl=To.headers.get("ETag")||void 0;let bi,yo;if(200===To.status){let no;try{no=yield To.json()}catch(va){throw mr.create("fetch-client-parse",{originalErrorMessage:null==va?void 0:va.message})}bi=no.entries,yo=no.state}if("INSTANCE_STATE_UNSPECIFIED"===yo?ls=500:"NO_CHANGE"===yo?ls=304:("NO_TEMPLATE"===yo||"EMPTY_CONFIG"===yo)&&(bi={}),304!==ls&&200!==ls)throw mr.create("fetch-status",{httpStatus:ls});return{status:ls,eTag:sl,config:bi}})()}}class Mo{constructor(V,ee){this.client=V,this.storage=ee}fetch(V){var ee=this;return(0,G.Z)(function*(){const ve=(yield ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ee.attemptFetch(V,ve)})()}attemptFetch(V,{throttleEndTimeMillis:ee,backoffCount:ve}){var ht=this;return(0,G.Z)(function*(){yield function la(N,V){return new Promise((ee,ve)=>{const ht=Math.max(V-Date.now(),0),Ot=setTimeout(ee,ht);N.addEventListener(()=>{clearTimeout(Ot),ve(mr.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(V.signal,ee);try{const Ot=yield ht.client.fetch(V);return yield ht.storage.deleteThrottleMetadata(),Ot}catch(Ot){if(!function ws(N){if(!(N instanceof Pe.ZR&&N.customData))return!1;const V=Number(N.customData.httpStatus);return 429===V||500===V||503===V||504===V}(Ot))throw Ot;const on={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(ve),backoffCount:ve+1};return yield ht.storage.setThrottleMetadata(on),ht.attemptFetch(V,on)}})()}}class Pl{constructor(V,ee,ve,ht,Ot){this.app=V,this._client=ee,this._storageCache=ve,this._storage=ht,this._logger=Ot,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lo(N,V){const ee=N.target.error||void 0;return mr.create(V,{originalErrorMessage:ee&&(null==ee?void 0:ee.message)})}const us="app_namespace_store";class Ys{constructor(V,ee,ve,ht=function ts(){return new Promise((N,V)=>{try{const ee=indexedDB.open("firebase_remote_config",1);ee.onerror=ve=>{V(lo(ve,"storage-open"))},ee.onsuccess=ve=>{N(ve.target.result)},ee.onupgradeneeded=ve=>{0===ve.oldVersion&&ve.target.result.createObjectStore(us,{keyPath:"compositeKey"})}}catch(ee){V(mr.create("storage-open",{originalErrorMessage:null==ee?void 0:ee.message}))}})}()){this.appId=V,this.appName=ee,this.namespace=ve,this.openDbPromise=ht}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(V){return this.set("last_fetch_status",V)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(V){return this.set("last_successful_fetch_timestamp_millis",V)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(V){return this.set("last_successful_fetch_response",V)}getActiveConfig(){return this.get("active_config")}setActiveConfig(V){return this.set("active_config",V)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(V){return this.set("active_config_etag",V)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(V){return this.set("throttle_metadata",V)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(V){var ee=this;return(0,G.Z)(function*(){const ve=yield ee.openDbPromise;return new Promise((ht,Ot)=>{const bn=ve.transaction([us],"readonly").objectStore(us),jn=ee.createCompositeKey(V);try{const Yn=bn.get(jn);Yn.onerror=rr=>{Ot(lo(rr,"storage-get"))},Yn.onsuccess=rr=>{const In=rr.target.result;ht(In?In.value:void 0)}}catch(Yn){Ot(mr.create("storage-get",{originalErrorMessage:null==Yn?void 0:Yn.message}))}})})()}set(V,ee){var ve=this;return(0,G.Z)(function*(){const ht=yield ve.openDbPromise;return new Promise((Ot,on)=>{const jn=ht.transaction([us],"readwrite").objectStore(us),Yn=ve.createCompositeKey(V);try{const rr=jn.put({compositeKey:Yn,value:ee});rr.onerror=In=>{on(lo(In,"storage-set"))},rr.onsuccess=()=>{Ot()}}catch(rr){on(mr.create("storage-set",{originalErrorMessage:null==rr?void 0:rr.message}))}})})()}delete(V){var ee=this;return(0,G.Z)(function*(){const ve=yield ee.openDbPromise;return new Promise((ht,Ot)=>{const bn=ve.transaction([us],"readwrite").objectStore(us),jn=ee.createCompositeKey(V);try{const Yn=bn.delete(jn);Yn.onerror=rr=>{Ot(lo(rr,"storage-delete"))},Yn.onsuccess=()=>{ht()}}catch(Yn){Ot(mr.create("storage-delete",{originalErrorMessage:null==Yn?void 0:Yn.message}))}})})()}createCompositeKey(V){return[this.appId,this.appName,this.namespace,V].join()}}class ua{constructor(V){this.storage=V}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var V=this;return(0,G.Z)(function*(){const ee=V.storage.getLastFetchStatus(),ve=V.storage.getLastSuccessfulFetchTimestampMillis(),ht=V.storage.getActiveConfig(),Ot=yield ee;Ot&&(V.lastFetchStatus=Ot);const on=yield ve;on&&(V.lastSuccessfulFetchTimestampMillis=on);const bn=yield ht;bn&&(V.activeConfig=bn)})()}setLastFetchStatus(V){return this.lastFetchStatus=V,this.storage.setLastFetchStatus(V)}setLastSuccessfulFetchTimestampMillis(V){return this.lastSuccessfulFetchTimestampMillis=V,this.storage.setLastSuccessfulFetchTimestampMillis(V)}setActiveConfig(V){return this.activeConfig=V,this.storage.setActiveConfig(V)}}function Io(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,G.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(N){return!1}})).apply(this,arguments)}!function ds(){(0,Te._registerComponent)(new Fe.wA("remote-config",function N(V,{instanceIdentifier:ee}){const ve=V.getProvider("app").getImmediate(),ht=V.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mr.create("registration-window");if(!(0,Pe.hl)())throw mr.create("indexed-db-unavailable");const{projectId:Ot,apiKey:on,appId:bn}=ve.options;if(!Ot)throw mr.create("registration-project-id");if(!on)throw mr.create("registration-api-key");if(!bn)throw mr.create("registration-app-id");const jn=new Ys(bn,ve.name,ee=ee||"firebase"),Yn=new ua(jn),rr=new ge.Yd(Kt);rr.logLevel=ge.in.ERROR;const In=new oo(ht,Te.SDK_VERSION,ee,Ot,on,bn),To=new Mo(In,jn),ls=new es(To,jn,Yn,rr),sl=new Pl(ve,ls,Yn,jn,rr);return function jr(N){const V=(0,Pe.m9)(N);V._initializePromise||(V._initializePromise=V._storageCache.loadFromStorage().then(()=>{V._isInitializationComplete=!0}))}(sl),sl},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Kt,"0.4.4"),(0,Te.registerVersion)(Kt,"0.4.4","esm2017")}();const co="/firebase-messaging-sw.js",wa="/firebase-cloud-messaging-push-scope",ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",da="https://fcmregistrations.googleapis.com/v1",wo="google.c.a.c_id",Ja="google.c.a.c_l",Ss="google.c.a.ts",As="google.c.a.e";var Ls=(()=>{return(N=Ls||(Ls={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",Ls;var N})();function ks(N){const V=new Uint8Array(N);return btoa(String.fromCharCode(...V)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ti(N){const ee=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ve=atob(ee),ht=new Uint8Array(ve.length);for(let Ot=0;Ot<ve.length;++Ot)ht[Ot]=ve.charCodeAt(Ot);return ht}const Ko="fcm_token_details_db",Zs=5,Ui="fcm_token_object_Store";function uo(){return uo=(0,G.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ot=>Ot.name).includes(Ko))return null;let V=null;return(yield H(Ko,Zs,{upgrade:(ve=(0,G.Z)(function*(ht,Ot,on,bn){var jn;if(Ot<2||!ht.objectStoreNames.contains(Ui))return;const Yn=bn.objectStore(Ui),rr=yield Yn.index("fcmSenderId").get(N);if(yield Yn.clear(),rr)if(2===Ot){const In=rr;if(!In.auth||!In.p256dh||!In.endpoint)return;V={token:In.fcmToken,createTime:null!==(jn=In.createTime)&&void 0!==jn?jn:Date.now(),subscriptionOptions:{auth:In.auth,p256dh:In.p256dh,endpoint:In.endpoint,swScope:In.swScope,vapidKey:"string"==typeof In.vapidKey?In.vapidKey:ks(In.vapidKey)}}}else if(3===Ot){const In=rr;V={token:In.fcmToken,createTime:In.createTime,subscriptionOptions:{auth:ks(In.auth),p256dh:ks(In.p256dh),endpoint:In.endpoint,swScope:In.swScope,vapidKey:ks(In.vapidKey)}}}else if(4===Ot){const In=rr;V={token:In.fcmToken,createTime:In.createTime,subscriptionOptions:{auth:ks(In.auth),p256dh:ks(In.p256dh),endpoint:In.endpoint,swScope:In.swScope,vapidKey:ks(In.vapidKey)}}}}),function(Ot,on,bn,jn){return ve.apply(this,arguments)})})).close(),yield De(Ko),yield De("fcm_vapid_details_db"),yield De("undefined"),function $s(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:V}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof V.auth&&V.auth.length>0&&"string"==typeof V.p256dh&&V.p256dh.length>0&&"string"==typeof V.endpoint&&V.endpoint.length>0&&"string"==typeof V.swScope&&V.swScope.length>0&&"string"==typeof V.vapidKey&&V.vapidKey.length>0}(V)?V:null;var ve}),uo.apply(this,arguments)}const Gr="firebase-messaging-database",qo=1,rs="firebase-messaging-store";let Va=null;function gs(){return Va||(Va=H(Gr,qo,{upgrade:(N,V)=>{0===V&&N.createObjectStore(rs)}})),Va}function Yo(N){return Co.apply(this,arguments)}function Co(){return Co=(0,G.Z)(function*(N){const V=Zo(N),ve=yield(yield gs()).transaction(rs).objectStore(rs).get(V);if(ve)return ve;{const ht=yield function Ua(N){return uo.apply(this,arguments)}(N.appConfig.senderId);if(ht)return yield Er(N,ht),ht}}),Co.apply(this,arguments)}function Er(N,V){return ho.apply(this,arguments)}function ho(){return(ho=(0,G.Z)(function*(N,V){const ee=Zo(N),ht=(yield gs()).transaction(rs,"readwrite");return yield ht.objectStore(rs).put(V,ee),yield ht.done,V})).apply(this,arguments)}function Bs(){return(Bs=(0,G.Z)(function*(N){const V=Zo(N),ve=(yield gs()).transaction(rs,"readwrite");yield ve.objectStore(rs).delete(V),yield ve.done})).apply(this,arguments)}function Zo({appConfig:N}){return N.appId}const xi=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Us(N,V){return y.apply(this,arguments)}function y(){return(y=(0,G.Z)(function*(N,V){const ee=yield an(N),ve=Xn(V),ht={method:"POST",headers:ee,body:JSON.stringify(ve)};let Ot;try{Ot=yield(yield fetch(ze(N.appConfig),ht)).json()}catch(on){throw xi.create("token-subscribe-failed",{errorInfo:null==on?void 0:on.toString()})}if(Ot.error)throw xi.create("token-subscribe-failed",{errorInfo:Ot.error.message});if(!Ot.token)throw xi.create("token-subscribe-no-token");return Ot.token})).apply(this,arguments)}function f(){return(f=(0,G.Z)(function*(N,V){const ee=yield an(N),ve=Xn(V.subscriptionOptions),ht={method:"PATCH",headers:ee,body:JSON.stringify(ve)};let Ot;try{Ot=yield(yield fetch(`${ze(N.appConfig)}/${V.token}`,ht)).json()}catch(on){throw xi.create("token-update-failed",{errorInfo:null==on?void 0:on.toString()})}if(Ot.error)throw xi.create("token-update-failed",{errorInfo:Ot.error.message});if(!Ot.token)throw xi.create("token-update-no-token");return Ot.token})).apply(this,arguments)}function T(N,V){return K.apply(this,arguments)}function K(){return(K=(0,G.Z)(function*(N,V){const ve={method:"DELETE",headers:yield an(N)};try{const Ot=yield(yield fetch(`${ze(N.appConfig)}/${V}`,ve)).json();if(Ot.error)throw xi.create("token-unsubscribe-failed",{errorInfo:Ot.error.message})}catch(ht){throw xi.create("token-unsubscribe-failed",{errorInfo:null==ht?void 0:ht.toString()})}})).apply(this,arguments)}function ze({projectId:N}){return`${da}/projects/${N}/registrations`}function an(N){return En.apply(this,arguments)}function En(){return(En=(0,G.Z)(function*({appConfig:N,installations:V}){const ee=yield V.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${ee}`})})).apply(this,arguments)}function Xn({p256dh:N,auth:V,endpoint:ee,vapidKey:ve}){const ht={web:{endpoint:ee,auth:V,p256dh:N}};return ve!==ns&&(ht.web.applicationPubKey=ve),ht}const Sr=6048e5;function $r(){return $r=(0,G.Z)(function*(N){const V=yield function Vs(N,V){return el.apply(this,arguments)}(N.swRegistration,N.vapidKey),ee={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:V.endpoint,auth:ks(V.getKey("auth")),p256dh:ks(V.getKey("p256dh"))},ve=yield Yo(N.firebaseDependencies);if(ve){if(function Ca(N,V){return V.vapidKey===N.vapidKey&&V.endpoint===N.endpoint&&V.auth===N.auth&&V.p256dh===N.p256dh}(ve.subscriptionOptions,ee))return Date.now()>=ve.createTime+Sr?function wi(N,V){return Fi.apply(this,arguments)}(N,{token:ve.token,createTime:Date.now(),subscriptionOptions:ee}):ve.token;try{yield T(N.firebaseDependencies,ve.token)}catch(ht){console.warn(ht)}return Xo(N.firebaseDependencies,ee)}return Xo(N.firebaseDependencies,ee)}),$r.apply(this,arguments)}function Cs(){return Cs=(0,G.Z)(function*(N){const V=yield Yo(N.firebaseDependencies);V&&(yield T(N.firebaseDependencies,V.token),yield function Xs(N){return Bs.apply(this,arguments)}(N.firebaseDependencies));const ee=yield N.swRegistration.pushManager.getSubscription();return!ee||ee.unsubscribe()}),Cs.apply(this,arguments)}function Fi(){return Fi=(0,G.Z)(function*(N,V){try{const ee=yield function I(N,V){return f.apply(this,arguments)}(N.firebaseDependencies,V),ve=Object.assign(Object.assign({},V),{token:ee,createTime:Date.now()});return yield Er(N.firebaseDependencies,ve),ee}catch(ee){throw yield function ms(N){return Cs.apply(this,arguments)}(N),ee}}),Fi.apply(this,arguments)}function Xo(N,V){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,G.Z)(function*(N,V){const ve={token:yield Us(N,V),createTime:Date.now(),subscriptionOptions:V};return yield Er(N,ve),ve.token})).apply(this,arguments)}function el(){return(el=(0,G.Z)(function*(N,V){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ti(V)})})).apply(this,arguments)}function ql(N){const V={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function ml(N,V){if(!V.notification)return;N.notification={};const ee=V.notification.title;ee&&(N.notification.title=ee);const ve=V.notification.body;ve&&(N.notification.body=ve);const ht=V.notification.image;ht&&(N.notification.image=ht);const Ot=V.notification.icon;Ot&&(N.notification.icon=Ot)}(V,N),function Po(N,V){V.data&&(N.data=V.data)}(V,N),function yl(N,V){var ee,ve,ht,Ot,on;if(!(V.fcmOptions||null!==(ee=V.notification)&&void 0!==ee&&ee.click_action))return;N.fcmOptions={};const bn=null!==(ht=null===(ve=V.fcmOptions)||void 0===ve?void 0:ve.link)&&void 0!==ht?ht:null===(Ot=V.notification)||void 0===Ot?void 0:Ot.click_action;bn&&(N.fcmOptions.link=bn);const jn=null===(on=V.fcmOptions)||void 0===on?void 0:on.analytics_label;jn&&(N.fcmOptions.analyticsLabel=jn)}(V,N),V}function Oo(N,V){const ee=[];for(let ve=0;ve<N.length;ve++)ee.push(N.charAt(ve)),ve<V.length&&ee.push(V.charAt(ve));return ee.join("")}function fa(N){return xi.create("missing-app-config-values",{valueName:N})}Oo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Da{constructor(V,ee,ve){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ht=function tl(N){if(!N||!N.options)throw fa("App Configuration Object");if(!N.name)throw fa("App Name");const V=["projectId","apiKey","appId","messagingSenderId"],{options:ee}=N;for(const ve of V)if(!ee[ve])throw fa(ve);return{appName:N.name,projectId:ee.projectId,apiKey:ee.apiKey,appId:ee.appId,senderId:ee.messagingSenderId}}(V);this.firebaseDependencies={app:V,appConfig:ht,installations:ee,analyticsProvider:ve}}_delete(){return Promise.resolve()}}function ja(N){return ko.apply(this,arguments)}function ko(){return(ko=(0,G.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(co,{scope:wa}),N.swRegistration.update().catch(()=>{})}catch(V){throw xi.create("failed-service-worker-registration",{browserErrorMessage:null==V?void 0:V.message})}})).apply(this,arguments)}function Jo(){return(Jo=(0,G.Z)(function*(N,V){if(!V&&!N.swRegistration&&(yield ja(N)),V||!N.swRegistration){if(!(V instanceof ServiceWorkerRegistration))throw xi.create("invalid-sw-registration");N.swRegistration=V}})).apply(this,arguments)}function qi(){return(qi=(0,G.Z)(function*(N,V){V?N.vapidKey=V:N.vapidKey||(N.vapidKey=ns)})).apply(this,arguments)}function Yi(){return Yi=(0,G.Z)(function*(N,V){if(!navigator)throw xi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xi.create("permission-blocked");return yield function Ta(N,V){return qi.apply(this,arguments)}(N,null==V?void 0:V.vapidKey),yield function Qs(N,V){return Jo.apply(this,arguments)}(N,null==V?void 0:V.serviceWorkerRegistration),function di(N){return $r.apply(this,arguments)}(N)}),Yi.apply(this,arguments)}function Hr(){return(Hr=(0,G.Z)(function*(N,V,ee){const ve=function Uc(N){switch(N){case Ls.NOTIFICATION_CLICKED:return"notification_open";case Ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(V);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(ve,{message_id:ee[wo],message_name:ee[Ja],message_time:ee[Ss],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yl(){return Yl=(0,G.Z)(function*(N,V){const ee=V.data;if(!ee.isFirebaseMessaging)return;N.onMessageHandler&&ee.messageType===Ls.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(ql(ee)):N.onMessageHandler.next(ql(ee)));const ve=ee.data;(function ba(N){return"object"==typeof N&&!!N&&wo in N})(ve)&&"1"===ve[As]&&(yield function Ri(N,V,ee){return Hr.apply(this,arguments)}(N,ee.messageType,ve))}),Yl.apply(this,arguments)}const ys="@firebase/messaging",hi=N=>{const V=new Da(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ee=>function fo(N,V){return Yl.apply(this,arguments)}(V,ee)),V},Zl=N=>{const V=N.getProvider("messaging").getImmediate();return{getToken:ve=>function No(N,V){return Yi.apply(this,arguments)}(V,ve)}};function F(){return Y.apply(this,arguments)}function Y(){return(Y=(0,G.Z)(function*(){try{yield(0,Pe.eu)()}catch(N){return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pa(){(0,Te._registerComponent)(new Fe.wA("messaging",hi,"PUBLIC")),(0,Te._registerComponent)(new Fe.wA("messaging-internal",Zl,"PRIVATE")),(0,Te.registerVersion)(ys,"0.12.4"),(0,Te.registerVersion)(ys,"0.12.4","esm2017")}();const Mr="analytics",wr="firebase_id",Zi="origin",Ci=6e4,Vi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ga="https://www.googletagmanager.com/gtag/js",gi=new ge.Yd("@firebase/analytics"),Oi=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function po(N){if(!N.startsWith(ga)){const V=Oi.create("invalid-gtag-resource",{gtagURL:N});return gi.warn(V.message),""}return N}function Lo(N){return Promise.all(N.map(V=>V.catch(ee=>ee)))}function Aa(){return(Aa=(0,G.Z)(function*(N,V,ee,ve,ht,Ot){const on=ve[ht];try{if(on)yield V[on];else{const jn=(yield Lo(ee)).find(Yn=>Yn.measurementId===ht);jn&&(yield V[jn.appId])}}catch(bn){gi.error(bn)}N("config",ht,Ot)})).apply(this,arguments)}function Xi(){return(Xi=(0,G.Z)(function*(N,V,ee,ve,ht){try{let Ot=[];if(ht&&ht.send_to){let on=ht.send_to;Array.isArray(on)||(on=[on]);const bn=yield Lo(ee);for(const jn of on){const Yn=bn.find(In=>In.measurementId===jn),rr=Yn&&V[Yn.appId];if(!rr){Ot=[];break}Ot.push(rr)}}0===Ot.length&&(Ot=Object.values(V)),yield Promise.all(Ot),N("event",ve,ht||{})}catch(Ot){gi.error(Ot)}})).apply(this,arguments)}const mc=30,fi=new class ss{constructor(V={},ee=1e3){this.throttleMetadata=V,this.intervalMillis=ee}getThrottleMetadata(V){return this.throttleMetadata[V]}setThrottleMetadata(V,ee){this.throttleMetadata[V]=ee}deleteThrottleMetadata(V){delete this.throttleMetadata[V]}};function _l(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function or(){return(or=(0,G.Z)(function*(N){var V;const{appId:ee,apiKey:ve}=N,ht={method:"GET",headers:_l(ve)},Ot=Vi.replace("{app-id}",ee),on=yield fetch(Ot,ht);if(200!==on.status&&304!==on.status){let bn="";try{const jn=yield on.json();null!==(V=jn.error)&&void 0!==V&&V.message&&(bn=jn.error.message)}catch(jn){}throw Oi.create("config-fetch-failed",{httpStatus:on.status,responseMessage:bn})}return on.json()})).apply(this,arguments)}function Nn(){return(Nn=(0,G.Z)(function*(N,V=fi,ee){const{appId:ve,apiKey:ht,measurementId:Ot}=N.options;if(!ve)throw Oi.create("no-app-id");if(!ht){if(Ot)return{measurementId:Ot,appId:ve};throw Oi.create("no-api-key")}const on=V.getThrottleMetadata(ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bn=new gu;return setTimeout((0,G.Z)(function*(){bn.abort()}),void 0!==ee?ee:Ci),Bt({appId:ve,apiKey:ht,measurementId:Ot},on,bn,V)})).apply(this,arguments)}function Bt(N,V,ee){return dn.apply(this,arguments)}function dn(){return dn=(0,G.Z)(function*(N,{throttleEndTimeMillis:V,backoffCount:ee},ve,ht=fi){var Ot;const{appId:on,measurementId:bn}=N;try{yield function ji(N,V){return new Promise((ee,ve)=>{const ht=Math.max(V-Date.now(),0),Ot=setTimeout(ee,ht);N.addEventListener(()=>{clearTimeout(Ot),ve(Oi.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(ve,V)}catch(jn){if(bn)return gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${null==jn?void 0:jn.message}]`),{appId:on,measurementId:bn};throw jn}try{const jn=yield function Zn(N){return or.apply(this,arguments)}(N);return ht.deleteThrottleMetadata(on),jn}catch(jn){const Yn=jn;if(!function ea(N){if(!(N instanceof Pe.ZR&&N.customData))return!1;const V=Number(N.customData.httpStatus);return 429===V||500===V||503===V||504===V}(Yn)){if(ht.deleteThrottleMetadata(on),bn)return gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${null==Yn?void 0:Yn.message}]`),{appId:on,measurementId:bn};throw jn}const rr=503===Number(null===(Ot=null==Yn?void 0:Yn.customData)||void 0===Ot?void 0:Ot.httpStatus)?(0,Pe.$s)(ee,ht.intervalMillis,mc):(0,Pe.$s)(ee,ht.intervalMillis),In={throttleEndTimeMillis:Date.now()+rr,backoffCount:ee+1};return ht.setThrottleMetadata(on,In),gi.debug(`Calling attemptFetch again in ${rr} millis`),Bt(N,In,ve,ht)}}),dn.apply(this,arguments)}class gu{constructor(){this.listeners=[]}addEventListener(V){this.listeners.push(V)}abort(){this.listeners.forEach(V=>V())}}let Ha,nr;function El(){return(El=(0,G.Z)(function*(N,V,ee,ve,ht){if(ht&&ht.global)N("event",ee,ve);else{const Ot=yield V;N("event",ee,Object.assign(Object.assign({},ve),{send_to:Ot}))}})).apply(this,arguments)}function Ar(){return(Ar=(0,G.Z)(function*(){if(!(0,Pe.hl)())return gi.warn(Oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(N){return gi.warn(Oi.create("indexeddb-unavailable",{errorInfo:null==N?void 0:N.toString()}).message),!1}return!0})).apply(this,arguments)}function Ql(){return Ql=(0,G.Z)(function*(N,V,ee,ve,ht,Ot,on){var bn;const jn=function yc(N){return Nn.apply(this,arguments)}(N);jn.then(ls=>{ee[ls.measurementId]=ls.appId,N.options.measurementId&&ls.measurementId!==N.options.measurementId&&gi.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${ls.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ls=>gi.error(ls)),V.push(jn);const Yn=function mu(){return Ar.apply(this,arguments)}().then(ls=>{if(ls)return ve.getId()}),[rr,In]=yield Promise.all([jn,Yn]);(function gc(N){const V=window.document.getElementsByTagName("script");for(const ee of Object.values(V))if(ee.src&&ee.src.includes(ga)&&ee.src.includes(N))return ee;return null})(Ot)||function Sa(N,V){const ee=function nl(N,V){let ee;return window.trustedTypes&&(ee=window.trustedTypes.createPolicy(N,V)),ee}("firebase-js-sdk-policy",{createScriptURL:po}),ve=document.createElement("script"),ht=`${ga}?l=${N}&id=${V}`;ve.src=ee?null==ee?void 0:ee.createScriptURL(ht):ht,ve.async=!0,document.head.appendChild(ve)}(Ot,rr.measurementId),nr&&(ht("consent","default",nr),function go(N){nr=N}(void 0)),ht("js",new Date);const To=null!==(bn=null==on?void 0:on.config)&&void 0!==bn?bn:{};return To[Zi]="firebase",To.update=!0,null!=In&&(To[wr]=In),ht("config",rr.measurementId,To),Ha&&(ht("set",Ha),function vi(N){Ha=N}(void 0)),rr.measurementId}),Ql.apply(this,arguments)}class _c{constructor(V){this.app=V}_delete(){return delete eo[this.app.options.appId],Promise.resolve()}}let eo={},Ec=[];const Jl={};let vu,mo,yu="dataLayer",xa="gtag",_i=!1;function jc(N,V,ee){!function wl(){const N=[];if((0,Pe.ru)()&&N.push("This is a browser extension environment."),(0,Pe.zI)()||N.push("Cookies are not available."),N.length>0){const V=N.map((ve,ht)=>`(${ht+1}) ${ve}`).join(" "),ee=Oi.create("invalid-analytics-context",{errorInfo:V});gi.warn(ee.message)}}();const ve=N.options.appId;if(!ve)throw Oi.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw Oi.create("no-api-key");gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=eo[ve])throw Oi.create("already-exists",{id:ve});if(!_i){!function vl(N){let V=[];Array.isArray(window[N])?V=window[N]:window[N]=V}(yu);const{wrappedGtag:Ot,gtagCore:on}=function is(N,V,ee,ve,ht){let Ot=function(...on){window[ve].push(arguments)};return window[ht]&&"function"==typeof window[ht]&&(Ot=window[ht]),window[ht]=function il(N,V,ee,ve){function Ot(){return Ot=(0,G.Z)(function*(on,...bn){try{if("event"===on){const[jn,Yn]=bn;yield function pc(N,V,ee,ve,ht){return Xi.apply(this,arguments)}(N,V,ee,jn,Yn)}else if("config"===on){const[jn,Yn]=bn;yield function rl(N,V,ee,ve,ht,Ot){return Aa.apply(this,arguments)}(N,V,ee,ve,jn,Yn)}else if("consent"===on){const[jn]=bn;N("consent","update",jn)}else if("get"===on){const[jn,Yn,rr]=bn;N("get",jn,Yn,rr)}else if("set"===on){const[jn]=bn;N("set",jn)}else N(on,...bn)}catch(jn){gi.error(jn)}}),Ot.apply(this,arguments)}return function ht(on){return Ot.apply(this,arguments)}}(Ot,N,V,ee),{gtagCore:Ot,wrappedGtag:window[ht]}}(eo,Ec,Jl,yu,xa);mo=Ot,vu=on,_i=!0}return eo[ve]=function On(N,V,ee,ve,ht,Ot,on){return Ql.apply(this,arguments)}(N,Ec,Jl,V,vu,yu,ee),new _c(N)}function Ft(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,G.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(N){return!1}})).apply(this,arguments)}const j="@firebase/analytics",Q="0.10.0";!function se(){(0,Te._registerComponent)(new Fe.wA(Mr,(V,{options:ee})=>jc(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),ee),"PUBLIC")),(0,Te._registerComponent)(new Fe.wA("analytics-internal",function N(V){try{const ee=V.getProvider(Mr).getImmediate();return{logEvent:(ve,ht,Ot)=>function b(N,V,ee,ve){N=(0,Pe.m9)(N),function Xl(N,V,ee,ve,ht){return El.apply(this,arguments)}(mo,eo[N.app.options.appId],V,ee,ve).catch(ht=>gi.error(ht))}(ee,ve,ht,Ot)}}catch(ee){throw Oi.create("interop-component-reg-failed",{reason:ee})}},"PRIVATE")),(0,Te.registerVersion)(j,Q),(0,Te.registerVersion)(j,Q,"esm2017")}();var ct=L(4408),ln=L(7565);const Vn=new class Jn extends ln.v{}(class zt extends ct.o{constructor(V,ee){super(V,ee),this.scheduler=V,this.work=ee}schedule(V,ee=0){return ee>0?super.schedule(V,ee):(this.delay=ee,this.state=V,this.scheduler.flush(this),this)}execute(V,ee){return ee>0||this.closed?super.execute(V,ee):this._execute(V,ee)}requestAsyncId(V,ee,ve=0){return null!=ve&&ve>0||null==ve&&this.delay>0?super.requestAsyncId(V,ee,ve):(V.flush(this),0)}});var os=L(4986),Ai=L(8505),Do=L(5363),_s=L(9468);const ma=new c.GfV("7.5.0"),Ga="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",to="__angularfire_symbol__remoteConfigIsSupportedValue",Ic="__angularfire_symbol__remoteConfigIsSupported",wc="__angularfire_symbol__messagingIsSupportedValue",Wa="__angularfire_symbol__messagingIsSupported";function Ma(N,V,ee){if(V){if(1===V.length)return V[0];const Ot=V.filter(on=>on.app===ee);if(1===Ot.length)return Ot[0]}return ee.container.getProvider(N).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=Ft().then(N=>globalThis[Ga]=N).catch(()=>globalThis[Ga]=!1)),globalThis[Wa]||(globalThis[Wa]=F().then(N=>globalThis[wc]=N).catch(()=>globalThis[wc]=!1)),globalThis[Ic]||(globalThis[Ic]=Io().then(N=>globalThis[to]=N).catch(()=>globalThis[to]=!1));const _u=(N,V)=>{const ee=V?[V]:(0,q.C6)(),ve=[];return ee.forEach(ht=>{ht.container.getProvider(N).instances.forEach(on=>{ve.includes(on)||ve.push(on)})}),ve};function Bo(){}class zc{constructor(V,ee=Vn){this.zone=V,this.delegate=ee}now(){return this.delegate.now()}schedule(V,ee,ve){const ht=this.zone;return this.delegate.schedule(function(on){ht.runGuarded(()=>{V.apply(this,[on])})},ee,ve)}}class ia{constructor(V){this.zone=V,this.task=null}call(V,ee){const ve=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bo,{},Bo,Bo)),ee.pipe((0,Ai.b)({next:ve,complete:ve,error:ve})).subscribe(V).add(ve)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Gd=(()=>{class N{constructor(ee){this.ngZone=ee,this.outsideAngular=ee.runOutsideAngular(()=>new zc(Zone.current)),this.insideAngular=ee.run(()=>new zc(Zone.current,os.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(ee){return new(ee||N)(c.LFG(c.R0b))},N.\u0275prov=c.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function Uo(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Ds(N){return N.pipe((0,Do.Q)(Uo().outsideAngular))}function ya(N){return Uo(),function bl(N){return function(ee){return(ee=ee.lift(new ia(N.ngZone))).pipe((0,_s.R)(N.outsideAngular),(0,Do.Q)(N.insideAngular))}}(Uo())(N)}},2090:(_n,It,L)=>{"use strict";L.d(It,{$s:()=>We,BH:()=>Je,DV:()=>Cr,Dv:()=>rn,G6:()=>Ae,GJ:()=>lr,L:()=>Ue,LL:()=>Ke,Pz:()=>qe,Sg:()=>Le,UG:()=>De,UI:()=>Un,US:()=>Fe,Wj:()=>oi,Wl:()=>Tt,Yr:()=>Xe,ZB:()=>de,ZR:()=>Qe,aH:()=>ft,b$:()=>_t,cI:()=>tn,dS:()=>ti,eu:()=>we,g5:()=>G,gK:()=>_r,gQ:()=>Fr,h$:()=>Se,hl:()=>Me,hu:()=>q,jU:()=>it,lb:()=>xr,m9:()=>Lt,ne:()=>Fn,p$:()=>re,pd:()=>Dr,r3:()=>hr,ru:()=>Be,tV:()=>pe,uI:()=>H,ug:()=>Dn,vZ:()=>tr,w1:()=>ot,w9:()=>cn,xO:()=>ei,xb:()=>Pr,z$:()=>ke,zI:()=>gt,zd:()=>Nr});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},q=function(_e,me){if(!_e)throw G(me)},G=function(_e){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+_e)},Te=function(_e){const me=[];let He=0;for(let At=0;At<_e.length;At++){let pt=_e.charCodeAt(At);pt<128?me[He++]=pt:pt<2048?(me[He++]=pt>>6|192,me[He++]=63&pt|128):55296==(64512&pt)&&At+1<_e.length&&56320==(64512&_e.charCodeAt(At+1))?(pt=65536+((1023&pt)<<10)+(1023&_e.charCodeAt(++At)),me[He++]=pt>>18|240,me[He++]=pt>>12&63|128,me[He++]=pt>>6&63|128,me[He++]=63&pt|128):(me[He++]=pt>>12|224,me[He++]=pt>>6&63|128,me[He++]=63&pt|128)}return me},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(_e,me){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=me?this.byteToCharMapWebSafe_:this.byteToCharMap_,At=[];for(let pt=0;pt<_e.length;pt+=3){const yn=_e[pt],$e=pt+1<_e.length,Ve=$e?_e[pt+1]:0,fe=pt+2<_e.length,Ye=fe?_e[pt+2]:0;let ye=(15&Ve)<<2|Ye>>6,St=63&Ye;fe||(St=64,$e||(ye=64)),At.push(He[yn>>2],He[(3&yn)<<4|Ve>>4],He[ye],He[St])}return At.join("")},encodeString(_e,me){return this.HAS_NATIVE_SUPPORT&&!me?btoa(_e):this.encodeByteArray(Te(_e),me)},decodeString(_e,me){return this.HAS_NATIVE_SUPPORT&&!me?atob(_e):function(_e){const me=[];let He=0,At=0;for(;He<_e.length;){const pt=_e[He++];if(pt<128)me[At++]=String.fromCharCode(pt);else if(pt>191&&pt<224){const yn=_e[He++];me[At++]=String.fromCharCode((31&pt)<<6|63&yn)}else if(pt>239&&pt<365){const fe=((7&pt)<<18|(63&_e[He++])<<12|(63&_e[He++])<<6|63&_e[He++])-65536;me[At++]=String.fromCharCode(55296+(fe>>10)),me[At++]=String.fromCharCode(56320+(1023&fe))}else{const yn=_e[He++],$e=_e[He++];me[At++]=String.fromCharCode((15&pt)<<12|(63&yn)<<6|63&$e)}}return me.join("")}(this.decodeStringToByteArray(_e,me))},decodeStringToByteArray(_e,me){this.init_();const He=me?this.charToByteMapWebSafe_:this.charToByteMap_,At=[];for(let pt=0;pt<_e.length;){const yn=He[_e.charAt(pt++)],Ve=pt<_e.length?He[_e.charAt(pt)]:0;++pt;const Ye=pt<_e.length?He[_e.charAt(pt)]:64;++pt;const le=pt<_e.length?He[_e.charAt(pt)]:64;if(++pt,null==yn||null==Ve||null==Ye||null==le)throw new ge;At.push(yn<<2|Ve>>4),64!==Ye&&(At.push(Ve<<4&240|Ye>>2),64!==le&&At.push(Ye<<6&192|le))}return At},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(_e){const me=Te(_e);return Fe.encodeByteArray(me,!0)},Ue=function(_e){return Se(_e).replace(/\./g,"")},pe=function(_e){try{return Fe.decodeString(_e,!0)}catch(me){console.error("base64Decode failed: ",me)}return null};function re(_e){return de(void 0,_e)}function de(_e,me){if(!(me instanceof Object))return me;switch(me.constructor){case Date:return new Date(me.getTime());case Object:void 0===_e&&(_e={});break;case Array:_e=[];break;default:return me}for(const He in me)!me.hasOwnProperty(He)||!Oe(He)||(_e[He]=de(_e[He],me[He]));return _e}function Oe(_e){return"__proto__"!==_e}const Ie=()=>{try{return function Ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const _e=process.env.__FIREBASE_DEFAULTS__;return _e?JSON.parse(_e):void 0})()||(()=>{if(typeof document>"u")return;let _e;try{_e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(He){return}const me=_e&&pe(_e[1]);return me&&JSON.parse(me)})()}catch(_e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_e}`)}},ft=()=>{var _e;return null===(_e=Ie())||void 0===_e?void 0:_e.config},qe=_e=>{var me;return null===(me=Ie())||void 0===me?void 0:me[`_${_e}`]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((me,He)=>{this.resolve=me,this.reject=He})}wrapCallback(me){return(He,At)=>{He?this.reject(He):this.resolve(At),"function"==typeof me&&(this.promise.catch(()=>{}),1===me.length?me(He):me(He,At))}}}function Le(_e,me){if(_e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const At=me||"demo-project",pt=_e.iat||0,yn=_e.sub||_e.user_id;if(!yn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${At}`,aud:At,iat:pt,exp:pt+3600,auth_time:pt,sub:yn,user_id:yn,firebase:{sign_in_provider:"custom",identities:{}}},_e);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify($e)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function H(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function De(){var _e;const me=null===(_e=Ie())||void 0===_e?void 0:_e.forceEnvironment;if("node"===me)return!0;if("browser"===me)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(He){return!1}}function it(){return"object"==typeof self&&self.self===self}function Be(){const _e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof _e&&void 0!==_e.id}function _t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){const _e=ke();return _e.indexOf("MSIE ")>=0||_e.indexOf("Trident/")>=0}function Xe(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function Ae(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){try{return"object"==typeof indexedDB}catch(_e){return!1}}function we(){return new Promise((_e,me)=>{try{let He=!0;const At="validate-browser-context-for-indexeddb-analytics-module",pt=self.indexedDB.open(At);pt.onsuccess=()=>{pt.result.close(),He||self.indexedDB.deleteDatabase(At),_e(!0)},pt.onupgradeneeded=()=>{He=!1},pt.onerror=()=>{var yn;me((null===(yn=pt.error)||void 0===yn?void 0:yn.message)||"")}}catch(He){me(He)}})}function gt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Qe extends Error{constructor(me,He,At){super(He),this.code=me,this.customData=At,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(me,He,At){this.service=me,this.serviceName=He,this.errors=At}create(me,...He){const At=He[0]||{},pt=`${this.service}/${me}`,yn=this.errors[me],$e=yn?function jt(_e,me){return _e.replace(Jt,(He,At)=>{const pt=me[At];return null!=pt?String(pt):`<${At}?>`})}(yn,At):"Error";return new Qe(pt,`${this.serviceName}: ${$e} (${pt}).`,At)}}const Jt=/\{\$([^}]+)}/g;function tn(_e){return JSON.parse(_e)}function Tt(_e){return JSON.stringify(_e)}const Hn=function(_e){let me={},He={},At={},pt="";try{const yn=_e.split(".");me=tn(pe(yn[0])||""),He=tn(pe(yn[1])||""),pt=yn[2],At=He.d||{},delete He.d}catch(yn){}return{header:me,claims:He,data:At,signature:pt}},cn=function(_e){const He=Hn(_e).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},lr=function(_e){const me=Hn(_e).claims;return"object"==typeof me&&!0===me.admin};function hr(_e,me){return Object.prototype.hasOwnProperty.call(_e,me)}function Cr(_e,me){if(Object.prototype.hasOwnProperty.call(_e,me))return _e[me]}function Pr(_e){for(const me in _e)if(Object.prototype.hasOwnProperty.call(_e,me))return!1;return!0}function Un(_e,me,He){const At={};for(const pt in _e)Object.prototype.hasOwnProperty.call(_e,pt)&&(At[pt]=me.call(He,_e[pt],pt,_e));return At}function tr(_e,me){if(_e===me)return!0;const He=Object.keys(_e),At=Object.keys(me);for(const pt of He){if(!At.includes(pt))return!1;const yn=_e[pt],$e=me[pt];if(nn(yn)&&nn($e)){if(!tr(yn,$e))return!1}else if(yn!==$e)return!1}for(const pt of At)if(!He.includes(pt))return!1;return!0}function nn(_e){return null!==_e&&"object"==typeof _e}function ei(_e){const me=[];for(const[He,At]of Object.entries(_e))Array.isArray(At)?At.forEach(pt=>{me.push(encodeURIComponent(He)+"="+encodeURIComponent(pt))}):me.push(encodeURIComponent(He)+"="+encodeURIComponent(At));return me.length?"&"+me.join("&"):""}function Nr(_e){const me={};return _e.replace(/^\?/,"").split("&").forEach(At=>{if(At){const[pt,yn]=At.split("=");me[decodeURIComponent(pt)]=decodeURIComponent(yn)}}),me}function Dr(_e){const me=_e.indexOf("?");if(!me)return"";const He=_e.indexOf("#",me);return _e.substring(me,He>0?He:void 0)}class Fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let me=1;me<this.blockSize;++me)this.pad_[me]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(me,He){He||(He=0);const At=this.W_;if("string"==typeof me)for(let le=0;le<16;le++)At[le]=me.charCodeAt(He)<<24|me.charCodeAt(He+1)<<16|me.charCodeAt(He+2)<<8|me.charCodeAt(He+3),He+=4;else for(let le=0;le<16;le++)At[le]=me[He]<<24|me[He+1]<<16|me[He+2]<<8|me[He+3],He+=4;for(let le=16;le<80;le++){const ye=At[le-3]^At[le-8]^At[le-14]^At[le-16];At[le]=4294967295&(ye<<1|ye>>>31)}let Ye,kt,pt=this.chain_[0],yn=this.chain_[1],$e=this.chain_[2],Ve=this.chain_[3],fe=this.chain_[4];for(let le=0;le<80;le++){le<40?le<20?(Ye=Ve^yn&($e^Ve),kt=1518500249):(Ye=yn^$e^Ve,kt=1859775393):le<60?(Ye=yn&$e|Ve&(yn|$e),kt=2400959708):(Ye=yn^$e^Ve,kt=3395469782);const ye=(pt<<5|pt>>>27)+Ye+fe+kt+At[le]&4294967295;fe=Ve,Ve=$e,$e=4294967295&(yn<<30|yn>>>2),yn=pt,pt=ye}this.chain_[0]=this.chain_[0]+pt&4294967295,this.chain_[1]=this.chain_[1]+yn&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+fe&4294967295}update(me,He){if(null==me)return;void 0===He&&(He=me.length);const At=He-this.blockSize;let pt=0;const yn=this.buf_;let $e=this.inbuf_;for(;pt<He;){if(0===$e)for(;pt<=At;)this.compress_(me,pt),pt+=this.blockSize;if("string"==typeof me){for(;pt<He;)if(yn[$e]=me.charCodeAt(pt),++$e,++pt,$e===this.blockSize){this.compress_(yn),$e=0;break}}else for(;pt<He;)if(yn[$e]=me[pt],++$e,++pt,$e===this.blockSize){this.compress_(yn),$e=0;break}}this.inbuf_=$e,this.total_+=He}digest(){const me=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let pt=this.blockSize-1;pt>=56;pt--)this.buf_[pt]=255&He,He/=256;this.compress_(this.buf_);let At=0;for(let pt=0;pt<5;pt++)for(let yn=24;yn>=0;yn-=8)me[At]=this.chain_[pt]>>yn&255,++At;return me}}function Fn(_e,me){const He=new Cn(_e,me);return He.subscribe.bind(He)}class Cn{constructor(me,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{me(this)}).catch(At=>{this.error(At)})}next(me){this.forEachObserver(He=>{He.next(me)})}error(me){this.forEachObserver(He=>{He.error(me)}),this.close(me)}complete(){this.forEachObserver(me=>{me.complete()}),this.close()}subscribe(me,He,At){let pt;if(void 0===me&&void 0===He&&void 0===At)throw new Error("Missing Observer.");pt=function Wn(_e,me){if("object"!=typeof _e||null===_e)return!1;for(const He of me)if(He in _e&&"function"==typeof _e[He])return!0;return!1}(me,["next","error","complete"])?me:{next:me,error:He,complete:At},void 0===pt.next&&(pt.next=Lr),void 0===pt.error&&(pt.error=Lr),void 0===pt.complete&&(pt.complete=Lr);const yn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pt.error(this.finalError):pt.complete()}catch($e){}}),this.observers.push(pt),yn}unsubscribeOne(me){void 0===this.observers||void 0===this.observers[me]||(delete this.observers[me],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(me){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,me)}sendOne(me,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[me])try{He(this.observers[me])}catch(At){typeof console<"u"&&console.error&&console.error(At)}})}close(me){this.finalized||(this.finalized=!0,void 0!==me&&(this.finalError=me),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lr(){}const rn=function(_e,me,He,At){let pt;if(At<me?pt="at least "+me:At>He&&(pt=0===He?"none":"no more than "+He),pt)throw new Error(_e+" failed: Was called with "+At+(1===At?" argument.":" arguments.")+" Expects "+pt+".")};function _r(_e,me){return`${_e} failed: ${me} argument `}function oi(_e,me,He,At){if((!At||He)&&"function"!=typeof He)throw new Error(_r(_e,me)+"must be a valid function.")}function xr(_e,me,He,At){if((!At||He)&&("object"!=typeof He||null===He))throw new Error(_r(_e,me)+"must be a valid context object.")}const ti=function(_e){const me=[];let He=0;for(let At=0;At<_e.length;At++){let pt=_e.charCodeAt(At);if(pt>=55296&&pt<=56319){const yn=pt-55296;At++,q(At<_e.length,"Surrogate pair missing trail surrogate."),pt=65536+(yn<<10)+(_e.charCodeAt(At)-56320)}pt<128?me[He++]=pt:pt<2048?(me[He++]=pt>>6|192,me[He++]=63&pt|128):pt<65536?(me[He++]=pt>>12|224,me[He++]=pt>>6&63|128,me[He++]=63&pt|128):(me[He++]=pt>>18|240,me[He++]=pt>>12&63|128,me[He++]=pt>>6&63|128,me[He++]=63&pt|128)}return me},Dn=function(_e){let me=0;for(let He=0;He<_e.length;He++){const At=_e.charCodeAt(He);At<128?me++:At<2048?me+=2:At>=55296&&At<=56319?(me+=4,He++):me+=3}return me},pi=1e3,gr=2,zr=144e5,$t=.5;function We(_e,me=pi,He=gr){const At=me*Math.pow(He,_e),pt=Math.round($t*At*(Math.random()-.5)*2);return Math.min(zr,At+pt)}function Lt(_e){return _e&&_e._delegate?_e._delegate:_e}},2078:(_n,It,L)=>{"use strict";L.d(It,{Br:()=>uo,dr:()=>oi,oU:()=>ti,cs:()=>da,YG:()=>zr,Sm:()=>$t,PM:()=>We,FN:()=>rt,Zi:()=>Xt,tO:()=>Lt,Dq:()=>_e,W2:()=>pt,IJ:()=>Ve,W4:()=>fe,Gu:()=>ye,gu:()=>St,Xz:()=>vt,pK:()=>Ne,Ie:()=>Ct,Q$:()=>cr,q_:()=>Qn,ki:()=>Ko,jP:()=>co,VI:()=>nt,g2:()=>lt,wd:()=>Yt,sr:()=>$n,Pc:()=>Us,r4:()=>Bs,YI:()=>Ja,j9:()=>Fn,yF:()=>Yo});var c=L(4650),q=L(433),G=L(655),Te=L(8421),Pe=L(9751),Fe=L(5577),ge=L(1144),Se=L(576),Ue=L(3268);const pe=["addListener","removeListener"],re=["addEventListener","removeEventListener"],de=["on","off"];function Oe(y,I,f,T){if((0,Se.m)(f)&&(T=f,f=void 0),T)return Oe(y,I,f).pipe((0,Ue.Z)(T));const[K,ze]=function be(y){return(0,Se.m)(y.addEventListener)&&(0,Se.m)(y.removeEventListener)}(y)?re.map(an=>En=>y[an](I,En,f)):function ut(y){return(0,Se.m)(y.addListener)&&(0,Se.m)(y.removeListener)}(y)?pe.map(Ge(y,I)):function Pt(y){return(0,Se.m)(y.on)&&(0,Se.m)(y.off)}(y)?de.map(Ge(y,I)):[];if(!K&&(0,ge.z)(y))return(0,Fe.z)(an=>Oe(an,I,f))((0,Te.Xf)(y));if(!K)throw new TypeError("Invalid event target");return new Pe.y(an=>{const En=(...Xn)=>an.next(1<Xn.length?Xn:Xn[0]);return K(En),()=>ze(En)})}function Ge(y,I){return f=>T=>y[f](I,T)}var Ie=L(958),he=L(1135),dt=L(4262),ke=(L(181),L(6439),L(7838),L(1898),L(5179)),H=L(5730),De=L(5820),it=L(1843),_t=(L(6369),L(3539)),at=(L(3457),L(4349),L(1308)),we=L(9300),gt=L(3900),et=L(1884),Qe=L(6895);const jt=ke.i,Tt=["*"];function cn(y,I){if(1&y&&(c.TgZ(0,"div",1),c.GkF(1,2),c.qZA()),2&y){const f=c.oxw();c.xp6(1),c.Q6J("ngTemplateOutlet",f.template)}}const hr=y=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(y):"function"==typeof requestAnimationFrame?requestAnimationFrame(y):setTimeout(y),Cr=y=>!!y.resolveComponentFactory;let Pr=(()=>{class y{constructor(f,T){this.injector=f,this.el=T,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(f){this.el.nativeElement.value=this.lastValue=null==f?"":f,Un(this.el)}handleChangeEvent(f,T){f===this.el.nativeElement&&(T!==this.lastValue&&(this.lastValue=T,this.onChange(T)),Un(this.el))}_handleBlurEvent(f){f===this.el.nativeElement&&(this.onTouched(),Un(this.el))}registerOnChange(f){this.onChange=f}registerOnTouched(f){this.onTouched=f}setDisabledState(f){this.el.nativeElement.disabled=f}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let f;try{f=this.injector.get(q.a5)}catch(K){}if(!f)return;f.statusChanges&&(this.statusChanges=f.statusChanges.subscribe(()=>Un(this.el)));const T=f.control;T&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(ze=>{if(typeof T[ze]<"u"){const an=T[ze].bind(T);T[ze]=(...En)=>{an(...En),Un(this.el)}}})}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.zs3),c.Y36(c.SBq))},y.\u0275dir=c.lG2({type:y,hostBindings:function(f,T){1&f&&c.NdJ("ionBlur",function(ze){return T._handleBlurEvent(ze.target)})}}),y})();const Un=y=>{hr(()=>{const I=y.nativeElement,f=null!=I.value&&I.value.toString().length>0,T=tr(I);nn(I,T);const K=I.closest("ion-item");K&&nn(K,f?[...T,"item-has-value"]:T)})},tr=y=>{const I=y.classList,f=[];for(let T=0;T<I.length;T++){const K=I.item(T);null!==K&&ui(K,"ng-")&&f.push(`ion-${K.substring(3)}`)}return f},nn=(y,I)=>{const f=y.classList;f.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),f.add(...I)},ui=(y,I)=>y.substring(0,I.length)===I;let Fn=(()=>{class y extends Pr{constructor(f,T){super(f,T)}_handleInputEvent(f){this.handleChangeEvent(f,f.value)}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.zs3),c.Y36(c.SBq))},y.\u0275dir=c.lG2({type:y,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(f,T){1&f&&c.NdJ("ionChange",function(ze){return T._handleInputEvent(ze.target)})},features:[c._Bn([{provide:q.JU,useExisting:y,multi:!0}]),c.qOj]}),y})();const Cn=(y,I)=>{const f=y.prototype;I.forEach(T=>{Object.defineProperty(f,T,{get(){return this.el[T]},set(K){this.z.runOutsideAngular(()=>this.el[T]=K)}})})},mn=(y,I)=>{const f=y.prototype;I.forEach(T=>{f[T]=function(){const K=arguments;return this.z.runOutsideAngular(()=>this.el[T].apply(this.el,K))}})},Wn=(y,I,f)=>{f.forEach(T=>y[T]=Oe(I,T))};function rn(y){return function(f){const{defineCustomElementFn:T,inputs:K,methods:ze}=y;return void 0!==T&&T(),K&&Cn(f,K),ze&&mn(f,ze),f}}let oi=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-app"]],ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0})],y),y})(),ti=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],y),y})(),zr=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionFocus","ionBlur"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],y),y})(),$t=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["collapse"]})],y),y})(),We=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],y),y})(),rt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["mode"]})],y),y})(),Xt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],y),y})(),Lt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})(),_e=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})(),pt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],y),y})(),Ve=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],y),y})(),fe=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionFocus","ionBlur"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],y),y})(),ye=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],y),y})(),St=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],y),y})(),vt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["alt","src"]})],y),y})(),Ne=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],y),y})(),Ct=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],y),y})(),cr=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],y),y})(),Qn=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],y),y})(),nt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],y),y})(),lt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement,Wn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],y),y})(),Yt=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","size"]})],y),y})(),$n=(()=>{let y=class{constructor(f,T,K){this.z=K,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Tt,decls:1,vars:0,template:function(f,T){1&f&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})();class jr{constructor(I={}){this.data=I}get(I){return this.data[I]}}let dr=(()=>{class y{constructor(f,T){this.zone=f,this.appRef=T}create(f,T,K,ze){return new Rr(f,T,K,this.appRef,this.zone,ze)}}return y.\u0275fac=function(f){return new(f||y)(c.LFG(c.R0b),c.LFG(c.z2F))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac}),y})();class Rr{constructor(I,f,T,K,ze,an){this.resolverOrInjector=I,this.injector=f,this.location=T,this.appRef=K,this.zone=ze,this.elementReferenceKey=an,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(I,f,T,K){return this.zone.run(()=>new Promise(ze=>{const an=Object.assign({},T);void 0!==this.elementReferenceKey&&(an[this.elementReferenceKey]=I),ze(as(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,I,f,an,K))}))}removeViewFromDom(I,f){return this.zone.run(()=>new Promise(T=>{const K=this.elRefMap.get(f);if(K){K.destroy(),this.elRefMap.delete(f);const ze=this.elEventsMap.get(f);ze&&(ze(),this.elEventsMap.delete(f))}T()}))}}const as=(y,I,f,T,K,ze,an,En,Xn,Sr,di)=>{let $r;const ms=c.zs3.create({providers:cs(Sr),parent:f});if(I&&Cr(I)){const Xo=I.resolveComponentFactory(Xn);$r=T?T.createComponent(Xo,T.length,ms):Xo.create(ms)}else{if(!T)return null;$r=T.createComponent(Xn,{index:T.indexOf,injector:ms,environmentInjector:I})}const Cs=$r.instance,wi=$r.location.nativeElement;if(Sr&&Object.assign(Cs,Sr),di)for(const Xo of di)wi.classList.add(Xo);const Fi=Ni(y,Cs,wi);return En.appendChild(wi),T||K.attachView($r.hostView),$r.changeDetectorRef.reattach(),ze.set(wi,$r),an.set(wi,Fi),wi},so=[it.L,it.a,it.b,it.c,it.d],Ni=(y,I,f)=>y.run(()=>{const T=so.filter(K=>"function"==typeof I[K]).map(K=>{const ze=an=>I[K](an.detail);return f.addEventListener(K,ze),()=>f.removeEventListener(K,ze)});return()=>T.forEach(K=>K())}),Ki=new c.OlP("NavParamsToken"),cs=y=>[{provide:Ki,useValue:y},{provide:jr,useFactory:Wo,deps:[Ki]}],Wo=y=>new jr(y),es=(y,I)=>((y=y.filter(f=>f.stackId!==I.stackId)).push(I),y),la=(y,I)=>{const f=y.createUrlTree(["."],{relativeTo:I});return y.serializeUrl(f)},Mo=(y,I)=>{if(!y)return;const f=ao(I);for(let T=0;T<f.length;T++){if(T>=y.length)return f[T];if(f[T]!==y[T])return}},ao=y=>y.split("/").map(I=>I.trim()).filter(I=>""!==I),Eo=y=>{y&&(y.ref.destroy(),y.unlistenEvents())};class Pl{constructor(I,f,T,K,ze,an){this.containerEl=f,this.router=T,this.navCtrl=K,this.zone=ze,this.location=an,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==I?ao(I):void 0}createView(I,f){var T;const K=la(this.router,f),ze=null===(T=null==I?void 0:I.location)||void 0===T?void 0:T.nativeElement,an=Ni(this.zone,I.instance,ze);return{id:this.nextId++,stackId:Mo(this.tabsPrefix,K),unlistenEvents:an,element:ze,ref:I,url:K}}getExistingView(I){const f=la(this.router,I),T=this.views.find(K=>K.url===f);return T&&T.ref.changeDetectorRef.reattach(),T}setActive(I){var f,T;const K=this.navCtrl.consumeTransition();let{direction:ze,animation:an,animationBuilder:En}=K;const Xn=this.activeView,Sr=((y,I)=>!I||y.stackId!==I.stackId)(I,Xn);Sr&&(ze="back",an=void 0);const di=this.views.slice();let $r;const ms=this.router;ms.getCurrentNavigation?$r=ms.getCurrentNavigation():!(null===(f=ms.navigations)||void 0===f)&&f.value&&($r=ms.navigations.value),null!==(T=null==$r?void 0:$r.extras)&&void 0!==T&&T.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Cs=this.views.includes(I),wi=this.insertView(I,ze);Cs||I.ref.changeDetectorRef.detectChanges();const Fi=I.animationBuilder;return void 0===En&&"back"===ze&&!Sr&&void 0!==Fi&&(En=Fi),Xn&&(Xn.animationBuilder=En),this.zone.runOutsideAngular(()=>this.wait(()=>(Xn&&Xn.ref.changeDetectorRef.detach(),I.ref.changeDetectorRef.reattach(),this.transition(I,Xn,an,this.canGoBack(1),!1,En).then(()=>lo(I,wi,di,this.location,this.zone)).then(()=>({enteringView:I,direction:ze,animation:an,tabSwitch:Sr})))))}canGoBack(I,f=this.getActiveStackId()){return this.getStack(f).length>I}pop(I,f=this.getActiveStackId()){return this.zone.run(()=>{var T,K;const ze=this.getStack(f);if(ze.length<=I)return Promise.resolve(!1);const an=ze[ze.length-I-1];let En=an.url;const Xn=an.savedData;if(Xn){const di=Xn.get("primary");null!==(K=null===(T=null==di?void 0:di.route)||void 0===T?void 0:T._routerState)&&void 0!==K&&K.snapshot.url&&(En=di.route._routerState.snapshot.url)}const{animationBuilder:Sr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(En,Object.assign(Object.assign({},an.savedExtras),{animation:Sr})).then(()=>!0)})}startBackTransition(){const I=this.activeView;if(I){const f=this.getStack(I.stackId),T=f[f.length-2],K=T.animationBuilder;return this.wait(()=>this.transition(T,I,"back",this.canGoBack(2),!0,K))}return Promise.resolve()}endBackTransition(I){I?(this.skipTransition=!0,this.pop(1)):this.activeView&&us(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(I){const f=this.getStack(I);return f.length>0?f[f.length-1]:void 0}getRootUrl(I){const f=this.getStack(I);return f.length>0?f[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Eo),this.activeView=void 0,this.views=[]}getStack(I){return this.views.filter(f=>f.stackId===I)}insertView(I,f){return this.activeView=I,this.views=((y,I,f)=>"root"===f?es(y,I):"forward"===f?((y,I)=>(y.indexOf(I)>=0?y=y.filter(T=>T.stackId!==I.stackId||T.id<=I.id):y.push(I),y))(y,I):((y,I)=>y.indexOf(I)>=0?y.filter(T=>T.stackId!==I.stackId||T.id<=I.id):es(y,I))(y,I))(this.views,I,f),this.views.slice()}transition(I,f,T,K,ze,an){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(f===I)return Promise.resolve(!1);const En=I?I.element:void 0,Xn=f?f.element:void 0,Sr=this.containerEl;return En&&En!==Xn&&(En.classList.add("ion-page"),En.classList.add("ion-page-invisible"),En.parentElement!==Sr&&Sr.appendChild(En),Sr.commit)?Sr.commit(En,Xn,{deepWait:!0,duration:void 0===T?0:void 0,direction:T,showGoBack:K,progressAnimation:ze,animationBuilder:an}):Promise.resolve(!1)}wait(I){return(0,G.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const f=this.runningTask=I();return f.finally(()=>this.runningTask=void 0),f})}}const lo=(y,I,f,T,K)=>"function"==typeof requestAnimationFrame?new Promise(ze=>{requestAnimationFrame(()=>{us(y,I,f,T,K),ze()})}):Promise.resolve(),us=(y,I,f,T,K)=>{K.run(()=>f.filter(ze=>!I.includes(ze)).forEach(Eo)),I.forEach(ze=>{const En=T.path().split("?")[0].split("#")[0];if(ze!==y&&ze.url!==En){const Xn=ze.element;Xn.setAttribute("aria-hidden","true"),Xn.classList.add("ion-page-hidden"),ze.ref.changeDetectorRef.detach()}})};let ca=(()=>{class y{get(f,T){const K=ts();return K?K.get(f,T):null}getBoolean(f,T){const K=ts();return!!K&&K.getBoolean(f,T)}getNumber(f,T){const K=ts();return K?K.getNumber(f,T):0}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const qs=new c.OlP("USERCONFIG"),ts=()=>{if(typeof window<"u"){const y=window.Ionic;if(null!=y&&y.config)return y.config}return null};let Ys=(()=>{class y{constructor(f,T){this.doc=f,this.backButton=new Ie.x,this.keyboardDidShow=new Ie.x,this.keyboardDidHide=new Ie.x,this.pause=new Ie.x,this.resume=new Ie.x,this.resize=new Ie.x,T.run(()=>{var K;let ze;this.win=f.defaultView,this.backButton.subscribeWithPriority=function(an,En){return this.subscribe(Xn=>Xn.register(an,Sr=>T.run(()=>En(Sr))))},ds(this.pause,f,"pause"),ds(this.resume,f,"resume"),ds(this.backButton,f,"ionBackButton"),ds(this.resize,this.win,"resize"),ds(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ds(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(an=>{ze=an}),null!==(K=this.win)&&void 0!==K&&K.cordova?f.addEventListener("deviceready",()=>{ze("cordova")},{once:!0}):ze("dom")})}is(f){return(0,ke.a)(this.win,f)}platforms(){return(0,ke.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(f){return ua(this.win.location.href,f)}isLandscape(){return!this.isPortrait()}isPortrait(){var f,T;return null===(T=(f=this.win).matchMedia)||void 0===T?void 0:T.call(f,"(orientation: portrait)").matches}testUserAgent(f){const T=this.win.navigator;return!!(null!=T&&T.userAgent&&T.userAgent.indexOf(f)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return y.\u0275fac=function(f){return new(f||y)(c.LFG(Qe.K0),c.LFG(c.R0b))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const ua=(y,I)=>{I=I.replace(/[[\]\\]/g,"\\$&");const T=new RegExp("[\\?&]"+I+"=([^&#]*)").exec(y);return T?decodeURIComponent(T[1].replace(/\+/g," ")):null},ds=(y,I,f)=>{I&&I.addEventListener(f,T=>{y.next(null!=T?T.detail:void 0)})};let ri=(()=>{class y{constructor(f,T,K,ze){this.location=T,this.serializer=K,this.router=ze,this.direction=Io,this.animated=Fs,this.guessDirection="forward",this.lastNavId=-1,ze&&ze.events.subscribe(an=>{if(an instanceof dt.OD){const En=an.restoredState?an.restoredState.navigationId:an.id;this.guessDirection=En<this.lastNavId?"back":"forward",this.guessAnimation=an.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?an.id:En}}),f.backButton.subscribeWithPriority(0,an=>{this.pop(),an()})}navigateForward(f,T={}){return this.setDirection("forward",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}navigateBack(f,T={}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}navigateRoot(f,T={}){return this.setDirection("root",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}back(f={animated:!0,animationDirection:"back"}){return this.setDirection("back",f.animated,f.animationDirection,f.animation),this.location.back()}pop(){return(0,G.mG)(this,void 0,void 0,function*(){let f=this.topOutlet;for(;f&&!(yield f.pop());)f=f.parentOutlet})}setDirection(f,T,K,ze){this.direction=f,this.animated=ps(f,T,K),this.animationBuilder=ze}setTopOutlet(f){this.topOutlet=f}consumeTransition(){let T,f="root";const K=this.animationBuilder;return"auto"===this.direction?(f=this.guessDirection,T=this.guessAnimation):(T=this.animated,f=this.direction),this.direction=Io,this.animated=Fs,this.animationBuilder=void 0,{direction:f,animation:T,animationBuilder:K}}navigate(f,T){if(Array.isArray(f))return this.router.navigate(f,T);{const K=this.serializer.parse(f.toString());return void 0!==T.queryParams&&(K.queryParams=Object.assign({},T.queryParams)),void 0!==T.fragment&&(K.fragment=T.fragment),this.router.navigateByUrl(K,T)}}}return y.\u0275fac=function(f){return new(f||y)(c.LFG(Ys),c.LFG(Qe.Ye),c.LFG(dt.Hx),c.LFG(dt.F0,8))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const ps=(y,I,f)=>{if(!1!==I){if(void 0!==f)return f;if("forward"===y||"back"===y)return y;if("root"===y&&!0===I)return"forward"}},Io="auto",Fs=void 0;let co=(()=>{class y{constructor(f,T,K,ze,an,En,Xn,Sr,di,$r,ms,Cs,wi){this.parentContexts=f,this.location=T,this.config=an,this.navCtrl=En,this.componentFactoryResolver=Xn,this.parentOutlet=wi,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new he.X(null),this.stackEvents=new c.vpe,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.nativeEl=di.nativeElement,this.name=K||dt.eC,this.tabsPrefix="true"===ze?la($r,Cs):void 0,this.stackCtrl=new Pl(this.tabsPrefix,this.nativeEl,$r,En,ms,Sr),f.onChildOutletCreated(this.name,this)}set animation(f){this.nativeEl.animation=f}set animated(f){this.nativeEl.animated=f}set swipeGesture(f){this._swipeGesture=f,this.nativeEl.swipeHandler=f?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:T=>this.stackCtrl.endBackTransition(T)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const f=this.getContext();null!=f&&f.route&&this.activateWith(f.route,f.resolver||null)}new Promise(f=>(0,H.c)(this.nativeEl,f)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(f,T){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const T=this.getContext();this.activatedView.savedData=new Map(T.children.contexts);const K=this.activatedView.savedData.get("primary");if(K&&T.route&&(K.route=Object.assign({},T.route)),this.activatedView.savedExtras={},T.route){const ze=T.route.snapshot;this.activatedView.savedExtras.queryParams=ze.queryParams,this.activatedView.savedExtras.fragment=ze.fragment}}const f=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(f)}}activateWith(f,T){var K;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=f;let ze,an=this.stackCtrl.getExistingView(f);if(an){ze=this.activated=an.ref;const En=an.savedData;En&&(this.getContext().children.contexts=En),this.updateActivatedRouteProxy(ze.instance,f)}else{const En=f._futureSnapshot;if(null==En.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Xn=this.parentContexts.getOrCreateContext(this.name).children,Sr=new he.X(null),di=this.createActivatedRouteProxy(Sr,f),$r=new wa(di,Xn,this.location.injector),ms=null!==(K=En.routeConfig.component)&&void 0!==K?K:En.component;if((T=T||this.componentFactoryResolver)&&Cr(T)){const Cs=T.resolveComponentFactory(ms);ze=this.activated=this.location.createComponent(Cs,this.location.length,$r)}else ze=this.activated=this.location.createComponent(ms,{index:this.location.length,injector:$r,environmentInjector:null!=T?T:this.environmentInjector});Sr.next(ze.instance),an=this.stackCtrl.createView(this.activated,f),this.proxyMap.set(ze.instance,di),this.currentActivatedRoute$.next({component:ze.instance,activatedRoute:f})}this.activatedView=an,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(an).then(En=>{this.activateEvents.emit(ze.instance),this.stackEvents.emit(En)})}canGoBack(f=1,T){return this.stackCtrl.canGoBack(f,T)}pop(f=1,T){return this.stackCtrl.pop(f,T)}getLastUrl(f){const T=this.stackCtrl.getLastUrl(f);return T?T.url:void 0}getLastRouteView(f){return this.stackCtrl.getLastUrl(f)}getRootView(f){return this.stackCtrl.getRootUrl(f)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(f,T){const K=new dt.gz;return K._futureSnapshot=T._futureSnapshot,K._routerState=T._routerState,K.snapshot=T.snapshot,K.outlet=T.outlet,K.component=T.component,K._paramMap=this.proxyObservable(f,"paramMap"),K._queryParamMap=this.proxyObservable(f,"queryParamMap"),K.url=this.proxyObservable(f,"url"),K.params=this.proxyObservable(f,"params"),K.queryParams=this.proxyObservable(f,"queryParams"),K.fragment=this.proxyObservable(f,"fragment"),K.data=this.proxyObservable(f,"data"),K}proxyObservable(f,T){return f.pipe((0,we.h)(K=>!!K),(0,gt.w)(K=>this.currentActivatedRoute$.pipe((0,we.h)(ze=>null!==ze&&ze.component===K),(0,gt.w)(ze=>ze&&ze.activatedRoute[T]),(0,et.x)())))}updateActivatedRouteProxy(f,T){const K=this.proxyMap.get(f);if(!K)throw new Error("Could not find activated route proxy for view");K._futureSnapshot=T._futureSnapshot,K._routerState=T._routerState,K.snapshot=T.snapshot,K.outlet=T.outlet,K.component=T.component,this.currentActivatedRoute$.next({component:f,activatedRoute:T})}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(dt.y6),c.Y36(c.s_b),c.$8M("name"),c.$8M("tabs"),c.Y36(ca),c.Y36(ri),c.Y36(c._Vd,8),c.Y36(Qe.Ye),c.Y36(c.SBq),c.Y36(dt.F0),c.Y36(c.R0b),c.Y36(dt.gz),c.Y36(y,12))},y.\u0275dir=c.lG2({type:y,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),y})();class wa{constructor(I,f,T){this.route=I,this.childContexts=f,this.parent=T}get(I,f){return I===dt.gz?this.route:I===dt.y6?this.childContexts:this.parent.get(I,f)}}let da=(()=>{class y{constructor(f,T,K){this.routerOutlet=f,this.navCtrl=T,this.config=K}onClick(f){var T;const K=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(T=this.routerOutlet)&&void 0!==T&&T.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),f.preventDefault()):null!=K&&(this.navCtrl.navigateBack(K,{animation:this.routerAnimation}),f.preventDefault())}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(co,8),c.Y36(ri),c.Y36(ca))},y.\u0275dir=c.lG2({type:y,selectors:[["ion-back-button"]],hostBindings:function(f,T){1&f&&c.NdJ("click",function(ze){return T.onClick(ze)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),y})(),Ja=(()=>{class y{constructor(f,T,K,ze,an){this.locationStrategy=f,this.navCtrl=T,this.elementRef=K,this.router=ze,this.routerLink=an,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var f;if(null!==(f=this.routerLink)&&void 0!==f&&f.urlTree){const T=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=T}}onClick(f){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),f.preventDefault()}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(Qe.S$),c.Y36(ri),c.Y36(c.SBq),c.Y36(dt.F0),c.Y36(dt.rH,8))},y.\u0275dir=c.lG2({type:y,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(f,T){1&f&&c.NdJ("click",function(ze){return T.onClick(ze)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[c.TTD]}),y})(),Ko=(()=>{let y=class{constructor(f,T,K){this.z=K,this.isCmpOpen=!1,this.el=T.nativeElement,this.el.addEventListener("willPresent",()=>{this.isCmpOpen=!0,f.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,f.detectChanges()}),Wn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},y.\u0275cmp=c.Xpm({type:y,selectors:[["ion-modal"]],contentQueries:function(f,T,K){if(1&f&&c.Suo(K,c.Rgc,5),2&f){let ze;c.iGM(ze=c.CRH())&&(T.template=ze.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",swipeToClose:"swipeToClose",translucent:"translucent",trigger:"trigger"},decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(f,T){1&f&&c.YNc(0,cn,2,1,"div",0),2&f&&c.Q6J("ngIf",T.isCmpOpen||T.keepContentsMounted)},dependencies:[Qe.O5,Qe.tP],encapsulation:2,changeDetection:0}),y=(0,G.gn)([rn({inputs:["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","swipeToClose","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"]})],y),y})();class Ui{constructor(I){this.ctrl=I}create(I){return this.ctrl.create(I||{})}dismiss(I,f,T){return this.ctrl.dismiss(I,f,T)}getTop(){return this.ctrl.getTop()}}let uo=(()=>{class y extends Ui{constructor(){super(_t.a)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();class rs{}let Va=(()=>{class y extends Ui{constructor(f,T,K,ze){super(_t.m),this.angularDelegate=f,this.resolver=T,this.injector=K,this.environmentInjector=ze}create(f){var T;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(T=this.resolver)&&void 0!==T?T:this.environmentInjector,this.injector,void 0,"modal")}))}}return y.\u0275fac=function(f){return new(f||y)(c.LFG(dr),c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(rs,8))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac}),y})(),gs=(()=>{class y extends Ui{constructor(f,T,K,ze){super(_t.c),this.angularDelegate=f,this.resolver=T,this.injector=K,this.environmentInjector=ze}create(f){var T;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(T=this.resolver)&&void 0!==T?T:this.environmentInjector,this.injector,void 0,"popover")}))}}return y.\u0275fac=function(f){return new(f||y)(c.LFG(dr),c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(rs,8))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac}),y})(),Yo=(()=>{class y extends Ui{constructor(){super(_t.t)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();class Bs{shouldDetach(I){return!1}shouldAttach(I){return!1}store(I,f){}retrieve(I){return null}shouldReuseRoute(I,f){if(I.routeConfig!==f.routeConfig)return!1;const T=I.params,K=f.params,ze=Object.keys(T),an=Object.keys(K);if(ze.length!==an.length)return!1;for(const En of ze)if(K[En]!==T[En])return!1;return!0}}const Zo=(y,I,f)=>()=>{if(I.defaultView&&typeof window<"u"){(0,De.s)(Object.assign(Object.assign({},y),{_zoneGate:ze=>f.run(ze)}));const K="__zone_symbol__addEventListener"in I.body?"__zone_symbol__addEventListener":"addEventListener";return function Ke(){var y=[];if(typeof window<"u"){var I=window;(!I.customElements||I.Element&&(!I.Element.prototype.closest||!I.Element.prototype.matches||!I.Element.prototype.remove||!I.Element.prototype.getRootNode))&&y.push(L.e(6748).then(L.t.bind(L,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||I.NodeList&&!I.NodeList.prototype.forEach||!I.fetch||!function(){try{var T=new URL("b","http://a");return T.pathname="c%20d","http://a/c%20d"===T.href&&T.searchParams}catch(K){return!1}}()||typeof WeakMap>"u")&&y.push(L.e(2214).then(L.t.bind(L,4144,23)))}return Promise.all(y)}().then(()=>((y,I)=>typeof window>"u"?Promise.resolve():(0,at.p)().then(()=>(jt(),(0,at.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),I))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:hr,jmp:ze=>f.runOutsideAngular(ze),ael(ze,an,En,Xn){ze[K](an,En,Xn)},rel(ze,an,En,Xn){ze.removeEventListener(an,En,Xn)}}))}};let Us=(()=>{class y{static forRoot(f){return{ngModule:y,providers:[{provide:qs,useValue:f},{provide:c.ip1,useFactory:Zo,multi:!0,deps:[qs,Qe.K0,c.R0b]}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({providers:[dr,Va,gs],imports:[[Qe.ez]]}),y})()},181:(_n,It,L)=>{"use strict";L.d(It,{c:()=>Pt});var c=L(5730),q=L(3457);let G;const Pe=be=>be.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fe=be=>(void 0===G&&(G=void 0===be.style.animationName&&void 0!==be.style.webkitAnimationName?"-webkit-":""),G),ge=(be,Ie,he)=>{const dt=Ie.startsWith("animation")?Fe(be):"";be.style.setProperty(dt+Ie,he)},Se=(be,Ie)=>{const he=Ie.startsWith("animation")?Fe(be):"";be.style.removeProperty(he+Ie)},re=[],ut=(be=[],Ie)=>{if(void 0!==Ie){const he=Array.isArray(Ie)?Ie:[Ie];return[...be,...he]}return be},Pt=be=>{let Ie,he,dt,ft,qe,Je,it,Me,we,gt,et,Jt,tn,Le=[],ke=[],H=[],De=!1,Be={},_t=[],yt=[],ot={},at=0,Xe=!1,Ae=!1,Qe=!0,Ke=!1,jt=!0,Tt=!1;const Hn=be,Gn=[],ar=[],cn=[],lr=[],hr=[],Cr=[],Pr=[],Un=[],tr=[],nn=[],ui="function"==typeof AnimationEffect||void 0!==q.w&&"function"==typeof q.w.AnimationEffect,ei="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ui,Dr=()=>nn,Wn=(ce,nt)=>((null!=nt&&nt.oneTimeCallback?ar:Gn).push({c:ce,o:nt}),tn),rn=()=>{if(ei)nn.forEach(ce=>{ce.cancel()}),nn.length=0;else{const ce=cn.slice();(0,c.r)(()=>{ce.forEach(nt=>{Se(nt,"animation-name"),Se(nt,"animation-duration"),Se(nt,"animation-timing-function"),Se(nt,"animation-iteration-count"),Se(nt,"animation-delay"),Se(nt,"animation-play-state"),Se(nt,"animation-fill-mode"),Se(nt,"animation-direction")})})}},_r=()=>{hr.forEach(ce=>{null!=ce&&ce.parentNode&&ce.parentNode.removeChild(ce)}),hr.length=0},Xt=()=>void 0!==qe?qe:it?it.getFill():"both",Lt=()=>void 0!==we?we:void 0!==Je?Je:it?it.getDirection():"normal",_e=()=>Xe?"linear":void 0!==dt?dt:it?it.getEasing():"linear",me=()=>Ae?0:void 0!==gt?gt:void 0!==he?he:it?it.getDuration():0,He=()=>void 0!==ft?ft:it?it.getIterations():1,At=()=>void 0!==et?et:void 0!==Ie?Ie:it?it.getDelay():0,Ct=()=>{0!==at&&(at--,0===at&&((()=>{An(),Un.forEach(Kt=>Kt()),tr.forEach(Kt=>Kt());const ce=Qe?1:0,nt=_t,Et=yt,qt=ot;cn.forEach(Kt=>{const pn=Kt.classList;nt.forEach(kn=>pn.add(kn)),Et.forEach(kn=>pn.remove(kn));for(const kn in qt)qt.hasOwnProperty(kn)&&ge(Kt,kn,qt[kn])}),Gn.forEach(Kt=>Kt.c(ce,tn)),ar.forEach(Kt=>Kt.c(ce,tn)),ar.length=0,jt=!0,Qe&&(Ke=!0),Qe=!0})(),it&&it.animationFinish()))},Nt=(ce=!0)=>{_r();const nt=(be=>(be.forEach(Ie=>{for(const he in Ie)if(Ie.hasOwnProperty(he)){const dt=Ie[he];if("easing"===he)Ie["animation-timing-function"]=dt,delete Ie[he];else{const ft=Pe(he);ft!==he&&(Ie[ft]=dt,delete Ie[he])}}}),be))(Le);cn.forEach(Et=>{if(nt.length>0){const qt=((be=[])=>be.map(Ie=>{const he=Ie.offset,dt=[];for(const ft in Ie)Ie.hasOwnProperty(ft)&&"offset"!==ft&&dt.push(`${ft}: ${Ie[ft]};`);return`${100*he}% { ${dt.join(" ")} }`}).join(" "))(nt);Jt=void 0!==be?be:(be=>{let Ie=re.indexOf(be);return Ie<0&&(Ie=re.push(be)-1),`ion-animation-${Ie}`})(qt);const Kt=((be,Ie,he)=>{var dt;const ft=(be=>{const Ie=void 0!==be.getRootNode?be.getRootNode():be;return Ie.head||Ie})(he),qe=Fe(he),Je=ft.querySelector("#"+be);if(Je)return Je;const Le=(null!==(dt=he.ownerDocument)&&void 0!==dt?dt:document).createElement("style");return Le.id=be,Le.textContent=`@${qe}keyframes ${be} { ${Ie} } @${qe}keyframes ${be}-alt { ${Ie} }`,ft.appendChild(Le),Le})(Jt,qt,Et);hr.push(Kt),ge(Et,"animation-duration",`${me()}ms`),ge(Et,"animation-timing-function",_e()),ge(Et,"animation-delay",`${At()}ms`),ge(Et,"animation-fill-mode",Xt()),ge(Et,"animation-direction",Lt());const pn=He()===1/0?"infinite":He().toString();ge(Et,"animation-iteration-count",pn),ge(Et,"animation-play-state","paused"),ce&&ge(Et,"animation-name",`${Kt.id}-alt`),(0,c.r)(()=>{ge(Et,"animation-name",Kt.id||null)})}})},Sn=(ce=!0)=>{(()=>{Cr.forEach(qt=>qt()),Pr.forEach(qt=>qt());const ce=ke,nt=H,Et=Be;cn.forEach(qt=>{const Kt=qt.classList;ce.forEach(pn=>Kt.add(pn)),nt.forEach(pn=>Kt.remove(pn));for(const pn in Et)Et.hasOwnProperty(pn)&&ge(qt,pn,Et[pn])})})(),Le.length>0&&(ei?(cn.forEach(ce=>{const nt=ce.animate(Le,{id:Hn,delay:At(),duration:me(),easing:_e(),iterations:He(),fill:Xt(),direction:Lt()});nt.pause(),nn.push(nt)}),nn.length>0&&(nn[0].onfinish=()=>{Ct()})):Nt(ce)),De=!0},Kn=ce=>{if(ce=Math.min(Math.max(ce,0),.9999),ei)nn.forEach(nt=>{nt.currentTime=nt.effect.getComputedTiming().delay+me()*ce,nt.pause()});else{const nt=`-${me()*ce}ms`;cn.forEach(Et=>{Le.length>0&&(ge(Et,"animation-delay",nt),ge(Et,"animation-play-state","paused"))})}},Pn=ce=>{nn.forEach(nt=>{nt.effect.updateTiming({delay:At(),duration:me(),easing:_e(),iterations:He(),fill:Xt(),direction:Lt()})}),void 0!==ce&&Kn(ce)},cr=(ce=!0,nt)=>{(0,c.r)(()=>{cn.forEach(Et=>{ge(Et,"animation-name",Jt||null),ge(Et,"animation-duration",`${me()}ms`),ge(Et,"animation-timing-function",_e()),ge(Et,"animation-delay",void 0!==nt?`-${nt*me()}ms`:`${At()}ms`),ge(Et,"animation-fill-mode",Xt()||null),ge(Et,"animation-direction",Lt()||null);const qt=He()===1/0?"infinite":He().toString();ge(Et,"animation-iteration-count",qt),ce&&ge(Et,"animation-name",`${Jt}-alt`),(0,c.r)(()=>{ge(Et,"animation-name",Jt||null)})})})},Qn=(ce=!1,nt=!0,Et)=>(ce&&lr.forEach(qt=>{qt.update(ce,nt,Et)}),ei?Pn(Et):cr(nt,Et),tn),Pi=()=>{De&&(ei?nn.forEach(ce=>{ce.pause()}):cn.forEach(ce=>{ge(ce,"animation-play-state","paused")}),Tt=!0)},Zr=()=>{Me=void 0,Ct()},An=()=>{Me&&clearTimeout(Me)},te=ce=>new Promise(nt=>{null!=ce&&ce.sync&&(Ae=!0,Wn(()=>Ae=!1,{oneTimeCallback:!0})),De||Sn(),Ke&&(ei?(Kn(0),Pn()):cr(),Ke=!1),jt&&(at=lr.length+1,jt=!1),Wn(()=>nt(),{oneTimeCallback:!0}),lr.forEach(Et=>{Et.play()}),ei?(nn.forEach(ce=>{ce.play()}),(0===Le.length||0===cn.length)&&Ct()):(()=>{if(An(),(0,c.r)(()=>{cn.forEach(ce=>{Le.length>0&&ge(ce,"animation-play-state","running")})}),0===Le.length||0===cn.length)Ct();else{const ce=At()||0,nt=me()||0,Et=He()||1;isFinite(Et)&&(Me=setTimeout(Zr,ce+nt*Et+100)),((be,Ie)=>{let he;const dt={passive:!0},qe=Je=>{be===Je.target&&(he&&he(),An(),(0,c.r)(()=>{cn.forEach(ce=>{Se(ce,"animation-duration"),Se(ce,"animation-delay"),Se(ce,"animation-play-state")}),(0,c.r)(Ct)}))};be&&(be.addEventListener("webkitAnimationEnd",qe,dt),be.addEventListener("animationend",qe,dt),he=()=>{be.removeEventListener("webkitAnimationEnd",qe,dt),be.removeEventListener("animationend",qe,dt)})})(cn[0])}})(),Tt=!1}),tt=(ce,nt)=>{const Et=Le[0];return void 0===Et||void 0!==Et.offset&&0!==Et.offset?Le=[{offset:0,[ce]:nt},...Le]:Et[ce]=nt,tn};return tn={parentAnimation:it,elements:cn,childAnimations:lr,id:Hn,animationFinish:Ct,from:tt,to:(ce,nt)=>{const Et=Le[Le.length-1];return void 0===Et||void 0!==Et.offset&&1!==Et.offset?Le=[...Le,{offset:1,[ce]:nt}]:Et[ce]=nt,tn},fromTo:(ce,nt,Et)=>tt(ce,nt).to(ce,Et),parent:ce=>(it=ce,tn),play:te,pause:()=>(lr.forEach(ce=>{ce.pause()}),Pi(),tn),stop:()=>{lr.forEach(ce=>{ce.stop()}),De&&(rn(),De=!1),Xe=!1,Ae=!1,jt=!0,we=void 0,gt=void 0,et=void 0,at=0,Ke=!1,Qe=!0,Tt=!1},destroy:ce=>(lr.forEach(nt=>{nt.destroy(ce)}),(ce=>{rn(),ce&&_r()})(ce),cn.length=0,lr.length=0,Le.length=0,Gn.length=0,ar.length=0,De=!1,jt=!0,tn),keyframes:ce=>{const nt=Le!==ce;return Le=ce,nt&&(ce=>{ei?Dr().forEach(nt=>{if(nt.effect.setKeyframes)nt.effect.setKeyframes(ce);else{const Et=new KeyframeEffect(nt.effect.target,ce,nt.effect.getTiming());nt.effect=Et}}):Nt()})(Le),tn},addAnimation:ce=>{if(null!=ce)if(Array.isArray(ce))for(const nt of ce)nt.parent(tn),lr.push(nt);else ce.parent(tn),lr.push(ce);return tn},addElement:ce=>{if(null!=ce)if(1===ce.nodeType)cn.push(ce);else if(ce.length>=0)for(let nt=0;nt<ce.length;nt++)cn.push(ce[nt]);else console.error("Invalid addElement value");return tn},update:Qn,fill:ce=>(qe=ce,Qn(!0),tn),direction:ce=>(Je=ce,Qn(!0),tn),iterations:ce=>(ft=ce,Qn(!0),tn),duration:ce=>(!ei&&0===ce&&(ce=1),he=ce,Qn(!0),tn),easing:ce=>(dt=ce,Qn(!0),tn),delay:ce=>(Ie=ce,Qn(!0),tn),getWebAnimations:Dr,getKeyframes:()=>Le,getFill:Xt,getDirection:Lt,getDelay:At,getIterations:He,getEasing:_e,getDuration:me,afterAddRead:ce=>(Un.push(ce),tn),afterAddWrite:ce=>(tr.push(ce),tn),afterClearStyles:(ce=[])=>{for(const nt of ce)ot[nt]="";return tn},afterStyles:(ce={})=>(ot=ce,tn),afterRemoveClass:ce=>(yt=ut(yt,ce),tn),afterAddClass:ce=>(_t=ut(_t,ce),tn),beforeAddRead:ce=>(Cr.push(ce),tn),beforeAddWrite:ce=>(Pr.push(ce),tn),beforeClearStyles:(ce=[])=>{for(const nt of ce)Be[nt]="";return tn},beforeStyles:(ce={})=>(Be=ce,tn),beforeRemoveClass:ce=>(H=ut(H,ce),tn),beforeAddClass:ce=>(ke=ut(ke,ce),tn),onFinish:Wn,isRunning:()=>0!==at&&!Tt,progressStart:(ce=!1,nt)=>(lr.forEach(Et=>{Et.progressStart(ce,nt)}),Pi(),Xe=ce,De||Sn(),Qn(!1,!0,nt),tn),progressStep:ce=>(lr.forEach(nt=>{nt.progressStep(ce)}),Kn(ce),tn),progressEnd:(ce,nt,Et)=>(Xe=!1,lr.forEach(qt=>{qt.progressEnd(ce,nt,Et)}),void 0!==Et&&(gt=Et),Ke=!1,Qe=!0,0===ce?(we="reverse"===Lt()?"normal":"reverse","reverse"===we&&(Qe=!1),ei?(Qn(),Kn(1-nt)):(et=(1-nt)*me()*-1,Qn(!1,!1))):1===ce&&(ei?(Qn(),Kn(nt)):(et=nt*me()*-1,Qn(!1,!1))),void 0!==ce&&(Wn(()=>{gt=void 0,we=void 0,et=void 0},{oneTimeCallback:!0}),it||te()),tn)}}},5820:(_n,It,L)=>{"use strict";L.d(It,{E:()=>pe,a:()=>c,s:()=>Se});const c=re=>{try{if(re instanceof ge)return re.value;if(!Te()||"string"!=typeof re||""===re)return re;if(re.includes("onload="))return"";const de=document.createDocumentFragment(),Oe=document.createElement("div");de.appendChild(Oe),Oe.innerHTML=re,Fe.forEach(be=>{const Ie=de.querySelectorAll(be);for(let he=Ie.length-1;he>=0;he--){const dt=Ie[he];dt.parentNode?dt.parentNode.removeChild(dt):de.removeChild(dt);const ft=G(dt);for(let qe=0;qe<ft.length;qe++)q(ft[qe])}});const Ge=G(de);for(let be=0;be<Ge.length;be++)q(Ge[be]);const ut=document.createElement("div");ut.appendChild(de);const Pt=ut.querySelector("div");return null!==Pt?Pt.innerHTML:ut.innerHTML}catch(de){return console.error(de),""}},q=re=>{if(re.nodeType&&1!==re.nodeType)return;if(typeof NamedNodeMap<"u"&&!(re.attributes instanceof NamedNodeMap))return void re.remove();for(let Oe=re.attributes.length-1;Oe>=0;Oe--){const Ge=re.attributes.item(Oe),ut=Ge.name;if(!Pe.includes(ut.toLowerCase())){re.removeAttribute(ut);continue}const Pt=Ge.value,be=re[ut];(null!=Pt&&Pt.toLowerCase().includes("javascript:")||null!=be&&be.toLowerCase().includes("javascript:"))&&re.removeAttribute(ut)}const de=G(re);for(let Oe=0;Oe<de.length;Oe++)q(de[Oe])},G=re=>null!=re.children?re.children:re.childNodes,Te=()=>{var re;const de=window,Oe=null===(re=null==de?void 0:de.Ionic)||void 0===re?void 0:re.config;return!Oe||(Oe.get?Oe.get("sanitizerEnabled",!0):!0===Oe.sanitizerEnabled||void 0===Oe.sanitizerEnabled)},Pe=["class","id","href","src","name","slot"],Fe=["script","style","iframe","meta","link","object","embed"];class ge{constructor(de){this.value=de}}const Se=re=>{const de=window,Oe=de.Ionic;if(!Oe||!Oe.config||"Object"===Oe.config.constructor.name)return de.Ionic=de.Ionic||{},de.Ionic.config=Object.assign(Object.assign({},de.Ionic.config),re),de.Ionic.config},pe=!0},4349:(_n,It,L)=>{"use strict";L.d(It,{G:()=>Pe});class q{constructor(ge,Se,Ue,pe,re){this.id=Se,this.name=Ue,this.disableScroll=re,this.priority=1e6*pe+Se,this.ctrl=ge}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ge=this.ctrl.capture(this.name,this.id,this.priority);return ge&&this.disableScroll&&this.ctrl.disableScroll(this.id),ge}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class G{constructor(ge,Se,Ue,pe){this.id=Se,this.disable=Ue,this.disableScroll=pe,this.ctrl=ge}block(){if(this.ctrl){if(this.disable)for(const ge of this.disable)this.ctrl.disableGesture(ge,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ge of this.disable)this.ctrl.enableGesture(ge,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Te="backdrop-no-scroll",Pe=new class c{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ge){var Se;return new q(this,this.newID(),ge.name,null!==(Se=ge.priority)&&void 0!==Se?Se:0,!!ge.disableScroll)}createBlocker(ge={}){return new G(this,this.newID(),ge.disable,!!ge.disableScroll)}start(ge,Se,Ue){return this.canStart(ge)?(this.requestedStart.set(Se,Ue),!0):(this.requestedStart.delete(Se),!1)}capture(ge,Se,Ue){if(!this.start(ge,Se,Ue))return!1;const pe=this.requestedStart;let re=-1e4;if(pe.forEach(de=>{re=Math.max(re,de)}),re===Ue){this.capturedId=Se,pe.clear();const de=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ge}});return document.dispatchEvent(de),!0}return pe.delete(Se),!1}release(ge){this.requestedStart.delete(ge),this.capturedId===ge&&(this.capturedId=void 0)}disableGesture(ge,Se){let Ue=this.disabledGestures.get(ge);void 0===Ue&&(Ue=new Set,this.disabledGestures.set(ge,Ue)),Ue.add(Se)}enableGesture(ge,Se){const Ue=this.disabledGestures.get(ge);void 0!==Ue&&Ue.delete(Se)}disableScroll(ge){this.disabledScroll.add(ge),1===this.disabledScroll.size&&document.body.classList.add(Te)}enableScroll(ge){this.disabledScroll.delete(ge),0===this.disabledScroll.size&&document.body.classList.remove(Te)}canStart(ge){return!(void 0!==this.capturedId||this.isDisabled(ge))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ge){const Se=this.disabledGestures.get(ge);return!!(Se&&Se.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(_n,It,L)=>{"use strict";L.r(It),L.d(It,{MENU_BACK_BUTTON_PRIORITY:()=>Pe,OVERLAY_BACK_BUTTON_PRIORITY:()=>Te,blockHardwareBackButton:()=>q,startHardwareBackButton:()=>G});var c=L(5861);const q=()=>{document.addEventListener("backbutton",()=>{})},G=()=>{const Fe=document;let ge=!1;Fe.addEventListener("backbutton",()=>{if(ge)return;let Se=0,Ue=[];const pe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Oe,Ge){Ue.push({priority:Oe,handler:Ge,id:Se++})}}});Fe.dispatchEvent(pe);const re=function(){var Oe=(0,c.Z)(function*(Ge){try{if(null!=Ge&&Ge.handler){const ut=Ge.handler(de);null!=ut&&(yield ut)}}catch(ut){console.error(ut)}});return function(ut){return Oe.apply(this,arguments)}}(),de=()=>{if(Ue.length>0){let Oe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ue.forEach(Ge=>{Ge.priority>=Oe.priority&&(Oe=Ge)}),ge=!0,Ue=Ue.filter(Ge=>Ge.id!==Oe.id),re(Oe).then(()=>ge=!1)}};de()})},Te=100,Pe=99},5730:(_n,It,L)=>{"use strict";L.d(It,{a:()=>ge,b:()=>Se,c:()=>G,d:()=>Ge,e:()=>ut,f:()=>Oe,g:()=>Ue,h:()=>ft,i:()=>Fe,j:()=>Te,k:()=>de,l:()=>Pt,m:()=>re,n:()=>be,o:()=>dt,p:()=>he,q:()=>qe,r:()=>pe,s:()=>Je,t:()=>c,u:()=>Ie});const c=(Le,ke=0)=>new Promise(H=>{q(Le,ke,H)}),q=(Le,ke=0,H)=>{let De,it;const Be={passive:!0},yt=()=>{De&&De()},ot=at=>{(void 0===at||Le===at.target)&&(yt(),H(at))};return Le&&(Le.addEventListener("webkitTransitionEnd",ot,Be),Le.addEventListener("transitionend",ot,Be),it=setTimeout(ot,ke+500),De=()=>{it&&(clearTimeout(it),it=void 0),Le.removeEventListener("webkitTransitionEnd",ot,Be),Le.removeEventListener("transitionend",ot,Be)}),yt},G=(Le,ke)=>{Le.componentOnReady?Le.componentOnReady().then(H=>ke(H)):pe(()=>ke(Le))},Te=(Le,ke=[])=>{const H={};return ke.forEach(De=>{Le.hasAttribute(De)&&(null!==Le.getAttribute(De)&&(H[De]=Le.getAttribute(De)),Le.removeAttribute(De))}),H},Pe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Fe=(Le,ke)=>{let H=Pe;return ke&&ke.length>0&&(H=H.filter(De=>!ke.includes(De))),Te(Le,H)},ge=(Le,ke,H,De)=>{var it;if(typeof window<"u"){const Be=window,_t=null===(it=null==Be?void 0:Be.Ionic)||void 0===it?void 0:it.config;if(_t){const yt=_t.get("_ael");if(yt)return yt(Le,ke,H,De);if(_t._ael)return _t._ael(Le,ke,H,De)}}return Le.addEventListener(ke,H,De)},Se=(Le,ke,H,De)=>{var it;if(typeof window<"u"){const Be=window,_t=null===(it=null==Be?void 0:Be.Ionic)||void 0===it?void 0:it.config;if(_t){const yt=_t.get("_rel");if(yt)return yt(Le,ke,H,De);if(_t._rel)return _t._rel(Le,ke,H,De)}}return Le.removeEventListener(ke,H,De)},Ue=(Le,ke=Le)=>Le.shadowRoot||ke,pe=Le=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Le):"function"==typeof requestAnimationFrame?requestAnimationFrame(Le):setTimeout(Le),re=Le=>!!Le.shadowRoot&&!!Le.attachShadow,de=Le=>{const ke=Le.closest("ion-item");return ke?ke.querySelector("ion-label"):null},Oe=Le=>{if(Le.focus(),Le.classList.contains("ion-focusable")){const ke=Le.closest("ion-app");ke&&ke.setFocus([Le])}},Ge=(Le,ke)=>{let H;const De=Le.getAttribute("aria-labelledby"),it=Le.id;let Be=null!==De&&""!==De.trim()?De:ke+"-lbl",_t=null!==De&&""!==De.trim()?document.getElementById(De):de(Le);return _t?(null===De&&(_t.id=Be),H=_t.textContent,_t.setAttribute("aria-hidden","true")):""!==it.trim()&&(_t=document.querySelector(`label[for="${it}"]`),_t&&(""!==_t.id?Be=_t.id:_t.id=Be=`${it}-lbl`,H=_t.textContent)),{label:_t,labelId:Be,labelText:H}},ut=(Le,ke,H,De,it)=>{if(Le||re(ke)){let Be=ke.querySelector("input.aux-input");Be||(Be=ke.ownerDocument.createElement("input"),Be.type="hidden",Be.classList.add("aux-input"),ke.appendChild(Be)),Be.disabled=it,Be.name=H,Be.value=De||""}},Pt=(Le,ke,H)=>Math.max(Le,Math.min(ke,H)),be=(Le,ke)=>{if(!Le){const H="ASSERT: "+ke;throw console.error(H),new Error(H)}},Ie=Le=>Le.timeStamp||Date.now(),he=Le=>{if(Le){const ke=Le.changedTouches;if(ke&&ke.length>0){const H=ke[0];return{x:H.clientX,y:H.clientY}}if(void 0!==Le.pageX)return{x:Le.pageX,y:Le.pageY}}return{x:0,y:0}},dt=Le=>{const ke="rtl"===document.dir;switch(Le){case"start":return ke;case"end":return!ke;default:throw new Error(`"${Le}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ft=(Le,ke)=>{const H=Le._original||Le;return{_original:Le,emit:qe(H.emit.bind(H),ke)}},qe=(Le,ke=0)=>{let H;return(...De)=>{clearTimeout(H),H=setTimeout(Le,ke,...De)}},Je=(Le,ke)=>{if(null!=Le||(Le={}),null!=ke||(ke={}),Le===ke)return!0;const H=Object.keys(Le);if(H.length!==Object.keys(ke).length)return!1;for(const De of H)if(!(De in ke)||Le[De]!==ke[De])return!1;return!0}},1843:(_n,It,L)=>{"use strict";L.d(It,{L:()=>Te,a:()=>Pe,b:()=>Fe,c:()=>ge,d:()=>Se,e:()=>ke,g:()=>it,l:()=>Je,s:()=>H,t:()=>re});var c=L(5861),q=L(1308),G=L(5730);const Te="ionViewWillEnter",Pe="ionViewDidEnter",Fe="ionViewWillLeave",ge="ionViewDidLeave",Se="ionViewWillUnload",re=Be=>new Promise((_t,yt)=>{(0,q.c)(()=>{de(Be),Oe(Be).then(ot=>{ot.animation&&ot.animation.destroy(),Ge(Be),_t(ot)},ot=>{Ge(Be),yt(ot)})})}),de=Be=>{const _t=Be.enteringEl,yt=Be.leavingEl;De(_t,yt,Be.direction),Be.showGoBack?_t.classList.add("can-go-back"):_t.classList.remove("can-go-back"),H(_t,!1),_t.style.setProperty("pointer-events","none"),yt&&(H(yt,!1),yt.style.setProperty("pointer-events","none"))},Oe=function(){var Be=(0,c.Z)(function*(_t){const yt=yield ut(_t);return yt&&q.B.isBrowser?Pt(yt,_t):be(_t)});return function(yt){return Be.apply(this,arguments)}}(),Ge=Be=>{const _t=Be.enteringEl,yt=Be.leavingEl;_t.classList.remove("ion-page-invisible"),_t.style.removeProperty("pointer-events"),void 0!==yt&&(yt.classList.remove("ion-page-invisible"),yt.style.removeProperty("pointer-events"))},ut=function(){var Be=(0,c.Z)(function*(_t){return _t.leavingEl&&_t.animated&&0!==_t.duration?_t.animationBuilder?_t.animationBuilder:"ios"===_t.mode?(yield Promise.resolve().then(L.bind(L,6439))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,7838))).mdTransitionAnimation:void 0});return function(yt){return Be.apply(this,arguments)}}(),Pt=function(){var Be=(0,c.Z)(function*(_t,yt){yield Ie(yt,!0);const ot=_t(yt.baseEl,yt);ft(yt.enteringEl,yt.leavingEl);const at=yield dt(ot,yt);return yt.progressCallback&&yt.progressCallback(void 0),at&&qe(yt.enteringEl,yt.leavingEl),{hasCompleted:at,animation:ot}});return function(yt,ot){return Be.apply(this,arguments)}}(),be=function(){var Be=(0,c.Z)(function*(_t){const yt=_t.enteringEl,ot=_t.leavingEl;return yield Ie(_t,!1),ft(yt,ot),qe(yt,ot),{hasCompleted:!0}});return function(yt){return Be.apply(this,arguments)}}(),Ie=function(){var Be=(0,c.Z)(function*(_t,yt){const at=(void 0!==_t.deepWait?_t.deepWait:yt)?[ke(_t.enteringEl),ke(_t.leavingEl)]:[Le(_t.enteringEl),Le(_t.leavingEl)];yield Promise.all(at),yield he(_t.viewIsReady,_t.enteringEl)});return function(yt,ot){return Be.apply(this,arguments)}}(),he=function(){var Be=(0,c.Z)(function*(_t,yt){_t&&(yield _t(yt))});return function(yt,ot){return Be.apply(this,arguments)}}(),dt=(Be,_t)=>{const yt=_t.progressCallback,ot=new Promise(at=>{Be.onFinish(Xe=>at(1===Xe))});return yt?(Be.progressStart(!0),yt(Be)):Be.play(),ot},ft=(Be,_t)=>{Je(_t,Fe),Je(Be,Te)},qe=(Be,_t)=>{Je(Be,Pe),Je(_t,ge)},Je=(Be,_t)=>{if(Be){const yt=new CustomEvent(_t,{bubbles:!1,cancelable:!1});Be.dispatchEvent(yt)}},Le=Be=>Be?new Promise(_t=>(0,G.c)(Be,_t)):Promise.resolve(),ke=function(){var Be=(0,c.Z)(function*(_t){const yt=_t;if(yt){if(null!=yt.componentOnReady){if(null!=(yield yt.componentOnReady()))return}else if(null!=yt.__registerHost)return void(yield new Promise(at=>(0,G.r)(at)));yield Promise.all(Array.from(yt.children).map(ke))}});return function(yt){return Be.apply(this,arguments)}}(),H=(Be,_t)=>{_t?(Be.setAttribute("aria-hidden","true"),Be.classList.add("ion-page-hidden")):(Be.hidden=!1,Be.removeAttribute("aria-hidden"),Be.classList.remove("ion-page-hidden"))},De=(Be,_t,yt)=>{void 0!==Be&&(Be.style.zIndex="back"===yt?"99":"101"),void 0!==_t&&(_t.style.zIndex="100")},it=Be=>Be.classList.contains("ion-page")?Be:Be.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Be},6369:(_n,It,L)=>{"use strict";L.d(It,{m:()=>re});var c=L(5861),q=L(7593),G=L(5730),Te=L(5179),Pe=L(181);const Fe=de=>(0,Pe.c)().duration(de?400:300),ge=de=>{let Oe,Ge;const ut=de.width+8,Pt=(0,Pe.c)(),be=(0,Pe.c)();de.isEndSide?(Oe=ut+"px",Ge="0px"):(Oe=-ut+"px",Ge="0px"),Pt.addElement(de.menuInnerEl).fromTo("transform",`translateX(${Oe})`,`translateX(${Ge})`);const he="ios"===(0,Te.b)(de),dt=he?.2:.25;return be.addElement(de.backdropEl).fromTo("opacity",.01,dt),Fe(he).addAnimation([Pt,be])},Se=de=>{let Oe,Ge;const ut=(0,Te.b)(de),Pt=de.width;de.isEndSide?(Oe=-Pt+"px",Ge=Pt+"px"):(Oe=Pt+"px",Ge=-Pt+"px");const be=(0,Pe.c)().addElement(de.menuInnerEl).fromTo("transform",`translateX(${Ge})`,"translateX(0px)"),Ie=(0,Pe.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${Oe})`),he=(0,Pe.c)().addElement(de.backdropEl).fromTo("opacity",.01,.32);return Fe("ios"===ut).addAnimation([be,Ie,he])},Ue=de=>{const Oe=(0,Te.b)(de),Ge=de.width*(de.isEndSide?-1:1)+"px",ut=(0,Pe.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`);return Fe("ios"===Oe).addAnimation(ut)},re=(()=>{const de=new Map,Oe=[],Ge=function(){var Me=(0,c.Z)(function*(we){const gt=yield ft(we);return!!gt&&gt.open()});return function(gt){return Me.apply(this,arguments)}}(),ut=function(){var Me=(0,c.Z)(function*(we){const gt=yield void 0!==we?ft(we):qe();return void 0!==gt&&gt.close()});return function(gt){return Me.apply(this,arguments)}}(),Pt=function(){var Me=(0,c.Z)(function*(we){const gt=yield ft(we);return!!gt&&gt.toggle()});return function(gt){return Me.apply(this,arguments)}}(),be=function(){var Me=(0,c.Z)(function*(we,gt){const et=yield ft(gt);return et&&(et.disabled=!we),et});return function(gt,et){return Me.apply(this,arguments)}}(),Ie=function(){var Me=(0,c.Z)(function*(we,gt){const et=yield ft(gt);return et&&(et.swipeGesture=we),et});return function(gt,et){return Me.apply(this,arguments)}}(),he=function(){var Me=(0,c.Z)(function*(we){if(null!=we){const gt=yield ft(we);return void 0!==gt&&gt.isOpen()}return void 0!==(yield qe())});return function(gt){return Me.apply(this,arguments)}}(),dt=function(){var Me=(0,c.Z)(function*(we){const gt=yield ft(we);return!!gt&&!gt.disabled});return function(gt){return Me.apply(this,arguments)}}(),ft=function(){var Me=(0,c.Z)(function*(we){return yield Ae(),"start"===we||"end"===we?Xe(Qe=>Qe.side===we&&!Qe.disabled)||Xe(Qe=>Qe.side===we):null!=we?Xe(et=>et.menuId===we):Xe(et=>!et.disabled)||(Oe.length>0?Oe[0].el:void 0)});return function(gt){return Me.apply(this,arguments)}}(),qe=function(){var Me=(0,c.Z)(function*(){return yield Ae(),yt()});return function(){return Me.apply(this,arguments)}}(),Je=function(){var Me=(0,c.Z)(function*(){return yield Ae(),ot()});return function(){return Me.apply(this,arguments)}}(),Le=function(){var Me=(0,c.Z)(function*(){return yield Ae(),at()});return function(){return Me.apply(this,arguments)}}(),ke=(Me,we)=>{de.set(Me,we)},it=Me=>{const we=Me.side;Oe.filter(gt=>gt.side===we&&gt!==Me).forEach(gt=>gt.disabled=!0)},Be=function(){var Me=(0,c.Z)(function*(we,gt,et){if(at())return!1;if(gt){const Qe=yield qe();Qe&&we.el!==Qe&&(yield Qe.setOpen(!1,!1))}return we._setOpen(gt,et)});return function(gt,et,Qe){return Me.apply(this,arguments)}}(),yt=()=>Xe(Me=>Me._isOpen),ot=()=>Oe.map(Me=>Me.el),at=()=>Oe.some(Me=>Me.isAnimating),Xe=Me=>{const we=Oe.find(Me);if(void 0!==we)return we.el},Ae=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Me=>new Promise(we=>(0,G.c)(Me,we))));return ke("reveal",Ue),ke("push",Se),ke("overlay",ge),typeof document<"u"&&document.addEventListener("ionBackButton",Me=>{const we=yt();we&&Me.detail.register(q.MENU_BACK_BUTTON_PRIORITY,()=>we.close())}),{registerAnimation:ke,get:ft,getMenus:Je,getOpen:qe,isEnabled:dt,swipeGesture:Ie,isAnimating:Le,isOpen:he,enable:be,toggle:Pt,close:ut,open:Ge,_getOpenSync:yt,_createAnimation:(Me,we)=>{const gt=de.get(Me);if(!gt)throw new Error("animation not registered");return gt(we)},_register:Me=>{Oe.indexOf(Me)<0&&(Me.disabled||it(Me),Oe.push(Me))},_unregister:Me=>{const we=Oe.indexOf(Me);we>-1&&Oe.splice(we,1)},_setOpen:Be,_setActiveMenu:it}})()},3457:(_n,It,L)=>{"use strict";L.d(It,{w:()=>c});const c=typeof window<"u"?window:void 0},1898:(_n,It,L)=>{"use strict";L.r(It),L.d(It,{GESTURE_CONTROLLER:()=>c.G,createGesture:()=>Ue});var c=L(4349);const q=(Oe,Ge,ut,Pt)=>{const be=G(Oe)?{capture:!!Pt.capture,passive:!!Pt.passive}:!!Pt.capture;let Ie,he;return Oe.__zone_symbol__addEventListener?(Ie="__zone_symbol__addEventListener",he="__zone_symbol__removeEventListener"):(Ie="addEventListener",he="removeEventListener"),Oe[Ie](Ge,ut,be),()=>{Oe[he](Ge,ut,be)}},G=Oe=>{if(void 0===Te)try{const Ge=Object.defineProperty({},"passive",{get:()=>{Te=!0}});Oe.addEventListener("optsTest",()=>{},Ge)}catch(Ge){Te=!1}return!!Te};let Te;const ge=Oe=>Oe instanceof Document?Oe:Oe.ownerDocument,Ue=Oe=>{let Ge=!1,ut=!1,Pt=!0,be=!1;const Ie=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Oe),he=Ie.canStart,dt=Ie.onWillStart,ft=Ie.onStart,qe=Ie.onEnd,Je=Ie.notCaptured,Le=Ie.onMove,ke=Ie.threshold,H=Ie.passive,De=Ie.blurOnStart,it={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Be=((Oe,Ge,ut)=>{const Pt=ut*(Math.PI/180),be="x"===Oe,Ie=Math.cos(Pt),he=Ge*Ge;let dt=0,ft=0,qe=!1,Je=0;return{start(Le,ke){dt=Le,ft=ke,Je=0,qe=!0},detect(Le,ke){if(!qe)return!1;const H=Le-dt,De=ke-ft,it=H*H+De*De;if(it<he)return!1;const Be=Math.sqrt(it),_t=(be?H:De)/Be;return Je=_t>Ie?1:_t<-Ie?-1:0,qe=!1,!0},isGesture:()=>0!==Je,getDirection:()=>Je}})(Ie.direction,Ie.threshold,Ie.maxAngle),_t=c.G.createGesture({name:Oe.gestureName,priority:Oe.gesturePriority,disableScroll:Oe.disableScroll}),at=()=>{Ge&&(be=!1,Le&&Le(it))},Xe=()=>!!_t.capture()&&(Ge=!0,Pt=!1,it.startX=it.currentX,it.startY=it.currentY,it.startTime=it.currentTime,dt?dt(it).then(Me):Me(),!0),Me=()=>{De&&(()=>{if(typeof document<"u"){const Ke=document.activeElement;null!=Ke&&Ke.blur&&Ke.blur()}})(),ft&&ft(it),Pt=!0},we=()=>{Ge=!1,ut=!1,be=!1,Pt=!0,_t.release()},gt=Ke=>{const jt=Ge,Jt=Pt;if(we(),Jt){if(pe(it,Ke),jt)return void(qe&&qe(it));Je&&Je(it)}},et=((Oe,Ge,ut,Pt,be)=>{let Ie,he,dt,ft,qe,Je,Le,ke=0;const H=Ae=>{ke=Date.now()+2e3,Ge(Ae)&&(!he&&ut&&(he=q(Oe,"touchmove",ut,be)),dt||(dt=q(Ae.target,"touchend",it,be)),ft||(ft=q(Ae.target,"touchcancel",it,be)))},De=Ae=>{ke>Date.now()||Ge(Ae)&&(!Je&&ut&&(Je=q(ge(Oe),"mousemove",ut,be)),Le||(Le=q(ge(Oe),"mouseup",Be,be)))},it=Ae=>{_t(),Pt&&Pt(Ae)},Be=Ae=>{yt(),Pt&&Pt(Ae)},_t=()=>{he&&he(),dt&&dt(),ft&&ft(),he=dt=ft=void 0},yt=()=>{Je&&Je(),Le&&Le(),Je=Le=void 0},ot=()=>{_t(),yt()},at=(Ae=!0)=>{Ae?(Ie||(Ie=q(Oe,"touchstart",H,be)),qe||(qe=q(Oe,"mousedown",De,be))):(Ie&&Ie(),qe&&qe(),Ie=qe=void 0,ot())};return{enable:at,stop:ot,destroy:()=>{at(!1),Pt=ut=Ge=void 0}}})(Ie.el,Ke=>{const jt=de(Ke);return!(ut||!Pt||(re(Ke,it),it.startX=it.currentX,it.startY=it.currentY,it.startTime=it.currentTime=jt,it.velocityX=it.velocityY=it.deltaX=it.deltaY=0,it.event=Ke,he&&!1===he(it))||(_t.release(),!_t.start()))&&(ut=!0,0===ke?Xe():(Be.start(it.startX,it.startY),!0))},Ke=>{Ge?!be&&Pt&&(be=!0,pe(it,Ke),requestAnimationFrame(at)):(pe(it,Ke),Be.detect(it.currentX,it.currentY)&&(!Be.isGesture()||!Xe())&&Qe())},gt,{capture:!1,passive:H}),Qe=()=>{we(),et.stop(),Je&&Je(it)};return{enable(Ke=!0){Ke||(Ge&&gt(void 0),we()),et.enable(Ke)},destroy(){_t.destroy(),et.destroy()}}},pe=(Oe,Ge)=>{if(!Ge)return;const ut=Oe.currentX,Pt=Oe.currentY,be=Oe.currentTime;re(Ge,Oe);const Ie=Oe.currentX,he=Oe.currentY,ft=(Oe.currentTime=de(Ge))-be;if(ft>0&&ft<100){const Je=(he-Pt)/ft;Oe.velocityX=(Ie-ut)/ft*.7+.3*Oe.velocityX,Oe.velocityY=.7*Je+.3*Oe.velocityY}Oe.deltaX=Ie-Oe.startX,Oe.deltaY=he-Oe.startY,Oe.event=Ge},re=(Oe,Ge)=>{let ut=0,Pt=0;if(Oe){const be=Oe.changedTouches;if(be&&be.length>0){const Ie=be[0];ut=Ie.clientX,Pt=Ie.clientY}else void 0!==Oe.pageX&&(ut=Oe.pageX,Pt=Oe.pageY)}Ge.currentX=ut,Ge.currentY=Pt},de=Oe=>Oe.timeStamp||Date.now()},1308:(_n,It,L)=>{"use strict";L.d(It,{B:()=>Wi,H:()=>cn,a:()=>Qe,b:()=>je,c:()=>Tr,e:()=>ai,f:()=>Xr,g:()=>Ke,h:()=>Gn,i:()=>Dn,j:()=>Lt,k:()=>Ne,p:()=>Pt,r:()=>un,s:()=>Ge});var c=L(5861);let G,Te,Pe,Fe=!1,ge=!1,Se=!1,Ue=!1,pe=!1;const re=typeof window<"u"?window:{},de=re.document||{head:{}},Oe={$flags$:0,$resourcesUrl$:"",jmp:te=>te(),raf:te=>requestAnimationFrame(te),ael:(te,Ee,tt,bt)=>te.addEventListener(Ee,tt,bt),rel:(te,Ee,tt,bt)=>te.removeEventListener(Ee,tt,bt),ce:(te,Ee)=>new CustomEvent(te,Ee)},Ge=te=>{Object.assign(Oe,te)},Pt=te=>Promise.resolve(te),be=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(te){}return!1})(),Ie=(te,Ee,tt,bt)=>{tt&&tt.map(([Ht,ce,nt])=>{const Et=dt(te,Ht),qt=he(Ee,nt),Kt=ft(Ht);Oe.ael(Et,ce,qt,Kt),(Ee.$rmListeners$=Ee.$rmListeners$||[]).push(()=>Oe.rel(Et,ce,qt,Kt))})},he=(te,Ee)=>tt=>{try{256&te.$flags$?te.$lazyInstance$[Ee](tt):(te.$queuedListeners$=te.$queuedListeners$||[]).push([Ee,tt])}catch(bt){Pn(bt)}},dt=(te,Ee)=>4&Ee?de:8&Ee?re:16&Ee?de.body:te,ft=te=>0!=(2&te),H="s-id",De="sty-id",_t="http://www.w3.org/1999/xlink",at=new WeakMap,Xe=(te,Ee,tt)=>{let bt=ni.get(te);be&&tt?(bt=bt||new CSSStyleSheet,"string"==typeof bt?bt=Ee:bt.replaceSync(Ee)):bt=Ee,ni.set(te,bt)},Ae=(te,Ee,tt,bt)=>{let Ht=we(Ee,tt);const ce=ni.get(Ht);if(te=11===te.nodeType?te:de,ce)if("string"==typeof ce){let Et,nt=at.get(te=te.head||te);nt||at.set(te,nt=new Set),nt.has(Ht)||(te.host&&(Et=te.querySelector(`[${De}="${Ht}"]`))?Et.innerHTML=ce:(Et=de.createElement("style"),Et.innerHTML=ce,te.insertBefore(Et,te.querySelector("link"))),nt&&nt.add(Ht))}else te.adoptedStyleSheets.includes(ce)||(te.adoptedStyleSheets=[...te.adoptedStyleSheets,ce]);return Ht},we=(te,Ee)=>"sc-"+(Ee&&32&te.$flags$?te.$tagName$+"-"+Ee:te.$tagName$),gt=te=>te.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qe=te=>mi.push(te),Ke=te=>Nt(te).$modeName$,jt={},Hn=te=>"object"==(te=typeof te)||"function"===te,Gn=(te,Ee,...tt)=>{let bt=null,Ht=null,ce=null,nt=!1,Et=!1;const qt=[],Kt=kn=>{for(let qn=0;qn<kn.length;qn++)bt=kn[qn],Array.isArray(bt)?Kt(bt):null!=bt&&"boolean"!=typeof bt&&((nt="function"!=typeof te&&!Hn(bt))&&(bt=String(bt)),nt&&Et?qt[qt.length-1].$text$+=bt:qt.push(nt?ar(null,bt):bt),Et=nt)};if(Kt(tt),Ee){Ee.key&&(Ht=Ee.key),Ee.name&&(ce=Ee.name);{const kn=Ee.className||Ee.class;kn&&(Ee.class="object"!=typeof kn?kn:Object.keys(kn).filter(qn=>kn[qn]).join(" "))}}if("function"==typeof te)return te(null===Ee?{}:Ee,qt,hr);const pn=ar(te,null);return pn.$attrs$=Ee,qt.length>0&&(pn.$children$=qt),pn.$key$=Ht,pn.$name$=ce,pn},ar=(te,Ee)=>({$flags$:0,$tag$:te,$text$:Ee,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),cn={},hr={forEach:(te,Ee)=>te.map(Cr).forEach(Ee),map:(te,Ee)=>te.map(Cr).map(Ee).map(Pr)},Cr=te=>({vattrs:te.$attrs$,vchildren:te.$children$,vkey:te.$key$,vname:te.$name$,vtag:te.$tag$,vtext:te.$text$}),Pr=te=>{if("function"==typeof te.vtag){const tt=Object.assign({},te.vattrs);return te.vkey&&(tt.key=te.vkey),te.vname&&(tt.name=te.vname),Gn(te.vtag,tt,...te.vchildren||[])}const Ee=ar(te.vtag,te.vtext);return Ee.$attrs$=te.vattrs,Ee.$children$=te.vchildren,Ee.$key$=te.vkey,Ee.$name$=te.vname,Ee},Un=(te,Ee,tt,bt,Ht,ce)=>{if(tt!==bt){let nt=Kn(te,Ee),Et=Ee.toLowerCase();if("class"===Ee){const qt=te.classList,Kt=nn(tt),pn=nn(bt);qt.remove(...Kt.filter(kn=>kn&&!pn.includes(kn))),qt.add(...pn.filter(kn=>kn&&!Kt.includes(kn)))}else if("style"===Ee){for(const qt in tt)(!bt||null==bt[qt])&&(qt.includes("-")?te.style.removeProperty(qt):te.style[qt]="");for(const qt in bt)(!tt||bt[qt]!==tt[qt])&&(qt.includes("-")?te.style.setProperty(qt,bt[qt]):te.style[qt]=bt[qt])}else if("key"!==Ee)if("ref"===Ee)bt&&bt(te);else if(nt||"o"!==Ee[0]||"n"!==Ee[1]){const qt=Hn(bt);if((nt||qt&&null!==bt)&&!Ht)try{if(te.tagName.includes("-"))te[Ee]=bt;else{const pn=null==bt?"":bt;"list"===Ee?nt=!1:(null==tt||te[Ee]!=pn)&&(te[Ee]=pn)}}catch(pn){}let Kt=!1;Et!==(Et=Et.replace(/^xlink\:?/,""))&&(Ee=Et,Kt=!0),null==bt||!1===bt?(!1!==bt||""===te.getAttribute(Ee))&&(Kt?te.removeAttributeNS(_t,Ee):te.removeAttribute(Ee)):(!nt||4&ce||Ht)&&!qt&&(bt=!0===bt?"":bt,Kt?te.setAttributeNS(_t,Ee,bt):te.setAttribute(Ee,bt))}else Ee="-"===Ee[2]?Ee.slice(3):Kn(re,Et)?Et.slice(2):Et[2]+Ee.slice(3),tt&&Oe.rel(te,Ee,tt,!1),bt&&Oe.ael(te,Ee,bt,!1)}},tr=/\s/,nn=te=>te?te.split(tr):[],ui=(te,Ee,tt,bt)=>{const Ht=11===Ee.$elm$.nodeType&&Ee.$elm$.host?Ee.$elm$.host:Ee.$elm$,ce=te&&te.$attrs$||jt,nt=Ee.$attrs$||jt;for(bt in ce)bt in nt||Un(Ht,bt,ce[bt],void 0,tt,Ee.$flags$);for(bt in nt)Un(Ht,bt,ce[bt],nt[bt],tt,Ee.$flags$)},ei=(te,Ee,tt,bt)=>{const Ht=Ee.$children$[tt];let nt,Et,qt,ce=0;if(Fe||(Se=!0,"slot"===Ht.$tag$&&(G&&bt.classList.add(G+"-s"),Ht.$flags$|=Ht.$children$?2:1)),null!==Ht.$text$)nt=Ht.$elm$=de.createTextNode(Ht.$text$);else if(1&Ht.$flags$)nt=Ht.$elm$=de.createTextNode("");else{if(Ue||(Ue="svg"===Ht.$tag$),nt=Ht.$elm$=de.createElementNS(Ue?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ht.$flags$?"slot-fb":Ht.$tag$),Ue&&"foreignObject"===Ht.$tag$&&(Ue=!1),ui(null,Ht,Ue),(te=>null!=te)(G)&&nt["s-si"]!==G&&nt.classList.add(nt["s-si"]=G),Ht.$children$)for(ce=0;ce<Ht.$children$.length;++ce)Et=ei(te,Ht,ce,nt),Et&&nt.appendChild(Et);"svg"===Ht.$tag$?Ue=!1:"foreignObject"===nt.tagName&&(Ue=!0)}return nt["s-hn"]=Pe,3&Ht.$flags$&&(nt["s-sr"]=!0,nt["s-cr"]=Te,nt["s-sn"]=Ht.$name$||"",qt=te&&te.$children$&&te.$children$[tt],qt&&qt.$tag$===Ht.$tag$&&te.$elm$&&Nr(te.$elm$,!1)),nt},Nr=(te,Ee)=>{Oe.$flags$|=1;const tt=te.childNodes;for(let bt=tt.length-1;bt>=0;bt--){const Ht=tt[bt];Ht["s-hn"]!==Pe&&Ht["s-ol"]&&(Wn(Ht).insertBefore(Ht,mn(Ht)),Ht["s-ol"].remove(),Ht["s-ol"]=void 0,Se=!0),Ee&&Nr(Ht,Ee)}Oe.$flags$&=-2},Dr=(te,Ee,tt,bt,Ht,ce)=>{let Et,nt=te["s-cr"]&&te["s-cr"].parentNode||te;for(nt.shadowRoot&&nt.tagName===Pe&&(nt=nt.shadowRoot);Ht<=ce;++Ht)bt[Ht]&&(Et=ei(null,tt,Ht,te),Et&&(bt[Ht].$elm$=Et,nt.insertBefore(Et,mn(Ee))))},Fr=(te,Ee,tt,bt,Ht)=>{for(;Ee<=tt;++Ee)(bt=te[Ee])&&(Ht=bt.$elm$,xr(bt),ge=!0,Ht["s-ol"]?Ht["s-ol"].remove():Nr(Ht,!0),Ht.remove())},Cn=(te,Ee)=>te.$tag$===Ee.$tag$&&("slot"===te.$tag$?te.$name$===Ee.$name$:te.$key$===Ee.$key$),mn=te=>te&&te["s-ol"]||te,Wn=te=>(te["s-ol"]?te["s-ol"]:te).parentNode,Lr=(te,Ee)=>{const tt=Ee.$elm$=te.$elm$,bt=te.$children$,Ht=Ee.$children$,ce=Ee.$tag$,nt=Ee.$text$;let Et;null===nt?(Ue="svg"===ce||"foreignObject"!==ce&&Ue,"slot"===ce||ui(te,Ee,Ue),null!==bt&&null!==Ht?((te,Ee,tt,bt)=>{let mr,Bi,Ht=0,ce=0,nt=0,Et=0,qt=Ee.length-1,Kt=Ee[0],pn=Ee[qt],kn=bt.length-1,qn=bt[0],Vr=bt[kn];for(;Ht<=qt&&ce<=kn;)if(null==Kt)Kt=Ee[++Ht];else if(null==pn)pn=Ee[--qt];else if(null==qn)qn=bt[++ce];else if(null==Vr)Vr=bt[--kn];else if(Cn(Kt,qn))Lr(Kt,qn),Kt=Ee[++Ht],qn=bt[++ce];else if(Cn(pn,Vr))Lr(pn,Vr),pn=Ee[--qt],Vr=bt[--kn];else if(Cn(Kt,Vr))("slot"===Kt.$tag$||"slot"===Vr.$tag$)&&Nr(Kt.$elm$.parentNode,!1),Lr(Kt,Vr),te.insertBefore(Kt.$elm$,pn.$elm$.nextSibling),Kt=Ee[++Ht],Vr=bt[--kn];else if(Cn(pn,qn))("slot"===Kt.$tag$||"slot"===Vr.$tag$)&&Nr(pn.$elm$.parentNode,!1),Lr(pn,qn),te.insertBefore(pn.$elm$,Kt.$elm$),pn=Ee[--qt],qn=bt[++ce];else{for(nt=-1,Et=Ht;Et<=qt;++Et)if(Ee[Et]&&null!==Ee[Et].$key$&&Ee[Et].$key$===qn.$key$){nt=Et;break}nt>=0?(Bi=Ee[nt],Bi.$tag$!==qn.$tag$?mr=ei(Ee&&Ee[ce],tt,nt,te):(Lr(Bi,qn),Ee[nt]=void 0,mr=Bi.$elm$),qn=bt[++ce]):(mr=ei(Ee&&Ee[ce],tt,ce,te),qn=bt[++ce]),mr&&Wn(Kt.$elm$).insertBefore(mr,mn(Kt.$elm$))}Ht>qt?Dr(te,null==bt[kn+1]?null:bt[kn+1].$elm$,tt,bt,ce,kn):ce>kn&&Fr(Ee,Ht,qt)})(tt,bt,Ee,Ht):null!==Ht?(null!==te.$text$&&(tt.textContent=""),Dr(tt,null,Ee,Ht,0,Ht.length-1)):null!==bt&&Fr(bt,0,bt.length-1),Ue&&"svg"===ce&&(Ue=!1)):(Et=tt["s-cr"])?Et.parentNode.textContent=nt:te.$text$!==nt&&(tt.data=nt)},rn=te=>{const Ee=te.childNodes;let tt,bt,Ht,ce,nt,Et;for(bt=0,Ht=Ee.length;bt<Ht;bt++)if(tt=Ee[bt],1===tt.nodeType){if(tt["s-sr"])for(nt=tt["s-sn"],tt.hidden=!1,ce=0;ce<Ht;ce++)if(Et=Ee[ce].nodeType,Ee[ce]["s-hn"]!==tt["s-hn"]||""!==nt){if(1===Et&&nt===Ee[ce].getAttribute("slot")){tt.hidden=!0;break}}else if(1===Et||3===Et&&""!==Ee[ce].textContent.trim()){tt.hidden=!0;break}rn(tt)}},_r=[],Ir=te=>{let Ee,tt,bt,Ht,ce,nt,Et=0;const qt=te.childNodes,Kt=qt.length;for(;Et<Kt;Et++){if(Ee=qt[Et],Ee["s-sr"]&&(tt=Ee["s-cr"])&&tt.parentNode)for(bt=tt.parentNode.childNodes,Ht=Ee["s-sn"],nt=bt.length-1;nt>=0;nt--)tt=bt[nt],!tt["s-cn"]&&!tt["s-nr"]&&tt["s-hn"]!==Ee["s-hn"]&&(oi(tt,Ht)?(ce=_r.find(pn=>pn.$nodeToRelocate$===tt),ge=!0,tt["s-sn"]=tt["s-sn"]||Ht,ce?ce.$slotRefNode$=Ee:_r.push({$slotRefNode$:Ee,$nodeToRelocate$:tt}),tt["s-sr"]&&_r.map(pn=>{oi(pn.$nodeToRelocate$,tt["s-sn"])&&(ce=_r.find(kn=>kn.$nodeToRelocate$===tt),ce&&!pn.$slotRefNode$&&(pn.$slotRefNode$=ce.$slotRefNode$))})):_r.some(pn=>pn.$nodeToRelocate$===tt)||_r.push({$nodeToRelocate$:tt}));1===Ee.nodeType&&Ir(Ee)}},oi=(te,Ee)=>1===te.nodeType?null===te.getAttribute("slot")&&""===Ee||te.getAttribute("slot")===Ee:te["s-sn"]===Ee||""===Ee,xr=te=>{te.$attrs$&&te.$attrs$.ref&&te.$attrs$.ref(null),te.$children$&&te.$children$.map(xr)},Dn=te=>Nt(te).$hostElement$,ai=(te,Ee,tt)=>{const bt=Dn(te);return{emit:Ht=>pi(bt,Ee,{bubbles:!!(4&tt),composed:!!(2&tt),cancelable:!!(1&tt),detail:Ht})}},pi=(te,Ee,tt)=>{const bt=Oe.ce(Ee,tt);return te.dispatchEvent(bt),bt},gr=(te,Ee)=>{Ee&&!te.$onRenderResolve$&&Ee["s-p"]&&Ee["s-p"].push(new Promise(tt=>te.$onRenderResolve$=tt))},zr=(te,Ee)=>{if(te.$flags$|=16,!(4&te.$flags$))return gr(te,te.$ancestorComponent$),Tr(()=>$t(te,Ee));te.$flags$|=512},$t=(te,Ee)=>{const bt=te.$lazyInstance$;let Ht;return Ee&&(te.$flags$|=256,te.$queuedListeners$&&(te.$queuedListeners$.map(([ce,nt])=>me(bt,ce,nt)),te.$queuedListeners$=null),Ht=me(bt,"componentWillLoad")),Ht=He(Ht,()=>me(bt,"componentWillRender")),He(Ht,()=>We(te,bt,Ee))},We=function(){var te=(0,c.Z)(function*(Ee,tt,bt){const Ht=Ee.$hostElement$,nt=Ht["s-rc"];bt&&(te=>{const Ee=te.$cmpMeta$,tt=te.$hostElement$,bt=Ee.$flags$,ce=Ae(tt.shadowRoot?tt.shadowRoot:tt.getRootNode(),Ee,te.$modeName$);10&bt&&(tt["s-sc"]=ce,tt.classList.add(ce+"-h"),2&bt&&tt.classList.add(ce+"-s"))})(Ee);rt(Ee,tt),nt&&(nt.map(qt=>qt()),Ht["s-rc"]=void 0);{const qt=Ht["s-p"],Kt=()=>Xt(Ee);0===qt.length?Kt():(Promise.all(qt).then(Kt),Ee.$flags$|=4,qt.length=0)}});return function(tt,bt,Ht){return te.apply(this,arguments)}}(),rt=(te,Ee,tt)=>{try{Ee=Ee.render&&Ee.render(),te.$flags$&=-17,te.$flags$|=2,((te,Ee)=>{const tt=te.$hostElement$,bt=te.$cmpMeta$,Ht=te.$vnode$||ar(null,null),ce=(te=>te&&te.$tag$===cn)(Ee)?Ee:Gn(null,null,Ee);if(Pe=tt.tagName,bt.$attrsToReflect$&&(ce.$attrs$=ce.$attrs$||{},bt.$attrsToReflect$.map(([nt,Et])=>ce.$attrs$[Et]=tt[nt])),ce.$tag$=null,ce.$flags$|=4,te.$vnode$=ce,ce.$elm$=Ht.$elm$=tt.shadowRoot||tt,G=tt["s-sc"],Te=tt["s-cr"],Fe=0!=(1&bt.$flags$),ge=!1,Lr(Ht,ce),Oe.$flags$|=1,Se){Ir(ce.$elm$);let nt,Et,qt,Kt,pn,kn,qn=0;for(;qn<_r.length;qn++)nt=_r[qn],Et=nt.$nodeToRelocate$,Et["s-ol"]||(qt=de.createTextNode(""),qt["s-nr"]=Et,Et.parentNode.insertBefore(Et["s-ol"]=qt,Et));for(qn=0;qn<_r.length;qn++)if(nt=_r[qn],Et=nt.$nodeToRelocate$,nt.$slotRefNode$){for(Kt=nt.$slotRefNode$.parentNode,pn=nt.$slotRefNode$.nextSibling,qt=Et["s-ol"];qt=qt.previousSibling;)if(kn=qt["s-nr"],kn&&kn["s-sn"]===Et["s-sn"]&&Kt===kn.parentNode&&(kn=kn.nextSibling,!kn||!kn["s-nr"])){pn=kn;break}(!pn&&Kt!==Et.parentNode||Et.nextSibling!==pn)&&Et!==pn&&(!Et["s-hn"]&&Et["s-ol"]&&(Et["s-hn"]=Et["s-ol"].parentNode.nodeName),Kt.insertBefore(Et,pn))}else 1===Et.nodeType&&(Et.hidden=!0)}ge&&rn(ce.$elm$),Oe.$flags$&=-2,_r.length=0})(te,Ee)}catch(bt){Pn(bt,te.$hostElement$)}return null},Xt=te=>{const tt=te.$hostElement$,Ht=te.$lazyInstance$,ce=te.$ancestorComponent$;me(Ht,"componentDidRender"),64&te.$flags$?me(Ht,"componentDidUpdate"):(te.$flags$|=64,At(tt),me(Ht,"componentDidLoad"),te.$onReadyResolve$(tt),ce||_e()),te.$onInstanceResolve$(tt),te.$onRenderResolve$&&(te.$onRenderResolve$(),te.$onRenderResolve$=void 0),512&te.$flags$&&ir(()=>zr(te,!1)),te.$flags$&=-517},Lt=te=>{{const Ee=Nt(te),tt=Ee.$hostElement$.isConnected;return tt&&2==(18&Ee.$flags$)&&zr(Ee,!1),tt}},_e=te=>{At(de.documentElement),ir(()=>pi(re,"appload",{detail:{namespace:"ionic"}}))},me=(te,Ee,tt)=>{if(te&&te[Ee])try{return te[Ee](tt)}catch(bt){Pn(bt)}},He=(te,Ee)=>te&&te.then?te.then(Ee):Ee(),At=te=>te.classList.add("hydrated"),yn=(te,Ee,tt,bt,Ht,ce,nt)=>{let Et,qt,Kt,pn;if(1===ce.nodeType){for(Et=ce.getAttribute("c-id"),Et&&(qt=Et.split("."),(qt[0]===nt||"0"===qt[0])&&(Kt={$flags$:0,$hostId$:qt[0],$nodeId$:qt[1],$depth$:qt[2],$index$:qt[3],$tag$:ce.tagName.toLowerCase(),$elm$:ce,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ee.push(Kt),ce.removeAttribute("c-id"),te.$children$||(te.$children$=[]),te.$children$[Kt.$index$]=Kt,te=Kt,bt&&"0"===Kt.$depth$&&(bt[Kt.$index$]=Kt.$elm$))),pn=ce.childNodes.length-1;pn>=0;pn--)yn(te,Ee,tt,bt,Ht,ce.childNodes[pn],nt);if(ce.shadowRoot)for(pn=ce.shadowRoot.childNodes.length-1;pn>=0;pn--)yn(te,Ee,tt,bt,Ht,ce.shadowRoot.childNodes[pn],nt)}else if(8===ce.nodeType)qt=ce.nodeValue.split("."),(qt[1]===nt||"0"===qt[1])&&(Et=qt[0],Kt={$flags$:0,$hostId$:qt[1],$nodeId$:qt[2],$depth$:qt[3],$index$:qt[4],$elm$:ce,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Et?(Kt.$elm$=ce.nextSibling,Kt.$elm$&&3===Kt.$elm$.nodeType&&(Kt.$text$=Kt.$elm$.textContent,Ee.push(Kt),ce.remove(),te.$children$||(te.$children$=[]),te.$children$[Kt.$index$]=Kt,bt&&"0"===Kt.$depth$&&(bt[Kt.$index$]=Kt.$elm$))):Kt.$hostId$===nt&&("s"===Et?(Kt.$tag$="slot",ce["s-sn"]=qt[5]?Kt.$name$=qt[5]:"",ce["s-sr"]=!0,bt&&(Kt.$elm$=de.createElement(Kt.$tag$),Kt.$name$&&Kt.$elm$.setAttribute("name",Kt.$name$),ce.parentNode.insertBefore(Kt.$elm$,ce),ce.remove(),"0"===Kt.$depth$&&(bt[Kt.$index$]=Kt.$elm$)),tt.push(Kt),te.$children$||(te.$children$=[]),te.$children$[Kt.$index$]=Kt):"r"===Et&&(bt?ce.remove():(Ht["s-cr"]=ce,ce["s-cn"]=!0))));else if(te&&"style"===te.$tag$){const kn=ar(null,ce.textContent);kn.$elm$=ce,kn.$index$="0",te.$children$=[kn]}},$e=(te,Ee)=>{if(1===te.nodeType){let tt=0;for(;tt<te.childNodes.length;tt++)$e(te.childNodes[tt],Ee);if(te.shadowRoot)for(tt=0;tt<te.shadowRoot.childNodes.length;tt++)$e(te.shadowRoot.childNodes[tt],Ee)}else if(8===te.nodeType){const tt=te.nodeValue.split(".");"o"===tt[0]&&(Ee.set(tt[1]+"."+tt[2],te),te.nodeValue="",te["s-en"]=tt[3])}},kt=(te,Ee,tt)=>{if(Ee.$members$){te.watchers&&(Ee.$watchers$=te.watchers);const bt=Object.entries(Ee.$members$),Ht=te.prototype;if(bt.map(([ce,[nt]])=>{31&nt||2&tt&&32&nt?Object.defineProperty(Ht,ce,{get(){return((te,Ee)=>Nt(this).$instanceValues$.get(Ee))(0,ce)},set(Et){((te,Ee,tt,bt)=>{const Ht=Nt(te),ce=Ht.$hostElement$,nt=Ht.$instanceValues$.get(Ee),Et=Ht.$flags$,qt=Ht.$lazyInstance$;tt=((te,Ee)=>null==te||Hn(te)?te:4&Ee?"false"!==te&&(""===te||!!te):2&Ee?parseFloat(te):1&Ee?String(te):te)(tt,bt.$members$[Ee][0]);const Kt=Number.isNaN(nt)&&Number.isNaN(tt);if((!(8&Et)||void 0===nt)&&tt!==nt&&!Kt&&(Ht.$instanceValues$.set(Ee,tt),qt)){if(bt.$watchers$&&128&Et){const kn=bt.$watchers$[Ee];kn&&kn.map(qn=>{try{qt[qn](tt,nt,Ee)}catch(Vr){Pn(Vr,ce)}})}2==(18&Et)&&zr(Ht,!1)}})(this,ce,Et,Ee)},configurable:!0,enumerable:!0}):1&tt&&64&nt&&Object.defineProperty(Ht,ce,{value(...Et){const qt=Nt(this);return qt.$onInstancePromise$.then(()=>qt.$lazyInstance$[ce](...Et))}})}),1&tt){const ce=new Map;Ht.attributeChangedCallback=function(nt,Et,qt){Oe.jmp(()=>{const Kt=ce.get(nt);if(this.hasOwnProperty(Kt))qt=this[Kt],delete this[Kt];else if(Ht.hasOwnProperty(Kt)&&"number"==typeof this[Kt]&&this[Kt]==qt)return;this[Kt]=(null!==qt||"boolean"!=typeof this[Kt])&&qt})},te.observedAttributes=bt.filter(([nt,Et])=>15&Et[0]).map(([nt,Et])=>{const qt=Et[1]||nt;return ce.set(qt,nt),512&Et[0]&&Ee.$attrsToReflect$.push([nt,qt]),qt})}}return te},le=function(){var te=(0,c.Z)(function*(Ee,tt,bt,Ht,ce){if(!(32&tt.$flags$)){{if(tt.$flags$|=32,(ce=Qn(bt)).then){const Kt=()=>{};ce=yield ce,Kt()}ce.isProxied||(bt.$watchers$=ce.watchers,kt(ce,bt,2),ce.isProxied=!0);const qt=()=>{};tt.$flags$|=8;try{new ce(tt)}catch(Kt){Pn(Kt)}tt.$flags$&=-9,tt.$flags$|=128,qt(),ye(tt.$lazyInstance$)}if(ce.style){let qt=ce.style;"string"!=typeof qt&&(qt=qt[tt.$modeName$=(te=>mi.map(Ee=>Ee(te)).find(Ee=>!!Ee))(Ee)]);const Kt=we(bt,tt.$modeName$);if(!ni.has(Kt)){const pn=()=>{};Xe(Kt,qt,!!(1&bt.$flags$)),pn()}}}const nt=tt.$ancestorComponent$,Et=()=>zr(tt,!0);nt&&nt["s-rc"]?nt["s-rc"].push(Et):Et()});return function(tt,bt,Ht,ce,nt){return te.apply(this,arguments)}}(),ye=te=>{me(te,"connectedCallback")},vt=te=>{const Ee=te["s-cr"]=de.createComment("");Ee["s-cn"]=!0,te.insertBefore(Ee,te.firstChild)},je=(te,Ee={})=>{const bt=[],Ht=Ee.exclude||[],ce=re.customElements,nt=de.head,Et=nt.querySelector("meta[charset]"),qt=de.createElement("style"),Kt=[],pn=de.querySelectorAll(`[${De}]`);let kn,qn=!0,Vr=0;for(Object.assign(Oe,Ee),Oe.$resourcesUrl$=new URL(Ee.resourcesUrl||"./",de.baseURI).href,Oe.$flags$|=2;Vr<pn.length;Vr++)Xe(pn[Vr].getAttribute(De),gt(pn[Vr].innerHTML),!0);te.map(mr=>{mr[1].map(Bi=>{const fr={$flags$:Bi[0],$tagName$:Bi[1],$members$:Bi[2],$listeners$:Bi[3]};fr.$members$=Bi[2],fr.$listeners$=Bi[3],fr.$attrsToReflect$=[],fr.$watchers$={};const fs=fr.$tagName$,mt=class extends HTMLElement{constructor(lt){super(lt),Sn(lt=this,fr),1&fr.$flags$&&lt.attachShadow({mode:"open",delegatesFocus:!!(16&fr.$flags$)})}connectedCallback(){kn&&(clearTimeout(kn),kn=null),qn?Kt.push(this):Oe.jmp(()=>(te=>{if(!(1&Oe.$flags$)){const Ee=Nt(te),tt=Ee.$cmpMeta$,bt=()=>{};if(1&Ee.$flags$)Ie(te,Ee,tt.$listeners$),ye(Ee.$lazyInstance$);else{let Ht;if(Ee.$flags$|=1,Ht=te.getAttribute(H),Ht){if(1&tt.$flags$){const ce=Ae(te.shadowRoot,tt,te.getAttribute("s-mode"));te.classList.remove(ce+"-h",ce+"-s")}((te,Ee,tt,bt)=>{const ce=te.shadowRoot,nt=[],qt=ce?[]:null,Kt=bt.$vnode$=ar(Ee,null);Oe.$orgLocNodes$||$e(de.body,Oe.$orgLocNodes$=new Map),te[H]=tt,te.removeAttribute(H),yn(Kt,nt,[],qt,te,te,tt),nt.map(pn=>{const kn=pn.$hostId$+"."+pn.$nodeId$,qn=Oe.$orgLocNodes$.get(kn),Vr=pn.$elm$;qn&&""===qn["s-en"]&&qn.parentNode.insertBefore(Vr,qn.nextSibling),ce||(Vr["s-hn"]=Ee,qn&&(Vr["s-ol"]=qn,Vr["s-ol"]["s-nr"]=Vr)),Oe.$orgLocNodes$.delete(kn)}),ce&&qt.map(pn=>{pn&&ce.appendChild(pn)})})(te,tt.$tagName$,Ht,Ee)}Ht||12&tt.$flags$&&vt(te);{let ce=te;for(;ce=ce.parentNode||ce.host;)if(1===ce.nodeType&&ce.hasAttribute("s-id")&&ce["s-p"]||ce["s-p"]){gr(Ee,Ee.$ancestorComponent$=ce);break}}tt.$members$&&Object.entries(tt.$members$).map(([ce,[nt]])=>{if(31&nt&&te.hasOwnProperty(ce)){const Et=te[ce];delete te[ce],te[ce]=Et}}),ir(()=>le(te,Ee,tt))}bt()}})(this))}disconnectedCallback(){Oe.jmp(()=>(te=>{if(!(1&Oe.$flags$)){const Ee=Nt(this),tt=Ee.$lazyInstance$;Ee.$rmListeners$&&(Ee.$rmListeners$.map(bt=>bt()),Ee.$rmListeners$=void 0),me(tt,"disconnectedCallback")}})())}componentOnReady(){return Nt(this).$onReadyPromise$}};fr.$lazyBundleId$=mr[0],!Ht.includes(fs)&&!ce.get(fs)&&(bt.push(fs),ce.define(fs,kt(mt,fr,1)))})}),qt.innerHTML=bt+"{visibility:hidden}.hydrated{visibility:inherit}",qt.setAttribute("data-styles",""),nt.insertBefore(qt,Et?Et.nextSibling:nt.firstChild),qn=!1,Kt.length?Kt.map(mr=>mr.connectedCallback()):Oe.jmp(()=>kn=setTimeout(_e,30))},Ne=te=>{const Ee=new URL(te,Oe.$resourcesUrl$);return Ee.origin!==re.location.origin?Ee.href:Ee.pathname},Ct=new WeakMap,Nt=te=>Ct.get(te),un=(te,Ee)=>Ct.set(Ee.$lazyInstance$=te,Ee),Sn=(te,Ee)=>{const tt={$flags$:0,$hostElement$:te,$cmpMeta$:Ee,$instanceValues$:new Map};return tt.$onInstancePromise$=new Promise(bt=>tt.$onInstanceResolve$=bt),tt.$onReadyPromise$=new Promise(bt=>tt.$onReadyResolve$=bt),te["s-p"]=[],te["s-rc"]=[],Ie(te,tt,Ee.$listeners$),Ct.set(te,tt)},Kn=(te,Ee)=>Ee in te,Pn=(te,Ee)=>(0,console.error)(te,Ee),cr=new Map,Qn=(te,Ee,tt)=>{const bt=te.$tagName$.replace(/-/g,"_"),Ht=te.$lazyBundleId$,ce=cr.get(Ht);return ce?ce[bt]:L(863)(`./${Ht}.entry.js`).then(nt=>(cr.set(Ht,nt),nt[bt]),Pn)},ni=new Map,mi=[],li=[],Pi=[],Ji=(te,Ee)=>tt=>{te.push(tt),pe||(pe=!0,Ee&&4&Oe.$flags$?ir(An):Oe.raf(An))},Zr=te=>{for(let Ee=0;Ee<te.length;Ee++)try{te[Ee](performance.now())}catch(tt){Pn(tt)}te.length=0},An=()=>{Zr(li),Zr(Pi),(pe=li.length>0)&&Oe.raf(An)},ir=te=>Pt().then(te),Xr=Ji(li,!1),Tr=Ji(Pi,!0),Wi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(_n,It,L)=>{"use strict";L.d(It,{a:()=>re,b:()=>at,c:()=>G,g:()=>pe,i:()=>Xe});var c=L(1308);class q{constructor(){this.m=new Map}reset(Me){this.m=new Map(Object.entries(Me))}get(Me,we){const gt=this.m.get(Me);return void 0!==gt?gt:we}getBoolean(Me,we=!1){const gt=this.m.get(Me);return void 0===gt?we:"string"==typeof gt?"true"===gt:!!gt}getNumber(Me,we){const gt=parseFloat(this.m.get(Me));return isNaN(gt)?void 0!==we?we:NaN:gt}set(Me,we){this.m.set(Me,we)}}const G=new q,Ue="ionic-persist-config",pe=Ae=>de(Ae),re=(Ae,Me)=>("string"==typeof Ae&&(Me=Ae,Ae=void 0),pe(Ae).includes(Me)),de=(Ae=window)=>{if(typeof Ae>"u")return[];Ae.Ionic=Ae.Ionic||{};let Me=Ae.Ionic.platforms;return null==Me&&(Me=Ae.Ionic.platforms=Oe(Ae),Me.forEach(we=>Ae.document.documentElement.classList.add(`plt-${we}`))),Me},Oe=Ae=>{const Me=G.get("platform");return Object.keys(yt).filter(we=>{const gt=null==Me?void 0:Me[we];return"function"==typeof gt?gt(Ae):yt[we](Ae)})},ut=Ae=>!!(Be(Ae,/iPad/i)||Be(Ae,/Macintosh/i)&&qe(Ae)),Ie=Ae=>Be(Ae,/android|sink/i),qe=Ae=>_t(Ae,"(any-pointer:coarse)"),Le=Ae=>ke(Ae)||H(Ae),ke=Ae=>!!(Ae.cordova||Ae.phonegap||Ae.PhoneGap),H=Ae=>{const Me=Ae.Capacitor;return!(null==Me||!Me.isNative)},Be=(Ae,Me)=>Me.test(Ae.navigator.userAgent),_t=(Ae,Me)=>{var we;return null===(we=Ae.matchMedia)||void 0===we?void 0:we.call(Ae,Me).matches},yt={ipad:ut,iphone:Ae=>Be(Ae,/iPhone/i),ios:Ae=>Be(Ae,/iPhone|iPod/i)||ut(Ae),android:Ie,phablet:Ae=>{const Me=Ae.innerWidth,we=Ae.innerHeight,gt=Math.min(Me,we),et=Math.max(Me,we);return gt>390&&gt<520&&et>620&&et<800},tablet:Ae=>{const Me=Ae.innerWidth,we=Ae.innerHeight,gt=Math.min(Me,we),et=Math.max(Me,we);return ut(Ae)||(Ae=>Ie(Ae)&&!Be(Ae,/mobile/i))(Ae)||gt>460&&gt<820&&et>780&&et<1400},cordova:ke,capacitor:H,electron:Ae=>Be(Ae,/electron/i),pwa:Ae=>{var Me;return!!(null!==(Me=Ae.matchMedia)&&void 0!==Me&&Me.call(Ae,"(display-mode: standalone)").matches||Ae.navigator.standalone)},mobile:qe,mobileweb:Ae=>qe(Ae)&&!Le(Ae),desktop:Ae=>!qe(Ae),hybrid:Le};let ot;const at=Ae=>Ae&&(0,c.g)(Ae)||ot,Xe=(Ae={})=>{if(typeof window>"u")return;const Me=window.document,we=window,gt=we.Ionic=we.Ionic||{},et={};Ae._ael&&(et.ael=Ae._ael),Ae._rel&&(et.rel=Ae._rel),Ae._ce&&(et.ce=Ae._ce),(0,c.s)(et);const Qe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ae=>{try{const Me=Ae.sessionStorage.getItem(Ue);return null!==Me?JSON.parse(Me):{}}catch(Me){return{}}})(we)),{persistConfig:!1}),gt.config),(Ae=>{const Me={};return Ae.location.search.slice(1).split("&").map(we=>we.split("=")).map(([we,gt])=>[decodeURIComponent(we),decodeURIComponent(gt)]).filter(([we])=>((Ae,Me)=>Ae.substr(0,Me.length)===Me)(we,"ionic:")).map(([we,gt])=>[we.slice("ionic:".length),gt]).forEach(([we,gt])=>{Me[we]=gt}),Me})(we)),Ae);G.reset(Qe),G.getBoolean("persistConfig")&&((Ae,Me)=>{try{Ae.sessionStorage.setItem(Ue,JSON.stringify(Me))}catch(we){return}})(we,Qe),de(we),gt.config=G,gt.mode=ot=G.get("mode",Me.documentElement.getAttribute("mode")||(re(we,"ios")?"ios":"md")),G.set("mode",ot),Me.documentElement.setAttribute("mode",ot),Me.documentElement.classList.add(ot),G.getBoolean("_testing")&&G.set("animated",!1);const Ke=Jt=>{var tn;return null===(tn=Jt.tagName)||void 0===tn?void 0:tn.startsWith("ION-")},jt=Jt=>["ios","md"].includes(Jt);(0,c.a)(Jt=>{for(;Jt;){const tn=Jt.mode||Jt.getAttribute("mode");if(tn){if(jt(tn))return tn;Ke(Jt)&&console.warn('Invalid ionic mode: "'+tn+'", expected: "ios" or "md"')}Jt=Jt.parentElement}return ot})}},6439:(_n,It,L)=>{"use strict";L.r(It),L.d(It,{iosTransitionAnimation:()=>Oe,shadow:()=>ge});var c=L(181),q=L(1843);L(3457),L(1308);const Fe=Ge=>document.querySelector(`${Ge}.ion-cloned-element`),ge=Ge=>Ge.shadowRoot||Ge,Se=Ge=>{const ut="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs"),Pt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ut){const be=ut.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=be?be.querySelector(Pt):null}return Ge.querySelector(Pt)},Ue=(Ge,ut)=>{const Pt="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs");let be=[];if(null!=Pt){const Ie=Pt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ie&&(be=Ie.querySelectorAll("ion-buttons"))}else be=Ge.querySelectorAll("ion-buttons");for(const Ie of be){const he=Ie.closest("ion-header"),dt=he&&!he.classList.contains("header-collapse-condense-inactive"),ft=Ie.querySelector("ion-back-button"),qe=Ie.classList.contains("buttons-collapse");if(null!==ft&&("start"===Ie.slot||""===Ie.slot)&&(qe&&dt&&ut||!qe))return ft}return null},re=(Ge,ut,Pt,be,Ie,he)=>{const dt=ut?`calc(100% - ${he.right+4}px)`:he.left-4+"px",ft=ut?"7px":"-7px",qe=ut?"-4px":"4px",Je=ut?"-4px":"4px",Le=ut?"right":"left",ke=ut?"left":"right",it=Pt?[{offset:0,opacity:1,transform:`translate3d(${qe}, ${he.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ft}, ${Ie.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ft}, ${Ie.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${qe}, ${he.top-46}px, 0) scale(1)`}],yt=Pt?[{offset:0,opacity:1,transform:`translate3d(${Je}, ${he.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Je}, ${he.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Je}, ${he.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Je}, ${he.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Je}, ${he.top-46}px, 0) scale(1)`}],ot=(0,c.c)(),at=(0,c.c)(),Xe=Fe("ion-back-button"),Ae=ge(Xe).querySelector(".button-text"),Me=ge(Xe).querySelector("ion-icon");Xe.text=be.text,Xe.mode=be.mode,Xe.icon=be.icon,Xe.color=be.color,Xe.disabled=be.disabled,Xe.style.setProperty("display","block"),Xe.style.setProperty("position","fixed"),at.addElement(Me),ot.addElement(Ae),ot.beforeStyles({"transform-origin":`${Le} center`}).beforeAddWrite(()=>{be.style.setProperty("display","none"),Xe.style.setProperty(Le,dt)}).afterAddWrite(()=>{be.style.setProperty("display",""),Xe.style.setProperty("display","none"),Xe.style.removeProperty(Le)}).keyframes(it),at.beforeStyles({"transform-origin":`${ke} center`}).keyframes(yt),Ge.addAnimation([ot,at])},de=(Ge,ut,Pt,be,Ie,he)=>{const dt=ut?`calc(100% - ${Ie.right}px)`:`${Ie.left}px`,ft=ut?"-18px":"18px",qe=ut?"right":"left",ke=Pt?[{offset:0,opacity:0,transform:`translate3d(${ft}, ${he.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ie.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ie.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ft}, ${he.top-4}px, 0) scale(0.5)`}],H=Fe("ion-title"),De=(0,c.c)();H.innerText=be.innerText,H.size=be.size,H.color=be.color,De.addElement(H),De.beforeStyles({"transform-origin":`${qe} center`,height:"46px",display:"",position:"relative",[qe]:dt}).beforeAddWrite(()=>{be.style.setProperty("display","none")}).afterAddWrite(()=>{be.style.setProperty("display",""),H.style.setProperty("display","none")}).keyframes(ke),Ge.addAnimation(De)},Oe=(Ge,ut)=>{var Pt;try{const be="cubic-bezier(0.32,0.72,0,1)",Ie="opacity",he="transform",dt="0%",qe="rtl"===Ge.ownerDocument.dir,Je=qe?"-99.5%":"99.5%",Le=qe?"33%":"-33%",ke=ut.enteringEl,H=ut.leavingEl,De="back"===ut.direction,it=ke.querySelector(":scope > ion-content"),Be=ke.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),_t=ke.querySelectorAll(":scope > ion-header > ion-toolbar"),yt=(0,c.c)(),ot=(0,c.c)();if(yt.addElement(ke).duration((null!==(Pt=ut.duration)&&void 0!==Pt?Pt:0)||540).easing(ut.easing||be).fill("both").beforeRemoveClass("ion-page-invisible"),H&&null!=Ge){const Me=(0,c.c)();Me.addElement(Ge),yt.addAnimation(Me)}if(it||0!==_t.length||0!==Be.length?(ot.addElement(it),ot.addElement(Be)):ot.addElement(ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),yt.addAnimation(ot),De?ot.beforeClearStyles([Ie]).fromTo("transform",`translateX(${Le})`,`translateX(${dt})`).fromTo(Ie,.8,1):ot.beforeClearStyles([Ie]).fromTo("transform",`translateX(${Je})`,`translateX(${dt})`),it){const Me=ge(it).querySelector(".transition-effect");if(Me){const we=Me.querySelector(".transition-cover"),gt=Me.querySelector(".transition-shadow"),et=(0,c.c)(),Qe=(0,c.c)(),Ke=(0,c.c)();et.addElement(Me).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Qe.addElement(we).beforeClearStyles([Ie]).fromTo(Ie,0,.1),Ke.addElement(gt).beforeClearStyles([Ie]).fromTo(Ie,.03,.7),et.addAnimation([Qe,Ke]),ot.addAnimation([et])}}const at=ke.querySelector("ion-header.header-collapse-condense"),{forward:Xe,backward:Ae}=((Ge,ut,Pt,be,Ie)=>{const he=Ue(be,Pt),dt=Se(Ie),ft=Se(be),qe=Ue(Ie,Pt),Je=null!==he&&null!==dt&&!Pt,Le=null!==ft&&null!==qe&&Pt;if(Je){const ke=dt.getBoundingClientRect(),H=he.getBoundingClientRect();de(Ge,ut,Pt,dt,ke,H),re(Ge,ut,Pt,he,ke,H)}else if(Le){const ke=ft.getBoundingClientRect(),H=qe.getBoundingClientRect();de(Ge,ut,Pt,ft,ke,H),re(Ge,ut,Pt,qe,ke,H)}return{forward:Je,backward:Le}})(yt,qe,De,ke,H);if(_t.forEach(Me=>{const we=(0,c.c)();we.addElement(Me),yt.addAnimation(we);const gt=(0,c.c)();gt.addElement(Me.querySelector("ion-title"));const et=(0,c.c)(),Qe=Array.from(Me.querySelectorAll("ion-buttons,[menuToggle]")),Ke=Me.closest("ion-header"),jt=null==Ke?void 0:Ke.classList.contains("header-collapse-condense-inactive");let Jt;Jt=Qe.filter(De?ar=>{const cn=ar.classList.contains("buttons-collapse");return cn&&!jt||!cn}:ar=>!ar.classList.contains("buttons-collapse")),et.addElement(Jt);const tn=(0,c.c)();tn.addElement(Me.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Tt=(0,c.c)();Tt.addElement(ge(Me).querySelector(".toolbar-background"));const Hn=(0,c.c)(),Gn=Me.querySelector("ion-back-button");if(Gn&&Hn.addElement(Gn),we.addAnimation([gt,et,tn,Tt,Hn]),et.fromTo(Ie,.01,1),tn.fromTo(Ie,.01,1),De)jt||gt.fromTo("transform",`translateX(${Le})`,`translateX(${dt})`).fromTo(Ie,.01,1),tn.fromTo("transform",`translateX(${Le})`,`translateX(${dt})`),Hn.fromTo(Ie,.01,1);else if(at||gt.fromTo("transform",`translateX(${Je})`,`translateX(${dt})`).fromTo(Ie,.01,1),tn.fromTo("transform",`translateX(${Je})`,`translateX(${dt})`),Tt.beforeClearStyles([Ie,"transform"]),(null==Ke?void 0:Ke.translucent)?Tt.fromTo("transform",qe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Tt.fromTo(Ie,.01,"var(--opacity)"),Xe||Hn.fromTo(Ie,.01,1),Gn&&!Xe){const cn=(0,c.c)();cn.addElement(ge(Gn).querySelector(".button-text")).fromTo("transform",qe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),we.addAnimation(cn)}}),H){const Me=(0,c.c)(),we=H.querySelector(":scope > ion-content"),gt=H.querySelectorAll(":scope > ion-header > ion-toolbar"),et=H.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(we||0!==gt.length||0!==et.length?(Me.addElement(we),Me.addElement(et)):Me.addElement(H.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),yt.addAnimation(Me),De){Me.beforeClearStyles([Ie]).fromTo("transform",`translateX(${dt})`,qe?"translateX(-100%)":"translateX(100%)");const Qe=(0,q.g)(H);yt.afterAddWrite(()=>{"normal"===yt.getDirection()&&Qe.style.setProperty("display","none")})}else Me.fromTo("transform",`translateX(${dt})`,`translateX(${Le})`).fromTo(Ie,1,.8);if(we){const Qe=ge(we).querySelector(".transition-effect");if(Qe){const Ke=Qe.querySelector(".transition-cover"),jt=Qe.querySelector(".transition-shadow"),Jt=(0,c.c)(),tn=(0,c.c)(),Tt=(0,c.c)();Jt.addElement(Qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),tn.addElement(Ke).beforeClearStyles([Ie]).fromTo(Ie,.1,0),Tt.addElement(jt).beforeClearStyles([Ie]).fromTo(Ie,.7,.03),Jt.addAnimation([tn,Tt]),Me.addAnimation([Jt])}}gt.forEach(Qe=>{const Ke=(0,c.c)();Ke.addElement(Qe);const jt=(0,c.c)();jt.addElement(Qe.querySelector("ion-title"));const Jt=(0,c.c)(),tn=Qe.querySelectorAll("ion-buttons,[menuToggle]"),Tt=Qe.closest("ion-header"),Hn=null==Tt?void 0:Tt.classList.contains("header-collapse-condense-inactive"),Gn=Array.from(tn).filter(Pr=>{const Un=Pr.classList.contains("buttons-collapse");return Un&&!Hn||!Un});Jt.addElement(Gn);const ar=(0,c.c)(),cn=Qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");cn.length>0&&ar.addElement(cn);const lr=(0,c.c)();lr.addElement(ge(Qe).querySelector(".toolbar-background"));const hr=(0,c.c)(),Cr=Qe.querySelector("ion-back-button");if(Cr&&hr.addElement(Cr),Ke.addAnimation([jt,Jt,ar,hr,lr]),yt.addAnimation(Ke),hr.fromTo(Ie,.99,0),Jt.fromTo(Ie,.99,0),ar.fromTo(Ie,.99,0),De){if(Hn||jt.fromTo("transform",`translateX(${dt})`,qe?"translateX(-100%)":"translateX(100%)").fromTo(Ie,.99,0),ar.fromTo("transform",`translateX(${dt})`,qe?"translateX(-100%)":"translateX(100%)"),lr.beforeClearStyles([Ie,"transform"]),(null==Tt?void 0:Tt.translucent)?lr.fromTo("transform","translateX(0px)",qe?"translateX(-100%)":"translateX(100%)"):lr.fromTo(Ie,"var(--opacity)",0),Cr&&!Ae){const Un=(0,c.c)();Un.addElement(ge(Cr).querySelector(".button-text")).fromTo("transform",`translateX(${dt})`,`translateX(${(qe?-124:124)+"px"})`),Ke.addAnimation(Un)}}else Hn||jt.fromTo("transform",`translateX(${dt})`,`translateX(${Le})`).fromTo(Ie,.99,0).afterClearStyles([he,Ie]),ar.fromTo("transform",`translateX(${dt})`,`translateX(${Le})`).afterClearStyles([he,Ie]),hr.afterClearStyles([Ie]),jt.afterClearStyles([Ie]),Jt.afterClearStyles([Ie])})}return yt}catch(be){throw be}}},7838:(_n,It,L)=>{"use strict";L.r(It),L.d(It,{mdTransitionAnimation:()=>Pe});var c=L(181),q=L(1843);L(3457),L(1308);const Pe=(Fe,ge)=>{var Se,Ue,pe;const Oe="back"===ge.direction,ut=ge.leavingEl,Pt=(0,q.g)(ge.enteringEl),be=Pt.querySelector("ion-toolbar"),Ie=(0,c.c)();if(Ie.addElement(Pt).fill("both").beforeRemoveClass("ion-page-invisible"),Oe?Ie.duration((null!==(Se=ge.duration)&&void 0!==Se?Se:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ie.duration((null!==(Ue=ge.duration)&&void 0!==Ue?Ue:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),be){const he=(0,c.c)();he.addElement(be),Ie.addAnimation(he)}if(ut&&Oe){Ie.duration((null!==(pe=ge.duration)&&void 0!==pe?pe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const he=(0,c.c)();he.addElement((0,q.g)(ut)).onFinish(dt=>{1===dt&&he.elements.length>0&&he.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ie.addAnimation(he)}return Ie}},3539:(_n,It,L)=>{"use strict";L.d(It,{B:()=>we,G:()=>gt,a:()=>Se,b:()=>Ue,c:()=>Oe,d:()=>De,e:()=>ut,f:()=>Be,g:()=>ot,h:()=>Fe,i:()=>Xe,j:()=>Ie,k:()=>ke,m:()=>re,s:()=>Me,t:()=>Ge});var c=L(5861),q=L(5179),G=L(7593),Te=L(5730);let Pe=0;const Fe=new WeakMap,ge=et=>({create:Qe=>Pt(et,Qe),dismiss:(Qe,Ke,jt)=>Je(document,Qe,Ke,et,jt),getTop:()=>(0,c.Z)(function*(){return ke(document,et)})()}),Se=ge("ion-alert"),Ue=ge("ion-action-sheet"),re=ge("ion-modal"),Oe=ge("ion-popover"),Ge=ge("ion-toast"),ut=et=>{typeof document<"u"&&qe(document);const Qe=Pe++;et.overlayIndex=Qe,et.hasAttribute("id")||(et.id=`ion-overlay-${Qe}`)},Pt=(et,Qe)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(et).then(()=>{const Ke=document.createElement(et);return Ke.classList.add("overlay-hidden"),Object.assign(Ke,Object.assign(Object.assign({},Qe),{hasController:!0})),_t(document).appendChild(Ke),new Promise(jt=>(0,Te.c)(Ke,jt))}):Promise.resolve(),be='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Ie=(et,Qe)=>{let Ke=et.querySelector(be);const jt=null==Ke?void 0:Ke.shadowRoot;jt&&(Ke=jt.querySelector(be)||Ke),Ke?(0,Te.f)(Ke):Qe.focus()},dt=(et,Qe)=>{const Ke=Array.from(et.querySelectorAll(be));let jt=Ke.length>0?Ke[Ke.length-1]:null;const Jt=null==jt?void 0:jt.shadowRoot;Jt&&(jt=Jt.querySelector(be)||jt),jt?jt.focus():Qe.focus()},qe=et=>{0===Pe&&(Pe=1,et.addEventListener("focus",Qe=>{((et,Qe)=>{const Ke=ke(Qe,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),jt=et.target;Ke&&jt&&!Ke.classList.contains("ion-disable-focus-trap")&&(Ke.shadowRoot?(()=>{if(Ke.contains(jt))Ke.lastFocus=jt;else{const Tt=Ke.lastFocus;Ie(Ke,Ke),Tt===Qe.activeElement&&dt(Ke,Ke),Ke.lastFocus=Qe.activeElement}})():(()=>{if(Ke===jt)Ke.lastFocus=void 0;else{const Tt=(0,Te.g)(Ke);if(!Tt.contains(jt))return;const Hn=Tt.querySelector(".ion-overlay-wrapper");if(!Hn)return;if(Hn.contains(jt))Ke.lastFocus=jt;else{const Gn=Ke.lastFocus;Ie(Hn,Ke),Gn===Qe.activeElement&&dt(Hn,Ke),Ke.lastFocus=Qe.activeElement}}})())})(Qe,et)},!0),et.addEventListener("ionBackButton",Qe=>{const Ke=ke(et);null!=Ke&&Ke.backdropDismiss&&Qe.detail.register(G.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ke.dismiss(void 0,we))}),et.addEventListener("keyup",Qe=>{if("Escape"===Qe.key){const Ke=ke(et);null!=Ke&&Ke.backdropDismiss&&Ke.dismiss(void 0,we)}}))},Je=(et,Qe,Ke,jt,Jt)=>{const tn=ke(et,jt,Jt);return tn?tn.dismiss(Qe,Ke):Promise.reject("overlay does not exist")},ke=(et,Qe,Ke)=>{const jt=((et,Qe)=>(void 0===Qe&&(Qe="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(et.querySelectorAll(Qe)).filter(Ke=>Ke.overlayIndex>0)))(et,Qe).filter(Jt=>!(et=>et.classList.contains("overlay-hidden"))(Jt));return void 0===Ke?jt[jt.length-1]:jt.find(Jt=>Jt.id===Ke)},H=(et=!1)=>{const Ke=_t(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ke&&(et?Ke.setAttribute("aria-hidden","true"):Ke.removeAttribute("aria-hidden"))},De=function(){var et=(0,c.Z)(function*(Qe,Ke,jt,Jt,tn){var Tt,Hn;if(Qe.presented)return;H(!0),Qe.presented=!0,Qe.willPresent.emit(),null===(Tt=Qe.willPresentShorthand)||void 0===Tt||Tt.emit();const Gn=(0,q.b)(Qe),ar=Qe.enterAnimation?Qe.enterAnimation:q.c.get(Ke,"ios"===Gn?jt:Jt);(yield yt(Qe,ar,Qe.el,tn))&&(Qe.didPresent.emit(),null===(Hn=Qe.didPresentShorthand)||void 0===Hn||Hn.emit()),"ION-TOAST"!==Qe.el.tagName&&it(Qe.el),Qe.keyboardClose&&(null===document.activeElement||!Qe.el.contains(document.activeElement))&&Qe.el.focus()});return function(Ke,jt,Jt,tn,Tt){return et.apply(this,arguments)}}(),it=function(){var et=(0,c.Z)(function*(Qe){let Ke=document.activeElement;if(!Ke)return;const jt=null==Ke?void 0:Ke.shadowRoot;jt&&(Ke=jt.querySelector(be)||Ke),yield Qe.onDidDismiss(),Ke.focus()});return function(Ke){return et.apply(this,arguments)}}(),Be=function(){var et=(0,c.Z)(function*(Qe,Ke,jt,Jt,tn,Tt,Hn){var Gn,ar;if(!Qe.presented)return!1;H(!1),Qe.presented=!1;try{Qe.el.style.setProperty("pointer-events","none"),Qe.willDismiss.emit({data:Ke,role:jt}),null===(Gn=Qe.willDismissShorthand)||void 0===Gn||Gn.emit({data:Ke,role:jt});const cn=(0,q.b)(Qe),lr=Qe.leaveAnimation?Qe.leaveAnimation:q.c.get(Jt,"ios"===cn?tn:Tt);jt!==gt&&(yield yt(Qe,lr,Qe.el,Hn)),Qe.didDismiss.emit({data:Ke,role:jt}),null===(ar=Qe.didDismissShorthand)||void 0===ar||ar.emit({data:Ke,role:jt}),Fe.delete(Qe),Qe.el.classList.add("overlay-hidden"),Qe.el.style.removeProperty("pointer-events"),void 0!==Qe.el.lastFocus&&(Qe.el.lastFocus=void 0)}catch(cn){console.error(cn)}return Qe.el.remove(),!0});return function(Ke,jt,Jt,tn,Tt,Hn,Gn){return et.apply(this,arguments)}}(),_t=et=>et.querySelector("ion-app")||et.body,yt=function(){var et=(0,c.Z)(function*(Qe,Ke,jt,Jt){jt.classList.remove("overlay-hidden");const Tt=Ke(Qe.el,Jt);(!Qe.animated||!q.c.getBoolean("animated",!0))&&Tt.duration(0),Qe.keyboardClose&&Tt.beforeAddWrite(()=>{const Gn=jt.ownerDocument.activeElement;null!=Gn&&Gn.matches("input,ion-input, ion-textarea")&&Gn.blur()});const Hn=Fe.get(Qe)||[];return Fe.set(Qe,[...Hn,Tt]),yield Tt.play(),!0});return function(Ke,jt,Jt,tn){return et.apply(this,arguments)}}(),ot=(et,Qe)=>{let Ke;const jt=new Promise(Jt=>Ke=Jt);return at(et,Qe,Jt=>{Ke(Jt.detail)}),jt},at=(et,Qe,Ke)=>{const jt=Jt=>{(0,Te.b)(et,Qe,jt),Ke(Jt)};(0,Te.a)(et,Qe,jt)},Xe=et=>"cancel"===et||et===we,Ae=et=>et(),Me=(et,Qe)=>{if("function"==typeof et)return q.c.get("_zoneGate",Ae)(()=>{try{return et(Qe)}catch(jt){throw jt}})},we="backdrop",gt="gesture"},6738:(_n,It,L)=>{"use strict";L.d(It,{H:()=>Un,a:()=>Ke,b:()=>$e,c:()=>Ve,d:()=>Ye,g:()=>kt,h:()=>Cr,r:()=>Ie});var c=L(5861);let Pe,Fe,G=0,Te=!1,ge=!1;const Se=typeof window<"u"?window:{},Ue=Se.CSS,pe=Se.document||{head:{}},re={$flags$:0,$resourcesUrl$:"",jmp:le=>le(),raf:le=>requestAnimationFrame(le),ael:(le,ye,St,vt)=>le.addEventListener(ye,St,vt),rel:(le,ye,St,vt)=>le.removeEventListener(ye,St,vt)},de=(()=>(pe.head.attachShadow+"").indexOf("[native")>-1)(),Oe=le=>Promise.resolve(le),Ge=(()=>{try{return new CSSStyleSheet,!0}catch(le){}return!1})(),ut={},Pt=new WeakMap,be=le=>Pt.get(le),Ie=(le,ye)=>Pt.set(ye.$lazyInstance$=le,ye),dt=(le,ye)=>ye in le,ft=le=>console.error(le),qe=new Map,Le=new Map,ke=[],H=[],De=[],it=(le,ye)=>St=>{le.push(St),Te||(Te=!0,ye&&4&re.$flags$?ot(yt):re.raf(yt))},_t=(le,ye)=>{let St=0,vt=0;for(;St<le.length&&(vt=performance.now())<ye;)try{le[St++](vt)}catch(Ut){ft(Ut)}St===le.length?le.length=0:0!==St&&le.splice(0,St)},yt=()=>{G++,(le=>{for(let ye=0;ye<le.length;ye++)try{le[ye](performance.now())}catch(St){ft(St)}le.length=0})(ke);const le=2==(6&re.$flags$)?performance.now()+10*Math.ceil(G*(1/22)):1/0;_t(H,le),_t(De,le),H.length>0&&(De.push(...H),H.length=0),(Te=ke.length+H.length+De.length>0)?re.raf(yt):G=0},ot=le=>Oe().then(le),at=it(ke,!1),Xe=it(H,!0),Ae={},et=le=>"object"==(le=typeof le)||"function"===le,Ke=()=>Ue&&Ue.supports&&Ue.supports("color","var(--c)")?Oe():L.e(4952).then(L.t.bind(L,9723,23)).then(()=>(re.$cssShim$=Se.__cssshim)?re.$cssShim$.i():0),Gn=new WeakMap,hr=(le,ye)=>"sc-"+le,Cr=(le,ye,...St)=>{let vt=null,Ut=!1,je=!1,Ne=[];const Ct=un=>{for(let Sn=0;Sn<un.length;Sn++)vt=un[Sn],Array.isArray(vt)?Ct(vt):null!=vt&&"boolean"!=typeof vt&&((Ut="function"!=typeof le&&!et(vt))&&(vt=String(vt)),Ut&&je?Ne[Ne.length-1].$text$+=vt:Ne.push(Ut?Pr(null,vt):vt),je=Ut)};if(Ct(St),ye){const un=ye.className||ye.class;un&&(ye.class="object"!=typeof un?un:Object.keys(un).filter(Sn=>un[Sn]).join(" "))}const Nt=Pr(le,null);return Nt.$attrs$=ye,Ne.length>0&&(Nt.$children$=Ne),Nt},Pr=(le,ye)=>({$flags$:0,$tag$:le,$text$:ye,$elm$:null,$children$:null,$attrs$:null}),Un={},nn=(le,ye,St,vt,Ut,je)=>{if(St!==vt){let Ne=dt(le,ye),Ct=ye.toLowerCase();if("class"===ye){const Nt=le.classList,un=ei(St),Sn=ei(vt);Nt.remove(...un.filter(Kn=>Kn&&!Sn.includes(Kn))),Nt.add(...Sn.filter(Kn=>Kn&&!un.includes(Kn)))}else if("style"===ye){for(const Nt in St)(!vt||null==vt[Nt])&&(Nt.includes("-")?le.style.removeProperty(Nt):le.style[Nt]="");for(const Nt in vt)(!St||vt[Nt]!==St[Nt])&&(Nt.includes("-")?le.style.setProperty(Nt,vt[Nt]):le.style[Nt]=vt[Nt])}else if("ref"===ye)vt&&vt(le);else if(Ne||"o"!==ye[0]||"n"!==ye[1]){const Nt=et(vt);if((Ne||Nt&&null!==vt)&&!Ut)try{if(le.tagName.includes("-"))le[ye]=vt;else{let un=null==vt?"":vt;"list"===ye?Ne=!1:(null==St||le[ye]!=un)&&(le[ye]=un)}}catch(un){}null==vt||!1===vt?le.removeAttribute(ye):(!Ne||4&je||Ut)&&!Nt&&le.setAttribute(ye,vt=!0===vt?"":vt)}else ye="-"===ye[2]?ye.slice(3):dt(Se,Ct)?Ct.slice(2):Ct[2]+ye.slice(3),St&&re.rel(le,ye,St,!1),vt&&re.ael(le,ye,vt,!1)}},ui=/\s/,ei=le=>le?le.split(ui):[],Nr=(le,ye,St,vt)=>{const Ut=11===ye.$elm$.nodeType&&ye.$elm$.host?ye.$elm$.host:ye.$elm$,je=le&&le.$attrs$||Ae,Ne=ye.$attrs$||Ae;for(vt in je)vt in Ne||nn(Ut,vt,je[vt],void 0,St,ye.$flags$);for(vt in Ne)nn(Ut,vt,je[vt],Ne[vt],St,ye.$flags$)},Dr=(le,ye,St,vt)=>{let Ne,Ct,Ut=ye.$children$[St],je=0;if(null!==Ut.$text$)Ne=Ut.$elm$=pe.createTextNode(Ut.$text$);else{if(ge||(ge="svg"===Ut.$tag$),Ne=Ut.$elm$=pe.createElementNS(ge?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Ut.$tag$),ge&&"foreignObject"===Ut.$tag$&&(ge=!1),Nr(null,Ut,ge),(le=>null!=le)(Pe)&&Ne["s-si"]!==Pe&&Ne.classList.add(Ne["s-si"]=Pe),Ut.$children$)for(je=0;je<Ut.$children$.length;++je)Ct=Dr(le,Ut,je),Ct&&Ne.appendChild(Ct);"svg"===Ut.$tag$?ge=!1:"foreignObject"===Ne.tagName&&(ge=!0)}return Ne},Fr=(le,ye,St,vt,Ut,je)=>{let Ct,Ne=le;for(Ne.shadowRoot&&Ne.tagName===Fe&&(Ne=Ne.shadowRoot);Ut<=je;++Ut)vt[Ut]&&(Ct=Dr(null,St,Ut),Ct&&(vt[Ut].$elm$=Ct,Ne.insertBefore(Ct,ye)))},Fn=(le,ye,St,vt,Ut)=>{for(;ye<=St;++ye)(vt=le[ye])&&(Ut=vt.$elm$,Lr(vt),Ut.remove())},mn=(le,ye)=>le.$tag$===ye.$tag$,Wn=(le,ye)=>{const St=ye.$elm$=le.$elm$,vt=le.$children$,Ut=ye.$children$,je=ye.$tag$,Ne=ye.$text$;null===Ne?(ge="svg"===je||"foreignObject"!==je&&ge,Nr(le,ye,ge),null!==vt&&null!==Ut?((le,ye,St,vt)=>{let Pn,Ut=0,je=0,Ne=ye.length-1,Ct=ye[0],Nt=ye[Ne],un=vt.length-1,Sn=vt[0],Kn=vt[un];for(;Ut<=Ne&&je<=un;)null==Ct?Ct=ye[++Ut]:null==Nt?Nt=ye[--Ne]:null==Sn?Sn=vt[++je]:null==Kn?Kn=vt[--un]:mn(Ct,Sn)?(Wn(Ct,Sn),Ct=ye[++Ut],Sn=vt[++je]):mn(Nt,Kn)?(Wn(Nt,Kn),Nt=ye[--Ne],Kn=vt[--un]):mn(Ct,Kn)?(Wn(Ct,Kn),le.insertBefore(Ct.$elm$,Nt.$elm$.nextSibling),Ct=ye[++Ut],Kn=vt[--un]):mn(Nt,Sn)?(Wn(Nt,Sn),le.insertBefore(Nt.$elm$,Ct.$elm$),Nt=ye[--Ne],Sn=vt[++je]):(Pn=Dr(ye&&ye[je],St,je),Sn=vt[++je],Pn&&Ct.$elm$.parentNode.insertBefore(Pn,Ct.$elm$));Ut>Ne?Fr(le,null==vt[un+1]?null:vt[un+1].$elm$,St,vt,je,un):je>un&&Fn(ye,Ut,Ne)})(St,vt,ye,Ut):null!==Ut?(null!==le.$text$&&(St.textContent=""),Fr(St,null,ye,Ut,0,Ut.length-1)):null!==vt&&Fn(vt,0,vt.length-1),ge&&"svg"===je&&(ge=!1)):le.$text$!==Ne&&(St.data=Ne)},Lr=le=>{le.$attrs$&&le.$attrs$.ref&&le.$attrs$.ref(null),le.$children$&&le.$children$.forEach(Lr)},_r=(le,ye)=>{ye&&!le.$onRenderResolve$&&ye["s-p"].push(new Promise(St=>le.$onRenderResolve$=St))},Ir=(le,ye,St,vt)=>{if(ye.$flags$|=16,4&ye.$flags$)return void(ye.$flags$|=512);const Ne=ye.$lazyInstance$,Ct=()=>oi(le,ye,St,Ne,vt);return _r(ye,ye.$ancestorComponent$),vt&&(ye.$flags$|=256,ye.$queuedListeners$&&(ye.$queuedListeners$.forEach(([un,Sn])=>pi(Ne,un,Sn)),ye.$queuedListeners$=null)),gr(void 0,()=>Xe(Ct))},oi=(le,ye,St,vt,Ut)=>{const Ne=le["s-rc"];Ut&&((le,ye,St)=>{const Ut=((le,ye,St,vt)=>{let Ut=hr(ye.$tagName$),je=Le.get(Ut);if(le=11===le.nodeType?le:pe,je)if("string"==typeof je){let Ct,Ne=Gn.get(le=le.head||le);if(Ne||Gn.set(le,Ne=new Set),!Ne.has(Ut)){if(re.$cssShim$){Ct=re.$cssShim$.createHostStyle(vt,Ut,je,!!(10&ye.$flags$));const Nt=Ct["s-sc"];Nt&&(Ut=Nt,Ne=null)}else Ct=pe.createElement("style"),Ct.innerHTML=je;le.insertBefore(Ct,le.querySelector("link")),Ne&&Ne.add(Ut)}}else le.adoptedStyleSheets.includes(je)||(le.adoptedStyleSheets=[...le.adoptedStyleSheets,je]);return Ut})(de&&le.shadowRoot?le.shadowRoot:le.getRootNode(),ye,0,le);10&ye.$flags$&&(le["s-sc"]=Ut,le.classList.add(Ut+"-h"))})(le,St);((le,ye,St,vt)=>{Fe=le.tagName;const Ut=ye.$vnode$||Pr(null,null),je=(le=>le&&le.$tag$===Un)(vt)?vt:Cr(null,null,vt);je.$tag$=null,je.$flags$|=4,ye.$vnode$=je,je.$elm$=Ut.$elm$=le.shadowRoot||le,Pe=le["s-sc"],Wn(Ut,je)})(le,ye,0,xr(vt)),re.$cssShim$&&re.$cssShim$.updateHost(le),ye.$flags$&=-17,ye.$flags$|=2,Ne&&(Ne.forEach(Nt=>Nt()),le["s-rc"]=void 0);{const Nt=le["s-p"],un=()=>ti(le,ye,St);0===Nt.length?un():(Promise.all(Nt).then(un),ye.$flags$|=4,Nt.length=0)}},xr=(le,ye)=>{try{le=le.render()}catch(St){ft(St)}return le},ti=(le,ye,St)=>{const Ut=ye.$lazyInstance$,je=ye.$ancestorComponent$;64&ye.$flags$||(ye.$flags$|=64,zr(le),pi(Ut,"componentDidLoad"),ye.$onReadyResolve$(le),je||ai()),ye.$onInstanceResolve$(le),ye.$onRenderResolve$&&(ye.$onRenderResolve$(),ye.$onRenderResolve$=void 0),512&ye.$flags$&&ot(()=>Ir(le,ye,St,!1)),ye.$flags$&=-517},ai=le=>{zr(pe.documentElement),re.$flags$|=2},pi=(le,ye,St)=>{if(le&&le[ye])try{return le[ye](St)}catch(vt){ft(vt)}},gr=(le,ye)=>le&&le.then?le.then(ye):ye(),zr=le=>le.classList.add("hydrated"),He=(le,ye,St)=>{if(ye.$members$){const vt=Object.entries(ye.$members$),Ut=le.prototype;if(vt.forEach(([je,[Ne]])=>{31&Ne||2&St&&32&Ne?Object.defineProperty(Ut,je,{get(){return((le,ye)=>be(this).$instanceValues$.get(ye))(0,je)},set(Ct){((le,ye,St,vt)=>{const Ut=be(le),je=Ut.$hostElement$,Ne=Ut.$instanceValues$.get(ye),Ct=Ut.$flags$,Nt=Ut.$lazyInstance$;St=((le,ye)=>null==le||et(le)?le:4&ye?"false"!==le&&(""===le||!!le):2&ye?parseFloat(le):1&ye?String(le):le)(St,vt.$members$[ye][0]),St!==Ne&&(!(8&Ct)||void 0===Ne)&&(Ut.$instanceValues$.set(ye,St),Nt&&2==(18&Ct)&&Ir(je,Ut,vt,!1))})(this,je,Ct,ye)},configurable:!0,enumerable:!0}):1&St&&64&Ne&&Object.defineProperty(Ut,je,{value(...Ct){const Nt=be(this);return Nt.$onInstancePromise$.then(()=>Nt.$lazyInstance$[je](...Ct))}})}),1&St){const je=new Map;Ut.attributeChangedCallback=function(Ne,Ct,Nt){re.jmp(()=>{const un=je.get(Ne);this[un]=(null!==Nt||"boolean"!=typeof this[un])&&Nt})},le.observedAttributes=vt.filter(([Ne,Ct])=>15&Ct[0]).map(([Ne,Ct])=>{const Nt=Ct[1]||Ne;return je.set(Nt,Ne),Nt})}}return le},At=function(){var le=(0,c.Z)(function*(ye,St,vt,Ut,je){if(!(32&St.$flags$)){St.$flags$|=32;{if(je=((le,ye,St)=>{const vt=le.$tagName$.replace(/-/g,"_"),Ut=le.$lazyBundleIds$,je=qe.get(Ut);return je?je[vt]:L(5899)(`./${Ut}.entry.js`).then(Ne=>(qe.set(Ut,Ne),Ne[vt]),ft)})(vt),je.then){const Sn=()=>{};je=yield je,Sn()}je.isProxied||(He(je,vt,2),je.isProxied=!0);const un=()=>{};St.$flags$|=8;try{new je(St)}catch(Sn){ft(Sn)}St.$flags$&=-9,un()}const Nt=hr(vt.$tagName$);if(!Le.has(Nt)&&je.style){const un=()=>{};let Sn=je.style;8&vt.$flags$&&(Sn=yield L.e(5487).then(L.bind(L,5487)).then(Kn=>Kn.scopeCss(Sn,Nt,!1))),((le,ye,St)=>{let vt=Le.get(le);Ge&&St?(vt=vt||new CSSStyleSheet,vt.replace(ye)):vt=ye,Le.set(le,vt)})(Nt,Sn,!!(1&vt.$flags$)),un()}}const Ne=St.$ancestorComponent$,Ct=()=>Ir(ye,St,vt,!0);Ne&&Ne["s-rc"]?Ne["s-rc"].push(Ct):Ct()});return function(St,vt,Ut,je,Ne){return le.apply(this,arguments)}}(),pt=(le,ye)=>{if(!(1&re.$flags$)){const St=()=>{},vt=be(le);if(ye.$listeners$&&(vt.$rmListeners$=((le,ye,St)=>{ye.$queuedListeners$=ye.$queuedListeners$||[];const vt=St.map(([Ut,je,Ne])=>{const Ct=((le,ye)=>32&ye?pe.body:le)(le,Ut),Nt=((le,ye)=>St=>{256&le.$flags$?le.$lazyInstance$[ye](St):le.$queuedListeners$.push([ye,St])})(ye,Ne),un=(le=>0!=(2&le))(Ut);return re.ael(Ct,je,Nt,un),()=>re.rel(Ct,je,Nt,un)});return()=>vt.forEach(Ut=>Ut())})(le,vt,ye.$listeners$)),!(1&vt.$flags$)){vt.$flags$|=1;{let Ut=le;for(;Ut=Ut.parentNode||Ut.host;)if(Ut["s-p"]){_r(vt,vt.$ancestorComponent$=Ut);break}}ye.$members$&&Object.entries(ye.$members$).forEach(([Ut,[je]])=>{if(31&je&&le.hasOwnProperty(Ut)){const Ne=le[Ut];delete le[Ut],le[Ut]=Ne}}),ot(()=>At(le,vt,ye))}St()}},$e=(le,ye={})=>{const vt=[],Ut=ye.exclude||[],je=Se.customElements,Ne=pe.head,Ct=Ne.querySelector("meta[charset]"),Nt=pe.createElement("style"),un=[];let Sn,Kn=!0;Object.assign(re,ye),re.$resourcesUrl$=new URL(ye.resourcesUrl||"./",pe.baseURI).href,ye.syncQueue&&(re.$flags$|=4),le.forEach(Pn=>Pn[1].forEach(cr=>{const Qn={$flags$:cr[0],$tagName$:cr[1],$members$:cr[2],$listeners$:cr[3]};Qn.$members$=cr[2],Qn.$listeners$=cr[3],!de&&1&Qn.$flags$&&(Qn.$flags$|=8);const ni=Qn.$tagName$,mi=class extends HTMLElement{constructor(li){super(li),(le=>{const ye={$flags$:0,$hostElement$:le,$instanceValues$:new Map};ye.$onInstancePromise$=new Promise(St=>ye.$onInstanceResolve$=St),ye.$onReadyPromise$=new Promise(St=>ye.$onReadyResolve$=St),le["s-p"]=[],le["s-rc"]=[],Pt.set(le,ye)})(li=this),1&Qn.$flags$&&(de?li.attachShadow({mode:"open"}):"shadowRoot"in li||(li.shadowRoot=li))}connectedCallback(){Sn&&(clearTimeout(Sn),Sn=null),Kn?un.push(this):re.jmp(()=>pt(this,Qn))}disconnectedCallback(){re.jmp(()=>(le=>{if(!(1&re.$flags$)){const ye=be(le),St=ye.$lazyInstance$;ye.$rmListeners$&&(ye.$rmListeners$(),ye.$rmListeners$=void 0),re.$cssShim$&&re.$cssShim$.removeHost(le),pi(St,"componentDidUnload")}})(this))}forceUpdate(){((le,ye)=>{{const St=be(le);St.$hostElement$.isConnected&&2==(18&St.$flags$)&&Ir(le,St,ye,!1)}})(this,Qn)}componentOnReady(){return be(this).$onReadyPromise$}};Qn.$lazyBundleIds$=Pn[0],!Ut.includes(ni)&&!je.get(ni)&&(vt.push(ni),je.define(ni,He(mi,Qn,1)))})),Nt.innerHTML=vt+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.setAttribute("data-styles",""),Ne.insertBefore(Nt,Ct?Ct.nextSibling:Ne.firstChild),Kn=!1,un.length>0?un.forEach(Pn=>Pn.connectedCallback()):re.jmp(()=>Sn=setTimeout(ai,30))},Ve=(le,ye,St)=>{const vt=kt(le);return{emit:Ut=>{const je=new CustomEvent(ye,{bubbles:!!(4&St),composed:!!(2&St),cancelable:!!(1&St),detail:Ut});return vt.dispatchEvent(je),je}}},Ye=(le,ye)=>ye in ut?ut[ye]:"window"===ye?Se:"document"===ye?pe:"isServer"!==ye&&"isPrerender"!==ye&&("isClient"===ye||("resourcesUrl"===ye||"publicPath"===ye?(le=>{const ye=new URL(".",re.$resourcesUrl$);return ye.origin!==Se.location.origin?ye.href:ye.pathname})():"queue"===ye?{write:Xe,read:at,tick:{then:St=>ot(St)}}:void 0)),kt=le=>be(le).$hostElement$},7579:(_n,It,L)=>{"use strict";var c=L(1481),q=L(4650),G=L(4262),Te=L(2078),Pe=L(6738);let ge=(()=>{class u{constructor(){window,(0,Pe.a)().then(()=>{(0,Pe.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[32,"keyup","handleBackdropKeyUp"]]]]]],undefined)})}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=q.Xpm({type:u,selectors:[["app-root"]],decls:2,vars:0,template:function(l,m){1&l&&(q.TgZ(0,"ion-app"),q._UZ(1,"ion-router-outlet"),q.qZA())},dependencies:[Te.dr,Te.jP]}),u})();const Se=[{path:"home",loadChildren:()=>L.e(4851).then(L.bind(L,4851)).then(u=>u.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",loadChildren:()=>L.e(4987).then(L.bind(L,4987)).then(u=>u.LoginPageModule)},{path:"sign-up",loadChildren:()=>L.e(4317).then(L.bind(L,4317)).then(u=>u.SignUpPageModule)},{path:"tracks/:searchTermSpotify",loadChildren:()=>Promise.all([L.e(4177),L.e(5410)]).then(L.bind(L,5410)).then(u=>u.TracksPageModule)},{path:"details/:id",loadChildren:()=>Promise.all([L.e(4177),L.e(8105)]).then(L.bind(L,8105)).then(u=>u.DetailsPageModule)},{path:"trackslist",loadChildren:()=>L.e(9456).then(L.bind(L,9456)).then(u=>u.TrackslistPageModule)},{path:"trackslist/:searchTerm",loadChildren:()=>L.e(9456).then(L.bind(L,9456)).then(u=>u.TrackslistPageModule)},{path:"edit/:id",loadChildren:()=>Promise.all([L.e(4177),L.e(8592),L.e(5260)]).then(L.bind(L,5260)).then(u=>u.EditPageModule)},{path:"add-song",loadChildren:()=>Promise.all([L.e(4177),L.e(8592),L.e(4251)]).then(L.bind(L,4251)).then(u=>u.AddSongPageModule)}];let Ue=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=q.oAB({type:u}),u.\u0275inj=q.cJS({imports:[G.Bz.forRoot(Se,{preloadingStrategy:G.wm}),G.Bz]}),u})();var pe=L(433),re=L(2011),de=L(1205),Oe=L(9751),Ge=L(9646),ut=L(8996),Pt=L(4986),be=L(4482),Ie=L(5403),dt=L(4004),ft=L(3900),qe=L(8623),Je=L(3942),Le=L(5861),ke=L(2951),H=L(2090),De=L(4859);const it="firebasestorage.googleapis.com",Be="storageBucket";class at extends H.ZR{constructor(a,l,m=0){super(Ae(a),`Firebase Storage: ${l} (${Ae(a)})`),this.status_=m,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return Ae(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Xe=(()=>{return(u=Xe||(Xe={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Xe;var u})();function Ae(u){return"storage/"+u}function Me(){return new at(Xe.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jt(){return new at(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jt(){return new at(Xe.CANCELED,"User canceled the upload/download.")}function Gn(){return new at(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hr(u){return new at(Xe.INVALID_ARGUMENT,u)}function Cr(){return new at(Xe.APP_DELETED,"The Firebase app was deleted.")}function Pr(u){return new at(Xe.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Un(u,a){return new at(Xe.INVALID_FORMAT,"String does not match format '"+u+"': "+a)}function tr(u){throw new at(Xe.INTERNAL_ERROR,"Internal error: "+u)}class nn{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let m;try{m=nn.makeFromUrl(a,l)}catch(C){return new nn(a,"")}if(""===m.path)return m;throw function Tt(u){return new at(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let m=null;const C="([A-Za-z0-9.\\-_]+)",J=new RegExp("^gs://"+C+"(/(.*))?$","i");function Ce(Ms){Ms.path_=decodeURIComponent(Ms.path)}const Gt=l.replace(/[.]/g,"\\."),Ts=[{regex:J,indices:{bucket:1,path:3},postModify:function M(Ms){"/"===Ms.path.charAt(Ms.path.length-1)&&(Ms.path_=Ms.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Gt}/v[A-Za-z0-9_]+/b/${C}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ce},{regex:new RegExp(`^https?://${l===it?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${C}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ce}];for(let Ms=0;Ms<Ts.length;Ms++){const Kl=Ts[Ms],dc=Kl.regex.exec(a);if(dc){let Lc=dc[Kl.indices.path];Lc||(Lc=""),m=new nn(dc[Kl.indices.bucket],Lc),Kl.postModify(m);break}}if(null==m)throw function tn(u){return new at(Xe.INVALID_URL,"Invalid URL '"+u+"'.")}(a);return m}}class ui{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Cn(u){return"string"==typeof u||u instanceof String}function mn(u){return Wn()&&u instanceof Blob}function Wn(){return typeof Blob<"u"&&!(0,H.UG)()}function Lr(u,a,l,m){if(m<a)throw hr(`Invalid value for '${u}'. Expected ${a} or greater.`);if(m>l)throw hr(`Invalid value for '${u}'. Expected ${l} or less.`)}function rn(u,a,l){let m=a;return null==l&&(m=`https://${a}`),`${l}://${m}/v0${u}`}function _r(u){const a=encodeURIComponent;let l="?";for(const m in u)u.hasOwnProperty(m)&&(l=l+(a(m)+"=")+a(u[m])+"&");return l=l.slice(0,-1),l}var Ir=(()=>{return(u=Ir||(Ir={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",Ir;var u})();function oi(u,a){const l=u>=500&&u<600,C=-1!==[408,429].indexOf(u),M=-1!==a.indexOf(u);return l||C||M}class xr{constructor(a,l,m,C,M,U,J,ue,Ce,Rt,Gt,Qt=!0){this.url_=a,this.method_=l,this.headers_=m,this.body_=C,this.successCodes_=M,this.additionalRetryCodes_=U,this.callback_=J,this.errorCallback_=ue,this.timeout_=Ce,this.progressCallback_=Rt,this.connectionFactory_=Gt,this.retry=Qt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((vn,Ln)=>{this.resolve_=vn,this.reject_=Ln,this.start_()})}start_(){const l=(m,C)=>{const M=this.resolve_,U=this.reject_,J=C.connection;if(C.wasSuccessCode)try{const ue=this.callback_(J,J.getResponse());!function Dr(u){return void 0!==u}(ue)?M():M(ue)}catch(ue){U(ue)}else if(null!==J){const ue=Me();ue.serverResponse=J.getErrorText(),U(this.errorCallback_?this.errorCallback_(J,ue):ue)}else U(C.canceled?this.appDelete_?Cr():Jt():jt())};this.canceled_?l(0,new ti(!1,null,!0)):this.backoffId_=function ei(u,a,l){let m=1,C=null,M=null,U=!1,J=0;function ue(){return 2===J}let Ce=!1;function Rt(...Jr){Ce||(Ce=!0,a.apply(null,Jr))}function Gt(Jr){C=setTimeout(()=>{C=null,u(vn,ue())},Jr)}function Qt(){M&&clearTimeout(M)}function vn(Jr,...zs){if(Ce)return void Qt();if(Jr)return Qt(),void Rt.call(null,Jr,...zs);if(ue()||U)return Qt(),void Rt.call(null,Jr,...zs);let Ts;m<64&&(m*=2),1===J?(J=2,Ts=0):Ts=1e3*(m+Math.random()),Gt(Ts)}let Ln=!1;function yr(Jr){Ln||(Ln=!0,Qt(),!Ce&&(null!==C?(Jr||(J=2),clearTimeout(C),Gt(0)):Jr||(J=1)))}return Gt(0),M=setTimeout(()=>{U=!0,yr(!0)},l),yr}((m,C)=>{if(C)return void m(!1,new ti(!1,null,!0));const M=this.connectionFactory_();this.pendingConnection_=M;const U=J=>{null!==this.progressCallback_&&this.progressCallback_(J.loaded,J.lengthComputable?J.total:-1)};null!==this.progressCallback_&&M.addUploadProgressListener(U),M.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&M.removeUploadProgressListener(U),this.pendingConnection_=null;const J=M.getErrorCode()===Ir.NO_ERROR,ue=M.getStatus();if(!J||oi(ue,this.additionalRetryCodes_)&&this.retry){const Rt=M.getErrorCode()===Ir.ABORT;return void m(!1,new ti(!1,null,Rt))}const Ce=-1!==this.successCodes_.indexOf(ue);m(!0,new ti(Ce,M))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Nr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ti{constructor(a,l,m){this.wasSuccessCode=a,this.connection=l,this.canceled=!!m}}function We(...u){const a=function $t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let m=0;m<u.length;m++)l.append(u[m]);return l.getBlob()}if(Wn())return new Blob(u);throw new at(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Lt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _e{constructor(a,l){this.data=a,this.contentType=l||null}}function me(u,a){switch(u){case Lt.RAW:return new _e(He(a));case Lt.BASE64:case Lt.BASE64URL:return new _e(pt(u,a));case Lt.DATA_URL:return new _e(function $e(u){const a=new yn(u);return a.base64?pt(Lt.BASE64,a.rest):function At(u){let a;try{a=decodeURIComponent(u)}catch(l){throw Un(Lt.DATA_URL,"Malformed data URL.")}return He(a)}(a.rest)}(a),function Ve(u){return new yn(u).contentType}(a))}throw Me()}function He(u){const a=[];for(let l=0;l<u.length;l++){let m=u.charCodeAt(l);m<=127?a.push(m):m<=2047?a.push(192|m>>6,128|63&m):55296==(64512&m)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(m=65536|(1023&m)<<10|1023&u.charCodeAt(++l),a.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m)):a.push(239,191,189):56320==(64512&m)?a.push(239,191,189):a.push(224|m>>12,128|m>>6&63,128|63&m)}return new Uint8Array(a)}function pt(u,a){switch(u){case Lt.BASE64:{const C=-1!==a.indexOf("-"),M=-1!==a.indexOf("_");if(C||M)throw Un(u,"Invalid character '"+(C?"-":"_")+"' found: is it base64url encoded?");break}case Lt.BASE64URL:{const C=-1!==a.indexOf("+"),M=-1!==a.indexOf("/");if(C||M)throw Un(u,"Invalid character '"+(C?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Xt(u){if(typeof atob>"u")throw function lr(u){return new at(Xe.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(C){throw C.message.includes("polyfill")?C:Un(u,"Invalid character found")}const m=new Uint8Array(l.length);for(let C=0;C<l.length;C++)m[C]=l.charCodeAt(C);return m}class yn{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw Un(Lt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const m=l[1]||null;null!=m&&(this.base64=function fe(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(m,";base64"),this.contentType=this.base64?m.substring(0,m.length-7):m),this.rest=a.substring(a.indexOf(",")+1)}}class Ye{constructor(a,l){let m=0,C="";mn(a)?(this.data_=a,m=a.size,C=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),m=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),m=a.length),this.size_=m,this.type_=C}size(){return this.size_}type(){return this.type_}slice(a,l){if(mn(this.data_)){const C=function rt(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===C?null:new Ye(C)}{const m=new Uint8Array(this.data_.buffer,a,l-a);return new Ye(m,!0)}}static getBlob(...a){if(Wn()){const l=a.map(m=>m instanceof Ye?m.data_:m);return new Ye(We.apply(null,l))}{const l=a.map(U=>Cn(U)?me(Lt.RAW,U).data:U.data_);let m=0;l.forEach(U=>{m+=U.byteLength});const C=new Uint8Array(m);let M=0;return l.forEach(U=>{for(let J=0;J<U.length;J++)C[M++]=U[J]}),new Ye(C,!0)}}uploadData(){return this.data_}}function kt(u){let a;try{a=JSON.parse(u)}catch(l){return null}return function Fn(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function St(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function vt(u,a){return a}class Ut{constructor(a,l,m,C){this.server=a,this.local=l||a,this.writable=!!m,this.xform=C||vt}}let je=null;function Ct(){if(je)return je;const u=[];u.push(new Ut("bucket")),u.push(new Ut("generation")),u.push(new Ut("metageneration")),u.push(new Ut("name","fullPath",!0));const l=new Ut("name");l.xform=function a(M,U){return function Ne(u){return!Cn(u)||u.length<2?u:St(u)}(U)},u.push(l);const C=new Ut("size");return C.xform=function m(M,U){return void 0!==U?Number(U):U},u.push(C),u.push(new Ut("timeCreated")),u.push(new Ut("updated")),u.push(new Ut("md5Hash",null,!0)),u.push(new Ut("cacheControl",null,!0)),u.push(new Ut("contentDisposition",null,!0)),u.push(new Ut("contentEncoding",null,!0)),u.push(new Ut("contentLanguage",null,!0)),u.push(new Ut("contentType",null,!0)),u.push(new Ut("metadata","customMetadata",!0)),je=u,je}function Sn(u,a,l){const m=kt(a);return null===m?null:function un(u,a,l){const m={type:"file"},C=l.length;for(let M=0;M<C;M++){const U=l[M];m[U.local]=U.xform(m,a[U.server])}return function Nt(u,a){Object.defineProperty(u,"ref",{get:function l(){const M=new nn(u.bucket,u.fullPath);return a._makeStorageReference(M)}})}(m,u),m}(u,m,l)}function Pn(u,a){const l={},m=a.length;for(let C=0;C<m;C++){const M=a[C];M.writable&&(l[M.server]=u[M.local])}return JSON.stringify(l)}const cr="prefixes",Qn="items";class li{constructor(a,l,m,C){this.url=a,this.method=l,this.handler=m,this.timeout=C,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pi(u){if(!u)throw Me()}function Ji(u,a){return function l(m,C){const M=Sn(u,C,a);return Pi(null!==M),M}}function ir(u){return function a(l,m){let C;return C=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Qe(){return new at(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function et(){return new at(Xe.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function gt(u){return new at(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function Ke(u){return new at(Xe.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):m,C.status=l.getStatus(),C.serverResponse=m.serverResponse,C}}function Xr(u){const a=ir(u);return function l(m,C){let M=a(m,C);return 404===m.getStatus()&&(M=function we(u){return new at(Xe.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),M.serverResponse=C.serverResponse,M}}function Tr(u,a,l){const C=rn(a.fullServerUrl(),u.host,u._protocol),U=u.maxOperationRetryTime,J=new li(C,"GET",Ji(u,l),U);return J.errorHandler=Xr(a),J}function Wi(u,a,l,m,C){const M={};M.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(M.delimiter=l),m&&(M.pageToken=m),C&&(M.maxResults=C);const J=rn(a.bucketOnlyServerUrl(),u.host,u._protocol),Ce=u.maxOperationRetryTime,Rt=new li(J,"GET",function Zr(u,a){return function l(m,C){const M=function mi(u,a,l){const m=kt(l);return null===m?null:function ni(u,a,l){const m={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[cr])for(const C of l[cr]){const M=C.replace(/\/$/,""),U=u._makeStorageReference(new nn(a,M));m.prefixes.push(U)}if(l[Qn])for(const C of l[Qn]){const M=u._makeStorageReference(new nn(a,C.name));m.items.push(M)}return m}(u,a,m)}(u,a,C);return Pi(null!==M),M}}(u,a.bucket),Ce);return Rt.urlParams=M,Rt.errorHandler=ir(a),Rt}function ce(u,a,l){const m=Object.assign({},l);return m.fullPath=u.path,m.size=a.size(),m.contentType||(m.contentType=function Ht(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),m}class Et{constructor(a,l,m,C){this.current=a,this.total=l,this.finalized=!!m,this.metadata=C||null}}function qt(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch(C){Pi(!1)}return Pi(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Vr={STATE_CHANGED:"state_changed"},mr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bi(u){switch(u){case"running":case"pausing":case"canceling":return mr.RUNNING;case"paused":return mr.PAUSED;case"success":return mr.SUCCESS;case"canceled":return mr.CANCELED;default:return mr.ERROR}}class fr{constructor(a,l,m){if(function Fr(u){return"function"==typeof u}(a)||null!=l||null!=m)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=m?m:void 0;else{const M=a;this.next=M.next,this.error=M.error,this.complete=M.complete}}}function fs(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}let mt=null;class lt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ir.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ir.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ir.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,m,C){if(this.sent_)throw tr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==C)for(const M in C)C.hasOwnProperty(M)&&this.xhr_.setRequestHeader(M,C[M].toString());return void 0!==m?this.xhr_.send(m):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(a){return-1}}getResponse(){if(!this.sent_)throw tr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class xt extends lt{initXhr(){this.xhr_.responseType="text"}}function Yt(){return mt?mt():new xt}class Rr{constructor(a,l,m=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=m,this._mappings=Ct(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=C=>{if(this._request=void 0,this._chunkMultiplier=1,C._codeEquals(Xe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const M=this.isExponentialBackoffExpired();if(oi(C.status,[])){if(!M)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();C=jt()}this._error=C,this._transition("error")}},this._metadataErrorHandler=C=>{this._request=void 0,C._codeEquals(Xe.CANCELED)?this.completeTransitions_():(this._error=C,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((C,M)=>{this._resolve=C,this._reject=M,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,m])=>{switch(this._state){case"running":a(l,m);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const m=function Kt(u,a,l,m,C){const M=a.bucketOnlyServerUrl(),U=ce(a,m,C),J={name:U.fullPath},ue=rn(M,u.host,u._protocol),Rt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${m.size()}`,"X-Goog-Upload-Header-Content-Type":U.contentType,"Content-Type":"application/json; charset=utf-8"},Gt=Pn(U,l),Ln=new li(ue,"POST",function vn(yr){let Jr;qt(yr);try{Jr=yr.getResponseHeader("X-Goog-Upload-URL")}catch(zs){Pi(!1)}return Pi(Cn(Jr)),Jr},u.maxUploadRetryTime);return Ln.urlParams=J,Ln.headers=Rt,Ln.body=Gt,Ln.errorHandler=ir(a),Ln}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),C=this._ref.storage._makeRequest(m,Yt,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._uploadUrl=M,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,m)=>{const C=function pn(u,a,l,m){const ue=new li(l,"POST",function M(Ce){const Rt=qt(Ce,["active","final"]);let Gt=null;try{Gt=Ce.getResponseHeader("X-Goog-Upload-Size-Received")}catch(vn){Pi(!1)}Gt||Pi(!1);const Qt=Number(Gt);return Pi(!isNaN(Qt)),new Et(Qt,m.size(),"final"===Rt)},u.maxUploadRetryTime);return ue.headers={"X-Goog-Upload-Command":"query"},ue.errorHandler=ir(a),ue}(this._ref.storage,this._ref._location,a,this._blob),M=this._ref.storage._makeRequest(C,Yt,l,m);this._request=M,M.getPromise().then(U=>{this._request=void 0,this._updateProgress(U.current),this._needToFetchStatus=!1,U.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new Et(this._transferred,this._blob.size()),m=this._uploadUrl;this._resolveToken((C,M)=>{let U;try{U=function qn(u,a,l,m,C,M,U,J){const ue=new Et(0,0);if(U?(ue.current=U.current,ue.total=U.total):(ue.current=0,ue.total=m.size()),m.size()!==ue.total)throw function ar(){return new at(Xe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Ce=ue.total-ue.current;let Rt=Ce;C>0&&(Rt=Math.min(Rt,C));const Gt=ue.current;let vn="";vn=0===Rt?"finalize":Ce===Rt?"upload, finalize":"upload";const Ln={"X-Goog-Upload-Command":vn,"X-Goog-Upload-Offset":`${ue.current}`},yr=m.slice(Gt,Gt+Rt);if(null===yr)throw Gn();const Ts=new li(l,"POST",function Jr(Ms,Kl){const dc=qt(Ms,["active","final"]),Ju=ue.current+Rt,Lc=m.size();let ed;return ed="final"===dc?Ji(a,M)(Ms,Kl):null,new Et(Ju,Lc,"final"===dc,ed)},a.maxUploadRetryTime);return Ts.headers=Ln,Ts.body=yr.uploadData(),Ts.progressCallback=J||null,Ts.errorHandler=ir(u),Ts}(this._ref._location,this._ref.storage,m,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(ue){return this._error=ue,void this._transition("error")}const J=this._ref.storage._makeRequest(U,Yt,C,M,!1);this._request=J,J.getPromise().then(ue=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ue.current),ue.finalized?(this._metadata=ue.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const m=Tr(this._ref.storage,this._ref._location,this._mappings),C=this._ref.storage._makeRequest(m,Yt,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const m=function nt(u,a,l,m,C){const M=a.bucketOnlyServerUrl(),U={"X-Goog-Upload-Protocol":"multipart"},ue=function J(){let Ts="";for(let Ms=0;Ms<2;Ms++)Ts+=Math.random().toString().slice(2);return Ts}();U["Content-Type"]="multipart/related; boundary="+ue;const Ce=ce(a,m,C),Rt=Pn(Ce,l),vn=Ye.getBlob("--"+ue+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Rt+"\r\n--"+ue+"\r\nContent-Type: "+Ce.contentType+"\r\n\r\n",m,"\r\n--"+ue+"--");if(null===vn)throw Gn();const Ln={name:Ce.fullPath},yr=rn(M,u.host,u._protocol),zs=u.maxUploadRetryTime,Qi=new li(yr,"POST",Ji(u,l),zs);return Qi.urlParams=Ln,Qi.headers=U,Qi.body=vn.uploadData(),Qi.errorHandler=ir(a),Qi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),C=this._ref.storage._makeRequest(m,Yt,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=Jt(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Bi(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,m,C){const M=new fr(l||void 0,m||void 0,C||void 0);return this._addObserver(M),()=>{this._removeObserver(M)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Bi(this._state)){case mr.SUCCESS:fs(this._resolve.bind(null,this.snapshot))();break;case mr.CANCELED:case mr.ERROR:fs(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Bi(this._state)){case mr.RUNNING:case mr.PAUSED:a.next&&fs(a.next.bind(a,this.snapshot))();break;case mr.SUCCESS:a.complete&&fs(a.complete.bind(a))();break;default:a.error&&fs(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class as{constructor(a,l){this._service=a,this._location=l instanceof nn?l:nn.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new as(a,l)}get root(){const a=new nn(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return St(this._location.path)}get storage(){return this._service}get parent(){const a=function le(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new nn(this._location.bucket,a);return new as(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw Pr(a)}}function es(u,a,l){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,Le.Z)(function*(u,a,l){const C=yield oo(u,{pageToken:l});a.prefixes.push(...C.prefixes),a.items.push(...C.items),null!=C.nextPageToken&&(yield es(u,a,C.nextPageToken))})).apply(this,arguments)}function oo(u,a){null!=a&&"number"==typeof a.maxResults&&Lr("options.maxResults",1,1e3,a.maxResults);const l=a||{},m=Wi(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(m,Yt)}function Mo(u){u._throwIfRoot("getDownloadURL");const a=function Ee(u,a,l){const C=rn(a.fullServerUrl(),u.host,u._protocol),U=u.maxOperationRetryTime,J=new li(C,"GET",function An(u,a){return function l(m,C){const M=Sn(u,C,a);return Pi(null!==M),function Kn(u,a,l,m){const C=kt(a);if(null===C||!Cn(C.downloadTokens))return null;const M=C.downloadTokens;if(0===M.length)return null;const U=encodeURIComponent;return M.split(",").map(Ce=>{const Gt=u.fullPath;return rn("/b/"+U(u.bucket)+"/o/"+U(Gt),l,m)+_r({alt:"media",token:Ce})})[0]}(M,C,u.host,u._protocol)}}(u,l),U);return J.errorHandler=Xr(a),J}(u.storage,u._location,Ct());return u.storage.makeRequestWithTokens(a,Yt).then(l=>{if(null===l)throw function cn(){return new at(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Eo(u,a){const l=function ye(u,a){const l=a.split("/").filter(m=>m.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),m=new nn(u._location.bucket,l);return new as(u.storage,m)}function us(u,a){if(u instanceof Ys){const l=u;if(null==l._bucket)throw function Hn(){return new at(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Be+"' property when initializing the app?")}();const m=new as(l,l._bucket);return null!=a?us(m,a):m}return void 0!==a?Eo(u,a):u}function ca(u,a){if(a&&function Pl(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof Ys)return function lo(u,a){return new as(u,a)}(u,a);throw hr("To use ref(service, url), the first argument must be a Storage instance.")}return us(u,a)}function qs(u,a){const l=null==a?void 0:a[Be];return null==l?null:nn.makeFromBucketSpec(l,u)}class Ys{constructor(a,l,m,C,M){this.app=a,this._authProvider=l,this._appCheckProvider=m,this._url=C,this._firebaseVersion=M,this._bucket=null,this._host=it,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=C?nn.makeFromBucketSpec(C,this._host):qs(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?nn.makeFromBucketSpec(this._url,a):qs(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Lr("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Lr("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,Le.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const m=yield l.getToken();if(null!==m)return m.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,Le.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new as(this,a)}_makeRequest(a,l,m,C,M=!0){if(this._deleted)return new ui(Cr());{const U=function zr(u,a,l,m,C,M,U=!0){const J=_r(u.urlParams),ue=u.url+J,Ce=Object.assign({},u.headers);return function pi(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Ce,a),function Dn(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Ce,l),function ai(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Ce,M),function gr(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Ce,m),new xr(ue,u.method,Ce,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,C,U)}(a,this._appId,m,C,l,this._firebaseVersion,M);return this._requests.add(U),U.getPromise().then(()=>this._requests.delete(U),()=>this._requests.delete(U)),U}}makeRequestWithTokens(a,l){var m=this;return(0,Le.Z)(function*(){const[C,M]=yield Promise.all([m._getAuthToken(),m._getAppCheckToken()]);return m._makeRequest(a,l,C,M).getPromise()})()}}const ua="@firebase/storage";function As(u,a){return ca(u=(0,H.m9)(u),a)}function Zs(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),m=u.getProvider("auth-internal"),C=u.getProvider("app-check-internal");return new Ys(l,m,C,a,ke.SDK_VERSION)}!function Ui(){(0,ke._registerComponent)(new De.wA("storage",Zs,"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(ua,"0.11.2",""),(0,ke.registerVersion)(ua,"0.11.2","esm2017")}();class Ua{constructor(a,l,m){this._delegate=a,this.task=l,this.ref=m}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class uo{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ua(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(m=>{if(a)return a(new Ua(m,this,this._ref))},l)}on(a,l,m,C){let M;return l&&(M="function"==typeof l?U=>l(new Ua(U,this,this._ref)):{next:l.next?U=>l.next(new Ua(U,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,M,m||void 0,C||void 0)}}class $s{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Gr(a,this._service))}get items(){return this._delegate.items.map(a=>new Gr(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gr{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function Di(u,a){return Eo(u,a)}(this._delegate,a);return new Gr(l,this.storage)}get root(){return new Gr(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Gr(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new uo(function co(u,a,l){return function cs(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new Rr(u,new Ye(a),l)}(u=(0,H.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=Lt.RAW,m){this._throwIfRoot("putString");const C=me(l,a),M=Object.assign({},m);return null==M.contentType&&null!=C.contentType&&(M.contentType=C.contentType),new uo(new Rr(this._delegate,new Ye(C.data,!0),M),this)}listAll(){return function wo(u){return function Ks(u){const a={prefixes:[],items:[]};return es(u,a).then(()=>a)}(u=(0,H.m9)(u))}(this._delegate).then(a=>new $s(a,this.storage))}list(a){return function da(u,a){return oo(u=(0,H.m9)(u),a)}(this._delegate,a||void 0).then(l=>new $s(l,this.storage))}getMetadata(){return function wa(u){return function la(u){u._throwIfRoot("getMetadata");const a=Tr(u.storage,u._location,Ct());return u.storage.makeRequestWithTokens(a,Yt)}(u=(0,H.m9)(u))}(this._delegate)}updateMetadata(a){return function ns(u,a){return function ws(u,a){u._throwIfRoot("updateMetadata");const l=function tt(u,a,l,m){const M=rn(a.fullServerUrl(),u.host,u._protocol),J=Pn(l,m),Ce=u.maxOperationRetryTime,Rt=new li(M,"PATCH",Ji(u,m),Ce);return Rt.headers={"Content-Type":"application/json; charset=utf-8"},Rt.body=J,Rt.errorHandler=Xr(a),Rt}(u.storage,u._location,a,Ct());return u.storage.makeRequestWithTokens(l,Yt)}(u=(0,H.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function Ja(u){return Mo(u=(0,H.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ss(u){return function ao(u){u._throwIfRoot("deleteObject");const a=function bt(u,a){const m=rn(a.fullServerUrl(),u.host,u._protocol),J=new li(m,"DELETE",function U(ue,Ce){},u.maxOperationRetryTime);return J.successCodes=[200,204],J.errorHandler=Xr(a),J}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Yt)}(u=(0,H.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw Pr(a)}}class qo{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(rs(a))throw hr("ref() expected a child path but got a URL, use refFromURL instead.");return new Gr(As(this._delegate,a),this)}refFromURL(a){if(!rs(a))throw hr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{nn.makeFromUrl(a,this._delegate.host)}catch(l){throw hr("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gr(As(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,m={}){!function ks(u,a,l,m={}){!function ts(u,a,l,m={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:C}=m;C&&(u._overrideAuthToken="string"==typeof C?C:(0,H.Sg)(C,u.app.options.projectId))}(u,a,l,m)}(this._delegate,a,l,m)}}function rs(u){return/^[A-Za-z]+:\/\//.test(u)}function Co(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),m=u.getProvider("storage").getImmediate({identifier:a});return new qo(l,m)}!function Er(u){const a={TaskState:mr,TaskEvent:Vr,StringFormat:Lt,Storage:qo,Reference:Gr};u.INTERNAL.registerComponent(new De.wA("storage-compat",Co,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Je.Z);var ho=L(6217),Xs=L(9260);function Zo(u){const a=function Bs(u){return new Oe.y(a=>{const l=U=>a.next(U);l(u.snapshot);const M=u.on("state_changed",l);return u.then(U=>{l(U),a.complete()},U=>{l(u.snapshot),(U=>{a.error(U)})(U)}),function(){M()}}).pipe(function he(u,a=Pt.z){return(0,be.e)((l,m)=>{let C=null,M=null,U=null;const J=()=>{if(C){C.unsubscribe(),C=null;const Ce=M;M=null,m.next(Ce)}};function ue(){const Ce=U+u,Rt=a.now();if(Rt<Ce)return C=this.schedule(void 0,Ce-Rt),void m.add(C);J()}l.subscribe((0,Ie.x)(m,Ce=>{M=Ce,U=a.now(),C||(C=a.schedule(ue,u),m.add(C))},()=>{J(),m.complete()},void 0,()=>{M=C=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,dt.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function ha(u){return{getDownloadURL:()=>(0,Ge.of)(void 0).pipe(qe.fc,(0,ft.w)(()=>u.getDownloadURL()),qe.iC),getMetadata:()=>(0,Ge.of)(void 0).pipe(qe.fc,(0,ft.w)(()=>u.getMetadata()),qe.iC),delete:()=>(0,ut.D)(u.delete()),child:a=>ha(u.child(a)),updateMetadata:a=>(0,ut.D)(u.updateMetadata(a)),put:(a,l)=>Zo(u.put(a,l)),putString:(a,l,m)=>Zo(u.putString(a,l,m)),list:a=>(0,ut.D)(u.list(a)),listAll:()=>(0,ut.D)(u.listAll())}}const xi=new q.OlP("angularfire2.storageBucket"),Us=new q.OlP("angularfire2.storage.maxUploadRetryTime"),y=new q.OlP("angularfire2.storage.maxOperationRetryTime"),I=new q.OlP("angularfire2.storage.use-emulator");let f=(()=>{class u{constructor(l,m,C,M,U,J,ue,Ce,Rt,Gt){const Qt=(0,re.on)(l,U,m);this.storage=(0,re.cc)(`${Qt.name}.storage.${C}`,"AngularFireStorage",Qt.name,()=>{const vn=U.runOutsideAngular(()=>Qt.storage(C||void 0)),Ln=Rt;return Ln&&vn.useEmulator(...Ln),ue&&vn.setMaxUploadRetryTime(ue),Ce&&vn.setMaxOperationRetryTime(Ce),vn},[ue,Ce])}ref(l){return ha(this.storage.ref(l))}refFromURL(l){return ha(this.storage.refFromURL(l))}upload(l,m,C){return ha(this.storage.ref(l)).put(m,C)}}return u.\u0275fac=function(l){return new(l||u)(q.LFG(re.Dh),q.LFG(re.xv,8),q.LFG(xi,8),q.LFG(q.Lbi),q.LFG(q.R0b),q.LFG(qe.HU),q.LFG(Us,8),q.LFG(y,8),q.LFG(I,8),q.LFG(ho.nm,8))},u.\u0275prov=q.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),K=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=q.oAB({type:u}),u.\u0275inj=q.cJS({}),u})(),ze=(()=>{class u{constructor(){Xs.Z.registerVersion("angularfire",qe.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=q.oAB({type:u}),u.\u0275inj=q.cJS({providers:[f],imports:[K]}),u})();var an=L(1762),En=L(6451),Xn=L(3099),Sr=L(5026),di=L(1884),$r=L(8421),ms=L(4671),Cs=L(5032),wi=L(7669);L(3042);var Vs=L(1877);const el="@firebase/database";let ql="";function ml(u){ql=u}class Po{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,H.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,H.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class yl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,H.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const ba=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new Po(a)}}catch(a){}return new yl},Oo=ba("localStorage"),tl=ba("sessionStorage"),fa=new Vs.Yd("@firebase/database"),Da=function(){let u=1;return function(){return u++}}(),ja=function(u){const a=(0,H.dS)(u),l=new H.gQ;l.update(a);const m=l.digest();return H.US.encodeByteArray(m)},ko=function(...u){let a="";for(let l=0;l<u.length;l++){const m=u[l];Array.isArray(m)||m&&"object"==typeof m&&"number"==typeof m.length?a+=ko.apply(null,m):a+="object"==typeof m?(0,H.Wl)(m):m,a+=" "}return a};let Qs=null,Jo=!0;const Ta=function(u,a){(0,H.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(fa.logLevel=Vs.in.VERBOSE,Qs=fa.log.bind(fa),a&&tl.set("logging_enabled",!0)):"function"==typeof u?Qs=u:(Qs=null,tl.remove("logging_enabled"))},qi=function(...u){if(!0===Jo&&(Jo=!1,null===Qs&&!0===tl.get("logging_enabled")&&Ta(!0)),Qs){const a=ko.apply(null,u);Qs(a)}},No=function(u){return function(...a){qi(u,...a)}},Yi=function(...u){const a="FIREBASE INTERNAL ERROR: "+ko(...u);fa.error(a)},Ri=function(...u){const a=`FIREBASE FATAL ERROR: ${ko(...u)}`;throw fa.error(a),new Error(a)},Hr=function(...u){const a="FIREBASE WARNING: "+ko(...u);fa.warn(a)},fo=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},ys="[MIN_NAME]",Fo="[MAX_NAME]",hi=function(u,a){if(u===a)return 0;if(u===ys||a===Fo)return-1;if(a===ys||u===Fo)return 1;{const l=Mr(u),m=Mr(a);return null!==l?null!==m?l-m==0?u.length-a.length:l-m:-1:null!==m?1:u<a?-1:1}},Zl=function(u,a){return u===a?0:u<a?-1:1},pa=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,H.Wl)(a))},F=function(u){if("object"!=typeof u||null===u)return(0,H.Wl)(u);const a=[];for(const m in u)a.push(m);a.sort();let l="{";for(let m=0;m<a.length;m++)0!==m&&(l+=","),l+=(0,H.Wl)(a[m]),l+=":",l+=F(u[a[m]]);return l+="}",l},Y=function(u,a){const l=u.length;if(l<=a)return[u];const m=[];for(let C=0;C<l;C+=a)m.push(u.substring(C,C+a>l?l:C+a));return m};function $(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const ne=function(u){(0,H.hu)(!fo(u),"Invalid JSON number");const m=1023;let C,M,U,J,ue;0===u?(M=0,U=0,C=1/u==-1/0?1:0):(C=u<0,(u=Math.abs(u))>=Math.pow(2,1-m)?(J=Math.min(Math.floor(Math.log(u)/Math.LN2),m),M=J+m,U=Math.round(u*Math.pow(2,52-J)-Math.pow(2,52))):(M=0,U=Math.round(u/Math.pow(2,-1074))));const Ce=[];for(ue=52;ue;ue-=1)Ce.push(U%2?1:0),U=Math.floor(U/2);for(ue=11;ue;ue-=1)Ce.push(M%2?1:0),M=Math.floor(M/2);Ce.push(C?1:0),Ce.reverse();const Rt=Ce.join("");let Gt="";for(ue=0;ue<64;ue+=8){let Qt=parseInt(Rt.substr(ue,8),2).toString(16);1===Qt.length&&(Qt="0"+Qt),Gt+=Qt}return Gt.toLowerCase()},Bn=new RegExp("^-?(0*)\\d{1,10}$"),Mr=function(u){if(Bn.test(u)){const a=Number(u);if(a>=-2147483648&&a<=2147483647)return a}return null},wr=function(u){try{u()}catch(a){setTimeout(()=>{throw Hr("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Zi=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ci=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Vi{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(m=>this.appCheck=m)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,m)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,m):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(m=>m.addTokenListener(a))}notifyForInvalidToken(){Hr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ga{constructor(a,l,m){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=m,this.auth_=null,this.auth_=m.getImmediate({optional:!0}),this.auth_||m.onInit(C=>this.auth_=C)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(qi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,m)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,m):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hr(a)}}let gi=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Sa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pc="websocket",Xi="long_polling";class il{constructor(a,l,m,C,M=!1,U="",J=!1,ue=!1){this.secure=l,this.namespace=m,this.webSocketOnly=C,this.nodeAdmin=M,this.persistenceKey=U,this.includeNamespaceInQueryParams=J,this.isUsingEmulator=ue,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oo.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Oo.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gc(u,a,l){let m;if((0,H.hu)("string"==typeof a,"typeof type must == string"),(0,H.hu)("object"==typeof l,"typeof params must == object"),a===pc)m=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==Xi)throw new Error("Unknown connection type: "+a);m=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function is(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const C=[];return $(l,(M,U)=>{C.push(M+"="+U)}),m+C.join("&")}class mc{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,H.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,H.p$)(this.counters_)}}const hn={},ss={};function fi(u){const a=u.toString();return hn[a]||(hn[a]=new mc),hn[a]}class Zn{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const m=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let C=0;C<m.length;++C)m[C]&&wr(()=>{this.onMessage_(m[C])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pr{constructor(a,l,m,C,M,U,J){this.connId=a,this.repoInfo=l,this.applicationId=m,this.appCheckToken=C,this.authToken=M,this.transportSessionId=U,this.lastSessionId=J,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=No(a),this.stats_=fi(l),this.urlFn=ue=>(this.appCheckToken&&(ue.ac=this.appCheckToken),gc(l,Xi,ue))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Zn(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,H.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Js((...M)=>{const[U,J,ue,Ce,Rt]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===U)this.id=J,this.password=ue;else{if("close"!==U)throw new Error("Unrecognized command received: "+U);J?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(J,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[U,J]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(U,J)},()=>{this.onClosed_()},this.urlFn);const m={start:"t"};m.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(m.cb=this.scriptTagHolder.uniqueCallbackIdentifier),m.v="5",this.transportSessionId&&(m.s=this.transportSessionId),this.lastSessionId&&(m.ls=this.lastSessionId),this.applicationId&&(m.p=this.applicationId),this.appCheckToken&&(m.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Sa.test(location.hostname)&&(m.r="f");const C=this.urlFn(m);this.log_("Connecting via long-poll to "+C),this.scriptTagHolder.addTag(C,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pr.forceAllow_=!0}static forceDisallow(){pr.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!pr.forceAllow_&&(pr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,H.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const m=(0,H.h$)(l),C=Y(m,1840);for(let M=0;M<C.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,C.length,C[M]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const m={dframe:"t"};m.id=a,m.pw=l,this.myDisconnFrame.src=this.urlFn(m),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,H.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Js{constructor(a,l,m,C){if(this.onDisconnect=m,this.urlFn=C,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Da(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Js.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const U="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(U),this.myIFrame.doc.close()}catch(J){qi("frame writing exception"),J.stack&&qi(J.stack),qi(J)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||qi("No IE domain setting required")}catch(l){const m=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+m+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),m="",C=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+m.length<=1870;){const U=this.pendingSegs.shift();m=m+"&seg"+C+"="+U.seg+"&ts"+C+"="+U.ts+"&d"+C+"="+U.d,C++}return l+=m,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,m){this.pendingSegs.push({seg:a,ts:l,d:m}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const m=()=>{this.outstandingRequests.delete(l),this.newRequest_()},C=setTimeout(m,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(C),m()})}addTag(a,l){(0,H.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const m=this.myIFrame.doc.createElement("script");m.type="text/javascript",m.async=!0,m.src=a,m.onload=m.onreadystatechange=function(){const C=m.readyState;(!C||"loaded"===C||"complete"===C)&&(m.onload=m.onreadystatechange=null,m.parentNode&&m.parentNode.removeChild(m),l())},m.onerror=()=>{qi("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(m)}catch(m){}},Math.floor(1))}}let nr=null;typeof MozWebSocket<"u"?nr=MozWebSocket:typeof WebSocket<"u"&&(nr=WebSocket);let go=(()=>{class u{constructor(l,m,C,M,U,J,ue){this.connId=l,this.applicationId=C,this.appCheckToken=M,this.authToken=U,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=No(this.connId),this.stats_=fi(m),this.connURL=u.connectionURL_(m,J,ue,M,C),this.nodeAdmin=m.nodeAdmin}static connectionURL_(l,m,C,M,U){const J={v:"5"};return!(0,H.Yr)()&&typeof location<"u"&&location.hostname&&Sa.test(location.hostname)&&(J.r="f"),m&&(J.s=m),C&&(J.ls=C),M&&(J.ac=M),U&&(J.p=U),gc(l,pc,J)}open(l,m){this.onDisconnect=m,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oo.set("previous_websocket_failure",!0);try{let C;if((0,H.Yr)()){C={headers:{"User-Agent":`Firebase/5/${ql}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(C.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(C.headers["X-Firebase-AppCheck"]=this.appCheckToken);const U=process.env,J=0===this.connURL.indexOf("wss://")?U.HTTPS_PROXY||U.https_proxy:U.HTTP_PROXY||U.http_proxy;J&&(C.proxy={origin:J})}this.mySock=new nr(this.connURL,[],C)}catch(C){this.log_("Error instantiating WebSocket.");const M=C.message||C.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=C=>{this.handleIncomingFrame(C)},this.mySock.onerror=C=>{this.log_("WebSocket error.  Closing connection.");const M=C.message||C.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const C=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);C&&C.length>1&&parseFloat(C[1])<4.4&&(l=!0)}return!l&&null!==nr&&!u.forceDisallow_}static previouslyFailed(){return Oo.isInMemoryStorage||!0===Oo.get("previous_websocket_failure")}markConnectionHealthy(){Oo.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const m=this.frames.join("");this.frames=null;const C=(0,H.cI)(m);this.onMessage(C)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const m=Number(l);if(!isNaN(m))return this.handleNewFrameCount_(m),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const m=l.data;if(this.bytesReceived+=m.length,this.stats_.incrementCounter("bytes_received",m.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(m);else{const C=this.extractFrameCount_(m);null!==C&&this.appendFrame_(C)}}send(l){this.resetKeepAlive();const m=(0,H.Wl)(l);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const C=Y(m,16384);C.length>1&&this.sendString_(String(C.length));for(let M=0;M<C.length;M++)this.sendString_(C[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(m){this.log_("Exception thrown from WebSocket.send():",m.message||m.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),vi=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[pr,go]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const m=go&&go.isAvailable();let C=m&&!go.previouslyFailed();if(l.webSocketOnly&&(m||Hr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),C=!0),C)this.transports_=[go];else{const M=this.transports_=[];for(const U of u.ALL_TRANSPORTS)U&&U.isAvailable()&&M.push(U);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class wl{constructor(a,l,m,C,M,U,J,ue,Ce,Rt){this.id=a,this.repoInfo_=l,this.applicationId_=m,this.appCheckToken_=C,this.authToken_=M,this.onMessage_=U,this.onReady_=J,this.onDisconnect_=ue,this.onKill_=Ce,this.lastSessionId=Rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=No("c:"+this.id+":"),this.transportManager_=new vi(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),m=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,m)},Math.floor(0));const C=a.healthyTimeout||0;C>0&&(this.healthyTimeout_=Ci(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(C)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=pa("t",a),m=pa("d",a);if("c"===l)this.onSecondaryControl_(m);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(m)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=pa("t",a),m=pa("d",a);"c"===l?this.onControl_(m):"d"===l&&this.onDataMessage_(m)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=pa("t",a);if("d"in a){const m=a.d;if("h"===l){const C=Object.assign({},m);this.repoInfo_.isUsingEmulator&&(C.h=this.repoInfo_.host),this.onHandshake_(C)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let C=0;C<this.pendingDataMessages.length;++C)this.onDataMessage_(this.pendingDataMessages[C]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(m):"r"===l?this.onReset_(m):"e"===l?Yi("Server Error: "+m):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yi("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,m=a.v,C=a.h;this.sessionId=a.s,this.repoInfo_.host=C,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==m&&Hr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),m=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,m),Ci(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ci(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jc{put(a,l,m,C){}merge(a,l,m,C){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,m){}onDisconnectMerge(a,l,m){}onDisconnectCancel(a,l){}reportStats(a){}}class vs{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,H.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const m=[...this.listeners_[a]];for(let C=0;C<m.length;C++)m[C].callback.apply(m[C].context,l)}}on(a,l,m){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:m});const C=this.getInitialEvent(a);C&&l.apply(m,C)}off(a,l,m){this.validateEventType_(a);const C=this.listeners_[a]||[];for(let M=0;M<C.length;M++)if(C[M].callback===l&&(!m||m===C[M].context))return void C.splice(M,1)}validateEventType_(a){(0,H.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class na extends vs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new na}getInitialEvent(a){return(0,H.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const Ft=32,Ra=768;class Br{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let m=0;for(let C=0;C<this.pieces_.length;C++)this.pieces_[C].length>0&&(this.pieces_[m]=this.pieces_[C],m++);this.pieces_.length=m,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Si(){return new Br("")}function Or(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function js(u){return u.pieces_.length-u.pieceNum_}function Hi(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new Br(u.pieces_,a)}function A(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function b(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function O(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new Br(a,0)}function j(u,a){const l=[];for(let m=u.pieceNum_;m<u.pieces_.length;m++)l.push(u.pieces_[m]);if(a instanceof Br)for(let m=a.pieceNum_;m<a.pieces_.length;m++)l.push(a.pieces_[m]);else{const m=a.split("/");for(let C=0;C<m.length;C++)m[C].length>0&&l.push(m[C])}return new Br(l,0)}function Q(u){return u.pieceNum_>=u.pieces_.length}function se(u,a){const l=Or(u),m=Or(a);if(null===l)return a;if(l===m)return se(Hi(u),Hi(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function ct(u,a){const l=b(u,0),m=b(a,0);for(let C=0;C<l.length&&C<m.length;C++){const M=hi(l[C],m[C]);if(0!==M)return M}return l.length===m.length?0:l.length<m.length?-1:1}function zt(u,a){if(js(u)!==js(a))return!1;for(let l=u.pieceNum_,m=a.pieceNum_;l<=u.pieces_.length;l++,m++)if(u.pieces_[l]!==a.pieces_[m])return!1;return!0}function ln(u,a){let l=u.pieceNum_,m=a.pieceNum_;if(js(u)>js(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[m])return!1;++l,++m}return!0}class Jn{constructor(a,l){this.errorPrefix_=l,this.parts_=b(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let m=0;m<this.parts_.length;m++)this.byteLength_+=(0,H.ug)(this.parts_[m]);os(this)}}function os(u){if(u.byteLength_>Ra)throw new Error(u.errorPrefix_+"has a key path longer than "+Ra+" bytes ("+u.byteLength_+").");if(u.parts_.length>Ft)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ft+") or object contains a cycle "+Ai(u))}function Ai(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Do extends vs{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const m=!document[a];m!==this.visible_&&(this.visible_=m,this.trigger("visible",m))},!1)}static getInstance(){return new Do}getInitialEvent(a){return(0,H.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const _s=1e3;let Hc,Wa=(()=>{class u extends jc{constructor(l,m,C,M,U,J,ue,Ce){if(super(),this.repoInfo_=l,this.applicationId_=m,this.onDataUpdate_=C,this.onConnectStatus_=M,this.onServerInfoUpdate_=U,this.authTokenProvider_=J,this.appCheckTokenProvider_=ue,this.authOverride_=Ce,this.id=u.nextPersistentConnectionId_++,this.log_=No("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_s,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ce&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Do.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&na.getInstance().on("online",this.onOnline_,this)}sendRequest(l,m,C){const M=++this.requestNumber_,U={r:M,a:l,b:m};this.log_((0,H.Wl)(U)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(U),C&&(this.requestCBHash_[M]=C)}get(l){this.initConnection_();const m=new H.BH,M={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:J=>{const ue=J.d;"ok"===J.s?m.resolve(ue):m.reject(ue)}};return this.outstandingGets_.push(M),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),m.promise}listen(l,m,C,M){this.initConnection_();const U=l._queryIdentifier,J=l._path.toString();this.log_("Listen called for "+J+" "+U),this.listens.has(J)||this.listens.set(J,new Map),(0,H.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(J).has(U),"listen() called twice for same path/queryId.");const ue={onComplete:M,hashFn:m,query:l,tag:C};this.listens.get(J).set(U,ue),this.connected_&&this.sendListen_(ue)}sendGet_(l){const m=this.outstandingGets_[l];this.sendRequest("g",m.request,C=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),m.onComplete&&m.onComplete(C)})}sendListen_(l){const m=l.query,C=m._path.toString(),M=m._queryIdentifier;this.log_("Listen on "+C+" for "+M);const U={p:C};l.tag&&(U.q=m._queryObject,U.t=l.tag),U.h=l.hashFn(),this.sendRequest("q",U,ue=>{const Ce=ue.d,Rt=ue.s;u.warnOnListenWarnings_(Ce,m),(this.listens.get(C)&&this.listens.get(C).get(M))===l&&(this.log_("listen response",ue),"ok"!==Rt&&this.removeListen_(C,M),l.onComplete&&l.onComplete(Rt,Ce))})}static warnOnListenWarnings_(l,m){if(l&&"object"==typeof l&&(0,H.r3)(l,"w")){const C=(0,H.DV)(l,"w");if(Array.isArray(C)&&~C.indexOf("no_index")){const M='".indexOn": "'+m._queryParams.getIndex().toString()+'"',U=m._path.toString();Hr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${U} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,H.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,m=(0,H.w9)(l)?"auth":"gauth",C={cred:l};null===this.authOverride_?C.noauth=!0:"object"==typeof this.authOverride_&&(C.authvar=this.authOverride_),this.sendRequest(m,C,M=>{const U=M.s,J=M.d||"error";this.authToken_===l&&("ok"===U?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(U,J))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const m=l.s,C=l.d||"error";"ok"===m?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(m,C)})}unlisten(l,m){const C=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+C+" "+M),(0,H.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(C,M)&&this.connected_&&this.sendUnlisten_(C,M,l._queryObject,m)}sendUnlisten_(l,m,C,M){this.log_("Unlisten on "+l+" for "+m);const U={p:l};M&&(U.q=C,U.t=M),this.sendRequest("n",U)}onDisconnectPut(l,m,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,m,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:m,onComplete:C})}onDisconnectMerge(l,m,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,m,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:m,onComplete:C})}onDisconnectCancel(l,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,m):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:m})}sendOnDisconnect_(l,m,C,M){const U={p:m,d:C};this.log_("onDisconnect "+l,U),this.sendRequest(l,U,J=>{M&&setTimeout(()=>{M(J.s,J.d)},Math.floor(0))})}put(l,m,C,M){this.putInternal("p",l,m,C,M)}merge(l,m,C,M){this.putInternal("m",l,m,C,M)}putInternal(l,m,C,M,U){this.initConnection_();const J={p:m,d:C};void 0!==U&&(J.h=U),this.outstandingPuts_.push({action:l,request:J,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+m)}sendPut_(l){const m=this.outstandingPuts_[l].action,C=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(m,C,U=>{this.log_(m+" response",U),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(U.s,U.d)})}reportStats(l){if(this.connected_){const m={c:l};this.log_("reportStats",m),this.sendRequest("s",m,C=>{"ok"!==C.s&&this.log_("reportStats","Error sending stats: "+C.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,H.Wl)(l));const m=l.r,C=this.requestCBHash_[m];C&&(delete this.requestCBHash_[m],C(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,m){this.log_("handleServerMessage",l,m),"d"===l?this.onDataUpdate_(m.p,m.d,!1,m.t):"m"===l?this.onDataUpdate_(m.p,m.d,!0,m.t):"c"===l?this.onListenRevoked_(m.p,m.q):"ac"===l?this.onAuthRevoked_(m.s,m.d):"apc"===l?this.onAppCheckRevoked_(m.s,m.d):"sd"===l?this.onSecurityDebugPacket_(m):Yi("Unrecognized action received from server: "+(0,H.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_s,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=_s,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_s),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let m=Math.max(0,this.reconnectDelay_-l);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Le.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const m=l.onDataMessage_.bind(l),C=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),U=l.id+":"+u.nextConnectionId_++,J=l.lastSessionId;let ue=!1,Ce=null;const Rt=function(){Ce?Ce.close():(ue=!0,M())};l.realtime_={close:Rt,sendRequest:function(vn){(0,H.hu)(Ce,"sendRequest call when we're not connected not allowed."),Ce.sendRequest(vn)}};const Qt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[vn,Ln]=yield Promise.all([l.authTokenProvider_.getToken(Qt),l.appCheckTokenProvider_.getToken(Qt)]);ue?qi("getToken() completed but was canceled"):(qi("getToken() completed. Creating connection."),l.authToken_=vn&&vn.accessToken,l.appCheckToken_=Ln&&Ln.token,Ce=new wl(U,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,m,C,M,yr=>{Hr(yr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},J))}catch(vn){l.log_("Failed to get token: "+vn),ue||(l.repoInfo_.nodeAdmin&&Hr(vn),Rt())}}})()}interrupt(l){qi("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){qi("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_s,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const m=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:m})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const m=this.outstandingPuts_[l];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,m){let C;C=m?m.map(U=>F(U)).join("$"):"default";const M=this.removeListen_(l,C);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,m){const C=new Br(l).toString();let M;if(this.listens.has(C)){const U=this.listens.get(C);M=U.get(m),U.delete(m),0===U.size&&this.listens.delete(C)}else M=void 0;return M}onAuthRevoked_(l,m){qi("Auth token revoked: "+l+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,m){qi("App check token revoked: "+l+"/"+m),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const m of l.values())this.sendListen_(m);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let m="js";(0,H.Yr)()&&(m=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+m+"."+ql.replace(/\./g,"-")]=1,(0,H.uI)()?l["framework.cordova"]=1:(0,H.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=na.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Ur{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new Ur(a,l)}}class tc{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const m=new Ur(ys,a),C=new Ur(ys,l);return 0!==this.compare(m,C)}minPost(){return Ur.MIN}}class kh extends tc{static get __EMPTY_NODE(){return Hc}static set __EMPTY_NODE(a){Hc=a}compare(a,l){return hi(a.name,l.name)}isDefinedOn(a){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return Ur.MIN}maxPost(){return new Ur(Fo,Hc)}makePost(a,l){return(0,H.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Ur(a,Hc)}toString(){return".key"}}const Ma=new kh;class _u{constructor(a,l,m,C,M=null){this.isReverse_=C,this.resultGenerator_=M,this.nodeStack_=[];let U=1;for(;!a.isEmpty();)if(U=l?m(a.key,l):1,C&&(U*=-1),U<0)a=this.isReverse_?a.left:a.right;else{if(0===U){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Eu,Bo=(()=>{class u{constructor(l,m,C,M,U){this.key=l,this.value=m,this.color=null!=C?C:u.RED,this.left=null!=M?M:ia.EMPTY_NODE,this.right=null!=U?U:ia.EMPTY_NODE}copy(l,m,C,M,U){return new u(null!=l?l:this.key,null!=m?m:this.value,null!=C?C:this.color,null!=M?M:this.left,null!=U?U:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,m,C){let M=this;const U=C(l,M.key);return M=U<0?M.copy(null,null,null,M.left.insert(l,m,C),null):0===U?M.copy(null,m,null,null,null):M.copy(null,null,null,null,M.right.insert(l,m,C)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return ia.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,m){let C,M;if(C=this,m(l,C.key)<0)!C.left.isEmpty()&&!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.remove(l,m),null);else{if(C.left.isRed_()&&(C=C.rotateRight_()),!C.right.isEmpty()&&!C.right.isRed_()&&!C.right.left.isRed_()&&(C=C.moveRedRight_()),0===m(l,C.key)){if(C.right.isEmpty())return ia.EMPTY_NODE;M=C.right.min_(),C=C.copy(M.key,M.value,null,null,C.right.removeMin_())}C=C.copy(null,null,null,null,C.right.remove(l,m))}return C.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),m=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,m)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class ia{constructor(a,l=ia.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new ia(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,Bo.BLACK,null,null))}remove(a){return new ia(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,Bo.BLACK,null,null))}get(a){let l,m=this.root_;for(;!m.isEmpty();){if(l=this.comparator_(a,m.key),0===l)return m.value;l<0?m=m.left:l>0&&(m=m.right)}return null}getPredecessorKey(a){let l,m=this.root_,C=null;for(;!m.isEmpty();){if(l=this.comparator_(a,m.key),0===l){if(m.left.isEmpty())return C?C.key:null;for(m=m.left;!m.right.isEmpty();)m=m.right;return m.key}l<0?m=m.left:l>0&&(C=m,m=m.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new _u(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new _u(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new _u(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new _u(this.root_,null,this.comparator_,!0,a)}}function Gd(u,a){return hi(u.name,a.name)}function Uo(u,a){return hi(u,a)}ia.EMPTY_NODE=new class zc{copy(a,l,m,C,M){return this}insert(a,l,m){return new Bo(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ds=function(u){return"number"==typeof u?"number:"+ne(u):"string:"+u},Nh=function(u){if(u.isLeafNode()){const a=u.val();(0,H.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,H.r3)(a,".sv"),"Priority must be a string or number.")}else(0,H.hu)(u===Eu||u.isEmpty(),"priority of unexpected type.");(0,H.hu)(u===Eu||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ya,$i,Gc,bl=(()=>{class u{constructor(l,m=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=m,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nh(this.priorityNode_)}static set __childrenNodeConstructor(l){ya=l}static get __childrenNodeConstructor(){return ya}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Q(l)?this:".priority"===Or(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,m){return null}updateImmediateChild(l,m){return".priority"===l?this.updatePriority(m):m.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,m).updatePriority(this.priorityNode_)}updateChild(l,m){const C=Or(l);return null===C?m:m.isEmpty()&&".priority"!==C?this:((0,H.hu)(".priority"!==C||1===js(l),".priority must be the last token in a path"),this.updateImmediateChild(C,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hi(l),m)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,m){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Ds(this.priorityNode_.val())+":");const m=typeof this.value_;l+=m+":",l+="number"===m?ne(this.value_):this.value_,this.lazyHash_=ja(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,H.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const m=typeof l.value_,C=typeof this.value_,M=u.VALUE_TYPE_ORDER.indexOf(m),U=u.VALUE_TYPE_ORDER.indexOf(C);return(0,H.hu)(M>=0,"Unknown leaf type: "+m),(0,H.hu)(U>=0,"Unknown leaf type: "+C),M===U?"object"===C?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:U-M}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const ve=new class ee extends tc{compare(a,l){const m=a.node.getPriority(),C=l.node.getPriority(),M=m.compareTo(C);return 0===M?hi(a.name,l.name):M}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return Ur.MIN}maxPost(){return new Ur(Fo,new bl("[PRIORITY-POST]",Gc))}makePost(a,l){const m=$i(a);return new Ur(l,new bl("[PRIORITY-POST]",m))}toString(){return".priority"}},ht=Math.log(2);class Ot{constructor(a){this.count=parseInt(Math.log(a+1)/ht,10),this.current_=this.count-1;const C=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&C}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const on=function(u,a,l,m){u.sort(a);const C=function(ue,Ce){const Rt=Ce-ue;let Gt,Qt;if(0===Rt)return null;if(1===Rt)return Gt=u[ue],Qt=l?l(Gt):Gt,new Bo(Qt,Gt.node,Bo.BLACK,null,null);{const vn=parseInt(Rt/2,10)+ue,Ln=C(ue,vn),yr=C(vn+1,Ce);return Gt=u[vn],Qt=l?l(Gt):Gt,new Bo(Qt,Gt.node,Bo.BLACK,Ln,yr)}},J=function(ue){let Ce=null,Rt=null,Gt=u.length;const Qt=function(Ln,yr){const Jr=Gt-Ln,zs=Gt;Gt-=Ln;const Qi=C(Jr+1,zs),Ts=u[Jr],Ms=l?l(Ts):Ts;vn(new Bo(Ms,Ts.node,yr,null,Qi))},vn=function(Ln){Ce?(Ce.left=Ln,Ce=Ln):(Rt=Ln,Ce=Ln)};for(let Ln=0;Ln<ue.count;++Ln){const yr=ue.nextBitIsOne(),Jr=Math.pow(2,ue.count-(Ln+1));yr?Qt(Jr,Bo.BLACK):(Qt(Jr,Bo.BLACK),Qt(Jr,Bo.RED))}return Rt}(new Ot(u.length));return new ia(m||a,J)};let bn;const jn={};class Yn{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,H.hu)(jn&&ve,"ChildrenNode.ts has not been loaded"),bn=bn||new Yn({".priority":jn},{".priority":ve}),bn}get(a){const l=(0,H.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof ia?l:null}hasIndex(a){return(0,H.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,H.hu)(a!==Ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const m=[];let C=!1;const M=l.getIterator(Ur.Wrap);let J,U=M.getNext();for(;U;)C=C||a.isDefinedOn(U.node),m.push(U),U=M.getNext();J=C?on(m,a.getCompare()):jn;const ue=a.toString(),Ce=Object.assign({},this.indexSet_);Ce[ue]=a;const Rt=Object.assign({},this.indexes_);return Rt[ue]=J,new Yn(Rt,Ce)}addToIndexes(a,l){const m=(0,H.UI)(this.indexes_,(C,M)=>{const U=(0,H.DV)(this.indexSet_,M);if((0,H.hu)(U,"Missing index implementation for "+M),C===jn){if(U.isDefinedOn(a.node)){const J=[],ue=l.getIterator(Ur.Wrap);let Ce=ue.getNext();for(;Ce;)Ce.name!==a.name&&J.push(Ce),Ce=ue.getNext();return J.push(a),on(J,U.getCompare())}return jn}{const J=l.get(a.name);let ue=C;return J&&(ue=ue.remove(new Ur(a.name,J))),ue.insert(a,a.node)}});return new Yn(m,this.indexSet_)}removeFromIndexes(a,l){const m=(0,H.UI)(this.indexes_,C=>{if(C===jn)return C;{const M=l.get(a.name);return M?C.remove(new Ur(a.name,M)):C}});return new Yn(m,this.indexSet_)}}let rr,In=(()=>{class u{constructor(l,m,C){this.children_=l,this.priorityNode_=m,this.indexMap_=C,this.lazyHash_=null,this.priorityNode_&&Nh(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rr||(rr=new u(new ia(Uo),null,Yn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rr}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const m=this.children_.get(l);return null===m?rr:m}}getChild(l){const m=Or(l);return null===m?this:this.getImmediateChild(m).getChild(Hi(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,m){if((0,H.hu)(m,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(m);{const C=new Ur(l,m);let M,U;m.isEmpty()?(M=this.children_.remove(l),U=this.indexMap_.removeFromIndexes(C,this.children_)):(M=this.children_.insert(l,m),U=this.indexMap_.addToIndexes(C,this.children_));const J=M.isEmpty()?rr:this.priorityNode_;return new u(M,J,U)}}updateChild(l,m){const C=Or(l);if(null===C)return m;{(0,H.hu)(".priority"!==Or(l)||1===js(l),".priority must be the last token in a path");const M=this.getImmediateChild(C).updateChild(Hi(l),m);return this.updateImmediateChild(C,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const m={};let C=0,M=0,U=!0;if(this.forEachChild(ve,(J,ue)=>{m[J]=ue.val(l),C++,U&&u.INTEGER_REGEXP_.test(J)?M=Math.max(M,Number(J)):U=!1}),!l&&U&&M<2*C){const J=[];for(const ue in m)J[ue]=m[ue];return J}return l&&!this.getPriority().isEmpty()&&(m[".priority"]=this.getPriority().val()),m}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Ds(this.getPriority().val())+":"),this.forEachChild(ve,(m,C)=>{const M=C.hash();""!==M&&(l+=":"+m+":"+M)}),this.lazyHash_=""===l?"":ja(l)}return this.lazyHash_}getPredecessorChildName(l,m,C){const M=this.resolveIndex_(C);if(M){const U=M.getPredecessorKey(new Ur(l,m));return U?U.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const m=this.resolveIndex_(l);if(m){const C=m.minKey();return C&&C.name}return this.children_.minKey()}getFirstChild(l){const m=this.getFirstChildName(l);return m?new Ur(m,this.children_.get(m)):null}getLastChildName(l){const m=this.resolveIndex_(l);if(m){const C=m.maxKey();return C&&C.name}return this.children_.maxKey()}getLastChild(l){const m=this.getLastChildName(l);return m?new Ur(m,this.children_.get(m)):null}forEachChild(l,m){const C=this.resolveIndex_(l);return C?C.inorderTraversal(M=>m(M.name,M.node)):this.children_.inorderTraversal(m)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,m){const C=this.resolveIndex_(m);if(C)return C.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,Ur.Wrap);let U=M.peek();for(;null!=U&&m.compare(U,l)<0;)M.getNext(),U=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,m){const C=this.resolveIndex_(m);if(C)return C.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,Ur.Wrap);let U=M.peek();for(;null!=U&&m.compare(U,l)>0;)M.getNext(),U=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ls?-1:0}withIndex(l){if(l===Ma||this.indexMap_.hasIndex(l))return this;{const m=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,m)}}isIndexed(l){return l===Ma||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const m=l;if(this.getPriority().equals(m.getPriority())){if(this.children_.count()===m.children_.count()){const C=this.getIterator(ve),M=m.getIterator(ve);let U=C.getNext(),J=M.getNext();for(;U&&J;){if(U.name!==J.name||!U.node.equals(J.node))return!1;U=C.getNext(),J=M.getNext()}return null===U&&null===J}return!1}return!1}}resolveIndex_(l){return l===Ma?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const ls=new class To extends In{constructor(){super(new ia(Uo),In.EMPTY_NODE,Yn.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return In.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ur,{MIN:{value:new Ur(ys,In.EMPTY_NODE)},MAX:{value:new Ur(Fo,ls)}}),kh.__EMPTY_NODE=In.EMPTY_NODE,bl.__childrenNodeConstructor=In,function Cl(u){Eu=u}(ls),function V(u){Gc=u}(ls);const sl=!0;function bi(u,a=null){if(null===u)return In.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,H.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new bl(u,bi(a));if(u instanceof Array||!sl){let l=In.EMPTY_NODE;return $(u,(m,C)=>{if((0,H.r3)(u,m)&&"."!==m.substring(0,1)){const M=bi(C);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(m,M))}}),l.updatePriority(bi(a))}{const l=[];let m=!1;if($(u,(U,J)=>{if("."!==U.substring(0,1)){const ue=bi(J);ue.isEmpty()||(m=m||!ue.getPriority().isEmpty(),l.push(new Ur(U,ue)))}}),0===l.length)return In.EMPTY_NODE;const M=on(l,Gd,U=>U.name,Uo);if(m){const U=on(l,ve.getCompare());return new In(M,bi(a),new Yn({".priority":U},{".priority":ve}))}return new In(M,bi(a),Yn.Default)}}!function N(u){$i=u}(bi);class yo extends tc{constructor(a){super(),this.indexPath_=a,(0,H.hu)(!Q(a)&&".priority"!==Or(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const m=this.extractChild(a.node),C=this.extractChild(l.node),M=m.compareTo(C);return 0===M?hi(a.name,l.name):M}makePost(a,l){const m=bi(a),C=In.EMPTY_NODE.updateChild(this.indexPath_,m);return new Ur(l,C)}maxPost(){const a=In.EMPTY_NODE.updateChild(this.indexPath_,ls);return new Ur(Fo,a)}toString(){return b(this.indexPath_,0).join("/")}}const va=new class no extends tc{compare(a,l){const m=a.node.compareTo(l.node);return 0===m?hi(a.name,l.name):m}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return Ur.MIN}maxPost(){return Ur.MAX}makePost(a,l){const m=bi(a);return new Ur(l,m)}toString(){return".value"}};function Ka(u){return{type:"value",snapshotNode:u}}function Vo(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function nc(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function ol(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class rc{constructor(a){this.index_=a}updateChild(a,l,m,C,M,U){(0,H.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const J=a.getImmediateChild(l);return J.getChild(C).equals(m.getChild(C))&&J.isEmpty()===m.isEmpty()||(null!=U&&(m.isEmpty()?a.hasChild(l)?U.trackChildChange(nc(l,J)):(0,H.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):J.isEmpty()?U.trackChildChange(Vo(l,m)):U.trackChildChange(ol(l,m,J))),a.isLeafNode()&&m.isEmpty())?a:a.updateImmediateChild(l,m).withIndex(this.index_)}updateFullNode(a,l,m){return null!=m&&(a.isLeafNode()||a.forEachChild(ve,(C,M)=>{l.hasChild(C)||m.trackChildChange(nc(C,M))}),l.isLeafNode()||l.forEachChild(ve,(C,M)=>{if(a.hasChild(C)){const U=a.getImmediateChild(C);U.equals(M)||m.trackChildChange(ol(C,M,U))}else m.trackChildChange(Vo(C,M))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?In.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ic{constructor(a){this.indexedFilter_=new rc(a.getIndex()),this.index_=a.getIndex(),this.startPost_=ic.getStartPost_(a),this.endPost_=ic.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,m=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&m}updateChild(a,l,m,C,M,U){return this.matches(new Ur(l,m))||(m=In.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,m,C,M,U)}updateFullNode(a,l,m){l.isLeafNode()&&(l=In.EMPTY_NODE);let C=l.withIndex(this.index_);C=C.updatePriority(In.EMPTY_NODE);const M=this;return l.forEachChild(ve,(U,J)=>{M.matches(new Ur(U,J))||(C=C.updateImmediateChild(U,In.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,C,m)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class Wd{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const m=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?m<=0:m<0},this.withinEndPost=l=>{const m=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?m<=0:m<0},this.rangedFilter_=new ic(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,m,C,M,U){return this.rangedFilter_.matches(new Ur(l,m))||(m=In.EMPTY_NODE),a.getImmediateChild(l).equals(m)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,m,C,M,U):this.fullLimitUpdateChild_(a,l,m,M,U)}updateFullNode(a,l,m){let C;if(l.isLeafNode()||l.isEmpty())C=In.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;C=In.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let U=0;for(;M.hasNext()&&U<this.limit_;){const J=M.getNext();if(this.withinDirectionalStart(J)){if(!this.withinDirectionalEnd(J))break;C=C.updateImmediateChild(J.name,J.node),U++}}}else{let M;C=l.withIndex(this.index_),C=C.updatePriority(In.EMPTY_NODE),M=this.reverse_?C.getReverseIterator(this.index_):C.getIterator(this.index_);let U=0;for(;M.hasNext();){const J=M.getNext();U<this.limit_&&this.withinDirectionalStart(J)&&this.withinDirectionalEnd(J)?U++:C=C.updateImmediateChild(J.name,In.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,C,m)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,m,C,M){let U;if(this.reverse_){const Gt=this.index_.getCompare();U=(Qt,vn)=>Gt(vn,Qt)}else U=this.index_.getCompare();const J=a;(0,H.hu)(J.numChildren()===this.limit_,"");const ue=new Ur(l,m),Ce=this.reverse_?J.getFirstChild(this.index_):J.getLastChild(this.index_),Rt=this.rangedFilter_.matches(ue);if(J.hasChild(l)){const Gt=J.getImmediateChild(l);let Qt=C.getChildAfterChild(this.index_,Ce,this.reverse_);for(;null!=Qt&&(Qt.name===l||J.hasChild(Qt.name));)Qt=C.getChildAfterChild(this.index_,Qt,this.reverse_);const vn=null==Qt?1:U(Qt,ue);if(Rt&&!m.isEmpty()&&vn>=0)return null!=M&&M.trackChildChange(ol(l,m,Gt)),J.updateImmediateChild(l,m);{null!=M&&M.trackChildChange(nc(l,Gt));const yr=J.updateImmediateChild(l,In.EMPTY_NODE);return null!=Qt&&this.rangedFilter_.matches(Qt)?(null!=M&&M.trackChildChange(Vo(Qt.name,Qt.node)),yr.updateImmediateChild(Qt.name,Qt.node)):yr}}return m.isEmpty()?a:Rt&&U(Ce,ue)>=0?(null!=M&&(M.trackChildChange(nc(Ce.name,Ce.node)),M.trackChildChange(Vo(l,m))),J.updateImmediateChild(l,m).updateImmediateChild(Ce.name,In.EMPTY_NODE)):a}}class xs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ve}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ys}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ve}copy(){const a=new xs;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function ro(u,a,l){const m=u.copy();return m.startSet_=!0,void 0===a&&(a=null),m.indexStartValue_=a,null!=l?(m.startNameSet_=!0,m.indexStartName_=l):(m.startNameSet_=!1,m.indexStartName_=""),m}function bc(u,a,l){const m=u.copy();return m.endSet_=!0,void 0===a&&(a=null),m.indexEndValue_=a,void 0!==l?(m.endNameSet_=!0,m.indexEndName_=l):(m.endNameSet_=!1,m.indexEndName_=""),m}function qd(u,a){const l=u.copy();return l.index_=a,l}function Lh(u){const a={};if(u.isDefault())return a;let l;if(u.index_===ve?l="$priority":u.index_===va?l="$value":u.index_===Ma?l="$key":((0,H.hu)(u.index_ instanceof yo,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,H.Wl)(l),u.startSet_){const m=u.startAfterSet_?"startAfter":"startAt";a[m]=(0,H.Wl)(u.indexStartValue_),u.startNameSet_&&(a[m]+=","+(0,H.Wl)(u.indexStartName_))}if(u.endSet_){const m=u.endBeforeSet_?"endBefore":"endAt";a[m]=(0,H.Wl)(u.indexEndValue_),u.endNameSet_&&(a[m]+=","+(0,H.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function od(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_),a.sin=!u.startAfterSet_),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_),a.ein=!u.endBeforeSet_),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==ve&&(a.i=u.index_.toString()),a}class Dc extends jc{constructor(a,l,m,C){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=m,this.appCheckTokenProvider_=C,this.log_=No("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,H.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,m,C){const M=a._path.toString();this.log_("Listen called for "+M+" "+a._queryIdentifier);const U=Dc.getListenId_(a,m),J={};this.listens_[U]=J;const ue=Lh(a._queryParams);this.restRequest_(M+".json",ue,(Ce,Rt)=>{let Gt=Rt;if(404===Ce&&(Gt=null,Ce=null),null===Ce&&this.onDataUpdate_(M,Gt,!1,m),(0,H.DV)(this.listens_,U)===J){let Qt;Qt=Ce?401===Ce?"permission_denied":"rest_error:"+Ce:"ok",C(Qt,null)}})}unlisten(a,l){const m=Dc.getListenId_(a,l);delete this.listens_[m]}get(a){const l=Lh(a._queryParams),m=a._path.toString(),C=new H.BH;return this.restRequest_(m+".json",l,(M,U)=>{let J=U;404===M&&(J=null,M=null),null===M?(this.onDataUpdate_(m,J,!1,null),C.resolve(J)):C.reject(new Error(J))}),C.promise}refreshAuthToken(a){}restRequest_(a,l={},m){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([C,M])=>{C&&C.accessToken&&(l.auth=C.accessToken),M&&M.token&&(l.ac=M.token);const U=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,H.xO)(l);this.log_("Sending REST request for "+U);const J=new XMLHttpRequest;J.onreadystatechange=()=>{if(m&&4===J.readyState){this.log_("REST Response for "+U+" received. status:",J.status,"response:",J.responseText);let ue=null;if(J.status>=200&&J.status<300){try{ue=(0,H.cI)(J.responseText)}catch(Ce){Hr("Failed to parse JSON response for "+U+": "+J.responseText)}m(null,ue)}else 401!==J.status&&404!==J.status&&Hr("Got unsuccessful REST response for "+U+" Status: "+J.status),m(J.status);m=null}},J.open("GET",U,!0),J.send()})}}class jo{constructor(){this.rootNode_=In.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function Tc(){return{value:null,children:new Map}}function zi(u,a,l){if(Q(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const m=Or(a);u.children.has(m)||u.children.set(m,Tc()),zi(u.children.get(m),a=Hi(a),l)}}function Dl(u,a){if(Q(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(ve,(m,C)=>{zi(u,new Br(m),C)}),Dl(u,a)}}if(u.children.size>0){const l=Or(a);return a=Hi(a),u.children.has(l)&&Dl(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function wu(u,a,l){null!==u.value?l(a,u.value):function Cu(u,a){u.children.forEach((l,m)=>{a(m,l)})}(u,(m,C)=>{wu(C,new Br(a.toString()+"/"+m),l)})}class bu{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&$(this.last_,(m,C)=>{l[m]=l[m]-C}),this.last_=a,l}}class Mi{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new bu(a);const m=1e4+2e4*Math.random();Ci(this.reportStats_.bind(this),Math.floor(m))}reportStats_(){const a=this.statsListener_.get(),l={};let m=!1;$(a,(C,M)=>{M>0&&(0,H.r3)(this.statsToReport_,C)&&(l[C]=M,m=!0)}),m&&this.server_.reportStats(l),Ci(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var io=(()=>{return(u=io||(io={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",io;var u})();function Du(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Kc{constructor(a,l,m){this.path=a,this.affectedTree=l,this.revert=m,this.type=io.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Q(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Br(a));return new Kc(Si(),l,this.revert)}}return(0,H.hu)(Or(this.path)===a,"operationForChild called for unrelated child."),new Kc(Hi(this.path),this.affectedTree,this.revert)}}class Tu{constructor(a,l){this.source=a,this.path=l,this.type=io.LISTEN_COMPLETE}operationForChild(a){return Q(this.path)?new Tu(this.source,Si()):new Tu(this.source,Hi(this.path))}}class kl{constructor(a,l,m){this.source=a,this.path=l,this.snap=m,this.type=io.OVERWRITE}operationForChild(a){return Q(this.path)?new kl(this.source,Si(),this.snap.getImmediateChild(a)):new kl(this.source,Hi(this.path),this.snap)}}class Sc{constructor(a,l,m){this.source=a,this.path=l,this.children=m,this.type=io.MERGE}operationForChild(a){if(Q(this.path)){const l=this.children.subtree(new Br(a));return l.isEmpty()?null:l.value?new kl(this.source,Si(),l.value):new Sc(this.source,Si(),l)}return(0,H.hu)(Or(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new Sc(this.source,Hi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ac{constructor(a,l,m){this.node_=a,this.fullyInitialized_=l,this.filtered_=m}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Q(a))return this.isFullyInitialized()&&!this.filtered_;const l=Or(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class kg{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Su(u,a,l,m,C,M){const U=m.filter(J=>J.type===l);U.sort((J,ue)=>function ld(u,a,l){if(null==a.childName||null==l.childName)throw(0,H.g5)("Should only compare child_ events.");const m=new Ur(a.childName,a.snapshotNode),C=new Ur(l.childName,l.snapshotNode);return u.index_.compare(m,C)}(u,J,ue)),U.forEach(J=>{const ue=function Fp(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,J,M);C.forEach(Ce=>{Ce.respondsTo(J.type)&&a.push(Ce.createEvent(ue,u.query_))})})}function Au(u,a){return{eventCache:u,serverCache:a}}function xc(u,a,l,m){return Au(new Ac(a,l,m),u.serverCache)}function Zd(u,a,l,m){return Au(u.eventCache,new Ac(a,l,m))}function xu(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function _a(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Rc;class Ii{constructor(a,l=(()=>(Rc||(Rc=new ia(Zl)),Rc))()){this.value=a,this.children=l}static fromObject(a){let l=new Ii(null);return $(a,(m,C)=>{l=l.set(new Br(m),C)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Si(),value:this.value};if(Q(a))return null;{const m=Or(a),C=this.children.get(m);if(null!==C){const M=C.findRootMostMatchingPathAndValue(Hi(a),l);return null!=M?{path:j(new Br(m),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Q(a))return this;{const l=Or(a),m=this.children.get(l);return null!==m?m.subtree(Hi(a)):new Ii(null)}}set(a,l){if(Q(a))return new Ii(l,this.children);{const m=Or(a),M=(this.children.get(m)||new Ii(null)).set(Hi(a),l),U=this.children.insert(m,M);return new Ii(this.value,U)}}remove(a){if(Q(a))return this.children.isEmpty()?new Ii(null):new Ii(null,this.children);{const l=Or(a),m=this.children.get(l);if(m){const C=m.remove(Hi(a));let M;return M=C.isEmpty()?this.children.remove(l):this.children.insert(l,C),null===this.value&&M.isEmpty()?new Ii(null):new Ii(this.value,M)}return this}}get(a){if(Q(a))return this.value;{const l=Or(a),m=this.children.get(l);return m?m.get(Hi(a)):null}}setTree(a,l){if(Q(a))return l;{const m=Or(a),M=(this.children.get(m)||new Ii(null)).setTree(Hi(a),l);let U;return U=M.isEmpty()?this.children.remove(m):this.children.insert(m,M),new Ii(this.value,U)}}fold(a){return this.fold_(Si(),a)}fold_(a,l){const m={};return this.children.inorderTraversal((C,M)=>{m[C]=M.fold_(j(a,C),l)}),l(a,this.value,m)}findOnPath(a,l){return this.findOnPath_(a,Si(),l)}findOnPath_(a,l,m){const C=!!this.value&&m(l,this.value);if(C)return C;if(Q(a))return null;{const M=Or(a),U=this.children.get(M);return U?U.findOnPath_(Hi(a),j(l,M),m):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Si(),l)}foreachOnPath_(a,l,m){if(Q(a))return this;{this.value&&m(l,this.value);const C=Or(a),M=this.children.get(C);return M?M.foreachOnPath_(Hi(a),j(l,C),m):new Ii(null)}}foreach(a){this.foreach_(Si(),a)}foreach_(a,l){this.children.inorderTraversal((m,C)=>{C.foreach_(j(a,m),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,m)=>{m.value&&a(l,m.value)})}}class qa{constructor(a){this.writeTree_=a}static empty(){return new qa(new Ii(null))}}function Yc(u,a,l){if(Q(a))return new qa(new Ii(l));{const m=u.writeTree_.findRootMostValueAndPath(a);if(null!=m){const C=m.path;let M=m.value;const U=se(C,a);return M=M.updateChild(U,l),new qa(u.writeTree_.set(C,M))}{const C=new Ii(l),M=u.writeTree_.setTree(a,C);return new qa(M)}}}function Tl(u,a,l){let m=u;return $(l,(C,M)=>{m=Yc(m,j(a,C),M)}),m}function Mf(u,a){if(Q(a))return qa.empty();{const l=u.writeTree_.setTree(a,new Ii(null));return new qa(l)}}function Sl(u,a){return null!=sc(u,a)}function sc(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(se(l.path,a)):null}function Zc(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ve,(m,C)=>{a.push(new Ur(m,C))}):u.writeTree_.children.inorderTraversal((m,C)=>{null!=C.value&&a.push(new Ur(m,C.value))}),a}function al(u,a){if(Q(a))return u;{const l=sc(u,a);return new qa(null!=l?new Ii(l):u.writeTree_.subtree(a))}}function Ru(u){return u.writeTree_.isEmpty()}function sa(u,a){return vo(Si(),u.writeTree_,a)}function vo(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let m=null;return a.children.inorderTraversal((C,M)=>{".priority"===C?((0,H.hu)(null!==M.value,"Priority writes must always be leaf nodes"),m=M.value):l=vo(j(u,C),M,l)}),!l.getChild(u).isEmpty()&&null!==m&&(l=l.updateChild(j(u,".priority"),m)),l}}function oc(u,a){return Pu(a,u)}function Qc(u,a){if(u.snap)return ln(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&ln(j(u.path,l),a))return!0;return!1}function Pf(u){return u.visible}function $h(u,a,l){let m=qa.empty();for(let C=0;C<u.length;++C){const M=u[C];if(a(M)){const U=M.path;let J;if(M.snap)ln(l,U)?(J=se(l,U),m=Yc(m,J,M.snap)):ln(U,l)&&(J=se(U,l),m=Yc(m,Si(),M.snap.getChild(J)));else{if(!M.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(ln(l,U))J=se(l,U),m=Tl(m,J,M.children);else if(ln(U,l))if(J=se(U,l),Q(J))m=Tl(m,Si(),M.children);else{const ue=(0,H.DV)(M.children,Or(J));if(ue){const Ce=ue.getChild(Hi(J));m=Yc(m,Si(),Ce)}}}}}return m}function Nl(u,a,l,m,C){if(m||C){const M=al(u.visibleWrites,a);return!C&&Ru(M)?l:C||null!=l||Sl(M,Si())?sa($h(u.allWrites,function(Ce){return(Ce.visible||C)&&(!m||!~m.indexOf(Ce.writeId))&&(ln(Ce.path,a)||ln(a,Ce.path))},a),l||In.EMPTY_NODE):null}{const M=sc(u.visibleWrites,a);if(null!=M)return M;{const U=al(u.visibleWrites,a);return Ru(U)?l:null!=l||Sl(U,Si())?sa(U,l||In.EMPTY_NODE):null}}}function Fl(u,a,l,m){return Nl(u.writeTree,u.treePath,a,l,m)}function tu(u,a){return function Lp(u,a,l){let m=In.EMPTY_NODE;const C=sc(u.visibleWrites,a);if(C)return C.isLeafNode()||C.forEachChild(ve,(M,U)=>{m=m.updateImmediateChild(M,U)}),m;if(l){const M=al(u.visibleWrites,a);return l.forEachChild(ve,(U,J)=>{const ue=sa(al(M,new Br(U)),J);m=m.updateImmediateChild(U,ue)}),Zc(M).forEach(U=>{m=m.updateImmediateChild(U.name,U.node)}),m}return Zc(al(u.visibleWrites,a)).forEach(U=>{m=m.updateImmediateChild(U.name,U.node)}),m}(u.writeTree,u.treePath,a)}function Uh(u,a,l,m){return function So(u,a,l,m,C){(0,H.hu)(m||C,"Either existingEventSnap or existingServerSnap must exist");const M=j(a,l);if(Sl(u.visibleWrites,M))return null;{const U=al(u.visibleWrites,M);return Ru(U)?C.getChild(l):sa(U,C.getChild(l))}}(u.writeTree,u.treePath,a,l,m)}function hd(u,a){return function eu(u,a){return sc(u.visibleWrites,a)}(u.writeTree,j(u.treePath,a))}function Mu(u,a,l){return function Bh(u,a,l,m){const C=j(a,l),M=sc(u.visibleWrites,C);return null!=M?M:m.isCompleteForChild(l)?sa(al(u.visibleWrites,C),m.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function Qd(u,a){return Pu(j(u.treePath,a),u.writeTree)}function Pu(u,a){return{treePath:u,writeTree:a}}class fd{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,m=a.childName;(0,H.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==m,"Only non-priority child changes can be tracked.");const C=this.changeMap.get(m);if(C){const M=C.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(m,ol(m,a.snapshotNode,C.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(m);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(m,nc(m,C.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(m,Vo(m,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,H.g5)("Illegal combination of changes: "+a+" occurred after "+C);this.changeMap.set(m,ol(m,a.snapshotNode,C.oldSnap))}}else this.changeMap.set(m,a)}getChanges(){return Array.from(this.changeMap.values())}}const Ll=new class oa{getCompleteChild(a){return null}getChildAfterChild(a,l,m){return null}};class pd{constructor(a,l,m=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=m}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const m=null!=this.optCompleteServerCache_?new Ac(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mu(this.writes_,a,m)}}getChildAfterChild(a,l,m){const C=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_a(this.viewCache_),M=function Qr(u,a,l,m,C,M){return function dd(u,a,l,m,C,M,U){let J;const ue=al(u.visibleWrites,a),Ce=sc(ue,Si());if(null!=Ce)J=Ce;else{if(null==l)return[];J=sa(ue,l)}if(J=J.withIndex(U),J.isEmpty()||J.isLeafNode())return[];{const Rt=[],Gt=U.getCompare(),Qt=M?J.getReverseIteratorFrom(m,U):J.getIteratorFrom(m,U);let vn=Qt.getNext();for(;vn&&Rt.length<C;)0!==Gt(vn,m)&&Rt.push(vn),vn=Qt.getNext();return Rt}}(u.writeTree,u.treePath,a,l,m,C,M)}(this.writes_,C,l,1,m,a);return 0===M.length?null:M[0]}}function Jd(u,a,l,m,C,M){const U=a.eventCache;if(null!=hd(m,l))return a;{let J,ue;if(Q(l))if((0,H.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Ce=_a(a),Gt=tu(m,Ce instanceof In?Ce:In.EMPTY_NODE);J=u.filter.updateFullNode(a.eventCache.getNode(),Gt,M)}else{const Ce=Fl(m,_a(a));J=u.filter.updateFullNode(a.eventCache.getNode(),Ce,M)}else{const Ce=Or(l);if(".priority"===Ce){(0,H.hu)(1===js(l),"Can't have a priority with additional path components");const Rt=U.getNode();ue=a.serverCache.getNode();const Gt=Uh(m,l,Rt,ue);J=null!=Gt?u.filter.updatePriority(Rt,Gt):U.getNode()}else{const Rt=Hi(l);let Gt;if(U.isCompleteForChild(Ce)){ue=a.serverCache.getNode();const Qt=Uh(m,l,U.getNode(),ue);Gt=null!=Qt?U.getNode().getImmediateChild(Ce).updateChild(Rt,Qt):U.getNode().getImmediateChild(Ce)}else Gt=Mu(m,Ce,a.serverCache);J=null!=Gt?u.filter.updateChild(U.getNode(),Ce,Gt,Rt,C,M):U.getNode()}}return xc(a,J,U.isFullyInitialized()||Q(l),u.filter.filtersNodes())}}function Bl(u,a,l,m,C,M,U,J){const ue=a.serverCache;let Ce;const Rt=U?u.filter:u.filter.getIndexedFilter();if(Q(l))Ce=Rt.updateFullNode(ue.getNode(),m,null);else if(Rt.filtersNodes()&&!ue.isFiltered()){const vn=ue.getNode().updateChild(l,m);Ce=Rt.updateFullNode(ue.getNode(),vn,null)}else{const vn=Or(l);if(!ue.isCompleteForPath(l)&&js(l)>1)return a;const Ln=Hi(l),Jr=ue.getNode().getImmediateChild(vn).updateChild(Ln,m);Ce=".priority"===vn?Rt.updatePriority(ue.getNode(),Jr):Rt.updateChild(ue.getNode(),vn,Jr,Ln,Ll,null)}const Gt=Zd(a,Ce,ue.isFullyInitialized()||Q(l),Rt.filtersNodes());return Jd(u,Gt,l,C,new pd(C,Gt,M),J)}function Al(u,a,l,m,C,M,U){const J=a.eventCache;let ue,Ce;const Rt=new pd(C,a,M);if(Q(l))Ce=u.filter.updateFullNode(a.eventCache.getNode(),m,U),ue=xc(a,Ce,!0,u.filter.filtersNodes());else{const Gt=Or(l);if(".priority"===Gt)Ce=u.filter.updatePriority(a.eventCache.getNode(),m),ue=xc(a,Ce,J.isFullyInitialized(),J.isFiltered());else{const Qt=Hi(l),vn=J.getNode().getImmediateChild(Gt);let Ln;if(Q(Qt))Ln=m;else{const yr=Rt.getCompleteChild(Gt);Ln=null!=yr?".priority"===A(Qt)&&yr.getChild(O(Qt)).isEmpty()?yr:yr.updateChild(Qt,m):In.EMPTY_NODE}ue=vn.equals(Ln)?a:xc(a,u.filter.updateChild(J.getNode(),Gt,Ln,Qt,Rt,U),J.isFullyInitialized(),u.filter.filtersNodes())}}return ue}function aa(u,a){return u.eventCache.isCompleteForChild(a)}function Vh(u,a,l){return l.foreach((m,C)=>{a=a.updateChild(m,C)}),a}function iu(u,a,l,m,C,M,U,J){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Ce,ue=a;Ce=Q(l)?m:new Ii(null).setTree(l,m);const Rt=a.serverCache.getNode();return Ce.children.inorderTraversal((Gt,Qt)=>{if(Rt.hasChild(Gt)){const Ln=Vh(0,a.serverCache.getNode().getImmediateChild(Gt),Qt);ue=Bl(u,ue,new Br(Gt),Ln,C,M,U,J)}}),Ce.children.inorderTraversal((Gt,Qt)=>{const vn=!a.serverCache.isCompleteForChild(Gt)&&null===Qt.value;if(!Rt.hasChild(Gt)&&!vn){const yr=Vh(0,a.serverCache.getNode().getImmediateChild(Gt),Qt);ue=Bl(u,ue,new Br(Gt),yr,C,M,U,J)}}),ue}class Ou{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const m=this.query_._queryParams,C=new rc(m.getIndex()),M=function sd(u){return u.loadsAllData()?new rc(u.getIndex()):u.hasLimit()?new Wd(u):new ic(u)}(m);this.processor_=function Of(u){return{filter:u}}(M);const U=l.serverCache,J=l.eventCache,ue=C.updateFullNode(In.EMPTY_NODE,U.getNode(),null),Ce=M.updateFullNode(In.EMPTY_NODE,J.getNode(),null),Rt=new Ac(ue,U.isFullyInitialized(),C.filtersNodes()),Gt=new Ac(Ce,J.isFullyInitialized(),M.filtersNodes());this.viewCache_=Au(Gt,Rt),this.eventGenerator_=new kg(this.query_)}get query(){return this.query_}}function md(u,a){const l=_a(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!Q(a)&&!l.getImmediateChild(Or(a)).isEmpty())?l.getChild(a):null}function su(u){return 0===u.eventRegistrations_.length}function ku(u,a,l){const m=[];if(l){(0,H.hu)(null==a,"A cancel should cancel all event registrations.");const C=u.query._path;u.eventRegistrations_.forEach(M=>{const U=M.createCancelEvent(l,C);U&&m.push(U)})}if(a){let C=[];for(let M=0;M<u.eventRegistrations_.length;++M){const U=u.eventRegistrations_[M];if(U.matches(a)){if(a.hasAnyCallback()){C=C.concat(u.eventRegistrations_.slice(M+1));break}}else C.push(U)}u.eventRegistrations_=C}else u.eventRegistrations_=[];return m}function Ho(u,a,l,m){a.type===io.MERGE&&null!==a.source.queryId&&((0,H.hu)(_a(u.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(xu(u.viewCache_),"Missing event cache, even though we have a server cache"));const C=u.viewCache_,M=function Mc(u,a,l,m,C){const M=new fd;let U,J;if(l.type===io.OVERWRITE){const Ce=l;Ce.source.fromUser?U=Al(u,a,Ce.path,Ce.snap,m,C,M):((0,H.hu)(Ce.source.fromServer,"Unknown source."),J=Ce.source.tagged||a.serverCache.isFiltered()&&!Q(Ce.path),U=Bl(u,a,Ce.path,Ce.snap,m,C,J,M))}else if(l.type===io.MERGE){const Ce=l;Ce.source.fromUser?U=function ru(u,a,l,m,C,M,U){let J=a;return m.foreach((ue,Ce)=>{const Rt=j(l,ue);aa(a,Or(Rt))&&(J=Al(u,J,Rt,Ce,C,M,U))}),m.foreach((ue,Ce)=>{const Rt=j(l,ue);aa(a,Or(Rt))||(J=Al(u,J,Rt,Ce,C,M,U))}),J}(u,a,Ce.path,Ce.children,m,C,M):((0,H.hu)(Ce.source.fromServer,"Unknown source."),J=Ce.source.tagged||a.serverCache.isFiltered(),U=iu(u,a,Ce.path,Ce.children,m,C,J,M))}else if(l.type===io.ACK_USER_WRITE){const Ce=l;U=Ce.revert?function hs(u,a,l,m,C,M){let U;if(null!=hd(m,l))return a;{const J=new pd(m,a,C),ue=a.eventCache.getNode();let Ce;if(Q(l)||".priority"===Or(l)){let Rt;if(a.serverCache.isFullyInitialized())Rt=Fl(m,_a(a));else{const Gt=a.serverCache.getNode();(0,H.hu)(Gt instanceof In,"serverChildren would be complete if leaf node"),Rt=tu(m,Gt)}Ce=u.filter.updateFullNode(ue,Rt,M)}else{const Rt=Or(l);let Gt=Mu(m,Rt,a.serverCache);null==Gt&&a.serverCache.isCompleteForChild(Rt)&&(Gt=ue.getImmediateChild(Rt)),Ce=null!=Gt?u.filter.updateChild(ue,Rt,Gt,Hi(l),J,M):a.eventCache.getNode().hasChild(Rt)?u.filter.updateChild(ue,Rt,In.EMPTY_NODE,Hi(l),J,M):ue,Ce.isEmpty()&&a.serverCache.isFullyInitialized()&&(U=Fl(m,_a(a)),U.isLeafNode()&&(Ce=u.filter.updateFullNode(Ce,U,M)))}return U=a.serverCache.isFullyInitialized()||null!=hd(m,Si()),xc(a,Ce,U,u.filter.filtersNodes())}}(u,a,Ce.path,m,C,M):function kf(u,a,l,m,C,M,U){if(null!=hd(C,l))return a;const J=a.serverCache.isFiltered(),ue=a.serverCache;if(null!=m.value){if(Q(l)&&ue.isFullyInitialized()||ue.isCompleteForPath(l))return Bl(u,a,l,ue.getNode().getChild(l),C,M,J,U);if(Q(l)){let Ce=new Ii(null);return ue.getNode().forEachChild(Ma,(Rt,Gt)=>{Ce=Ce.set(new Br(Rt),Gt)}),iu(u,a,l,Ce,C,M,J,U)}return a}{let Ce=new Ii(null);return m.foreach((Rt,Gt)=>{const Qt=j(l,Rt);ue.isCompleteForPath(Qt)&&(Ce=Ce.set(Rt,ue.getNode().getChild(Qt)))}),iu(u,a,l,Ce,C,M,J,U)}}(u,a,Ce.path,Ce.affectedTree,m,C,M)}else{if(l.type!==io.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+l.type);U=function Pa(u,a,l,m,C){const M=a.serverCache;return Jd(u,Zd(a,M.getNode(),M.isFullyInitialized()||Q(l),M.isFiltered()),l,m,Ll,C)}(u,a,l.path,m,M)}const ue=M.getChanges();return function nu(u,a,l){const m=a.eventCache;if(m.isFullyInitialized()){const C=m.getNode().isLeafNode()||m.getNode().isEmpty(),M=xu(u);(l.length>0||!u.eventCache.isFullyInitialized()||C&&!m.getNode().equals(M)||!m.getNode().getPriority().equals(M.getPriority()))&&l.push(Ka(xu(a)))}}(a,U,ue),{viewCache:U,changes:ue}}(u.processor_,C,a,l,m);return function $l(u,a){(0,H.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,M.viewCache),(0,H.hu)(M.viewCache.serverCache.isFullyInitialized()||!C.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=M.viewCache,eh(u,M.changes,M.viewCache.eventCache.getNode(),null)}function eh(u,a,l,m){return function qc(u,a,l,m){const C=[],M=[];return a.forEach(U=>{"child_changed"===U.type&&u.index_.indexedValueChanged(U.oldSnap,U.snapshotNode)&&M.push(function Rf(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(U.childName,U.snapshotNode))}),Su(u,C,"child_removed",a,m,l),Su(u,C,"child_added",a,m,l),Su(u,C,"child_moved",M,m,l),Su(u,C,"child_changed",a,m,l),Su(u,C,"value",a,m,l),C}(u.eventGenerator_,a,l,m?[m]:u.eventRegistrations_)}let Nu,Ao;class th{constructor(){this.views=new Map}}function x(u,a,l,m){const C=a.source.queryId;if(null!==C){const M=u.views.get(C);return(0,H.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Ho(M,a,l,m)}{let M=[];for(const U of u.views.values())M=M.concat(Ho(U,a,l,m));return M}}function W(u,a,l,m,C){const U=u.views.get(a._queryIdentifier);if(!U){let J=Fl(l,C?m:null),ue=!1;J?ue=!0:m instanceof In?(J=tu(l,m),ue=!1):(J=In.EMPTY_NODE,ue=!1);const Ce=Au(new Ac(J,ue,!1),new Ac(m,C,!1));return new Ou(a,Ce)}return U}function Dt(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function Zt(u,a){let l=null;for(const m of u.views.values())l=l||md(m,a);return l}function Mn(u,a){return a._queryParams.loadsAllData()?Gi(u):u.views.get(a._queryIdentifier)}function er(u,a){return null!=Mn(u,a)}function zn(u){return null!=Gi(u)}function Gi(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let nh=1;class Es{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Ii(null),this.pendingWriteTree_=function ll(){return{visibleWrites:qa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Pc(u,a,l,m,C){return function Xc(u,a,l,m,C){(0,H.hu)(m>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===C&&(C=!0),u.allWrites.push({path:a,snap:l,writeId:m,visible:C}),C&&(u.visibleWrites=Yc(u.visibleWrites,a,l)),u.lastWriteId=m}(u.pendingWriteTree_,a,l,m,C),C?_d(u,new kl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Ea(u,a,l=!1){const m=function Xd(u,a){for(let l=0;l<u.allWrites.length;l++){const m=u.allWrites[l];if(m.writeId===a)return m}return null}(u.pendingWriteTree_,a);if(function ud(u,a){const l=u.allWrites.findIndex(J=>J.writeId===a);(0,H.hu)(l>=0,"removeWrite called with nonexistent writeId.");const m=u.allWrites[l];u.allWrites.splice(l,1);let C=m.visible,M=!1,U=u.allWrites.length-1;for(;C&&U>=0;){const J=u.allWrites[U];J.visible&&(U>=l&&Qc(J,m.path)?C=!1:ln(m.path,J.path)&&(M=!0)),U--}return!!C&&(M?(function Jc(u){u.visibleWrites=$h(u.allWrites,Pf,Si()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(m.snap?u.visibleWrites=Mf(u.visibleWrites,m.path):$(m.children,ue=>{u.visibleWrites=Mf(u.visibleWrites,j(m.path,ue))}),!0))}(u.pendingWriteTree_,a)){let M=new Ii(null);return null!=m.snap?M=M.set(Si(),!0):$(m.children,U=>{M=M.set(new Br(U),!0)}),_d(u,new Kc(m.path,M,l))}return[]}function Vl(u,a,l){return _d(u,new kl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function Fu(u,a,l,m,C=!1){const M=a._path,U=u.syncPointTree_.get(M);let J=[];if(U&&("default"===a._queryIdentifier||er(U,a))){const ue=function st(u,a,l,m){const C=a._queryIdentifier,M=[];let U=[];const J=zn(u);if("default"===C)for(const[ue,Ce]of u.views.entries())U=U.concat(ku(Ce,l,m)),su(Ce)&&(u.views.delete(ue),Ce.query._queryParams.loadsAllData()||M.push(Ce.query));else{const ue=u.views.get(C);ue&&(U=U.concat(ku(ue,l,m)),su(ue)&&(u.views.delete(C),ue.query._queryParams.loadsAllData()||M.push(ue.query)))}return J&&!zn(u)&&M.push(new(function v(){return(0,H.hu)(Nu,"Reference.ts has not been loaded"),Nu}())(a._repo,a._path)),{removed:M,events:U}}(U,a,l,m);(function _(u){return 0===u.views.size})(U)&&(u.syncPointTree_=u.syncPointTree_.remove(M));const Ce=ue.removed;if(J=ue.events,!C){const Rt=-1!==Ce.findIndex(Qt=>Qt._queryParams.loadsAllData()),Gt=u.syncPointTree_.findOnPath(M,(Qt,vn)=>zn(vn));if(Rt&&!Gt){const Qt=u.syncPointTree_.subtree(M);if(!Qt.isEmpty()){const vn=function jl(u){return u.fold((a,l,m)=>{if(l&&zn(l))return[Gi(l)];{let C=[];return l&&(C=Dt(l)),$(m,(M,U)=>{C=C.concat(U)}),C}})}(Qt);for(let Ln=0;Ln<vn.length;++Ln){const yr=vn[Ln],Jr=yr.query,zs=Bp(u,yr);u.listenProvider_.startListening(Ed(Jr),zh(u,Jr),zs.hashFn,zs.onComplete)}}}!Gt&&Ce.length>0&&!m&&(Rt?u.listenProvider_.stopListening(Ed(a),null):Ce.forEach(Qt=>{const vn=u.queryToTagMap.get(Rs(Qt));u.listenProvider_.stopListening(Ed(Qt),vn)}))}!function Lf(u,a){for(let l=0;l<a.length;++l){const m=a[l];if(!m._queryParams.loadsAllData()){const C=Rs(m),M=u.queryToTagMap.get(C);u.queryToTagMap.delete(C),u.tagToQueryMap.delete(M)}}}(u,Ce)}return J}function ih(u,a,l,m){const C=sh(u,m);if(null!=C){const M=oh(C),U=M.path,J=M.queryId,ue=se(U,a);return ah(u,U,new kl(Du(J),ue,l))}return[]}function Ng(u,a,l,m=!1){const C=a._path;let M=null,U=!1;u.syncPointTree_.foreachOnPath(C,(Qt,vn)=>{const Ln=se(Qt,C);M=M||Zt(vn,Ln),U=U||zn(vn)});let ue,J=u.syncPointTree_.get(C);J?(U=U||zn(J),M=M||Zt(J,Si())):(J=new th,u.syncPointTree_=u.syncPointTree_.set(C,J)),null!=M?ue=!0:(ue=!1,M=In.EMPTY_NODE,u.syncPointTree_.subtree(C).foreachChild((vn,Ln)=>{const yr=Zt(Ln,Si());yr&&(M=M.updateImmediateChild(vn,yr))}));const Ce=er(J,a);if(!Ce&&!a._queryParams.loadsAllData()){const Qt=Rs(a);(0,H.hu)(!u.queryToTagMap.has(Qt),"View does not exist, but we have a tag");const vn=function lh(){return nh++}();u.queryToTagMap.set(Qt,vn),u.tagToQueryMap.set(vn,Qt)}let Gt=function ie(u,a,l,m,C,M){const U=W(u,a,m,C,M);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,U),function Nf(u,a){u.eventRegistrations_.push(a)}(U,l),function Ya(u,a){const l=u.viewCache_.eventCache,m=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(ve,(M,U)=>{m.push(Vo(M,U))}),l.isFullyInitialized()&&m.push(Ka(l.getNode())),eh(u,m,l.getNode(),a)}(U,l)}(J,a,l,oc(u.pendingWriteTree_,C),M,ue);if(!Ce&&!U&&!m){const Qt=Mn(J,a);Gt=Gt.concat(function Up(u,a,l){const m=a._path,C=zh(u,a),M=Bp(u,l),U=u.listenProvider_.startListening(Ed(a),C,M.hashFn,M.onComplete),J=u.syncPointTree_.subtree(m);if(C)(0,H.hu)(!zn(J.value),"If we're adding a query, it shouldn't be shadowed");else{const ue=J.fold((Ce,Rt,Gt)=>{if(!Q(Ce)&&Rt&&zn(Rt))return[Gi(Rt).query];{let Qt=[];return Rt&&(Qt=Qt.concat(Dt(Rt).map(vn=>vn.query))),$(Gt,(vn,Ln)=>{Qt=Qt.concat(Ln)}),Qt}});for(let Ce=0;Ce<ue.length;++Ce){const Rt=ue[Ce];u.listenProvider_.stopListening(Ed(Rt),zh(u,Rt))}}return U}(u,a,Qt))}return Gt}function Lu(u,a,l){const C=u.pendingWriteTree_,M=u.syncPointTree_.findOnPath(a,(U,J)=>{const Ce=Zt(J,se(U,a));if(Ce)return Ce});return Nl(C,a,M,l,!0)}function _d(u,a){return Hh(a,u.syncPointTree_,null,oc(u.pendingWriteTree_,Si()))}function Hh(u,a,l,m){if(Q(u.path))return $u(u,a,l,m);{const C=a.get(Si());null==l&&null!=C&&(l=Zt(C,Si()));let M=[];const U=Or(u.path),J=u.operationForChild(U),ue=a.children.get(U);if(ue&&J){const Ce=l?l.getImmediateChild(U):null,Rt=Qd(m,U);M=M.concat(Hh(J,ue,Ce,Rt))}return C&&(M=M.concat(x(C,u,m,l))),M}}function $u(u,a,l,m){const C=a.get(Si());null==l&&null!=C&&(l=Zt(C,Si()));let M=[];return a.children.inorderTraversal((U,J)=>{const ue=l?l.getImmediateChild(U):null,Ce=Qd(m,U),Rt=u.operationForChild(U);Rt&&(M=M.concat($u(Rt,J,ue,Ce)))}),C&&(M=M.concat(x(C,u,m,l))),M}function Bp(u,a){const l=a.query,m=zh(u,l);return{hashFn:()=>(function gd(u){return u.viewCache_.serverCache.getNode()}(a)||In.EMPTY_NODE).hash(),onComplete:C=>{if("ok"===C)return m?function Ff(u,a,l){const m=sh(u,l);if(m){const C=oh(m),M=C.path,U=C.queryId,J=se(M,a);return ah(u,M,new Tu(Du(U),J))}return[]}(u,l._path,m):function jh(u,a){return _d(u,new Tu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const M=function en(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const m=new Error(u+" at "+a._path.toString()+": "+l);return m.code=u.toUpperCase(),m}(C,l);return Fu(u,l,null,M)}}}}function zh(u,a){const l=Rs(a);return u.queryToTagMap.get(l)}function Rs(u){return u._path.toString()+"$"+u._queryIdentifier}function sh(u,a){return u.tagToQueryMap.get(a)}function oh(u){const a=u.indexOf("$");return(0,H.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new Br(u.substr(0,a))}}function ah(u,a,l){const m=u.syncPointTree_.get(a);return(0,H.hu)(m,"Missing sync point for query tag that we're tracking"),x(m,l,oc(u.pendingWriteTree_,a),null)}function Ed(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function vd(){return(0,H.hu)(Ao,"Reference.ts has not been loaded"),Ao}())(u._repo,u._path):u}class Oc{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new Oc(l)}node(){return this.node_}}class $f{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=j(this.path_,a);return new $f(this.syncTree_,l)}node(){return Lu(this.syncTree_,this.path_)}}const Vp=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},Gh=function(u,a,l){return u&&"object"==typeof u?((0,H.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Wh(u[".sv"],a,l):"object"==typeof u[".sv"]?Kh(u[".sv"],a):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Wh=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,H.hu)(!1,"Unexpected server value: "+u)},Kh=function(u,a,l){u.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const m=u.increment;"number"!=typeof m&&(0,H.hu)(!1,"Unexpected increment value: "+m);const C=a.node();if((0,H.hu)(null!==C&&typeof C<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!C.isLeafNode())return m;const U=C.getValue();return"number"!=typeof U?m:U+m},qh=function(u,a,l,m){return ch(a,new $f(l,u),m)},kc=function(u,a,l){return ch(u,new Oc(a),l)};function ch(u,a,l){const m=u.getPriority().val(),C=Gh(m,a.getImmediateChild(".priority"),l);let M;if(u.isLeafNode()){const U=u,J=Gh(U.getValue(),a,l);return J!==U.getValue()||C!==U.getPriority().val()?new bl(J,bi(C)):u}{const U=u;return M=U,C!==U.getPriority().val()&&(M=M.updatePriority(new bl(C))),U.forEachChild(ve,(J,ue)=>{const Ce=ch(ue,a.getImmediateChild(J),l);Ce!==ue&&(M=M.updateImmediateChild(J,Ce))}),M}}class uh{constructor(a="",l=null,m={children:{},childCount:0}){this.name=a,this.parent=l,this.node=m}}function Bf(u,a){let l=a instanceof Br?a:new Br(a),m=u,C=Or(l);for(;null!==C;){const M=(0,H.DV)(m.node.children,C)||{children:{},childCount:0};m=new uh(C,m,M),l=Hi(l),C=Or(l)}return m}function Bu(u){return u.node.value}function Uf(u,a){u.node.value=a,Zh(u)}function Id(u){return u.node.childCount>0}function lc(u,a){$(u.node.children,(l,m)=>{a(new uh(l,u,m))})}function wd(u,a,l,m){l&&!m&&a(u),lc(u,C=>{wd(C,a,!0,m)}),l&&m&&a(u)}function Yh(u){return new Br(null===u.parent?u.name:Yh(u.parent)+"/"+u.name)}function Zh(u){null!==u.parent&&function au(u,a,l){const m=function jm(u){return void 0===Bu(u)&&!Id(u)}(l),C=(0,H.r3)(u.node.children,a);m&&C?(delete u.node.children[a],u.node.childCount--,Zh(u)):!m&&!C&&(u.node.children[a]=l.node,u.node.childCount++,Zh(u))}(u.parent,u.name,u)}const jp=/[\[\].#$\/\u0000-\u001F\u007F]/,Jy=/[\[\].#$\u0000-\u001F\u007F]/,jf=10485760,cc=function(u){return"string"==typeof u&&0!==u.length&&!jp.test(u)},Uu=function(u){return"string"==typeof u&&0!==u.length&&!Jy.test(u)},Za=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!fo(u)||u&&"object"==typeof u&&(0,H.r3)(u,".sv")},cl=function(u,a,l,m){m&&void 0===a||Cd((0,H.gK)(u,"value"),a,l)},Cd=function(u,a,l){const m=l instanceof Br?new Jn(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Ai(m));if("function"==typeof a)throw new Error(u+"contains a function "+Ai(m)+" with contents = "+a.toString());if(fo(a))throw new Error(u+"contains "+a.toString()+" "+Ai(m));if("string"==typeof a&&a.length>jf/3&&(0,H.ug)(a)>jf)throw new Error(u+"contains a string greater than "+jf+" utf8 bytes "+Ai(m)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let C=!1,M=!1;if($(a,(U,J)=>{if(".value"===U)C=!0;else if(".priority"!==U&&".sv"!==U&&(M=!0,!cc(U)))throw new Error(u+" contains an invalid key ("+U+") "+Ai(m)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Vn(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,H.ug)(a),os(u)})(m,U),Cd(u,J,m),function Kr(u){const a=u.parts_.pop();u.byteLength_-=(0,H.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(m)}),C&&M)throw new Error(u+' contains ".value" child '+Ai(m)+" in addition to actual children.")}},Hf=function(u,a,l,m){if(m&&void 0===a)return;const C=(0,H.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(C+" must be an object containing the children to replace.");const M=[];$(a,(U,J)=>{const ue=new Br(U);if(Cd(C,J,j(l,ue)),".priority"===A(ue)&&!Za(J))throw new Error(C+"contains an invalid value for '"+ue.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(ue)}),function(u,a){let l,m;for(l=0;l<a.length;l++){m=a[l];const M=b(m);for(let U=0;U<M.length;U++)if((".priority"!==M[U]||U!==M.length-1)&&!cc(M[U]))throw new Error(u+"contains an invalid key ("+M[U]+") in path "+m.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(ct);let C=null;for(l=0;l<a.length;l++){if(m=a[l],null!==C&&ln(C,m))throw new Error(u+"contains a path "+C.toString()+" that is ancestor of another path "+m.toString());C=m}}(C,M)},zf=function(u,a,l){if(!l||void 0!==a){if(fo(a))throw new Error((0,H.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Za(a))throw new Error((0,H.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bd=function(u,a,l,m){if(!(m&&void 0===l||cc(l)))throw new Error((0,H.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dh=function(u,a,l,m){if(!(m&&void 0===l||Uu(l)))throw new Error((0,H.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Gf=function(u,a,l,m){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),dh(u,a,l,m)},Xa=function(u,a){if(".info"===Or(a))throw new Error(u+" failed = Can't modify data under /.info/")},Xh=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!cc(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Uu(u)}(l))throw new Error((0,H.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Dd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ul(u,a){let l=null;for(let m=0;m<a.length;m++){const C=a[m],M=C.getPath();null!==l&&!zt(M,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(C)}l&&u.eventLists_.push(l)}function Fg(u,a,l){ul(u,l),Lg(u,m=>zt(m,a))}function dl(u,a,l){ul(u,l),Lg(u,m=>ln(m,a)||ln(a,m))}function Lg(u,a){u.recursionDepth_++;let l=!0;for(let m=0;m<u.eventLists_.length;m++){const C=u.eventLists_[m];C&&(a(C.path)?(Hm(u.eventLists_[m]),u.eventLists_[m]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function Hm(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const m=l.getEventRunner();Qs&&qi("event: "+l.toString()),wr(m)}}}const $g="repo_interrupt",Qh=25;class Td{constructor(a,l,m,C){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=m,this.appCheckProvider_=C,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tc(),this.transactionQueueTree_=new uh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uc(u){const l=u.infoData_.getNode(new Br(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Jh(u){return Vp({timestamp:uc(u)})}function zp(u,a,l,m,C){u.dataUpdateCount++;const M=new Br(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let U=[];if(C)if(m){const ue=(0,H.UI)(l,Ce=>bi(Ce));U=function Vm(u,a,l,m){const C=sh(u,m);if(C){const M=oh(C),U=M.path,J=M.queryId,ue=se(U,a),Ce=Ii.fromObject(l);return ah(u,U,new Sc(Du(J),ue,Ce))}return[]}(u.serverSyncTree_,M,ue,C)}else{const ue=bi(l);U=ih(u.serverSyncTree_,M,ue,C)}else if(m){const ue=(0,H.UI)(l,Ce=>bi(Ce));U=function rh(u,a,l){const m=Ii.fromObject(l);return _d(u,new Sc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,m))}(u.serverSyncTree_,M,ue)}else{const ue=bi(l);U=Vl(u.serverSyncTree_,M,ue)}let J=M;U.length>0&&(J=Vu(u,M)),dl(u.eventQueue_,J,U)}function zm(u,a){hh(u,"connected",a),!1===a&&function ef(u){Ad(u,"onDisconnectEvents");const a=Jh(u),l=Tc();wu(u.onDisconnect_,Si(),(C,M)=>{const U=qh(C,M,u.serverSyncTree_,a);zi(l,C,U)});let m=[];wu(l,Si(),(C,M)=>{m=m.concat(Vl(u.serverSyncTree_,C,M));const U=zu(u,C);Vu(u,U)}),u.onDisconnect_=Tc(),dl(u.eventQueue_,Si(),m)}(u)}function hh(u,a,l){const m=new Br("/.info/"+a),C=bi(l);u.infoData_.updateSnapshot(m,C);const M=Vl(u.infoSyncTree_,m,C);dl(u.eventQueue_,m,M)}function Wf(u){return u.nextWriteId_++}function fh(u,a,l,m,C){Ad(u,"set",{path:a.toString(),value:l,priority:m});const M=Jh(u),U=bi(l,m),J=Lu(u.serverSyncTree_,a),ue=kc(U,J,M),Ce=Wf(u),Rt=Pc(u.serverSyncTree_,a,ue,Ce,!0);ul(u.eventQueue_,Rt),u.server_.put(a.toString(),U.val(!0),(Qt,vn)=>{const Ln="ok"===Qt;Ln||Hr("set at "+a+" failed: "+Qt);const yr=Ea(u.serverSyncTree_,Ce,!Ln);dl(u.eventQueue_,a,yr),Nc(0,C,Qt,vn)});const Gt=zu(u,a);Vu(u,Gt),dl(u.eventQueue_,Gt,[])}function Gm(u,a,l){u.server_.onDisconnectCancel(a.toString(),(m,C)=>{"ok"===m&&Dl(u.onDisconnect_,a),Nc(0,l,m,C)})}function qf(u,a,l,m){const C=bi(l);u.server_.onDisconnectPut(a.toString(),C.val(!0),(M,U)=>{"ok"===M&&zi(u.onDisconnect_,a,C),Nc(0,m,M,U)})}function Sd(u,a,l){let m;m=".info"===Or(a._path)?Fu(u.infoSyncTree_,a,l):Fu(u.serverSyncTree_,a,l),Fg(u.eventQueue_,a._path,m)}function tf(u){u.persistentConnection_&&u.persistentConnection_.interrupt($g)}function Ad(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),qi(l,...a)}function Nc(u,a,l,m){a&&wr(()=>{if("ok"===l)a(null);else{const C=(l||"error").toUpperCase();let M=C;m&&(M+=": "+m);const U=new Error(M);U.code=C,a(U)}})}function Yf(u,a,l){return Lu(u.serverSyncTree_,a,l)||In.EMPTY_NODE}function xd(u,a=u.transactionQueueTree_){if(a||rf(u,a),Bu(a)){const l=Wp(u,a);(0,H.hu)(l.length>0,"Sending zero length transaction queue"),l.every(C=>0===C.status)&&function Yr(u,a,l){const m=l.map(Ce=>Ce.currentWriteId),C=Yf(u,a,m);let M=C;const U=C.hash();for(let Ce=0;Ce<l.length;Ce++){const Rt=l[Ce];(0,H.hu)(0===Rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Rt.status=1,Rt.retryCount++;const Gt=se(a,Rt.path);M=M.updateChild(Gt,Rt.currentOutputSnapshotRaw)}const J=M.val(!0),ue=a;u.server_.put(ue.toString(),J,Ce=>{Ad(u,"transaction put response",{path:ue.toString(),status:Ce});let Rt=[];if("ok"===Ce){const Gt=[];for(let Qt=0;Qt<l.length;Qt++)l[Qt].status=2,Rt=Rt.concat(Ea(u.serverSyncTree_,l[Qt].currentWriteId)),l[Qt].onComplete&&Gt.push(()=>l[Qt].onComplete(null,!0,l[Qt].currentOutputSnapshotResolved)),l[Qt].unwatcher();rf(u,Bf(u.transactionQueueTree_,a)),xd(u,u.transactionQueueTree_),dl(u.eventQueue_,a,Rt);for(let Qt=0;Qt<Gt.length;Qt++)wr(Gt[Qt])}else{if("datastale"===Ce)for(let Gt=0;Gt<l.length;Gt++)l[Gt].status=3===l[Gt].status?4:0;else{Hr("transaction at "+ue.toString()+" failed: "+Ce);for(let Gt=0;Gt<l.length;Gt++)l[Gt].status=4,l[Gt].abortReason=Ce}Vu(u,a)}},U)}(u,Yh(a),l)}else Id(a)&&lc(a,l=>{xd(u,l)})}function Vu(u,a){const l=ju(u,a),m=Yh(l);return function lu(u,a,l){if(0===a.length)return;const m=[];let C=[];const U=a.filter(J=>0===J.status).map(J=>J.currentWriteId);for(let J=0;J<a.length;J++){const ue=a[J],Ce=se(l,ue.path);let Gt,Rt=!1;if((0,H.hu)(null!==Ce,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ue.status)Rt=!0,Gt=ue.abortReason,C=C.concat(Ea(u.serverSyncTree_,ue.currentWriteId,!0));else if(0===ue.status)if(ue.retryCount>=Qh)Rt=!0,Gt="maxretry",C=C.concat(Ea(u.serverSyncTree_,ue.currentWriteId,!0));else{const Qt=Yf(u,ue.path,U);ue.currentInputSnapshot=Qt;const vn=a[J].update(Qt.val());if(void 0!==vn){Cd("transaction failed: Data returned ",vn,ue.path);let Ln=bi(vn);"object"==typeof vn&&null!=vn&&(0,H.r3)(vn,".priority")||(Ln=Ln.updatePriority(Qt.getPriority()));const Jr=ue.currentWriteId,zs=Jh(u),Qi=kc(Ln,Qt,zs);ue.currentOutputSnapshotRaw=Ln,ue.currentOutputSnapshotResolved=Qi,ue.currentWriteId=Wf(u),U.splice(U.indexOf(Jr),1),C=C.concat(Pc(u.serverSyncTree_,ue.path,Qi,ue.currentWriteId,ue.applyLocally)),C=C.concat(Ea(u.serverSyncTree_,Jr,!0))}else Rt=!0,Gt="nodata",C=C.concat(Ea(u.serverSyncTree_,ue.currentWriteId,!0))}dl(u.eventQueue_,l,C),C=[],Rt&&(a[J].status=2,setTimeout(a[J].unwatcher,Math.floor(0)),a[J].onComplete&&m.push("nodata"===Gt?()=>a[J].onComplete(null,!1,a[J].currentInputSnapshot):()=>a[J].onComplete(new Error(Gt),!1,null)))}rf(u,u.transactionQueueTree_);for(let J=0;J<m.length;J++)wr(m[J]);xd(u,u.transactionQueueTree_)}(u,Wp(u,l),m),m}function ju(u,a){let l,m=u.transactionQueueTree_;for(l=Or(a);null!==l&&void 0===Bu(m);)m=Bf(m,l),l=Or(a=Hi(a));return m}function Wp(u,a){const l=[];return Hu(u,a,l),l.sort((m,C)=>m.order-C.order),l}function Hu(u,a,l){const m=Bu(a);if(m)for(let C=0;C<m.length;C++)l.push(m[C]);lc(a,C=>{Hu(u,C,l)})}function rf(u,a){const l=Bu(a);if(l){let m=0;for(let C=0;C<l.length;C++)2!==l[C].status&&(l[m]=l[C],m++);l.length=m,Uf(a,l.length>0?l:void 0)}lc(a,m=>{rf(u,m)})}function zu(u,a){const l=Yh(ju(u,a)),m=Bf(u.transactionQueueTree_,a);return function Vf(u,a,l){let m=l?u:u.parent;for(;null!==m;){if(a(m))return!0;m=m.parent}}(m,C=>{sf(u,C)}),sf(u,m),wd(m,C=>{sf(u,C)}),l}function sf(u,a){const l=Bu(a);if(l){const m=[];let C=[],M=-1;for(let U=0;U<l.length;U++)3===l[U].status||(1===l[U].status?((0,H.hu)(M===U-1,"All SENT items should be at beginning of queue."),M=U,l[U].status=3,l[U].abortReason="set"):((0,H.hu)(0===l[U].status,"Unexpected transaction status in abort"),l[U].unwatcher(),C=C.concat(Ea(u.serverSyncTree_,l[U].currentWriteId,!0)),l[U].onComplete&&m.push(l[U].onComplete.bind(null,new Error("set"),!1,null))));-1===M?Uf(a,void 0):l.length=M+1,dl(u.eventQueue_,Yh(a),C);for(let U=0;U<m.length;U++)wr(m[U])}}const jg=function(u,a){const l=Kp(u),m=l.namespace;return"firebase.com"===l.domain&&Ri(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!m||"undefined"===m)&&"localhost"!==l.domain&&Ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new il(l.host,l.secure,m,"ws"===l.scheme||"wss"===l.scheme,a,"",m!==l.subdomain),path:new Br(l.pathString)}},Kp=function(u){let a="",l="",m="",C="",M="",U=!0,J="https",ue=443;if("string"==typeof u){let Ce=u.indexOf("//");Ce>=0&&(J=u.substring(0,Ce-1),u=u.substring(Ce+2));let Rt=u.indexOf("/");-1===Rt&&(Rt=u.length);let Gt=u.indexOf("?");-1===Gt&&(Gt=u.length),a=u.substring(0,Math.min(Rt,Gt)),Rt<Gt&&(C=function Gu(u){let a="";const l=u.split("/");for(let m=0;m<l.length;m++)if(l[m].length>0){let C=l[m];try{C=decodeURIComponent(C.replace(/\+/g," "))}catch(M){}a+="/"+C}return a}(u.substring(Rt,Gt)));const Qt=function Vg(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const m=l.split("=");2===m.length?a[decodeURIComponent(m[0])]=decodeURIComponent(m[1]):Hr(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,Gt)));Ce=a.indexOf(":"),Ce>=0?(U="https"===J||"wss"===J,ue=parseInt(a.substring(Ce+1),10)):Ce=a.length;const vn=a.slice(0,Ce);if("localhost"===vn.toLowerCase())l="localhost";else if(vn.split(".").length<=2)l=vn;else{const Ln=a.indexOf(".");m=a.substring(0,Ln).toLowerCase(),l=a.substring(Ln+1),M=m}"ns"in Qt&&(M=Qt.ns)}return{host:a,port:ue,domain:l,subdomain:m,secure:U,scheme:J,pathString:C,namespace:M}},qp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wu=function(){let u=0;const a=[];return function(l){const m=l===u;let C;u=l;const M=new Array(8);for(C=7;C>=0;C--)M[C]=qp.charAt(l%64),l=Math.floor(l/64);(0,H.hu)(0===l,"Cannot push at time == 0");let U=M.join("");if(m){for(C=11;C>=0&&63===a[C];C--)a[C]=0;a[C]++}else for(C=0;C<12;C++)a[C]=Math.floor(64*Math.random());for(C=0;C<12;C++)U+=qp.charAt(a[C]);return(0,H.hu)(20===U.length,"nextPushId: Length should be 20."),U}}();class Hg{constructor(a,l,m,C){this.eventType=a,this.eventRegistration=l,this.snapshot=m,this.prevName=C}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Wl)(this.snapshot.exportVal())}}class Rd{constructor(a,l,m){this.eventRegistration=a,this.error=l,this.path=m}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ph{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class zg{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new H.BH;return Gm(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Xa("OnDisconnect.remove",this._path);const a=new H.BH;return qf(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Xa("OnDisconnect.set",this._path),cl("OnDisconnect.set",a,this._path,!1);const l=new H.BH;return qf(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){Xa("OnDisconnect.setWithPriority",this._path),cl("OnDisconnect.setWithPriority",a,this._path,!1),zf("OnDisconnect.setWithPriority",l,!1);const m=new H.BH;return function hl(u,a,l,m,C){const M=bi(l,m);u.server_.onDisconnectPut(a.toString(),M.val(!0),(U,J)=>{"ok"===U&&zi(u.onDisconnect_,a,M),Nc(0,C,U,J)})}(this._repo,this._path,a,l,m.wrapCallback(()=>{})),m.promise}update(a){Xa("OnDisconnect.update",this._path),Hf("OnDisconnect.update",a,this._path,!1);const l=new H.BH;return function Wm(u,a,l,m){if((0,H.xb)(l))return qi("onDisconnect().update() called with empty data.  Don't do anything."),void Nc(0,m,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(C,M)=>{"ok"===C&&$(l,(U,J)=>{const ue=bi(J);zi(u.onDisconnect_,j(a,U),ue)}),Nc(0,m,C,M)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class fl{constructor(a,l,m,C){this._repo=a,this._path=l,this._queryParams=m,this._orderByCalled=C}get key(){return Q(this._path)?null:A(this._path)}get ref(){return new Ia(this._repo,this._path)}get _queryIdentifier(){const a=od(this._queryParams),l=F(a);return"{}"===l?"default":l}get _queryObject(){return od(this._queryParams)}isEqual(a){if(!((a=(0,H.m9)(a))instanceof fl))return!1;const l=this._repo===a._repo,m=zt(this._path,a._path);return l&&m&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function R(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function Yp(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function Ku(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Ma){const m="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",C="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==ys)throw new Error(m);if("string"!=typeof a)throw new Error(C)}if(u.hasEnd()){if(u.getIndexEndName()!==Fo)throw new Error(m);if("string"!=typeof l)throw new Error(C)}}else if(u.getIndex()===ve){if(null!=a&&!Za(a)||null!=l&&!Za(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(u.getIndex()instanceof yo||u.getIndex()===va,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Fc(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ia extends fl{constructor(a,l){super(a,l,new xs,!1)}get parent(){const a=O(this._path);return null===a?null:new Ia(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Md{constructor(a,l,m){this._node=a,this.ref=l,this._index=m}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new Br(a),m=qu(this.ref,a);return new Md(this._node.getChild(l),m,ve)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(m,C)=>a(new Md(C,qu(this.ref,m),ve)))}hasChild(a){const l=new Br(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zp(u,a){return(u=(0,H.m9)(u))._checkNotDeleted("ref"),void 0!==a?qu(u._root,a):u._root}function Pd(u,a){(u=(0,H.m9)(u))._checkNotDeleted("refFromURL");const l=jg(a,u._repo.repoInfo_.nodeAdmin);Xh("refFromURL",l);const m=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&m.host!==u._repo.repoInfo_.host&&Ri("refFromURL: Host name does not match the current database: (found "+m.host+" but expected "+u._repo.repoInfo_.host+")"),Zp(u,l.path.toString())}function qu(u,a){return null===Or((u=(0,H.m9)(u))._path)?Gf("child","path",a,!1):dh("child","path",a,!1),new Ia(u._repo,j(u._path,a))}function _o(u,a){u=(0,H.m9)(u),Xa("set",u._path),cl("set",a,u._path,!1);const l=new H.BH;return fh(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function Zm(u,a){Hf("update",a,u._path,!1);const l=new H.BH;return function Ug(u,a,l,m){Ad(u,"update",{path:a.toString(),value:l});let C=!0;const M=Jh(u),U={};if($(l,(J,ue)=>{C=!1,U[J]=qh(j(a,J),bi(ue),u.serverSyncTree_,M)}),C)qi("update() called with empty data.  Don't do anything."),Nc(0,m,"ok",void 0);else{const J=Wf(u),ue=function ou(u,a,l,m){!function ac(u,a,l,m){(0,H.hu)(m>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:m,visible:!0}),u.visibleWrites=Tl(u.visibleWrites,a,l),u.lastWriteId=m}(u.pendingWriteTree_,a,l,m);const C=Ii.fromObject(l);return _d(u,new Sc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,C))}(u.serverSyncTree_,a,U,J);ul(u.eventQueue_,ue),u.server_.merge(a.toString(),l,(Ce,Rt)=>{const Gt="ok"===Ce;Gt||Hr("update at "+a+" failed: "+Ce);const Qt=Ea(u.serverSyncTree_,J,!Gt),vn=Qt.length>0?Vu(u,a):a;dl(u.eventQueue_,vn,Qt),Nc(0,m,Ce,Rt)}),$(l,Ce=>{const Rt=zu(u,j(a,Ce));Vu(u,Rt)}),dl(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function Xm(u){u=(0,H.m9)(u);const a=new ph(()=>{}),l=new Od(a);return function Kf(u,a,l){const m=function $p(u,a){const l=a._path;let m=null;u.syncPointTree_.foreachOnPath(l,(Ce,Rt)=>{const Gt=se(Ce,l);m=m||Zt(Rt,Gt)});let C=u.syncPointTree_.get(l);C?m=m||Zt(C,Si()):(C=new th,u.syncPointTree_=u.syncPointTree_.set(l,C));const M=null!=m,U=M?new Ac(m,!0,!1):null;return function Ul(u){return xu(u.viewCache_)}(W(C,a,oc(u.pendingWriteTree_,a._path),M?U.getNode():In.EMPTY_NODE,M))}(u.serverSyncTree_,a);return null!=m?Promise.resolve(m):u.server_.get(a).then(C=>{const M=bi(C).withIndex(a._queryParams.getIndex());let U;if(Ng(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())U=Vl(u.serverSyncTree_,a._path,M);else{const J=zh(u.serverSyncTree_,a);U=ih(u.serverSyncTree_,a._path,M,J)}return dl(u.eventQueue_,a._path,U),Fu(u.serverSyncTree_,a,l,null,!0),M},C=>(Ad(u,"get for query "+(0,H.Wl)(a)+" failed: "+C),Promise.reject(new Error(C))))}(u._repo,u,l).then(m=>new Md(m,new Ia(u._repo,u._path),u._queryParams.getIndex()))}class Od{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const m=l._queryParams.getIndex();return new Hg("value",this,new Md(a.snapshotNode,new Ia(l._repo,l._path),m))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Rd(this,a,l):null}matches(a){return a instanceof Od&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class af{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Rd(this,a,l):null}createEvent(a,l){(0,H.hu)(null!=a.childName,"Child events should have a childName.");const m=qu(new Ia(l._repo,l._path),a.childName),C=l._queryParams.getIndex();return new Hg(a.type,this,new Md(a.snapshotNode,m,C),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof af&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Yu(u,a,l,m,C){let M;if("object"==typeof m&&(M=void 0,C=m),"function"==typeof m&&(M=m),C&&C.onlyOnce){const ue=l,Ce=(Rt,Gt)=>{Sd(u._repo,u,J),ue(Rt,Gt)};Ce.userCallback=l.userCallback,Ce.context=l.context,l=Ce}const U=new ph(l,M||void 0),J="value"===a?new Od(U):new af(a,U);return function Gp(u,a,l){let m;m=".info"===Or(a._path)?Ng(u.infoSyncTree_,a,l):Ng(u.serverSyncTree_,a,l),Fg(u.eventQueue_,a._path,m)}(u._repo,u,J),()=>Sd(u._repo,u,J)}function kd(u,a,l,m){return Yu(u,"value",a,l,m)}function Qp(u,a,l,m){return Yu(u,"child_added",a,l,m)}function lf(u,a,l,m){return Yu(u,"child_changed",a,l,m)}function Jp(u,a,l,m){return Yu(u,"child_moved",a,l,m)}function gh(u,a,l,m){return Yu(u,"child_removed",a,l,m)}function mh(u,a,l){let m=null;const C=l?new ph(l):null;"value"===a?m=new Od(C):a&&(m=new af(a,C)),Sd(u._repo,u,m)}class Rl{}class cu extends Rl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){cl("endAt",this._value,a._path,!0);const l=bc(a._queryParams,this._value,this._key);if(Fc(l),Ku(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fl(a._repo,a._path,l,a._orderByCalled)}}class Gg extends Rl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){cl("endBefore",this._value,a._path,!1);const l=function Fh(u,a,l){let m;return m=bc(u,a,u.index_===Ma||l?l:ys),m.endBeforeSet_=!0,m}(a._queryParams,this._value,this._key);if(Fc(l),Ku(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fl(a._repo,a._path,l,a._orderByCalled)}}class eg extends Rl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){cl("startAt",this._value,a._path,!0);const l=ro(a._queryParams,this._value,this._key);if(Fc(l),Ku(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fl(a._repo,a._path,l,a._orderByCalled)}}class yh extends Rl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){cl("startAfter",this._value,a._path,!1);const l=function Cc(u,a,l){let m;return m=ro(u,a,u.index_===Ma||l?l:Fo),m.startAfterSet_=!0,m}(a._queryParams,this._value,this._key);if(Fc(l),Ku(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fl(a._repo,a._path,l,a._orderByCalled)}}class Qf extends Rl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fl(a._repo,a._path,function Iu(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class Jf extends Rl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fl(a._repo,a._path,function Kd(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class Nd extends Rl{constructor(a){super(),this._path=a}_apply(a){Yp(a,"orderByChild");const l=new Br(this._path);if(Q(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const m=new yo(l),C=qd(a._queryParams,m);return Ku(C),new fl(a._repo,a._path,C,!0)}}class uf extends Rl{_apply(a){Yp(a,"orderByKey");const l=qd(a._queryParams,Ma);return Ku(l),new fl(a._repo,a._path,l,!0)}}class tg extends Rl{_apply(a){Yp(a,"orderByPriority");const l=qd(a._queryParams,ve);return Ku(l),new fl(a._repo,a._path,l,!0)}}class qg extends Rl{_apply(a){Yp(a,"orderByValue");const l=qd(a._queryParams,va);return Ku(l),new fl(a._repo,a._path,l,!0)}}class np extends Rl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(cl("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cu(this._value,this._key)._apply(new eg(this._value,this._key)._apply(a))}}function pl(u,...a){let l=(0,H.m9)(u);for(const m of a)l=m._apply(l);return l}(function D(u){(0,H.hu)(!Nu,"__referenceConstructor has already been defined"),Nu=u})(Ia),function yd(u){(0,H.hu)(!Ao,"__referenceConstructor has already been defined"),Ao=u}(Ia);const ng="FIREBASE_DATABASE_EMULATOR_HOST",rp={};let ip=!1;function Fd(u,a,l,m,C){let M=m||u.options.databaseURL;void 0===M&&(u.options.projectId||Ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qi("Using default host for project ",u.options.projectId),M=`${u.options.projectId}-default-rtdb.firebaseio.com`);let ue,Ce,U=jg(M,C),J=U.repoInfo;typeof process<"u"&&process.env&&(Ce=process.env[ng]),Ce?(ue=!0,M=`http://${Ce}?ns=${J.namespace}`,U=jg(M,C),J=U.repoInfo):ue=!U.repoInfo.secure;const Rt=C&&ue?new gi(gi.OWNER):new ga(u.name,u.options,a);Xh("Invalid Firebase Database URL",U),Q(U.path)||Ri("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=function Yg(u,a,l,m){let C=rp[a.name];C||(C={},rp[a.name]=C);let M=C[u.toURLString()];return M&&Ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new Td(u,ip,l,m),C[u.toURLString()]=M,M}(J,u,Rt,new Vi(u.name,l));return new op(Gt,u)}class op{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xl(u,a,l){if(u.stats_=fi(u.repoInfo_),u.forceRestClient_||Zi())u.server_=new Dc(u.repoInfo_,(m,C,M,U)=>{zp(u,m,C,M,U)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>zm(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Wl)(l)}catch(m){throw new Error("Invalid authOverride provided: "+m)}}u.persistentConnection_=new Wa(u.repoInfo_,a,(m,C,M,U)=>{zp(u,m,C,M,U)},m=>{zm(u,m)},m=>{!function Bg(u,a){$(a,(l,m)=>{hh(u,l,m)})}(u,m)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(m=>{u.server_.refreshAuthToken(m)}),u.appCheckProvider_.addTokenChangeListener(m=>{u.server_.refreshAppCheckToken(m.token)}),u.statsReporter_=function _l(u,a){const l=u.toString();return ss[l]||(ss[l]=a()),ss[l]}(u.repoInfo_,()=>new Mi(u.stats_,u.server_)),u.infoData_=new jo,u.infoSyncTree_=new Es({startListening:(m,C,M,U)=>{let J=[];const ue=u.infoData_.getNode(m._path);return ue.isEmpty()||(J=Vl(u.infoSyncTree_,m._path,ue),setTimeout(()=>{U("ok")},0)),J},stopListening:()=>{}}),hh(u,"connected",!1),u.serverSyncTree_=new Es({startListening:(m,C,M,U)=>(u.server_.listen(m,M,C,(J,ue)=>{const Ce=U(J,ue);dl(u.eventQueue_,m._path,Ce)}),[]),stopListening:(m,C)=>{u.server_.unlisten(m,C)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ia(this._repo,Si())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function sp(u,a){const l=rp[a];(!l||l[u.key]!==u)&&Ri(`Database ${a}(${u.repoInfo_}) has already been deleted.`),tf(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&Ri("Cannot call "+a+" on a deleted database.")}}function rg(){vi.IS_TRANSPORT_INITIALIZED&&Hr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ey(){rg(),pr.forceDisallow()}function Zg(){rg(),go.forceDisallow(),pr.forceAllow()}function Na(u,a){Ta(u,a)}const Xg={".sv":"timestamp"};class zl{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wa.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},Wa.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function ny(u){ml(ke.SDK_VERSION),(0,ke._registerComponent)(new De.wA("database",(a,{instanceIdentifier:l})=>Fd(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(el,"0.14.4",u),(0,ke.registerVersion)(el,"0.14.4","esm2017")}();const sg=new Vs.Yd("@firebase/database-compat"),Jg=function(u){sg.warn("FIREBASE WARNING: "+u)};class ag{constructor(a){this._delegate=a}cancel(a){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),m=>a(m)),l}remove(a){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),m=>a(m)),l}set(a,l){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",l,!0);const m=this._delegate.set(a);return l&&m.then(()=>l(null),C=>l(C)),m}setWithPriority(a,l,m){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",m,!0);const C=this._delegate.setWithPriority(a,l);return m&&C.then(()=>m(null),M=>m(M)),C}update(a,l){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const C={};for(let M=0;M<a.length;++M)C[""+M]=a[M];a=C,Jg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",l,!0);const m=this._delegate.update(a);return l&&m.then(()=>l(null),C=>l(C)),m}}class uu{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gl{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),dh("DataSnapshot.child","path",a,!1),new Gl(this._database,this._delegate.child(a))}hasChild(a){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),dh("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new Gl(this._database,l)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Hs{constructor(a,l){this.database=a,this._delegate=l}on(a,l,m,C){var M;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",l,!1);const U=Hs.getCancelAndContextArgs_("Query.on",m,C),J=(Ce,Rt)=>{l.call(U.context,new Gl(this.database,Ce),Rt)};J.userCallback=l,J.context=U.context;const ue=null===(M=U.cancel)||void 0===M?void 0:M.bind(U.context);switch(a){case"value":return kd(this._delegate,J,ue),l;case"child_added":return Qp(this._delegate,J,ue),l;case"child_removed":return gh(this._delegate,J,ue),l;case"child_changed":return lf(this._delegate,J,ue),l;case"child_moved":return Jp(this._delegate,J,ue),l;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,m){if((0,H.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,H.Wj)("Query.off","callback",l,!0),(0,H.lb)("Query.off","context",m,!0),l){const C=()=>{};C.userCallback=l,C.context=m,mh(this._delegate,a,C)}else mh(this._delegate,a)}get(){return Xm(this._delegate).then(a=>new Gl(this.database,a))}once(a,l,m,C){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",l,!0);const M=Hs.getCancelAndContextArgs_("Query.once",m,C),U=new H.BH,J=(Ce,Rt)=>{const Gt=new Gl(this.database,Ce);l&&l.call(M.context,Gt,Rt),U.resolve(Gt)};J.userCallback=l,J.context=M.context;const ue=Ce=>{M.cancel&&M.cancel.call(M.context,Ce),U.reject(Ce)};switch(a){case"value":kd(this._delegate,J,ue,{onlyOnce:!0});break;case"child_added":Qp(this._delegate,J,ue,{onlyOnce:!0});break;case"child_removed":gh(this._delegate,J,ue,{onlyOnce:!0});break;case"child_changed":lf(this._delegate,J,ue,{onlyOnce:!0});break;case"child_moved":Jp(this._delegate,J,ue,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return U.promise}limitToFirst(a){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new Hs(this.database,pl(this._delegate,function cf(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Qf(u)}(a)))}limitToLast(a){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new Hs(this.database,pl(this._delegate,function ep(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Jf(u)}(a)))}orderByChild(a){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new Hs(this.database,pl(this._delegate,function Zu(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return dh("orderByChild","path",u,!1),new Nd(u)}(a)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new Hs(this.database,pl(this._delegate,function _h(){return new uf}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new Hs(this.database,pl(this._delegate,function tp(){return new tg}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new Hs(this.database,pl(this._delegate,function Qm(){return new qg}()))}startAt(a=null,l){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new Hs(this.database,pl(this._delegate,function Kg(u=null,a){return bd("startAt","key",a,!0),new eg(u,a)}(a,l)))}startAfter(a=null,l){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new Hs(this.database,pl(this._delegate,function vh(u,a){return bd("startAfter","key",a,!0),new yh(u,a)}(a,l)))}endAt(a=null,l){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new Hs(this.database,pl(this._delegate,function Xf(u,a){return bd("endAt","key",a,!0),new cu(u,a)}(a,l)))}endBefore(a=null,l){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new Hs(this.database,pl(this._delegate,function Wg(u,a){return bd("endBefore","key",a,!0),new Gg(u,a)}(a,l)))}equalTo(a,l){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new Hs(this.database,pl(this._delegate,function Jm(u,a){return bd("equalTo","key",a,!0),new np(u,a)}(a,l)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Hs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,m){const C={cancel:void 0,context:void 0};if(l&&m)C.cancel=l,(0,H.Wj)(a,"cancel",C.cancel,!0),C.context=m,(0,H.lb)(a,"context",C.context,!0);else if(l)if("object"==typeof l&&null!==l)C.context=l;else{if("function"!=typeof l)throw new Error((0,H.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");C.cancel=l}return C}get ref(){return new Fa(this.database,new Ia(this._delegate._repo,this._delegate._path))}}class Fa extends Hs{constructor(a,l){super(a,new fl(l._repo,l._path,new xs,!1)),this.database=a,this._delegate=l}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new Fa(this.database,qu(this._delegate,a))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new Fa(this.database,a):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new Fa(this.database,this._delegate.root)}set(a,l){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",l,!0);const m=_o(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}update(a,l){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const C={};for(let M=0;M<a.length;++M)C[""+M]=a[M];a=C,Jg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xa("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",l,!0);const m=Zm(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}setWithPriority(a,l,m){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",m,!0);const C=function Ym(u,a,l){if(Xa("setWithPriority",u._path),cl("setWithPriority",a,u._path,!1),zf("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const m=new H.BH;return fh(u._repo,u._path,a,l,m.wrapCallback(()=>{})),m.promise}(this._delegate,a,l);return m&&C.then(()=>m(null),M=>m(M)),C}remove(a){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",a,!0);const l=function Xp(u){return Xa("remove",u._path),_o(u,null)}(this._delegate);return a&&l.then(()=>a(null),m=>a(m)),l}transaction(a,l,m){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,H.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,m){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,m);const C=function up(u,a,l){var m;if(u=(0,H.m9)(u),Xa("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const C=null===(m=null==l?void 0:l.applyLocally)||void 0===m||m,M=new H.BH,J=kd(u,()=>{});return function Oa(u,a,l,m,C,M){Ad(u,"transaction on "+a);const U={path:a,update:l,onComplete:m,status:null,order:Da(),applyLocally:M,retryCount:0,unwatcher:C,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},J=Yf(u,a,void 0);U.currentInputSnapshot=J;const ue=U.update(J.val());if(void 0===ue)U.unwatcher(),U.currentOutputSnapshotRaw=null,U.currentOutputSnapshotResolved=null,U.onComplete&&U.onComplete(null,!1,U.currentInputSnapshot);else{Cd("transaction failed: Data returned ",ue,U.path),U.status=0;const Ce=Bf(u.transactionQueueTree_,a),Rt=Bu(Ce)||[];let Gt;Rt.push(U),Uf(Ce,Rt),"object"==typeof ue&&null!==ue&&(0,H.r3)(ue,".priority")?(Gt=(0,H.DV)(ue,".priority"),(0,H.hu)(Za(Gt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Gt=(Lu(u.serverSyncTree_,a)||In.EMPTY_NODE).getPriority().val();const Qt=Jh(u),vn=bi(ue,Gt),Ln=kc(vn,J,Qt);U.currentOutputSnapshotRaw=vn,U.currentOutputSnapshotResolved=Ln,U.currentWriteId=Wf(u);const yr=Pc(u.serverSyncTree_,a,Ln,U.currentWriteId,U.applyLocally);dl(u.eventQueue_,a,yr),xd(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(ue,Ce,Rt)=>{let Gt=null;ue?M.reject(ue):(Gt=new Md(Rt,new Ia(u._repo,u._path),ve),M.resolve(new zl(Ce,Gt)))},J,C),M.promise}(this._delegate,a,{applyLocally:m}).then(M=>new uu(M.committed,new Gl(this.database,M.snapshot)));return l&&C.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),C}setPriority(a,l){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",l,!0);const m=function qm(u,a){u=(0,H.m9)(u),Xa("setPriority",u._path),zf("setPriority",a,!1);const l=new H.BH;return fh(u._repo,j(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}push(a,l){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",l,!0);const m=function Zf(u,a){u=(0,H.m9)(u),Xa("push",u._path),cl("push",a,u._path,!0);const l=uc(u._repo),m=Wu(l),C=qu(u,m),M=qu(u,m);let U;return U=null!=a?_o(M,a).then(()=>M):Promise.resolve(M),C.then=U.then.bind(U),C.catch=U.then.bind(U,void 0),C}(this._delegate,a),C=m.then(U=>new Fa(this.database,U));l&&C.then(()=>l(null),U=>l(U));const M=new Fa(this.database,m);return M.then=C.then.bind(C),M.catch=C.catch.bind(C,void 0),M}onDisconnect(){return Xa("Reference.onDisconnect",this._delegate._path),new ag(new zg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class du{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ey,forceLongPolling:Zg}}useEmulator(a,l,m={}){!function lp(u,a,l,m={}){(u=(0,H.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Ri("Cannot call useEmulator() after instance has already been initialized.");const C=u._repoInternal;let M;if(C.repoInfo_.nodeAdmin)m.mockUserToken&&Ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new gi(gi.OWNER);else if(m.mockUserToken){const U="string"==typeof m.mockUserToken?m.mockUserToken:(0,H.Sg)(m.mockUserToken,u.app.options.projectId);M=new gi(U)}!function ka(u,a,l,m){u.repoInfo_=new il(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),m&&(u.authTokenProvider_=m)}(C,a,l,M)}(this._delegate,a,l,m)}ref(a){if((0,H.Dv)("database.ref",0,1,arguments.length),a instanceof Fa){const l=Pd(this._delegate,a.toString());return new Fa(this,l)}{const l=Zp(this._delegate,a);return new Fa(this,l)}}refFromURL(a){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const m=Pd(this._delegate,a);return new Fa(this,m)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function ty(u){(u=(0,H.m9)(u))._checkNotDeleted("goOffline"),tf(u._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function ig(u){(u=(0,H.m9)(u))._checkNotDeleted("goOnline"),function nf(u){u.persistentConnection_&&u.persistentConnection_.resume($g)}(u._repo)}(this._delegate)}}du.ServerValue={TIMESTAMP:function cp(){return Xg}(),increment:u=>function hf(u){return{".sv":{increment:u}}}(u)};var dp=Object.freeze({__proto__:null,initStandalone:function iy({app:u,url:a,version:l,customAuthImpl:m,namespace:C,nodeAdmin:M=!1}){ml(l);const U=new De.zt("auth-internal",new De.H0("database-standalone"));return U.setComponent(new De.wA("auth-internal",()=>m,"PRIVATE")),{instance:new du(Fd(u,U,void 0,a,M),u),namespace:C}}});const hp=du.ServerValue;function Wl(u){return null==u}function pf(u){return"function"==typeof u.set}function Ld(u,a){return pf(a)?a:u.ref(a)}function Eh(u,a){if(function lg(u){return"string"==typeof u}(u))return a.stringCase();if(pf(u))return a.firebaseCase();if(function cg(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function $d(u,a,l="on",m=Pt.z){return new Oe.y(C=>{let M=null;return M=u[l](a,(U,J)=>{m.schedule(()=>{C.next({snapshot:U,prevKey:J})}),"once"===l&&m.schedule(()=>C.complete())},U=>{m.schedule(()=>C.error(U))}),"on"===l?{unsubscribe(){null!=M&&u.off(a,M)}}:{unsubscribe(){}}}).pipe((0,dt.U)(C=>{const{snapshot:M,prevKey:U}=C;let J=null;return M.exists()&&(J=M.key),{type:a,payload:M,prevKey:U,key:J}}),(0,Xn.B)())}function mf(u,a){const l=u.length;for(let m=0;m<l;m++)if(u[m].payload.key===a)return m;return-1}function Ih(u,a){const{payload:l,prevKey:m,key:C}=a,M=mf(u,C),U=function em(u,a){if(Wl(a))return 0;{const l=mf(u,a);return-1===l?u.length:l+1}}(u,m);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let J=null;a.payload.forEach(ue=>{const Ce={payload:ue,type:"value",prevKey:J,key:ue.key};return J=ue.key,u=[...u,Ce],!1})}return u;case"child_added":if(M>-1){const J=u[M-1];(J&&J.key||null)!==m&&(u=u.filter(ue=>ue.payload.key!==l.key)).splice(U,0,a)}else{if(null==m)return[a,...u];(u=u.slice()).splice(U,0,a)}return u;case"child_removed":return u.filter(J=>J.payload.key!==l.key);case"child_changed":return u.map(J=>J.payload.key===C?a:J);case"child_moved":if(M>-1){const J=u.splice(M,1)[0];return(u=u.slice()).splice(U,0,J),u}return u;default:return u}}function Xu(u){return(Wl(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function tm(u,a,l){return function gf(u,a,l){return $d(u,"value","once",l).pipe((0,ft.w)(m=>{const C=[(0,Ge.of)(m)];return a.forEach(M=>C.push($d(u,M,"on",l))),(0,En.T)(...C).pipe((0,Sr.R)(Ih,[]))}),(0,di.x)())}(u,a=Xu(a),l)}function sy(u,a,l){const m=(a=Xu(a)).map(C=>$d(u,C,"on",l));return(0,En.T)(...m)}function fp(u,a){return function(m,C){return Eh(m,{stringCase:()=>u.child(m)[a](C),firebaseCase:()=>m[a](C),snapshotCase:()=>m.ref[a](C)})}}function ay(u){return function(l){return l?Eh(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function im(u,a){return function(){return $d(u,"value","on",a)}}!function hu(u){u.INTERNAL.registerComponent(new De.wA("database-compat",(a,{instanceIdentifier:l})=>{const m=a.getProvider("app-compat").getImmediate(),C=a.getProvider("database").getImmediate({identifier:l});return new du(C,m)},"PUBLIC").setServiceProps({Reference:Fa,Query:Hs,Database:du,DataSnapshot:Gl,enableLogging:Na,INTERNAL:dp,ServerValue:hp}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Je.Z);const dg=new q.OlP("angularfire2.realtimeDatabaseURL"),hg=new q.OlP("angularfire2.database.use-emulator");let gp=(()=>{class u{constructor(l,m,C,M,U,J,ue,Ce,Rt,Gt,Qt,vn,Ln,yr,Jr){this.schedulers=J;const zs=ue,Qi=(0,re.on)(l,U,m);Ce&&(0,de.nw)(Qi,U,Rt,Qt,vn,Ln,Gt,yr),this.database=(0,re.cc)(`${Qi.name}.database.${C}`,"AngularFireDatabase",Qi.name,()=>{const Ts=U.runOutsideAngular(()=>Qi.database(C||void 0));return zs&&Ts.useEmulator(...zs),Ts},[zs])}list(l,m){const C=this.schedulers.ngZone.runOutsideAngular(()=>Ld(this.database,l));let M=C;return m&&(M=m(C)),function ug(u,a){const l=a.schedulers.outsideAngular,m=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:fp(m,"update"),set:fp(m,"set"),push:C=>m.push(C),remove:ay(m),snapshotChanges:C=>tm(u,C,l).pipe(qe.iC),stateChanges:C=>sy(u,C,l).pipe(qe.iC),auditTrail:C=>function nm(u,a,l){return function oy(u,a,l){return function rm(u,a){return $d(u,"value","on",a).pipe((0,dt.U)(l=>{let m;return l.payload.forEach(C=>(m=C.key,!1)),{data:l,lastKeyToLoad:m}}))}(u,l).pipe(function Fi(...u){const a=(0,wi.jO)(u);return(0,be.e)((l,m)=>{const C=u.length,M=new Array(C);let U=u.map(()=>!1),J=!1;for(let ue=0;ue<C;ue++)(0,$r.Xf)(u[ue]).subscribe((0,Ie.x)(m,Ce=>{M[ue]=Ce,!J&&!U[ue]&&(U[ue]=!0,(J=U.every(ms.y))&&(U=null))},Cs.Z));l.subscribe((0,Ie.x)(m,ue=>{if(J){const Ce=[ue,...M];m.next(a?a(...Ce):Ce)}}))})}(a),(0,dt.U)(([C,M])=>{const U=C.lastKeyToLoad,J=M.map(ue=>ue.key);return{actions:M,lastKeyToLoad:U,loadedKeys:J}}),function Xo(u){return(0,be.e)((a,l)=>{let m=!1,C=0;a.subscribe((0,Ie.x)(l,M=>(m||(m=!u(M,C++)))&&l.next(M)))})}(C=>-1===C.loadedKeys.indexOf(C.lastKeyToLoad)),(0,dt.U)(C=>C.actions))}(u,sy(u,a).pipe((0,Sr.R)((C,M)=>[...C,M],[])),l)}(u,C,l).pipe(qe.iC),valueChanges:(C,M)=>tm(u,C,l).pipe((0,dt.U)(J=>J.map(ue=>M&&M.idField?Object.assign(Object.assign({},ue.payload.val()),{[M.idField]:ue.key}):ue.payload.val())),qe.iC)}}(M,this)}object(l){return function pp(u,a){return{query:u,snapshotChanges:()=>im(u,a.schedulers.outsideAngular)().pipe(qe.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>im(u,a.schedulers.outsideAngular)().pipe(qe.iC,(0,dt.U)(m=>m.payload.exists()?m.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ld(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(q.LFG(re.Dh),q.LFG(re.xv,8),q.LFG(dg,8),q.LFG(q.Lbi),q.LFG(q.R0b),q.LFG(qe.HU),q.LFG(hg,8),q.LFG(de.zQ,8),q.LFG(de.Qv,8),q.LFG(de.L6,8),q.LFG(de._Q,8),q.LFG(de.rT,8),q.LFG(de.lh,8),q.LFG(de.f7,8),q.LFG(ho.nm,8))},u.\u0275prov=q.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),fg=(()=>{class u{constructor(){Xs.Z.registerVersion("angularfire",qe.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=q.oAB({type:u}),u.\u0275inj=q.cJS({providers:[gp]}),u})();const mp_firebase={apiKey:"AIzaSyAlipk4_yazgkfMvQO28JtMO-ESxlsV_bs",authDomain:"proyecto-ebfce.firebaseapp.com",projectId:"proyecto-ebfce",storageBucket:"proyecto-ebfce.appspot.com",messagingSenderId:"40983827854",appId:"1:40983827854:web:9cb957bbcb897a860bc0df",measurementId:"G-W5L3D26HR2"};var pg=L(529),wh=L(5705);let Qu=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=q.oAB({type:u,bootstrap:[ge]}),u.\u0275inj=q.cJS({providers:[{provide:G.wN,useClass:Te.r4}],imports:[c.b2,Te.Pc.forRoot(),Ue,pe.u5,pe.UX,re.hO.initializeApp(mp_firebase),an.yb,de.ww,ze,fg,pg.JF,wh.Fc]}),u})();(0,q.G48)(),c.q6().bootstrapModule(Qu).catch(u=>console.log(u))},1135:(_n,It,L)=>{"use strict";L.d(It,{X:()=>q});var c=L(958);class q extends c.x{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const Pe=super._subscribe(Te);return!Pe.closed&&Te.next(this._value),Pe}getValue(){const{hasError:Te,thrownError:Pe,_value:Fe}=this;if(Te)throw Pe;return this._throwIfClosed(),Fe}next(Te){super.next(this._value=Te)}}},9751:(_n,It,L)=>{"use strict";L.d(It,{y:()=>Se});var c=L(930),q=L(727),G=L(8822),Te=L(9635),Pe=L(2416),Fe=L(576),ge=L(2806);let Se=(()=>{class de{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ut=new de;return ut.source=this,ut.operator=Ge,ut}subscribe(Ge,ut,Pt){const be=function re(de){return de&&de instanceof c.Lv||function pe(de){return de&&(0,Fe.m)(de.next)&&(0,Fe.m)(de.error)&&(0,Fe.m)(de.complete)}(de)&&(0,q.Nn)(de)}(Ge)?Ge:new c.Hp(Ge,ut,Pt);return(0,ge.x)(()=>{const{operator:Ie,source:he}=this;be.add(Ie?Ie.call(be,he):he?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ut){Ge.error(ut)}}forEach(Ge,ut){return new(ut=Ue(ut))((Pt,be)=>{const Ie=new c.Hp({next:he=>{try{Ge(he)}catch(dt){be(dt),Ie.unsubscribe()}},error:be,complete:Pt});this.subscribe(Ie)})}_subscribe(Ge){var ut;return null===(ut=this.source)||void 0===ut?void 0:ut.subscribe(Ge)}[G.L](){return this}pipe(...Ge){return(0,Te.U)(Ge)(this)}toPromise(Ge){return new(Ge=Ue(Ge))((ut,Pt)=>{let be;this.subscribe(Ie=>be=Ie,Ie=>Pt(Ie),()=>ut(be))})}}return de.create=Oe=>new de(Oe),de})();function Ue(de){var Oe;return null!==(Oe=null!=de?de:Pe.v.Promise)&&void 0!==Oe?Oe:Promise}},958:(_n,It,L)=>{"use strict";L.d(It,{x:()=>ge});var c=L(9751),q=L(727);const Te=(0,L(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=L(8737),Fe=L(2806);let ge=(()=>{class Ue extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const de=new Se(this,this);return de.operator=re,de}_throwIfClosed(){if(this.closed)throw new Te}next(re){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(re)}})}error(re){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:de}=this;for(;de.length;)de.shift().error(re)}})}complete(){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:de,isStopped:Oe,observers:Ge}=this;return de||Oe?q.Lc:(this.currentObservers=null,Ge.push(re),new q.w0(()=>{this.currentObservers=null,(0,Pe.P)(Ge,re)}))}_checkFinalizedStatuses(re){const{hasError:de,thrownError:Oe,isStopped:Ge}=this;de?re.error(Oe):Ge&&re.complete()}asObservable(){const re=new c.y;return re.source=this,re}}return Ue.create=(pe,re)=>new Se(pe,re),Ue})();class Se extends ge{constructor(pe,re){super(),this.destination=pe,this.source=re}next(pe){var re,de;null===(de=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===de||de.call(re,pe)}error(pe){var re,de;null===(de=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===de||de.call(re,pe)}complete(){var pe,re;null===(re=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===re||re.call(pe)}_subscribe(pe){var re,de;return null!==(de=null===(re=this.source)||void 0===re?void 0:re.subscribe(pe))&&void 0!==de?de:q.Lc}}},930:(_n,It,L)=>{"use strict";L.d(It,{Hp:()=>Pt,Lv:()=>de});var c=L(576),q=L(727),G=L(2416),Te=L(7849),Pe=L(5032);const Fe=Ue("C",void 0,void 0);function Ue(ft,qe,Je){return{kind:ft,value:qe,error:Je}}var pe=L(3410),re=L(2806);class de extends q.w0{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,q.Nn)(qe)&&qe.add(this)):this.destination=dt}static create(qe,Je,Le){return new Pt(qe,Je,Le)}next(qe){this.isStopped?he(function Se(ft){return Ue("N",ft,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?he(function ge(ft){return Ue("E",void 0,ft)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?he(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Ge(ft,qe){return Oe.call(ft,qe)}class ut{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:Je}=this;if(Je.next)try{Je.next(qe)}catch(Le){be(Le)}}error(qe){const{partialObserver:Je}=this;if(Je.error)try{Je.error(qe)}catch(Le){be(Le)}else be(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(Je){be(Je)}}}class Pt extends de{constructor(qe,Je,Le){let ke;if(super(),(0,c.m)(qe)||!qe)ke={next:null!=qe?qe:void 0,error:null!=Je?Je:void 0,complete:null!=Le?Le:void 0};else{let H;this&&G.v.useDeprecatedNextContext?(H=Object.create(qe),H.unsubscribe=()=>this.unsubscribe(),ke={next:qe.next&&Ge(qe.next,H),error:qe.error&&Ge(qe.error,H),complete:qe.complete&&Ge(qe.complete,H)}):ke=qe}this.destination=new ut(ke)}}function be(ft){G.v.useDeprecatedSynchronousErrorHandling?(0,re.O)(ft):(0,Te.h)(ft)}function he(ft,qe){const{onStoppedNotification:Je}=G.v;Je&&pe.z.setTimeout(()=>Je(ft,qe))}const dt={closed:!0,next:Pe.Z,error:function Ie(ft){throw ft},complete:Pe.Z}},727:(_n,It,L)=>{"use strict";L.d(It,{Lc:()=>Fe,w0:()=>Pe,Nn:()=>ge});var c=L(576);const G=(0,L(3888).d)(Ue=>function(re){Ue(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((de,Oe)=>`${Oe+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var Te=L(8737);class Pe{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Ge of re)Ge.remove(this);else re.remove(this);const{initialTeardown:de}=this;if((0,c.m)(de))try{de()}catch(Ge){pe=Ge instanceof G?Ge.errors:[Ge]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Ge of Oe)try{Se(Ge)}catch(ut){pe=null!=pe?pe:[],ut instanceof G?pe=[...pe,...ut.errors]:pe.push(ut)}}if(pe)throw new G(pe)}}add(pe){var re;if(pe&&pe!==this)if(this.closed)Se(pe);else{if(pe instanceof Pe){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(pe)}}_hasParent(pe){const{_parentage:re}=this;return re===pe||Array.isArray(re)&&re.includes(pe)}_addParent(pe){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(pe),re):re?[re,pe]:pe}_removeParent(pe){const{_parentage:re}=this;re===pe?this._parentage=null:Array.isArray(re)&&(0,Te.P)(re,pe)}remove(pe){const{_finalizers:re}=this;re&&(0,Te.P)(re,pe),pe instanceof Pe&&pe._removeParent(this)}}Pe.EMPTY=(()=>{const Ue=new Pe;return Ue.closed=!0,Ue})();const Fe=Pe.EMPTY;function ge(Ue){return Ue instanceof Pe||Ue&&"closed"in Ue&&(0,c.m)(Ue.remove)&&(0,c.m)(Ue.add)&&(0,c.m)(Ue.unsubscribe)}function Se(Ue){(0,c.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(_n,It,L)=>{"use strict";L.d(It,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(_n,It,L)=>{"use strict";L.d(It,{z:()=>Pe});var c=L(8189),G=L(7669),Te=L(8996);function Pe(...Fe){return function q(){return(0,c.J)(1)}()((0,Te.D)(Fe,(0,G.yG)(Fe)))}},515:(_n,It,L)=>{"use strict";L.d(It,{E:()=>q});const q=new(L(9751).y)(Pe=>Pe.complete())},8996:(_n,It,L)=>{"use strict";L.d(It,{D:()=>qe});var c=L(8421),q=L(5363),G=L(9468),Fe=L(9751),Se=L(2202),Ue=L(576),pe=L(9672);function de(Je,Le){if(!Je)throw new Error("Iterable cannot be null");return new Fe.y(ke=>{(0,pe.f)(ke,Le,()=>{const H=Je[Symbol.asyncIterator]();(0,pe.f)(ke,Le,()=>{H.next().then(De=>{De.done?ke.complete():ke.next(De.value)})},0,!0)})})}var Oe=L(3670),Ge=L(8239),ut=L(1144),Pt=L(6495),be=L(2206),Ie=L(4532),he=L(3260);function qe(Je,Le){return Le?function ft(Je,Le){if(null!=Je){if((0,Oe.c)(Je))return function Te(Je,Le){return(0,c.Xf)(Je).pipe((0,G.R)(Le),(0,q.Q)(Le))}(Je,Le);if((0,ut.z)(Je))return function ge(Je,Le){return new Fe.y(ke=>{let H=0;return Le.schedule(function(){H===Je.length?ke.complete():(ke.next(Je[H++]),ke.closed||this.schedule())})})}(Je,Le);if((0,Ge.t)(Je))return function Pe(Je,Le){return(0,c.Xf)(Je).pipe((0,G.R)(Le),(0,q.Q)(Le))}(Je,Le);if((0,be.D)(Je))return de(Je,Le);if((0,Pt.T)(Je))return function re(Je,Le){return new Fe.y(ke=>{let H;return(0,pe.f)(ke,Le,()=>{H=Je[Se.h](),(0,pe.f)(ke,Le,()=>{let De,it;try{({value:De,done:it}=H.next())}catch(Be){return void ke.error(Be)}it?ke.complete():ke.next(De)},0,!0)}),()=>(0,Ue.m)(null==H?void 0:H.return)&&H.return()})}(Je,Le);if((0,he.L)(Je))return function dt(Je,Le){return de((0,he.Q)(Je),Le)}(Je,Le)}throw(0,Ie.z)(Je)}(Je,Le):(0,c.Xf)(Je)}},8421:(_n,It,L)=>{"use strict";L.d(It,{Xf:()=>Oe});var c=L(655),q=L(1144),G=L(8239),Te=L(9751),Pe=L(3670),Fe=L(2206),ge=L(4532),Se=L(6495),Ue=L(3260),pe=L(576),re=L(7849),de=L(8822);function Oe(ft){if(ft instanceof Te.y)return ft;if(null!=ft){if((0,Pe.c)(ft))return function Ge(ft){return new Te.y(qe=>{const Je=ft[de.L]();if((0,pe.m)(Je.subscribe))return Je.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ft);if((0,q.z)(ft))return function ut(ft){return new Te.y(qe=>{for(let Je=0;Je<ft.length&&!qe.closed;Je++)qe.next(ft[Je]);qe.complete()})}(ft);if((0,G.t)(ft))return function Pt(ft){return new Te.y(qe=>{ft.then(Je=>{qe.closed||(qe.next(Je),qe.complete())},Je=>qe.error(Je)).then(null,re.h)})}(ft);if((0,Fe.D)(ft))return Ie(ft);if((0,Se.T)(ft))return function be(ft){return new Te.y(qe=>{for(const Je of ft)if(qe.next(Je),qe.closed)return;qe.complete()})}(ft);if((0,Ue.L)(ft))return function he(ft){return Ie((0,Ue.Q)(ft))}(ft)}throw(0,ge.z)(ft)}function Ie(ft){return new Te.y(qe=>{(function dt(ft,qe){var Je,Le,ke,H;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Je=(0,c.KL)(ft);!(Le=yield Je.next()).done;)if(qe.next(Le.value),qe.closed)return}catch(De){ke={error:De}}finally{try{Le&&!Le.done&&(H=Je.return)&&(yield H.call(Je))}finally{if(ke)throw ke.error}}qe.complete()})})(ft,qe).catch(Je=>qe.error(Je))})}},6451:(_n,It,L)=>{"use strict";L.d(It,{T:()=>Fe});var c=L(8189),q=L(8421),G=L(515),Te=L(7669),Pe=L(8996);function Fe(...ge){const Se=(0,Te.yG)(ge),Ue=(0,Te._6)(ge,1/0),pe=ge;return pe.length?1===pe.length?(0,q.Xf)(pe[0]):(0,c.J)(Ue)((0,Pe.D)(pe,Se)):G.E}},9646:(_n,It,L)=>{"use strict";L.d(It,{of:()=>G});var c=L(7669),q=L(8996);function G(...Te){const Pe=(0,c.yG)(Te);return(0,q.D)(Te,Pe)}},2843:(_n,It,L)=>{"use strict";L.d(It,{_:()=>G});var c=L(9751),q=L(576);function G(Te,Pe){const Fe=(0,q.m)(Te)?Te:()=>Te,ge=Se=>Se.error(Fe());return new c.y(Pe?Se=>Pe.schedule(ge,0,Se):ge)}},5403:(_n,It,L)=>{"use strict";L.d(It,{x:()=>q});var c=L(930);function q(Te,Pe,Fe,ge,Se){return new G(Te,Pe,Fe,ge,Se)}class G extends c.Lv{constructor(Pe,Fe,ge,Se,Ue,pe){super(Pe),this.onFinalize=Ue,this.shouldUnsubscribe=pe,this._next=Fe?function(re){try{Fe(re)}catch(de){Pe.error(de)}}:super._next,this._error=Se?function(re){try{Se(re)}catch(de){Pe.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(re){Pe.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Fe}=this;super.unsubscribe(),!Fe&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},262:(_n,It,L)=>{"use strict";L.d(It,{K:()=>Te});var c=L(8421),q=L(5403),G=L(4482);function Te(Pe){return(0,G.e)((Fe,ge)=>{let pe,Se=null,Ue=!1;Se=Fe.subscribe((0,q.x)(ge,void 0,void 0,re=>{pe=(0,c.Xf)(Pe(re,Te(Pe)(Fe))),Se?(Se.unsubscribe(),Se=null,pe.subscribe(ge)):Ue=!0})),Ue&&(Se.unsubscribe(),Se=null,pe.subscribe(ge))})}},4351:(_n,It,L)=>{"use strict";L.d(It,{b:()=>G});var c=L(5577),q=L(576);function G(Te,Pe){return(0,q.m)(Pe)?(0,c.z)(Te,Pe,1):(0,c.z)(Te,1)}},6590:(_n,It,L)=>{"use strict";L.d(It,{d:()=>G});var c=L(4482),q=L(5403);function G(Te){return(0,c.e)((Pe,Fe)=>{let ge=!1;Pe.subscribe((0,q.x)(Fe,Se=>{ge=!0,Fe.next(Se)},()=>{ge||Fe.next(Te),Fe.complete()}))})}},1884:(_n,It,L)=>{"use strict";L.d(It,{x:()=>Te});var c=L(4671),q=L(4482),G=L(5403);function Te(Fe,ge=c.y){return Fe=null!=Fe?Fe:Pe,(0,q.e)((Se,Ue)=>{let pe,re=!0;Se.subscribe((0,G.x)(Ue,de=>{const Oe=ge(de);(re||!Fe(pe,Oe))&&(re=!1,pe=Oe,Ue.next(de))}))})}function Pe(Fe,ge){return Fe===ge}},9300:(_n,It,L)=>{"use strict";L.d(It,{h:()=>G});var c=L(4482),q=L(5403);function G(Te,Pe){return(0,c.e)((Fe,ge)=>{let Se=0;Fe.subscribe((0,q.x)(ge,Ue=>Te.call(Pe,Ue,Se++)&&ge.next(Ue)))})}},590:(_n,It,L)=>{"use strict";L.d(It,{P:()=>ge});var c=L(6805),q=L(9300),G=L(5698),Te=L(6590),Pe=L(8068),Fe=L(4671);function ge(Se,Ue){const pe=arguments.length>=2;return re=>re.pipe(Se?(0,q.h)((de,Oe)=>Se(de,Oe,re)):Fe.y,(0,G.q)(1),pe?(0,Te.d)(Ue):(0,Pe.T)(()=>new c.K))}},4004:(_n,It,L)=>{"use strict";L.d(It,{U:()=>G});var c=L(4482),q=L(5403);function G(Te,Pe){return(0,c.e)((Fe,ge)=>{let Se=0;Fe.subscribe((0,q.x)(ge,Ue=>{ge.next(Te.call(Pe,Ue,Se++))}))})}},8189:(_n,It,L)=>{"use strict";L.d(It,{J:()=>G});var c=L(5577),q=L(4671);function G(Te=1/0){return(0,c.z)(q.y,Te)}},5577:(_n,It,L)=>{"use strict";L.d(It,{z:()=>Se});var c=L(4004),q=L(8421),G=L(4482),Te=L(9672),Pe=L(5403),ge=L(576);function Se(Ue,pe,re=1/0){return(0,ge.m)(pe)?Se((de,Oe)=>(0,c.U)((Ge,ut)=>pe(de,Ge,Oe,ut))((0,q.Xf)(Ue(de,Oe))),re):("number"==typeof pe&&(re=pe),(0,G.e)((de,Oe)=>function Fe(Ue,pe,re,de,Oe,Ge,ut,Pt){const be=[];let Ie=0,he=0,dt=!1;const ft=()=>{dt&&!be.length&&!Ie&&pe.complete()},qe=Le=>Ie<de?Je(Le):be.push(Le),Je=Le=>{Ge&&pe.next(Le),Ie++;let ke=!1;(0,q.Xf)(re(Le,he++)).subscribe((0,Pe.x)(pe,H=>{null==Oe||Oe(H),Ge?qe(H):pe.next(H)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Ie--;be.length&&Ie<de;){const H=be.shift();ut?(0,Te.f)(pe,ut,()=>Je(H)):Je(H)}ft()}catch(H){pe.error(H)}}))};return Ue.subscribe((0,Pe.x)(pe,qe,()=>{dt=!0,ft()})),()=>{null==Pt||Pt()}}(de,Oe,Ue,re)))}},5363:(_n,It,L)=>{"use strict";L.d(It,{Q:()=>Te});var c=L(9672),q=L(4482),G=L(5403);function Te(Pe,Fe=0){return(0,q.e)((ge,Se)=>{ge.subscribe((0,G.x)(Se,Ue=>(0,c.f)(Se,Pe,()=>Se.next(Ue),Fe),()=>(0,c.f)(Se,Pe,()=>Se.complete(),Fe),Ue=>(0,c.f)(Se,Pe,()=>Se.error(Ue),Fe)))})}},5026:(_n,It,L)=>{"use strict";L.d(It,{R:()=>Te});var c=L(4482),q=L(5403);function Te(Pe,Fe){return(0,c.e)(function G(Pe,Fe,ge,Se,Ue){return(pe,re)=>{let de=ge,Oe=Fe,Ge=0;pe.subscribe((0,q.x)(re,ut=>{const Pt=Ge++;Oe=de?Pe(Oe,ut,Pt):(de=!0,ut),Se&&re.next(Oe)},Ue&&(()=>{de&&re.next(Oe),re.complete()})))}}(Pe,Fe,arguments.length>=2,!0))}},3099:(_n,It,L)=>{"use strict";L.d(It,{B:()=>Pe});var c=L(8421),q=L(958),G=L(930),Te=L(4482);function Pe(ge={}){const{connector:Se=(()=>new q.x),resetOnError:Ue=!0,resetOnComplete:pe=!0,resetOnRefCountZero:re=!0}=ge;return de=>{let Oe,Ge,ut,Pt=0,be=!1,Ie=!1;const he=()=>{null==Ge||Ge.unsubscribe(),Ge=void 0},dt=()=>{he(),Oe=ut=void 0,be=Ie=!1},ft=()=>{const qe=Oe;dt(),null==qe||qe.unsubscribe()};return(0,Te.e)((qe,Je)=>{Pt++,!Ie&&!be&&he();const Le=ut=null!=ut?ut:Se();Je.add(()=>{Pt--,0===Pt&&!Ie&&!be&&(Ge=Fe(ft,re))}),Le.subscribe(Je),!Oe&&Pt>0&&(Oe=new G.Hp({next:ke=>Le.next(ke),error:ke=>{Ie=!0,he(),Ge=Fe(dt,Ue,ke),Le.error(ke)},complete:()=>{be=!0,he(),Ge=Fe(dt,pe),Le.complete()}}),(0,c.Xf)(qe).subscribe(Oe))})(de)}}function Fe(ge,Se,...Ue){if(!0===Se)return void ge();if(!1===Se)return;const pe=new G.Hp({next:()=>{pe.unsubscribe(),ge()}});return Se(...Ue).subscribe(pe)}},8675:(_n,It,L)=>{"use strict";L.d(It,{O:()=>Te});var c=L(7272),q=L(7669),G=L(4482);function Te(...Pe){const Fe=(0,q.yG)(Pe);return(0,G.e)((ge,Se)=>{(Fe?(0,c.z)(Pe,ge,Fe):(0,c.z)(Pe,ge)).subscribe(Se)})}},9468:(_n,It,L)=>{"use strict";L.d(It,{R:()=>q});var c=L(4482);function q(G,Te=0){return(0,c.e)((Pe,Fe)=>{Fe.add(G.schedule(()=>Pe.subscribe(Fe),Te))})}},3900:(_n,It,L)=>{"use strict";L.d(It,{w:()=>Te});var c=L(8421),q=L(4482),G=L(5403);function Te(Pe,Fe){return(0,q.e)((ge,Se)=>{let Ue=null,pe=0,re=!1;const de=()=>re&&!Ue&&Se.complete();ge.subscribe((0,G.x)(Se,Oe=>{null==Ue||Ue.unsubscribe();let Ge=0;const ut=pe++;(0,c.Xf)(Pe(Oe,ut)).subscribe(Ue=(0,G.x)(Se,Pt=>Se.next(Fe?Fe(Oe,Pt,ut,Ge++):Pt),()=>{Ue=null,de()}))},()=>{re=!0,de()}))})}},5698:(_n,It,L)=>{"use strict";L.d(It,{q:()=>Te});var c=L(515),q=L(4482),G=L(5403);function Te(Pe){return Pe<=0?()=>c.E:(0,q.e)((Fe,ge)=>{let Se=0;Fe.subscribe((0,G.x)(ge,Ue=>{++Se<=Pe&&(ge.next(Ue),Pe<=Se&&ge.complete())}))})}},8505:(_n,It,L)=>{"use strict";L.d(It,{b:()=>Pe});var c=L(576),q=L(4482),G=L(5403),Te=L(4671);function Pe(Fe,ge,Se){const Ue=(0,c.m)(Fe)||ge||Se?{next:Fe,error:ge,complete:Se}:Fe;return Ue?(0,q.e)((pe,re)=>{var de;null===(de=Ue.subscribe)||void 0===de||de.call(Ue);let Oe=!0;pe.subscribe((0,G.x)(re,Ge=>{var ut;null===(ut=Ue.next)||void 0===ut||ut.call(Ue,Ge),re.next(Ge)},()=>{var Ge;Oe=!1,null===(Ge=Ue.complete)||void 0===Ge||Ge.call(Ue),re.complete()},Ge=>{var ut;Oe=!1,null===(ut=Ue.error)||void 0===ut||ut.call(Ue,Ge),re.error(Ge)},()=>{var Ge,ut;Oe&&(null===(Ge=Ue.unsubscribe)||void 0===Ge||Ge.call(Ue)),null===(ut=Ue.finalize)||void 0===ut||ut.call(Ue)}))}):Te.y}},8068:(_n,It,L)=>{"use strict";L.d(It,{T:()=>Te});var c=L(6805),q=L(4482),G=L(5403);function Te(Fe=Pe){return(0,q.e)((ge,Se)=>{let Ue=!1;ge.subscribe((0,G.x)(Se,pe=>{Ue=!0,Se.next(pe)},()=>Ue?Se.complete():Se.error(Fe())))})}function Pe(){return new c.K}},4408:(_n,It,L)=>{"use strict";L.d(It,{o:()=>Pe});var c=L(727);class q extends c.w0{constructor(ge,Se){super()}schedule(ge,Se=0){return this}}const G={setInterval(Fe,ge,...Se){const{delegate:Ue}=G;return null!=Ue&&Ue.setInterval?Ue.setInterval(Fe,ge,...Se):setInterval(Fe,ge,...Se)},clearInterval(Fe){const{delegate:ge}=G;return((null==ge?void 0:ge.clearInterval)||clearInterval)(Fe)},delegate:void 0};var Te=L(8737);class Pe extends q{constructor(ge,Se){super(ge,Se),this.scheduler=ge,this.work=Se,this.pending=!1}schedule(ge,Se=0){var Ue;if(this.closed)return this;this.state=ge;const pe=this.id,re=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(re,pe,Se)),this.pending=!0,this.delay=Se,this.id=null!==(Ue=this.id)&&void 0!==Ue?Ue:this.requestAsyncId(re,this.id,Se),this}requestAsyncId(ge,Se,Ue=0){return G.setInterval(ge.flush.bind(ge,this),Ue)}recycleAsyncId(ge,Se,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return Se;null!=Se&&G.clearInterval(Se)}execute(ge,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(ge,Se);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Se){let pe,Ue=!1;try{this.work(ge)}catch(re){Ue=!0,pe=re||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Se}=this,{actions:Ue}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(Ue,this),null!=ge&&(this.id=this.recycleAsyncId(Se,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(_n,It,L)=>{"use strict";L.d(It,{v:()=>G});var c=L(6063);class q{constructor(Pe,Fe=q.now){this.schedulerActionCtor=Pe,this.now=Fe}schedule(Pe,Fe=0,ge){return new this.schedulerActionCtor(this,Pe).schedule(ge,Fe)}}q.now=c.l.now;class G extends q{constructor(Pe,Fe=q.now){super(Pe,Fe),this.actions=[],this._active=!1}flush(Pe){const{actions:Fe}=this;if(this._active)return void Fe.push(Pe);let ge;this._active=!0;do{if(ge=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Fe.shift());if(this._active=!1,ge){for(;Pe=Fe.shift();)Pe.unsubscribe();throw ge}}}},4986:(_n,It,L)=>{"use strict";L.d(It,{z:()=>G});var c=L(4408);const G=new(L(7565).v)(c.o)},6063:(_n,It,L)=>{"use strict";L.d(It,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(_n,It,L)=>{"use strict";L.d(It,{z:()=>c});const c={setTimeout(q,G,...Te){const{delegate:Pe}=c;return null!=Pe&&Pe.setTimeout?Pe.setTimeout(q,G,...Te):setTimeout(q,G,...Te)},clearTimeout(q){const{delegate:G}=c;return((null==G?void 0:G.clearTimeout)||clearTimeout)(q)},delegate:void 0}},2202:(_n,It,L)=>{"use strict";L.d(It,{h:()=>q});const q=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_n,It,L)=>{"use strict";L.d(It,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(_n,It,L)=>{"use strict";L.d(It,{K:()=>q});const q=(0,L(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(_n,It,L)=>{"use strict";L.d(It,{_6:()=>Fe,jO:()=>Te,yG:()=>Pe});var c=L(576);function G(ge){return ge[ge.length-1]}function Te(ge){return(0,c.m)(G(ge))?ge.pop():void 0}function Pe(ge){return function q(ge){return ge&&(0,c.m)(ge.schedule)}(G(ge))?ge.pop():void 0}function Fe(ge,Se){return"number"==typeof G(ge)?ge.pop():Se}},4742:(_n,It,L)=>{"use strict";L.d(It,{D:()=>Pe});const{isArray:c}=Array,{getPrototypeOf:q,prototype:G,keys:Te}=Object;function Pe(ge){if(1===ge.length){const Se=ge[0];if(c(Se))return{args:Se,keys:null};if(function Fe(ge){return ge&&"object"==typeof ge&&q(ge)===G}(Se)){const Ue=Te(Se);return{args:Ue.map(pe=>Se[pe]),keys:Ue}}}return{args:ge,keys:null}}},8737:(_n,It,L)=>{"use strict";function c(q,G){if(q){const Te=q.indexOf(G);0<=Te&&q.splice(Te,1)}}L.d(It,{P:()=>c})},3888:(_n,It,L)=>{"use strict";function c(q){const Te=q(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}L.d(It,{d:()=>c})},1810:(_n,It,L)=>{"use strict";function c(q,G){return q.reduce((Te,Pe,Fe)=>(Te[Pe]=G[Fe],Te),{})}L.d(It,{n:()=>c})},2806:(_n,It,L)=>{"use strict";L.d(It,{O:()=>Te,x:()=>G});var c=L(2416);let q=null;function G(Pe){if(c.v.useDeprecatedSynchronousErrorHandling){const Fe=!q;if(Fe&&(q={errorThrown:!1,error:null}),Pe(),Fe){const{errorThrown:ge,error:Se}=q;if(q=null,ge)throw Se}}else Pe()}function Te(Pe){c.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=Pe)}},9672:(_n,It,L)=>{"use strict";function c(q,G,Te,Pe=0,Fe=!1){const ge=G.schedule(function(){Te(),Fe?q.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(q.add(ge),!Fe)return ge}L.d(It,{f:()=>c})},4671:(_n,It,L)=>{"use strict";function c(q){return q}L.d(It,{y:()=>c})},1144:(_n,It,L)=>{"use strict";L.d(It,{z:()=>c});const c=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(_n,It,L)=>{"use strict";L.d(It,{D:()=>q});var c=L(576);function q(G){return Symbol.asyncIterator&&(0,c.m)(null==G?void 0:G[Symbol.asyncIterator])}},576:(_n,It,L)=>{"use strict";function c(q){return"function"==typeof q}L.d(It,{m:()=>c})},3670:(_n,It,L)=>{"use strict";L.d(It,{c:()=>G});var c=L(8822),q=L(576);function G(Te){return(0,q.m)(Te[c.L])}},6495:(_n,It,L)=>{"use strict";L.d(It,{T:()=>G});var c=L(2202),q=L(576);function G(Te){return(0,q.m)(null==Te?void 0:Te[c.h])}},8239:(_n,It,L)=>{"use strict";L.d(It,{t:()=>q});var c=L(576);function q(G){return(0,c.m)(null==G?void 0:G.then)}},3260:(_n,It,L)=>{"use strict";L.d(It,{L:()=>Te,Q:()=>G});var c=L(655),q=L(576);function G(Pe){return(0,c.FC)(this,arguments,function*(){const ge=Pe.getReader();try{for(;;){const{value:Se,done:Ue}=yield(0,c.qq)(ge.read());if(Ue)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Se)}}finally{ge.releaseLock()}})}function Te(Pe){return(0,q.m)(null==Pe?void 0:Pe.getReader)}},4482:(_n,It,L)=>{"use strict";L.d(It,{A:()=>q,e:()=>G});var c=L(576);function q(Te){return(0,c.m)(null==Te?void 0:Te.lift)}function G(Te){return Pe=>{if(q(Pe))return Pe.lift(function(Fe){try{return Te(Fe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(_n,It,L)=>{"use strict";L.d(It,{Z:()=>Te});var c=L(4004);const{isArray:q}=Array;function Te(Pe){return(0,c.U)(Fe=>function G(Pe,Fe){return q(Fe)?Pe(...Fe):Pe(Fe)}(Pe,Fe))}},5032:(_n,It,L)=>{"use strict";function c(){}L.d(It,{Z:()=>c})},9635:(_n,It,L)=>{"use strict";L.d(It,{U:()=>G,z:()=>q});var c=L(4671);function q(...Te){return G(Te)}function G(Te){return 0===Te.length?c.y:1===Te.length?Te[0]:function(Fe){return Te.reduce((ge,Se)=>Se(ge),Fe)}}},7849:(_n,It,L)=>{"use strict";L.d(It,{h:()=>G});var c=L(2416),q=L(3410);function G(Te){q.z.setTimeout(()=>{const{onUnhandledError:Pe}=c.v;if(!Pe)throw Te;Pe(Te)})}},4532:(_n,It,L)=>{"use strict";function c(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(It,{z:()=>c})},863:(_n,It,L)=>{var c={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7206,9230],"./ion-datetime_3.entry.js":[4959,7206,8592,4959],"./ion-fab_3.entry.js":[3510,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function q(G){if(!L.o(c,G))return Promise.resolve().then(()=>{var Fe=new Error("Cannot find module '"+G+"'");throw Fe.code="MODULE_NOT_FOUND",Fe});var Te=c[G],Pe=Te[0];return Promise.all(Te.slice(1).map(L.e)).then(()=>L(Pe))}q.keys=()=>Object.keys(c),q.id=863,_n.exports=q},5899:(_n,It,L)=>{var c={"./pwa-action-sheet.entry.js":[2987,2987],"./pwa-camera-modal-instance.entry.js":[3527,3527],"./pwa-camera-modal.entry.js":[5836,7839],"./pwa-camera.entry.js":[7943,7943],"./pwa-toast.entry.js":[3822,3822]};function q(G){if(!L.o(c,G))return Promise.resolve().then(()=>{var Fe=new Error("Cannot find module '"+G+"'");throw Fe.code="MODULE_NOT_FOUND",Fe});var Te=c[G],Pe=Te[0];return L.e(Te[1]).then(()=>L(Pe))}q.keys=()=>Object.keys(c),q.id=5899,_n.exports=q},655:(_n,It,L)=>{"use strict";function Te(ot,at){var Xe={};for(var Ae in ot)Object.prototype.hasOwnProperty.call(ot,Ae)&&at.indexOf(Ae)<0&&(Xe[Ae]=ot[Ae]);if(null!=ot&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(Ae=Object.getOwnPropertySymbols(ot);Me<Ae.length;Me++)at.indexOf(Ae[Me])<0&&Object.prototype.propertyIsEnumerable.call(ot,Ae[Me])&&(Xe[Ae[Me]]=ot[Ae[Me]])}return Xe}function Pe(ot,at,Xe,Ae){var gt,Me=arguments.length,we=Me<3?at:null===Ae?Ae=Object.getOwnPropertyDescriptor(at,Xe):Ae;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)we=Reflect.decorate(ot,at,Xe,Ae);else for(var et=ot.length-1;et>=0;et--)(gt=ot[et])&&(we=(Me<3?gt(we):Me>3?gt(at,Xe,we):gt(at,Xe))||we);return Me>3&&we&&Object.defineProperty(at,Xe,we),we}function de(ot,at,Xe,Ae){return new(Xe||(Xe=Promise))(function(we,gt){function et(jt){try{Ke(Ae.next(jt))}catch(Jt){gt(Jt)}}function Qe(jt){try{Ke(Ae.throw(jt))}catch(Jt){gt(Jt)}}function Ke(jt){jt.done?we(jt.value):function Me(we){return we instanceof Xe?we:new Xe(function(gt){gt(we)})}(jt.value).then(et,Qe)}Ke((Ae=Ae.apply(ot,at||[])).next())})}function ft(ot){return this instanceof ft?(this.v=ot,this):new ft(ot)}function qe(ot,at,Xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Ae=Xe.apply(ot,at||[]),we=[];return Me={},gt("next"),gt("throw"),gt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function gt(tn){Ae[tn]&&(Me[tn]=function(Tt){return new Promise(function(Hn,Gn){we.push([tn,Tt,Hn,Gn])>1||et(tn,Tt)})})}function et(tn,Tt){try{!function Qe(tn){tn.value instanceof ft?Promise.resolve(tn.value.v).then(Ke,jt):Jt(we[0][2],tn)}(Ae[tn](Tt))}catch(Hn){Jt(we[0][3],Hn)}}function Ke(tn){et("next",tn)}function jt(tn){et("throw",tn)}function Jt(tn,Tt){tn(Tt),we.shift(),we.length&&et(we[0][0],we[0][1])}}function Le(ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,at=ot[Symbol.asyncIterator];return at?at.call(ot):(ot=function Pt(ot){var at="function"==typeof Symbol&&Symbol.iterator,Xe=at&&ot[at],Ae=0;if(Xe)return Xe.call(ot);if(ot&&"number"==typeof ot.length)return{next:function(){return ot&&Ae>=ot.length&&(ot=void 0),{value:ot&&ot[Ae++],done:!ot}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")}(ot),Xe={},Ae("next"),Ae("throw"),Ae("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe);function Ae(we){Xe[we]=ot[we]&&function(gt){return new Promise(function(et,Qe){!function Me(we,gt,et,Qe){Promise.resolve(Qe).then(function(Ke){we({value:Ke,done:et})},gt)}(et,Qe,(gt=ot[we](gt)).done,gt.value)})}}}L.d(It,{FC:()=>qe,KL:()=>Le,_T:()=>Te,gn:()=>Pe,mG:()=>de,qq:()=>ft})},6895:(_n,It,L)=>{"use strict";L.d(It,{Do:()=>he,EM:()=>Fs,HT:()=>Te,JF:()=>wo,K0:()=>Fe,Mx:()=>Pi,O5:()=>bt,Ov:()=>Yt,PC:()=>Vr,PM:()=>ds,S$:()=>Pt,V_:()=>Ue,Ye:()=>dt,b0:()=>Ie,bD:()=>ca,ez:()=>us,q:()=>G,sg:()=>te,tP:()=>mr,uU:()=>Ni,w_:()=>Pe});var c=L(4650);let q=null;function G(){return q}function Te(F){q||(q=F)}class Pe{}const Fe=new c.OlP("DocumentToken");let ge=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=c.Yz7({token:F,factory:function(){return function Se(){return(0,c.LFG)(pe)}()},providedIn:"platform"}),F})();const Ue=new c.OlP("Location Initialized");let pe=(()=>{class F extends ge{constructor($){super(),this._doc=$,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState($){const ne=G().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",$,!1),()=>ne.removeEventListener("popstate",$)}onHashChange($){const ne=G().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",$,!1),()=>ne.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,ne,Re){re()?this._history.pushState($,ne,Re):this._location.hash=Re}replaceState($,ne,Re){re()?this._history.replaceState($,ne,Re):this._location.hash=Re}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)(c.LFG(Fe))},F.\u0275prov=c.Yz7({token:F,factory:function(){return function de(){return new pe((0,c.LFG)(Fe))}()},providedIn:"platform"}),F})();function re(){return!!window.history.pushState}function Oe(F,Y){if(0==F.length)return Y;if(0==Y.length)return F;let $=0;return F.endsWith("/")&&$++,Y.startsWith("/")&&$++,2==$?F+Y.substring(1):1==$?F+Y:F+"/"+Y}function Ge(F){const Y=F.match(/#|\?|$/),$=Y&&Y.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function ut(F){return F&&"?"!==F[0]?"?"+F:F}let Pt=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=c.Yz7({token:F,factory:function(){return(0,c.f3M)(Ie)},providedIn:"root"}),F})();const be=new c.OlP("appBaseHref");let Ie=(()=>{class F extends Pt{constructor($,ne){var Re,Wt,en;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(Re=null!==(Wt=null!=ne?ne:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Wt?Wt:null===(en=(0,c.f3M)(Fe).location)||void 0===en?void 0:en.origin)&&void 0!==Re?Re:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Oe(this._baseHref,$)}path($=!1){const ne=this._platformLocation.pathname+ut(this._platformLocation.search),Re=this._platformLocation.hash;return Re&&$?`${ne}${Re}`:ne}pushState($,ne,Re,Wt){const en=this.prepareExternalUrl(Re+ut(Wt));this._platformLocation.pushState($,ne,en)}replaceState($,ne,Re,Wt){const en=this.prepareExternalUrl(Re+ut(Wt));this._platformLocation.replaceState($,ne,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var ne,Re;null===(ne=(Re=this._platformLocation).historyGo)||void 0===ne||ne.call(Re,$)}}return F.\u0275fac=function($){return new($||F)(c.LFG(ge),c.LFG(be,8))},F.\u0275prov=c.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),he=(()=>{class F extends Pt{constructor($,ne){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl($){const ne=Oe(this._baseHref,$);return ne.length>0?"#"+ne:ne}pushState($,ne,Re,Wt){let en=this.prepareExternalUrl(Re+ut(Wt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.pushState($,ne,en)}replaceState($,ne,Re,Wt){let en=this.prepareExternalUrl(Re+ut(Wt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.replaceState($,ne,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var ne,Re;null===(ne=(Re=this._platformLocation).historyGo)||void 0===ne||ne.call(Re,$)}}return F.\u0275fac=function($){return new($||F)(c.LFG(ge),c.LFG(be,8))},F.\u0275prov=c.Yz7({token:F,factory:F.\u0275fac}),F})(),dt=(()=>{class F{constructor($){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ne=this._locationStrategy.getBaseHref();this._basePath=function Le(F){if(new RegExp("^(https?:)?//").test(F)){const[,$]=F.split(/\/\/[^\/]+/);return $}return F}(Ge(Je(ne))),this._locationStrategy.onPopState(Re=>{this._subject.emit({url:this.path(!0),pop:!0,state:Re.state,type:Re.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ne=""){return this.path()==this.normalize($+ut(ne))}normalize($){return F.stripTrailingSlash(function qe(F,Y){if(!F||!Y.startsWith(F))return Y;const $=Y.substring(F.length);return""===$||["/",";","?","#"].includes($[0])?$:Y}(this._basePath,Je($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ne="",Re=null){this._locationStrategy.pushState(Re,"",$,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl($+ut(ne)),Re)}replaceState($,ne="",Re=null){this._locationStrategy.replaceState(Re,"",$,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl($+ut(ne)),Re)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var ne,Re;null===(ne=(Re=this._locationStrategy).historyGo)||void 0===ne||ne.call(Re,$)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)})),()=>{const ne=this._urlChangeListeners.indexOf($);var Re;this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(null===(Re=this._urlChangeSubscription)||void 0===Re||Re.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ne){this._urlChangeListeners.forEach(Re=>Re($,ne))}subscribe($,ne,Re){return this._subject.subscribe({next:$,error:ne,complete:Re})}}return F.normalizeQueryParams=ut,F.joinWithSlash=Oe,F.stripTrailingSlash=Ge,F.\u0275fac=function($){return new($||F)(c.LFG(Pt))},F.\u0275prov=c.Yz7({token:F,factory:function(){return function ft(){return new dt((0,c.LFG)(Pt))}()},providedIn:"root"}),F})();function Je(F){return F.replace(/\/index.html$/,"")}var it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),Be=(()=>((Be=Be||{})[Be.Narrow=0]="Narrow",Be[Be.Abbreviated=1]="Abbreviated",Be[Be.Wide=2]="Wide",Be[Be.Short=3]="Short",Be))(),_t=(()=>((_t=_t||{})[_t.Short=0]="Short",_t[_t.Medium=1]="Medium",_t[_t.Long=2]="Long",_t[_t.Full=3]="Full",_t))(),yt=(()=>((yt=yt||{})[yt.Decimal=0]="Decimal",yt[yt.Group=1]="Group",yt[yt.List=2]="List",yt[yt.PercentSign=3]="PercentSign",yt[yt.PlusSign=4]="PlusSign",yt[yt.MinusSign=5]="MinusSign",yt[yt.Exponential=6]="Exponential",yt[yt.SuperscriptingExponent=7]="SuperscriptingExponent",yt[yt.PerMille=8]="PerMille",yt[yt.Infinity=9]="Infinity",yt[yt.NaN=10]="NaN",yt[yt.TimeSeparator=11]="TimeSeparator",yt[yt.CurrencyDecimal=12]="CurrencyDecimal",yt[yt.CurrencyGroup=13]="CurrencyGroup",yt))();function Qe(F,Y){return Un((0,c.cg1)(F)[c.wAp.DateFormat],Y)}function Ke(F,Y){return Un((0,c.cg1)(F)[c.wAp.TimeFormat],Y)}function jt(F,Y){return Un((0,c.cg1)(F)[c.wAp.DateTimeFormat],Y)}function Jt(F,Y){const $=(0,c.cg1)(F),ne=$[c.wAp.NumberSymbols][Y];if(typeof ne>"u"){if(Y===yt.CurrencyDecimal)return $[c.wAp.NumberSymbols][yt.Decimal];if(Y===yt.CurrencyGroup)return $[c.wAp.NumberSymbols][yt.Group]}return ne}function lr(F){if(!F[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Un(F,Y){for(let $=Y;$>-1;$--)if(typeof F[$]<"u")return F[$];throw new Error("Locale data API: locale data undefined")}function tr(F){const[Y,$]=F.split(":");return{hours:+Y,minutes:+$}}const Nr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dr={},Fr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Fn=(()=>((Fn=Fn||{})[Fn.Short=0]="Short",Fn[Fn.ShortGMT=1]="ShortGMT",Fn[Fn.Long=2]="Long",Fn[Fn.Extended=3]="Extended",Fn))(),Cn=(()=>((Cn=Cn||{})[Cn.FullYear=0]="FullYear",Cn[Cn.Month=1]="Month",Cn[Cn.Date=2]="Date",Cn[Cn.Hours=3]="Hours",Cn[Cn.Minutes=4]="Minutes",Cn[Cn.Seconds=5]="Seconds",Cn[Cn.FractionalSeconds=6]="FractionalSeconds",Cn[Cn.Day=7]="Day",Cn))(),mn=(()=>((mn=mn||{})[mn.DayPeriods=0]="DayPeriods",mn[mn.Days=1]="Days",mn[mn.Months=2]="Months",mn[mn.Eras=3]="Eras",mn))();function Wn(F,Y,$,ne){let Re=function pt(F){if($e(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[Re,Wt=1,en=1]=F.split("-").map(Bn=>+Bn);return Lr(Re,Wt-1,en)}const $=parseFloat(F);if(!isNaN(F-$))return new Date($);let ne;if(ne=F.match(Nr))return function yn(F){const Y=new Date(0);let $=0,ne=0;const Re=F[8]?Y.setUTCFullYear:Y.setFullYear,Wt=F[8]?Y.setUTCHours:Y.setHours;F[9]&&($=Number(F[9]+F[10]),ne=Number(F[9]+F[11])),Re.call(Y,Number(F[1]),Number(F[2])-1,Number(F[3]));const en=Number(F[4]||0)-$,Bn=Number(F[5]||0)-ne,vr=Number(F[6]||0),qr=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return Wt.call(Y,en,Bn,vr,qr),Y}(ne)}const Y=new Date(F);if(!$e(Y))throw new Error(`Unable to convert "${F}" into a date`);return Y}(F);Y=rn($,Y)||Y;let Bn,en=[];for(;Y;){if(Bn=Fr.exec(Y),!Bn){en.push(Y);break}{en=en.concat(Bn.slice(1));const Mr=en.pop();if(!Mr)break;Y=Mr}}let vr=Re.getTimezoneOffset();ne&&(vr=me(ne,vr),Re=function At(F,Y,$){const ne=$?-1:1,Re=F.getTimezoneOffset();return function He(F,Y){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+Y),F}(F,ne*(me(Y,Re)-Re))}(Re,ne,!0));let qr="";return en.forEach(Mr=>{const wr=function _e(F){if(Lt[F])return Lt[F];let Y;switch(F){case"G":case"GG":case"GGG":Y=Dn(mn.Eras,Be.Abbreviated);break;case"GGGG":Y=Dn(mn.Eras,Be.Wide);break;case"GGGGG":Y=Dn(mn.Eras,Be.Narrow);break;case"y":Y=xr(Cn.FullYear,1,0,!1,!0);break;case"yy":Y=xr(Cn.FullYear,2,0,!0,!0);break;case"yyy":Y=xr(Cn.FullYear,3,0,!1,!0);break;case"yyyy":Y=xr(Cn.FullYear,4,0,!1,!0);break;case"Y":Y=Xt(1);break;case"YY":Y=Xt(2,!0);break;case"YYY":Y=Xt(3);break;case"YYYY":Y=Xt(4);break;case"M":case"L":Y=xr(Cn.Month,1,1);break;case"MM":case"LL":Y=xr(Cn.Month,2,1);break;case"MMM":Y=Dn(mn.Months,Be.Abbreviated);break;case"MMMM":Y=Dn(mn.Months,Be.Wide);break;case"MMMMM":Y=Dn(mn.Months,Be.Narrow);break;case"LLL":Y=Dn(mn.Months,Be.Abbreviated,it.Standalone);break;case"LLLL":Y=Dn(mn.Months,Be.Wide,it.Standalone);break;case"LLLLL":Y=Dn(mn.Months,Be.Narrow,it.Standalone);break;case"w":Y=rt(1);break;case"ww":Y=rt(2);break;case"W":Y=rt(1,!0);break;case"d":Y=xr(Cn.Date,1);break;case"dd":Y=xr(Cn.Date,2);break;case"c":case"cc":Y=xr(Cn.Day,1);break;case"ccc":Y=Dn(mn.Days,Be.Abbreviated,it.Standalone);break;case"cccc":Y=Dn(mn.Days,Be.Wide,it.Standalone);break;case"ccccc":Y=Dn(mn.Days,Be.Narrow,it.Standalone);break;case"cccccc":Y=Dn(mn.Days,Be.Short,it.Standalone);break;case"E":case"EE":case"EEE":Y=Dn(mn.Days,Be.Abbreviated);break;case"EEEE":Y=Dn(mn.Days,Be.Wide);break;case"EEEEE":Y=Dn(mn.Days,Be.Narrow);break;case"EEEEEE":Y=Dn(mn.Days,Be.Short);break;case"a":case"aa":case"aaa":Y=Dn(mn.DayPeriods,Be.Abbreviated);break;case"aaaa":Y=Dn(mn.DayPeriods,Be.Wide);break;case"aaaaa":Y=Dn(mn.DayPeriods,Be.Narrow);break;case"b":case"bb":case"bbb":Y=Dn(mn.DayPeriods,Be.Abbreviated,it.Standalone,!0);break;case"bbbb":Y=Dn(mn.DayPeriods,Be.Wide,it.Standalone,!0);break;case"bbbbb":Y=Dn(mn.DayPeriods,Be.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":Y=Dn(mn.DayPeriods,Be.Abbreviated,it.Format,!0);break;case"BBBB":Y=Dn(mn.DayPeriods,Be.Wide,it.Format,!0);break;case"BBBBB":Y=Dn(mn.DayPeriods,Be.Narrow,it.Format,!0);break;case"h":Y=xr(Cn.Hours,1,-12);break;case"hh":Y=xr(Cn.Hours,2,-12);break;case"H":Y=xr(Cn.Hours,1);break;case"HH":Y=xr(Cn.Hours,2);break;case"m":Y=xr(Cn.Minutes,1);break;case"mm":Y=xr(Cn.Minutes,2);break;case"s":Y=xr(Cn.Seconds,1);break;case"ss":Y=xr(Cn.Seconds,2);break;case"S":Y=xr(Cn.FractionalSeconds,1);break;case"SS":Y=xr(Cn.FractionalSeconds,2);break;case"SSS":Y=xr(Cn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Y=pi(Fn.Short);break;case"ZZZZZ":Y=pi(Fn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Y=pi(Fn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Y=pi(Fn.Long);break;default:return null}return Lt[F]=Y,Y}(Mr);qr+=wr?wr(Re,$,vr):"''"===Mr?"'":Mr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),qr}function Lr(F,Y,$){const ne=new Date(0);return ne.setFullYear(F,Y,$),ne.setHours(0,0,0),ne}function rn(F,Y){const $=function at(F){return(0,c.cg1)(F)[c.wAp.LocaleId]}(F);if(Dr[$]=Dr[$]||{},Dr[$][Y])return Dr[$][Y];let ne="";switch(Y){case"shortDate":ne=Qe(F,_t.Short);break;case"mediumDate":ne=Qe(F,_t.Medium);break;case"longDate":ne=Qe(F,_t.Long);break;case"fullDate":ne=Qe(F,_t.Full);break;case"shortTime":ne=Ke(F,_t.Short);break;case"mediumTime":ne=Ke(F,_t.Medium);break;case"longTime":ne=Ke(F,_t.Long);break;case"fullTime":ne=Ke(F,_t.Full);break;case"short":const Re=rn(F,"shortTime"),Wt=rn(F,"shortDate");ne=_r(jt(F,_t.Short),[Re,Wt]);break;case"medium":const en=rn(F,"mediumTime"),Bn=rn(F,"mediumDate");ne=_r(jt(F,_t.Medium),[en,Bn]);break;case"long":const vr=rn(F,"longTime"),qr=rn(F,"longDate");ne=_r(jt(F,_t.Long),[vr,qr]);break;case"full":const Mr=rn(F,"fullTime"),wr=rn(F,"fullDate");ne=_r(jt(F,_t.Full),[Mr,wr])}return ne&&(Dr[$][Y]=ne),ne}function _r(F,Y){return Y&&(F=F.replace(/\{([^}]+)}/g,function($,ne){return null!=Y&&ne in Y?Y[ne]:$})),F}function Ir(F,Y,$="-",ne,Re){let Wt="";(F<0||Re&&F<=0)&&(Re?F=1-F:(F=-F,Wt=$));let en=String(F);for(;en.length<Y;)en="0"+en;return ne&&(en=en.slice(en.length-Y)),Wt+en}function xr(F,Y,$=0,ne=!1,Re=!1){return function(Wt,en){let Bn=function ti(F,Y){switch(F){case Cn.FullYear:return Y.getFullYear();case Cn.Month:return Y.getMonth();case Cn.Date:return Y.getDate();case Cn.Hours:return Y.getHours();case Cn.Minutes:return Y.getMinutes();case Cn.Seconds:return Y.getSeconds();case Cn.FractionalSeconds:return Y.getMilliseconds();case Cn.Day:return Y.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,Wt);if(($>0||Bn>-$)&&(Bn+=$),F===Cn.Hours)0===Bn&&-12===$&&(Bn=12);else if(F===Cn.FractionalSeconds)return function oi(F,Y){return Ir(F,3).substring(0,Y)}(Bn,Y);const vr=Jt(en,yt.MinusSign);return Ir(Bn,Y,vr,ne,Re)}}function Dn(F,Y,$=it.Format,ne=!1){return function(Re,Wt){return function ai(F,Y,$,ne,Re,Wt){switch($){case mn.Months:return function Me(F,Y,$){const ne=(0,c.cg1)(F),Wt=Un([ne[c.wAp.MonthsFormat],ne[c.wAp.MonthsStandalone]],Y);return Un(Wt,$)}(Y,Re,ne)[F.getMonth()];case mn.Days:return function Ae(F,Y,$){const ne=(0,c.cg1)(F),Wt=Un([ne[c.wAp.DaysFormat],ne[c.wAp.DaysStandalone]],Y);return Un(Wt,$)}(Y,Re,ne)[F.getDay()];case mn.DayPeriods:const en=F.getHours(),Bn=F.getMinutes();if(Wt){const qr=function hr(F){const Y=(0,c.cg1)(F);return lr(Y),(Y[c.wAp.ExtraData][2]||[]).map(ne=>"string"==typeof ne?tr(ne):[tr(ne[0]),tr(ne[1])])}(Y),Mr=function Cr(F,Y,$){const ne=(0,c.cg1)(F);lr(ne);const Wt=Un([ne[c.wAp.ExtraData][0],ne[c.wAp.ExtraData][1]],Y)||[];return Un(Wt,$)||[]}(Y,Re,ne),wr=qr.findIndex(Zi=>{if(Array.isArray(Zi)){const[Ci,Vi]=Zi,ga=en>=Ci.hours&&Bn>=Ci.minutes,gi=en<Vi.hours||en===Vi.hours&&Bn<Vi.minutes;if(Ci.hours<Vi.hours){if(ga&&gi)return!0}else if(ga||gi)return!0}else if(Zi.hours===en&&Zi.minutes===Bn)return!0;return!1});if(-1!==wr)return Mr[wr]}return function Xe(F,Y,$){const ne=(0,c.cg1)(F),Wt=Un([ne[c.wAp.DayPeriodsFormat],ne[c.wAp.DayPeriodsStandalone]],Y);return Un(Wt,$)}(Y,Re,ne)[en<12?0:1];case mn.Eras:return function we(F,Y){return Un((0,c.cg1)(F)[c.wAp.Eras],Y)}(Y,ne)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${$}`)}}(Re,Wt,F,Y,$,ne)}}function pi(F){return function(Y,$,ne){const Re=-1*ne,Wt=Jt($,yt.MinusSign),en=Re>0?Math.floor(Re/60):Math.ceil(Re/60);switch(F){case Fn.Short:return(Re>=0?"+":"")+Ir(en,2,Wt)+Ir(Math.abs(Re%60),2,Wt);case Fn.ShortGMT:return"GMT"+(Re>=0?"+":"")+Ir(en,1,Wt);case Fn.Long:return"GMT"+(Re>=0?"+":"")+Ir(en,2,Wt)+":"+Ir(Math.abs(Re%60),2,Wt);case Fn.Extended:return 0===ne?"Z":(Re>=0?"+":"")+Ir(en,2,Wt)+":"+Ir(Math.abs(Re%60),2,Wt);default:throw new Error(`Unknown zone width "${F}"`)}}}const gr=0,zr=4;function We(F){return Lr(F.getFullYear(),F.getMonth(),F.getDate()+(zr-F.getDay()))}function rt(F,Y=!1){return function($,ne){let Re;if(Y){const Wt=new Date($.getFullYear(),$.getMonth(),1).getDay()-1,en=$.getDate();Re=1+Math.floor((en+Wt)/7)}else{const Wt=We($),en=function $t(F){const Y=Lr(F,gr,1).getDay();return Lr(F,0,1+(Y<=zr?zr:zr+7)-Y)}(Wt.getFullYear()),Bn=Wt.getTime()-en.getTime();Re=1+Math.round(Bn/6048e5)}return Ir(Re,F,Jt(ne,yt.MinusSign))}}function Xt(F,Y=!1){return function($,ne){return Ir(We($).getFullYear(),F,Jt(ne,yt.MinusSign),Y)}}const Lt={};function me(F,Y){F=F.replace(/:/g,"");const $=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN($)?Y:$}function $e(F){return F instanceof Date&&!isNaN(F.valueOf())}function Pi(F,Y){Y=encodeURIComponent(Y);for(const $ of F.split(";")){const ne=$.indexOf("="),[Re,Wt]=-1==ne?[$,""]:[$.slice(0,ne),$.slice(ne+1)];if(Re.trim()===Y)return decodeURIComponent(Wt)}return null}class Wi{constructor(Y,$,ne,Re){this.$implicit=Y,this.ngForOf=$,this.index=ne,this.count=Re}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let te=(()=>{class F{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,ne,Re){this._viewContainer=$,this._template=ne,this._differs=Re,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ne=this._viewContainer;$.forEachOperation((Re,Wt,en)=>{if(null==Re.previousIndex)ne.createEmbeddedView(this._template,new Wi(Re.item,this._ngForOf,-1,-1),null===en?void 0:en);else if(null==en)ne.remove(null===Wt?void 0:Wt);else if(null!==Wt){const Bn=ne.get(Wt);ne.move(Bn,en),Ee(Bn,Re)}});for(let Re=0,Wt=ne.length;Re<Wt;Re++){const Bn=ne.get(Re).context;Bn.index=Re,Bn.count=Wt,Bn.ngForOf=this._ngForOf}$.forEachIdentityChange(Re=>{Ee(ne.get(Re.currentIndex),Re)})}static ngTemplateContextGuard($,ne){return!0}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},F.\u0275dir=c.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function Ee(F,Y){F.context.$implicit=Y.item}let bt=(()=>{class F{constructor($,ne){this._viewContainer=$,this._context=new Ht,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){ce("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){ce("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ne){return!0}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.s_b),c.Y36(c.Rgc))},F.\u0275dir=c.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Ht{constructor(){this.$implicit=null,this.ngIf=null}}function ce(F,Y){if(Y&&!Y.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,c.AaK)(Y)}'.`)}let Vr=(()=>{class F{constructor($,ne,Re){this._ngEl=$,this._differs=ne,this._renderer=Re,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,ne){const[Re,Wt]=$.split("."),en=-1===Re.indexOf("-")?void 0:c.JOm.DashCase;null!=ne?this._renderer.setStyle(this._ngEl.nativeElement,Re,Wt?`${ne}${Wt}`:ne,en):this._renderer.removeStyle(this._ngEl.nativeElement,Re,en)}_applyChanges($){$.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),$.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),$.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},F.\u0275dir=c.lG2({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),F})(),mr=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const ne=this._viewContainerRef;if(this._viewRef&&ne.remove(ne.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Re,ngTemplateOutletContext:Wt,ngTemplateOutletInjector:en}=this;this._viewRef=ne.createEmbeddedView(Re,Wt,en?{injector:en}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.s_b))},F.\u0275dir=c.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),F})();function fr(F,Y){return new c.vHH(2100,!1)}class fs{createSubscription(Y,$){return Y.subscribe({next:$,error:ne=>{throw ne}})}dispose(Y){Y.unsubscribe()}}class mt{createSubscription(Y,$){return Y.then($,ne=>{throw ne})}dispose(Y){}}const lt=new mt,xt=new fs;let Yt=(()=>{class F{constructor($){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=$}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,ne=>this._updateLatestValue($,ne))}_selectStrategy($){if((0,c.QGY)($))return lt;if((0,c.F4k)($))return xt;throw fr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,ne){$===this._obj&&(this._latestValue=ne,this._ref.markForCheck())}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.sBO,16))},F.\u0275pipe=c.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})();const as=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),so=new c.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Ni=(()=>{class F{constructor($,ne,Re){this.locale=$,this.defaultTimezone=ne,this.defaultOptions=Re}transform($,ne,Re,Wt){if(null==$||""===$||$!=$)return null;try{var en,Bn,vr,qr,Mr;const wr=null!==(en=null!=ne?ne:null===(Bn=this.defaultOptions)||void 0===Bn?void 0:Bn.dateFormat)&&void 0!==en?en:"mediumDate",Zi=null!==(vr=null!==(qr=null!=Re?Re:null===(Mr=this.defaultOptions)||void 0===Mr?void 0:Mr.timezone)&&void 0!==qr?qr:this.defaultTimezone)&&void 0!==vr?vr:void 0;return Wn($,wr,Wt||this.locale,Zi)}catch(wr){throw fr()}}}return F.\u0275fac=function($){return new($||F)(c.Y36(c.soG,16),c.Y36(as,24),c.Y36(so,24))},F.\u0275pipe=c.Yjl({name:"date",type:F,pure:!0,standalone:!0}),F})(),us=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=c.oAB({type:F}),F.\u0275inj=c.cJS({}),F})();const ca="browser",qs="server";function ds(F){return F===qs}let Fs=(()=>{class F{}return F.\u0275prov=(0,c.Yz7)({token:F,providedIn:"root",factory:()=>new co((0,c.LFG)(Fe),window)}),F})();class co{constructor(Y,$){this.document=Y,this.window=$,this.offset=()=>[0,0]}setOffset(Y){this.offset=Array.isArray(Y)?()=>Y:Y}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Y){this.supportsScrolling()&&this.window.scrollTo(Y[0],Y[1])}scrollToAnchor(Y){if(!this.supportsScrolling())return;const $=function ns(F,Y){const $=F.getElementById(Y)||F.getElementsByName(Y)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Re=ne.currentNode;for(;Re;){const Wt=Re.shadowRoot;if(Wt){const en=Wt.getElementById(Y)||Wt.querySelector(`[name="${Y}"]`);if(en)return en}Re=ne.nextNode()}}return null}(this.document,Y);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(Y){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=Y)}}scrollToElement(Y){const $=Y.getBoundingClientRect(),ne=$.left+this.window.pageXOffset,Re=$.top+this.window.pageYOffset,Wt=this.offset();this.window.scrollTo(ne-Wt[0],Re-Wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Y=wa(this.window.history)||wa(Object.getPrototypeOf(this.window.history));return!(!Y||!Y.writable&&!Y.set)}catch(Y){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Y){return!1}}}function wa(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class wo{}},529:(_n,It,L)=>{"use strict";L.d(It,{JF:()=>pi,WM:()=>pe,eN:()=>at});var c=L(6895),q=L(4650),G=L(9646),Te=L(9751),Pe=L(4351),Fe=L(9300),ge=L(4004);class Se{}class Ue{}class pe{constructor(We){this.normalizedNames=new Map,this.lazyUpdate=null,We?this.lazyInit="string"==typeof We?()=>{this.headers=new Map,We.split("\n").forEach(rt=>{const Xt=rt.indexOf(":");if(Xt>0){const Lt=rt.slice(0,Xt),_e=Lt.toLowerCase(),me=rt.slice(Xt+1).trim();this.maybeSetNormalizedName(Lt,_e),this.headers.has(_e)?this.headers.get(_e).push(me):this.headers.set(_e,[me])}})}:()=>{this.headers=new Map,Object.keys(We).forEach(rt=>{let Xt=We[rt];const Lt=rt.toLowerCase();"string"==typeof Xt&&(Xt=[Xt]),Xt.length>0&&(this.headers.set(Lt,Xt),this.maybeSetNormalizedName(rt,Lt))})}:this.headers=new Map}has(We){return this.init(),this.headers.has(We.toLowerCase())}get(We){this.init();const rt=this.headers.get(We.toLowerCase());return rt&&rt.length>0?rt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(We){return this.init(),this.headers.get(We.toLowerCase())||null}append(We,rt){return this.clone({name:We,value:rt,op:"a"})}set(We,rt){return this.clone({name:We,value:rt,op:"s"})}delete(We,rt){return this.clone({name:We,value:rt,op:"d"})}maybeSetNormalizedName(We,rt){this.normalizedNames.has(rt)||this.normalizedNames.set(rt,We)}init(){this.lazyInit&&(this.lazyInit instanceof pe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(We=>this.applyUpdate(We)),this.lazyUpdate=null))}copyFrom(We){We.init(),Array.from(We.headers.keys()).forEach(rt=>{this.headers.set(rt,We.headers.get(rt)),this.normalizedNames.set(rt,We.normalizedNames.get(rt))})}clone(We){const rt=new pe;return rt.lazyInit=this.lazyInit&&this.lazyInit instanceof pe?this.lazyInit:this,rt.lazyUpdate=(this.lazyUpdate||[]).concat([We]),rt}applyUpdate(We){const rt=We.name.toLowerCase();switch(We.op){case"a":case"s":let Xt=We.value;if("string"==typeof Xt&&(Xt=[Xt]),0===Xt.length)return;this.maybeSetNormalizedName(We.name,rt);const Lt=("a"===We.op?this.headers.get(rt):void 0)||[];Lt.push(...Xt),this.headers.set(rt,Lt);break;case"d":const _e=We.value;if(_e){let me=this.headers.get(rt);if(!me)return;me=me.filter(He=>-1===_e.indexOf(He)),0===me.length?(this.headers.delete(rt),this.normalizedNames.delete(rt)):this.headers.set(rt,me)}else this.headers.delete(rt),this.normalizedNames.delete(rt)}}forEach(We){this.init(),Array.from(this.normalizedNames.keys()).forEach(rt=>We(this.normalizedNames.get(rt),this.headers.get(rt)))}}class de{encodeKey(We){return Pt(We)}encodeValue(We){return Pt(We)}decodeKey(We){return decodeURIComponent(We)}decodeValue(We){return decodeURIComponent(We)}}const Ge=/%(\d[a-f0-9])/gi,ut={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pt($t){return encodeURIComponent($t).replace(Ge,(We,rt)=>{var Xt;return null!==(Xt=ut[rt])&&void 0!==Xt?Xt:We})}function be($t){return`${$t}`}class Ie{constructor(We={}){if(this.updates=null,this.cloneFrom=null,this.encoder=We.encoder||new de,We.fromString){if(We.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Oe($t,We){const rt=new Map;return $t.length>0&&$t.replace(/^\?/,"").split("&").forEach(Lt=>{const _e=Lt.indexOf("="),[me,He]=-1==_e?[We.decodeKey(Lt),""]:[We.decodeKey(Lt.slice(0,_e)),We.decodeValue(Lt.slice(_e+1))],At=rt.get(me)||[];At.push(He),rt.set(me,At)}),rt}(We.fromString,this.encoder)}else We.fromObject?(this.map=new Map,Object.keys(We.fromObject).forEach(rt=>{const Xt=We.fromObject[rt],Lt=Array.isArray(Xt)?Xt.map(be):[be(Xt)];this.map.set(rt,Lt)})):this.map=null}has(We){return this.init(),this.map.has(We)}get(We){this.init();const rt=this.map.get(We);return rt?rt[0]:null}getAll(We){return this.init(),this.map.get(We)||null}keys(){return this.init(),Array.from(this.map.keys())}append(We,rt){return this.clone({param:We,value:rt,op:"a"})}appendAll(We){const rt=[];return Object.keys(We).forEach(Xt=>{const Lt=We[Xt];Array.isArray(Lt)?Lt.forEach(_e=>{rt.push({param:Xt,value:_e,op:"a"})}):rt.push({param:Xt,value:Lt,op:"a"})}),this.clone(rt)}set(We,rt){return this.clone({param:We,value:rt,op:"s"})}delete(We,rt){return this.clone({param:We,value:rt,op:"d"})}toString(){return this.init(),this.keys().map(We=>{const rt=this.encoder.encodeKey(We);return this.map.get(We).map(Xt=>rt+"="+this.encoder.encodeValue(Xt)).join("&")}).filter(We=>""!==We).join("&")}clone(We){const rt=new Ie({encoder:this.encoder});return rt.cloneFrom=this.cloneFrom||this,rt.updates=(this.updates||[]).concat(We),rt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(We=>this.map.set(We,this.cloneFrom.map.get(We))),this.updates.forEach(We=>{switch(We.op){case"a":case"s":const rt=("a"===We.op?this.map.get(We.param):void 0)||[];rt.push(be(We.value)),this.map.set(We.param,rt);break;case"d":if(void 0===We.value){this.map.delete(We.param);break}{let Xt=this.map.get(We.param)||[];const Lt=Xt.indexOf(be(We.value));-1!==Lt&&Xt.splice(Lt,1),Xt.length>0?this.map.set(We.param,Xt):this.map.delete(We.param)}}}),this.cloneFrom=this.updates=null)}}class dt{constructor(){this.map=new Map}set(We,rt){return this.map.set(We,rt),this}get(We){return this.map.has(We)||this.map.set(We,We.defaultValue()),this.map.get(We)}delete(We){return this.map.delete(We),this}has(We){return this.map.has(We)}keys(){return this.map.keys()}}function qe($t){return typeof ArrayBuffer<"u"&&$t instanceof ArrayBuffer}function Je($t){return typeof Blob<"u"&&$t instanceof Blob}function Le($t){return typeof FormData<"u"&&$t instanceof FormData}class H{constructor(We,rt,Xt,Lt){let _e;if(this.url=rt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=We.toUpperCase(),function ft($t){switch($t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Lt?(this.body=void 0!==Xt?Xt:null,_e=Lt):_e=Xt,_e&&(this.reportProgress=!!_e.reportProgress,this.withCredentials=!!_e.withCredentials,_e.responseType&&(this.responseType=_e.responseType),_e.headers&&(this.headers=_e.headers),_e.context&&(this.context=_e.context),_e.params&&(this.params=_e.params)),this.headers||(this.headers=new pe),this.context||(this.context=new dt),this.params){const me=this.params.toString();if(0===me.length)this.urlWithParams=rt;else{const He=rt.indexOf("?");this.urlWithParams=rt+(-1===He?"?":He<rt.length-1?"&":"")+me}}else this.params=new Ie,this.urlWithParams=rt}serializeBody(){return null===this.body?null:qe(this.body)||Je(this.body)||Le(this.body)||function ke($t){return typeof URLSearchParams<"u"&&$t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ie?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Le(this.body)?null:Je(this.body)?this.body.type||null:qe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ie?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(We={}){var rt;const Xt=We.method||this.method,Lt=We.url||this.url,_e=We.responseType||this.responseType,me=void 0!==We.body?We.body:this.body,He=void 0!==We.withCredentials?We.withCredentials:this.withCredentials,At=void 0!==We.reportProgress?We.reportProgress:this.reportProgress;let pt=We.headers||this.headers,yn=We.params||this.params;const $e=null!==(rt=We.context)&&void 0!==rt?rt:this.context;return void 0!==We.setHeaders&&(pt=Object.keys(We.setHeaders).reduce((Ve,fe)=>Ve.set(fe,We.setHeaders[fe]),pt)),We.setParams&&(yn=Object.keys(We.setParams).reduce((Ve,fe)=>Ve.set(fe,We.setParams[fe]),yn)),new H(Xt,Lt,me,{params:yn,headers:pt,context:$e,reportProgress:At,responseType:_e,withCredentials:He})}}var De=(()=>((De=De||{})[De.Sent=0]="Sent",De[De.UploadProgress=1]="UploadProgress",De[De.ResponseHeader=2]="ResponseHeader",De[De.DownloadProgress=3]="DownloadProgress",De[De.Response=4]="Response",De[De.User=5]="User",De))();class it{constructor(We,rt=200,Xt="OK"){this.headers=We.headers||new pe,this.status=void 0!==We.status?We.status:rt,this.statusText=We.statusText||Xt,this.url=We.url||null,this.ok=this.status>=200&&this.status<300}}class Be extends it{constructor(We={}){super(We),this.type=De.ResponseHeader}clone(We={}){return new Be({headers:We.headers||this.headers,status:void 0!==We.status?We.status:this.status,statusText:We.statusText||this.statusText,url:We.url||this.url||void 0})}}class _t extends it{constructor(We={}){super(We),this.type=De.Response,this.body=void 0!==We.body?We.body:null}clone(We={}){return new _t({body:void 0!==We.body?We.body:this.body,headers:We.headers||this.headers,status:void 0!==We.status?We.status:this.status,statusText:We.statusText||this.statusText,url:We.url||this.url||void 0})}}class yt extends it{constructor(We){super(We,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${We.url||"(unknown url)"}`:`Http failure response for ${We.url||"(unknown url)"}: ${We.status} ${We.statusText}`,this.error=We.error||null}}function ot($t,We){return{body:We,headers:$t.headers,context:$t.context,observe:$t.observe,params:$t.params,reportProgress:$t.reportProgress,responseType:$t.responseType,withCredentials:$t.withCredentials}}let at=(()=>{class $t{constructor(rt){this.handler=rt}request(rt,Xt,Lt={}){let _e;if(rt instanceof H)_e=rt;else{let At,pt;At=Lt.headers instanceof pe?Lt.headers:new pe(Lt.headers),Lt.params&&(pt=Lt.params instanceof Ie?Lt.params:new Ie({fromObject:Lt.params})),_e=new H(rt,Xt,void 0!==Lt.body?Lt.body:null,{headers:At,context:Lt.context,params:pt,reportProgress:Lt.reportProgress,responseType:Lt.responseType||"json",withCredentials:Lt.withCredentials})}const me=(0,G.of)(_e).pipe((0,Pe.b)(At=>this.handler.handle(At)));if(rt instanceof H||"events"===Lt.observe)return me;const He=me.pipe((0,Fe.h)(At=>At instanceof _t));switch(Lt.observe||"body"){case"body":switch(_e.responseType){case"arraybuffer":return He.pipe((0,ge.U)(At=>{if(null!==At.body&&!(At.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return At.body}));case"blob":return He.pipe((0,ge.U)(At=>{if(null!==At.body&&!(At.body instanceof Blob))throw new Error("Response is not a Blob.");return At.body}));case"text":return He.pipe((0,ge.U)(At=>{if(null!==At.body&&"string"!=typeof At.body)throw new Error("Response is not a string.");return At.body}));default:return He.pipe((0,ge.U)(At=>At.body))}case"response":return He;default:throw new Error(`Unreachable: unhandled observe type ${Lt.observe}}`)}}delete(rt,Xt={}){return this.request("DELETE",rt,Xt)}get(rt,Xt={}){return this.request("GET",rt,Xt)}head(rt,Xt={}){return this.request("HEAD",rt,Xt)}jsonp(rt,Xt){return this.request("JSONP",rt,{params:(new Ie).append(Xt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(rt,Xt={}){return this.request("OPTIONS",rt,Xt)}patch(rt,Xt,Lt={}){return this.request("PATCH",rt,ot(Lt,Xt))}post(rt,Xt,Lt={}){return this.request("POST",rt,ot(Lt,Xt))}put(rt,Xt,Lt={}){return this.request("PUT",rt,ot(Lt,Xt))}}return $t.\u0275fac=function(rt){return new(rt||$t)(q.LFG(Se))},$t.\u0275prov=q.Yz7({token:$t,factory:$t.\u0275fac}),$t})();function Xe($t,We){return We($t)}function Ae($t,We){return(rt,Xt)=>We.intercept(rt,{handle:Lt=>$t(Lt,Xt)})}const we=new q.OlP("HTTP_INTERCEPTORS"),gt=new q.OlP("HTTP_INTERCEPTOR_FNS");function et(){let $t=null;return(We,rt)=>{var Xt;return null===$t&&($t=(null!==(Xt=(0,q.f3M)(we,{optional:!0}))&&void 0!==Xt?Xt:[]).reduceRight(Ae,Xe)),$t(We,rt)}}let Qe=(()=>{class $t extends Se{constructor(rt,Xt){super(),this.backend=rt,this.injector=Xt,this.chain=null}handle(rt){if(null===this.chain){const Xt=Array.from(new Set(this.injector.get(gt)));this.chain=Xt.reduceRight((Lt,_e)=>function Me($t,We,rt){return(Xt,Lt)=>rt.runInContext(()=>We(Xt,_e=>$t(_e,Lt)))}(Lt,_e,this.injector),Xe)}return this.chain(rt,Xt=>this.backend.handle(Xt))}}return $t.\u0275fac=function(rt){return new(rt||$t)(q.LFG(Ue),q.LFG(q.lqb))},$t.\u0275prov=q.Yz7({token:$t,factory:$t.\u0275fac}),$t})();const Cr=/^\)\]\}',?\n/;let Un=(()=>{class $t{constructor(rt){this.xhrFactory=rt}handle(rt){if("JSONP"===rt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Te.y(Xt=>{const Lt=this.xhrFactory.build();if(Lt.open(rt.method,rt.urlWithParams),rt.withCredentials&&(Lt.withCredentials=!0),rt.headers.forEach((fe,Ye)=>Lt.setRequestHeader(fe,Ye.join(","))),rt.headers.has("Accept")||Lt.setRequestHeader("Accept","application/json, text/plain, */*"),!rt.headers.has("Content-Type")){const fe=rt.detectContentTypeHeader();null!==fe&&Lt.setRequestHeader("Content-Type",fe)}if(rt.responseType){const fe=rt.responseType.toLowerCase();Lt.responseType="json"!==fe?fe:"text"}const _e=rt.serializeBody();let me=null;const He=()=>{if(null!==me)return me;const fe=Lt.statusText||"OK",Ye=new pe(Lt.getAllResponseHeaders()),kt=function Pr($t){return"responseURL"in $t&&$t.responseURL?$t.responseURL:/^X-Request-URL:/m.test($t.getAllResponseHeaders())?$t.getResponseHeader("X-Request-URL"):null}(Lt)||rt.url;return me=new Be({headers:Ye,status:Lt.status,statusText:fe,url:kt}),me},At=()=>{let{headers:fe,status:Ye,statusText:kt,url:le}=He(),ye=null;204!==Ye&&(ye=typeof Lt.response>"u"?Lt.responseText:Lt.response),0===Ye&&(Ye=ye?200:0);let St=Ye>=200&&Ye<300;if("json"===rt.responseType&&"string"==typeof ye){const vt=ye;ye=ye.replace(Cr,"");try{ye=""!==ye?JSON.parse(ye):null}catch(Ut){ye=vt,St&&(St=!1,ye={error:Ut,text:ye})}}St?(Xt.next(new _t({body:ye,headers:fe,status:Ye,statusText:kt,url:le||void 0})),Xt.complete()):Xt.error(new yt({error:ye,headers:fe,status:Ye,statusText:kt,url:le||void 0}))},pt=fe=>{const{url:Ye}=He(),kt=new yt({error:fe,status:Lt.status||0,statusText:Lt.statusText||"Unknown Error",url:Ye||void 0});Xt.error(kt)};let yn=!1;const $e=fe=>{yn||(Xt.next(He()),yn=!0);let Ye={type:De.DownloadProgress,loaded:fe.loaded};fe.lengthComputable&&(Ye.total=fe.total),"text"===rt.responseType&&Lt.responseText&&(Ye.partialText=Lt.responseText),Xt.next(Ye)},Ve=fe=>{let Ye={type:De.UploadProgress,loaded:fe.loaded};fe.lengthComputable&&(Ye.total=fe.total),Xt.next(Ye)};return Lt.addEventListener("load",At),Lt.addEventListener("error",pt),Lt.addEventListener("timeout",pt),Lt.addEventListener("abort",pt),rt.reportProgress&&(Lt.addEventListener("progress",$e),null!==_e&&Lt.upload&&Lt.upload.addEventListener("progress",Ve)),Lt.send(_e),Xt.next({type:De.Sent}),()=>{Lt.removeEventListener("error",pt),Lt.removeEventListener("abort",pt),Lt.removeEventListener("load",At),Lt.removeEventListener("timeout",pt),rt.reportProgress&&(Lt.removeEventListener("progress",$e),null!==_e&&Lt.upload&&Lt.upload.removeEventListener("progress",Ve)),Lt.readyState!==Lt.DONE&&Lt.abort()}})}}return $t.\u0275fac=function(rt){return new(rt||$t)(q.LFG(c.JF))},$t.\u0275prov=q.Yz7({token:$t,factory:$t.\u0275fac}),$t})();const tr=new q.OlP("XSRF_ENABLED"),ui=new q.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Nr=new q.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Dr{}let Fr=(()=>{class $t{constructor(rt,Xt,Lt){this.doc=rt,this.platform=Xt,this.cookieName=Lt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const rt=this.doc.cookie||"";return rt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,c.Mx)(rt,this.cookieName),this.lastCookieString=rt),this.lastToken}}return $t.\u0275fac=function(rt){return new(rt||$t)(q.LFG(c.K0),q.LFG(q.Lbi),q.LFG(ui))},$t.\u0275prov=q.Yz7({token:$t,factory:$t.\u0275fac}),$t})();function Fn($t,We){const rt=$t.url.toLowerCase();if(!(0,q.f3M)(tr)||"GET"===$t.method||"HEAD"===$t.method||rt.startsWith("http://")||rt.startsWith("https://"))return We($t);const Xt=(0,q.f3M)(Dr).getToken(),Lt=(0,q.f3M)(Nr);return null!=Xt&&!$t.headers.has(Lt)&&($t=$t.clone({headers:$t.headers.set(Lt,Xt)})),We($t)}var mn=(()=>((mn=mn||{})[mn.Interceptors=0]="Interceptors",mn[mn.LegacyInterceptors=1]="LegacyInterceptors",mn[mn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",mn[mn.NoXsrfProtection=3]="NoXsrfProtection",mn[mn.JsonpSupport=4]="JsonpSupport",mn[mn.RequestsMadeViaParent=5]="RequestsMadeViaParent",mn))();function Wn($t,We){return{\u0275kind:$t,\u0275providers:We}}function Lr(...$t){const We=[at,Un,Qe,{provide:Se,useExisting:Qe},{provide:Ue,useExisting:Un},{provide:gt,useValue:Fn,multi:!0},{provide:tr,useValue:!0},{provide:Dr,useClass:Fr}];for(const rt of $t)We.push(...rt.\u0275providers);return(0,q.MR2)(We)}const _r=new q.OlP("LEGACY_INTERCEPTOR_FN");let pi=(()=>{class $t{}return $t.\u0275fac=function(rt){return new(rt||$t)},$t.\u0275mod=q.oAB({type:$t}),$t.\u0275inj=q.cJS({providers:[Lr(Wn(mn.LegacyInterceptors,[{provide:_r,useFactory:et},{provide:gt,useExisting:_r,multi:!0}]))]}),$t})()},4650:(_n,It,L)=>{"use strict";L.d(It,{$8M:()=>ta,$WT:()=>ni,$Z:()=>Xf,AFp:()=>VE,ALo:()=>d,AaK:()=>Se,AsE:()=>Py,BQk:()=>$c,CHM:()=>T,CRH:()=>vE,CZH:()=>m_,CqO:()=>cv,D6c:()=>Mw,DdM:()=>a_,EJc:()=>WI,EiD:()=>yd,EpF:()=>av,F$t:()=>dm,F4k:()=>lv,FYo:()=>Cd,FiY:()=>Ai,G48:()=>fw,Gf:()=>mE,GfV:()=>bd,GkF:()=>_g,Gpc:()=>re,HOy:()=>Av,Hsn:()=>py,JOm:()=>bi,JVY:()=>iu,JZr:()=>Pt,KtG:()=>K,L6k:()=>kf,LAX:()=>hs,LFG:()=>gr,LSH:()=>Ea,Lbi:()=>HI,Lck:()=>n_,MAs:()=>ov,MMx:()=>Ky,MR2:()=>Bp,NdJ:()=>Ig,OlP:()=>Ar,Oqu:()=>bg,P3R:()=>ih,PXZ:()=>aw,Q6J:()=>gg,QGY:()=>Eg,Qsj:()=>Hp,R0b:()=>id,RDi:()=>Qd,Rgc:()=>ki,SBq:()=>Za,Sil:()=>qI,Suo:()=>yE,TTD:()=>Fs,TgZ:()=>Bd,W1O:()=>wE,X6Q:()=>hw,XFs:()=>nn,Xpm:()=>vt,Xts:()=>$p,Y36:()=>cu,YKP:()=>gl,YNc:()=>sv,Yjl:()=>Kn,Yz7:()=>Jt,Z0I:()=>Gn,ZZ4:()=>Z0,_Bn:()=>Rh,_UZ:()=>vg,_Vd:()=>cc,_c5:()=>xw,_uU:()=>Sv,aQg:()=>X0,c2e:()=>zI,cJS:()=>Tt,cg1:()=>wm,dDg:()=>rw,dqk:()=>Fn,eBb:()=>Pa,eFA:()=>eI,eJc:()=>k0,ekj:()=>Ay,eoX:()=>ZE,f3M:()=>$t,g9A:()=>HE,h0i:()=>Qa,hGG:()=>Rw,hij:()=>_m,iGM:()=>gE,ifc:()=>pt,ip1:()=>UE,jDz:()=>Af,kL8:()=>Cm,lG2:()=>Sn,lcZ:()=>P,lnq:()=>Ps,lqb:()=>kc,lri:()=>qE,mCW:()=>ku,n5z:()=>za,oAB:()=>Ct,oxw:()=>um,pB0:()=>Ou,q3G:()=>Es,q4F:()=>dh,qLn:()=>ul,qOj:()=>dg,qZA:()=>yg,qbA:()=>Xy,qzn:()=>ru,rWj:()=>YE,sBO:()=>pw,s_b:()=>Ba,soG:()=>y_,tb:()=>QE,tp0:()=>_s,uIk:()=>Ts,vHH:()=>be,vpe:()=>Rn,wAp:()=>kr,xi3:()=>z,xp6:()=>Vu,ynx:()=>yp,z2F:()=>v_,z3N:()=>aa,zSh:()=>Vp,zs3:()=>Wu});var c=L(958),q=L(727),G=L(9751),Te=L(6451),Pe=L(3099);function Fe(n){for(let i in n)if(n[i]===Fe)return i;throw Error("Could not find renamed property on target object.")}function ge(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Se(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Se).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Ue(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const pe=Fe({__forward_ref__:Fe});function re(n){return n.__forward_ref__=re,n.toString=function(){return Se(this())},n}function de(n){return Oe(n)?n():n}function Oe(n){return"function"==typeof n&&n.hasOwnProperty(pe)&&n.__forward_ref__===re}function Ge(n){return n&&!!n.\u0275providers}const Pt="https://g.co/ng/security#xss";class be extends Error{constructor(i,o){super(Ie(i,o)),this.code=i}}function Ie(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function he(n){return"string"==typeof n?n:null==n?"":String(n)}function Le(n,i){throw new be(-201,!1)}function gt(n,i){null==n&&function et(n,i,o,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${o} ${h} ${i} <=Actual]`))}(i,n,null,"!=")}function Jt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hn(n){return ar(n,Cr)||ar(n,Un)}function Gn(n){return null!==Hn(n)}function ar(n,i){return n.hasOwnProperty(i)?n[i]:null}function hr(n){return n&&(n.hasOwnProperty(Pr)||n.hasOwnProperty(tr))?n[Pr]:null}const Cr=Fe({\u0275prov:Fe}),Pr=Fe({\u0275inj:Fe}),Un=Fe({ngInjectableDef:Fe}),tr=Fe({ngInjectorDef:Fe});var nn=(()=>((nn=nn||{})[nn.Default=0]="Default",nn[nn.Host=1]="Host",nn[nn.Self=2]="Self",nn[nn.SkipSelf=4]="SkipSelf",nn[nn.Optional=8]="Optional",nn))();let ui;function Nr(n){const i=ui;return ui=n,i}function Dr(n,i,o){const h=Hn(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:o&nn.Optional?null:void 0!==i?i:void Le(Se(n))}const Fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lr={},rn="__NG_DI_FLAG__",_r="ngTempTokenPath",Ir="ngTokenPath",oi=/\n/gm,xr="\u0275",ti="__source";let Dn;function ai(n){const i=Dn;return Dn=n,i}function pi(n,i=nn.Default){if(void 0===Dn)throw new be(-203,!1);return null===Dn?Dr(n,void 0,i):Dn.get(n,i&nn.Optional?null:void 0,i)}function gr(n,i=nn.Default){return(function ei(){return ui}()||pi)(de(n),i)}function $t(n,i=nn.Default){return gr(n,We(i))}function We(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rt(n){const i=[];for(let o=0;o<n.length;o++){const h=de(n[o]);if(Array.isArray(h)){if(0===h.length)throw new be(900,!1);let p,E=nn.Default;for(let S=0;S<h.length;S++){const k=h[S],B=Lt(k);"number"==typeof B?-1===B?p=k.token:E|=B:p=k}i.push(gr(p,E))}else i.push(gr(h))}return i}function Xt(n,i){return n[rn]=i,n.prototype[rn]=i,n}function Lt(n){return n[rn]}function He(n){return{toString:n}.toString()}var At=(()=>((At=At||{})[At.OnPush=0]="OnPush",At[At.Default=1]="Default",At))(),pt=(()=>{return(n=pt||(pt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",pt;var n})();const yn={},$e=[],Ve=Fe({\u0275cmp:Fe}),fe=Fe({\u0275dir:Fe}),Ye=Fe({\u0275pipe:Fe}),kt=Fe({\u0275mod:Fe}),le=Fe({\u0275fac:Fe}),ye=Fe({__NG_ELEMENT_ID__:Fe});let St=0;function vt(n){return He(()=>{const i=li(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===At.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||pt.Emulated,id:"c"+St++,styles:n.styles||$e,_:null,schemas:n.schemas||null,tView:null};Pi(o);const h=n.dependencies;return o.directiveDefs=Ji(h,!1),o.pipeDefs=Ji(h,!0),o})}function je(n){return Pn(n)||cr(n)}function Ne(n){return null!==n}function Ct(n){return He(()=>({type:n.type,bootstrap:n.bootstrap||$e,declarations:n.declarations||$e,imports:n.imports||$e,exports:n.exports||$e,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function un(n,i){if(null==n)return yn;const o={};for(const h in n)if(n.hasOwnProperty(h)){let p=n[h],E=p;Array.isArray(p)&&(E=p[1],p=p[0]),o[p]=h,i&&(i[p]=E)}return o}function Sn(n){return He(()=>{const i=li(n);return Pi(i),i})}function Kn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Pn(n){return n[Ve]||null}function cr(n){return n[fe]||null}function Qn(n){return n[Ye]||null}function ni(n){const i=Pn(n)||cr(n)||Qn(n);return null!==i&&i.standalone}function mi(n,i){const o=n[kt]||null;if(!o&&!0===i)throw new Error(`Type ${Se(n)} does not have '\u0275mod' property.`);return o}function li(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||$e,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:un(n.inputs,i),outputs:un(n.outputs)}}function Pi(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function Ji(n,i){if(!n)return null;const o=i?Qn:je;return()=>("function"==typeof n?n():n).map(h=>o(h)).filter(Ne)}const Zr=0,An=1,ir=2,Xr=3,Tr=4,Wi=5,te=6,Ee=7,tt=8,bt=9,Ht=10,ce=11,nt=12,Et=13,qt=14,Kt=15,pn=16,kn=17,qn=18,Vr=19,mr=20,Bi=21,fr=22,mt=1,lt=2,xt=7,Yt=8,gn=9,$n=10;function dr(n){return Array.isArray(n)&&"object"==typeof n[mt]}function Rr(n){return Array.isArray(n)&&!0===n[mt]}function as(n){return 0!=(4&n.flags)}function so(n){return n.componentOffset>-1}function Ni(n){return 1==(1&n.flags)}function Ki(n){return!!n.template}function cs(n){return 0!=(256&n[ir])}function ps(n,i){return n.hasOwnProperty(le)?n[le]:null}class Io{constructor(i,o,h){this.previousValue=i,this.currentValue=o,this.firstChange=h}isFirstChange(){return this.firstChange}}function Fs(){return co}function co(n){return n.type.prototype.ngOnChanges&&(n.setInput=ns),wa}function wa(){const n=wo(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===yn)n.previous=i;else for(let h in i)o[h]=i[h];n.current=null,this.ngOnChanges(i)}}function ns(n,i,o,h){const p=this.declaredInputs[o],E=wo(n)||function Ja(n,i){return n[da]=i}(n,{previous:yn,current:null}),S=E.current||(E.current={}),k=E.previous,B=k[p];S[p]=new Io(B&&B.currentValue,i,k===yn),n[h]=i}Fs.ngInherit=!0;const da="__ngSimpleChanges__";function wo(n){return n[da]||null}const Di=function(n,i,o){};function Ti(n){for(;Array.isArray(n);)n=n[Zr];return n}function Zs(n,i){return Ti(i[n])}function Ui(n,i){return Ti(i[n.index])}function uo(n,i){return n.data[i]}function $s(n,i){return n[i]}function Gr(n,i){const o=i[n];return dr(o)?o:o[Zr]}function rs(n){return 64==(64&n[ir])}function gs(n,i){return null==i?null:n[i]}function Yo(n){n[qn]=0}function Co(n,i){n[Wi]+=i;let o=n,h=n[Xr];for(;null!==h&&(1===i&&1===o[Wi]||-1===i&&0===o[Wi]);)h[Wi]+=i,o=h,h=h[Xr]}const Er={lFrame:ko(null),bindingsEnabled:!0};function xi(){return Er.bindingsEnabled}function I(){return Er.lFrame.lView}function f(){return Er.lFrame.tView}function T(n){return Er.lFrame.contextLView=n,n[tt]}function K(n){return Er.lFrame.contextLView=null,n}function ze(){let n=an();for(;null!==n&&64===n.type;)n=n.parent;return n}function an(){return Er.lFrame.currentTNode}function Xn(n,i){const o=Er.lFrame;o.currentTNode=n,o.isParent=i}function Sr(){return Er.lFrame.isParent}function di(){Er.lFrame.isParent=!1}function wi(){const n=Er.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Fi(){return Er.lFrame.bindingIndex}function Qo(){return Er.lFrame.bindingIndex++}function Vs(n){const i=Er.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function ql(n,i){const o=Er.lFrame;o.bindingIndex=o.bindingRootIndex=n,Po(i)}function Po(n){Er.lFrame.currentDirectiveIndex=n}function ba(){return Er.lFrame.currentQueryIndex}function Oo(n){Er.lFrame.currentQueryIndex=n}function tl(n){const i=n[An];return 2===i.type?i.declTNode:1===i.type?n[te]:null}function fa(n,i,o){if(o&nn.SkipSelf){let p=i,E=n;for(;!(p=p.parent,null!==p||o&nn.Host||(p=tl(E),null===p||(E=E[Kt],10&p.type))););if(null===p)return!1;i=p,n=E}const h=Er.lFrame=ja();return h.currentTNode=i,h.lView=n,!0}function Da(n){const i=ja(),o=n[An];Er.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ja(){const n=Er.lFrame,i=null===n?null:n.child;return null===i?ko(n):i}function ko(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Qs(){const n=Er.lFrame;return Er.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Jo=Qs;function Ta(){const n=Qs();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yi(){return Er.lFrame.selectedIndex}function Ri(n){Er.lFrame.selectedIndex=n}function Hr(){const n=Er.lFrame;return uo(n.tView,n.selectedIndex)}function Zl(n,i){for(let o=i.directiveStart,h=i.directiveEnd;o<h;o++){const E=n.data[o].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:k,ngAfterViewInit:B,ngAfterViewChecked:Z,ngOnDestroy:oe}=E;S&&(n.contentHooks||(n.contentHooks=[])).push(-o,S),k&&((n.contentHooks||(n.contentHooks=[])).push(o,k),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,k)),B&&(n.viewHooks||(n.viewHooks=[])).push(-o,B),Z&&((n.viewHooks||(n.viewHooks=[])).push(o,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Z)),null!=oe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,oe)}}function pa(n,i,o){$(n,i,3,o)}function F(n,i,o,h){(3&n[ir])===o&&$(n,i,o,h)}function Y(n,i){let o=n[ir];(3&o)===i&&(o&=2047,o+=1,n[ir]=o)}function $(n,i,o,h){const E=null!=h?h:-1,S=i.length-1;let k=0;for(let B=void 0!==h?65535&n[qn]:0;B<S;B++)if("number"==typeof i[B+1]){if(k=i[B],null!=h&&k>=h)break}else i[B]<0&&(n[qn]+=65536),(k<E||-1==E)&&(ne(n,o,i,B),n[qn]=(4294901760&n[qn])+B+2),B++}function ne(n,i,o,h){const p=o[h]<0,E=o[h+1],k=n[p?-o[h]:o[h]];if(p){if(n[ir]>>11<n[qn]>>16&&(3&n[ir])===i){n[ir]+=2048,Di(4,k,E);try{E.call(k)}finally{Di(5,k,E)}}}else{Di(4,k,E);try{E.call(k)}finally{Di(5,k,E)}}}const Re=-1;class Wt{constructor(i,o,h){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=h}}function Vi(n,i,o){let h=0;for(;h<o.length;){const p=o[h];if("number"==typeof p){if(0!==p)break;h++;const E=o[h++],S=o[h++],k=o[h++];n.setAttribute(i,S,k,E)}else{const E=p,S=o[++h];gi(E)?n.setProperty(i,E,S):n.setAttribute(i,E,S),h++}}return h}function ga(n){return 3===n||4===n||6===n}function gi(n){return 64===n.charCodeAt(0)}function bs(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let h=0;h<i.length;h++){const p=i[h];"number"==typeof p?o=p:0===o||Oi(n,o,p,null,-1===o||2===o?i[++h]:null)}}return n}function Oi(n,i,o,h,p){let E=0,S=n.length;if(-1===i)S=-1;else for(;E<n.length;){const k=n[E++];if("number"==typeof k){if(k===i){S=-1;break}if(k>i){S=E-1;break}}}for(;E<n.length;){const k=n[E];if("number"==typeof k)break;if(k===o){if(null===h)return void(null!==p&&(n[E+1]=p));if(h===n[E+1])return void(n[E+2]=p)}E++,null!==h&&E++,null!==p&&E++}-1!==S&&(n.splice(S,0,i),E=S+1),n.splice(E++,0,o),null!==h&&n.splice(E++,0,h),null!==p&&n.splice(E++,0,p)}function po(n){return n!==Re}function Lo(n){return 32767&n}function Sa(n,i){let o=function nl(n){return n>>16}(n),h=i;for(;o>0;)h=h[Kt],o--;return h}let vl=!0;function rl(n){const i=vl;return vl=n,i}const pc=255,Xi=5;let il=0;const is={};function mc(n,i){const o=ss(n,i);if(-1!==o)return o;const h=i[An];h.firstCreatePass&&(n.injectorIndex=i.length,hn(h.data,n),hn(i,null),hn(h.blueprint,null));const p=fi(n,i),E=n.injectorIndex;if(po(p)){const S=Lo(p),k=Sa(p,i),B=k[An].data;for(let Z=0;Z<8;Z++)i[E+Z]=k[S+Z]|B[S+Z]}return i[E+8]=p,E}function hn(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ss(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function fi(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,h=null,p=i;for(;null!==p;){if(h=vc(p),null===h)return Re;if(o++,p=p[Kt],-1!==h.injectorIndex)return h.injectorIndex|o<<16}return Re}function _l(n,i,o){!function gc(n,i,o){let h;"string"==typeof o?h=o.charCodeAt(0)||0:o.hasOwnProperty(ye)&&(h=o[ye]),null==h&&(h=o[ye]=il++);const p=h&pc;i.data[n+(p>>Xi)]|=1<<p}(n,i,o)}function or(n,i,o){if(o&nn.Optional||void 0!==n)return n;Le()}function yc(n,i,o,h){if(o&nn.Optional&&void 0===h&&(h=null),!(o&(nn.Self|nn.Host))){const p=n[bt],E=Nr(void 0);try{return p?p.get(i,h,o&nn.Optional):Dr(i,h,o&nn.Optional)}finally{Nr(E)}}return or(h,0,o)}function Nn(n,i,o,h=nn.Default,p){if(null!==n){if(1024&i[ir]){const S=function bo(n,i,o,h,p){let E=n,S=i;for(;null!==E&&null!==S&&1024&S[ir]&&!(256&S[ir]);){const k=Bt(E,S,o,h|nn.Self,is);if(k!==is)return k;let B=E.parent;if(!B){const Z=S[Bi];if(Z){const oe=Z.get(o,is,h);if(oe!==is)return oe}B=vc(S),S=S[Kt]}E=B}return p}(n,i,o,h,is);if(S!==is)return S}const E=Bt(n,i,o,h,is);if(E!==is)return E}return yc(i,o,h,p)}function Bt(n,i,o,h,p){const E=function gu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(ye)?n[ye]:void 0;return"number"==typeof i?i>=0?i&pc:Vc:i}(o);if("function"==typeof E){if(!fa(i,n,h))return h&nn.Host?or(p,0,h):yc(i,o,h,p);try{const S=E(h);if(null!=S||h&nn.Optional)return S;Le()}finally{Jo()}}else if("number"==typeof E){let S=null,k=ss(n,i),B=Re,Z=h&nn.Host?i[pn][te]:null;for((-1===k||h&nn.SkipSelf)&&(B=-1===k?fi(n,i):i[k+8],B!==Re&&Xl(h,!1)?(S=i[An],k=Lo(B),i=Sa(B,i)):k=-1);-1!==k;){const oe=i[An];if(Ha(E,k,oe.data)){const xe=dn(k,i,o,S,h,Z);if(xe!==is)return xe}B=i[k+8],B!==Re&&Xl(h,i[An].data[k+8]===Z)&&Ha(E,k,i)?(S=oe,k=Lo(B),i=Sa(B,i)):k=-1}}return p}function dn(n,i,o,h,p,E){const S=i[An],k=S.data[n+8],oe=ji(k,S,o,null==h?so(k)&&vl:h!=S&&0!=(3&k.type),p&nn.Host&&E===k);return null!==oe?ea(i,S,oe,k):is}function ji(n,i,o,h,p){const E=n.providerIndexes,S=i.data,k=1048575&E,B=n.directiveStart,oe=E>>20,wt=p?k+oe:n.directiveEnd;for(let Vt=h?k:k+oe;Vt<wt;Vt++){const fn=S[Vt];if(Vt<B&&o===fn||Vt>=B&&fn.type===o)return Vt}if(p){const Vt=S[B];if(Vt&&Ki(Vt)&&Vt.type===o)return B}return null}function ea(n,i,o,h){let p=n[o];const E=i.data;if(function en(n){return n instanceof Wt}(p)){const S=p;S.resolving&&function ft(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new be(-200,`Circular dependency in DI detected for ${n}${o}`)}(function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():he(n)}(E[o]));const k=rl(S.canSeeViewProviders);S.resolving=!0;const B=S.injectImpl?Nr(S.injectImpl):null;fa(n,h,nn.Default);try{p=n[o]=S.factory(void 0,E,n,h),i.firstCreatePass&&o>=h.directiveStart&&function hi(n,i,o){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:E}=i.type.prototype;if(h){const S=co(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,S),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,S)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),E&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,E),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,E))}(o,E[o],i)}finally{null!==B&&Nr(B),rl(k),S.resolving=!1,Jo()}}return p}function Ha(n,i,o){return!!(o[i+(n>>Xi)]&1<<n)}function Xl(n,i){return!(n&nn.Self||n&nn.Host&&i)}class El{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,h){return Nn(this._tNode,this._lView,i,We(h),o)}}function Vc(){return new El(ze(),I())}function za(n){return He(()=>{const i=n.prototype.constructor,o=i[le]||Il(i),h=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==h;){const E=p[le]||Il(p);if(E&&E!==o)return E;p=Object.getPrototypeOf(p)}return E=>new E})}function Il(n){return Oe(n)?()=>{const i=Il(de(n));return i&&i()}:ps(n)}function vc(n){const i=n[An],o=i.type;return 2===o?i.declTNode:1===o?n[te]:null}function ta(n){return function Zn(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const h=o.length;let p=0;for(;p<h;){const E=o[p];if(ga(E))break;if(0===E)p+=2;else if("number"==typeof E)for(p++;p<h&&"string"==typeof o[p];)p++;else{if(E===i)return o[p+1];p+=2}}}return null}(ze(),n)}const Js="__parameters__";function go(n,i,o){return He(()=>{const h=function nr(n){return function(...o){if(n){const h=n(...o);for(const p in h)this[p]=h[p]}}}(i);function p(...E){if(this instanceof p)return h.apply(this,E),this;const S=new p(...E);return k.annotation=S,k;function k(B,Z,oe){const xe=B.hasOwnProperty(Js)?B[Js]:Object.defineProperty(B,Js,{value:[]})[Js];for(;xe.length<=oe;)xe.push(null);return(xe[oe]=xe[oe]||[]).push(S),B}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Ar{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Jt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function na(n,i){n.forEach(o=>Array.isArray(o)?na(o,i):i(o))}function Ft(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Ra(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Br(n,i){const o=[];for(let h=0;h<n;h++)o.push(i);return o}function A(n,i,o){let h=b(n,i);return h>=0?n[1|h]=o:(h=~h,function js(n,i,o,h){let p=n.length;if(p==i)n.push(o,h);else if(1===p)n.push(h,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>i;)n[p]=n[p-2],p--;n[i]=o,n[i+1]=h}}(n,h,i,o)),h}function R(n,i){const o=b(n,i);if(o>=0)return n[1|o]}function b(n,i){return function j(n,i,o){let h=0,p=n.length>>o;for(;p!==h;){const E=h+(p-h>>1),S=n[E<<o];if(i===S)return E<<o;S>i?p=E:h=E+1}return~(p<<o)}(n,i,1)}const Ai=Xt(go("Optional"),8),_s=Xt(go("SkipSelf"),4);var bi=(()=>((bi=bi||{})[bi.Important=1]="Important",bi[bi.DashCase=2]="DashCase",bi))();const Vo=new Map;let nc=0;const Kd="__ngContext__";function ro(n,i){dr(i)?(n[Kd]=i[mr],function Rf(n){Vo.set(n[mr],n)}(i)):n[Kd]=i}let wu;function Cu(n,i){return wu(n,i)}function ad(n){const i=n[Xr];return Rr(i)?i[Xr]:i}function Mi(n){return Wc(n[Et])}function io(n){return Wc(n[Tr])}function Wc(n){for(;null!==n&&!Rr(n);)n=n[Tr];return n}function Ol(n,i,o,h,p){if(null!=h){let E,S=!1;Rr(h)?E=h:dr(h)&&(S=!0,h=h[Zr]);const k=Ti(h);0===n&&null!==o?null==p?qa(i,o,k):Ii(i,o,k,p||null,!0):1===n&&null!==o?Ii(i,o,k,p||null,!0):2===n?function ud(n,i,o){const h=Sl(n,i);h&&function Tl(n,i,o,h){n.removeChild(i,o,h)}(n,h,i,o)}(i,k,S):3===n&&i.destroyNode(k),null!=E&&function Nl(n,i,o,h,p){const E=o[xt];E!==Ti(o)&&Ol(i,n,h,E,p);for(let k=$n;k<o.length;k++){const B=o[k];Jc(B[An],B,n,i,h,E)}}(i,n,E,o,p)}}function kl(n,i,o){return n.createElement(i,o)}function ld(n,i){const o=n[gn],h=o.indexOf(i),p=i[Xr];512&i[ir]&&(i[ir]&=-513,Co(p,-1)),o.splice(h,1)}function Au(n,i){if(n.length<=$n)return;const o=$n+i,h=n[o];if(h){const p=h[kn];null!==p&&p!==n&&ld(p,h),i>0&&(n[o-1][Tr]=h[Tr]);const E=Ra(n,$n+i);!function Sc(n,i){Jc(n,i,i[ce],2,null,null),i[Zr]=null,i[te]=null}(h[An],h);const S=E[Vr];null!==S&&S.detachView(E[An]),h[Xr]=null,h[Tr]=null,h[ir]&=-65}return h}function xc(n,i){if(!(128&i[ir])){const o=i[ce];o.destroyNode&&Jc(n,i,o,3,null,null),function qc(n){let i=n[Et];if(!i)return Zd(n[An],n);for(;i;){let o=null;if(dr(i))o=i[Et];else{const h=i[$n];h&&(o=h)}if(!o){for(;i&&!i[Tr]&&i!==n;)dr(i)&&Zd(i[An],i),i=i[Xr];null===i&&(i=n),dr(i)&&Zd(i[An],i),o=i&&i[Tr]}i=o}}(i)}}function Zd(n,i){if(!(128&i[ir])){i[ir]&=-65,i[ir]|=128,function _a(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let h=0;h<o.length;h+=2){const p=i[o[h]];if(!(p instanceof Wt)){const E=o[h+1];if(Array.isArray(E))for(let S=0;S<E.length;S+=2){const k=p[E[S]],B=E[S+1];Di(4,k,B);try{B.call(k)}finally{Di(5,k,B)}}else{Di(4,p,E);try{E.call(p)}finally{Di(5,p,E)}}}}}(n,i),function xu(n,i){const o=n.cleanup,h=i[Ee];let p=-1;if(null!==o)for(let E=0;E<o.length-1;E+=2)if("string"==typeof o[E]){const S=o[E+3];S>=0?h[p=S]():h[p=-S].unsubscribe(),E+=2}else{const S=h[p=o[E+1]];o[E].call(S)}if(null!==h){for(let E=p+1;E<h.length;E++)(0,h[E])();i[Ee]=null}}(n,i),1===i[An].type&&i[ce].destroy();const o=i[kn];if(null!==o&&Rr(i[Xr])){o!==i[Xr]&&ld(o,i);const h=i[Vr];null!==h&&h.detachView(n)}!function ic(n){Vo.delete(n[mr])}(i)}}function Rc(n,i,o){return function cd(n,i,o){let h=i;for(;null!==h&&40&h.type;)h=(i=h).parent;if(null===h)return o[Zr];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:E}=n.data[h.directiveStart+p];if(E===pt.None||E===pt.Emulated)return null}return Ui(h,o)}}(n,i.parent,o)}function Ii(n,i,o,h,p){n.insertBefore(i,o,h,p)}function qa(n,i,o){n.appendChild(i,o)}function Yc(n,i,o,h,p){null!==h?Ii(n,i,o,h,p):qa(n,i,o)}function Sl(n,i){return n.parentNode(i)}function Zc(n,i,o){return Ru(n,i,o)}let sa,dd,Mu,fd,Ru=function al(n,i,o){return 40&n.type?Ui(n,o):null};function oc(n,i,o,h){const p=Rc(n,h,i),E=i[ce],k=Zc(h.parent||i[te],h,i);if(null!=p)if(Array.isArray(o))for(let B=0;B<o.length;B++)Yc(E,p,o[B],k,!1);else Yc(E,p,o,k,!1);void 0!==sa&&sa(E,h,i,o,p)}function Xc(n,i){if(null!==i){const o=i.type;if(3&o)return Ui(i,n);if(4&o)return Xd(-1,n[i.index]);if(8&o){const h=i.child;if(null!==h)return Xc(n,h);{const p=n[i.index];return Rr(p)?Xd(-1,p):Ti(p)}}if(32&o)return Cu(i,n)()||Ti(n[i.index]);{const h=ac(n,i);return null!==h?Array.isArray(h)?h[0]:Xc(ad(n[pn]),h):Xc(n,i.next)}}return null}function ac(n,i){return null!==i?n[pn][te].projection[i.projection]:null}function Xd(n,i){const o=$n+n+1;if(o<i.length){const h=i[o],p=h[An].firstChild;if(null!==p)return Xc(h,p)}return i[xt]}function Qc(n,i,o,h,p,E,S){for(;null!=o;){const k=h[o.index],B=o.type;if(S&&0===i&&(k&&ro(Ti(k),h),o.flags|=2),32!=(32&o.flags))if(8&B)Qc(n,i,o.child,h,p,E,!1),Ol(i,n,p,k,E);else if(32&B){const Z=Cu(o,h);let oe;for(;oe=Z();)Ol(i,n,p,oe,E);Ol(i,n,p,k,E)}else 16&B?$h(n,i,h,o,p,E):Ol(i,n,p,k,E);o=S?o.projectionNext:o.next}}function Jc(n,i,o,h,p,E){Qc(o,h,n.firstChild,i,p,E,!1)}function $h(n,i,o,h,p,E){const S=o[pn],B=S[te].projection[h.projection];if(Array.isArray(B))for(let Z=0;Z<B.length;Z++)Ol(i,n,p,B[Z],E);else Qc(n,i,B,S[Xr],p,E,!0)}function Bh(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function eu(n,i,o){const{mergedAttrs:h,classes:p,styles:E}=o;null!==h&&Vi(n,i,h),null!==p&&Bh(n,i,p),null!==E&&function So(n,i,o){n.setAttribute(i,"style",o)}(n,i,E)}function Fl(n){var i;return(null===(i=function ll(){if(void 0===dd&&(dd=null,Fn.trustedTypes))try{dd=Fn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return dd}())||void 0===i?void 0:i.createHTML(n))||n}function Qd(n){Mu=n}function Of(n){var i;return(null===(i=function oa(){if(void 0===fd&&(fd=null,Fn.trustedTypes))try{fd=Fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return fd}())||void 0===i?void 0:i.createScriptURL(n))||n}class $l{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Pt})`}}class Mc extends $l{getTypeName(){return"HTML"}}class nu extends $l{getTypeName(){return"Style"}}class Jd extends $l{getTypeName(){return"Script"}}class Bl extends $l{getTypeName(){return"URL"}}class Al extends $l{getTypeName(){return"ResourceURL"}}function aa(n){return n instanceof $l?n.changingThisBreaksApplicationSecurity:n}function ru(n,i){const o=function Vh(n){return n instanceof $l&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Pt})`)}return o===i}function iu(n){return new Mc(n)}function kf(n){return new nu(n)}function Pa(n){return new Jd(n)}function hs(n){return new Bl(n)}function Ou(n){return new Al(n)}class Ul{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Fl(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class md{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=Fl(i),o}}const Nf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ku(n){return(n=String(n)).match(Nf)?n:"unsafe:"+n}function Ho(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function Ya(...n){const i={};for(const o of n)for(const h in o)o.hasOwnProperty(h)&&(i[h]=!0);return i}const eh=Ho("area,br,col,hr,img,wbr"),Nu=Ho("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),th=Ho("rp,rt"),x=Ya(eh,Ya(Nu,Ho("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ya(th,Ho("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ya(th,Nu)),W=Ho("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dt=Ya(W,Ho("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ho("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zt=Ho("script,style,template");class Mn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,h=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?h=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,h&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let p=this.checkClobberedElement(o,o.nextSibling);if(p){o=p;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!x.hasOwnProperty(o))return this.sanitizedSomething=!0,!Zt.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const h=i.attributes;for(let p=0;p<h.length;p++){const E=h.item(p),S=E.name,k=S.toLowerCase();if(!Dt.hasOwnProperty(k)){this.sanitizedSomething=!0;continue}let B=E.value;W[k]&&(B=ku(B)),this.buf.push(" ",S,'="',Gi(B),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();x.hasOwnProperty(o)&&!eh.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(Gi(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zn=/([^\#-~ |!])/g;function Gi(n){return n.replace(/&/g,"&amp;").replace(er,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(zn,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ao;function yd(n,i){let o=null;try{Ao=Ao||function gd(n){const i=new md(n);return function su(){try{return!!(new window.DOMParser).parseFromString(Fl(""),"text/html")}catch(n){return!1}}()?new Ul(i):i}(n);let h=i?String(i):"";o=Ao.getInertBodyElement(h);let p=5,E=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=E,E=o.innerHTML,o=Ao.getInertBodyElement(h)}while(h!==E);return Fl((new Mn).sanitizeChildren(vd(o)||o))}finally{if(o){const h=vd(o)||o;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function vd(n){return"content"in n&&function nh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Es=(()=>((Es=Es||{})[Es.NONE=0]="NONE",Es[Es.HTML=1]="HTML",Es[Es.STYLE=2]="STYLE",Es[Es.SCRIPT=3]="SCRIPT",Es[Es.URL=4]="URL",Es[Es.RESOURCE_URL=5]="RESOURCE_URL",Es))();function Ea(n){const i=Lu();return i?i.sanitize(Es.URL,n)||"":ru(n,"URL")?aa(n):ku(he(n))}function Vl(n){const i=Lu();if(i)return Of(i.sanitize(Es.RESOURCE_URL,n)||"");if(ru(n,"ResourceURL"))return Of(aa(n));throw new be(904,!1)}function ih(n,i,o){return function Fu(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Vl:Ea}(i,o)(n)}function Lu(){const n=I();return n&&n[nt]}const $p=new Ar("ENVIRONMENT_INITIALIZER"),_d=new Ar("INJECTOR",-1),Hh=new Ar("INJECTOR_DEF_TYPES");class $u{get(i,o=Lr){if(o===Lr){const h=new Error(`NullInjectorError: No provider for ${Se(i)}!`);throw h.name="NullInjectorError",h}return o}}function Bp(n){return{\u0275providers:n}}function zh(...n){return{\u0275providers:Rs(0,n),\u0275fromNgModule:!0}}function Rs(n,...i){const o=[],h=new Set;let p;return na(i,E=>{const S=E;oh(S,o,[],h)&&(p||(p=[]),p.push(S))}),void 0!==p&&sh(p,o),o}function sh(n,i){for(let o=0;o<n.length;o++){const{providers:p}=n[o];jl(p,E=>{i.push(E)})}}function oh(n,i,o,h){if(!(n=de(n)))return!1;let p=null,E=hr(n);const S=!E&&Pn(n);if(E||S){if(S&&!S.standalone)return!1;p=n}else{const B=n.ngModule;if(E=hr(B),!E)return!1;p=B}const k=h.has(p);if(S){if(k)return!1;if(h.add(p),S.dependencies){const B="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const Z of B)oh(Z,i,o,h)}}else{if(!E)return!1;{if(null!=E.imports&&!k){let Z;h.add(p);try{na(E.imports,oe=>{oh(oe,i,o,h)&&(Z||(Z=[]),Z.push(oe))})}finally{}void 0!==Z&&sh(Z,i)}if(!k){const Z=ps(p)||(()=>new p);i.push({provide:p,useFactory:Z,deps:$e},{provide:Hh,useValue:p,multi:!0},{provide:$p,useValue:()=>gr(p),multi:!0})}const B=E.providers;null==B||k||jl(B,oe=>{i.push(oe)})}}return p!==n&&void 0!==n.providers}function jl(n,i){for(let o of n)Ge(o)&&(o=o.\u0275providers),Array.isArray(o)?jl(o,i):i(o)}const Ed=Fe({provide:String,useValue:Fe});function Lf(n){return null!==n&&"object"==typeof n&&Ed in n}function Oc(n){return"function"==typeof n}const Vp=new Ar("Set Injector scope."),Gh={},Wh={};let Kh;function qh(){return void 0===Kh&&(Kh=new $u),Kh}class kc{}class ch extends kc{get destroyed(){return this._destroyed}constructor(i,o,h,p){super(),this.parent=o,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vf(i,S=>this.processProvider(S)),this.records.set(_d,Id(void 0,this)),p.has("environment")&&this.records.set(kc,Id(void 0,this));const E=this.records.get(Vp);null!=E&&"string"==typeof E.value&&this.scopes.add(E.value),this.injectorDefTypes=new Set(this.get(Hh.multi,$e,nn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=ai(this),h=Nr(void 0);try{return i()}finally{ai(o),Nr(h)}}get(i,o=Lr,h=nn.Default){this.assertNotDestroyed(),h=We(h);const p=ai(this),E=Nr(void 0);try{if(!(h&nn.SkipSelf)){let k=this.records.get(i);if(void 0===k){const B=function wd(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ar}(i)&&Hn(i);k=B&&this.injectableDefInScope(B)?Id(uh(i),Gh):null,this.records.set(i,k)}if(null!=k)return this.hydrate(i,k)}return(h&nn.Self?qh():this.parent).get(i,o=h&nn.Optional&&o===Lr?null:o)}catch(S){if("NullInjectorError"===S.name){if((S[_r]=S[_r]||[]).unshift(Se(i)),p)throw S;return function _e(n,i,o,h){const p=n[_r];throw i[ti]&&p.unshift(i[ti]),n.message=function me(n,i,o,h=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==xr?n.slice(2):n;let p=Se(i);if(Array.isArray(i))p=i.map(Se).join(" -> ");else if("object"==typeof i){let E=[];for(let S in i)if(i.hasOwnProperty(S)){let k=i[S];E.push(S+":"+("string"==typeof k?JSON.stringify(k):Se(k)))}p=`{${E.join(", ")}}`}return`${o}${h?"("+h+")":""}[${p}]: ${n.replace(oi,"\n  ")}`}("\n"+n.message,p,o,h),n[Ir]=p,n[_r]=null,n}(S,i,"R3InjectorError",this.source)}throw S}finally{Nr(E),ai(p)}}resolveInjectorInitializers(){const i=ai(this),o=Nr(void 0);try{const h=this.get($p.multi,$e,nn.Self);for(const p of h)p()}finally{ai(i),Nr(o)}}toString(){const i=[],o=this.records;for(const h of o.keys())i.push(Se(h));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(i){let o=Oc(i=de(i))?i:de(i&&i.provide);const h=function Bu(n){return Lf(n)?Id(void 0,n.useValue):Id(Uf(n),Gh)}(i);if(Oc(i)||!0!==i.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=Id(void 0,Gh,!0),p.factory=()=>rt(p.multi),this.records.set(o,p)),o=i,p.multi.push(i)}this.records.set(o,h)}hydrate(i,o){return o.value===Gh&&(o.value=Wh,o.value=o.factory()),"object"==typeof o.value&&o.value&&function lc(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=de(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function uh(n){const i=Hn(n),o=null!==i?i.factory:ps(n);if(null!==o)return o;if(n instanceof Ar)throw new be(204,!1);if(n instanceof Function)return function Bf(n){const i=n.length;if(i>0)throw Br(i,"?"),new be(204,!1);const o=function cn(n){const i=n&&(n[Cr]||n[Un]);return i?(function lr(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new be(204,!1)}function Uf(n,i,o){let h;if(Oc(n)){const p=de(n);return ps(p)||uh(p)}if(Lf(n))h=()=>de(n.useValue);else if(function Up(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...rt(n.deps||[]));else if(function lh(n){return!(!n||!n.useExisting)}(n))h=()=>gr(de(n.useExisting));else{const p=de(n&&(n.useClass||n.provide));if(!function jm(n){return!!n.deps}(n))return ps(p)||uh(p);h=()=>new p(...rt(n.deps))}return h}function Id(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Vf(n,i){for(const o of n)Array.isArray(o)?Vf(o,i):o&&Ge(o)?Vf(o.\u0275providers,i):i(o)}class Yh{}class Zh{}class jf{resolveComponentFactory(i){throw function au(n){const i=Error(`No component factory found for ${Se(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let cc=(()=>{class n{}return n.NULL=new jf,n})();function Uu(){return Hl(ze(),I())}function Hl(n,i){return new Za(Ui(n,i))}let Za=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Uu,n})();function cl(n){return n instanceof Za?n.nativeElement:n}class Cd{}let Hp=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Hf(){const n=I(),o=Gr(ze().index,n);return(dr(o)?o:n)[ce]}(),n})(),zf=(()=>{class n{}return n.\u0275prov=Jt({token:n,providedIn:"root",factory:()=>null}),n})();class bd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const dh=new bd("15.2.4"),Gf={},Xa="ngOriginalError";function Dd(n){return n[Xa]}class ul{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Dd(i);for(;o&&Dd(o);)o=Dd(o);return o||null}}function uc(n){return n instanceof Function?n():n}function Kf(n,i,o){let h=n.length;for(;;){const p=n.indexOf(i,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const E=i.length;if(p+E===h||n.charCodeAt(p+E)<=32)return p}o=p+1}}const fh="ng-template";function Ug(n,i,o){let h=0,p=!0;for(;h<n.length;){let E=n[h++];if("string"==typeof E&&p){const S=n[h++];if(o&&"class"===E&&-1!==Kf(S.toLowerCase(),i,0))return!0}else{if(1===E){for(;h<n.length&&"string"==typeof(E=n[h++]);)if(E.toLowerCase()===i)return!0;return!1}"number"==typeof E&&(p=!1)}}return!1}function ef(n){return 4===n.type&&n.value!==fh}function Gm(n,i,o){return i===(4!==n.type||o?n.value:fh)}function qf(n,i,o){let h=4;const p=n.attrs||[],E=function tf(n){for(let i=0;i<n.length;i++)if(ga(n[i]))return i;return n.length}(p);let S=!1;for(let k=0;k<i.length;k++){const B=i[k];if("number"!=typeof B){if(!S)if(4&h){if(h=2|1&h,""!==B&&!Gm(n,B,o)||""===B&&1===i.length){if(hl(h))return!1;S=!0}}else{const Z=8&h?B:i[++k];if(8&h&&null!==n.attrs){if(!Ug(n.attrs,Z,o)){if(hl(h))return!1;S=!0}continue}const xe=Wm(8&h?"class":B,p,ef(n),o);if(-1===xe){if(hl(h))return!1;S=!0;continue}if(""!==Z){let wt;wt=xe>E?"":p[xe+1].toLowerCase();const Vt=8&h?wt:null;if(Vt&&-1!==Kf(Vt,Z,0)||2&h&&Z!==wt){if(hl(h))return!1;S=!0}}}}else{if(!S&&!hl(h)&&!hl(B))return!1;if(S&&hl(B))continue;S=!1,h=B|1&h}}return hl(h)||S}function hl(n){return 0==(1&n)}function Wm(n,i,o,h){if(null===i)return-1;let p=0;if(h||!o){let E=!1;for(;p<i.length;){const S=i[p];if(S===n)return p;if(3===S||6===S)E=!0;else{if(1===S||2===S){let k=i[++p];for(;"string"==typeof k;)k=i[++p];continue}if(4===S)break;if(0===S){p+=4;continue}}p+=E?1:2}return-1}return function nf(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const h=n[o];if("number"==typeof h)return-1;if(h===i)return o;o++}return-1}(i,n)}function Gp(n,i,o=!1){for(let h=0;h<i.length;h++)if(qf(n,i[h],o))return!0;return!1}function Ad(n,i){e:for(let o=0;o<i.length;o++){const h=i[o];if(n.length===h.length){for(let p=0;p<n.length;p++)if(n[p]!==h[p])continue e;return!0}}return!1}function Nc(n,i){return n?":not("+i.trim()+")":i}function Oa(n){let i=n[0],o=1,h=2,p="",E=!1;for(;o<n.length;){let S=n[o];if("string"==typeof S)if(2&h){const k=n[++o];p+="["+S+(k.length>0?'="'+k+'"':"")+"]"}else 8&h?p+="."+S:4&h&&(p+=" "+S);else""!==p&&!hl(S)&&(i+=Nc(E,p),p=""),h=S,E=E||!hl(h);o++}return""!==p&&(i+=Nc(E,p)),i}const Yr={};function Vu(n){lu(f(),I(),Yi()+n,!1)}function lu(n,i,o,h){if(!h)if(3==(3&i[ir])){const E=n.preOrderCheckHooks;null!==E&&pa(i,E,o)}else{const E=n.preOrderHooks;null!==E&&F(i,E,0,o)}Ri(o)}function Kp(n,i=null,o=null,h){const p=qp(n,i,o,h);return p.resolveInjectorInitializers(),p}function qp(n,i=null,o=null,h,p=new Set){const E=[o||$e,zh(n)];return h=h||("object"==typeof n?void 0:Se(n)),new ch(E,i||qh(),h||null,p)}let Wu=(()=>{class n{static create(o,h){if(Array.isArray(o))return Kp({name:""},h,o,"");{var p;const E=null!==(p=o.name)&&void 0!==p?p:"";return Kp({name:E},o.parent,o.providers,E)}}}return n.THROW_IF_NOT_FOUND=Lr,n.NULL=new $u,n.\u0275prov=Jt({token:n,providedIn:"any",factory:()=>gr(_d)}),n.__NG_ELEMENT_ID__=-1,n})();function cu(n,i=nn.Default){const o=I();return null===o?gr(n,i):Nn(ze(),o,de(n),i)}function Xf(){throw new Error("invalid")}function Wg(n,i){const o=n.contentQueries;if(null!==o)for(let h=0;h<o.length;h+=2){const E=o[h+1];if(-1!==E){const S=n.data[E];Oo(o[h]),S.contentQueries(2,i[E],E)}}}function yh(n,i,o,h,p,E,S,k,B,Z,oe){const xe=i.blueprint.slice();return xe[Zr]=p,xe[ir]=76|h,(null!==oe||n&&1024&n[ir])&&(xe[ir]|=1024),Yo(xe),xe[Xr]=xe[Kt]=n,xe[tt]=o,xe[Ht]=S||n&&n[Ht],xe[ce]=k||n&&n[ce],xe[nt]=B||n&&n[nt]||null,xe[bt]=Z||n&&n[bt]||null,xe[te]=E,xe[mr]=function ol(){return nc++}(),xe[Bi]=oe,xe[pn]=2==i.type?n[pn]:xe,xe}function vh(n,i,o,h,p){let E=n.data[i];if(null===E)E=function Qf(n,i,o,h,p){const E=an(),S=Sr(),B=n.data[i]=function Jm(n,i,o,h,p,E){return{type:o,index:h,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?E:E&&E.parent,o,i,h,p);return null===n.firstChild&&(n.firstChild=B),null!==E&&(S?null==E.child&&null!==B.parent&&(E.child=B):null===E.next&&(E.next=B,B.prev=E)),B}(n,i,o,h,p),function el(){return Er.lFrame.inI18n}()&&(E.flags|=32);else if(64&E.type){E.type=o,E.value=h,E.attrs=p;const S=function En(){const n=Er.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();E.injectorIndex=null===S?-1:S.injectorIndex}return Xn(E,!0),E}function cf(n,i,o,h){if(0===o)return-1;const p=i.length;for(let E=0;E<o;E++)i.push(h),n.blueprint.push(h),n.data.push(null);return p}function Jf(n,i,o){Da(i);try{const h=n.viewQuery;null!==h&&du(1,h,o);const p=n.template;null!==p&&Nd(n,i,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Wg(n,i),n.staticViewQueries&&du(2,n.viewQuery,o);const E=n.components;null!==E&&function Kg(n,i){for(let o=0;o<i.length;o++)ff(n,i[o])}(i,E)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{i[ir]&=-5,Ta()}}function ep(n,i,o,h){const p=i[ir];if(128!=(128&p)){Da(i);try{Yo(i),function Xo(n){return Er.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Nd(n,i,o,2,h);const S=3==(3&p);if(S){const Z=n.preOrderCheckHooks;null!==Z&&pa(i,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&F(i,Z,0,null),Y(i,0)}if(function sg(n){for(let i=Mi(n);null!==i;i=io(i)){if(!i[lt])continue;const o=i[gn];for(let h=0;h<o.length;h++){const p=o[h];512&p[ir]||Co(p[Xr],1),p[ir]|=512}}}(i),function ry(n){for(let i=Mi(n);null!==i;i=io(i))for(let o=$n;o<i.length;o++){const h=i[o],p=h[An];rs(h)&&ep(p,h,p.template,h[tt])}}(i),null!==n.contentQueries&&Wg(n,i),S){const Z=n.contentCheckHooks;null!==Z&&pa(i,Z)}else{const Z=n.contentHooks;null!==Z&&F(i,Z,1),Y(i,1)}!function Gg(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let h=0;h<o.length;h++){const p=o[h];if(p<0)Ri(~p);else{const E=p,S=o[++h],k=o[++h];ql(S,E),k(2,i[E])}}}finally{Ri(-1)}}(n,i);const k=n.components;null!==k&&function eg(n,i){for(let o=0;o<i.length;o++)Jg(n,i[o])}(i,k);const B=n.viewQuery;if(null!==B&&du(2,B,h),S){const Z=n.viewCheckHooks;null!==Z&&pa(i,Z)}else{const Z=n.viewHooks;null!==Z&&F(i,Z,2),Y(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[ir]&=-41,512&i[ir]&&(i[ir]&=-513,Co(i[Xr],-1))}finally{Ta()}}}function Nd(n,i,o,h,p){const E=Yi(),S=2&h;try{Ri(-1),S&&i.length>fr&&lu(n,i,fr,!1),Di(S?2:0,p),o(h,p)}finally{Ri(E),Di(S?3:1,p)}}function Zu(n,i,o){if(as(i)){const p=i.directiveEnd;for(let E=i.directiveStart;E<p;E++){const S=n.data[E];S.contentQueries&&S.contentQueries(1,o[E],E)}}}function uf(n,i,o){xi()&&(function Zg(n,i,o,h){const p=o.directiveStart,E=o.directiveEnd;so(o)&&function hf(n,i,o){const h=Ui(i,n),p=tg(o),E=n[Ht],S=uu(n,yh(n,p,null,o.onPush?32:16,h,i,E,E.createRenderer(h,o),null,null,null));n[i.index]=S}(i,o,n.data[p+o.componentOffset]),n.firstCreatePass||mc(o,i),ro(h,i);const S=o.initialInputs;for(let k=p;k<E;k++){const B=n.data[k],Z=ea(i,n,k,o);ro(Z,i),null!==S&&ev(0,k-p,Z,B,0,S),Ki(B)&&(Gr(o.index,i)[tt]=ea(i,n,k,o))}}(n,i,o,Ui(o,i)),64==(64&o.flags)&&ap(n,i,o))}function _h(n,i,o=Ui){const h=i.localNames;if(null!==h){let p=i.index+1;for(let E=0;E<h.length;E+=2){const S=h[E+1],k=-1===S?o(i,n):n[S];n[p++]=k}}}function tg(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=tp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function tp(n,i,o,h,p,E,S,k,B,Z){const oe=fr+h,xe=oe+p,wt=function qg(n,i){const o=[];for(let h=0;h<i;h++)o.push(h<n?null:Yr);return o}(oe,xe),Vt="function"==typeof Z?Z():Z;return wt[An]={type:n,blueprint:wt,template:o,queries:null,viewQuery:k,declTNode:i,data:wt.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:B,consts:Vt,incompleteFirstPass:!1}}function np(n,i,o,h){const p=dp(i);null===o?p.push(h):(p.push(o),n.firstCreatePass&&hp(n).push(h,p.length-1))}function pl(n,i,o,h){for(let p in n)if(n.hasOwnProperty(p)){o=null===o?{}:o;const E=n[p];null===h?ng(o,i,p,E):h.hasOwnProperty(p)&&ng(o,i,h[p],E)}return o}function ng(n,i,o,h){n.hasOwnProperty(o)?n[o].push(i,h):n[o]=[i,h]}function Fd(n,i){const o=Gr(i,n);16&o[ir]||(o[ir]|=32)}function df(n,i,o,h){if(xi()){const p=null===h?null:{"":-1},E=function ty(n,i){const o=n.directiveRegistry;let h=null,p=null;if(o)for(let S=0;S<o.length;S++){const k=o[S];if(Gp(i,k.selectors,!1))if(h||(h=[]),Ki(k))if(null!==k.findHostDirectiveDefs){const B=[];p=p||new Map,k.findHostDirectiveDefs(k,B,p),h.unshift(...B,k),ig(n,i,B.length)}else h.unshift(k),ig(n,i,0);else{var E;p=p||new Map,null===(E=k.findHostDirectiveDefs)||void 0===E||E.call(k,k,h,p),h.push(k)}}return null===h?null:[h,p]}(n,o);let S,k;null===E?S=k=null:[S,k]=E,null!==S&&op(n,i,o,S,p,k),p&&function Na(n,i,o){if(i){const h=n.localNames=[];for(let p=0;p<i.length;p+=2){const E=o[i[p+1]];if(null==E)throw new be(-301,!1);h.push(i[p],E)}}}(o,h,p)}o.mergedAttrs=bs(o.mergedAttrs,o.attrs)}function op(n,i,o,h,p,E){for(let Z=0;Z<h.length;Z++)_l(mc(o,i),n,h[Z].type);!function Xg(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const oe=h[Z];oe.providersResolver&&oe.providersResolver(oe)}let S=!1,k=!1,B=cf(n,i,h.length,null);for(let Z=0;Z<h.length;Z++){const oe=h[Z];o.mergedAttrs=bs(o.mergedAttrs,oe.hostAttrs),cp(n,o,i,B,oe),ny(B,oe,p),null!==oe.contentQueries&&(o.flags|=4),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(o.flags|=64);const xe=oe.type.prototype;!S&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),S=!0),!k&&(xe.ngOnChanges||xe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),k=!0),B++}!function rp(n,i,o){const p=i.directiveEnd,E=n.data,S=i.attrs,k=[];let B=null,Z=null;for(let oe=i.directiveStart;oe<p;oe++){const xe=E[oe],wt=o?o.get(xe):null,fn=wt?wt.outputs:null;B=pl(xe.inputs,oe,B,wt?wt.inputs:null),Z=pl(xe.outputs,oe,Z,fn);const xn=null===B||null===S||ef(i)?null:tv(B,oe,S);k.push(xn)}null!==B&&(B.hasOwnProperty("class")&&(i.flags|=8),B.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=k,i.inputs=B,i.outputs=Z}(n,o,E)}function ap(n,i,o){const h=o.directiveStart,p=o.directiveEnd,E=o.index,S=function ml(){return Er.lFrame.currentDirectiveIndex}();try{Ri(E);for(let k=h;k<p;k++){const B=n.data[k],Z=i[k];Po(k),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&lp(B,Z)}}finally{Ri(-1),Po(S)}}function lp(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ig(n,i,o){i.componentOffset=o,(n.components||(n.components=[])).push(i.index)}function ny(n,i,o){if(o){if(i.exportAs)for(let h=0;h<i.exportAs.length;h++)o[i.exportAs[h]]=n;Ki(i)&&(o[""]=n)}}function cp(n,i,o,h,p){n.data[h]=p;const E=p.factory||(p.factory=ps(p.type)),S=new Wt(E,Ki(p),cu);n.blueprint[h]=S,o[h]=S,function rg(n,i,o,h,p){const E=p.hostBindings;if(E){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const k=~i.index;(function ey(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(S)!=k&&S.push(k),S.push(o,h,E)}}(n,i,h,cf(n,o,p.hostVars,Yr),p)}function zl(n,i,o,h,p,E){const S=Ui(n,i);!function up(n,i,o,h,p,E,S){if(null==E)n.removeAttribute(i,p,o);else{const k=null==S?he(E):S(E,h||"",p);n.setAttribute(i,p,k,o)}}(i[ce],S,E,n.value,o,h,p)}function ev(n,i,o,h,p,E){const S=E[i];if(null!==S){const k=h.setInput;for(let B=0;B<S.length;){const Z=S[B++],oe=S[B++],xe=S[B++];null!==k?h.setInput(o,xe,Z,oe):o[oe]=xe}}}function tv(n,i,o){let h=null,p=0;for(;p<o.length;){const E=o[p];if(0!==E)if(5!==E){if("number"==typeof E)break;if(n.hasOwnProperty(E)){null===h&&(h=[]);const S=n[E];for(let k=0;k<S.length;k+=2)if(S[k]===i){h.push(E,S[k+1],o[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function Qg(n,i,o,h){return[n,!0,!1,i,null,0,h,o,null,null]}function Jg(n,i){const o=Gr(i,n);if(rs(o)){const h=o[An];48&o[ir]?ep(h,o,h.template,o[tt]):o[Wi]>0&&og(o)}}function og(n){for(let h=Mi(n);null!==h;h=io(h))for(let p=$n;p<h.length;p++){const E=h[p];if(rs(E))if(512&E[ir]){const S=E[An];ep(S,E,S.template,E[tt])}else E[Wi]>0&&og(E)}const o=n[An].components;if(null!==o)for(let h=0;h<o.length;h++){const p=Gr(o[h],n);rs(p)&&p[Wi]>0&&og(p)}}function ff(n,i){const o=Gr(i,n),h=o[An];(function ag(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(h,o),Jf(h,o,o[tt])}function uu(n,i){return n[Et]?n[qt][Tr]=i:n[Et]=i,n[qt]=i,i}function Gl(n){for(;n;){n[ir]|=32;const i=ad(n);if(cs(n)&&!i)return n;n=i}return null}function Hs(n,i,o,h=!0){const p=i[Ht];p.begin&&p.begin();try{ep(n,i,n.template,o)}catch(S){throw h&&lg(i,S),S}finally{p.end&&p.end()}}function du(n,i,o){Oo(0),i(n,o)}function dp(n){return n[Ee]||(n[Ee]=[])}function hp(n){return n.cleanup||(n.cleanup=[])}function lg(n,i){const o=n[bt],h=o?o.get(ul,null):null;h&&h.handleError(i)}function cg(n,i,o,h,p){for(let E=0;E<o.length;){const S=o[E++],k=o[E++],B=i[S],Z=n.data[S];null!==Z.setInput?Z.setInput(B,p,h,k):B[k]=p}}function Wl(n,i,o){const h=Zs(i,n);!function Kc(n,i,o){n.setValue(i,o)}(n[ce],h,o)}function pf(n,i,o){let h=o?n.styles:null,p=o?n.classes:null,E=0;if(null!==i)for(let S=0;S<i.length;S++){const k=i[S];"number"==typeof k?E=k:1==E?p=Ue(p,k):2==E&&(h=Ue(h,k+": "+i[++S]+";"))}o?n.styles=h:n.stylesWithoutHost=h,o?n.classes=p:n.classesWithoutHost=p}function Ld(n,i,o,h,p=!1){for(;null!==o;){const E=i[o.index];if(null!==E&&h.push(Ti(E)),Rr(E))for(let k=$n;k<E.length;k++){const B=E[k],Z=B[An].firstChild;null!==Z&&Ld(B[An],B,Z,h)}const S=o.type;if(8&S)Ld(n,i,o.child,h);else if(32&S){const k=Cu(o,i);let B;for(;B=k();)h.push(B)}else if(16&S){const k=ac(i,o);if(Array.isArray(k))h.push(...k);else{const B=ad(i[pn]);Ld(B[An],B,k,h,!0)}}o=p?o.projectionNext:o.next}return h}class Eh{get rootNodes(){const i=this._lView,o=i[An];return Ld(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tt]}set context(i){this._lView[tt]=i}get destroyed(){return 128==(128&this._lView[ir])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Xr];if(Rr(i)){const o=i[Yt],h=o?o.indexOf(this):-1;h>-1&&(Au(i,h),Ra(o,h))}this._attachedToViewContainer=!1}xc(this._lView[An],this._lView)}onDestroy(i){np(this._lView[An],this._lView,null,i)}markForCheck(){Gl(this._cdRefInjectingView||this._lView)}detach(){this._lView[ir]&=-65}reattach(){this._lView[ir]|=64}detectChanges(){Hs(this._lView[An],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kg(n,i){Jc(n,i,i[ce],2,null,null)}(this._lView[An],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=i}}class $d extends Eh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Hs(i[An],i,i[tt],!1)}checkNoChanges(){}get context(){return null}}class gf extends cc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Pn(i);return new Xu(o,this.ngModule)}}function mf(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Ih{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,h){h=We(h);const p=this.injector.get(i,Gf,h);return p!==Gf||o===Gf?p:this.parentInjector.get(i,o,h)}}class Xu extends Zh{get inputs(){return mf(this.componentDef.inputs)}get outputs(){return mf(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Yf(n){return n.map(Oa).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,h,p){var E;let S=(p=p||this.ngModule)instanceof kc?p:null===(E=p)||void 0===E?void 0:E.injector;S&&null!==this.componentDef.getStandaloneInjector&&(S=this.componentDef.getStandaloneInjector(S)||S);const k=S?new Ih(i,S):i,B=k.get(Cd,null);if(null===B)throw new be(407,!1);const Z=k.get(zf,null),oe=B.createRenderer(null,this.componentDef),xe=this.componentDef.selectors[0][0]||"div",wt=h?function Qm(n,i,o){return n.selectRootElement(i,o===pt.ShadowDom)}(oe,h,this.componentDef.encapsulation):kl(oe,xe,function em(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(xe)),Vt=this.componentDef.onPush?288:272,fn=tp(0,null,null,1,0,null,null,null,null,null),xn=yh(null,fn,null,Vt,null,null,B,oe,Z,k,null);let sr,br;Da(xn);try{const Wr=this.componentDef;let wn,ci=null;Wr.findHostDirectiveDefs?(wn=[],ci=new Map,Wr.findHostDirectiveDefs(Wr,wn,ci),wn.push(Wr)):wn=[Wr];const Ws=function nm(n,i){const o=n[An],h=fr;return n[h]=i,vh(o,h,2,"#host",null)}(xn,wt),Go=function rm(n,i,o,h,p,E,S,k){const B=p[An];!function oy(n,i,o,h){for(const p of n)i.mergedAttrs=bs(i.mergedAttrs,p.hostAttrs);null!==i.mergedAttrs&&(pf(i,i.mergedAttrs,!0),null!==o&&eu(h,o,i))}(h,n,i,S);const Z=E.createRenderer(i,o),oe=yh(p,tg(o),null,o.onPush?32:16,p[n.index],n,E,Z,k||null,null,null);return B.firstCreatePass&&ig(B,n,h.length-1),uu(p,oe),p[n.index]=oe}(Ws,wt,Wr,wn,xn,B,oe);br=uo(fn,fr),wt&&function ay(n,i,o,h){if(h)Vi(n,o,["ng-version",dh.full]);else{const{attrs:p,classes:E}=function xd(n){const i=[],o=[];let h=1,p=2;for(;h<n.length;){let E=n[h];if("string"==typeof E)2===p?""!==E&&i.push(E,n[++h]):8===p&&o.push(E);else{if(!hl(p))break;p=E}h++}return{attrs:i,classes:o}}(i.selectors[0]);p&&Vi(n,o,p),E&&E.length>0&&Bh(n,o,E.join(" "))}}(oe,Wr,wt,h),void 0!==o&&function ug(n,i,o){const h=n.projection=[];for(let p=0;p<i.length;p++){const E=o[p];h.push(null!=E?Array.from(E):null)}}(br,this.ngContentSelectors,o),sr=function fp(n,i,o,h,p,E){const S=ze(),k=p[An],B=Ui(S,p);op(k,p,S,o,null,h);for(let oe=0;oe<o.length;oe++)ro(ea(p,k,S.directiveStart+oe,S),p);ap(k,p,S),B&&ro(B,p);const Z=ea(p,k,S.directiveStart+S.componentOffset,S);if(n[tt]=p[tt]=Z,null!==E)for(const oe of E)oe(Z,i);return Zu(k,S,n),Z}(Go,Wr,wn,ci,xn,[im]),Jf(fn,xn,null)}finally{Ta()}return new tm(this.componentType,sr,Hl(br,xn),xn,br)}}class tm extends Yh{constructor(i,o,h,p,E){super(),this.location=h,this._rootLView=p,this._tNode=E,this.instance=o,this.hostView=this.changeDetectorRef=new $d(p),this.componentType=i}setInput(i,o){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[i])){const E=this._rootLView;cg(E[An],E,p,i,o),Fd(E,this._tNode.index)}}get injector(){return new El(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function im(){const n=ze();Zl(I()[An],n)}function dg(n){let i=function pp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const h=[n];for(;i;){let p;if(Ki(n))p=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new be(903,!1);p=i.\u0275dir}if(p){if(o){h.push(p);const S=n;S.inputs=gp(n.inputs),S.declaredInputs=gp(n.declaredInputs),S.outputs=gp(n.outputs);const k=p.hostBindings;k&&pg(n,k);const B=p.viewQuery,Z=p.contentQueries;if(B&&fg(n,B),Z&&mp(n,Z),ge(n.inputs,p.inputs),ge(n.declaredInputs,p.declaredInputs),ge(n.outputs,p.outputs),Ki(p)&&p.data.animation){const oe=n.data;oe.animation=(oe.animation||[]).concat(p.data.animation)}}const E=p.features;if(E)for(let S=0;S<E.length;S++){const k=E[S];k&&k.ngInherit&&k(n),k===dg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function hg(n){let i=0,o=null;for(let h=n.length-1;h>=0;h--){const p=n[h];p.hostVars=i+=p.hostVars,p.hostAttrs=bs(p.hostAttrs,o=bs(o,p.hostAttrs))}}(h)}function gp(n){return n===yn?{}:n===$e?[]:n}function fg(n,i){const o=n.viewQuery;n.viewQuery=o?(h,p)=>{i(h,p),o(h,p)}:i}function mp(n,i){const o=n.contentQueries;n.contentQueries=o?(h,p,E)=>{i(h,p,E),o(h,p,E)}:i}function pg(n,i){const o=n.hostBindings;n.hostBindings=o?(h,p)=>{i(h,p),o(h,p)}:i}function ue(n){return!!Gt(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Gt(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function vn(n,i,o){return n[i]=o}function Ln(n,i){return n[i]}function yr(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Jr(n,i,o,h){const p=yr(n,i,o);return yr(n,i+1,h)||p}function Qi(n,i,o,h,p,E){const S=Jr(n,i,o,h);return Jr(n,i+2,p,E)||S}function Ts(n,i,o,h){const p=I();return yr(p,Qo(),i)&&(f(),zl(Hr(),p,n,i,o,h)),Ts}function Ju(n,i,o,h,p,E,S,k){const Z=function zs(n,i,o,h,p){const E=Jr(n,i,o,h);return yr(n,i+2,p)||E}(n,Fi(),o,p,S);return Vs(3),Z?i+he(o)+h+he(p)+E+he(S)+k:Yr}function sv(n,i,o,h,p,E,S,k){const B=I(),Z=f(),oe=n+fr,xe=Z.firstCreatePass?function uy(n,i,o,h,p,E,S,k,B){const Z=i.consts,oe=vh(i,n,4,S||null,gs(Z,k));df(i,o,oe,gs(Z,B)),Zl(i,oe);const xe=oe.tView=tp(2,oe,h,p,E,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Z);return null!==i.queries&&(i.queries.template(i,oe),xe.queries=i.queries.embeddedTView(oe)),oe}(oe,Z,B,i,o,h,p,E,S):Z.data[oe];Xn(xe,!1);const wt=B[ce].createComment("");oc(Z,B,wt,xe),ro(wt,B),uu(B,B[oe]=Qg(wt,B,wt,xe)),Ni(xe)&&uf(Z,B,xe),null!=S&&_h(B,xe,k)}function ov(n){return $s(function $r(){return Er.lFrame.contextLView}(),fr+n)}function gg(n,i,o){const h=I();return yr(h,Qo(),i)&&function ka(n,i,o,h,p,E,S,k){const B=Ui(i,o);let oe,Z=i.inputs;!k&&null!=Z&&(oe=Z[h])?(cg(n,o,oe,h,p),so(i)&&Fd(o,i.index)):3&i.type&&(h=function ip(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),p=null!=S?S(p,i.value||"",h):p,E.setProperty(B,h,p))}(f(),Hr(),h,n,i,h[ce],o,!1),gg}function mg(n,i,o,h,p){const S=p?"class":"style";cg(n,o,i.inputs[S],S,h)}function Bd(n,i,o,h){const p=I(),E=f(),S=fr+n,k=p[ce],B=E.firstCreatePass?function hy(n,i,o,h,p,E){const S=i.consts,B=vh(i,n,2,h,gs(S,p));return df(i,o,B,gs(S,E)),null!==B.attrs&&pf(B,B.attrs,!1),null!==B.mergedAttrs&&pf(B,B.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,B),B}(S,E,p,i,o,h):E.data[S],Z=p[S]=kl(k,i,function Fo(){return Er.lFrame.currentNamespace}()),oe=Ni(B);return Xn(B,!0),eu(k,Z,B),32!=(32&B.flags)&&oc(E,p,Z,B),0===function Bs(){return Er.lFrame.elementDepthCount}()&&ro(Z,p),function Zo(){Er.lFrame.elementDepthCount++}(),oe&&(uf(E,p,B),Zu(E,B,p)),null!==h&&_h(p,B),Bd}function yg(){let n=ze();Sr()?di():(n=n.parent,Xn(n,!1));const i=n;!function ha(){Er.lFrame.elementDepthCount--}();const o=f();return o.firstCreatePass&&(Zl(o,n),as(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Mr(n){return 0!=(8&n.flags)}(i)&&mg(o,i,I(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function wr(n){return 0!=(16&n.flags)}(i)&&mg(o,i,I(),i.stylesWithoutHost,!1),yg}function vg(n,i,o,h){return Bd(n,i,o,h),yg(),vg}function yp(n,i,o){const h=I(),p=f(),E=n+fr,S=p.firstCreatePass?function C_(n,i,o,h,p){const E=i.consts,S=gs(E,h),k=vh(i,n,8,"ng-container",S);return null!==S&&pf(k,S,!0),df(i,o,k,gs(E,p)),null!==i.queries&&i.queries.elementStart(i,k),k}(E,p,h,i,o):p.data[E];Xn(S,!0);const k=h[E]=h[ce].createComment("");return oc(p,h,k,S),ro(k,h),Ni(S)&&(uf(p,h,S),Zu(p,S,h)),null!=o&&_h(h,S),yp}function $c(){let n=ze();const i=f();return Sr()?di():(n=n.parent,Xn(n,!1)),i.firstCreatePass&&(Zl(i,n),as(n)&&i.queries.elementEnd(n)),$c}function _g(n,i,o){return yp(n,i,o),$c(),_g}function av(){return I()}function Eg(n){return!!n&&"function"==typeof n.then}function lv(n){return!!n&&"function"==typeof n.subscribe}const cv=lv;function Ig(n,i,o,h){const p=I(),E=f(),S=ze();return function dv(n,i,o,h,p,E,S){const k=Ni(h),Z=n.firstCreatePass&&hp(n),oe=i[tt],xe=dp(i);let wt=!0;if(3&h.type||S){const xn=Ui(h,i),sr=S?S(xn):xn,br=xe.length,Wr=S?ci=>S(Ti(ci[h.index])):h.index;let wn=null;if(!S&&k&&(wn=function fy(n,i,o,h){const p=n.cleanup;if(null!=p)for(let E=0;E<p.length-1;E+=2){const S=p[E];if(S===o&&p[E+1]===h){const k=i[Ee],B=p[E+2];return k.length>B?k[B]:null}"string"==typeof S&&(E+=2)}return null}(n,i,p,h.index)),null!==wn)(wn.__ngLastListenerFn__||wn).__ngNextListenerFn__=E,wn.__ngLastListenerFn__=E,wt=!1;else{E=hv(h,i,oe,E,!1);const ci=o.listen(sr,p,E);xe.push(E,ci),Z&&Z.push(p,Wr,br,br+1)}}else E=hv(h,i,oe,E,!1);const Vt=h.outputs;let fn;if(wt&&null!==Vt&&(fn=Vt[p])){const xn=fn.length;if(xn)for(let sr=0;sr<xn;sr+=2){const Ws=i[fn[sr]][fn[sr+1]].subscribe(E),Go=xe.length;xe.push(E,Ws),Z&&Z.push(p,h.index,Go,-(Go+1))}}}(E,p,p[ce],S,n,i,h),Ig}function cm(n,i,o,h){try{return Di(6,i,o),!1!==o(h)}catch(p){return lg(n,p),!1}finally{Di(7,i,o)}}function hv(n,i,o,h,p){return function E(S){if(S===Function)return h;Gl(n.componentOffset>-1?Gr(n.index,i):i);let B=cm(i,o,h,S),Z=E.__ngNextListenerFn__;for(;Z;)B=cm(i,o,Z,S)&&B,Z=Z.__ngNextListenerFn__;return p&&!1===B&&(S.preventDefault(),S.returnValue=!1),B}}function um(n=1){return function qi(n){return(Er.lFrame.contextLView=function No(n,i){for(;n>0;)i=i[Kt],n--;return i}(n,Er.lFrame.contextLView))[tt]}(n)}function fv(n,i){let o=null;const h=function Sd(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let p=0;p<i.length;p++){const E=i[p];if("*"!==E){if(null===h?Gp(n,E,!0):Ad(h,E))return p}else o=p}return o}function dm(n){const i=I()[pn][te];if(!i.projection){const h=i.projection=Br(n?n.length:1,null),p=h.slice();let E=i.child;for(;null!==E;){const S=n?fv(E,n):0;null!==S&&(p[S]?p[S].projectionNext=E:h[S]=E,p[S]=E),E=E.next}}}function py(n,i=0,o){const h=I(),p=f(),E=vh(p,fr+n,16,null,o||null);null===E.projection&&(E.projection=i),di(),32!=(32&E.flags)&&function Pf(n,i,o){$h(i[ce],0,i,o,Rc(n,o,i),Zc(o.parent||i[te],o,i))}(p,h,E)}function _p(n,i){return n<<17|i<<2}function Ud(n){return n>>17&32767}function Ip(n){return 2|n}function yf(n){return(131068&n)>>2}function my(n,i){return-131069&n|i<<2}function yy(n){return 1|n}function Iy(n,i,o,h,p){const E=n[o+1],S=null===i;let k=h?Ud(E):yf(E),B=!1;for(;0!==k&&(!1===B||S);){const oe=n[k+1];wy(n[k],i)&&(B=!0,n[k+1]=h?yy(oe):Ip(oe)),k=h?Ud(oe):yf(oe)}B&&(n[o+1]=h?Ip(E):yy(E))}function wy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&b(n,i)>=0}function Ay(n,i){return function hc(n,i,o,h){const p=I(),E=f(),S=Vs(2);E.firstUpdatePass&&function Ry(n,i,o,h){const p=n.data;if(null===p[o+1]){const E=p[Yi()],S=function xy(n,i){return i>=n.expandoStartIndex}(n,o);(function vm(n,i){return 0!=(n.flags&(i?8:16))})(E,h)&&null===i&&!S&&(i=!1),i=function ym(n,i,o,h){const p=function yl(n){const i=Er.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let E=h?i.residualClasses:i.residualStyles;if(null===p)0===(h?i.classBindings:i.styleBindings)&&(o=wp(o=vf(null,n,i,o,h),i.attrs,h),E=null);else{const S=i.directiveStylingLast;if(-1===S||n[S]!==p)if(o=vf(p,n,i,o,h),null===E){let B=function Li(n,i,o){const h=o?i.classBindings:i.styleBindings;if(0!==yf(h))return n[Ud(h)]}(n,i,h);void 0!==B&&Array.isArray(B)&&(B=vf(null,n,i,B[1],h),B=wp(B,i.attrs,h),function Cv(n,i,o,h){n[Ud(o?i.classBindings:i.styleBindings)]=h}(n,i,h,B))}else E=function bv(n,i,o){let h;const p=i.directiveEnd;for(let E=1+i.directiveStylingLast;E<p;E++)h=wp(h,n[E].hostAttrs,o);return wp(h,i.attrs,o)}(n,i,h)}return void 0!==E&&(h?i.residualClasses=E:i.residualStyles=E),o}(p,E,i,h),function _y(n,i,o,h,p,E){let S=E?i.classBindings:i.styleBindings,k=Ud(S),B=yf(S);n[h]=o;let oe,Z=!1;if(Array.isArray(o)?(oe=o[1],(null===oe||b(o,oe)>0)&&(Z=!0)):oe=o,p)if(0!==B){const wt=Ud(n[k+1]);n[h+1]=_p(wt,k),0!==wt&&(n[wt+1]=my(n[wt+1],h)),n[k+1]=function vv(n,i){return 131071&n|i<<17}(n[k+1],h)}else n[h+1]=_p(k,0),0!==k&&(n[k+1]=my(n[k+1],h)),k=h;else n[h+1]=_p(B,0),0===k?k=h:n[B+1]=my(n[B+1],h),B=h;Z&&(n[h+1]=Ip(n[h+1])),Iy(n,oe,h,!0),Iy(n,oe,h,!1),function Ey(n,i,o,h,p){const E=p?n.residualClasses:n.residualStyles;null!=E&&"string"==typeof i&&b(E,i)>=0&&(o[h+1]=yy(o[h+1]))}(i,oe,n,h,E),S=_p(k,B),E?i.classBindings=S:i.styleBindings=S}(p,E,i,o,S,h)}}(E,n,S,h),i!==Yr&&yr(p,S,i)&&function My(n,i,o,h,p,E,S,k){if(!(3&i.type))return;const B=n.data,Z=B[k+1],oe=function b_(n){return 1==(1&n)}(Z)?Dv(B,i,o,p,yf(Z),S):void 0;_f(oe)||(_f(E)||function Ep(n){return 2==(2&n)}(Z)&&(E=Dv(B,null,o,p,k,S)),function Lp(n,i,o,h,p){if(i)p?n.addClass(o,h):n.removeClass(o,h);else{let E=-1===h.indexOf("-")?void 0:bi.DashCase;null==p?n.removeStyle(o,h,E):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),E|=bi.Important),n.setStyle(o,h,p,E))}}(h,S,Zs(Yi(),o),p,E))}(E,E.data[Yi()],p,p[ce],n,p[S+1]=function Tv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Se(aa(n)))),n}(i,o),h,S)}(n,i,null,!0),Ay}function vf(n,i,o,h,p){let E=null;const S=o.directiveEnd;let k=o.directiveStylingLast;for(-1===k?k=o.directiveStart:k++;k<S&&(E=i[k],h=wp(h,E.hostAttrs,p),E!==n);)k++;return null!==n&&(o.directiveStylingLast=k),h}function wp(n,i,o){const h=o?1:2;let p=-1;if(null!==i)for(let E=0;E<i.length;E++){const S=i[E];"number"==typeof S?p=S:p===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),A(n,S,!!o||i[++E]))}return void 0===n?null:n}function Dv(n,i,o,h,p,E){const S=null===i;let k;for(;p>0;){const B=n[p],Z=Array.isArray(B),oe=Z?B[1]:B,xe=null===oe;let wt=o[p+1];wt===Yr&&(wt=xe?$e:void 0);let Vt=xe?R(wt,h):oe===h?wt:void 0;if(Z&&!_f(Vt)&&(Vt=R(B,h)),_f(Vt)&&(k=Vt,S))return k;const fn=n[p+1];p=S?Ud(fn):yf(fn)}if(null!==i){let B=E?i.residualClasses:i.residualStyles;null!=B&&(k=R(B,h))}return k}function _f(n){return void 0!==n}function Sv(n,i=""){const o=I(),h=f(),p=n+fr,E=h.firstCreatePass?vh(h,p,1,i,null):h.data[p],S=o[p]=function Du(n,i){return n.createText(i)}(o[ce],i);oc(h,o,S,E),Xn(E,!1)}function bg(n){return _m("",n,""),bg}function _m(n,i,o){const h=I(),p=function Kl(n,i,o,h){return yr(n,Qo(),o)?i+he(o)+h:Yr}(h,n,i,o);return p!==Yr&&Wl(h,Yi(),p),_m}function Py(n,i,o,h,p){const E=I(),S=function dc(n,i,o,h,p,E){const k=Jr(n,Fi(),o,p);return Vs(2),k?i+he(o)+h+he(p)+E:Yr}(E,n,i,o,h,p);return S!==Yr&&Wl(E,Yi(),S),Py}function Ps(n,i,o,h,p,E,S){const k=I(),B=Ju(k,n,i,o,h,p,E,S);return B!==Yr&&Wl(k,Yi(),B),Ps}function Av(n,i,o,h,p,E,S,k,B){const Z=I(),oe=function Lc(n,i,o,h,p,E,S,k,B,Z){const xe=Qi(n,Fi(),o,p,S,B);return Vs(4),xe?i+he(o)+h+he(p)+E+he(S)+k+he(B)+Z:Yr}(Z,n,i,o,h,p,E,S,k,B);return oe!==Yr&&Wl(Z,Yi(),oe),Av}const If=void 0;var $y=["en",[["a","p"],["AM","PM"],If],[["AM","PM"],If,If],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],If,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],If,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",If,"{1} 'at' {0}",If],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ly(n){const o=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===h?1:5}];let wf={};function wm(n){const i=function bm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Dp(i);if(o)return o;const h=i.split("-")[0];if(o=Dp(h),o)return o;if("en"===h)return $y;throw new be(701,!1)}function Cm(n){return wm(n)[kr.PluralCase]}function Dp(n){return n in wf||(wf[n]=Fn.ng&&Fn.ng.common&&Fn.ng.common.locales&&Fn.ng.common.locales[n]),wf[n]}var kr=(()=>((kr=kr||{})[kr.LocaleId=0]="LocaleId",kr[kr.DayPeriodsFormat=1]="DayPeriodsFormat",kr[kr.DayPeriodsStandalone=2]="DayPeriodsStandalone",kr[kr.DaysFormat=3]="DaysFormat",kr[kr.DaysStandalone=4]="DaysStandalone",kr[kr.MonthsFormat=5]="MonthsFormat",kr[kr.MonthsStandalone=6]="MonthsStandalone",kr[kr.Eras=7]="Eras",kr[kr.FirstDayOfWeek=8]="FirstDayOfWeek",kr[kr.WeekendRange=9]="WeekendRange",kr[kr.DateFormat=10]="DateFormat",kr[kr.TimeFormat=11]="TimeFormat",kr[kr.DateTimeFormat=12]="DateTimeFormat",kr[kr.NumberSymbols=13]="NumberSymbols",kr[kr.NumberFormats=14]="NumberFormats",kr[kr.CurrencyCode=15]="CurrencyCode",kr[kr.CurrencySymbol=16]="CurrencySymbol",kr[kr.CurrencyName=17]="CurrencyName",kr[kr.Currencies=18]="Currencies",kr[kr.Directionality=19]="Directionality",kr[kr.PluralCase=20]="PluralCase",kr[kr.ExtraData=21]="ExtraData",kr))();const Tp="en-US";let Ap=Tp;function Pg(n,i,o,h,p){if(n=de(n),Array.isArray(n))for(let E=0;E<n.length;E++)Pg(n[E],i,o,h,p);else{const E=f(),S=I();let k=Oc(n)?n:de(n.provide),B=Uf(n);const Z=ze(),oe=1048575&Z.providerIndexes,xe=Z.directiveStart,wt=Z.providerIndexes>>20;if(Oc(n)||!n.multi){const Vt=new Wt(B,p,cu),fn=km(k,i,p?oe:oe+wt,xe);-1===fn?(_l(mc(Z,S),E,k),Wy(E,n,i.length),i.push(k),Z.directiveStart++,Z.directiveEnd++,p&&(Z.providerIndexes+=1048576),o.push(Vt),S.push(Vt)):(o[fn]=Vt,S[fn]=Vt)}else{const Vt=km(k,i,oe+wt,xe),fn=km(k,i,oe,oe+wt),sr=fn>=0&&o[fn];if(p&&!sr||!p&&!(Vt>=0&&o[Vt])){_l(mc(Z,S),E,k);const br=function t_(n,i,o,h,p){const E=new Wt(n,o,cu);return E.multi=[],E.index=i,E.componentProviders=0,e_(E,p,h&&!o),E}(p?y0:Nm,o.length,p,h,B);!p&&sr&&(o[fn].providerFactory=br),Wy(E,n,i.length,0),i.push(k),Z.directiveStart++,Z.directiveEnd++,p&&(Z.providerIndexes+=1048576),o.push(br),S.push(br)}else Wy(E,n,Vt>-1?Vt:fn,e_(o[p?fn:Vt],B,!p&&h));!p&&h&&sr&&o[fn].componentProviders++}}}function Wy(n,i,o,h){const p=Oc(i),E=function $f(n){return!!n.useClass}(i);if(p||E){const B=(E?de(i.useClass):i).prototype.ngOnDestroy;if(B){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!p&&i.multi){const oe=Z.indexOf(o);-1===oe?Z.push(o,[h,B]):Z[oe+1].push(h,B)}else Z.push(o,B)}}}function e_(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function km(n,i,o,h){for(let p=o;p<h;p++)if(i[p]===n)return p;return-1}function Nm(n,i,o,h){return Fm(this.multi,[])}function y0(n,i,o,h){const p=this.multi;let E;if(this.providerFactory){const S=this.providerFactory.componentProviders,k=ea(o,o[An],this.providerFactory.index,h);E=k.slice(0,S),Fm(p,E);for(let B=S;B<k.length;B++)E.push(k[B])}else E=[],Fm(p,E);return E}function Fm(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Rh(n,i=[]){return o=>{o.providersResolver=(h,p)=>function Mg(n,i,o){const h=f();if(h.firstCreatePass){const p=Ki(n);Pg(o,h.data,h.blueprint,p,!0),Pg(i,h.data,h.blueprint,p,!1)}}(h,p?p(n):n,i)}}class Qa{}class gl{}function n_(n,i){return new Op(n,null!=i?i:null)}class Op extends Qa{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gf(this);const h=mi(i);this._bootstrapComponents=uc(h.bootstrap),this._r3Injector=qp(i,o,[{provide:Qa,useValue:this},{provide:cc,useValue:this.componentFactoryResolver}],Se(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Sf extends gl{constructor(i){super(),this.moduleType=i}create(i){return new Op(this.moduleType,i)}}class Ml extends Qa{constructor(i,o,h){super(),this.componentFactoryResolver=new gf(this),this.instance=null;const p=new ch([...i,{provide:Qa,useValue:this},{provide:cc,useValue:this.componentFactoryResolver}],o||qh(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Ky(n,i,o=null){return new Ml(n,i,o).injector}let qy=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const h=Rs(0,o.type),p=h.length>0?Ky([h],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Jt({token:n,providedIn:"environment",factory:()=>new n(gr(kc))}),n})();function Af(n){n.getStandaloneInjector=i=>i.get(qy).getOrCreateStandaloneInjector(n)}function a_(n,i,o){const h=wi()+n,p=I();return p[h]===Yr?vn(p,h,o?i.call(o):i()):Ln(p,h)}function Xy(n,i,o,h,p,E,S,k){const B=wi()+n,Z=I(),oe=Qi(Z,B,o,h,p,E);return yr(Z,B+4,S)||oe?vn(Z,B+5,k?i.call(k,o,h,p,E,S):i(o,h,p,E,S)):Ln(Z,B+5)}function kp(n,i){const o=n[i];return o===Yr?void 0:o}function d(n,i){const o=f();let h;const p=n+fr;o.firstCreatePass?(h=function g(n,i){if(i)for(let o=i.length-1;o>=0;o--){const h=i[o];if(n===h.name)return h}}(i,o.pipeRegistry),o.data[p]=h,h.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(p,h.onDestroy)):h=o.data[p];const E=h.factory||(h.factory=ps(h.type)),S=Nr(cu);try{const k=rl(!1),B=E();return rl(k),function dy(n,i,o,h){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=h}(o,I(),p,B),B}finally{Nr(S)}}function P(n,i,o){const h=n+fr,p=I(),E=$s(p,h);return Mt(p,h)?function f_(n,i,o,h,p,E){const S=i+o;return yr(n,S,p)?vn(n,S+1,E?h.call(E,p):h(p)):kp(n,S+1)}(p,wi(),i,E.transform,o,E):E.transform(o)}function z(n,i,o,h){const p=n+fr,E=I(),S=$s(E,p);return Mt(E,p)?function r(n,i,o,h,p,E,S){const k=i+o;return Jr(n,k,p,E)?vn(n,k+2,S?h.call(S,p,E):h(p,E)):kp(n,k+2)}(E,wi(),i,S.transform,o,h,S):S.transform(o,h)}function Mt(n,i){return n[An].data[i].pure}function Tn(n){return i=>{setTimeout(n,void 0,i)}}const Rn=class sn extends c.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,h){let p=i,E=o||(()=>null),S=h;if(i&&"object"==typeof i){var k,B,Z;const xe=i;p=null===(k=xe.next)||void 0===k?void 0:k.bind(xe),E=null===(B=xe.error)||void 0===B?void 0:B.bind(xe),S=null===(Z=xe.complete)||void 0===Z?void 0:Z.bind(xe)}this.__isAsync&&(E=Tn(E),p&&(p=Tn(p)),S&&(S=Tn(S)));const oe=super.subscribe({next:p,error:E,complete:S});return i instanceof q.w0&&i.add(oe),oe}};function ur(){return this._results[Symbol.iterator]()}class ii{get changes(){return this._changes||(this._changes=new Rn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ii.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=ur)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const h=this;h.dirty=!1;const p=function vs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function jc(n,i,o){if(n.length!==i.length)return!1;for(let h=0;h<n.length;h++){let p=n[h],E=i[h];if(o&&(p=o(p),E=o(E)),E!==p)return!1}return!0}(h._results,p,o))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ki=(()=>{class n{}return n.__NG_ELEMENT_ID__=Os,n})();const si=ki,$a=class extends si{constructor(i,o,h){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=h}createEmbeddedView(i,o){const h=this._declarationTContainer.tView,p=yh(this._declarationLView,h,i,16,null,h.declTNode,null,null,null,null,o||null);p[kn]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[Vr];return null!==S&&(p[Vr]=S.createEmbeddedView(h)),Jf(h,p,i),new Eh(p)}};function Os(){return Is(ze(),I())}function Is(n,i){return 4&n.type?new $a(i,n,Hl(n,i)):null}let Ba=(()=>{class n{}return n.__NG_ELEMENT_ID__=Oh,n})();function Oh(){return hE(ze(),I())}const yI=Ba,uE=class extends yI{constructor(i,o,h){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=h}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new El(this._hostTNode,this._hostLView)}get parentInjector(){const i=fi(this._hostTNode,this._hostLView);if(po(i)){const o=Sa(i,this._hostLView),h=Lo(i);return new El(o[An].data[h+8],o)}return new El(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(i,o,h){let p,E;"number"==typeof h?p=h:null!=h&&(p=h.index,E=h.injector);const S=i.createEmbeddedView(o||{},E);return this.insert(S,p),S}createComponent(i,o,h,p,E){const S=i&&!function wl(n){return"function"==typeof n}(i);let k;if(S)k=o;else{const xe=o||{};k=xe.index,h=xe.injector,p=xe.projectableNodes,E=xe.environmentInjector||xe.ngModuleRef}const B=S?i:new Xu(Pn(i)),Z=h||this.parentInjector;if(!E&&null==B.ngModule){const wt=(S?Z:this.parentInjector).get(kc,null);wt&&(E=wt)}const oe=B.create(Z,p,void 0,E);return this.insert(oe.hostView,k),oe}insert(i,o){const h=i._lView,p=h[An];if(function Va(n){return Rr(n[Xr])}(h)){const oe=this.indexOf(i);if(-1!==oe)this.detach(oe);else{const xe=h[Xr],wt=new uE(xe,xe[te],xe[Xr]);wt.detach(wt.indexOf(i))}}const E=this._adjustIndex(o),S=this._lContainer;!function Su(n,i,o,h){const p=$n+h,E=o.length;h>0&&(o[p-1][Tr]=i),h<E-$n?(i[Tr]=o[p],Ft(o,$n+h,i)):(o.push(i),i[Tr]=null),i[Xr]=o;const S=i[kn];null!==S&&o!==S&&function Fp(n,i){const o=n[gn];i[pn]!==i[Xr][Xr][pn]&&(n[lt]=!0),null===o?n[gn]=[i]:o.push(i)}(S,i);const k=i[Vr];null!==k&&k.insertView(n),i[ir]|=64}(p,h,S,E);const k=Xd(E,S),B=h[ce],Z=Sl(B,S[xt]);return null!==Z&&function Ac(n,i,o,h,p,E){h[Zr]=p,h[te]=i,Jc(n,h,o,1,p,E)}(p,S[te],B,h,Z,k),i.attachToViewContainerRef(),Ft(A0(S),E,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),h=Au(this._lContainer,o);h&&(Ra(A0(this._lContainer),o),xc(h[An],h))}detach(i){const o=this._adjustIndex(i,-1),h=Au(this._lContainer,o);return h&&null!=Ra(A0(this._lContainer),o)?new Eh(h):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(n){return n[Yt]}function A0(n){return n[Yt]||(n[Yt]=[])}function hE(n,i){let o;const h=i[n.index];if(Rr(h))o=h;else{let p;if(8&n.type)p=Ti(h);else{const E=i[ce];p=E.createComment("");const S=Ui(n,i);Ii(E,Sl(E,S),p,function sc(n,i){return n.nextSibling(i)}(E,S),!1)}i[n.index]=o=Qg(h,i,p,n),uu(i,o)}return new uE(o,n,i)}class x0{constructor(i){this.queryList=i,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const h=null!==i.contentQueries?i.contentQueries[0]:o.length,p=[];for(let E=0;E<h;E++){const S=o.getByIndex(E);p.push(this.queries[S.indexInDeclarationView].clone())}return new R0(p)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==IE(i,o).matches&&this.queries[o].setDirty()}}class fE{constructor(i,o,h=null){this.predicate=i,this.flags=o,this.read=h}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let h=0;h<this.length;h++){const p=null!==o?o.length:0,E=this.getByIndex(h).embeddedTView(i,p);E&&(E.indexInDeclarationView=h,null!==o?o.push(E):o=[E])}return null!==o?new M0(o):null}template(i,o){for(let h=0;h<this.queries.length;h++)this.queries[h].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let h=i.parent;for(;null!==h&&8&h.type&&h.index!==o;)h=h.parent;return o===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const E=h[p];this.matchTNodeWithReadOption(i,o,vI(o,E)),this.matchTNodeWithReadOption(i,o,ji(o,i,E,!1,!1))}else h===ki?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ji(o,i,h,!1,!1))}matchTNodeWithReadOption(i,o,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Za||p===Ba||p===ki&&4&o.type)this.addMatch(o.index,-2);else{const E=ji(o,i,p,!1,!1);null!==E&&this.addMatch(o.index,E)}else this.addMatch(o.index,h)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function vI(n,i){const o=n.localNames;if(null!==o)for(let h=0;h<o.length;h+=2)if(o[h]===i)return o[h+1];return null}function EI(n,i,o,h){return-1===o?function _I(n,i){return 11&n.type?Hl(n,i):4&n.type?Is(n,i):null}(i,n):-2===o?function II(n,i,o){return o===Za?Hl(i,n):o===ki?Is(i,n):o===Ba?hE(i,n):void 0}(n,i,h):ea(n,n[An],o,i)}function pE(n,i,o,h){const p=i[Vr].queries[h];if(null===p.matches){const E=n.data,S=o.matches,k=[];for(let B=0;B<S.length;B+=2){const Z=S[B];k.push(Z<0?null:EI(i,E[Z],S[B+1],o.metadata.read))}p.matches=k}return p.matches}function O0(n,i,o,h){const p=n.queries.getByIndex(o),E=p.matches;if(null!==E){const S=pE(n,i,p,o);for(let k=0;k<E.length;k+=2){const B=E[k];if(B>0)h.push(S[k/2]);else{const Z=E[k+1],oe=i[-B];for(let xe=$n;xe<oe.length;xe++){const wt=oe[xe];wt[kn]===wt[Xr]&&O0(wt[An],wt,Z,h)}if(null!==oe[gn]){const xe=oe[gn];for(let wt=0;wt<xe.length;wt++){const Vt=xe[wt];O0(Vt[An],Vt,Z,h)}}}}}return h}function gE(n){const i=I(),o=f(),h=ba();Oo(h+1);const p=IE(o,h);if(n.dirty&&function qo(n){return 4==(4&n[ir])}(i)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const E=p.crossesNgTemplate?O0(o,i,h,[]):pE(o,i,p,h);n.reset(E,cl),n.notifyOnChanges()}return!0}return!1}function mE(n,i,o){const h=f();h.firstCreatePass&&(EE(h,new fE(n,i,o),-1),2==(2&i)&&(h.staticViewQueries=!0)),_E(h,I(),i)}function yE(n,i,o,h){const p=f();if(p.firstCreatePass){const E=ze();EE(p,new fE(i,o,h),E.index),function CI(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}_E(p,I(),o)}function vE(){return function wI(n,i){return n[Vr].queries[i].queryList}(I(),ba())}function _E(n,i,o){const h=new ii(4==(4&o));np(n,i,h,h.destroy),null===i[Vr]&&(i[Vr]=new R0),i[Vr].queries.push(new x0(h))}function EE(n,i,o){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(i,o))}function IE(n,i){return n.queries.getByIndex(i)}function wE(n,i){return Is(n,i)}function k0(n){return!!mi(n)}function g_(...n){}const UE=new Ar("Application Initializer");let m_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=g_,this.reject=g_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const E=this.appInits[p]();if(Eg(E))o.push(E);else if(cv(E)){const S=new Promise((k,B)=>{E.subscribe({complete:k,error:B})});o.push(S)}}Promise.all(o).then(()=>{h()}).catch(p=>{this.reject(p)}),0===o.length&&h(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(gr(UE,8))},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VE=new Ar("AppId",{providedIn:"root",factory:function jE(){return`${B0()}${B0()}${B0()}`}});function B0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HE=new Ar("Platform Initializer"),HI=new Ar("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let zI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const y_=new Ar("LocaleId",{providedIn:"root",factory:()=>$t(y_,nn.Optional|nn.SkipSelf)||function GI(){return typeof $localize<"u"&&$localize.locale||Tp}()}),WI=new Ar("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let qI=(()=>{class n{compileModuleSync(o){return new Sf(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const h=this.compileModuleSync(o),E=uc(mi(o).declarations).reduce((S,k)=>{const B=Pn(k);return B&&S.push(new Xu(B)),S},[]);return new KI(h,E)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class id{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rn(!1),this.onMicrotaskEmpty=new Rn(!1),this.onStable=new Rn(!1),this.onError=new Rn(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&o,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function QI(){let n=Fn.requestAnimationFrame,i=Fn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const h=i[Zone.__symbol__("OriginalDelegate")];h&&(i=h)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function tw(n){const i=()=>{!function ew(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Fn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,h,p,E,S,k)=>{try{return WE(n),o.invokeTask(p,E,S,k)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||n.shouldCoalesceRunChangeDetection)&&i(),KE(n)}},onInvoke:(o,h,p,E,S,k,B)=>{try{return WE(n),o.invoke(p,E,S,k,B)}finally{n.shouldCoalesceRunChangeDetection&&i(),KE(n)}},onHasTask:(o,h,p,E)=>{o.hasTask(p,E),h===p&&("microTask"==E.change?(n._hasPendingMicrotasks=E.microTask,j0(n),V0(n)):"macroTask"==E.change&&(n.hasPendingMacrotasks=E.macroTask))},onHandleError:(o,h,p,E)=>(o.handleError(p,E),n.runOutsideAngular(()=>n.onError.emit(E)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!id.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(id.isInAngularZone())throw new be(909,!1)}run(i,o,h){return this._inner.run(i,o,h)}runTask(i,o,h,p){const E=this._inner,S=E.scheduleEventTask("NgZoneEvent: "+p,i,JI,g_,g_);try{return E.runTask(S,o,h)}finally{E.cancelTask(S)}}runGuarded(i,o,h){return this._inner.runGuarded(i,o,h)}runOutsideAngular(i){return this._outer.run(i)}}const JI={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KE(n){n._nesting--,V0(n)}class nw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rn,this.onMicrotaskEmpty=new Rn,this.onStable=new Rn,this.onError=new Rn}run(i,o,h){return i.apply(o,h)}runGuarded(i,o,h){return i.apply(o,h)}runOutsideAngular(i){return i()}runTask(i,o,h,p){return i.apply(o,h)}}const qE=new Ar(""),YE=new Ar("");let H0,rw=(()=>{class n{constructor(o,h,p){this._ngZone=o,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function iw(n){H0=n}(p),p.addToWindow(h)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{id.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(o)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,h,p){let E=-1;h&&h>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==E),o(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:o,timeoutId:E,updateCb:p})}whenStable(o,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,h,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(gr(id),gr(ZE),gr(YE))},n.\u0275prov=Jt({token:n,factory:n.\u0275fac}),n})(),ZE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,h){this._applications.set(o,h)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,h=!0){var p,E;return null!==(p=null===(E=H0)||void 0===E?void 0:E.findTestabilityInTree(this,o,h))&&void 0!==p?p:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const xf=!1;let Np=null;const XE=new Ar("AllowMultipleToken"),z0=new Ar("PlatformDestroyListeners"),QE=new Ar("appBootstrapListener");class aw{constructor(i,o){this.name=i,this.token=o}}function eI(n,i,o=[]){const h=`Platform: ${i}`,p=new Ar(h);return(E=[])=>{let S=G0();if(!S||S.injector.get(XE,!1)){const k=[...o,...E,{provide:p,useValue:!0}];n?n(k):function lw(n){if(Np&&!Np.get(XE,!1))throw new be(400,!1);Np=n;const i=n.get(nI);(function JE(n){const i=n.get(HE,null);i&&i.forEach(o=>o())})(n)}(function tI(n=[],i){return Wu.create({name:i,providers:[{provide:Vp,useValue:"platform"},{provide:z0,useValue:new Set([()=>Np=null])},...n]})}(k,h))}return function uw(n){const i=G0();if(!i)throw new be(401,!1);return i}()}}function G0(){var n,i;return null!==(n=null===(i=Np)||void 0===i?void 0:i.get(nI))&&void 0!==n?n:null}let nI=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,h){const p=function iI(n,i){let o;return o="noop"===n?new nw:("zone.js"===n?void 0:n)||new id(i),o}(null==h?void 0:h.ngZone,function rI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(h)),E=[{provide:id,useValue:p}];return p.run(()=>{const S=Wu.create({providers:E,parent:this.injector,name:o.moduleType.name}),k=o.create(S),B=k.injector.get(ul,null);if(!B)throw new be(402,!1);return p.runOutsideAngular(()=>{const Z=p.onError.subscribe({next:oe=>{B.handleError(oe)}});k.onDestroy(()=>{__(this._modules,k),Z.unsubscribe()})}),function sI(n,i,o){try{const h=o();return Eg(h)?h.catch(p=>{throw i.runOutsideAngular(()=>n.handleError(p)),p}):h}catch(h){throw i.runOutsideAngular(()=>n.handleError(h)),h}}(B,p,()=>{const Z=k.injector.get(m_);return Z.runInitializers(),Z.donePromise.then(()=>(function Lv(n){gt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ap=n.toLowerCase().replace(/_/g,"-"))}(k.injector.get(y_,Tp)||Tp),this._moduleDoBootstrap(k),k))})})}bootstrapModule(o,h=[]){const p=oI({},h);return function sw(n,i,o){const h=new Sf(o);return Promise.resolve(h)}(0,0,o).then(E=>this.bootstrapModuleFactory(E,p))}_moduleDoBootstrap(o){const h=o.injector.get(v_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new be(-403,!1);o.instance.ngDoBootstrap(h)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const o=this._injector.get(z0,null);o&&(o.forEach(h=>h()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(gr(Wu))},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function oI(n,i){return Array.isArray(i)?i.reduce(oI,n):{...n,...i}}let v_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,h,p){this._zone=o,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new G.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),S=new G.y(k=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{id.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{id.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{B.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Te.T)(E,S.pipe((0,Pe.B)()))}bootstrap(o,h){const p=o instanceof Zh;if(!this._injector.get(m_).done){!p&&ni(o);throw new be(405,xf)}let S;S=p?o:this._injector.get(cc).resolveComponentFactory(o),this.componentTypes.push(S.componentType);const k=function ow(n){return n.isBoundToModule}(S)?void 0:this._injector.get(Qa),Z=S.create(Wu.NULL,[],h||S.selector,k),oe=Z.location.nativeElement,xe=Z.injector.get(qE,null);return null==xe||xe.registerApplication(oe),Z.onDestroy(()=>{this.detachView(Z.hostView),__(this.components,Z),null==xe||xe.unregisterApplication(oe)}),this._loadComponent(Z),Z}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const h=o;this._views.push(h),h.attachToAppRef(this)}detachView(o){const h=o;__(this._views,h),h.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const h=this._injector.get(QE,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>__(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new be(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(gr(id),gr(kc),gr(ul))},n.\u0275prov=Jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function __(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,o){if(so(n)&&!o){const h=Gr(n.index,i);return new Eh(h,h)}return 47&n.type?new Eh(i[pn],i):null}(ze(),I(),16==(16&n))}class dI{constructor(){}supports(i){return ue(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,h=this._removalsHead,p=0,E=null;for(;o||h;){const S=!h||o&&o.currentIndex<fI(h,p,E)?o:h,k=fI(S,p,E),B=S.currentIndex;if(S===h)p--,h=h._nextRemoved;else if(o=o._next,null==S.previousIndex)p++;else{E||(E=[]);const Z=k-p,oe=B-p;if(Z!=oe){for(let wt=0;wt<Z;wt++){const Vt=wt<E.length?E[wt]:E[wt]=0,fn=Vt+wt;oe<=fn&&fn<Z&&(E[wt]=Vt+1)}E[S.previousIndex]=oe-Z}}k!==B&&i(S,k,B)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!ue(i))throw new be(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let p,E,S,o=this._itHead,h=!1;if(Array.isArray(i)){this.length=i.length;for(let k=0;k<this.length;k++)E=i[k],S=this._trackByFn(k,E),null!==o&&Object.is(o.trackById,S)?(h&&(o=this._verifyReinsertion(o,E,S,k)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,S,k),h=!0),o=o._next}else p=0,function Rt(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let h;for(;!(h=o.next()).done;)i(h.value)}}(i,k=>{S=this._trackByFn(p,k),null!==o&&Object.is(o.trackById,S)?(h&&(o=this._verifyReinsertion(o,k,S,p)),Object.is(o.item,k)||this._addIdentityChange(o,k)):(o=this._mismatch(o,k,S,p),h=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,h,p){let E;return null===i?E=this._itTail:(E=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,E,p)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,E,p)):i=this._addAfter(new Cw(o,h),E,p),i}_verifyReinsertion(i,o,h,p){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==E?i=this._reinsertAfter(E,i._prev,p):i.currentIndex!=p&&(i.currentIndex=p,this._addToMoves(i,p)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const p=i._prevRemoved,E=i._nextRemoved;return null===p?this._removalsHead=E:p._nextRemoved=E,null===E?this._removalsTail=p:E._prevRemoved=p,this._insertAfter(i,o,h),this._addToMoves(i,h),i}_moveAfter(i,o,h){return this._unlink(i),this._insertAfter(i,o,h),this._addToMoves(i,h),i}_addAfter(i,o,h){return this._insertAfter(i,o,h),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,h){const p=null===o?this._itHead:o._next;return i._next=p,i._prev=o,null===p?this._itTail=i:p._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new hI),this._linkedRecords.put(i),i.currentIndex=h,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,h=i._next;return null===o?this._itHead=h:o._next=h,null===h?this._itTail=o:h._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Cw{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===o||o<=h.currentIndex)&&Object.is(h.trackById,i))return h;return null}remove(i){const o=i._prevDup,h=i._nextDup;return null===o?this._head=h:o._nextDup=h,null===h?this._tail=o:h._prevDup=o,null===this._head}}class hI{constructor(){this.map=new Map}put(i){const o=i.trackById;let h=this.map.get(o);h||(h=new bw,this.map.set(o,h)),h.add(i)}get(i,o){const p=this.map.get(i);return p?p.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fI(n,i,o){const h=n.previousIndex;if(null===h)return h;let p=0;return o&&h<o.length&&(p=o[h]),h+i+p}class pI{constructor(){}supports(i){return i instanceof Map||Gt(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Gt(i)))throw new be(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(h,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,h),this._appendAfter=o,o=o._next;else{const E=this._getOrCreateRecordForKey(p,h);o=this._insertBeforeOrAppend(o,E)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let h=o;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const h=i._prev;return o._next=i,o._prev=h,i._prev=o,h&&(h._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const p=this._records.get(i);this._maybeAddToChanges(p,o);const E=p._prev,S=p._next;return E&&(E._next=S),S&&(S._prev=E),p._next=null,p._prev=null,p}const h=new Tw(i);return this._records.set(i,h),h.currentValue=o,this._addToAdditions(h),h}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(h=>o(i[h],h))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gI(){return new Z0([new dI])}let Z0=(()=>{class n{constructor(o){this.factories=o}static create(o,h){if(null!=h){const p=h.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:h=>n.create(o,h||gI()),deps:[[n,new _s,new Ai]]}}find(o){const h=this.factories.find(p=>p.supports(o));if(null!=h)return h;throw new be(901,!1)}}return n.\u0275prov=Jt({token:n,providedIn:"root",factory:gI}),n})();function mI(){return new X0([new pI])}let X0=(()=>{class n{constructor(o){this.factories=o}static create(o,h){if(h){const p=h.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:h=>n.create(o,h||mI()),deps:[[n,new _s,new Ai]]}}find(o){const h=this.factories.find(p=>p.supports(o));if(h)return h;throw new be(901,!1)}}return n.\u0275prov=Jt({token:n,providedIn:"root",factory:mI}),n})();const xw=eI(null,"core",[]);let Rw=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(gr(v_))},n.\u0275mod=Ct({type:n}),n.\u0275inj=Tt({}),n})();function Mw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(_n,It,L)=>{"use strict";L.d(It,{Fj:()=>ft,qu:()=>Xs,NI:()=>Kt,u:()=>lo,sg:()=>oo,u5:()=>xi,nD:()=>uo,JU:()=>ut,a5:()=>ui,JJ:()=>Fr,JL:()=>Fn,F:()=>nt,On:()=>Yt,c5:()=>Gr,UX:()=>Us,Q7:()=>Ls,kI:()=>it,_Y:()=>gn});var c=L(4650),q=L(6895),G=L(8996),Te=L(9751),Pe=L(4742),Fe=L(8421),ge=L(7669),Se=L(5403),Ue=L(3268),pe=L(1810),de=L(4004);let Oe=(()=>{class y{constructor(f,T){this._renderer=f,this._elementRef=T,this.onChange=K=>{},this.onTouched=()=>{}}setProperty(f,T){this._renderer.setProperty(this._elementRef.nativeElement,f,T)}registerOnTouched(f){this.onTouched=f}registerOnChange(f){this.onChange=f}setDisabledState(f){this.setProperty("disabled",f)}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.Qsj),c.Y36(c.SBq))},y.\u0275dir=c.lG2({type:y}),y})(),Ge=(()=>{class y extends Oe{}return y.\u0275fac=function(){let I;return function(T){return(I||(I=c.n5z(y)))(T||y)}}(),y.\u0275dir=c.lG2({type:y,features:[c.qOj]}),y})();const ut=new c.OlP("NgValueAccessor"),Ie={provide:ut,useExisting:(0,c.Gpc)(()=>ft),multi:!0},dt=new c.OlP("CompositionEventMode");let ft=(()=>{class y extends Oe{constructor(f,T,K){super(f,T),this._compositionMode=K,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function he(){const y=(0,q.q)()?(0,q.q)().getUserAgent():"";return/android (\d+)/.test(y.toLowerCase())}())}writeValue(f){this.setProperty("value",null==f?"":f)}_handleInput(f){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(f)}_compositionStart(){this._composing=!0}_compositionEnd(f){this._composing=!1,this._compositionMode&&this.onChange(f)}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(dt,8))},y.\u0275dir=c.lG2({type:y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(f,T){1&f&&c.NdJ("input",function(ze){return T._handleInput(ze.target.value)})("blur",function(){return T.onTouched()})("compositionstart",function(){return T._compositionStart()})("compositionend",function(ze){return T._compositionEnd(ze.target.value)})},features:[c._Bn([Ie]),c.qOj]}),y})();const qe=!1;function Je(y){return null==y||("string"==typeof y||Array.isArray(y))&&0===y.length}function Le(y){return null!=y&&"number"==typeof y.length}const ke=new c.OlP("NgValidators"),H=new c.OlP("NgAsyncValidators"),De=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class it{static min(I){return function Be(y){return I=>{if(Je(I.value)||Je(y))return null;const f=parseFloat(I.value);return!isNaN(f)&&f<y?{min:{min:y,actual:I.value}}:null}}(I)}static max(I){return function _t(y){return I=>{if(Je(I.value)||Je(y))return null;const f=parseFloat(I.value);return!isNaN(f)&&f>y?{max:{max:y,actual:I.value}}:null}}(I)}static required(I){return yt(I)}static requiredTrue(I){return function ot(y){return!0===y.value?null:{required:!0}}(I)}static email(I){return function at(y){return Je(y.value)||De.test(y.value)?null:{email:!0}}(I)}static minLength(I){return function Xe(y){return I=>Je(I.value)||!Le(I.value)?null:I.value.length<y?{minlength:{requiredLength:y,actualLength:I.value.length}}:null}(I)}static maxLength(I){return Ae(I)}static pattern(I){return Me(I)}static nullValidator(I){return null}static compose(I){return tn(I)}static composeAsync(I){return Hn(I)}}function yt(y){return Je(y.value)?{required:!0}:null}function Ae(y){return I=>Le(I.value)&&I.value.length>y?{maxlength:{requiredLength:y,actualLength:I.value.length}}:null}function Me(y){if(!y)return we;let I,f;return"string"==typeof y?(f="","^"!==y.charAt(0)&&(f+="^"),f+=y,"$"!==y.charAt(y.length-1)&&(f+="$"),I=new RegExp(f)):(f=y.toString(),I=y),T=>{if(Je(T.value))return null;const K=T.value;return I.test(K)?null:{pattern:{requiredPattern:f,actualValue:K}}}}function we(y){return null}function gt(y){return null!=y}function et(y){const I=(0,c.QGY)(y)?(0,G.D)(y):y;if(qe&&!(0,c.CqO)(I)){let f="Expected async validator to return Promise or Observable.";throw"object"==typeof y&&(f+=" Are you using a synchronous validator where an async validator is expected?"),new c.vHH(-1101,f)}return I}function Qe(y){let I={};return y.forEach(f=>{I=null!=f?{...I,...f}:I}),0===Object.keys(I).length?null:I}function Ke(y,I){return I.map(f=>f(y))}function Jt(y){return y.map(I=>function jt(y){return!y.validate}(I)?I:f=>I.validate(f))}function tn(y){if(!y)return null;const I=y.filter(gt);return 0==I.length?null:function(f){return Qe(Ke(f,I))}}function Tt(y){return null!=y?tn(Jt(y)):null}function Hn(y){if(!y)return null;const I=y.filter(gt);return 0==I.length?null:function(f){return function re(...y){const I=(0,ge.jO)(y),{args:f,keys:T}=(0,Pe.D)(y),K=new Te.y(ze=>{const{length:an}=f;if(!an)return void ze.complete();const En=new Array(an);let Xn=an,Sr=an;for(let di=0;di<an;di++){let $r=!1;(0,Fe.Xf)(f[di]).subscribe((0,Se.x)(ze,ms=>{$r||($r=!0,Sr--),En[di]=ms},()=>Xn--,void 0,()=>{(!Xn||!$r)&&(Sr||ze.next(T?(0,pe.n)(T,En):En),ze.complete())}))}});return I?K.pipe((0,Ue.Z)(I)):K}(Ke(f,I).map(et)).pipe((0,de.U)(Qe))}}function Gn(y){return null!=y?Hn(Jt(y)):null}function ar(y,I){return null===y?[I]:Array.isArray(y)?[...y,I]:[y,I]}function cn(y){return y._rawValidators}function lr(y){return y._rawAsyncValidators}function hr(y){return y?Array.isArray(y)?y:[y]:[]}function Cr(y,I){return Array.isArray(y)?y.includes(I):y===I}function Pr(y,I){const f=hr(I);return hr(y).forEach(K=>{Cr(f,K)||f.push(K)}),f}function Un(y,I){return hr(I).filter(f=>!Cr(y,f))}class tr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(I){this._rawValidators=I||[],this._composedValidatorFn=Tt(this._rawValidators)}_setAsyncValidators(I){this._rawAsyncValidators=I||[],this._composedAsyncValidatorFn=Gn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(I){this._onDestroyCallbacks.push(I)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(I=>I()),this._onDestroyCallbacks=[]}reset(I){this.control&&this.control.reset(I)}hasError(I,f){return!!this.control&&this.control.hasError(I,f)}getError(I,f){return this.control?this.control.getError(I,f):null}}class nn extends tr{get formDirective(){return null}get path(){return null}}class ui extends tr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ei{constructor(I){this._cd=I}get isTouched(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.touched)}get isUntouched(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.untouched)}get isPristine(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.pristine)}get isDirty(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.dirty)}get isValid(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.valid)}get isInvalid(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.invalid)}get isPending(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.pending)}get isSubmitted(){var I;return!(null===(I=this._cd)||void 0===I||!I.submitted)}}let Fr=(()=>{class y extends ei{constructor(f){super(f)}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(ui,2))},y.\u0275dir=c.lG2({type:y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(f,T){2&f&&c.ekj("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)},features:[c.qOj]}),y})(),Fn=(()=>{class y extends ei{constructor(f){super(f)}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(nn,10))},y.\u0275dir=c.lG2({type:y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(f,T){2&f&&c.ekj("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)("ng-submitted",T.isSubmitted)},features:[c.qOj]}),y})();function gr(y,I){return y?`with name: '${I}'`:`at index: ${I}`}const rt=!1,Xt="VALID",Lt="INVALID",_e="PENDING",me="DISABLED";function He(y){return($e(y)?y.validators:y)||null}function pt(y,I){return($e(I)?I.asyncValidators:y)||null}function $e(y){return null!=y&&!Array.isArray(y)&&"object"==typeof y}function Ve(y,I,f){const T=y.controls;if(!(I?Object.keys(T):T).length)throw new c.vHH(1e3,rt?function zr(y){return`\n    There are no form controls registered with this ${y?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(I):"");if(!T[f])throw new c.vHH(1001,rt?function $t(y,I){return`Cannot find form control ${gr(y,I)}`}(I,f):"")}function fe(y,I,f){y._forEachChild((T,K)=>{if(void 0===f[K])throw new c.vHH(1002,rt?function We(y,I){return`Must supply a value for form control ${gr(y,I)}`}(I,K):"")})}class Ye{constructor(I,f){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(I),this._assignAsyncValidators(f)}get validator(){return this._composedValidatorFn}set validator(I){this._rawValidators=this._composedValidatorFn=I}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(I){this._rawAsyncValidators=this._composedAsyncValidatorFn=I}get parent(){return this._parent}get valid(){return this.status===Xt}get invalid(){return this.status===Lt}get pending(){return this.status==_e}get disabled(){return this.status===me}get enabled(){return this.status!==me}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(I){this._assignValidators(I)}setAsyncValidators(I){this._assignAsyncValidators(I)}addValidators(I){this.setValidators(Pr(I,this._rawValidators))}addAsyncValidators(I){this.setAsyncValidators(Pr(I,this._rawAsyncValidators))}removeValidators(I){this.setValidators(Un(I,this._rawValidators))}removeAsyncValidators(I){this.setAsyncValidators(Un(I,this._rawAsyncValidators))}hasValidator(I){return Cr(this._rawValidators,I)}hasAsyncValidator(I){return Cr(this._rawAsyncValidators,I)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(I={}){this.touched=!0,this._parent&&!I.onlySelf&&this._parent.markAsTouched(I)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(I=>I.markAllAsTouched())}markAsUntouched(I={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(f=>{f.markAsUntouched({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}markAsDirty(I={}){this.pristine=!1,this._parent&&!I.onlySelf&&this._parent.markAsDirty(I)}markAsPristine(I={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(f=>{f.markAsPristine({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}markAsPending(I={}){this.status=_e,!1!==I.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!I.onlySelf&&this._parent.markAsPending(I)}disable(I={}){const f=this._parentMarkedDirty(I.onlySelf);this.status=me,this.errors=null,this._forEachChild(T=>{T.disable({...I,onlySelf:!0})}),this._updateValue(),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...I,skipPristineCheck:f}),this._onDisabledChange.forEach(T=>T(!0))}enable(I={}){const f=this._parentMarkedDirty(I.onlySelf);this.status=Xt,this._forEachChild(T=>{T.enable({...I,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent}),this._updateAncestors({...I,skipPristineCheck:f}),this._onDisabledChange.forEach(T=>T(!1))}_updateAncestors(I){this._parent&&!I.onlySelf&&(this._parent.updateValueAndValidity(I),I.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(I){this._parent=I}getRawValue(){return this.value}updateValueAndValidity(I={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xt||this.status===_e)&&this._runAsyncValidator(I.emitEvent)),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!I.onlySelf&&this._parent.updateValueAndValidity(I)}_updateTreeValidity(I={emitEvent:!0}){this._forEachChild(f=>f._updateTreeValidity(I)),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?me:Xt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(I){if(this.asyncValidator){this.status=_e,this._hasOwnPendingAsyncValidator=!0;const f=et(this.asyncValidator(this));this._asyncValidationSubscription=f.subscribe(T=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(T,{emitEvent:I})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(I,f={}){this.errors=I,this._updateControlsErrors(!1!==f.emitEvent)}get(I){let f=I;return null==f||(Array.isArray(f)||(f=f.split(".")),0===f.length)?null:f.reduce((T,K)=>T&&T._find(K),this)}getError(I,f){const T=f?this.get(f):this;return T&&T.errors?T.errors[I]:null}hasError(I,f){return!!this.getError(I,f)}get root(){let I=this;for(;I._parent;)I=I._parent;return I}_updateControlsErrors(I){this.status=this._calculateStatus(),I&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(I)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?me:this.errors?Lt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_e)?_e:this._anyControlsHaveStatus(Lt)?Lt:Xt}_anyControlsHaveStatus(I){return this._anyControls(f=>f.status===I)}_anyControlsDirty(){return this._anyControls(I=>I.dirty)}_anyControlsTouched(){return this._anyControls(I=>I.touched)}_updatePristine(I={}){this.pristine=!this._anyControlsDirty(),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}_updateTouched(I={}){this.touched=this._anyControlsTouched(),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}_registerOnCollectionChange(I){this._onCollectionChange=I}_setUpdateStrategy(I){$e(I)&&null!=I.updateOn&&(this._updateOn=I.updateOn)}_parentMarkedDirty(I){return!I&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(I){return null}_assignValidators(I){this._rawValidators=Array.isArray(I)?I.slice():I,this._composedValidatorFn=function At(y){return Array.isArray(y)?Tt(y):y||null}(this._rawValidators)}_assignAsyncValidators(I){this._rawAsyncValidators=Array.isArray(I)?I.slice():I,this._composedAsyncValidatorFn=function yn(y){return Array.isArray(y)?Gn(y):y||null}(this._rawAsyncValidators)}}class kt extends Ye{constructor(I,f,T){super(He(f),pt(T,f)),this.controls=I,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(I,f){return this.controls[I]?this.controls[I]:(this.controls[I]=f,f.setParent(this),f._registerOnCollectionChange(this._onCollectionChange),f)}addControl(I,f,T={}){this.registerControl(I,f),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}removeControl(I,f={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}setControl(I,f,T={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],f&&this.registerControl(I,f),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}contains(I){return this.controls.hasOwnProperty(I)&&this.controls[I].enabled}setValue(I,f={}){fe(this,!0,I),Object.keys(I).forEach(T=>{Ve(this,!0,T),this.controls[T].setValue(I[T],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(I,f={}){null!=I&&(Object.keys(I).forEach(T=>{const K=this.controls[T];K&&K.patchValue(I[T],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(I={},f={}){this._forEachChild((T,K)=>{T.reset(I[K],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this._reduceChildren({},(I,f,T)=>(I[T]=f.getRawValue(),I))}_syncPendingControls(){let I=this._reduceChildren(!1,(f,T)=>!!T._syncPendingControls()||f);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){Object.keys(this.controls).forEach(f=>{const T=this.controls[f];T&&I(T,f)})}_setUpControls(){this._forEachChild(I=>{I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(I){for(const[f,T]of Object.entries(this.controls))if(this.contains(f)&&I(T))return!0;return!1}_reduceValue(){return this._reduceChildren({},(f,T,K)=>((T.enabled||this.disabled)&&(f[K]=T.value),f))}_reduceChildren(I,f){let T=I;return this._forEachChild((K,ze)=>{T=f(T,K,ze)}),T}_allControlsDisabled(){for(const I of Object.keys(this.controls))if(this.controls[I].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(I){return this.controls.hasOwnProperty(I)?this.controls[I]:null}}class St extends kt{}const Ut=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>je}),je="always";function Ne(y,I){return[...I.path,y]}function Ct(y,I,f=je){var T,K;Kn(y,I),I.valueAccessor.writeValue(y.value),(y.disabled||"always"===f)&&(null===(T=(K=I.valueAccessor).setDisabledState)||void 0===T||T.call(K,y.disabled)),function cr(y,I){I.valueAccessor.registerOnChange(f=>{y._pendingValue=f,y._pendingChange=!0,y._pendingDirty=!0,"change"===y.updateOn&&ni(y,I)})}(y,I),function mi(y,I){const f=(T,K)=>{I.valueAccessor.writeValue(T),K&&I.viewToModelUpdate(T)};y.registerOnChange(f),I._registerOnDestroy(()=>{y._unregisterOnChange(f)})}(y,I),function Qn(y,I){I.valueAccessor.registerOnTouched(()=>{y._pendingTouched=!0,"blur"===y.updateOn&&y._pendingChange&&ni(y,I),"submit"!==y.updateOn&&y.markAsTouched()})}(y,I),function Sn(y,I){if(I.valueAccessor.setDisabledState){const f=T=>{I.valueAccessor.setDisabledState(T)};y.registerOnDisabledChange(f),I._registerOnDestroy(()=>{y._unregisterOnDisabledChange(f)})}}(y,I)}function Nt(y,I,f=!0){const T=()=>{};I.valueAccessor&&(I.valueAccessor.registerOnChange(T),I.valueAccessor.registerOnTouched(T)),Pn(y,I),y&&(I._invokeOnDestroyCallbacks(),y._registerOnCollectionChange(()=>{}))}function un(y,I){y.forEach(f=>{f.registerOnValidatorChange&&f.registerOnValidatorChange(I)})}function Kn(y,I){const f=cn(y);null!==I.validator?y.setValidators(ar(f,I.validator)):"function"==typeof f&&y.setValidators([f]);const T=lr(y);null!==I.asyncValidator?y.setAsyncValidators(ar(T,I.asyncValidator)):"function"==typeof T&&y.setAsyncValidators([T]);const K=()=>y.updateValueAndValidity();un(I._rawValidators,K),un(I._rawAsyncValidators,K)}function Pn(y,I){let f=!1;if(null!==y){if(null!==I.validator){const K=cn(y);if(Array.isArray(K)&&K.length>0){const ze=K.filter(an=>an!==I.validator);ze.length!==K.length&&(f=!0,y.setValidators(ze))}}if(null!==I.asyncValidator){const K=lr(y);if(Array.isArray(K)&&K.length>0){const ze=K.filter(an=>an!==I.asyncValidator);ze.length!==K.length&&(f=!0,y.setAsyncValidators(ze))}}}const T=()=>{};return un(I._rawValidators,T),un(I._rawAsyncValidators,T),f}function ni(y,I){y._pendingDirty&&y.markAsDirty(),y.setValue(y._pendingValue,{emitModelToViewChange:!1}),I.viewToModelUpdate(y._pendingValue),y._pendingChange=!1}function li(y,I){Kn(y,I)}function Tr(y,I){if(!y.hasOwnProperty("model"))return!1;const f=y.model;return!!f.isFirstChange()||!Object.is(I,f.currentValue)}function te(y,I){y._syncPendingControls(),I.forEach(f=>{const T=f.control;"submit"===T.updateOn&&T._pendingChange&&(f.viewToModelUpdate(T._pendingValue),T._pendingChange=!1)})}function Ee(y,I){if(!I)return null;let f,T,K;return Array.isArray(I),I.forEach(ze=>{ze.constructor===ft?f=ze:function Wi(y){return Object.getPrototypeOf(y.constructor)===Ge}(ze)?T=ze:K=ze}),K||T||f||null}const Ht={provide:nn,useExisting:(0,c.Gpc)(()=>nt)},ce=(()=>Promise.resolve())();let nt=(()=>{class y extends nn{constructor(f,T,K){super(),this.callSetDisabledState=K,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new kt({},Tt(f),Gn(T))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(f){ce.then(()=>{const T=this._findContainer(f.path);f.control=T.registerControl(f.name,f.control),Ct(f.control,f,this.callSetDisabledState),f.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(f)})}getControl(f){return this.form.get(f.path)}removeControl(f){ce.then(()=>{const T=this._findContainer(f.path);T&&T.removeControl(f.name),this._directives.delete(f)})}addFormGroup(f){ce.then(()=>{const T=this._findContainer(f.path),K=new kt({});li(K,f),T.registerControl(f.name,K),K.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(f){ce.then(()=>{const T=this._findContainer(f.path);T&&T.removeControl(f.name)})}getFormGroup(f){return this.form.get(f.path)}updateModel(f,T){ce.then(()=>{this.form.get(f.path).setValue(T)})}setValue(f){this.control.setValue(f)}onSubmit(f){var T;return this.submitted=!0,te(this.form,this._directives),this.ngSubmit.emit(f),"dialog"===(null==f||null===(T=f.target)||void 0===T?void 0:T.method)}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(f){return f.pop(),f.length?this.form.get(f):this.form}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(ke,10),c.Y36(H,10),c.Y36(Ut,8))},y.\u0275dir=c.lG2({type:y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(f,T){1&f&&c.NdJ("submit",function(ze){return T.onSubmit(ze)})("reset",function(){return T.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Ht]),c.qOj]}),y})();function Et(y,I){const f=y.indexOf(I);f>-1&&y.splice(f,1)}function qt(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}const Kt=class extends Ye{constructor(I=null,f,T){super(He(f),pt(T,f)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(I),this._setUpdateStrategy(f),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$e(f)&&(f.nonNullable||f.initialValueIsDefault)&&(this.defaultValue=qt(I)?I.value:I)}setValue(I,f={}){this.value=this._pendingValue=I,this._onChange.length&&!1!==f.emitModelToViewChange&&this._onChange.forEach(T=>T(this.value,!1!==f.emitViewToModelChange)),this.updateValueAndValidity(f)}patchValue(I,f={}){this.setValue(I,f)}reset(I=this.defaultValue,f={}){this._applyFormState(I),this.markAsPristine(f),this.markAsUntouched(f),this.setValue(this.value,f),this._pendingChange=!1}_updateValue(){}_anyControls(I){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(I){this._onChange.push(I)}_unregisterOnChange(I){Et(this._onChange,I)}registerOnDisabledChange(I){this._onDisabledChange.push(I)}_unregisterOnDisabledChange(I){Et(this._onDisabledChange,I)}_forEachChild(I){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(I){qt(I)?(this.value=this._pendingValue=I.value,I.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=I}},lt={provide:ui,useExisting:(0,c.Gpc)(()=>Yt)},xt=(()=>Promise.resolve())();let Yt=(()=>{class y extends ui{constructor(f,T,K,ze,an,En){super(),this._changeDetectorRef=an,this.callSetDisabledState=En,this.control=new Kt,this._registered=!1,this.update=new c.vpe,this._parent=f,this._setValidators(T),this._setAsyncValidators(K),this.valueAccessor=Ee(0,ze)}ngOnChanges(f){if(this._checkForErrors(),!this._registered||"name"in f){if(this._registered&&(this._checkName(),this.formDirective)){const T=f.name.previousValue;this.formDirective.removeControl({name:T,path:this._getPath(T)})}this._setUpControl()}"isDisabled"in f&&this._updateDisabled(f),Tr(f,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ct(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(f){xt.then(()=>{var T;this.control.setValue(f,{emitViewToModelChange:!1}),null===(T=this._changeDetectorRef)||void 0===T||T.markForCheck()})}_updateDisabled(f){const T=f.isDisabled.currentValue,K=0!==T&&(0,c.D6c)(T);xt.then(()=>{var ze;K&&!this.control.disabled?this.control.disable():!K&&this.control.disabled&&this.control.enable(),null===(ze=this._changeDetectorRef)||void 0===ze||ze.markForCheck()})}_getPath(f){return this._parent?Ne(f,this._parent):[f]}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(nn,9),c.Y36(ke,10),c.Y36(H,10),c.Y36(ut,10),c.Y36(c.sBO,8),c.Y36(Ut,8))},y.\u0275dir=c.lG2({type:y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([lt]),c.qOj,c.TTD]}),y})(),gn=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275dir=c.lG2({type:y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),y})(),as=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({}),y})();const Wo=new c.OlP("NgModelWithFormControlWarning"),Ro={provide:nn,useExisting:(0,c.Gpc)(()=>oo)};let oo=(()=>{class y extends nn{constructor(f,T,K){super(),this.callSetDisabledState=K,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(f),this._setAsyncValidators(T)}ngOnChanges(f){this._checkFormPresent(),f.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(f){const T=this.form.get(f.path);return Ct(T,f,this.callSetDisabledState),T.updateValueAndValidity({emitEvent:!1}),this.directives.push(f),T}getControl(f){return this.form.get(f.path)}removeControl(f){Nt(f.control||null,f,!1),function tt(y,I){const f=y.indexOf(I);f>-1&&y.splice(f,1)}(this.directives,f)}addFormGroup(f){this._setUpFormContainer(f)}removeFormGroup(f){this._cleanUpFormContainer(f)}getFormGroup(f){return this.form.get(f.path)}addFormArray(f){this._setUpFormContainer(f)}removeFormArray(f){this._cleanUpFormContainer(f)}getFormArray(f){return this.form.get(f.path)}updateModel(f,T){this.form.get(f.path).setValue(T)}onSubmit(f){var T;return this.submitted=!0,te(this.form,this.directives),this.ngSubmit.emit(f),"dialog"===(null==f||null===(T=f.target)||void 0===T?void 0:T.method)}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_updateDomValue(){this.directives.forEach(f=>{const T=f.control,K=this.form.get(f.path);T!==K&&(Nt(T||null,f),(y=>y instanceof Kt)(K)&&(Ct(K,f,this.callSetDisabledState),f.control=K))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(f){const T=this.form.get(f.path);li(T,f),T.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(f){if(this.form){const T=this.form.get(f.path);T&&function Pi(y,I){return Pn(y,I)}(T,f)&&T.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Kn(this.form,this),this._oldForm&&Pn(this._oldForm,this)}_checkFormPresent(){}}return y.\u0275fac=function(f){return new(f||y)(c.Y36(ke,10),c.Y36(H,10),c.Y36(Ut,8))},y.\u0275dir=c.lG2({type:y,selectors:[["","formGroup",""]],hostBindings:function(f,T){1&f&&c.NdJ("submit",function(ze){return T.onSubmit(ze)})("reset",function(){return T.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Ro]),c.qOj,c.TTD]}),y})();const Pl={provide:ui,useExisting:(0,c.Gpc)(()=>lo)};let lo=(()=>{class y extends ui{set isDisabled(f){}constructor(f,T,K,ze,an){super(),this._ngModelWarningConfig=an,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=f,this._setValidators(T),this._setAsyncValidators(K),this.valueAccessor=Ee(0,ze)}ngOnChanges(f){this._added||this._setUpControl(),Tr(f,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}get path(){return Ne(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return y._ngModelWarningSentOnce=!1,y.\u0275fac=function(f){return new(f||y)(c.Y36(nn,13),c.Y36(ke,10),c.Y36(H,10),c.Y36(ut,10),c.Y36(Wo,8))},y.\u0275dir=c.lG2({type:y,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Pl]),c.qOj,c.TTD]}),y})();let ns=(()=>{class y{constructor(){this._validator=we}ngOnChanges(f){if(this.inputName in f){const T=this.normalizeInput(f[this.inputName].currentValue);this._enabled=this.enabled(T),this._validator=this._enabled?this.createValidator(T):we,this._onChange&&this._onChange()}}validate(f){return this._validator(f)}registerOnValidatorChange(f){this._onChange=f}enabled(f){return null!=f}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275dir=c.lG2({type:y,features:[c.TTD]}),y})();const As={provide:ke,useExisting:(0,c.Gpc)(()=>Ls),multi:!0};let Ls=(()=>{class y extends ns{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=f=>yt}enabled(f){return f}}return y.\u0275fac=function(){let I;return function(T){return(I||(I=c.n5z(y)))(T||y)}}(),y.\u0275dir=c.lG2({type:y,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(f,T){2&f&&c.uIk("required",T._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([As]),c.qOj]}),y})();const Ua={provide:ke,useExisting:(0,c.Gpc)(()=>uo),multi:!0};let uo=(()=>{class y extends ns{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=f=>function co(y){return"number"==typeof y?y:parseInt(y,10)}(f),this.createValidator=f=>Ae(f)}}return y.\u0275fac=function(){let I;return function(T){return(I||(I=c.n5z(y)))(T||y)}}(),y.\u0275dir=c.lG2({type:y,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(f,T){2&f&&c.uIk("maxlength",T._enabled?T.maxlength:null)},inputs:{maxlength:"maxlength"},features:[c._Bn([Ua]),c.qOj]}),y})();const $s={provide:ke,useExisting:(0,c.Gpc)(()=>Gr),multi:!0};let Gr=(()=>{class y extends ns{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=f=>f,this.createValidator=f=>Me(f)}}return y.\u0275fac=function(){let I;return function(T){return(I||(I=c.n5z(y)))(T||y)}}(),y.\u0275dir=c.lG2({type:y,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(f,T){2&f&&c.uIk("pattern",T._enabled?T.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([$s]),c.qOj]}),y})(),gs=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({imports:[as]}),y})();class Yo extends Ye{constructor(I,f,T){super(He(f),pt(T,f)),this.controls=I,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(I){return this.controls[this._adjustIndex(I)]}push(I,f={}){this.controls.push(I),this._registerControl(I),this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}insert(I,f,T={}){this.controls.splice(I,0,f),this._registerControl(f),this.updateValueAndValidity({emitEvent:T.emitEvent})}removeAt(I,f={}){let T=this._adjustIndex(I);T<0&&(T=0),this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),this.controls.splice(T,1),this.updateValueAndValidity({emitEvent:f.emitEvent})}setControl(I,f,T={}){let K=this._adjustIndex(I);K<0&&(K=0),this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),this.controls.splice(K,1),f&&(this.controls.splice(K,0,f),this._registerControl(f)),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(I,f={}){fe(this,!1,I),I.forEach((T,K)=>{Ve(this,!1,K),this.at(K).setValue(T,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(I,f={}){null!=I&&(I.forEach((T,K)=>{this.at(K)&&this.at(K).patchValue(T,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(I=[],f={}){this._forEachChild((T,K)=>{T.reset(I[K],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this.controls.map(I=>I.getRawValue())}clear(I={}){this.controls.length<1||(this._forEachChild(f=>f._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:I.emitEvent}))}_adjustIndex(I){return I<0?I+this.length:I}_syncPendingControls(){let I=this.controls.reduce((f,T)=>!!T._syncPendingControls()||f,!1);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){this.controls.forEach((f,T)=>{I(f,T)})}_updateValue(){this.value=this.controls.filter(I=>I.enabled||this.disabled).map(I=>I.value)}_anyControls(I){return this.controls.some(f=>f.enabled&&I(f))}_setUpControls(){this._forEachChild(I=>this._registerControl(I))}_allControlsDisabled(){for(const I of this.controls)if(I.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(I){I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)}_find(I){var f;return null!==(f=this.at(I))&&void 0!==f?f:null}}function ho(y){return!!y&&(void 0!==y.asyncValidators||void 0!==y.validators||void 0!==y.updateOn)}let Xs=(()=>{class y{constructor(){this.useNonNullable=!1}get nonNullable(){const f=new y;return f.useNonNullable=!0,f}group(f,T=null){const K=this._reduceControls(f);let ze={};return ho(T)?ze=T:null!==T&&(ze.validators=T.validator,ze.asyncValidators=T.asyncValidator),new kt(K,ze)}record(f,T=null){const K=this._reduceControls(f);return new St(K,T)}control(f,T,K){let ze={};return this.useNonNullable?(ho(T)?ze=T:(ze.validators=T,ze.asyncValidators=K),new Kt(f,{...ze,nonNullable:!0})):new Kt(f,T,K)}array(f,T,K){const ze=f.map(an=>this._createControl(an));return new Yo(ze,T,K)}_reduceControls(f){const T={};return Object.keys(f).forEach(K=>{T[K]=this._createControl(f[K])}),T}_createControl(f){return f instanceof Kt||f instanceof Ye?f:Array.isArray(f)?this.control(f[0],f.length>1?f[1]:null,f.length>2?f[2]:null):this.control(f)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),xi=(()=>{class y{static withConfig(f){var T;return{ngModule:y,providers:[{provide:Ut,useValue:null!==(T=f.callSetDisabledState)&&void 0!==T?T:je}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({imports:[gs]}),y})(),Us=(()=>{class y{static withConfig(f){var T,K;return{ngModule:y,providers:[{provide:Wo,useValue:null!==(T=f.warnOnNgModelWithFormControl)&&void 0!==T?T:"always"},{provide:Ut,useValue:null!==(K=f.callSetDisabledState)&&void 0!==K?K:je}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({imports:[gs]}),y})()},1481:(_n,It,L)=>{"use strict";L.d(It,{Dx:()=>Fn,H7:()=>He,b2:()=>ui,q6:()=>Pr});var c=L(6895),q=L(4650);class G extends c.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Te extends G{static makeCurrent(){(0,c.HT)(new Te)}onAndCancel(Ve,fe,Ye){return Ve.addEventListener(fe,Ye,!1),()=>{Ve.removeEventListener(fe,Ye,!1)}}dispatchEvent(Ve,fe){Ve.dispatchEvent(fe)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,fe){return(fe=fe||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,fe){return"window"===fe?window:"document"===fe?Ve:"body"===fe?Ve.body:null}getBaseHref(Ve){const fe=function Fe(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==fe?null:function Se($e){ge=ge||document.createElement("a"),ge.setAttribute("href",$e);const Ve=ge.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(fe)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,c.Mx)(document.cookie,Ve)}}let ge,Pe=null;const Ue=new q.OlP("TRANSITION_ID"),re=[{provide:q.ip1,useFactory:function pe($e,Ve,fe){return()=>{fe.get(q.CZH).donePromise.then(()=>{const Ye=(0,c.q)(),kt=Ve.querySelectorAll(`style[ng-transition="${$e}"]`);for(let le=0;le<kt.length;le++)Ye.remove(kt[le])})}},deps:[Ue,c.K0,q.zs3],multi:!0}];let Oe=(()=>{class $e{build(){return new XMLHttpRequest}}return $e.\u0275fac=function(fe){return new(fe||$e)},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Ge=new q.OlP("EventManagerPlugins");let ut=(()=>{class $e{constructor(fe,Ye){this._zone=Ye,this._eventNameToPlugin=new Map,fe.forEach(kt=>{kt.manager=this}),this._plugins=fe.slice().reverse()}addEventListener(fe,Ye,kt){return this._findPluginFor(Ye).addEventListener(fe,Ye,kt)}addGlobalEventListener(fe,Ye,kt){return this._findPluginFor(Ye).addGlobalEventListener(fe,Ye,kt)}getZone(){return this._zone}_findPluginFor(fe){const Ye=this._eventNameToPlugin.get(fe);if(Ye)return Ye;const kt=this._plugins;for(let le=0;le<kt.length;le++){const ye=kt[le];if(ye.supports(fe))return this._eventNameToPlugin.set(fe,ye),ye}throw new Error(`No event manager plugin found for event ${fe}`)}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(Ge),q.LFG(q.R0b))},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class Pt{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,fe,Ye){const kt=(0,c.q)().getGlobalEventTarget(this._doc,Ve);if(!kt)throw new Error(`Unsupported event target ${kt} for event ${fe}`);return this.addEventListener(kt,fe,Ye)}}let be=(()=>{class $e{constructor(){this.usageCount=new Map}addStyles(fe){for(const Ye of fe)1===this.changeUsageCount(Ye,1)&&this.onStyleAdded(Ye)}removeStyles(fe){for(const Ye of fe)0===this.changeUsageCount(Ye,-1)&&this.onStyleRemoved(Ye)}onStyleRemoved(fe){}onStyleAdded(fe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(fe,Ye){var kt;const le=this.usageCount;let ye=null!==(kt=le.get(fe))&&void 0!==kt?kt:0;return ye+=Ye,ye>0?le.set(fe,ye):le.delete(fe),ye}ngOnDestroy(){for(const fe of this.getAllStyles())this.onStyleRemoved(fe);this.usageCount.clear()}}return $e.\u0275fac=function(fe){return new(fe||$e)},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),Ie=(()=>{class $e extends be{constructor(fe){super(),this.doc=fe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(fe){for(const Ye of this.hostNodes)this.addStyleToHost(Ye,fe)}onStyleRemoved(fe){const Ye=this.styleRef,kt=Ye.get(fe);null==kt||kt.forEach(le=>le.remove()),Ye.delete(fe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(fe){this.hostNodes.add(fe);for(const Ye of this.getAllStyles())this.addStyleToHost(fe,Ye)}removeHost(fe){this.hostNodes.delete(fe)}addStyleToHost(fe,Ye){const kt=this.doc.createElement("style");kt.textContent=Ye,fe.appendChild(kt);const le=this.styleRef.get(Ye);le?le.push(kt):this.styleRef.set(Ye,[kt])}resetHostNodes(){const fe=this.hostNodes;fe.clear(),fe.add(this.doc.head)}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(c.K0))},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const he={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g,H=new q.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Be($e,Ve){return Ve.flat(100).map(fe=>fe.replace(dt,$e))}function _t($e){return Ve=>{if("__ngUnwrap__"===Ve)return $e;!1===$e(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let yt=(()=>{class $e{constructor(fe,Ye,kt,le){this.eventManager=fe,this.sharedStylesHost=Ye,this.appId=kt,this.removeStylesOnCompDestory=le,this.rendererByCompId=new Map,this.defaultRenderer=new ot(fe)}createRenderer(fe,Ye){if(!fe||!Ye)return this.defaultRenderer;const kt=this.getOrCreateRenderer(fe,Ye);return kt instanceof gt?kt.applyToHost(fe):kt instanceof we&&kt.applyStyles(),kt}getOrCreateRenderer(fe,Ye){const kt=this.rendererByCompId;let le=kt.get(Ye.id);if(!le){const ye=this.eventManager,St=this.sharedStylesHost,vt=this.removeStylesOnCompDestory;switch(Ye.encapsulation){case q.ifc.Emulated:le=new gt(ye,St,Ye,this.appId,vt);break;case q.ifc.ShadowDom:return new Me(ye,St,fe,Ye);default:le=new we(ye,St,Ye,vt)}le.onDestroy=()=>kt.delete(Ye.id),kt.set(Ye.id,le)}return le}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(ut),q.LFG(Ie),q.LFG(q.AFp),q.LFG(H))},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class ot{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,fe){return fe?document.createElementNS(he[fe]||fe,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,fe){(Ae(Ve)?Ve.content:Ve).appendChild(fe)}insertBefore(Ve,fe,Ye){Ve&&(Ae(Ve)?Ve.content:Ve).insertBefore(fe,Ye)}removeChild(Ve,fe){Ve&&Ve.removeChild(fe)}selectRootElement(Ve,fe){let Ye="string"==typeof Ve?document.querySelector(Ve):Ve;if(!Ye)throw new Error(`The selector "${Ve}" did not match any elements`);return fe||(Ye.textContent=""),Ye}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,fe,Ye,kt){if(kt){fe=kt+":"+fe;const le=he[kt];le?Ve.setAttributeNS(le,fe,Ye):Ve.setAttribute(fe,Ye)}else Ve.setAttribute(fe,Ye)}removeAttribute(Ve,fe,Ye){if(Ye){const kt=he[Ye];kt?Ve.removeAttributeNS(kt,fe):Ve.removeAttribute(`${Ye}:${fe}`)}else Ve.removeAttribute(fe)}addClass(Ve,fe){Ve.classList.add(fe)}removeClass(Ve,fe){Ve.classList.remove(fe)}setStyle(Ve,fe,Ye,kt){kt&(q.JOm.DashCase|q.JOm.Important)?Ve.style.setProperty(fe,Ye,kt&q.JOm.Important?"important":""):Ve.style[fe]=Ye}removeStyle(Ve,fe,Ye){Ye&q.JOm.DashCase?Ve.style.removeProperty(fe):Ve.style[fe]=""}setProperty(Ve,fe,Ye){Ve[fe]=Ye}setValue(Ve,fe){Ve.nodeValue=fe}listen(Ve,fe,Ye){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,fe,_t(Ye)):this.eventManager.addEventListener(Ve,fe,_t(Ye))}}function Ae($e){return"TEMPLATE"===$e.tagName&&void 0!==$e.content}class Me extends ot{constructor(Ve,fe,Ye,kt){super(Ve),this.sharedStylesHost=fe,this.hostEl=Ye,this.shadowRoot=Ye.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const le=Be(kt.id,kt.styles);for(const ye of le){const St=document.createElement("style");St.textContent=ye,this.shadowRoot.appendChild(St)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}appendChild(Ve,fe){return super.appendChild(this.nodeOrShadowRoot(Ve),fe)}insertBefore(Ve,fe,Ye){return super.insertBefore(this.nodeOrShadowRoot(Ve),fe,Ye)}removeChild(Ve,fe){return super.removeChild(this.nodeOrShadowRoot(Ve),fe)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class we extends ot{constructor(Ve,fe,Ye,kt,le=Ye.id){super(Ve),this.sharedStylesHost=fe,this.removeStylesOnCompDestory=kt,this.rendererUsageCount=0,this.styles=Be(le,Ye.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ve;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ve=this.onDestroy)||void 0===Ve||Ve.call(this))}}class gt extends we{constructor(Ve,fe,Ye,kt,le){const ye=kt+"-"+Ye.id;super(Ve,fe,Ye,le,ye),this.contentAttr=function De($e){return"_ngcontent-%COMP%".replace(dt,$e)}(ye),this.hostAttr=function it($e){return"_nghost-%COMP%".replace(dt,$e)}(ye)}applyToHost(Ve){this.applyStyles(),this.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,fe){const Ye=super.createElement(Ve,fe);return super.setAttribute(Ye,this.contentAttr,""),Ye}}let et=(()=>{class $e extends Pt{constructor(fe){super(fe)}supports(fe){return!0}addEventListener(fe,Ye,kt){return fe.addEventListener(Ye,kt,!1),()=>this.removeEventListener(fe,Ye,kt)}removeEventListener(fe,Ye,kt){return fe.removeEventListener(Ye,kt)}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(c.K0))},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Qe=["alt","control","meta","shift"],Ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jt={alt:$e=>$e.altKey,control:$e=>$e.ctrlKey,meta:$e=>$e.metaKey,shift:$e=>$e.shiftKey};let Jt=(()=>{class $e extends Pt{constructor(fe){super(fe)}supports(fe){return null!=$e.parseEventName(fe)}addEventListener(fe,Ye,kt){const le=$e.parseEventName(Ye),ye=$e.eventCallback(le.fullKey,kt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,c.q)().onAndCancel(fe,le.domEventName,ye))}static parseEventName(fe){const Ye=fe.toLowerCase().split("."),kt=Ye.shift();if(0===Ye.length||"keydown"!==kt&&"keyup"!==kt)return null;const le=$e._normalizeKey(Ye.pop());let ye="",St=Ye.indexOf("code");if(St>-1&&(Ye.splice(St,1),ye="code."),Qe.forEach(Ut=>{const je=Ye.indexOf(Ut);je>-1&&(Ye.splice(je,1),ye+=Ut+".")}),ye+=le,0!=Ye.length||0===le.length)return null;const vt={};return vt.domEventName=kt,vt.fullKey=ye,vt}static matchEventFullKeyCode(fe,Ye){let kt=Ke[fe.key]||fe.key,le="";return Ye.indexOf("code.")>-1&&(kt=fe.code,le="code."),!(null==kt||!kt)&&(kt=kt.toLowerCase()," "===kt?kt="space":"."===kt&&(kt="dot"),Qe.forEach(ye=>{ye!==kt&&(0,jt[ye])(fe)&&(le+=ye+".")}),le+=kt,le===Ye)}static eventCallback(fe,Ye,kt){return le=>{$e.matchEventFullKeyCode(le,fe)&&kt.runGuarded(()=>Ye(le))}}static _normalizeKey(fe){return"esc"===fe?"escape":fe}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(c.K0))},$e.\u0275prov=q.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Pr=(0,q.eFA)(q._c5,"browser",[{provide:q.Lbi,useValue:c.bD},{provide:q.g9A,useValue:function cn(){Te.makeCurrent()},multi:!0},{provide:c.K0,useFactory:function hr(){return(0,q.RDi)(document),document},deps:[]}]),Un=new q.OlP(""),tr=[{provide:q.rWj,useClass:class de{addToWindow(Ve){q.dqk.getAngularTestability=(Ye,kt=!0)=>{const le=Ve.findTestabilityInTree(Ye,kt);if(null==le)throw new Error("Could not find testability for element.");return le},q.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),q.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),q.dqk.frameworkStabilizers||(q.dqk.frameworkStabilizers=[]),q.dqk.frameworkStabilizers.push(Ye=>{const kt=q.dqk.getAllAngularTestabilities();let le=kt.length,ye=!1;const St=function(vt){ye=ye||vt,le--,0==le&&Ye(ye)};kt.forEach(function(vt){vt.whenStable(St)})})}findTestabilityInTree(Ve,fe,Ye){if(null==fe)return null;const kt=Ve.getTestability(fe);return null!=kt?kt:Ye?(0,c.q)().isShadowRoot(fe)?this.findTestabilityInTree(Ve,fe.host,!0):this.findTestabilityInTree(Ve,fe.parentElement,!0):null}},deps:[]},{provide:q.lri,useClass:q.dDg,deps:[q.R0b,q.eoX,q.rWj]},{provide:q.dDg,useClass:q.dDg,deps:[q.R0b,q.eoX,q.rWj]}],nn=[{provide:q.zSh,useValue:"root"},{provide:q.qLn,useFactory:function lr(){return new q.qLn},deps:[]},{provide:Ge,useClass:et,multi:!0,deps:[c.K0,q.R0b,q.Lbi]},{provide:Ge,useClass:Jt,multi:!0,deps:[c.K0]},{provide:yt,useClass:yt,deps:[ut,Ie,q.AFp,H]},{provide:q.FYo,useExisting:yt},{provide:be,useExisting:Ie},{provide:Ie,useClass:Ie,deps:[c.K0]},{provide:ut,useClass:ut,deps:[Ge,q.R0b]},{provide:c.JF,useClass:Oe,deps:[]},[]];let ui=(()=>{class $e{constructor(fe){}static withServerTransition(fe){return{ngModule:$e,providers:[{provide:q.AFp,useValue:fe.appId},{provide:Ue,useExisting:q.AFp},re]}}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(Un,12))},$e.\u0275mod=q.oAB({type:$e}),$e.\u0275inj=q.cJS({providers:[...nn,...tr],imports:[c.ez,q.hGG]}),$e})(),Fn=(()=>{class $e{constructor(fe){this._doc=fe}getTitle(){return this._doc.title}setTitle(fe){this._doc.title=fe||""}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(c.K0))},$e.\u0275prov=q.Yz7({token:$e,factory:function(fe){let Ye=null;return Ye=fe?new fe:function Fr(){return new Fn((0,q.LFG)(c.K0))}(),Ye},providedIn:"root"}),$e})();typeof window<"u"&&window;let He=(()=>{class $e{}return $e.\u0275fac=function(fe){return new(fe||$e)},$e.\u0275prov=q.Yz7({token:$e,factory:function(fe){let Ye=null;return Ye=fe?new(fe||$e):q.LFG(pt),Ye},providedIn:"root"}),$e})(),pt=(()=>{class $e extends He{constructor(fe){super(),this._doc=fe}sanitize(fe,Ye){if(null==Ye)return null;switch(fe){case q.q3G.NONE:return Ye;case q.q3G.HTML:return(0,q.qzn)(Ye,"HTML")?(0,q.z3N)(Ye):(0,q.EiD)(this._doc,String(Ye)).toString();case q.q3G.STYLE:return(0,q.qzn)(Ye,"Style")?(0,q.z3N)(Ye):Ye;case q.q3G.SCRIPT:if((0,q.qzn)(Ye,"Script"))return(0,q.z3N)(Ye);throw new Error("unsafe value used in a script context");case q.q3G.URL:return(0,q.qzn)(Ye,"URL")?(0,q.z3N)(Ye):(0,q.mCW)(String(Ye));case q.q3G.RESOURCE_URL:if((0,q.qzn)(Ye,"ResourceURL"))return(0,q.z3N)(Ye);throw new Error(`unsafe value used in a resource URL context (see ${q.JZr})`);default:throw new Error(`Unexpected SecurityContext ${fe} (see ${q.JZr})`)}}bypassSecurityTrustHtml(fe){return(0,q.JVY)(fe)}bypassSecurityTrustStyle(fe){return(0,q.L6k)(fe)}bypassSecurityTrustScript(fe){return(0,q.eBb)(fe)}bypassSecurityTrustUrl(fe){return(0,q.LAX)(fe)}bypassSecurityTrustResourceUrl(fe){return(0,q.pB0)(fe)}}return $e.\u0275fac=function(fe){return new(fe||$e)(q.LFG(c.K0))},$e.\u0275prov=q.Yz7({token:$e,factory:function(fe){let Ye=null;return Ye=fe?new fe:function At($e){return new pt($e.get(c.K0))}(q.LFG(q.zs3)),Ye},providedIn:"root"}),$e})()},4262:(_n,It,L)=>{"use strict";L.d(It,{gz:()=>ws,y6:()=>ns,OD:()=>qt,eC:()=>cn,wm:()=>Xl,wN:()=>il,F0:()=>Bt,rH:()=>ji,Bz:()=>vs,Hx:()=>$t});var c=L(4650),q=L(8996),G=L(9646),Te=L(1135),Pe=L(6805),Fe=L(9751),ge=L(4742),Se=L(4671),Ue=L(3268),pe=L(7669),re=L(1810),de=L(5403),Oe=L(9672);function Ge(...A){const R=(0,pe.yG)(A),b=(0,pe.jO)(A),{args:O,keys:j}=(0,ge.D)(A);if(0===O.length)return(0,q.D)([],R);const Q=new Fe.y(function ut(A,R,b=Se.y){return O=>{Pt(R,()=>{const{length:j}=A,Q=new Array(j);let se=j,ct=j;for(let zt=0;zt<j;zt++)Pt(R,()=>{const ln=(0,q.D)(A[zt],R);let Jn=!1;ln.subscribe((0,de.x)(O,Vn=>{Q[zt]=Vn,Jn||(Jn=!0,ct--),ct||O.next(b(Q.slice()))},()=>{--se||O.complete()}))},O)},O)}}(O,R,j?se=>(0,re.n)(j,se):Se.y));return b?Q.pipe((0,Ue.Z)(b)):Q}function Pt(A,R,b){A?(0,Oe.f)(b,A,R):R()}var be=L(7272),Ie=L(8421);function he(A){return new Fe.y(R=>{(0,Ie.Xf)(A()).subscribe(R)})}var dt=L(9635),ft=L(2843),qe=L(515),Je=L(727),Le=L(4482);function ke(){return(0,Le.e)((A,R)=>{let b=null;A._refCount++;const O=(0,de.x)(R,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const j=A._connection,Q=b;b=null,j&&(!Q||j===Q)&&j.unsubscribe(),R.unsubscribe()});A.subscribe(O),O.closed||(b=A.connect())})}class H extends Fe.y{constructor(R,b){super(),this.source=R,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Le.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,null==R||R.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Je.w0;const b=this.getSubject();R.add(this.source.subscribe((0,de.x)(b,void 0,()=>{this._teardown(),b.complete()},O=>{this._teardown(),b.error(O)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Je.w0.EMPTY)}return R}refCount(){return ke()(this)}}var De=L(958),it=L(6895),Be=L(4004),_t=L(3900),yt=L(5698),ot=L(8675),at=L(9300),Xe=L(5577),Ae=L(590),Me=L(4351),we=L(8505),gt=L(262),et=L(5026);function Qe(A){return A<=0?()=>qe.E:(0,Le.e)((R,b)=>{let O=[];R.subscribe((0,de.x)(b,j=>{O.push(j),A<O.length&&O.shift()},()=>{for(const j of O)b.next(j);b.complete()},void 0,()=>{O=null}))})}var Ke=L(8068),jt=L(6590);function Jt(A,R){const b=arguments.length>=2;return O=>O.pipe(A?(0,at.h)((j,Q)=>A(j,Q,O)):Se.y,Qe(1),b?(0,jt.d)(R):(0,Ke.T)(()=>new Pe.K))}function Hn(A){return(0,Le.e)((R,b)=>{try{R.subscribe(b)}finally{b.add(A)}})}var Gn=L(8189),ar=L(1481);const cn="primary",lr=Symbol("RouteTitle");class hr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b[0]:b}return null}getAll(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Cr(A){return new hr(A)}function Pr(A,R,b){const O=b.path.split("/");if(O.length>A.length||"full"===b.pathMatch&&(R.hasChildren()||O.length<A.length))return null;const j={};for(let Q=0;Q<O.length;Q++){const se=O[Q],ct=A[Q];if(se.startsWith(":"))j[se.substring(1)]=ct;else if(se!==ct.path)return null}return{consumed:A.slice(0,O.length),posParams:j}}function tr(A,R){const b=A?Object.keys(A):void 0,O=R?Object.keys(R):void 0;if(!b||!O||b.length!=O.length)return!1;let j;for(let Q=0;Q<b.length;Q++)if(j=b[Q],!nn(A[j],R[j]))return!1;return!0}function nn(A,R){if(Array.isArray(A)&&Array.isArray(R)){if(A.length!==R.length)return!1;const b=[...A].sort(),O=[...R].sort();return b.every((j,Q)=>O[Q]===j)}return A===R}function ui(A){return Array.prototype.concat.apply([],A)}function ei(A){return A.length>0?A[A.length-1]:null}function Dr(A,R){for(const b in A)A.hasOwnProperty(b)&&R(A[b],b)}function Fr(A){return(0,c.CqO)(A)?A:(0,c.QGY)(A)?(0,q.D)(Promise.resolve(A)):(0,G.of)(A)}const Fn=!1,Cn={exact:function rn(A,R,b){if(!gr(A.segments,R.segments)||!xr(A.segments,R.segments,b)||A.numberOfChildren!==R.numberOfChildren)return!1;for(const O in R.children)if(!A.children[O]||!rn(A.children[O],R.children[O],b))return!1;return!0},subset:Ir},mn={exact:function Lr(A,R){return tr(A,R)},subset:function _r(A,R){return Object.keys(R).length<=Object.keys(A).length&&Object.keys(R).every(b=>nn(A[b],R[b]))},ignored:()=>!0};function Wn(A,R,b){return Cn[b.paths](A.root,R.root,b.matrixParams)&&mn[b.queryParams](A.queryParams,R.queryParams)&&!("exact"===b.fragment&&A.fragment!==R.fragment)}function Ir(A,R,b){return oi(A,R,R.segments,b)}function oi(A,R,b,O){if(A.segments.length>b.length){const j=A.segments.slice(0,b.length);return!(!gr(j,b)||R.hasChildren()||!xr(j,b,O))}if(A.segments.length===b.length){if(!gr(A.segments,b)||!xr(A.segments,b,O))return!1;for(const j in R.children)if(!A.children[j]||!Ir(A.children[j],R.children[j],O))return!1;return!0}{const j=b.slice(0,A.segments.length),Q=b.slice(A.segments.length);return!!(gr(A.segments,j)&&xr(A.segments,j,O)&&A.children[cn])&&oi(A.children[cn],R,Q,O)}}function xr(A,R,b){return R.every((O,j)=>mn[b](A[j].parameters,O.parameters))}class ti{constructor(R=new Dn([],{}),b={},O=null){this.root=R,this.queryParams=b,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return rt.serialize(this)}}class Dn{constructor(R,b){this.segments=R,this.children=b,this.parent=null,Dr(b,(O,j)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xt(this)}}class ai{constructor(R,b){this.path=R,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Cr(this.parameters)),this._parameterMap}toString(){return $e(this)}}function gr(A,R){return A.length===R.length&&A.every((b,O)=>b.path===R[O].path)}let $t=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:function(){return new We},providedIn:"root"}),A})();class We{parse(R){const b=new Ut(R);return new ti(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(R){const b=`/${Lt(R.root,!0)}`,O=function fe(A){const R=Object.keys(A).map(b=>{const O=A[b];return Array.isArray(O)?O.map(j=>`${me(b)}=${me(j)}`).join("&"):`${me(b)}=${me(O)}`}).filter(b=>!!b);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${b}${O}${"string"==typeof R.fragment?`#${function He(A){return encodeURI(A)}(R.fragment)}`:""}`}}const rt=new We;function Xt(A){return A.segments.map(R=>$e(R)).join("/")}function Lt(A,R){if(!A.hasChildren())return Xt(A);if(R){const b=A.children[cn]?Lt(A.children[cn],!1):"",O=[];return Dr(A.children,(j,Q)=>{Q!==cn&&O.push(`${Q}:${Lt(j,!1)}`)}),O.length>0?`${b}(${O.join("//")})`:b}{const b=function zr(A,R){let b=[];return Dr(A.children,(O,j)=>{j===cn&&(b=b.concat(R(O,j)))}),Dr(A.children,(O,j)=>{j!==cn&&(b=b.concat(R(O,j)))}),b}(A,(O,j)=>j===cn?[Lt(A.children[cn],!1)]:[`${j}:${Lt(O,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[cn]?`${Xt(A)}/${b[0]}`:`${Xt(A)}/(${b.join("//")})`}}function _e(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(A){return _e(A).replace(/%3B/gi,";")}function At(A){return _e(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pt(A){return decodeURIComponent(A)}function yn(A){return pt(A.replace(/\+/g,"%20"))}function $e(A){return`${At(A.path)}${function Ve(A){return Object.keys(A).map(R=>`;${At(R)}=${At(A[R])}`).join("")}(A.parameters)}`}const Ye=/^[^\/()?;=#]+/;function kt(A){const R=A.match(Ye);return R?R[0]:""}const le=/^[^=?&#]+/,St=/^[^&#]+/;class Ut{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(R.length>0||Object.keys(b).length>0)&&(O[cn]=new Dn(R,b)),O}parseSegment(){const R=kt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new c.vHH(4009,Fn);return this.capture(R),new ai(pt(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const b=kt(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const j=kt(this.remaining);j&&(O=j,this.capture(O))}R[pt(b)]=pt(O)}parseQueryParam(R){const b=function ye(A){const R=A.match(le);return R?R[0]:""}(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const se=function vt(A){const R=A.match(St);return R?R[0]:""}(this.remaining);se&&(O=se,this.capture(O))}const j=yn(b),Q=yn(O);if(R.hasOwnProperty(j)){let se=R[j];Array.isArray(se)||(se=[se],R[j]=se),se.push(Q)}else R[j]=Q}parseParens(R){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=kt(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new c.vHH(4010,Fn);let Q;O.indexOf(":")>-1?(Q=O.slice(0,O.indexOf(":")),this.capture(Q),this.capture(":")):R&&(Q=cn);const se=this.parseChildren();b[Q]=1===Object.keys(se).length?se[cn]:new Dn([],se),this.consumeOptional("//")}return b}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new c.vHH(4011,Fn)}}function je(A){return A.segments.length>0?new Dn([],{[cn]:A}):A}function Ne(A){const R={};for(const O of Object.keys(A.children)){const Q=Ne(A.children[O]);(Q.segments.length>0||Q.hasChildren())&&(R[O]=Q)}return function Ct(A){if(1===A.numberOfChildren&&A.children[cn]){const R=A.children[cn];return new Dn(A.segments.concat(R.segments),R.children)}return A}(new Dn(A.segments,R))}function Nt(A){return A instanceof ti}const un=!1;function cr(A,R,b,O,j){var Q;if(0===b.length)return mi(R.root,R.root,R.root,O,j);const se=function Ji(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Pi(!0,0,A);let R=0,b=!1;const O=A.reduce((j,Q,se)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const ct={};return Dr(Q.outlets,(zt,ln)=>{ct[ln]="string"==typeof zt?zt.split("/"):zt}),[...j,{outlets:ct}]}if(Q.segmentPath)return[...j,Q.segmentPath]}return"string"!=typeof Q?[...j,Q]:0===se?(Q.split("/").forEach((ct,zt)=>{0==zt&&"."===ct||(0==zt&&""===ct?b=!0:".."===ct?R++:""!=ct&&j.push(ct))}),j):[...j,Q]},[]);return new Pi(b,R,O)}(b);return se.toRoot()?mi(R.root,R.root,new Dn([],{}),O,j):function ct(ln){var Jn;const Vn=function ir(A,R,b,O){if(A.isAbsolute)return new Zr(R.root,!0,0);if(-1===O)return new Zr(b,b===R.root,0);return function Xr(A,R,b){let O=A,j=R,Q=b;for(;Q>j;){if(Q-=j,O=O.parent,!O)throw new c.vHH(4005,un&&"Invalid number of '../'");j=O.segments.length}return new Zr(O,!1,j-Q)}(b,O+(Qn(A.commands[0])?0:1),A.numberOfDoubleDots)}(se,R,null===(Jn=A.snapshot)||void 0===Jn?void 0:Jn._urlSegment,ln),Kr=Vn.processChildren?te(Vn.segmentGroup,Vn.index,se.commands):Wi(Vn.segmentGroup,Vn.index,se.commands);return mi(R.root,Vn.segmentGroup,Kr,O,j)}(null===(Q=A.snapshot)||void 0===Q?void 0:Q._lastPathIndex)}function Qn(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function ni(A){return"object"==typeof A&&null!=A&&A.outlets}function mi(A,R,b,O,j){let se,Q={};O&&Dr(O,(zt,ln)=>{Q[ln]=Array.isArray(zt)?zt.map(Jn=>`${Jn}`):`${zt}`}),se=A===R?b:li(A,R,b);const ct=je(Ne(se));return new ti(ct,Q,j)}function li(A,R,b){const O={};return Dr(A.children,(j,Q)=>{O[Q]=j===R?b:li(j,R,b)}),new Dn(A.segments,O)}class Pi{constructor(R,b,O){if(this.isAbsolute=R,this.numberOfDoubleDots=b,this.commands=O,R&&O.length>0&&Qn(O[0]))throw new c.vHH(4003,un&&"Root segment cannot have matrix parameters");const j=O.find(ni);if(j&&j!==ei(O))throw new c.vHH(4004,un&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zr{constructor(R,b,O){this.segmentGroup=R,this.processChildren=b,this.index=O}}function Wi(A,R,b){if(A||(A=new Dn([],{})),0===A.segments.length&&A.hasChildren())return te(A,R,b);const O=function Ee(A,R,b){let O=0,j=R;const Q={match:!1,pathIndex:0,commandIndex:0};for(;j<A.segments.length;){if(O>=b.length)return Q;const se=A.segments[j],ct=b[O];if(ni(ct))break;const zt=`${ct}`,ln=O<b.length-1?b[O+1]:null;if(j>0&&void 0===zt)break;if(zt&&ln&&"object"==typeof ln&&void 0===ln.outlets){if(!ce(zt,ln,se))return Q;O+=2}else{if(!ce(zt,{},se))return Q;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(A,R,b),j=b.slice(O.commandIndex);if(O.match&&O.pathIndex<A.segments.length){const Q=new Dn(A.segments.slice(0,O.pathIndex),{});return Q.children[cn]=new Dn(A.segments.slice(O.pathIndex),A.children),te(Q,0,j)}return O.match&&0===j.length?new Dn(A.segments,{}):O.match&&!A.hasChildren()?tt(A,R,b):O.match?te(A,0,j):tt(A,R,b)}function te(A,R,b){if(0===b.length)return new Dn(A.segments,{});{const O=function Tr(A){return ni(A[0])?A[0].outlets:{[cn]:A}}(b),j={};return!O[cn]&&A.children[cn]&&1===A.numberOfChildren&&0===A.children[cn].segments.length?te(A.children[cn],R,b):(Dr(O,(Q,se)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(j[se]=Wi(A.children[se],R,Q))}),Dr(A.children,(Q,se)=>{void 0===O[se]&&(j[se]=Q)}),new Dn(A.segments,j))}}function tt(A,R,b){const O=A.segments.slice(0,R);let j=0;for(;j<b.length;){const Q=b[j];if(ni(Q)){const zt=bt(Q.outlets);return new Dn(O,zt)}if(0===j&&Qn(b[0])){O.push(new ai(A.segments[R].path,Ht(b[0]))),j++;continue}const se=ni(Q)?Q.outlets[cn]:`${Q}`,ct=j<b.length-1?b[j+1]:null;se&&ct&&Qn(ct)?(O.push(new ai(se,Ht(ct))),j+=2):(O.push(new ai(se,{})),j++)}return new Dn(O,{})}function bt(A){const R={};return Dr(A,(b,O)=>{"string"==typeof b&&(b=[b]),null!==b&&(R[O]=tt(new Dn([],{}),0,b))}),R}function Ht(A){const R={};return Dr(A,(b,O)=>R[O]=`${b}`),R}function ce(A,R,b){return A==b.path&&tr(R,b.parameters)}const nt="imperative";class Et{constructor(R,b){this.id=R,this.url=b}}class qt extends Et{constructor(R,b,O="imperative",j=null){super(R,b),this.type=0,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kt extends Et{constructor(R,b,O){super(R,b),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pn extends Et{constructor(R,b,O,j){super(R,b),this.reason=O,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kn extends Et{constructor(R,b,O,j){super(R,b),this.reason=O,this.code=j,this.type=16}}class qn extends Et{constructor(R,b,O,j){super(R,b),this.error=O,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vr extends Et{constructor(R,b,O,j){super(R,b),this.urlAfterRedirects=O,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mr extends Et{constructor(R,b,O,j){super(R,b),this.urlAfterRedirects=O,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends Et{constructor(R,b,O,j,Q){super(R,b),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=Q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fr extends Et{constructor(R,b,O,j){super(R,b),this.urlAfterRedirects=O,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fs extends Et{constructor(R,b,O,j){super(R,b),this.urlAfterRedirects=O,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mt{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lt{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xt{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yt{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jr{constructor(R,b,O){this.routerEvent=R,this.position=b,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let as=(()=>{class A{createUrlTree(b,O,j,Q,se,ct){return cr(b||O.root,j,Q,se,ct)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac}),A})(),Ni=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:function(R){return as.\u0275fac(R)},providedIn:"root"}),A})();class Ki{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const b=this.pathFromRoot(R);return b.length>1?b[b.length-2]:null}children(R){const b=cs(R,this._root);return b?b.children.map(O=>O.value):[]}firstChild(R){const b=cs(R,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(R){const b=Wo(R,this._root);return b.length<2?[]:b[b.length-2].children.map(j=>j.value).filter(j=>j!==R)}pathFromRoot(R){return Wo(R,this._root).map(b=>b.value)}}function cs(A,R){if(A===R.value)return R;for(const b of R.children){const O=cs(A,b);if(O)return O}return null}function Wo(A,R){if(A===R.value)return[R];for(const b of R.children){const O=Wo(A,b);if(O.length)return O.unshift(R),O}return[]}class Ks{constructor(R,b){this.value=R,this.children=b}toString(){return`TreeNode(${this.value})`}}function es(A){const R={};return A&&A.children.forEach(b=>R[b.value.outlet]=b),R}class Ro extends Ki{constructor(R,b){super(R),this.snapshot=b,lo(this,R)}toString(){return this.snapshot.toString()}}function oo(A,R){const b=function la(A,R){const se=new Eo([],{},{},"",{},cn,R,null,A.root,-1,{});return new Pl("",new Ks(se,[]))}(A,R),O=new Te.X([new ai("",{})]),j=new Te.X({}),Q=new Te.X({}),se=new Te.X({}),ct=new Te.X(""),zt=new ws(O,j,se,ct,Q,cn,R,b.root);return zt.snapshot=b.root,new Ro(new Ks(zt,[]),b)}class ws{constructor(R,b,O,j,Q,se,ct,zt){var ln,Jn;this.url=R,this.params=b,this.queryParams=O,this.fragment=j,this.data=Q,this.outlet=se,this.component=ct,this.title=null!==(ln=null===(Jn=this.data)||void 0===Jn?void 0:Jn.pipe((0,Be.U)(Vn=>Vn[lr])))&&void 0!==ln?ln:(0,G.of)(void 0),this._futureSnapshot=zt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(R=>Cr(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(R=>Cr(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mo(A,R="emptyOnly"){const b=A.pathFromRoot;let O=0;if("always"!==R)for(O=b.length-1;O>=1;){const j=b[O],Q=b[O-1];if(j.routeConfig&&""===j.routeConfig.path)O--;else{if(Q.component)break;O--}}return function ao(A){return A.reduce((R,b)=>{var O;return{params:{...R.params,...b.params},data:{...R.data,...b.data},resolve:{...b.data,...R.resolve,...null===(O=b.routeConfig)||void 0===O?void 0:O.data,...b._resolvedData}}},{params:{},data:{},resolve:{}})}(b.slice(O))}class Eo{get title(){var R;return null===(R=this.data)||void 0===R?void 0:R[lr]}constructor(R,b,O,j,Q,se,ct,zt,ln,Jn,Vn){this.url=R,this.params=b,this.queryParams=O,this.fragment=j,this.data=Q,this.outlet=se,this.component=ct,this.routeConfig=zt,this._urlSegment=ln,this._lastPathIndex=Jn,this._resolve=Vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pl extends Ki{constructor(R,b){super(b),this.url=R,lo(this,b)}toString(){return us(this._root)}}function lo(A,R){R.value._routerState=A,R.children.forEach(b=>lo(A,b))}function us(A){const R=A.children.length>0?` { ${A.children.map(us).join(", ")} } `:"";return`${A.value}${R}`}function ca(A){if(A.snapshot){const R=A.snapshot,b=A._futureSnapshot;A.snapshot=b,tr(R.queryParams,b.queryParams)||A.queryParams.next(b.queryParams),R.fragment!==b.fragment&&A.fragment.next(b.fragment),tr(R.params,b.params)||A.params.next(b.params),function Un(A,R){if(A.length!==R.length)return!1;for(let b=0;b<A.length;++b)if(!tr(A[b],R[b]))return!1;return!0}(R.url,b.url)||A.url.next(b.url),tr(R.data,b.data)||A.data.next(b.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function qs(A,R){const b=tr(A.params,R.params)&&function pi(A,R){return gr(A,R)&&A.every((b,O)=>tr(b.parameters,R[O].parameters))}(A.url,R.url);return b&&!(!A.parent!=!R.parent)&&(!A.parent||qs(A.parent,R.parent))}function Ys(A,R,b){if(b&&A.shouldReuseRoute(R.value,b.value.snapshot)){const O=b.value;O._futureSnapshot=R.value;const j=function ua(A,R,b){return R.children.map(O=>{for(const j of b.children)if(A.shouldReuseRoute(O.value,j.value.snapshot))return Ys(A,O,j);return Ys(A,O)})}(A,R,b);return new Ks(O,j)}{if(A.shouldAttach(R.value)){const Q=A.retrieve(R.value);if(null!==Q){const se=Q.route;return se.value._futureSnapshot=R.value,se.children=R.children.map(ct=>Ys(A,ct)),se}}const O=function ds(A){return new ws(new Te.X(A.url),new Te.X(A.params),new Te.X(A.queryParams),new Te.X(A.fragment),new Te.X(A.data),A.outlet,A.component,A)}(R.value),j=R.children.map(Q=>Ys(A,Q));return new Ks(O,j)}}const ri="ngNavigationCancelingError";function ps(A,R){const{redirectTo:b,navigationBehaviorOptions:O}=Nt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,j=Io(!1,0,R);return j.url=b,j.navigationBehaviorOptions=O,j}function Io(A,R,b){const O=new Error("NavigationCancelingError: "+(A||""));return O[ri]=!0,O.cancellationCode=R,b&&(O.url=b),O}function Fs(A){return co(A)&&Nt(A.url)}function co(A){return A&&A[ri]}class wa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ns,this.attachRef=null}}let ns=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(b,O){const j=this.getOrCreateContext(b);j.outlet=O,this.contexts.set(b,j)}onChildOutletDestroyed(b){const O=this.getContext(b);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let O=this.getContext(b);return O||(O=new wa,this.contexts.set(b,O)),O}getContext(b){return this.contexts.get(b)||null}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const da=!1;let wo=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=cn,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(ns),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(b){if(b.name){const{firstChange:O,previousValue:j}=b.name;if(O)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){var O;return(null===(O=this.parentContexts.getContext(b))||void 0===O?void 0:O.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);null!=b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,da);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,da);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,da);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,O){this.activated=b,this._activatedRoute=O,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,O){if(this.isActivated)throw new c.vHH(4013,da);this._activatedRoute=b;const j=this.location,se=b.snapshot.component,ct=this.parentContexts.getOrCreateContext(this.name).children,zt=new Ja(b,ct,j.injector);if(O&&function Ss(A){return!!A.resolveComponentFactory}(O)){const ln=O.resolveComponentFactory(se);this.activated=j.createComponent(ln,j.length,zt)}else this.activated=j.createComponent(se,{index:j.length,injector:zt,environmentInjector:null!=O?O:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275dir=c.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),A})();class Ja{constructor(R,b,O){this.route=R,this.childContexts=b,this.parent=O}get(R,b){return R===ws?this.route:R===ns?this.childContexts:this.parent.get(R,b)}}let As=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=c.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(b,O){1&b&&c._UZ(0,"router-outlet")},dependencies:[wo],encapsulation:2}),A})();function Di(A,R){var b;return A.providers&&!A._injector&&(A._injector=(0,c.MMx)(A.providers,R,`Route: ${A.path}`)),null!==(b=A._injector)&&void 0!==b?b:R}function $s(A){const R=A.children&&A.children.map($s),b=R?{...A,children:R}:{...A};return!b.component&&!b.loadComponent&&(R||b.loadChildren)&&b.outlet&&b.outlet!==cn&&(b.component=As),b}function Gr(A){return A.outlet||cn}function qo(A,R){const b=A.filter(O=>Gr(O)===R);return b.push(...A.filter(O=>Gr(O)!==R)),b}function rs(A){var R;if(!A)return null;if(null!==(R=A.routeConfig)&&void 0!==R&&R._injector)return A.routeConfig._injector;for(let b=A.parent;b;b=b.parent){const O=b.routeConfig;if(null!=O&&O._loadedInjector)return O._loadedInjector;if(null!=O&&O._injector)return O._injector}return null}class gs{constructor(R,b,O,j){this.routeReuseStrategy=R,this.futureState=b,this.currState=O,this.forwardEvent=j}activate(R){const b=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,O,R),ca(this.futureState.root),this.activateChildRoutes(b,O,R)}deactivateChildRoutes(R,b,O){const j=es(b);R.children.forEach(Q=>{const se=Q.value.outlet;this.deactivateRoutes(Q,j[se],O),delete j[se]}),Dr(j,(Q,se)=>{this.deactivateRouteAndItsChildren(Q,O)})}deactivateRoutes(R,b,O){const j=R.value,Q=b?b.value:null;if(j===Q)if(j.component){const se=O.getContext(j.outlet);se&&this.deactivateChildRoutes(R,b,se.children)}else this.deactivateChildRoutes(R,b,O);else Q&&this.deactivateRouteAndItsChildren(b,O)}deactivateRouteAndItsChildren(R,b){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,b):this.deactivateRouteAndOutlet(R,b)}detachAndStoreRouteSubtree(R,b){const O=b.getContext(R.value.outlet),j=O&&R.value.component?O.children:b,Q=es(R);for(const se of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[se],j);if(O&&O.outlet){const se=O.outlet.detach(),ct=O.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:se,route:R,contexts:ct})}}deactivateRouteAndOutlet(R,b){const O=b.getContext(R.value.outlet),j=O&&R.value.component?O.children:b,Q=es(R);for(const se of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[se],j);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(R,b,O){const j=es(b);R.children.forEach(Q=>{this.activateRoutes(Q,j[Q.value.outlet],O),this.forwardEvent(new $n(Q.value.snapshot))}),R.children.length&&this.forwardEvent(new Yt(R.value.snapshot))}activateRoutes(R,b,O){const j=R.value,Q=b?b.value:null;if(ca(j),j===Q)if(j.component){const ct=O.getOrCreateContext(j.outlet);this.activateChildRoutes(R,b,ct.children)}else this.activateChildRoutes(R,b,O);else if(j.component){const ct=O.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const zt=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),ct.children.onOutletReAttached(zt.contexts),ct.attachRef=zt.componentRef,ct.route=zt.route.value,ct.outlet&&ct.outlet.attach(zt.componentRef,zt.route.value),ca(zt.route.value),this.activateChildRoutes(R,null,ct.children)}else{var se;const zt=rs(j.snapshot),ln=null!==(se=null==zt?void 0:zt.get(c._Vd))&&void 0!==se?se:null;ct.attachRef=null,ct.route=j,ct.resolver=ln,ct.injector=zt,ct.outlet&&ct.outlet.activateWith(j,ct.injector),this.activateChildRoutes(R,null,ct.children)}}else this.activateChildRoutes(R,null,O)}}class Yo{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Co{constructor(R,b){this.component=R,this.route=b}}function Er(A,R,b){const O=A._root;return Bs(O,R?R._root:null,b,[O.value])}function Xs(A,R){const b=Symbol(),O=R.get(A,b);return O===b?"function"!=typeof A||(0,c.Z0I)(A)?R.get(A):A:O}function Bs(A,R,b,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const Q=es(R);return A.children.forEach(se=>{(function Zo(A,R,b,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const Q=A.value,se=R?R.value:null,ct=b?b.getContext(A.value.outlet):null;if(se&&Q.routeConfig===se.routeConfig){const zt=function ha(A,R,b){if("function"==typeof b)return b(A,R);switch(b){case"pathParamsChange":return!gr(A.url,R.url);case"pathParamsOrQueryParamsChange":return!gr(A.url,R.url)||!tr(A.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qs(A,R)||!tr(A.queryParams,R.queryParams);default:return!qs(A,R)}}(se,Q,Q.routeConfig.runGuardsAndResolvers);zt?j.canActivateChecks.push(new Yo(O)):(Q.data=se.data,Q._resolvedData=se._resolvedData),Bs(A,R,Q.component?ct?ct.children:null:b,O,j),zt&&ct&&ct.outlet&&ct.outlet.isActivated&&j.canDeactivateChecks.push(new Co(ct.outlet.component,se))}else se&&xi(R,ct,j),j.canActivateChecks.push(new Yo(O)),Bs(A,null,Q.component?ct?ct.children:null:b,O,j)})(se,Q[se.value.outlet],b,O.concat([se.value]),j),delete Q[se.value.outlet]}),Dr(Q,(se,ct)=>xi(se,b.getContext(ct),j)),j}function xi(A,R,b){const O=es(A),j=A.value;Dr(O,(Q,se)=>{xi(Q,j.component?R?R.children.getContext(se):null:R,b)}),b.canDeactivateChecks.push(new Co(j.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,j))}function Us(A){return"function"==typeof A}function Xn(A){return A instanceof Pe.K||"EmptyError"===(null==A?void 0:A.name)}const Sr=Symbol("INITIAL_VALUE");function di(){return(0,_t.w)(A=>Ge(A.map(R=>R.pipe((0,yt.q)(1),(0,ot.O)(Sr)))).pipe((0,Be.U)(R=>{for(const b of R)if(!0!==b){if(b===Sr)return Sr;if(!1===b||b instanceof ti)return b}return!0}),(0,at.h)(R=>R!==Sr),(0,yt.q)(1)))}function Ca(A){return(0,dt.z)((0,we.b)(R=>{if(Nt(R))throw ps(0,R)}),(0,Be.U)(R=>!0===R))}const ml={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Po(A,R,b,O,j){const Q=yl(A,R,b);return Q.matched?function ql(A,R,b,O){const j=R.canMatch;if(!j||0===j.length)return(0,G.of)(!0);const Q=j.map(se=>{const ct=Xs(se,A);return Fr(function ze(A){return A&&Us(A.canMatch)}(ct)?ct.canMatch(R,b):A.runInContext(()=>ct(R,b)))});return(0,G.of)(Q).pipe(di(),Ca())}(O=Di(R,O),R,b).pipe((0,Be.U)(se=>!0===se?Q:{...ml})):(0,G.of)(Q)}function yl(A,R,b){var O;if(""===R.path)return"full"===R.pathMatch&&(A.hasChildren()||b.length>0)?{...ml}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const Q=(R.matcher||Pr)(b,A,R);if(!Q)return{...ml};const se={};Dr(Q.posParams,(zt,ln)=>{se[ln]=zt.path});const ct=Q.consumed.length>0?{...se,...Q.consumed[Q.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:Q.consumed,remainingSegments:b.slice(Q.consumed.length),parameters:ct,positionalParamSegments:null!==(O=Q.posParams)&&void 0!==O?O:{}}}function ba(A,R,b,O){if(b.length>0&&function fa(A,R,b){return b.some(O=>ja(A,R,O)&&Gr(O)!==cn)}(A,b,O)){const Q=new Dn(R,function tl(A,R,b,O){const j={};j[cn]=O,O._sourceSegment=A,O._segmentIndexShift=R.length;for(const Q of b)if(""===Q.path&&Gr(Q)!==cn){const se=new Dn([],{});se._sourceSegment=A,se._segmentIndexShift=R.length,j[Gr(Q)]=se}return j}(A,R,O,new Dn(b,A.children)));return Q._sourceSegment=A,Q._segmentIndexShift=R.length,{segmentGroup:Q,slicedSegments:[]}}if(0===b.length&&function Da(A,R,b){return b.some(O=>ja(A,R,O))}(A,b,O)){const Q=new Dn(A.segments,function Oo(A,R,b,O,j){const Q={};for(const se of O)if(ja(A,b,se)&&!j[Gr(se)]){const ct=new Dn([],{});ct._sourceSegment=A,ct._segmentIndexShift=R.length,Q[Gr(se)]=ct}return{...j,...Q}}(A,R,b,O,A.children));return Q._sourceSegment=A,Q._segmentIndexShift=R.length,{segmentGroup:Q,slicedSegments:b}}const j=new Dn(A.segments,A.children);return j._sourceSegment=A,j._segmentIndexShift=R.length,{segmentGroup:j,slicedSegments:b}}function ja(A,R,b){return(!(A.hasChildren()||R.length>0)||"full"!==b.pathMatch)&&""===b.path}function ko(A,R,b,O){return!!(Gr(A)===O||O!==cn&&ja(R,b,A))&&("**"===A.path||yl(R,A,b).matched)}function Qs(A,R,b){return 0===R.length&&!A.children[b]}const Jo=!1;class Ta{constructor(R){this.segmentGroup=R||null}}class qi{constructor(R){this.urlTree=R}}function No(A){return(0,ft._)(new Ta(A))}function Yi(A){return(0,ft._)(new qi(A))}class fo{constructor(R,b,O,j,Q){this.injector=R,this.configLoader=b,this.urlSerializer=O,this.urlTree=j,this.config=Q,this.allowRedirects=!0}apply(){const R=ba(this.urlTree.root,[],[],this.config).segmentGroup,b=new Dn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,b,cn).pipe((0,Be.U)(Q=>this.createUrlTree(Ne(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,gt.K)(Q=>{if(Q instanceof qi)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof Ta?this.noMatchError(Q):Q}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,cn).pipe((0,Be.U)(j=>this.createUrlTree(Ne(j),R.queryParams,R.fragment))).pipe((0,gt.K)(j=>{throw j instanceof Ta?this.noMatchError(j):j}))}noMatchError(R){return new c.vHH(4002,Jo)}createUrlTree(R,b,O){const j=je(R);return new ti(j,b,O)}expandSegmentGroup(R,b,O,j){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(R,b,O).pipe((0,Be.U)(Q=>new Dn([],Q))):this.expandSegment(R,O,b,O.segments,j,!0)}expandChildren(R,b,O){const j=[];for(const Q of Object.keys(O.children))"primary"===Q?j.unshift(Q):j.push(Q);return(0,q.D)(j).pipe((0,Me.b)(Q=>{const se=O.children[Q],ct=qo(b,Q);return this.expandSegmentGroup(R,ct,se,Q).pipe((0,Be.U)(zt=>({segment:zt,outlet:Q})))}),(0,et.R)((Q,se)=>(Q[se.outlet]=se.segment,Q),{}),Jt())}expandSegment(R,b,O,j,Q,se){return(0,q.D)(O).pipe((0,Me.b)(ct=>this.expandSegmentAgainstRoute(R,b,O,ct,j,Q,se).pipe((0,gt.K)(ln=>{if(ln instanceof Ta)return(0,G.of)(null);throw ln}))),(0,Ae.P)(ct=>!!ct),(0,gt.K)((ct,zt)=>{if(Xn(ct))return Qs(b,j,Q)?(0,G.of)(new Dn([],{})):No(b);throw ct}))}expandSegmentAgainstRoute(R,b,O,j,Q,se,ct){return ko(j,b,Q,se)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(R,b,j,Q,se):ct&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,b,O,j,Q,se):No(b):No(b)}expandSegmentAgainstRouteUsingRedirect(R,b,O,j,Q,se){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,O,j,se):this.expandRegularSegmentAgainstRouteUsingRedirect(R,b,O,j,Q,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,b,O,j){const Q=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Yi(Q):this.lineralizeSegments(O,Q).pipe((0,Xe.z)(se=>{const ct=new Dn(se,{});return this.expandSegment(R,ct,b,se,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,b,O,j,Q,se){const{matched:ct,consumedSegments:zt,remainingSegments:ln,positionalParamSegments:Jn}=yl(b,j,Q);if(!ct)return No(b);const Vn=this.applyRedirectCommands(zt,j.redirectTo,Jn);return j.redirectTo.startsWith("/")?Yi(Vn):this.lineralizeSegments(j,Vn).pipe((0,Xe.z)(Kr=>this.expandSegment(R,b,O,Kr.concat(ln),se,!1)))}matchSegmentAgainstRoute(R,b,O,j,Q){return"**"===O.path?(R=Di(O,R),O.loadChildren?(O._loadedRoutes?(0,G.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(R,O)).pipe((0,Be.U)(ct=>(O._loadedRoutes=ct.routes,O._loadedInjector=ct.injector,new Dn(j,{})))):(0,G.of)(new Dn(j,{}))):Po(b,O,j,R).pipe((0,_t.w)(({matched:se,consumedSegments:ct,remainingSegments:zt})=>{var ln;return se?(R=null!==(ln=O._injector)&&void 0!==ln?ln:R,this.getChildConfig(R,O,j).pipe((0,Xe.z)(Vn=>{var Kr;const os=null!==(Kr=Vn.injector)&&void 0!==Kr?Kr:R,Ai=Vn.routes,{segmentGroup:Do,slicedSegments:_s}=ba(b,ct,zt,Ai),ma=new Dn(Do.segments,Do.children);if(0===_s.length&&ma.hasChildren())return this.expandChildren(os,Ai,ma).pipe((0,Be.U)(Ic=>new Dn(ct,Ic)));if(0===Ai.length&&0===_s.length)return(0,G.of)(new Dn(ct,{}));const Ga=Gr(O)===Q;return this.expandSegment(os,ma,Ai,_s,Ga?cn:Q,!0).pipe((0,Be.U)(to=>new Dn(ct.concat(to.segments),to.children)))}))):No(b)}))}getChildConfig(R,b,O){return b.children?(0,G.of)({routes:b.children,injector:R}):b.loadChildren?void 0!==b._loadedRoutes?(0,G.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function el(A,R,b,O){const j=R.canLoad;if(void 0===j||0===j.length)return(0,G.of)(!0);const Q=j.map(se=>{const ct=Xs(se,A);return Fr(function I(A){return A&&Us(A.canLoad)}(ct)?ct.canLoad(R,b):A.runInContext(()=>ct(R,b)))});return(0,G.of)(Q).pipe(di(),Ca())}(R,b,O).pipe((0,Xe.z)(j=>j?this.configLoader.loadChildren(R,b).pipe((0,we.b)(Q=>{b._loadedRoutes=Q.routes,b._loadedInjector=Q.injector})):function Hr(A){return(0,ft._)(Io(Jo,3))}())):(0,G.of)({routes:[],injector:R})}lineralizeSegments(R,b){let O=[],j=b.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,G.of)(O);if(j.numberOfChildren>1||!j.children[cn])return R.redirectTo,(0,ft._)(new c.vHH(4e3,Jo));j=j.children[cn]}}applyRedirectCommands(R,b,O){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),R,O)}applyRedirectCreateUrlTree(R,b,O,j){const Q=this.createSegmentGroup(R,b.root,O,j);return new ti(Q,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(R,b){const O={};return Dr(R,(j,Q)=>{if("string"==typeof j&&j.startsWith(":")){const ct=j.substring(1);O[Q]=b[ct]}else O[Q]=j}),O}createSegmentGroup(R,b,O,j){const Q=this.createSegments(R,b.segments,O,j);let se={};return Dr(b.children,(ct,zt)=>{se[zt]=this.createSegmentGroup(R,ct,O,j)}),new Dn(Q,se)}createSegments(R,b,O,j){return b.map(Q=>Q.path.startsWith(":")?this.findPosParam(R,Q,j):this.findOrReturn(Q,O))}findPosParam(R,b,O){const j=O[b.path.substring(1)];if(!j)throw new c.vHH(4001,Jo);return j}findOrReturn(R,b){let O=0;for(const j of b){if(j.path===R.path)return b.splice(O),j;O++}return R}}class Fo{}class pa{constructor(R,b,O,j,Q,se,ct){this.injector=R,this.rootComponentType=b,this.config=O,this.urlTree=j,this.url=Q,this.paramsInheritanceStrategy=se,this.urlSerializer=ct}recognize(){const R=ba(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,cn).pipe((0,Be.U)(b=>{if(null===b)return null;const O=new Eo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Ks(O,b),Q=new Pl(this.url,j);return this.inheritParamsAndData(Q._root),Q}))}inheritParamsAndData(R){const b=R.value,O=Mo(b,this.paramsInheritanceStrategy);b.params=Object.freeze(O.params),b.data=Object.freeze(O.data),R.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(R,b,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(R,b,O):this.processSegment(R,b,O,O.segments,j)}processChildren(R,b,O){return(0,q.D)(Object.keys(O.children)).pipe((0,Me.b)(j=>{const Q=O.children[j],se=qo(b,j);return this.processSegmentGroup(R,se,Q,j)}),(0,et.R)((j,Q)=>j&&Q?(j.push(...Q),j):null),function tn(A,R=!1){return(0,Le.e)((b,O)=>{let j=0;b.subscribe((0,de.x)(O,Q=>{const se=A(Q,j++);(se||R)&&O.next(Q),!se&&O.complete()}))})}(j=>null!==j),(0,jt.d)(null),Jt(),(0,Be.U)(j=>{if(null===j)return null;const Q=ne(j);return function F(A){A.sort((R,b)=>R.value.outlet===cn?-1:b.value.outlet===cn?1:R.value.outlet.localeCompare(b.value.outlet))}(Q),Q}))}processSegment(R,b,O,j,Q){return(0,q.D)(b).pipe((0,Me.b)(se=>{var ct;return this.processSegmentAgainstRoute(null!==(ct=se._injector)&&void 0!==ct?ct:R,se,O,j,Q)}),(0,Ae.P)(se=>!!se),(0,gt.K)(se=>{if(Xn(se))return Qs(O,j,Q)?(0,G.of)([]):(0,G.of)(null);throw se}))}processSegmentAgainstRoute(R,b,O,j,Q){if(b.redirectTo||!ko(b,O,j,Q))return(0,G.of)(null);let se;if("**"===b.path){var ct,zt;const ln=j.length>0?ei(j).parameters:{},Jn=en(O)+j.length,Vn=new Eo(j,ln,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vr(b),Gr(b),null!==(ct=null!==(zt=b.component)&&void 0!==zt?zt:b._loadedComponent)&&void 0!==ct?ct:null,b,Wt(O),Jn,qr(b));se=(0,G.of)({snapshot:Vn,consumedSegments:[],remainingSegments:[]})}else se=Po(O,b,j,R).pipe((0,Be.U)(({matched:ln,consumedSegments:Jn,remainingSegments:Vn,parameters:Kr})=>{var os,Ai;if(!ln)return null;const Do=en(O)+Jn.length;return{snapshot:new Eo(Jn,Kr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vr(b),Gr(b),null!==(os=null!==(Ai=b.component)&&void 0!==Ai?Ai:b._loadedComponent)&&void 0!==os?os:null,b,Wt(O),Do,qr(b)),consumedSegments:Jn,remainingSegments:Vn}}));return se.pipe((0,_t.w)(ln=>{var Jn,Vn;if(null===ln)return(0,G.of)(null);const{snapshot:Kr,consumedSegments:os,remainingSegments:Ai}=ln;R=null!==(Jn=b._injector)&&void 0!==Jn?Jn:R;const Do=null!==(Vn=b._loadedInjector)&&void 0!==Vn?Vn:R,_s=function Y(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(b),{segmentGroup:ma,slicedSegments:Ga}=ba(O,os,Ai,_s.filter(to=>void 0===to.redirectTo));if(0===Ga.length&&ma.hasChildren())return this.processChildren(Do,_s,ma).pipe((0,Be.U)(to=>null===to?null:[new Ks(Kr,to)]));if(0===_s.length&&0===Ga.length)return(0,G.of)([new Ks(Kr,[])]);const ra=Gr(b)===Q;return this.processSegment(Do,_s,ma,Ga,ra?cn:Q).pipe((0,Be.U)(to=>null===to?null:[new Ks(Kr,to)]))}))}}function $(A){const R=A.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function ne(A){const R=[],b=new Set;for(const O of A){if(!$(O)){R.push(O);continue}const j=R.find(Q=>O.value.routeConfig===Q.value.routeConfig);void 0!==j?(j.children.push(...O.children),b.add(j)):R.push(O)}for(const O of b){const j=ne(O.children);R.push(new Ks(O.value,j))}return R.filter(O=>!b.has(O))}function Wt(A){let R=A;for(;R._sourceSegment;)R=R._sourceSegment;return R}function en(A){var R;let b=A,O=null!==(R=b._segmentIndexShift)&&void 0!==R?R:0;for(;b._sourceSegment;){var j;b=b._sourceSegment,O+=null!==(j=b._segmentIndexShift)&&void 0!==j?j:0}return O-1}function vr(A){return A.data||{}}function qr(A){return A.resolve||{}}function gi(A){return"string"==typeof A.title||null===A.title}function bs(A){return(0,_t.w)(R=>{const b=A(R);return b?(0,q.D)(b).pipe((0,Be.U)(()=>R)):(0,G.of)(R)})}const po=new c.OlP("ROUTES");let Lo=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,G.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const O=Fr(b.loadComponent()).pipe((0,Be.U)(Sa),(0,we.b)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=Q}),Hn(()=>{this.componentLoaders.delete(b)})),j=new H(O,()=>new De.x).pipe(ke());return this.componentLoaders.set(b,j),j}loadChildren(b,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,G.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const Q=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,Be.U)(ct=>{this.onLoadEndListener&&this.onLoadEndListener(O);let zt,ln,Jn=!1;Array.isArray(ct)?ln=ct:(zt=ct.create(b).injector,ln=ui(zt.get(po,[],c.XFs.Self|c.XFs.Optional)));return{routes:ln.map($s),injector:zt}}),Hn(()=>{this.childrenLoaders.delete(O)})),se=new H(Q,()=>new De.x).pipe(ke());return this.childrenLoaders.set(O,se),se}loadModuleFactoryOrRoutes(b){return Fr(b()).pipe((0,Be.U)(Sa),(0,Xe.z)(O=>O instanceof c.YKP||Array.isArray(O)?(0,G.of)(O):(0,q.D)(this.compiler.compileModuleAsync(O))))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Sa(A){return function nl(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let rl=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new De.x,this.configLoader=(0,c.f3M)(Lo),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)($t),this.rootContexts=(0,c.f3M)(ns),this.navigationId=0,this.afterPreactivation=()=>(0,G.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new lt(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new mt(j))}complete(){var b;null===(b=this.transitions)||void 0===b||b.complete()}handleNavigationRequest(b){var O;const j=++this.navigationId;null===(O=this.transitions)||void 0===O||O.next({...this.transitions.value,...b,id:j})}setupNavigations(b){return this.transitions=new Te.X({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nt,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,at.h)(O=>0!==O.id),(0,Be.U)(O=>({...O,extractedUrl:b.urlHandlingStrategy.extract(O.rawUrl)})),(0,_t.w)(O=>{let j=!1,Q=!1;return(0,G.of)(O).pipe((0,we.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.rawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,_t.w)(se=>{var ct;const zt=b.browserUrlTree.toString(),ln=!b.navigated||se.extractedUrl.toString()!==zt||zt!==b.currentUrlTree.toString(),Jn=null!==(ct=se.extras.onSameUrlNavigation)&&void 0!==ct?ct:b.onSameUrlNavigation;if(!ln&&"reload"!==Jn){const Vn="";return this.events.next(new kn(se.id,b.serializeUrl(O.rawUrl),Vn,0)),b.rawUrlTree=se.rawUrl,se.resolve(null),qe.E}if(b.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return Aa(se.source)&&(b.browserUrlTree=se.extractedUrl),(0,G.of)(se).pipe((0,_t.w)(Vn=>{var Kr,os;const Ai=null===(Kr=this.transitions)||void 0===Kr?void 0:Kr.getValue();return this.events.next(new qt(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),Vn.source,Vn.restoredState)),Ai!==(null===(os=this.transitions)||void 0===os?void 0:os.getValue())?qe.E:Promise.resolve(Vn)}),function Yl(A,R,b,O){return(0,_t.w)(j=>function Uc(A,R,b,O,j){return new fo(A,R,b,O,j).apply()}(A,R,b,j.extractedUrl,O).pipe((0,Be.U)(Q=>({...j,urlAfterRedirects:Q}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,we.b)(Vn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Vn.urlAfterRedirects},O.urlAfterRedirects=Vn.urlAfterRedirects}),function Mr(A,R,b,O,j){return(0,Xe.z)(Q=>function Zl(A,R,b,O,j,Q,se="emptyOnly"){return new pa(A,R,b,O,j,se,Q).recognize().pipe((0,_t.w)(ct=>null===ct?function hi(A){return new Fe.y(R=>R.error(A))}(new Fo):(0,G.of)(ct)))}(A,R,b,Q.urlAfterRedirects,O.serialize(Q.urlAfterRedirects),O,j).pipe((0,Be.U)(se=>({...Q,targetSnapshot:se}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,we.b)(Vn=>{if(O.targetSnapshot=Vn.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!Vn.extras.skipLocationChange){const os=b.urlHandlingStrategy.merge(Vn.urlAfterRedirects,Vn.rawUrl);b.setBrowserUrl(os,Vn)}b.browserUrlTree=Vn.urlAfterRedirects}const Kr=new Vr(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),this.urlSerializer.serialize(Vn.urlAfterRedirects),Vn.targetSnapshot);this.events.next(Kr)}));if(ln&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:Vn,extractedUrl:Kr,source:os,restoredState:Ai,extras:Do}=se,_s=new qt(Vn,this.urlSerializer.serialize(Kr),os,Ai);this.events.next(_s);const ma=oo(Kr,this.rootComponentType).snapshot;return O={...se,targetSnapshot:ma,urlAfterRedirects:Kr,extras:{...Do,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(O)}{const Vn="";return this.events.next(new kn(se.id,b.serializeUrl(O.extractedUrl),Vn,1)),b.rawUrlTree=se.rawUrl,se.resolve(null),qe.E}}),(0,we.b)(se=>{const ct=new mr(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot);this.events.next(ct)}),(0,Be.U)(se=>O={...se,guards:Er(se.targetSnapshot,se.currentSnapshot,this.rootContexts)}),function $r(A,R){return(0,Xe.z)(b=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:Q,canDeactivateChecks:se}}=b;return 0===se.length&&0===Q.length?(0,G.of)({...b,guardsResult:!0}):function ms(A,R,b,O){return(0,q.D)(A).pipe((0,Xe.z)(j=>function Vs(A,R,b,O,j){const Q=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,G.of)(!0);const se=Q.map(ct=>{var zt;const ln=null!==(zt=rs(R))&&void 0!==zt?zt:j,Jn=Xs(ct,ln);return Fr(function K(A){return A&&Us(A.canDeactivate)}(Jn)?Jn.canDeactivate(A,R,b,O):ln.runInContext(()=>Jn(A,R,b,O))).pipe((0,Ae.P)())});return(0,G.of)(se).pipe(di())}(j.component,j.route,b,R,O)),(0,Ae.P)(j=>!0!==j,!0))}(se,O,j,A).pipe((0,Xe.z)(ct=>ct&&function y(A){return"boolean"==typeof A}(ct)?function Cs(A,R,b,O){return(0,q.D)(R).pipe((0,Me.b)(j=>(0,be.z)(function Fi(A,R){return null!==A&&R&&R(new xt(A)),(0,G.of)(!0)}(j.route.parent,O),function wi(A,R){return null!==A&&R&&R(new gn(A)),(0,G.of)(!0)}(j.route,O),function Qo(A,R,b){const O=R[R.length-1],Q=R.slice(0,R.length-1).reverse().map(se=>function ho(A){const R=A.routeConfig?A.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:A,guards:R}:null}(se)).filter(se=>null!==se).map(se=>he(()=>{const ct=se.guards.map(zt=>{var ln;const Jn=null!==(ln=rs(se.node))&&void 0!==ln?ln:b,Vn=Xs(zt,Jn);return Fr(function T(A){return A&&Us(A.canActivateChild)}(Vn)?Vn.canActivateChild(O,A):Jn.runInContext(()=>Vn(O,A))).pipe((0,Ae.P)())});return(0,G.of)(ct).pipe(di())}));return(0,G.of)(Q).pipe(di())}(A,j.path,b),function Xo(A,R,b){const O=R.routeConfig?R.routeConfig.canActivate:null;if(!O||0===O.length)return(0,G.of)(!0);const j=O.map(Q=>he(()=>{var se;const ct=null!==(se=rs(R))&&void 0!==se?se:b,zt=Xs(Q,ct);return Fr(function f(A){return A&&Us(A.canActivate)}(zt)?zt.canActivate(R,A):ct.runInContext(()=>zt(R,A))).pipe((0,Ae.P)())}));return(0,G.of)(j).pipe(di())}(A,j.route,b))),(0,Ae.P)(j=>!0!==j,!0))}(O,Q,A,R):(0,G.of)(ct)),(0,Be.U)(ct=>({...b,guardsResult:ct})))})}(this.environmentInjector,se=>this.events.next(se)),(0,we.b)(se=>{if(O.guardsResult=se.guardsResult,Nt(se.guardsResult))throw ps(0,se.guardsResult);const ct=new Bi(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.events.next(ct)}),(0,at.h)(se=>!!se.guardsResult||(b.restoreHistory(se),this.cancelNavigationTransition(se,"",3),!1)),bs(se=>{if(se.guards.canActivateChecks.length)return(0,G.of)(se).pipe((0,we.b)(ct=>{const zt=new fr(ct.id,this.urlSerializer.serialize(ct.extractedUrl),this.urlSerializer.serialize(ct.urlAfterRedirects),ct.targetSnapshot);this.events.next(zt)}),(0,_t.w)(ct=>{let zt=!1;return(0,G.of)(ct).pipe(function wr(A,R){return(0,Xe.z)(b=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=b;if(!j.length)return(0,G.of)(b);let Q=0;return(0,q.D)(j).pipe((0,Me.b)(se=>function Zi(A,R,b,O){const j=A.routeConfig,Q=A._resolve;return void 0!==(null==j?void 0:j.title)&&!gi(j)&&(Q[lr]=j.title),function Ci(A,R,b,O){const j=function Vi(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===j.length)return(0,G.of)({});const Q={};return(0,q.D)(j).pipe((0,Xe.z)(se=>function ga(A,R,b,O){var j;const Q=null!==(j=rs(R))&&void 0!==j?j:O,se=Xs(A,Q);return Fr(se.resolve?se.resolve(R,b):Q.runInContext(()=>se(R,b)))}(A[se],R,b,O).pipe((0,Ae.P)(),(0,we.b)(ct=>{Q[se]=ct}))),Qe(1),function Tt(A){return(0,Be.U)(()=>A)}(Q),(0,gt.K)(se=>Xn(se)?qe.E:(0,ft._)(se)))}(Q,A,R,O).pipe((0,Be.U)(se=>(A._resolvedData=se,A.data=Mo(A,b).resolve,j&&gi(j)&&(A.data[lr]=j.title),null)))}(se.route,O,A,R)),(0,we.b)(()=>Q++),Qe(1),(0,Xe.z)(se=>Q===j.length?(0,G.of)(b):qe.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,we.b)({next:()=>zt=!0,complete:()=>{zt||(b.restoreHistory(ct),this.cancelNavigationTransition(ct,"",2))}}))}),(0,we.b)(ct=>{const zt=new fs(ct.id,this.urlSerializer.serialize(ct.extractedUrl),this.urlSerializer.serialize(ct.urlAfterRedirects),ct.targetSnapshot);this.events.next(zt)}))}),bs(se=>{const ct=zt=>{var ln;const Jn=[];null!==(ln=zt.routeConfig)&&void 0!==ln&&ln.loadComponent&&!zt.routeConfig._loadedComponent&&Jn.push(this.configLoader.loadComponent(zt.routeConfig).pipe((0,we.b)(Vn=>{zt.component=Vn}),(0,Be.U)(()=>{})));for(const Vn of zt.children)Jn.push(...ct(Vn));return Jn};return Ge(ct(se.targetSnapshot.root)).pipe((0,jt.d)(),(0,yt.q)(1))}),bs(()=>this.afterPreactivation()),(0,Be.U)(se=>{const ct=function ts(A,R,b){const O=Ys(A,R._root,b?b._root:void 0);return new Ro(O,R)}(b.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return O={...se,targetRouterState:ct}}),(0,we.b)(se=>{b.currentUrlTree=se.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),b.routerState=se.targetRouterState,"deferred"===b.urlUpdateStrategy&&(se.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,se),b.browserUrlTree=se.urlAfterRedirects)}),((A,R,b)=>(0,Be.U)(O=>(new gs(R,O.targetRouterState,O.currentRouterState,b).activate(A),O)))(this.rootContexts,b.routeReuseStrategy,se=>this.events.next(se)),(0,we.b)({next:se=>{var ct;j=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Kt(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),null===(ct=b.titleStrategy)||void 0===ct||ct.updateTitle(se.targetRouterState.snapshot),se.resolve(!0)},complete:()=>{j=!0}}),Hn(()=>{var se;j||Q||this.cancelNavigationTransition(O,"",1),(null===(se=this.currentNavigation)||void 0===se?void 0:se.id)===O.id&&(this.currentNavigation=null)}),(0,gt.K)(se=>{if(Q=!0,co(se)){Fs(se)||(b.navigated=!0,b.restoreHistory(O,!0));const zt=new pn(O.id,this.urlSerializer.serialize(O.extractedUrl),se.message,se.cancellationCode);if(this.events.next(zt),Fs(se)){const ln=b.urlHandlingStrategy.merge(se.url,b.rawUrlTree),Jn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||Aa(O.source)};b.scheduleNavigation(ln,nt,null,Jn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{var ct;b.restoreHistory(O,!0);const zt=new qn(O.id,this.urlSerializer.serialize(O.extractedUrl),se,null!==(ct=O.targetSnapshot)&&void 0!==ct?ct:void 0);this.events.next(zt);try{O.resolve(b.errorHandler(se))}catch(ln){O.reject(ln)}}return qe.E}))}))}cancelNavigationTransition(b,O,j){const Q=new pn(b.id,this.urlSerializer.serialize(b.extractedUrl),O,j);this.events.next(Q),b.resolve(!1)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Aa(A){return A!==nt}let pc=(()=>{class A{buildTitle(b){let O,j=b.root;for(;void 0!==j;){var Q;O=null!==(Q=this.getResolvedTitleForRoute(j))&&void 0!==Q?Q:O,j=j.children.find(se=>se.outlet===cn)}return O}getResolvedTitleForRoute(b){return b.data[lr]}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:function(){return(0,c.f3M)(Xi)},providedIn:"root"}),A})(),Xi=(()=>{class A extends pc{constructor(b){super(),this.title=b}updateTitle(b){const O=this.buildTitle(b);void 0!==O&&this.title.setTitle(O)}}return A.\u0275fac=function(b){return new(b||A)(c.LFG(ar.Dx))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),il=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:function(){return(0,c.f3M)(gc)},providedIn:"root"}),A})();class is{shouldDetach(R){return!1}store(R,b){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,b){return R.routeConfig===b.routeConfig}}let gc=(()=>{class A extends is{}return A.\u0275fac=function(){let R;return function(O){return(R||(R=c.n5z(A)))(O||A)}}(),A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const hn=new c.OlP("",{providedIn:"root",factory:()=>({})});let ss=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:function(){return(0,c.f3M)(fi)},providedIn:"root"}),A})(),fi=(()=>{class A{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,O){return b}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Zn(A){throw A}function or(A,R,b){return R.parse("/")}const yc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bt=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var b;this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(hn,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Zn,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||or,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(ss),this.routeReuseStrategy=(0,c.f3M)(il),this.urlCreationStrategy=(0,c.f3M)(Ni),this.titleStrategy=(0,c.f3M)(pc),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ui(null!==(b=(0,c.f3M)(po,{optional:!0}))&&void 0!==b?b:[]),this.navigationTransitions=(0,c.f3M)(rl),this.urlSerializer=(0,c.f3M)($t),this.location=(0,c.f3M)(it.Ye),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ti,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oo(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(O=>{this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nt,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const O="popstate"===b.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,O,b.state)},0)}))}navigateToSyncWithBrowser(b,O,j){const Q={replaceUrl:!0},se=null!=j&&j.navigationId?j:null;if(j){const zt={...j};delete zt.navigationId,delete zt.\u0275routerPageId,0!==Object.keys(zt).length&&(Q.state=zt)}const ct=this.parseUrl(b);this.scheduleNavigation(ct,O,se,Q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map($s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,O={}){const{relativeTo:j,queryParams:Q,fragment:se,queryParamsHandling:ct,preserveFragment:zt}=O,ln=zt?this.currentUrlTree.fragment:se;let Jn=null;switch(ct){case"merge":Jn={...this.currentUrlTree.queryParams,...Q};break;case"preserve":Jn=this.currentUrlTree.queryParams;break;default:Jn=Q||null}return null!==Jn&&(Jn=this.removeEmptyProps(Jn)),this.urlCreationStrategy.createUrlTree(j,this.routerState,this.currentUrlTree,b,Jn,null!=ln?ln:null)}navigateByUrl(b,O={skipLocationChange:!1}){const j=Nt(b)?b:this.parseUrl(b),Q=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(Q,nt,null,O)}navigate(b,O={skipLocationChange:!1}){return function dn(A){for(let R=0;R<A.length;R++){const b=A[R];if(null==b)throw new c.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,O),O)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let O;try{O=this.urlSerializer.parse(b)}catch(j){O=this.malformedUriErrorHandler(j,this.urlSerializer,b)}return O}isActive(b,O){let j;if(j=!0===O?{...yc}:!1===O?{...Nn}:O,Nt(b))return Wn(this.currentUrlTree,b,j);const Q=this.parseUrl(b);return Wn(this.currentUrlTree,Q,j)}removeEmptyProps(b){return Object.keys(b).reduce((O,j)=>{const Q=b[j];return null!=Q&&(O[j]=Q),O},{})}scheduleNavigation(b,O,j,Q,se){if(this.disposed)return Promise.resolve(!1);let ct,zt,ln,Jn;if(se?(ct=se.resolve,zt=se.reject,ln=se.promise):ln=new Promise((os,Ai)=>{ct=os,zt=Ai}),"computed"===this.canceledNavigationResolution)if(j&&j.\u0275routerPageId)Jn=j.\u0275routerPageId;else if(Q.replaceUrl||Q.skipLocationChange){var Vn;Jn=null!==(Vn=this.browserPageId)&&void 0!==Vn?Vn:0}else{var Kr;Jn=(null!==(Kr=this.browserPageId)&&void 0!==Kr?Kr:0)+1}else Jn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Jn,source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:Q,resolve:ct,reject:zt,promise:ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ln.catch(os=>Promise.reject(os))}setBrowserUrl(b,O){const j=this.urlSerializer.serialize(b),Q={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl?this.location.replaceState(j,"",Q):this.location.go(j,"",Q)}restoreHistory(b,O=!1){if("computed"===this.canceledNavigationResolution){var j,Q;const se=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.getCurrentNavigation())||void 0===j?void 0:j.finalUrl)||0===se?this.currentUrlTree===(null===(Q=this.getCurrentNavigation())||void 0===Q?void 0:Q.finalUrl)&&0===se&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(se)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,O){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:O}:{navigationId:b}}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ji=(()=>{class A{constructor(b,O,j,Q,se,ct){var zt;this.router=b,this.route=O,this.tabIndexAttribute=j,this.renderer=Q,this.el=se,this.locationStrategy=ct,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new De.x;const ln=null===(zt=se.nativeElement.tagName)||void 0===zt?void 0:zt.toLowerCase();this.isAnchorElement="a"===ln||"area"===ln,this.isAnchorElement?this.subscription=b.events.subscribe(Jn=>{Jn instanceof Kt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,c.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,c.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,c.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,O,j,Q,se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||O||j||Q||se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var b;null===(b=this.subscription)||void 0===b||b.unsubscribe()}updateHref(){var b;this.href=null!==this.urlTree&&this.locationStrategy?null===(b=this.locationStrategy)||void 0===b?void 0:b.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const O=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(b,O){const j=this.renderer,Q=this.el.nativeElement;null!==O?j.setAttribute(Q,b,O):j.removeAttribute(Q,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(b){return new(b||A)(c.Y36(Bt),c.Y36(ws),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(it.S$))},A.\u0275dir=c.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&c.NdJ("click",function(Q){return O.onClick(Q.button,Q.ctrlKey,Q.shiftKey,Q.altKey,Q.metaKey)}),2&b&&c.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),A})();class Ha{}let Xl=(()=>{class A{preload(b,O){return O().pipe((0,gt.K)(()=>(0,G.of)(null)))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Vc=(()=>{class A{constructor(b,O,j,Q,se){this.router=b,this.injector=j,this.preloadingStrategy=Q,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe((0,at.h)(b=>b instanceof Kt),(0,Me.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,O){const j=[];for(const zt of O){var Q,se;zt.providers&&!zt._injector&&(zt._injector=(0,c.MMx)(zt.providers,b,`Route: ${zt.path}`));const ln=null!==(Q=zt._injector)&&void 0!==Q?Q:b,Jn=null!==(se=zt._loadedInjector)&&void 0!==se?se:ln;if(zt.loadChildren&&!zt._loadedRoutes&&void 0===zt.canLoad||zt.loadComponent&&!zt._loadedComponent)j.push(this.preloadConfig(ln,zt));else if(zt.children||zt._loadedRoutes){var ct;j.push(this.processRoutes(Jn,null!==(ct=zt.children)&&void 0!==ct?ct:zt._loadedRoutes))}}return(0,q.D)(j).pipe((0,Gn.J)())}preloadConfig(b,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(b,O):(0,G.of)(null);const Q=j.pipe((0,Xe.z)(se=>{var ct;return null===se?(0,G.of)(void 0):(O._loadedRoutes=se.routes,O._loadedInjector=se.injector,this.processRoutes(null!==(ct=se.injector)&&void 0!==ct?ct:b,se.routes))}));if(O.loadComponent&&!O._loadedComponent){const se=this.loader.loadComponent(O);return(0,q.D)([Q,se]).pipe((0,Gn.J)())}return Q})}}return A.\u0275fac=function(b){return new(b||A)(c.LFG(Bt),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(Ha),c.LFG(Lo))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const za=new c.OlP("");let Il=(()=>{class A{constructor(b,O,j,Q,se={}){this.urlSerializer=b,this.transitions=O,this.viewportScroller=j,this.zone=Q,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof qt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Kt&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof jr&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jr(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){var b,O;null===(b=this.routerEventsSubscription)||void 0===b||b.unsubscribe(),null===(O=this.scrollEventsSubscription)||void 0===O||O.unsubscribe()}}return A.\u0275fac=function(b){c.$Z()},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac}),A})();var bo=(()=>((bo=bo||{})[bo.COMPLETE=0]="COMPLETE",bo[bo.FAILED=1]="FAILED",bo[bo.REDIRECTING=2]="REDIRECTING",bo))();const ta=!1;function $o(A,R){return{\u0275kind:A,\u0275providers:R}}const yi=new c.OlP("",{providedIn:"root",factory:()=>!1});function mu(){const A=(0,c.f3M)(c.zs3);return R=>{var b,O;const j=A.get(c.z2F);if(R!==j.components[0])return;const Q=A.get(Bt),se=A.get(Ar);1===A.get(On)&&Q.initialNavigation(),null===(b=A.get(Ec,null,c.XFs.Optional))||void 0===b||b.setUpPreloading(),null===(O=A.get(za,null,c.XFs.Optional))||void 0===O||O.init(),Q.resetRootComponentType(j.componentTypes[0]),se.closed||(se.next(),se.unsubscribe())}}const Ar=new c.OlP(ta?"bootstrap done indicator":"",{factory:()=>new De.x}),On=new c.OlP(ta?"initial navigation":"",{providedIn:"root",factory:()=>1});function eo(){let A=[];return A=ta?[{provide:c.Xts,multi:!0,useFactory:()=>{const R=(0,c.f3M)(Bt);return()=>R.events.subscribe(b=>{var O,j,Q,se;null===(O=(j=console).group)||void 0===O||O.call(j,`Router Event: ${b.constructor.name}`),console.log(function dr(A){var R,b,O,j;if(!("type"in A))return`Unknown Router Event: ${A.constructor.name}`;switch(A.type){case 14:return`ActivationEnd(path: '${(null===(R=A.snapshot.routeConfig)||void 0===R?void 0:R.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(b=A.snapshot.routeConfig)||void 0===b?void 0:b.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(O=A.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(j=A.snapshot.routeConfig)||void 0===j?void 0:j.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state}, shouldActivate: ${A.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 2:return`NavigationCancel(id: ${A.id}, url: '${A.url}')`;case 16:return`NavigationSkipped(id: ${A.id}, url: '${A.url}')`;case 1:return`NavigationEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${A.id}, url: '${A.url}', error: ${A.error})`;case 0:return`NavigationStart(id: ${A.id}, url: '${A.url}')`;case 6:return`ResolveEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 5:return`ResolveStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 10:return`RouteConfigLoadEnd(path: ${A.route.path})`;case 9:return`RouteConfigLoadStart(path: ${A.route.path})`;case 4:return`RoutesRecognized(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 15:return`Scroll(anchor: '${A.anchor}', position: '${A.position?`${A.position[0]}, ${A.position[1]}`:null}')`}}(b)),console.log(b),null===(Q=(se=console).groupEnd)||void 0===Q||Q.call(se)})}}]:[],$o(1,A)}const Ec=new c.OlP(ta?"router preloader":"");function Jl(A){return $o(0,[{provide:Ec,useExisting:Vc},{provide:Ha,useExisting:A}])}const mo=!1,ec=new c.OlP(mo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),wl=[it.Ye,{provide:$t,useClass:We},Bt,ns,{provide:ws,useFactory:function Js(A){return A.routerState.root},deps:[Bt]},Lo,mo?{provide:yi,useValue:!0}:[]];function jc(){return new c.PXZ("Router",Bt)}let vs=(()=>{class A{constructor(b){}static forRoot(b,O){return{ngModule:A,providers:[wl,mo&&null!=O&&O.enableTracing?eo().\u0275providers:[],{provide:po,multi:!0,useValue:b},{provide:ec,useFactory:Br,deps:[[Bt,new c.FiY,new c.tp0]]},{provide:hn,useValue:O||{}},null!=O&&O.useHash?{provide:it.S$,useClass:it.Do}:{provide:it.S$,useClass:it.b0},{provide:za,useFactory:()=>{const A=(0,c.f3M)(it.EM),R=(0,c.f3M)(c.R0b),b=(0,c.f3M)(hn),O=(0,c.f3M)(rl),j=(0,c.f3M)($t);return b.scrollOffset&&A.setOffset(b.scrollOffset),new Il(j,O,A,R,b)}},null!=O&&O.preloadingStrategy?Jl(O.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:jc},null!=O&&O.initialNavigation?Si(O):[],[{provide:Or,useFactory:mu},{provide:c.tb,multi:!0,useExisting:Or}]]}}static forChild(b){return{ngModule:A,providers:[{provide:po,multi:!0,useValue:b}]}}}return A.\u0275fac=function(b){return new(b||A)(c.LFG(ec,8))},A.\u0275mod=c.oAB({type:A}),A.\u0275inj=c.cJS({imports:[As]}),A})();function Br(A){if(mo&&A)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Si(A){return["disabled"===A.initialNavigation?$o(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const R=(0,c.f3M)(Bt);return()=>{R.setUpLocationChangeListener()}}},{provide:On,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?$o(2,[{provide:On,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:R=>{const b=R.get(it.V_,Promise.resolve());return()=>b.then(()=>new Promise(O=>{const j=R.get(Bt),Q=R.get(Ar);(function vc(A,R){A.events.pipe((0,at.h)(b=>b instanceof Kt||b instanceof pn||b instanceof qn||b instanceof kn),(0,Be.U)(b=>b instanceof Kt||b instanceof kn?bo.COMPLETE:b instanceof pn&&(0===b.code||1===b.code)?bo.REDIRECTING:bo.FAILED),(0,at.h)(b=>b!==bo.REDIRECTING),(0,yt.q)(1)).subscribe(()=>{R()})})(j,()=>{O(!0)}),R.get(rl).afterPreactivation=()=>(O(!0),Q.closed?(0,G.of)(void 0):Q),j.initialNavigation()}))}}]).\u0275providers:[]]}const Or=new c.OlP(mo?"Router Initializer":"")},3942:(_n,It,L)=>{"use strict";L.d(It,{Z:()=>ut});var c=L(2090),q=L(4859),G=L(2951),Te=L(1877);class Pe{constructor(be,Ie){this._delegate=be,this.firebase=Ie,(0,G._addComponent)(be,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(be,Ie=G._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(be);return!dt.isInitialized()&&"EXPLICIT"===(null===(he=dt.getComponent())||void 0===he?void 0:he.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:Ie})}_removeServiceInstance(be,Ie=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(Ie)}_addComponent(be){(0,G._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,G._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Ue(){const Pt=function Se(Pt){const be={},Ie={__esModule:!0,initializeApp:function ft(ke,H={}){const De=G.initializeApp(ke,H);if((0,c.r3)(be,De.name))return be[De.name];const it=new Pt(De,Ie);return be[De.name]=it,it},app:dt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Je(ke){const H=ke.name,De=H.replace("-compat","");if(G._registerComponent(ke)&&"PUBLIC"===ke.type){const it=(Be=dt())=>{if("function"!=typeof Be[De])throw ge.create("invalid-app-argument",{appName:H});return Be[De]()};void 0!==ke.serviceProps&&(0,c.ZB)(it,ke.serviceProps),Ie[De]=it,Pt.prototype[De]=function(...Be){return this._getService.bind(this,H).apply(this,ke.multipleInstances?Be:[])}}return"PUBLIC"===ke.type?Ie[De]:null},removeApp:function he(ke){delete be[ke]},useAsService:function Le(ke,H){return"serverAuth"===H?null:H},modularAPIs:G}};function dt(ke){if(!(0,c.r3)(be,ke=ke||G._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:ke});return be[ke]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function qe(){return Object.keys(be).map(ke=>be[ke])}}),dt.App=Pt,Ie}(Pe);return Pt.INTERNAL=Object.assign(Object.assign({},Pt.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function be(Ie){(0,c.ZB)(Pt,Ie)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Pt}(),re=new Te.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=pe;!function Ge(Pt){(0,G.registerVersion)("@firebase/app-compat","0.2.9",Pt)}()},2951:(_n,It,L)=>{"use strict";L.r(It),L.d(It,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>Nr,_addComponent:()=>Cn,_addOrOverwriteComponent:()=>mn,_apps:()=>Fr,_clearComponents:()=>_r,_components:()=>Fn,_getProvider:()=>Lr,_registerComponent:()=>Wn,_removeServiceInstance:()=>rn,deleteApp:()=>gr,getApp:()=>ai,getApps:()=>pi,initializeApp:()=>Dn,onLog:()=>We,registerVersion:()=>$t,setLogLevel:()=>rt});var c=L(5861),q=L(4859),G=L(1877),Te=L(2090);const Pe=(je,Ne)=>Ne.some(Ct=>je instanceof Ct);let Fe,ge;const pe=new WeakMap,re=new WeakMap,de=new WeakMap,Oe=new WeakMap,Ge=new WeakMap;let be={get(je,Ne,Ct){if(je instanceof IDBTransaction){if("done"===Ne)return re.get(je);if("objectStoreNames"===Ne)return je.objectStoreNames||de.get(je);if("store"===Ne)return Ct.objectStoreNames[1]?void 0:Ct.objectStore(Ct.objectStoreNames[0])}return ft(je[Ne])},set:(je,Ne,Ct)=>(je[Ne]=Ct,!0),has:(je,Ne)=>je instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in je};function dt(je){return"function"==typeof je?function he(je){return je!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(je)?function(...Ne){return je.apply(qe(this),Ne),ft(pe.get(this))}:function(...Ne){return ft(je.apply(qe(this),Ne))}:function(Ne,...Ct){const Nt=je.call(qe(this),Ne,...Ct);return de.set(Nt,Ne.sort?Ne.sort():[Ne]),ft(Nt)}}(je):(je instanceof IDBTransaction&&function Pt(je){if(re.has(je))return;const Ne=new Promise((Ct,Nt)=>{const un=()=>{je.removeEventListener("complete",Sn),je.removeEventListener("error",Kn),je.removeEventListener("abort",Kn)},Sn=()=>{Ct(),un()},Kn=()=>{Nt(je.error||new DOMException("AbortError","AbortError")),un()};je.addEventListener("complete",Sn),je.addEventListener("error",Kn),je.addEventListener("abort",Kn)});re.set(je,Ne)}(je),Pe(je,function Se(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(je,be):je)}function ft(je){if(je instanceof IDBRequest)return function ut(je){const Ne=new Promise((Ct,Nt)=>{const un=()=>{je.removeEventListener("success",Sn),je.removeEventListener("error",Kn)},Sn=()=>{Ct(ft(je.result)),un()},Kn=()=>{Nt(je.error),un()};je.addEventListener("success",Sn),je.addEventListener("error",Kn)});return Ne.then(Ct=>{Ct instanceof IDBCursor&&pe.set(Ct,je)}).catch(()=>{}),Ge.set(Ne,je),Ne}(je);if(Oe.has(je))return Oe.get(je);const Ne=dt(je);return Ne!==je&&(Oe.set(je,Ne),Ge.set(Ne,je)),Ne}const qe=je=>Ge.get(je),ke=["get","getKey","getAll","getAllKeys","count"],H=["put","add","delete","clear"],De=new Map;function it(je,Ne){if(!(je instanceof IDBDatabase)||Ne in je||"string"!=typeof Ne)return;if(De.get(Ne))return De.get(Ne);const Ct=Ne.replace(/FromIndex$/,""),Nt=Ne!==Ct,un=H.includes(Ct);if(!(Ct in(Nt?IDBIndex:IDBObjectStore).prototype)||!un&&!ke.includes(Ct))return;const Sn=function(){var Kn=(0,c.Z)(function*(Pn,...cr){const Qn=this.transaction(Pn,un?"readwrite":"readonly");let ni=Qn.store;return Nt&&(ni=ni.index(cr.shift())),(yield Promise.all([ni[Ct](...cr),un&&Qn.done]))[0]});return function(cr){return Kn.apply(this,arguments)}}();return De.set(Ne,Sn),Sn}!function Ie(je){be=je(be)}(je=>({...je,get:(Ne,Ct,Nt)=>it(Ne,Ct)||je.get(Ne,Ct,Nt),has:(Ne,Ct)=>!!it(Ne,Ct)||je.has(Ne,Ct)}));class Be{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function _t(je){const Ne=je.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(Ct)){const Nt=Ct.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const yt="@firebase/app",at=new G.Yd("@firebase/app"),Nr="[DEFAULT]",Dr={[yt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fr=new Map,Fn=new Map;function Cn(je,Ne){try{je.container.addComponent(Ne)}catch(Ct){at.debug(`Component ${Ne.name} failed to register with FirebaseApp ${je.name}`,Ct)}}function mn(je,Ne){je.container.addOrOverwriteComponent(Ne)}function Wn(je){const Ne=je.name;if(Fn.has(Ne))return at.debug(`There were multiple attempts to register component ${Ne}.`),!1;Fn.set(Ne,je);for(const Ct of Fr.values())Cn(Ct,je);return!0}function Lr(je,Ne){const Ct=je.container.getProvider("heartbeat").getImmediate({optional:!0});return Ct&&Ct.triggerHeartbeat(),je.container.getProvider(Ne)}function rn(je,Ne,Ct=Nr){Lr(je,Ne).clearInstance(Ct)}function _r(){Fn.clear()}const oi=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class xr{constructor(Ne,Ct,Nt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}const ti="9.21.0";function Dn(je,Ne={}){let Ct=je;"object"!=typeof Ne&&(Ne={name:Ne});const Nt=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},Ne),un=Nt.name;if("string"!=typeof un||!un)throw oi.create("bad-app-name",{appName:String(un)});if(Ct||(Ct=(0,Te.aH)()),!Ct)throw oi.create("no-options");const Sn=Fr.get(un);if(Sn){if((0,Te.vZ)(Ct,Sn.options)&&(0,Te.vZ)(Nt,Sn.config))return Sn;throw oi.create("duplicate-app",{appName:un})}const Kn=new q.H0(un);for(const cr of Fn.values())Kn.addComponent(cr);const Pn=new xr(Ct,Nt,Kn);return Fr.set(un,Pn),Pn}function ai(je=Nr){const Ne=Fr.get(je);if(!Ne&&je===Nr)return Dn();if(!Ne)throw oi.create("no-app",{appName:je});return Ne}function pi(){return Array.from(Fr.values())}function gr(je){return zr.apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(je){const Ne=je.name;Fr.has(Ne)&&(Fr.delete(Ne),yield Promise.all(je.container.getProviders().map(Ct=>Ct.delete())),je.isDeleted=!0)})).apply(this,arguments)}function $t(je,Ne,Ct){var Nt;let un=null!==(Nt=Dr[je])&&void 0!==Nt?Nt:je;Ct&&(un+=`-${Ct}`);const Sn=un.match(/\s|\//),Kn=Ne.match(/\s|\//);if(Sn||Kn){const Pn=[`Unable to register library "${un}" with version "${Ne}":`];return Sn&&Pn.push(`library name "${un}" contains illegal characters (whitespace or "/")`),Sn&&Kn&&Pn.push("and"),Kn&&Pn.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void at.warn(Pn.join(" "))}Wn(new q.wA(`${un}-version`,()=>({library:un,version:Ne}),"VERSION"))}function We(je,Ne){if(null!==je&&"function"!=typeof je)throw oi.create("invalid-log-argument");(0,G.Am)(je,Ne)}function rt(je){(0,G.Ub)(je)}const Xt="firebase-heartbeat-database",Lt=1,_e="firebase-heartbeat-store";let me=null;function He(){return me||(me=function Je(je,Ne,{blocked:Ct,upgrade:Nt,blocking:un,terminated:Sn}={}){const Kn=indexedDB.open(je,Ne),Pn=ft(Kn);return Nt&&Kn.addEventListener("upgradeneeded",cr=>{Nt(ft(Kn.result),cr.oldVersion,cr.newVersion,ft(Kn.transaction),cr)}),Ct&&Kn.addEventListener("blocked",cr=>Ct(cr.oldVersion,cr.newVersion,cr)),Pn.then(cr=>{Sn&&cr.addEventListener("close",()=>Sn()),un&&cr.addEventListener("versionchange",Qn=>un(Qn.oldVersion,Qn.newVersion,Qn))}).catch(()=>{}),Pn}(Xt,Lt,{upgrade:(je,Ne)=>{0===Ne&&je.createObjectStore(_e)}}).catch(je=>{throw oi.create("idb-open",{originalErrorMessage:je.message})})),me}function pt(){return(pt=(0,c.Z)(function*(je){try{return(yield He()).transaction(_e).objectStore(_e).get(Ve(je))}catch(Ne){if(Ne instanceof Te.ZR)at.warn(Ne.message);else{const Ct=oi.create("idb-get",{originalErrorMessage:null==Ne?void 0:Ne.message});at.warn(Ct.message)}}})).apply(this,arguments)}function yn(je,Ne){return $e.apply(this,arguments)}function $e(){return($e=(0,c.Z)(function*(je,Ne){try{const Nt=(yield He()).transaction(_e,"readwrite");return yield Nt.objectStore(_e).put(Ne,Ve(je)),Nt.done}catch(Ct){if(Ct instanceof Te.ZR)at.warn(Ct.message);else{const Nt=oi.create("idb-set",{originalErrorMessage:null==Ct?void 0:Ct.message});at.warn(Nt.message)}}})).apply(this,arguments)}function Ve(je){return`${je.name}!${je.options.appId}`}class kt{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const Ct=this.container.getProvider("app").getImmediate();this._storage=new St(Ct),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var Ne=this;return(0,c.Z)(function*(){const Nt=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),un=le();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==un&&!Ne._heartbeatsCache.heartbeats.some(Sn=>Sn.date===un))return Ne._heartbeatsCache.heartbeats.push({date:un,agent:Nt}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Sn=>{const Kn=new Date(Sn.date).valueOf();return Date.now()-Kn<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,c.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const Ct=le(),{heartbeatsToSend:Nt,unsentEntries:un}=function ye(je,Ne=1024){const Ct=[];let Nt=je.slice();for(const un of je){const Sn=Ct.find(Kn=>Kn.agent===un.agent);if(Sn){if(Sn.dates.push(un.date),vt(Ct)>Ne){Sn.dates.pop();break}}else if(Ct.push({agent:un.agent,dates:[un.date]}),vt(Ct)>Ne){Ct.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:Ct,unsentEntries:Nt}}(Ne._heartbeatsCache.heartbeats),Sn=(0,Te.L)(JSON.stringify({version:2,heartbeats:Nt}));return Ne._heartbeatsCache.lastSentHeartbeatDate=Ct,un.length>0?(Ne._heartbeatsCache.heartbeats=un,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Sn})()}}function le(){return(new Date).toISOString().substring(0,10)}class St{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,c.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function At(je){return pt.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var Ct=this;return(0,c.Z)(function*(){var Nt;if(yield Ct._canUseIndexedDBPromise){const Sn=yield Ct.read();return yn(Ct.app,{lastSentHeartbeatDate:null!==(Nt=Ne.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Sn.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var Ct=this;return(0,c.Z)(function*(){var Nt;if(yield Ct._canUseIndexedDBPromise){const Sn=yield Ct.read();return yn(Ct.app,{lastSentHeartbeatDate:null!==(Nt=Ne.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Sn.lastSentHeartbeatDate,heartbeats:[...Sn.heartbeats,...Ne.heartbeats]})}})()}}function vt(je){return(0,Te.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Ut(je){Wn(new q.wA("platform-logger",Ne=>new Be(Ne),"PRIVATE")),Wn(new q.wA("heartbeat",Ne=>new kt(Ne),"PRIVATE")),$t(yt,"0.9.9",je),$t(yt,"0.9.9","esm2017"),$t("fire-js","")}("")},4859:(_n,It,L)=>{"use strict";L.d(It,{H0:()=>Se,wA:()=>G,zt:()=>Pe});var c=L(5861),q=L(2090);class G{constructor(pe,re,de){this.name=pe,this.instanceFactory=re,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Te="[DEFAULT]";class Pe{constructor(pe,re){this.name=pe,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const re=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(re)){const de=new q.BH;if(this.instancesDeferred.set(re,de),this.isInitialized(re)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:re});Oe&&de.resolve(Oe)}catch(Oe){}}return this.instancesDeferred.get(re).promise}getImmediate(pe){var re;const de=this.normalizeInstanceIdentifier(null==pe?void 0:pe.identifier),Oe=null!==(re=null==pe?void 0:pe.optional)&&void 0!==re&&re;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(Ge){if(Oe)return null;throw Ge}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function ge(Ue){return"EAGER"===Ue.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(re){}for(const[re,de]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(re);try{const Ge=this.getOrInitializeService({instanceIdentifier:Oe});de.resolve(Ge)}catch(Ge){}}}}clearInstance(pe=Te){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,c.Z)(function*(){const re=Array.from(pe.instances.values());yield Promise.all([...re.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...re.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Te){return this.instances.has(pe)}getOptions(pe=Te){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:re={}}=pe,de=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:de,options:re});for(const[Ge,ut]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(Ge)&&ut.resolve(Oe);return Oe}onInit(pe,re){var de;const Oe=this.normalizeInstanceIdentifier(re),Ge=null!==(de=this.onInitCallbacks.get(Oe))&&void 0!==de?de:new Set;Ge.add(pe),this.onInitCallbacks.set(Oe,Ge);const ut=this.instances.get(Oe);return ut&&pe(ut,Oe),()=>{Ge.delete(pe)}}invokeOnInitCallbacks(pe,re){const de=this.onInitCallbacks.get(re);if(de)for(const Oe of de)try{Oe(pe,re)}catch(Ge){}}getOrInitializeService({instanceIdentifier:pe,options:re={}}){let de=this.instances.get(pe);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=pe,Ue===Te?void 0:Ue),options:re}),this.instances.set(pe,de),this.instancesOptions.set(pe,re),this.invokeOnInitCallbacks(de,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,de)}catch(Oe){}var Ue;return de||null}normalizeInstanceIdentifier(pe=Te){return this.component?this.component.multipleInstances?pe:Te:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const re=this.getProvider(pe.name);if(re.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);re.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const re=new Pe(pe,this);return this.providers.set(pe,re),re}getProviders(){return Array.from(this.providers.values())}}},1877:(_n,It,L)=>{"use strict";L.d(It,{Am:()=>Ue,Ub:()=>Se,Yd:()=>ge,in:()=>q});const c=[];var q=(()=>{return(pe=q||(q={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",q;var pe})();const G={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Te=q.INFO,Pe={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Fe=(pe,re,...de)=>{if(re<pe.logLevel)return;const Oe=(new Date).toISOString(),Ge=Pe[re];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ge](`[${Oe}]  ${pe.name}:`,...de)};class ge{constructor(re){this.name=re,this._logLevel=Te,this._logHandler=Fe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in q))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?G[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...re),this._logHandler(this,q.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...re),this._logHandler(this,q.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,q.INFO,...re),this._logHandler(this,q.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,q.WARN,...re),this._logHandler(this,q.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...re),this._logHandler(this,q.ERROR,...re)}}function Se(pe){c.forEach(re=>{re.setLogLevel(pe)})}function Ue(pe,re){for(const de of c){let Oe=null;re&&re.level&&(Oe=G[re.level]),de.userLogHandler=null===pe?null:(Ge,ut,...Pt)=>{const be=Pt.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(he){return null}}).filter(Ie=>Ie).join(" ");ut>=(null!=Oe?Oe:Ge.logLevel)&&pe({level:q[ut].toLowerCase(),message:be,args:Pt,type:Ge.name})}}}},259:(_n,It,L)=>{"use strict";L.d(It,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=L(2951);(0,c.registerVersion)("firebase","9.21.0","app")},9260:(_n,It,L)=>{"use strict";L.d(It,{Z:()=>c.Z});var c=L(3942);c.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(_n,It,L)=>{"use strict";L.r(It);var c=L(5861),q=L(3942),G=L(2090),Te=L(2951),Pe=L(655),Fe=L(1877),ge=L(4859);const Ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de_EMAIL_SIGNIN="EMAIL_SIGNIN",de_PASSWORD_RESET="PASSWORD_RESET",de_RECOVER_EMAIL="RECOVER_EMAIL",de_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",de_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",de_VERIFY_EMAIL="VERIFY_EMAIL";const ut=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),he=new Fe.Yd("@firebase/auth");function ft(D,...v){he.logLevel<=Fe.in.ERROR&&he.error(`Auth (${Te.SDK_VERSION}): ${D}`,...v)}function qe(D,...v){throw H(D,...v)}function Je(D,...v){return H(D,...v)}function Le(D,v,_){const x=Object.assign(Object.assign({},Pt()),{[v]:_});return new G.LL("auth","Firebase",x).create(v,{appName:D.name})}function ke(D,v,_){if(!(v instanceof _))throw _.name!==v.constructor.name&&qe(D,"argument-error"),Le(D,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H(D,...v){if("string"!=typeof D){const _=v[0],x=[...v.slice(1)];return x[0]&&(x[0].appName=D.name),D._errorFactory.create(_,...x)}return be.create(D,...v)}function De(D,v,..._){if(!D)throw H(v,..._)}function it(D){const v="INTERNAL ASSERTION FAILED: "+D;throw ft(v),new Error(v)}function Be(D,v){D||it(v)}function _t(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function yt(){return"http:"===ot()||"https:"===ot()}function ot(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ae{constructor(v,_){this.shortDelay=v,this.longDelay=_,Be(_>v,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Me(D,v){Be(D.emulator,"Emulator should always be set here");const{url:_}=D.emulator;return v?`${_}${v.startsWith("/")?v.slice(1):v}`:_}class we{static initialize(v,_,x){this.fetchImpl=v,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},et=new Ae(3e4,6e4);function Qe(D,v){return D.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:D.tenantId}):v}function Ke(D,v,_,x){return jt.apply(this,arguments)}function jt(){return(jt=(0,c.Z)(function*(D,v,_,x,W={}){return Jt(D,W,(0,c.Z)(function*(){let ie={},st={};x&&("GET"===v?st=x:ie={body:JSON.stringify(x)});const Dt=(0,G.xO)(Object.assign({key:D.config.apiKey},st)).slice(1),Zt=yield D._getAdditionalHeaders();return Zt["Content-Type"]="application/json",D.languageCode&&(Zt["X-Firebase-Locale"]=D.languageCode),we.fetch()(Gn(D,D.config.apiHost,_,Dt),Object.assign({method:v,headers:Zt,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Jt(D,v,_){return tn.apply(this,arguments)}function tn(){return(tn=(0,c.Z)(function*(D,v,_){D._canInitEmulator=!1;const x=Object.assign(Object.assign({},gt),v);try{const W=new ar(D),ie=yield Promise.race([_(),W.promise]);W.clearNetworkTimeout();const st=yield ie.json();if("needConfirmation"in st)throw cn(D,"account-exists-with-different-credential",st);if(ie.ok&&!("errorMessage"in st))return st;{const Dt=ie.ok?st.errorMessage:st.error.message,[Zt,Mn]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Zt)throw cn(D,"credential-already-in-use",st);if("EMAIL_EXISTS"===Zt)throw cn(D,"email-already-in-use",st);if("USER_DISABLED"===Zt)throw cn(D,"user-disabled",st);const er=x[Zt]||Zt.toLowerCase().replace(/[_\s]+/g,"-");if(Mn)throw Le(D,er,Mn);qe(D,er)}}catch(W){if(W instanceof G.ZR)throw W;qe(D,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function Tt(D,v,_,x){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(D,v,_,x,W={}){const ie=yield Ke(D,v,_,x,W);return"mfaPendingCredential"in ie&&qe(D,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Gn(D,v,_,x){const W=`${v}${_}?${x}`;return D.config.emulator?Me(D.config,W):`${D.config.apiScheme}://${W}`}class ar{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(Je(this.auth,"network-request-failed")),et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cn(D,v,_){const x={appName:D.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const W=Je(D,v,x);return W.customData._tokenResponse=_,W}function hr(){return(hr=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function Pr(){return(Pr=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function nn(D){if(D)try{const v=new Date(Number(D));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function Nr(){return(Nr=(0,c.Z)(function*(D,v=!1){const _=(0,G.m9)(D),x=yield _.getIdToken(v),W=Fr(x);De(W&&W.exp&&W.auth_time&&W.iat,_.auth,"internal-error");const ie="object"==typeof W.firebase?W.firebase:void 0,st=null==ie?void 0:ie.sign_in_provider;return{claims:W,token:x,authTime:nn(Dr(W.auth_time)),issuedAtTime:nn(Dr(W.iat)),expirationTime:nn(Dr(W.exp)),signInProvider:st||null,signInSecondFactor:(null==ie?void 0:ie.sign_in_second_factor)||null}})).apply(this,arguments)}function Dr(D){return 1e3*Number(D)}function Fr(D){const[v,_,x]=D.split(".");if(void 0===v||void 0===_||void 0===x)return ft("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,G.tV)(_);return W?JSON.parse(W):(ft("Failed to decode base64 JWT payload"),null)}catch(W){return ft("Caught error parsing JWT payload as JSON",null==W?void 0:W.toString()),null}}function Cn(D,v){return mn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(D,v,_=!1){if(_)return v;try{return yield v}catch(x){throw x instanceof G.ZR&&function Wn({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(x)&&D.auth.currentUser===D&&(yield D.auth.signOut()),x}})).apply(this,arguments)}class Lr{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var _;if(v){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const W=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(v=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(v);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),x)}iteration(){var v=this;return(0,c.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null==_?void 0:_.code)&&v.schedule(!0))}v.schedule()})()}}class rn{constructor(v,_){this.createdAt=v,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _r(D){return Ir.apply(this,arguments)}function Ir(){return Ir=(0,c.Z)(function*(D){var v;const _=D.auth,x=yield D.getIdToken(),W=yield Cn(D,function Un(D,v){return tr.apply(this,arguments)}(_,{idToken:x}));De(null==W?void 0:W.users.length,_,"internal-error");const ie=W.users[0];D._notifyReloadListener(ie);const st=null!==(v=ie.providerUserInfo)&&void 0!==v&&v.length?function Dn(D){return D.map(v=>{var{providerId:_}=v,x=(0,Pe._T)(v,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(ie.providerUserInfo):[],Dt=function ti(D,v){return[...D.filter(x=>!v.some(W=>W.providerId===x.providerId)),...v]}(D.providerData,st),er=!!D.isAnonymous&&!(D.email&&ie.passwordHash||null!=Dt&&Dt.length),zn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Dt,metadata:new rn(ie.createdAt,ie.lastLoginAt),isAnonymous:er};Object.assign(D,zn)}),Ir.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(D){const v=(0,G.m9)(D);yield _r(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(D,v){const _=yield Jt(D,{},(0,c.Z)(function*(){const x=(0,G.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:W,apiKey:ie}=D.config,st=Gn(D,W,"/v1/token",`key=${ie}`),Dt=yield D._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",we.fetch()(st,{method:"POST",headers:Dt,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){De(v.idToken,"internal-error"),De(typeof v.idToken<"u","internal-error"),De(typeof v.refreshToken<"u","internal-error");const _="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Fn(D){const v=Fr(D);return De(v,"internal-error"),De(typeof v.exp<"u","internal-error"),De(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,_)}getToken(v,_=!1){var x=this;return(0,c.Z)(function*(){return De(!x.accessToken||x.refreshToken,v,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(v,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,_){var x=this;return(0,c.Z)(function*(){const{accessToken:W,refreshToken:ie,expiresIn:st}=yield function ai(D,v){return pi.apply(this,arguments)}(v,_);x.updateTokensAndExpiration(W,ie,Number(st))})()}updateTokensAndExpiration(v,_,x){this.refreshToken=_||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(v,_){const{refreshToken:x,accessToken:W,expirationTime:ie}=_,st=new gr;return x&&(De("string"==typeof x,"internal-error",{appName:v}),st.refreshToken=x),W&&(De("string"==typeof W,"internal-error",{appName:v}),st.accessToken=W),ie&&(De("number"==typeof ie,"internal-error",{appName:v}),st.expirationTime=ie),st}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new gr,this.toJSON())}_performRefresh(){return it("not implemented")}}function zr(D,v){De("string"==typeof D||typeof D>"u","internal-error",{appName:v})}class $t{constructor(v){var{uid:_,auth:x,stsTokenManager:W}=v,ie=(0,Pe._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new rn(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(v){var _=this;return(0,c.Z)(function*(){const x=yield Cn(_,_.stsTokenManager.getToken(_.auth,v));return De(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(v){return function ei(D){return Nr.apply(this,arguments)}(this,v)}reload(){return function oi(D){return xr.apply(this,arguments)}(this)}_assign(v){this!==v&&(De(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(_=>Object.assign({},_)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const _=new $t(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(v){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,_=!1){var x=this;return(0,c.Z)(function*(){let W=!1;v.idToken&&v.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(v),W=!0),_&&(yield _r(x)),yield x.auth._persistUserIfCurrent(x),W&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var v=this;return(0,c.Z)(function*(){const _=yield v.getIdToken();return yield Cn(v,function lr(D,v){return hr.apply(this,arguments)}(v.auth,{idToken:_})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,_){var x,W,ie,st,Dt,Zt,Mn,er;const zn=null!==(x=_.displayName)&&void 0!==x?x:void 0,Gi=null!==(W=_.email)&&void 0!==W?W:void 0,Ao=null!==(ie=_.phoneNumber)&&void 0!==ie?ie:void 0,yd=null!==(st=_.photoURL)&&void 0!==st?st:void 0,vd=null!==(Dt=_.tenantId)&&void 0!==Dt?Dt:void 0,nh=null!==(Zt=_._redirectEventId)&&void 0!==Zt?Zt:void 0,Es=null!==(Mn=_.createdAt)&&void 0!==Mn?Mn:void 0,Pc=null!==(er=_.lastLoginAt)&&void 0!==er?er:void 0,{uid:ou,emailVerified:Ea,isAnonymous:Vl,providerData:rh,stsTokenManager:jh}=_;De(ou&&jh,v,"internal-error");const Ff=gr.fromJSON(this.name,jh);De("string"==typeof ou,v,"internal-error"),zr(zn,v.name),zr(Gi,v.name),De("boolean"==typeof Ea,v,"internal-error"),De("boolean"==typeof Vl,v,"internal-error"),zr(Ao,v.name),zr(yd,v.name),zr(vd,v.name),zr(nh,v.name),zr(Es,v.name),zr(Pc,v.name);const Fu=new $t({uid:ou,auth:v,email:Gi,emailVerified:Ea,displayName:zn,isAnonymous:Vl,photoURL:yd,phoneNumber:Ao,tenantId:vd,stsTokenManager:Ff,createdAt:Es,lastLoginAt:Pc});return rh&&Array.isArray(rh)&&(Fu.providerData=rh.map(ih=>Object.assign({},ih))),nh&&(Fu._redirectEventId=nh),Fu}static _fromIdTokenResponse(v,_,x=!1){return(0,c.Z)(function*(){const W=new gr;W.updateFromServerResponse(_);const ie=new $t({uid:_.localId,auth:v,stsTokenManager:W,isAnonymous:x});return yield _r(ie),ie})()}}const We=new Map;function rt(D){Be(D instanceof Function,"Expected a class definition");let v=We.get(D);return v?(Be(v instanceof D,"Instance stored in cache mismatched with class"),v):(v=new D,We.set(D,v),v)}const Lt=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,x){var W=this;return(0,c.Z)(function*(){W.storage[_]=x})()}_get(_){var x=this;return(0,c.Z)(function*(){const W=x.storage[_];return void 0===W?null:W})()}_remove(_){var x=this;return(0,c.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return D.type="NONE",D})();function _e(D,v,_){return`firebase:${D}:${v}:${_}`}class me{constructor(v,_,x){this.persistence=v,this.auth=_,this.userKey=x;const{config:W,name:ie}=this.auth;this.fullUserKey=_e(this.userKey,W.apiKey,ie),this.fullPersistenceKey=_e("persistence",W.apiKey,ie),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,c.Z)(function*(){const _=yield v.persistence._get(v.fullUserKey);return _?$t._fromJSON(v.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var _=this;return(0,c.Z)(function*(){if(_.persistence===v)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=v,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,_,x="authUser"){return(0,c.Z)(function*(){if(!_.length)return new me(rt(Lt),v,x);const W=(yield Promise.all(_.map(function(){var Mn=(0,c.Z)(function*(er){if(yield er._isAvailable())return er});return function(er){return Mn.apply(this,arguments)}}()))).filter(Mn=>Mn);let ie=W[0]||rt(Lt);const st=_e(x,v.config.apiKey,v.name);let Dt=null;for(const Mn of _)try{const er=yield Mn._get(st);if(er){const zn=$t._fromJSON(v,er);Mn!==ie&&(Dt=zn),ie=Mn;break}}catch(er){}const Zt=W.filter(Mn=>Mn._shouldAllowMigration);return ie._shouldAllowMigration&&Zt.length?(ie=Zt[0],Dt&&(yield ie._set(st,Dt.toJSON())),yield Promise.all(_.map(function(){var Mn=(0,c.Z)(function*(er){if(er!==ie)try{yield er._remove(st)}catch(zn){}});return function(er){return Mn.apply(this,arguments)}}())),new me(ie,v,x)):new me(ie,v,x)})()}}function He(D){const v=D.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if($e(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(At(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(fe(v))return"Blackberry";if(Ye(v))return"Webos";if(pt(v))return"Safari";if((v.includes("chrome/")||yn(v))&&!v.includes("edge/"))return"Chrome";if(Ve(v))return"Android";{const x=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function At(D=(0,G.z$)()){return/firefox\//i.test(D)}function pt(D=(0,G.z$)()){const v=D.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function yn(D=(0,G.z$)()){return/crios\//i.test(D)}function $e(D=(0,G.z$)()){return/iemobile/i.test(D)}function Ve(D=(0,G.z$)()){return/android/i.test(D)}function fe(D=(0,G.z$)()){return/blackberry/i.test(D)}function Ye(D=(0,G.z$)()){return/webos/i.test(D)}function kt(D=(0,G.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function vt(D=(0,G.z$)()){return kt(D)||Ve(D)||Ye(D)||fe(D)||/windows phone/i.test(D)||$e(D)}function je(D,v=[]){let _;switch(D){case"Browser":_=He((0,G.z$)());break;case"Worker":_=`${He((0,G.z$)())}-${D}`;break;default:_=D}const x=v.length?v.join(","):"FirebaseCore-web";return`${_}/JsCore/${Te.SDK_VERSION}/${x}`}function Ct(){return(Ct=(0,c.Z)(function*(D){return(yield Ke(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nt(D,v){return un.apply(this,arguments)}function un(){return(un=(0,c.Z)(function*(D,v){return Ke(D,"GET","/v2/recaptchaConfig",Qe(D,v))})).apply(this,arguments)}function Sn(D){return void 0!==D&&void 0!==D.getResponse}function Kn(D){return void 0!==D&&void 0!==D.enterprise}class Pn{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Qn(D){return new Promise((v,_)=>{const x=document.createElement("script");x.setAttribute("src",D),x.onload=v,x.onerror=W=>{const ie=Je("internal-error");ie.customData=W,_(ie)},x.type="text/javascript",x.charset="UTF-8",function cr(){var D,v;return null!==(v=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==v?v:document}().appendChild(x)})}function ni(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Pi="NO_RECAPTCHA";class Ji{constructor(v){this.type="recaptcha-enterprise",this.auth=Tr(v)}verify(v="verify",_=!1){var x=this;return(0,c.Z)(function*(){function ie(){return ie=(0,c.Z)(function*(Dt){if(!_){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var Zt=(0,c.Z)(function*(Mn,er){Nt(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zn=>{if(void 0!==zn.recaptchaKey){const Gi=new Pn(zn);return null==Dt.tenantId?Dt._agentRecaptchaConfig=Gi:Dt._tenantRecaptchaConfigs[Dt.tenantId]=Gi,Mn(Gi.siteKey)}er(new Error("recaptcha Enterprise site key undefined"))}).catch(zn=>{er(zn)})});return function(Mn,er){return Zt.apply(this,arguments)}}())}),ie.apply(this,arguments)}function st(Dt,Zt,Mn){const er=window.grecaptcha;Kn(er)?er.enterprise.ready(()=>{er.enterprise.execute(Dt,{action:v}).then(zn=>{Zt(zn)}).catch(()=>{Zt(Pi)})}):Mn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,Zt)=>{(function W(Dt){return ie.apply(this,arguments)})(x.auth).then(Mn=>{if(!_&&Kn(window.grecaptcha))st(Mn,Dt,Zt);else{if(typeof window>"u")return void Zt(new Error("RecaptchaVerifier is only supported in browser"));Qn("https://www.google.com/recaptcha/enterprise.js?render="+Mn).then(()=>{st(Mn,Dt,Zt)}).catch(er=>{Zt(er)})}}).catch(Mn=>{Zt(Mn)})})})()}}function Zr(D,v,_){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(D,v,_,x=!1){const W=new Ji(D);let ie;try{ie=yield W.verify(_)}catch(Dt){ie=yield W.verify(_,!0)}const st=Object.assign({},v);return Object.assign(st,x?{captchaResp:ie}:{captchaResponse:ie}),Object.assign(st,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(st,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),st})).apply(this,arguments)}class ir{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,_){const x=ie=>new Promise((st,Dt)=>{try{st(v(ie))}catch(Zt){Dt(Zt)}});x.onAbort=_,this.queue.push(x);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(v){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===v)return;const x=[];try{for(const W of _.queue)yield W(v),W.onAbort&&x.push(W.onAbort)}catch(W){x.reverse();for(const ie of x)try{ie()}catch(st){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null==W?void 0:W.message})}})()}}class Xr{constructor(v,_,x,W){this.app=v,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=x,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.beforeStateQueue=new ir(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(v,_){var x=this;return _&&(this._popupRedirectResolver=rt(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var W,ie;if(!x._deleted&&(x.persistenceManager=yield me.create(x,v),!x._deleted)){if(null!==(W=x._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(st){}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(ie=x.currentUser)||void 0===ie?void 0:ie.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,c.Z)(function*(){if(v._deleted)return;const _=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||_){if(v.currentUser&&_&&v.currentUser.uid===_.uid)return v._currentUser._assign(_),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(_,!0)}})()}initializeCurrentUser(v){var _=this;return(0,c.Z)(function*(){var x;const W=yield _.assertedPersistence.getCurrentUser();let ie=W,st=!1;if(v&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Dt=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,Zt=null==ie?void 0:ie._redirectEventId,Mn=yield _.tryRedirectSignIn(v);(!Dt||Dt===Zt)&&null!=Mn&&Mn.user&&(ie=Mn.user,st=!0)}if(!ie)return _.directlySetCurrentUser(null);if(!ie._redirectEventId){if(st)try{yield _.beforeStateQueue.runMiddleware(ie)}catch(Dt){ie=W,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Dt))}return ie?_.reloadAndSetCurrentUserOrClear(ie):_.directlySetCurrentUser(null)}return De(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ie._redirectEventId?_.directlySetCurrentUser(ie):_.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(v){var _=this;return(0,c.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,v,!0)}catch(W){yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(v){var _=this;return(0,c.Z)(function*(){try{yield _r(v)}catch(x){if("auth/network-request-failed"!==(null==x?void 0:x.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var v=this;return(0,c.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var _=this;return(0,c.Z)(function*(){const x=v?(0,G.m9)(v):null;return x&&De(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(v,_=!1){var x=this;return(0,c.Z)(function*(){if(!x._deleted)return v&&De(x.tenantId===v.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(v)),x.queue((0,c.Z)(function*(){yield x.directlySetCurrentUser(v),x.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,c.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(rt(v))}))}initializeRecaptchaConfig(){var v=this;return(0,c.Z)(function*(){const _=yield Nt(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new Pn(_);null==v.tenantId?v._agentRecaptchaConfig=x:v._tenantRecaptchaConfigs[v.tenantId]=x,x.emailPasswordEnabled&&new Ji(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new G.LL("auth","Firebase",v())}onAuthStateChanged(v,_,x){return this.registerStateListener(this.authStateSubscription,v,_,x)}beforeAuthStateChanged(v,_){return this.beforeStateQueue.pushCallback(v,_)}onIdTokenChanged(v,_,x){return this.registerStateListener(this.idTokenSubscription,v,_,x)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,_){var x=this;return(0,c.Z)(function*(){const W=yield x.getOrInitRedirectPersistenceManager(_);return null===v?W.removeCurrentUser():W.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const x=v&&rt(v)||_._popupRedirectResolver;De(x,_,"argument-error"),_.redirectPersistenceManager=yield me.create(_,[rt(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(v){var _=this;return(0,c.Z)(function*(){var x,W;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===v?_._currentUser:(null===(W=_.redirectUser)||void 0===W?void 0:W._redirectEventId)===v?_.redirectUser:null})()}_persistUserIfCurrent(v){var _=this;return(0,c.Z)(function*(){if(v===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,_,x,W){if(this._deleted)return()=>{};const ie="function"==typeof _?_:_.next.bind(_),st=this._isInitialized?Promise.resolve():this._initializationPromise;return De(st,this,"internal-error"),st.then(()=>ie(this.currentUser)),"function"==typeof _?v.addObserver(_,x,W):v.addObserver(_)}directlySetCurrentUser(v){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==v&&_._currentUser._stopProactiveRefresh(),v&&_.isProactiveRefreshEnabled&&v._startProactiveRefresh(),_.currentUser=v,v?yield _.assertedPersistence.setCurrentUser(v):yield _.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=je(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,c.Z)(function*(){var _;const x={"X-Client-Version":v.clientVersion};v.app.options.appId&&(x["X-Firebase-gmpid"]=v.app.options.appId);const W=yield null===(_=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();W&&(x["X-Firebase-Client"]=W);const ie=yield v._getAppCheckToken();return ie&&(x["X-Firebase-AppCheck"]=ie),x})()}_getAppCheckToken(){var v=this;return(0,c.Z)(function*(){var _;const x=yield null===(_=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return null!=x&&x.error&&function dt(D,...v){he.logLevel<=Fe.in.WARN&&he.warn(`Auth (${Te.SDK_VERSION}): ${D}`,...v)}(`Error while retrieving App Check token: ${x.error}`),null==x?void 0:x.token})()}}function Tr(D){return(0,G.m9)(D)}class Wi{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bt(D){const v=D.indexOf(":");return v<0?"":D.substr(0,v+1)}function ce(D){if(!D)return null;const v=Number(D);return isNaN(v)?null:v}class Et{constructor(v,_){this.providerId=v,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(v){return it("not implemented")}_linkToIdToken(v,_){return it("not implemented")}_getReauthenticationResolver(v){return it("not implemented")}}function qt(D,v){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:resetPassword",Qe(D,v))})).apply(this,arguments)}function pn(D,v){return kn.apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:update",Qe(D,v))})).apply(this,arguments)}function mr(D,v){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithPassword",Qe(D,v))})).apply(this,arguments)}function fr(D,v){return fs.apply(this,arguments)}function fs(){return(fs=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:sendOobCode",Qe(D,v))})).apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(D,v){return fr(D,v)})).apply(this,arguments)}function xt(D,v){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,c.Z)(function*(D,v){return fr(D,v)})).apply(this,arguments)}function gn(D,v){return $n.apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(D,v){return fr(D,v)})).apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(D,v){return fr(D,v)})).apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithEmailLink",Qe(D,v))})).apply(this,arguments)}function Ni(){return(Ni=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithEmailLink",Qe(D,v))})).apply(this,arguments)}class Ki extends Et{constructor(v,_,x,W=null){super("password",x),this._email=v,this._password=_,this._tenantId=W}static _fromEmailAndPassword(v,_){return new Ki(v,_,"password")}static _fromEmailAndCode(v,_,x=null){return new Ki(v,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v;if(null!=_&&_.email&&null!=_&&_.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(v){var _=this;return(0,c.Z)(function*(){var x;switch(_.signInMethod){case"password":const W={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=v._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const ie=yield Zr(v,W,"signInWithPassword");return mr(v,ie)}return mr(v,W).catch(function(){var ie=(0,c.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Dt=yield Zr(v,W,"signInWithPassword");return mr(v,Dt)}return Promise.reject(st)});return function(st){return ie.apply(this,arguments)}}());case"emailLink":return function Rr(D,v){return as.apply(this,arguments)}(v,{email:_._email,oobCode:_._password});default:qe(v,"internal-error")}})()}_linkToIdToken(v,_){var x=this;return(0,c.Z)(function*(){switch(x.signInMethod){case"password":return pn(v,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function so(D,v){return Ni.apply(this,arguments)}(v,{idToken:_,email:x._email,oobCode:x._password});default:qe(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function cs(D,v){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithIdp",Qe(D,v))})).apply(this,arguments)}class es extends Et{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const _=new es(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(_.idToken=v.idToken),v.accessToken&&(_.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(_.nonce=v.nonce),v.pendingToken&&(_.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(_.accessToken=v.oauthToken,_.secret=v.oauthTokenSecret):qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:W}=_,ie=(0,Pe._T)(_,["providerId","signInMethod"]);if(!x||!W)return null;const st=new es(x,W);return st.idToken=ie.idToken||void 0,st.accessToken=ie.accessToken||void 0,st.secret=ie.secret,st.nonce=ie.nonce,st.pendingToken=ie.pendingToken||null,st}_getIdTokenResponse(v){return cs(v,this.buildRequest())}_linkToIdToken(v,_){const x=this.buildRequest();return x.idToken=_,cs(v,x)}_getReauthenticationResolver(v){const _=this.buildRequest();return _.autoCreate=!1,cs(v,_)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),v.postBody=(0,G.xO)(_)}return v}}function oo(){return(oo=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:sendVerificationCode",Qe(D,v))})).apply(this,arguments)}function ws(){return(ws=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithPhoneNumber",Qe(D,v))})).apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(D,v){const _=yield Tt(D,"POST","/v1/accounts:signInWithPhoneNumber",Qe(D,v));if(_.temporaryProof)throw cn(D,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Eo={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithPhoneNumber",Qe(D,Object.assign(Object.assign({},v),{operation:"REAUTH"})),Eo)})).apply(this,arguments)}class us extends Et{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,_){return new us({verificationId:v,verificationCode:_})}static _fromTokenResponse(v,_){return new us({phoneNumber:v,temporaryProof:_})}_getIdTokenResponse(v){return function la(D,v){return ws.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,_){return function Mo(D,v){return ao.apply(this,arguments)}(v,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Pl(D,v){return lo.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:_,verificationId:x,verificationCode:W}=this.params;return v&&_?{temporaryProof:v,phoneNumber:_}:{sessionInfo:x,code:W}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:_,verificationCode:x,phoneNumber:W,temporaryProof:ie}=v;return x||_||W||ie?new us({verificationId:_,verificationCode:x,phoneNumber:W,temporaryProof:ie}):null}}class ts{constructor(v){var _,x,W,ie,st,Dt;const Zt=(0,G.zd)((0,G.pd)(v)),Mn=null!==(_=Zt.apiKey)&&void 0!==_?_:null,er=null!==(x=Zt.oobCode)&&void 0!==x?x:null,zn=function ca(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Zt.mode)&&void 0!==W?W:null);De(Mn&&er&&zn,"argument-error"),this.apiKey=Mn,this.operation=zn,this.code=er,this.continueUrl=null!==(ie=Zt.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(st=Zt.languageCode)&&void 0!==st?st:null,this.tenantId=null!==(Dt=Zt.tenantId)&&void 0!==Dt?Dt:null}static parseLink(v){const _=function qs(D){const v=(0,G.zd)((0,G.pd)(D)).link,_=v?(0,G.zd)((0,G.pd)(v)).deep_link_id:null,x=(0,G.zd)((0,G.pd)(D)).deep_link_id;return(x?(0,G.zd)((0,G.pd)(x)).link:null)||x||_||v||D}(v);try{return new ts(_)}catch(x){return null}}}let ua=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(_,x){return Ki._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const W=ts.parseLink(x);return De(W,"argument-error"),Ki._fromEmailAndCode(_,W.code,W.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class ds{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class ri extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ps extends ri{static credentialFromJSON(v){const _="string"==typeof v?JSON.parse(v):v;return De("providerId"in _&&"signInMethod"in _,"argument-error"),es._fromParams(_)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return De(v.idToken||v.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ps.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ps.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:W,pendingToken:ie,nonce:st,providerId:Dt}=v;if(!x&&!W&&!_&&!ie||!Dt)return null;try{return new ps(Dt)._credential({idToken:_,accessToken:x,nonce:st,pendingToken:ie})}catch(Zt){return null}}}let Io=(()=>{class D extends ri{constructor(){super("facebook.com")}static credential(_){return es._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(x){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Fs=(()=>{class D extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return es._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:W}=_;if(!x&&!W)return null;try{return D.credential(x,W)}catch(ie){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),co=(()=>{class D extends ri{constructor(){super("github.com")}static credential(_){return es._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(x){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class ns extends Et{constructor(v,_){super(v,v),this.pendingToken=_}_getIdTokenResponse(v){return cs(v,this.buildRequest())}_linkToIdToken(v,_){const x=this.buildRequest();return x.idToken=_,cs(v,x)}_getReauthenticationResolver(v){const _=this.buildRequest();return _.autoCreate=!1,cs(v,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:W,pendingToken:ie}=_;return x&&W&&ie&&x===W?new ns(x,ie):null}static _create(v,_){return new ns(v,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wo extends ds{constructor(v){De(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return wo.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return wo.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const _=ns.fromJSON(v);return De(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:_,providerId:x}=v;if(!_||!x)return null;try{return ns._create(x,_)}catch(W){return null}}}let Ja=(()=>{class D extends ri{constructor(){super("twitter.com")}static credential(_,x){return es._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:W}=_;if(!x||!W)return null;try{return D.credential(x,W)}catch(ie){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Ss(D,v){return As.apply(this,arguments)}function As(){return(As=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signUp",Qe(D,v))})).apply(this,arguments)}class Di{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,_,x,W=!1){return(0,c.Z)(function*(){const ie=yield $t._fromIdTokenResponse(v,x,W),st=Ls(x);return new Di({user:ie,providerId:st,_tokenResponse:x,operationType:_})})()}static _forOperation(v,_,x){return(0,c.Z)(function*(){yield v._updateTokensIfNecessary(x,!0);const W=Ls(x);return new Di({user:v,providerId:W,_tokenResponse:x,operationType:_})})()}}function Ls(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Ti(){return(Ti=(0,c.Z)(function*(D){var v;const _=Tr(D);if(yield _._initializationPromise,null!==(v=_.currentUser)&&void 0!==v&&v.isAnonymous)return new Di({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield Ss(_,{returnSecureToken:!0}),W=yield Di._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(W.user),W})).apply(this,arguments)}class Ko extends G.ZR{constructor(v,_,x,W){var ie;super(_.code,_.message),this.operationType=x,this.user=W,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:v.name,tenantId:null!==(ie=v.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(v,_,x,W){return new Ko(v,_,x,W)}}function Zs(D,v,_,x){return("reauthenticate"===v?_._getReauthenticationResolver(D):_._getIdTokenResponse(D)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?Ko._fromErrorAndOperation(D,ie,v,x):ie})}function Ui(D){return new Set(D.map(({providerId:v})=>v).filter(v=>!!v))}function uo(){return uo=(0,c.Z)(function*(D,v){const _=(0,G.m9)(D);yield qo(!0,_,v);const{providerUserInfo:x}=yield function Cr(D,v){return Pr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[v]}),W=Ui(x||[]);return _.providerData=_.providerData.filter(ie=>W.has(ie.providerId)),W.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),uo.apply(this,arguments)}function $s(D,v){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(D,v,_=!1){const x=yield Cn(D,v._linkToIdToken(D.auth,yield D.getIdToken()),_);return Di._forOperation(D,"link",x)})).apply(this,arguments)}function qo(D,v,_){return rs.apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(D,v,_){yield _r(v);const W=!1===D?"provider-already-linked":"no-such-provider";De(Ui(v.providerData).has(_)===D,v.auth,W)})).apply(this,arguments)}function Va(D,v){return gs.apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(D,v,_=!1){const{auth:x}=D,W="reauthenticate";try{const ie=yield Cn(D,Zs(x,W,v,D),_);De(ie.idToken,x,"internal-error");const st=Fr(ie.idToken);De(st,x,"internal-error");const{sub:Dt}=st;return De(D.uid===Dt,x,"user-mismatch"),Di._forOperation(D,W,ie)}catch(ie){throw"auth/user-not-found"===(null==ie?void 0:ie.code)&&qe(x,"user-mismatch"),ie}})).apply(this,arguments)}function Yo(D,v){return Co.apply(this,arguments)}function Co(){return(Co=(0,c.Z)(function*(D,v,_=!1){const x="signIn",W=yield Zs(D,x,v),ie=yield Di._fromIdTokenResponse(D,x,W);return _||(yield D._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Er(D,v){return ho.apply(this,arguments)}function ho(){return(ho=(0,c.Z)(function*(D,v){return Yo(Tr(D),v)})).apply(this,arguments)}function Xs(D,v){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(D,v){const _=(0,G.m9)(D);return yield qo(!1,_,v.providerId),$s(_,v)})).apply(this,arguments)}function Zo(D,v){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(D,v){return Va((0,G.m9)(D),v)})).apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(D,v){return Tt(D,"POST","/v1/accounts:signInWithCustomToken",Qe(D,v))})).apply(this,arguments)}function I(){return I=(0,c.Z)(function*(D,v){const _=Tr(D),x=yield function xi(D,v){return Us.apply(this,arguments)}(_,{token:v,returnSecureToken:!0}),W=yield Di._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(W.user),W}),I.apply(this,arguments)}class f{constructor(v,_){this.factorId=v,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(v,_){return"phoneInfo"in _?T._fromServerResponse(v,_):"totpInfo"in _?K._fromServerResponse(v,_):qe(v,"internal-error")}}class T extends f{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,_){return new T(_)}}class K extends f{constructor(v){super("totp",v)}static _fromServerResponse(v,_){return new K(_)}}function ze(D,v,_){var x;De((null===(x=_.url)||void 0===x?void 0:x.length)>0,D,"invalid-continue-uri"),De(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),v.continueUrl=_.url,v.dynamicLinkDomain=_.dynamicLinkDomain,v.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(De(_.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),v.iOSBundleId=_.iOS.bundleId),_.android&&(De(_.android.packageName.length>0,D,"missing-android-pkg-name"),v.androidInstallApp=_.android.installApp,v.androidMinimumVersionCode=_.android.minimumVersion,v.androidPackageName=_.android.packageName)}function En(){return En=(0,c.Z)(function*(D,v,_){var x;const W=Tr(D),ie={requestType:"PASSWORD_RESET",email:v,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=W._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const st=yield Zr(W,ie,"getOobCode",!0);_&&ze(W,st,_),yield xt(W,st)}else _&&ze(W,ie,_),yield xt(W,ie).catch(function(){var st=(0,c.Z)(function*(Dt){if("auth/missing-recaptcha-token"!==Dt.code)return Promise.reject(Dt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Zt=yield Zr(W,ie,"getOobCode",!0);_&&ze(W,Zt,_),yield xt(W,Zt)}});return function(Dt){return st.apply(this,arguments)}}())}),En.apply(this,arguments)}function Sr(){return(Sr=(0,c.Z)(function*(D,v,_){yield qt((0,G.m9)(D),{oobCode:v,newPassword:_})})).apply(this,arguments)}function $r(){return $r=(0,c.Z)(function*(D,v){yield function qn(D,v){return Vr.apply(this,arguments)}((0,G.m9)(D),{oobCode:v})}),$r.apply(this,arguments)}function ms(D,v){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,c.Z)(function*(D,v){const _=(0,G.m9)(D),x=yield qt(_,{oobCode:v}),W=x.requestType;switch(De(W,_,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(x.mfaInfo,_,"internal-error");default:De(x.email,_,"internal-error")}let ie=null;return x.mfaInfo&&(ie=f._fromServerResponse(Tr(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:ie},operation:W}})).apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(D,v){const{data:_}=yield ms((0,G.m9)(D),v);return _.email})).apply(this,arguments)}function Qo(){return Qo=(0,c.Z)(function*(D,v,_){var x;const W=Tr(D),ie={returnSecureToken:!0,email:v,password:_,clientType:"CLIENT_TYPE_WEB"};let st;if(null!==(x=W._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Mn=yield Zr(W,ie,"signUpPassword");st=Ss(W,Mn)}else st=Ss(W,ie).catch(function(){var Mn=(0,c.Z)(function*(er){if("auth/missing-recaptcha-token"===er.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const zn=yield Zr(W,ie,"signUpPassword");return Ss(W,zn)}return Promise.reject(er)});return function(er){return Mn.apply(this,arguments)}}());const Dt=yield st.catch(Mn=>Promise.reject(Mn)),Zt=yield Di._fromIdTokenResponse(W,"signIn",Dt);return yield W._updateCurrentUser(Zt.user),Zt}),Qo.apply(this,arguments)}function Ca(){return Ca=(0,c.Z)(function*(D,v,_){var x;const W=Tr(D),ie={requestType:"EMAIL_SIGNIN",email:v,clientType:"CLIENT_TYPE_WEB"};function st(Dt,Zt){De(Zt.handleCodeInApp,W,"argument-error"),Zt&&ze(W,Dt,Zt)}if(null!==(x=W._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Dt=yield Zr(W,ie,"getOobCode",!0);st(Dt,_),yield gn(W,Dt)}else st(ie,_),yield gn(W,ie).catch(function(){var Dt=(0,c.Z)(function*(Zt){if("auth/missing-recaptcha-token"!==Zt.code)return Promise.reject(Zt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Mn=yield Zr(W,ie,"getOobCode",!0);st(Mn,_),yield gn(W,Mn)}});return function(Zt){return Dt.apply(this,arguments)}}())}),Ca.apply(this,arguments)}function Po(){return(Po=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D),W=ua.credentialWithLink(v,_||_t());return De(W._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Er(x,W)})).apply(this,arguments)}function ba(){return(ba=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:createAuthUri",Qe(D,v))})).apply(this,arguments)}function tl(){return tl=(0,c.Z)(function*(D,v){const x={identifier:v,continueUri:yt()?_t():"http://localhost"},{signinMethods:W}=yield function yl(D,v){return ba.apply(this,arguments)}((0,G.m9)(D),x);return W||[]}),tl.apply(this,arguments)}function Da(){return Da=(0,c.Z)(function*(D,v){const _=(0,G.m9)(D),W={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};v&&ze(_.auth,W,v);const{email:ie}=yield function mt(D,v){return lt.apply(this,arguments)}(_.auth,W);ie!==D.email&&(yield D.reload())}),Da.apply(this,arguments)}function ko(){return ko=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:v};_&&ze(x.auth,ie,_);const{email:st}=yield function jr(D,v){return dr.apply(this,arguments)}(x.auth,ie);st!==D.email&&(yield D.reload())}),ko.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(D,v){return Ke(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function qi(){return qi=(0,c.Z)(function*(D,{displayName:v,photoURL:_}){if(void 0===v&&void 0===_)return;const x=(0,G.m9)(D),ie={idToken:yield x.getIdToken(),displayName:v,photoUrl:_,returnSecureToken:!0},st=yield Cn(x,function Qs(D,v){return Jo.apply(this,arguments)}(x.auth,ie));x.displayName=st.displayName||null,x.photoURL=st.photoUrl||null;const Dt=x.providerData.find(({providerId:Zt})=>"password"===Zt);Dt&&(Dt.displayName=x.displayName,Dt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(st)}),qi.apply(this,arguments)}function Ri(D,v,_){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,c.Z)(function*(D,v,_){const{auth:x}=D,ie={idToken:yield D.getIdToken(),returnSecureToken:!0};v&&(ie.email=v),_&&(ie.password=_);const st=yield Cn(D,pn(x,ie));yield D._updateTokensIfNecessary(st,!0)})).apply(this,arguments)}class fo{constructor(v,_,x={}){this.isNewUser=v,this.providerId=_,this.profile=x}}class Yl extends fo{constructor(v,_,x,W){super(v,_,x),this.username=W}}class ys extends fo{constructor(v,_){super(v,"facebook.com",_)}}class Fo extends Yl{constructor(v,_){super(v,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class hi extends fo{constructor(v,_){super(v,"google.com",_)}}class Zl extends Yl{constructor(v,_,x){super(v,"twitter.com",_,x)}}function pa(D){const{user:v,_tokenResponse:_}=D;return v.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Uc(D){var v,_;if(!D)return null;const{providerId:x}=D,W=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},ie=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!x&&null!=D&&D.idToken){const st=null===(_=null===(v=Fr(D.idToken))||void 0===v?void 0:v.firebase)||void 0===_?void 0:_.sign_in_provider;if(st)return new fo(ie,"anonymous"!==st&&"custom"!==st?st:null)}if(!x)return null;switch(x){case"facebook.com":return new ys(ie,W);case"github.com":return new Fo(ie,W);case"google.com":return new hi(ie,W);case"twitter.com":return new Zl(ie,W,D.screenName||null);case"custom":case"anonymous":return new fo(ie,null);default:return new fo(ie,x,W)}}(_)}class Mr{constructor(v,_,x){this.type=v,this.credential=_,this.auth=x}static _fromIdtoken(v,_){return new Mr("enroll",v,_)}static _fromMfaPendingCredential(v){return new Mr("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var _,x;if(null!=v&&v.multiFactorSession){if(null!==(_=v.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Mr._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(x=v.multiFactorSession)&&void 0!==x&&x.idToken)return Mr._fromIdtoken(v.multiFactorSession.idToken)}return null}}class wr{constructor(v,_,x){this.session=v,this.hints=_,this.signInResolver=x}static _fromError(v,_){const x=Tr(v),W=_.customData._serverResponse,ie=(W.mfaInfo||[]).map(Dt=>f._fromServerResponse(x,Dt));De(W.mfaPendingCredential,x,"internal-error");const st=Mr._fromMfaPendingCredential(W.mfaPendingCredential);return new wr(st,ie,function(){var Dt=(0,c.Z)(function*(Zt){const Mn=yield Zt._process(x,st);delete W.mfaInfo,delete W.mfaPendingCredential;const er=Object.assign(Object.assign({},W),{idToken:Mn.idToken,refreshToken:Mn.refreshToken});switch(_.operationType){case"signIn":const zn=yield Di._fromIdTokenResponse(x,_.operationType,er);return yield x._updateCurrentUser(zn.user),zn;case"reauthenticate":return De(_.user,x,"internal-error"),Di._forOperation(_.user,_.operationType,er);default:qe(x,"internal-error")}});return function(Zt){return Dt.apply(this,arguments)}}())}resolveSignIn(v){var _=this;return(0,c.Z)(function*(){return _.signInResolver(v)})()}}class Oi{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>f._fromServerResponse(v.auth,x)))})}static _fromUser(v){return new Oi(v)}getSession(){var v=this;return(0,c.Z)(function*(){return Mr._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,_){var x=this;return(0,c.Z)(function*(){const W=v,ie=yield x.getSession(),st=yield Cn(x.user,W._process(x.user.auth,ie,_));return yield x.user._updateTokensIfNecessary(st),x.user.reload()})()}unenroll(v){var _=this;return(0,c.Z)(function*(){const x="string"==typeof v?v:v.uid,W=yield _.user.getIdToken();try{const ie=yield Cn(_.user,function bs(D,v){return Ke(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(D,v))}(_.user.auth,{idToken:W,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:st})=>st!==x),yield _.user._updateTokensIfNecessary(ie),yield _.user.reload()}catch(ie){throw ie}})()}}const po=new WeakMap,nl="__sak";class Sa{constructor(v,_){this.storageRetriever=v,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(nl,"1"),this.storage.removeItem(nl),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,_){return this.storage.setItem(v,JSON.stringify(_)),Promise.resolve()}_get(v){const _=this.storage.getItem(v);return Promise.resolve(_?JSON.parse(_):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xi=(()=>{class D extends Sa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vl(){const D=(0,G.z$)();return pt(D)||kt(D)}()&&function Ut(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=vt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const W=this.storage.getItem(x),ie=this.localCache[x];W!==ie&&_(x,ie,W)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((Dt,Zt,Mn)=>{this.notifyListeners(Dt,Mn)});const W=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Dt=this.storage.getItem(W);if(_.newValue!==Dt)null!==_.newValue?this.storage.setItem(W,_.newValue):this.storage.removeItem(W);else if(this.localCache[W]===_.newValue&&!x)return}const ie=()=>{const Dt=this.storage.getItem(W);!x&&this.localCache[W]===Dt||this.notifyListeners(W,Dt)},st=this.storage.getItem(W);!function St(){return(0,G.w1)()&&10===document.documentMode}()||st===_.newValue||_.newValue===_.oldValue?ie():setTimeout(ie,10)}notifyListeners(_,x){this.localCache[_]=x;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var W=()=>super._set,ie=this;return(0,c.Z)(function*(){yield W().call(ie,_,x),ie.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,W=this;return(0,c.Z)(function*(){const ie=yield x().call(W,_);return W.localCache[_]=JSON.stringify(ie),ie})()}_remove(_){var x=()=>super._remove,W=this;return(0,c.Z)(function*(){yield x().call(W,_),delete W.localCache[_]})()}}return D.type="LOCAL",D})(),is=(()=>{class D extends Sa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return D.type="SESSION",D})();let mc=(()=>{class D{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(ie=>ie.isListeningto(_));if(x)return x;const W=new D(_);return this.receivers.push(W),W}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,c.Z)(function*(){const W=_,{eventId:ie,eventType:st,data:Dt}=W.data,Zt=x.handlersMap[st];if(null==Zt||!Zt.size)return;W.ports[0].postMessage({status:"ack",eventId:ie,eventType:st});const Mn=Array.from(Zt).map(function(){var zn=(0,c.Z)(function*(Gi){return Gi(W.origin,Dt)});return function(Gi){return zn.apply(this,arguments)}}()),er=yield function gc(D){return Promise.all(D.map(function(){var v=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return v.apply(this,arguments)}}()))}(Mn);W.ports[0].postMessage({status:"done",eventId:ie,eventType:st,response:er})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function hn(D="",v=10){let _="";for(let x=0;x<v;x++)_+=Math.floor(10*Math.random());return D+_}class ss{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,_,x=50){var W=this;return(0,c.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let st,Dt;return new Promise((Zt,Mn)=>{const er=hn("",20);ie.port1.start();const zn=setTimeout(()=>{Mn(new Error("unsupported_event"))},x);Dt={messageChannel:ie,onMessage(Gi){const Ao=Gi;if(Ao.data.eventId===er)switch(Ao.data.status){case"ack":clearTimeout(zn),st=setTimeout(()=>{Mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(st),Zt(Ao.data.response);break;default:clearTimeout(zn),clearTimeout(st),Mn(new Error("invalid_response"))}}},W.handlers.add(Dt),ie.port1.addEventListener("message",Dt.onMessage),W.target.postMessage({eventType:v,eventId:er,data:_},[ie.port2])}).finally(()=>{Dt&&W.removeMessageHandler(Dt)})})()}}function fi(){return window}function Zn(){return typeof fi().WorkerGlobalScope<"u"&&"function"==typeof fi().importScripts}function yc(){return(yc=(0,c.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const dn="firebaseLocalStorageDb",ji=1,ea="firebaseLocalStorage",gu="fbase_key";class Ha{constructor(v){this.request=v}toPromise(){return new Promise((v,_)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Xl(D,v){return D.transaction([ea],v?"readwrite":"readonly").objectStore(ea)}function Vc(){const D=indexedDB.open(dn,ji);return new Promise((v,_)=>{D.addEventListener("error",()=>{_(D.error)}),D.addEventListener("upgradeneeded",()=>{const x=D.result;try{x.createObjectStore(ea,{keyPath:gu})}catch(W){_(W)}}),D.addEventListener("success",(0,c.Z)(function*(){const x=D.result;x.objectStoreNames.contains(ea)?v(x):(x.close(),yield function El(){const D=indexedDB.deleteDatabase(dn);return new Ha(D).toPromise()}(),v(yield Vc()))}))})}function za(D,v,_){return Il.apply(this,arguments)}function Il(){return(Il=(0,c.Z)(function*(D,v,_){const x=Xl(D,!0).put({[gu]:v,value:_});return new Ha(x).toPromise()})).apply(this,arguments)}function vc(){return(vc=(0,c.Z)(function*(D,v){const _=Xl(D,!1).get(v),x=yield new Ha(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function ta(D,v){const _=Xl(D,!0).delete(v);return new Ha(_).toPromise()}const yi=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield Vc()),_.db})()}_withRetries(_){var x=this;return(0,c.Z)(function*(){let W=0;for(;;)try{const ie=yield x._openDb();return yield _(ie)}catch(ie){if(W++>3)throw ie;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Zn()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=mc._getInstance(function Bt(){return Zn()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,c.Z)(function*(W,ie){return{keyProcessed:(yield _._poll()).includes(ie.key)}});return function(W,ie){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,c.Z)(function*(W,ie){return["keyChanged"]});return function(W,ie){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var x,W;if(_.activeServiceWorker=yield function or(){return yc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ss(_.activeServiceWorker);const ie=yield _.sender._send("ping",{},800);ie&&null!==(x=ie[0])&&void 0!==x&&x.fulfilled&&null!==(W=ie[0])&&void 0!==W&&W.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,c.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Nn(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch(W){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Vc();return yield za(_,nl,"1"),yield ta(_,nl),!0}catch(_){}return!1})()}_withPendingWrite(_){var x=this;return(0,c.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var W=this;return(0,c.Z)(function*(){return W._withPendingWrite((0,c.Z)(function*(){return yield W._withRetries(ie=>za(ie,_,x)),W.localCache[_]=x,W.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,c.Z)(function*(){const W=yield x._withRetries(ie=>function bo(D,v){return vc.apply(this,arguments)}(ie,_));return x.localCache[_]=W,W})()}_remove(_){var x=this;return(0,c.Z)(function*(){return x._withPendingWrite((0,c.Z)(function*(){return yield x._withRetries(W=>ta(W,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const x=yield _._withRetries(st=>{const Dt=Xl(st,!1).getAll();return new Ha(Dt).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const W=[],ie=new Set;for(const{fbase_key:st,value:Dt}of x)ie.add(st),JSON.stringify(_.localCache[st])!==JSON.stringify(Dt)&&(_.notifyListeners(st,Dt),W.push(st));for(const st of Object.keys(_.localCache))_.localCache[st]&&!ie.has(st)&&(_.notifyListeners(st,null),W.push(st));return W})()}notifyListeners(_,x){this.localCache[_]=x;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),On=1e12;class Ql{constructor(v){this.auth=v,this.counter=On,this._widgets=new Map}render(v,_){const x=this.counter;return this._widgets.set(x,new _c(v,this.auth.name,_||{})),this.counter++,x}reset(v){var _;const x=v||On;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(v){var _;return(null===(_=this._widgets.get(v||On))||void 0===_?void 0:_.getResponse())||""}execute(v){var _=this;return(0,c.Z)(function*(){var x;return null===(x=_._widgets.get(v||On))||void 0===x||x.execute(),""})()}}class _c{constructor(v,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof v?document.getElementById(v):v;De(W,"argument-error",{appName:_}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eo(D){const v=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<D;x++)v.push(_.charAt(Math.floor(Math.random()*_.length)));return v.join("")}(50);const{callback:v,"expired-callback":_}=this.params;if(v)try{v(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ec=ni("rcb"),Jl=new Ae(3e4,6e4);class xa{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=fi().grecaptcha)||void 0===v||!v.render)}load(v,_=""){return De(function vu(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(_),v,"argument-error"),this.shouldResolveImmediately(_)&&Sn(fi().grecaptcha)?Promise.resolve(fi().grecaptcha):new Promise((x,W)=>{const ie=fi().setTimeout(()=>{W(Je(v,"network-request-failed"))},Jl.get());fi()[Ec]=()=>{fi().clearTimeout(ie),delete fi()[Ec];const Dt=fi().grecaptcha;if(!Dt||!Sn(Dt))return void W(Je(v,"internal-error"));const Zt=Dt.render;Dt.render=(Mn,er)=>{const zn=Zt(Mn,er);return this.counter++,zn},this.hostLanguage=_,x(Dt)},Qn(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Ec,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ie),W(Je(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var _;return!(null===(_=fi().grecaptcha)||void 0===_||!_.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mo{load(v){return(0,c.Z)(function*(){return new Ql(v)})()}clearedOneInstance(){}}const _i="recaptcha",ec={theme:"light",type:"image"};class wl{constructor(v,_=Object.assign({},ec),x){this.parameters=_,this.type=_i,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tr(x),this.isInvisible="invisible"===this.parameters.size,De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof v?document.getElementById(v):v;De(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mo:new xa,this.validateStartingState()}verify(){var v=this;return(0,c.Z)(function*(){v.assertNotDestroyed();const _=yield v.render(),x=v.getAssertedRecaptcha();return x.getResponse(_)||new Promise(ie=>{const st=Dt=>{Dt&&(v.tokenChangeListeners.delete(st),ie(Dt))};v.tokenChangeListeners.add(st),v.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof v)v(_);else if("string"==typeof v){const x=fi()[v];"function"==typeof x&&x(_)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,c.Z)(function*(){if(yield v.init(),!v.widgetId){let _=v.container;if(!v.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}v.widgetId=v.getAssertedRecaptcha().render(_,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,c.Z)(function*(){De(yt()&&!Zn(),v.auth,"internal-error"),yield function jc(){let D=null;return new Promise(v=>{"complete"!==document.readyState?(D=()=>v(),window.addEventListener("load",D)):v()}).catch(v=>{throw D&&window.removeEventListener("load",D),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const _=yield function Ne(D){return Ct.apply(this,arguments)}(v.auth);De(_,v.auth,"internal-error"),v.parameters.sitekey=_})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vs{constructor(v,_){this.verificationId=v,this.onConfirmation=_}confirm(v){const _=us._fromVerification(this.verificationId,v);return this.onConfirmation(_)}}function Ft(){return(Ft=(0,c.Z)(function*(D,v,_){const x=Tr(D),W=yield js(x,v,(0,G.m9)(_));return new vs(W,ie=>Er(x,ie))})).apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D);yield qo(!1,x,"phone");const W=yield js(x.auth,v,(0,G.m9)(_));return new vs(W,ie=>Xs(x,ie))})).apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D),W=yield js(x.auth,v,(0,G.m9)(_));return new vs(W,ie=>Zo(x,ie))})).apply(this,arguments)}function js(D,v,_){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,c.Z)(function*(D,v,_){var x;const W=yield _.verify();try{let ie;if(De("string"==typeof W,D,"argument-error"),De(_.type===_i,D,"argument-error"),ie="string"==typeof v?{phoneNumber:v}:v,"session"in ie){const st=ie.session;if("phoneNumber"in ie)return De("enroll"===st.type,D,"internal-error"),(yield function Ci(D,v){return Ke(D,"POST","/v2/accounts/mfaEnrollment:start",Qe(D,v))}(D,{idToken:st.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{De("signin"===st.type,D,"internal-error");const Dt=(null===(x=ie.multiFactorHint)||void 0===x?void 0:x.uid)||ie.multiFactorUid;return De(Dt,D,"missing-multi-factor-info"),(yield function nr(D,v){return Ke(D,"POST","/v2/accounts/mfaSignIn:start",Qe(D,v))}(D,{mfaPendingCredential:st.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:st}=yield function Ro(D,v){return oo.apply(this,arguments)}(D,{phoneNumber:ie.phoneNumber,recaptchaToken:W});return st}}finally{_._reset()}}),Hi.apply(this,arguments)}function R(){return(R=(0,c.Z)(function*(D,v){yield $s((0,G.m9)(D),v)})).apply(this,arguments)}let b=(()=>{class D{constructor(_){this.providerId=D.PROVIDER_ID,this.auth=Tr(_)}verifyPhoneNumber(_,x){return js(this.auth,_,(0,G.m9)(x))}static credential(_,x){return us._fromVerification(_,x)}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:W}=_;return x&&W?us._fromTokenResponse(x,W):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function O(D,v){return v?rt(v):(De(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class j extends Et{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return cs(v,this._buildIdpRequest())}_linkToIdToken(v,_){return cs(v,this._buildIdpRequest(_))}_getReauthenticationResolver(v){return cs(v,this._buildIdpRequest())}_buildIdpRequest(v){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(_.idToken=v),_}}function Q(D){return Yo(D.auth,new j(D),D.bypassAuthState)}function se(D){const{auth:v,user:_}=D;return De(_,v,"internal-error"),Va(_,new j(D),D.bypassAuthState)}function ct(D){return zt.apply(this,arguments)}function zt(){return(zt=(0,c.Z)(function*(D){const{auth:v,user:_}=D;return De(_,v,"internal-error"),$s(_,new j(D),D.bypassAuthState)})).apply(this,arguments)}class ln{constructor(v,_,x,W,ie=!1){this.auth=v,this.resolver=x,this.user=W,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var v=this;return new Promise(function(){var _=(0,c.Z)(function*(x,W){v.pendingPromise={resolve:x,reject:W};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(ie){v.reject(ie)}});return function(x,W){return _.apply(this,arguments)}}())}onAuthEvent(v){var _=this;return(0,c.Z)(function*(){const{urlResponse:x,sessionId:W,postBody:ie,tenantId:st,error:Dt,type:Zt}=v;if(Dt)return void _.reject(Dt);const Mn={auth:_.auth,requestUri:x,sessionId:W,tenantId:st||void 0,postBody:ie||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Zt)(Mn))}catch(er){_.reject(er)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return Q;case"linkViaPopup":case"linkViaRedirect":return ct;case"reauthViaPopup":case"reauthViaRedirect":return se;default:qe(this.auth,"internal-error")}}resolve(v){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jn=new Ae(2e3,1e4);function Kr(){return(Kr=(0,c.Z)(function*(D,v,_){const x=Tr(D);ke(D,v,ds);const W=O(x,_);return new ma(x,"signInViaPopup",v,W).executeNotNull()})).apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D);ke(x.auth,v,ds);const W=O(x.auth,_);return new ma(x.auth,"reauthViaPopup",v,W,x).executeNotNull()})).apply(this,arguments)}function _s(){return(_s=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D);ke(x.auth,v,ds);const W=O(x.auth,_);return new ma(x.auth,"linkViaPopup",v,W,x).executeNotNull()})).apply(this,arguments)}let ma=(()=>{class D extends ln{constructor(_,x,W,ie,st){super(_,x,ie,st),this.provider=W,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const x=yield _.execute();return De(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,c.Z)(function*(){Be(1===_.filter.length,"Popup operations only handle one event");const x=hn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(W=>{_.reject(W)}),_.resolver._isIframeWebStorageSupported(_.auth,W=>{W||_.reject(Je(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,W;this.pollId=null!==(W=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Je(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Jn.get())};_()}}return D.currentPopupAction=null,D})();const Ga="pendingRedirect",ra=new Map;class to extends ln{constructor(v,_,x=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var v=()=>super.execute,_=this;return(0,c.Z)(function*(){let x=ra.get(_.auth._key());if(!x){try{const ie=(yield function Ic(D,v){return wc.apply(this,arguments)}(_.resolver,_.auth))?yield v().call(_):null;x=()=>Promise.resolve(ie)}catch(W){x=()=>Promise.reject(W)}ra.set(_.auth._key(),x)}return _.bypassAuthState||ra.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(v){var _=()=>super.onAuthEvent,x=this;return(0,c.Z)(function*(){if("signInViaRedirect"===v.type)return _().call(x,v);if("unknown"!==v.type){if(v.eventId){const W=yield x.auth._redirectUserForId(v.eventId);if(W)return x.user=W,_().call(x,v);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function wc(){return(wc=(0,c.Z)(function*(D,v){const _=Ma(v),x=kh(D);if(!(yield x._isAvailable()))return!1;const W="true"===(yield x._get(_));return yield x._remove(_),W})).apply(this,arguments)}function Wa(D,v){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(D,v){return kh(D)._set(Ma(v),"true")})).apply(this,arguments)}function Hc(D,v){ra.set(D._key(),v)}function kh(D){return rt(D._redirectPersistence)}function Ma(D){return _e(Ga,D.config.apiKey,D.name)}function _u(D,v,_){return function Bo(D,v,_){return zc.apply(this,arguments)}(D,v,_)}function zc(){return(zc=(0,c.Z)(function*(D,v,_){const x=Tr(D);ke(D,v,ds),yield x._initializationPromise;const W=O(x,_);return yield Wa(W,x),W._openRedirect(x,v,"signInViaRedirect")})).apply(this,arguments)}function ia(D,v,_){return function Gd(D,v,_){return Uo.apply(this,arguments)}(D,v,_)}function Uo(){return(Uo=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D);ke(x.auth,v,ds),yield x.auth._initializationPromise;const W=O(x.auth,_);yield Wa(W,x.auth);const ie=yield Gc(x);return W._openRedirect(x.auth,v,"reauthViaRedirect",ie)})).apply(this,arguments)}function Eu(D,v,_){return function Cl(D,v,_){return Ds.apply(this,arguments)}(D,v,_)}function Ds(){return(Ds=(0,c.Z)(function*(D,v,_){const x=(0,G.m9)(D);ke(x.auth,v,ds),yield x.auth._initializationPromise;const W=O(x.auth,_);yield qo(!1,x,v.providerId),yield Wa(W,x.auth);const ie=yield Gc(x);return W._openRedirect(x.auth,v,"linkViaRedirect",ie)})).apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(D,v){return yield Tr(D)._initializationPromise,bl(D,v,!1)})).apply(this,arguments)}function bl(D,v){return $i.apply(this,arguments)}function $i(){return($i=(0,c.Z)(function*(D,v,_=!1){const x=Tr(D),W=O(x,v),st=yield new to(x,W,_).execute();return st&&!_&&(delete st.user._redirectEventId,yield x._persistUserIfCurrent(st.user),yield x._setRedirectUser(null,v)),st})).apply(this,arguments)}function Gc(D){return N.apply(this,arguments)}function N(){return(N=(0,c.Z)(function*(D){const v=hn(`${D.uid}:::`);return D._redirectEventId=v,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),v})).apply(this,arguments)}class ee{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(v,x)&&(_=!0,this.sendToConsumer(v,x),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Ot(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ht(D);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=v,_=!0)),_}sendToConsumer(v,_){var x;if(v.error&&!ht(v)){const W=(null===(x=v.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(Je(this.auth,W))}else _.onAuthEvent(v)}isEventForConsumer(v,_){const x=null===_.eventId||!!v.eventId&&v.eventId===_.eventId;return _.filter.includes(v.type)&&x}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ve(v))}saveEventToCache(v){this.cachedEventUids.add(ve(v)),this.lastProcessedEventTime=Date.now()}}function ve(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(v=>v).join("-")}function ht({type:D,error:v}){return"unknown"===D&&"auth/no-auth-event"===(null==v?void 0:v.code)}function on(D){return bn.apply(this,arguments)}function bn(){return(bn=(0,c.Z)(function*(D,v={}){return Ke(D,"GET","/v1/projects",v)})).apply(this,arguments)}const jn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yn=/^https?/;function In(){return(In=(0,c.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:v}=yield on(D);for(const _ of v)try{if(To(_))return}catch(x){}qe(D,"unauthorized-domain")})).apply(this,arguments)}function To(D){const v=_t(),{protocol:_,hostname:x}=new URL(v);if(D.startsWith("chrome-extension://")){const st=new URL(D);return""===st.hostname&&""===x?"chrome-extension:"===_&&D.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===_&&st.hostname===x}if(!Yn.test(_))return!1;if(jn.test(D))return x===D;const W=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(x)}const ls=new Ae(3e4,6e4);function sl(){const D=fi().___jsl;if(null!=D&&D.H)for(const v of Object.keys(D.H))if(D.H[v].r=D.H[v].r||[],D.H[v].L=D.H[v].L||[],D.H[v].r=[...D.H[v].L],D.CP)for(let _=0;_<D.CP.length;_++)D.CP[_]=null}let yo=null;const va=new Ae(5e3,15e3),Ka="__/auth/iframe",Vo="emulator/auth/iframe",nc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rf(D){const v=D.config;De(v.authDomain,D,"auth-domain-config-required");const _=v.emulator?Me(v,Vo):`https://${D.config.authDomain}/${Ka}`,x={apiKey:v.apiKey,appName:D.name,v:Te.SDK_VERSION},W=ol.get(D.config.apiHost);W&&(x.eid=W);const ie=D._getFrameworks();return ie.length&&(x.fw=ie.join(",")),`${_}?${(0,G.xO)(x).slice(1)}`}function ic(){return ic=(0,c.Z)(function*(D){const v=yield function no(D){return yo=yo||function bi(D){return new Promise((v,_)=>{var x,W,ie;function st(){sl(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{sl(),_(Je(D,"network-request-failed"))},timeout:ls.get()})}if(null!==(W=null===(x=fi().gapi)||void 0===x?void 0:x.iframes)&&void 0!==W&&W.Iframe)v(gapi.iframes.getContext());else{if(null===(ie=fi().gapi)||void 0===ie||!ie.load){const Dt=ni("iframefcb");return fi()[Dt]=()=>{gapi.load?st():_(Je(D,"network-request-failed"))},Qn(`https://apis.google.com/js/api.js?onload=${Dt}`).catch(Zt=>_(Zt))}st()}}).catch(v=>{throw yo=null,v})}(D),yo}(D),_=fi().gapi;return De(_,D,"internal-error"),v.open({where:document.body,url:Rf(D),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nc,dontclear:!0},x=>new Promise(function(){var W=(0,c.Z)(function*(ie,st){yield x.restyle({setHideOnLeave:!1});const Dt=Je(D,"network-request-failed"),Zt=fi().setTimeout(()=>{st(Dt)},va.get());function Mn(){fi().clearTimeout(Zt),ie(x)}x.ping(Mn).then(Mn,()=>{st(Dt)})});return function(ie,st){return W.apply(this,arguments)}}()))}),ic.apply(this,arguments)}const Wd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xs=500,sd=600,Iu="_blank",Kd="http://localhost";class ro{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}const Fh="__/auth/handler",qd="emulator/auth/handler",Lh=encodeURIComponent("fac");function od(D,v,_,x,W,ie){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,c.Z)(function*(D,v,_,x,W,ie){De(D.config.authDomain,D,"auth-domain-config-required"),De(D.config.apiKey,D,"invalid-api-key");const st={apiKey:D.config.apiKey,appName:D.name,authType:_,redirectUrl:x,v:Te.SDK_VERSION,eventId:W};if(v instanceof ds){v.setDefaultLanguage(D.languageCode),st.providerId=v.providerId||"",(0,G.xb)(v.getCustomParameters())||(st.customParameters=JSON.stringify(v.getCustomParameters()));for(const[er,zn]of Object.entries(ie||{}))st[er]=zn}if(v instanceof ri){const er=v.getScopes().filter(zn=>""!==zn);er.length>0&&(st.scopes=er.join(","))}D.tenantId&&(st.tid=D.tenantId);const Dt=st;for(const er of Object.keys(Dt))void 0===Dt[er]&&delete Dt[er];const Zt=yield D._getAppCheckToken(),Mn=Zt?`#${Lh}=${encodeURIComponent(Zt)}`:"";return`${function jo({config:D}){return D.emulator?Me(D,qd):`https://${D.authDomain}/${Fh}`}(D)}?${(0,G.xO)(Dt).slice(1)}${Mn}`})).apply(this,arguments)}const Tc="webStorageSupport",Dl=class zi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=is,this._completeRedirectFn=bl,this._overrideRedirectResult=Hc}_openPopup(v,_,x,W){var ie=this;return(0,c.Z)(function*(){var st;Be(null===(st=ie.eventManagers[v._key()])||void 0===st?void 0:st.manager,"_initialize() not called before _openPopup()");const Dt=yield od(v,_,x,_t(),W);return function Cc(D,v,_,x=xs,W=sd){const ie=Math.max((window.screen.availHeight-W)/2,0).toString(),st=Math.max((window.screen.availWidth-x)/2,0).toString();let Dt="";const Zt=Object.assign(Object.assign({},Wd),{width:x.toString(),height:W.toString(),top:ie,left:st}),Mn=(0,G.z$)().toLowerCase();_&&(Dt=yn(Mn)?Iu:_),At(Mn)&&(v=v||Kd,Zt.scrollbars="yes");const er=Object.entries(Zt).reduce((Gi,[Ao,yd])=>`${Gi}${Ao}=${yd},`,"");if(function ye(D=(0,G.z$)()){var v;return kt(D)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(Mn)&&"_self"!==Dt)return function bc(D,v){const _=document.createElement("a");_.href=D,_.target=v;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(v||"",Dt),new ro(null);const zn=window.open(v||"",Dt,er);De(zn,D,"popup-blocked");try{zn.focus()}catch(Gi){}return new ro(zn)}(v,Dt,hn())})()}_openRedirect(v,_,x,W){var ie=this;return(0,c.Z)(function*(){return yield ie._originValidation(v),function _l(D){fi().location.href=D}(yield od(v,_,x,_t(),W)),new Promise(()=>{})})()}_initialize(v){const _=v._key();if(this.eventManagers[_]){const{manager:W,promise:ie}=this.eventManagers[_];return W?Promise.resolve(W):(Be(ie,"If manager is not set, promise should be"),ie)}const x=this.initAndGetManager(v);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(v){var _=this;return(0,c.Z)(function*(){const x=yield function rc(D){return ic.apply(this,arguments)}(v),W=new ee(v);return x.register("authEvent",ie=>(De(null==ie?void 0:ie.authEvent,v,"invalid-auth-event"),{status:W.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[v._key()]={manager:W},_.iframes[v._key()]=x,W})()}_isIframeWebStorageSupported(v,_){this.iframes[v._key()].send(Tc,{type:Tc},W=>{var ie;const st=null===(ie=null==W?void 0:W[0])||void 0===ie?void 0:ie[Tc];void 0!==st&&_(!!st),qe(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const _=v._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function rr(D){return In.apply(this,arguments)}(v)),this.originValidationPromises[_]}get _shouldInitProactively(){return vt()||pt()||kt()}};class wu{constructor(v){this.factorId=v}_process(v,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(v,_.credential,x);case"signin":return this._finalizeSignIn(v,_.credential);default:return it("unexpected MultiFactorSessionType")}}}class Cu extends wu{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Cu(v)}_finalizeEnroll(v,_,x){return function Vi(D,v){return Ke(D,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(D,v))}(v,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,_){return function go(D,v){return Ke(D,"POST","/v2/accounts/mfaSignIn:finalize",Qe(D,v))}(v,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bu=(()=>{class D{constructor(){}static assertion(_){return Cu._fromCredential(_)}}return D.FACTOR_ID="phone",D})();var io="@firebase/auth";class Ol{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const _=this.auth.onIdTokenChanged(x=>{v((null==x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,_),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const _=this.internalListeners.get(v);_&&(this.internalListeners.delete(v),_(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qc(){return window}(0,G.Pz)("authIdTokenMaxAge"),function Kc(D){(0,Te._registerComponent)(new ge.wA("auth",(v,{options:_})=>{const x=v.getProvider("app").getImmediate(),W=v.getProvider("heartbeat"),ie=v.getProvider("app-check-internal"),{apiKey:st,authDomain:Dt}=x.options;De(st&&!st.includes(":"),"invalid-api-key",{appName:x.name}),De(!(null!=Dt&&Dt.includes(":")),"argument-error",{appName:x.name});const Zt={apiKey:st,authDomain:Dt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:je(D)},Mn=new Xr(x,W,ie,Zt);return function Ee(D,v){const _=(null==v?void 0:v.persistence)||[],x=(Array.isArray(_)?_:[_]).map(rt);null!=v&&v.errorMap&&D._updateErrorMap(v.errorMap),D._initializeWithPersistence(x,null==v?void 0:v.popupRedirectResolver)}(Mn,_),Mn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,_,x)=>{v.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new ge.wA("auth-internal",v=>{const _=Tr(v.getProvider("auth").getImmediate());return new Ol(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(io,"0.23.1",function Du(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,Te.registerVersion)(io,"0.23.1","esm2017")}("Browser");const Su=2e3;function ld(){return ld=(0,c.Z)(function*(D,v,_){var x;const{BuildInfo:W}=qc();Be(v.sessionId,"AuthEvent did not contain a session ID");const ie=yield function cd(D){return Ii.apply(this,arguments)}(v.sessionId),st={};return kt()?st.ibi=W.packageName:Ve()?st.apn=W.packageName:qe(D,"operation-not-supported-in-this-environment"),W.displayName&&(st.appDisplayName=W.displayName),st.sessionId=ie,od(D,_,v.type,void 0,null!==(x=v.eventId)&&void 0!==x?x:void 0,st)}),ld.apply(this,arguments)}function xc(){return(xc=(0,c.Z)(function*(D){const{BuildInfo:v}=qc(),_={};kt()?_.iosBundleId=v.packageName:Ve()?_.androidPackageName=v.packageName:qe(D,"operation-not-supported-in-this-environment"),yield on(D,_)})).apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(D,v,_){const{cordova:x}=qc();let W=()=>{};try{yield new Promise((ie,st)=>{let Dt=null;function Zt(){var zn;ie();const Gi=null===(zn=x.plugins.browsertab)||void 0===zn?void 0:zn.close;"function"==typeof Gi&&Gi(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Mn(){Dt||(Dt=window.setTimeout(()=>{st(Je(D,"redirect-cancelled-by-user"))},Su))}function er(){"visible"===(null==document?void 0:document.visibilityState)&&Mn()}v.addPassiveListener(Zt),document.addEventListener("resume",Mn,!1),Ve()&&document.addEventListener("visibilitychange",er,!1),W=()=>{v.removePassiveListener(Zt),document.removeEventListener("resume",Mn,!1),document.removeEventListener("visibilitychange",er,!1),Dt&&window.clearTimeout(Dt)}})}finally{W()}})).apply(this,arguments)}function Ii(){return(Ii=(0,c.Z)(function*(D){const v=function qa(D){if(Be(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const v=new ArrayBuffer(D.length),_=new Uint8Array(v);for(let x=0;x<D.length;x++)_[x]=D.charCodeAt(x);return _}(D),_=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(_)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Yc=20;class Tl extends ee{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(v=>{this.resolveInialized=v})}addPassiveListener(v){this.passiveListeners.add(v)}removePassiveListener(v){this.passiveListeners.delete(v)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(v){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(v)),super.onEvent(v)}initialized(){var v=this;return(0,c.Z)(function*(){yield v.initPromise})()}}function sc(D){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,c.Z)(function*(D){const v=yield sa()._get(vo(D));return v&&(yield sa()._remove(vo(D))),v})).apply(this,arguments)}function Ru(){const D=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<Yc;_++){const x=Math.floor(Math.random()*v.length);D.push(v.charAt(x))}return D.join("")}function sa(){return rt(Xi)}function vo(D){return _e("authEvent",D.config.apiKey,D.name)}function ac(D){if(null==D||!D.includes("?"))return{};const[v,..._]=D.split("?");return(0,G.zd)(_.join("?"))}const Qc=class ud{constructor(){this._redirectPersistence=is,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bl,this._overrideRedirectResult=Hc}_initialize(v){var _=this;return(0,c.Z)(function*(){const x=v._key();let W=_.eventManagers.get(x);return W||(W=new Tl(v),_.eventManagers.set(x,W),_.attachCallbackListeners(v,W)),W})()}_openPopup(v){qe(v,"operation-not-supported-in-this-environment")}_openRedirect(v,_,x,W){var ie=this;return(0,c.Z)(function*(){!function Rc(D){var v,_,x,W,ie,st,Dt,Zt,Mn,er;const zn=qc();De("function"==typeof(null===(v=null==zn?void 0:zn.universalLinks)||void 0===v?void 0:v.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(typeof(null===(_=null==zn?void 0:zn.BuildInfo)||void 0===_?void 0:_.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(ie=null===(W=null===(x=null==zn?void 0:zn.cordova)||void 0===x?void 0:x.plugins)||void 0===W?void 0:W.browsertab)||void 0===ie?void 0:ie.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Zt=null===(Dt=null===(st=null==zn?void 0:zn.cordova)||void 0===st?void 0:st.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===Zt?void 0:Zt.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(er=null===(Mn=null==zn?void 0:zn.cordova)||void 0===Mn?void 0:Mn.InAppBrowser)||void 0===er?void 0:er.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(v);const st=yield ie._initialize(v);yield st.initialized(),st.resetRedirect(),function tc(){ra.clear()}(),yield ie._originValidation(v);const Dt=function Mf(D,v,_=null){return{type:v,eventId:_,urlResponse:null,sessionId:Ru(),postBody:null,tenantId:D.tenantId,error:Je(D,"no-auth-event")}}(v,x,W);yield function Sl(D,v){return sa()._set(vo(D),v)}(v,Dt);const Zt=yield function Fp(D,v,_){return ld.apply(this,arguments)}(v,Dt,_),Mn=yield function Zd(D){const{cordova:v}=qc();return new Promise(_=>{v.plugins.browsertab.isAvailable(x=>{let W=null;x?v.plugins.browsertab.openUrl(D):W=v.InAppBrowser.open(D,function le(D=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),_(W)})})}(Zt);return function xu(D,v,_){return _a.apply(this,arguments)}(v,st,Mn)})()}_isIframeWebStorageSupported(v,_){throw new Error("Method not implemented.")}_originValidation(v){const _=v._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Au(D){return xc.apply(this,arguments)}(v)),this.originValidationPromises[_]}attachCallbackListeners(v,_){const{universalLinks:x,handleOpenURL:W,BuildInfo:ie}=qc(),st=setTimeout((0,c.Z)(function*(){yield sc(v),_.onEvent(Jc())}),500),Dt=function(){var er=(0,c.Z)(function*(zn){clearTimeout(st);const Gi=yield sc(v);let Ao=null;Gi&&null!=zn&&zn.url&&(Ao=function al(D,v){var _,x;const W=function Xc(D){const v=ac(D),_=v.link?decodeURIComponent(v.link):void 0,x=ac(_).link,W=v.deep_link_id?decodeURIComponent(v.deep_link_id):void 0;return ac(W).link||W||x||_||D}(v);if(W.includes("/__/auth/callback")){const ie=ac(W),st=ie.firebaseError?function oc(D){try{return JSON.parse(D)}catch(v){return null}}(decodeURIComponent(ie.firebaseError)):null,Dt=null===(x=null===(_=null==st?void 0:st.code)||void 0===_?void 0:_.split("auth/"))||void 0===x?void 0:x[1],Zt=Dt?Je(Dt):null;return Zt?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:W,postBody:null}}return null}(Gi,zn.url)),_.onEvent(Ao||Jc())});return function(Gi){return er.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,Dt);const Zt=W,Mn=`${ie.packageName.toLowerCase()}://`;qc().handleOpenURL=function(){var er=(0,c.Z)(function*(zn){if(zn.toLowerCase().startsWith(Mn)&&Dt({url:zn}),"function"==typeof Zt)try{Zt(zn)}catch(Gi){console.error(Gi)}});return function(zn){return er.apply(this,arguments)}}()}};function Jc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Je("no-auth-event")}}const Lp=1e3;function So(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function eu(D=(0,G.z$)()){return!("file:"!==So()&&"ionic:"!==So()&&"capacitor:"!==So()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uh(){try{const D=self.localStorage,v=hn();if(D)return D.setItem(v,"1"),D.removeItem(v),!function tu(D=(0,G.z$)()){return function ll(){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fl(D=(0,G.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,G.hl)()}catch(D){return hd()&&(0,G.hl)()}return!1}function hd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qr(){return(function Bh(){return"http:"===So()||"https:"===So()}()||(0,G.ru)()||eu())&&!function dd(){return(0,G.b$)()||(0,G.UG)()}()&&Uh()&&!hd()}function Mu(){return eu()&&typeof document<"u"}function Pu(){return(Pu=(0,c.Z)(function*(){return!!Mu()&&new Promise(D=>{const v=setTimeout(()=>{D(!1)},Lp);document.addEventListener("deviceready",()=>{clearTimeout(v),D(!0)})})})).apply(this,arguments)}const oa={LOCAL:"local",NONE:"none",SESSION:"session"},Ll=De,pd="persistence";function $l(D){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,c.Z)(function*(D){yield D._initializationPromise;const v=Jd(),_=_e(pd,D.config.apiKey,D.name);v&&v.setItem(_,D._getPersistence())})).apply(this,arguments)}function Jd(){var D;try{return(null===(D=function fd(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch(v){return null}}const Bl=De;class Al{constructor(){this.browserResolver=rt(Dl),this.cordovaResolver=rt(Qc),this.underlyingResolver=null,this._redirectPersistence=is,this._completeRedirectFn=bl,this._overrideRedirectResult=Hc}_initialize(v){var _=this;return(0,c.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(v)})()}_openPopup(v,_,x,W){var ie=this;return(0,c.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(v,_,x,W)})()}_openRedirect(v,_,x,W){var ie=this;return(0,c.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(v,_,x,W)})()}_isIframeWebStorageSupported(v,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(v,_)}_originValidation(v){return this.assertedUnderlyingResolver._originValidation(v)}get _shouldInitProactively(){return Mu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var v=this;return(0,c.Z)(function*(){if(v.underlyingResolver)return;const _=yield function Qd(){return Pu.apply(this,arguments)}();v.underlyingResolver=_?v.cordovaResolver:v.browserResolver})()}}function aa(D){return D.unwrap()}function Vh(D){return kf(D)}function kf(D){const{_tokenResponse:v}=D instanceof G.ZR?D.customData:D;if(!v)return null;if(!(D instanceof G.ZR)&&"temporaryProof"in v&&"phoneNumber"in v)return b.credentialFromResult(D);const _=v.providerId;if(!_||_===Ue.PASSWORD)return null;let x;switch(_){case Ue.GOOGLE:x=Fs;break;case Ue.FACEBOOK:x=Io;break;case Ue.GITHUB:x=co;break;case Ue.TWITTER:x=Ja;break;default:const{oauthIdToken:W,oauthAccessToken:ie,oauthTokenSecret:st,pendingToken:Dt,nonce:Zt}=v;return ie||st||W||Dt?Dt?_.startsWith("saml.")?ns._create(_,Dt):es._fromParams({providerId:_,signInMethod:_,pendingToken:Dt,idToken:W,accessToken:ie}):new ps(_).credential({idToken:W,accessToken:ie,rawNonce:Zt}):null}return D instanceof G.ZR?x.credentialFromError(D):x.credentialFromResult(D)}function Pa(D,v){return v.catch(_=>{throw _ instanceof G.ZR&&function iu(D,v){var _;const x=null===(_=v.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null==v?void 0:v.code))v.resolver=new gd(D,function Zi(D,v){var _;const x=(0,G.m9)(D),W=v;return De(v.customData.operationType,x,"argument-error"),De(null===(_=W.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),wr._fromError(x,W)}(D,v));else if(x){const W=kf(v),ie=v;W&&(ie.credential=W,ie.tenantId=x.tenantId||void 0,ie.email=x.email||void 0,ie.phoneNumber=x.phoneNumber||void 0)}}(D,_),_}).then(_=>{const W=_.user;return{operationType:_.operationType,credential:Vh(_),additionalUserInfo:pa(_),user:Ul.getOrCreate(W)}})}function hs(D,v){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,c.Z)(function*(D,v){const _=yield v;return{verificationId:_.verificationId,confirm:x=>Pa(D,_.confirm(x))}})).apply(this,arguments)}class gd{constructor(v,_){this.resolver=_,this.auth=function ru(D){return D.wrapped()}(v)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(v){return Pa(aa(this.auth),this.resolver.resolveSignIn(v))}}class Ul{constructor(v){this._delegate=v,this.multiFactor=function Lo(D){const v=(0,G.m9)(D);return po.has(v)||po.set(v,Oi._fromUser(v)),po.get(v)}(v)}static getOrCreate(v){return Ul.USER_MAP.has(v)||Ul.USER_MAP.set(v,new Ul(v)),Ul.USER_MAP.get(v)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(v){return this._delegate.getIdTokenResult(v)}getIdToken(v){return this._delegate.getIdToken(v)}linkAndRetrieveDataWithCredential(v){return this.linkWithCredential(v)}linkWithCredential(v){var _=this;return(0,c.Z)(function*(){return Pa(_.auth,Xs(_._delegate,v))})()}linkWithPhoneNumber(v,_){var x=this;return(0,c.Z)(function*(){return hs(x.auth,function Ra(D,v,_){return Br.apply(this,arguments)}(x._delegate,v,_))})()}linkWithPopup(v){var _=this;return(0,c.Z)(function*(){return Pa(_.auth,function Do(D,v,_){return _s.apply(this,arguments)}(_._delegate,v,Al))})()}linkWithRedirect(v){var _=this;return(0,c.Z)(function*(){return yield $l(Tr(_.auth)),Eu(_._delegate,v,Al)})()}reauthenticateAndRetrieveDataWithCredential(v){return this.reauthenticateWithCredential(v)}reauthenticateWithCredential(v){var _=this;return(0,c.Z)(function*(){return Pa(_.auth,Zo(_._delegate,v))})()}reauthenticateWithPhoneNumber(v,_){return hs(this.auth,function Si(D,v,_){return Or.apply(this,arguments)}(this._delegate,v,_))}reauthenticateWithPopup(v){return Pa(this.auth,function os(D,v,_){return Ai.apply(this,arguments)}(this._delegate,v,Al))}reauthenticateWithRedirect(v){var _=this;return(0,c.Z)(function*(){return yield $l(Tr(_.auth)),ia(_._delegate,v,Al)})()}sendEmailVerification(v){return function fa(D,v){return Da.apply(this,arguments)}(this._delegate,v)}unlink(v){var _=this;return(0,c.Z)(function*(){return yield function Ua(D,v){return uo.apply(this,arguments)}(_._delegate,v),_})()}updateEmail(v){return function No(D,v){return Ri((0,G.m9)(D),v,null)}(this._delegate,v)}updatePassword(v){return function Yi(D,v){return Ri((0,G.m9)(D),null,v)}(this._delegate,v)}updatePhoneNumber(v){return function A(D,v){return R.apply(this,arguments)}(this._delegate,v)}updateProfile(v){return function Ta(D,v){return qi.apply(this,arguments)}(this._delegate,v)}verifyBeforeUpdateEmail(v,_){return function ja(D,v,_){return ko.apply(this,arguments)}(this._delegate,v,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ul.USER_MAP=new WeakMap;const md=De;let su=(()=>{class D{constructor(_,x){if(this.app=_,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=_.options;md(W,"invalid-api-key",{appName:_.name}),md(W,"invalid-api-key",{appName:_.name});const ie=typeof window<"u"?Al:void 0;this._delegate=x.initialize({options:{persistence:ku(W,_.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(ut),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ul.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,x){!function tt(D,v,_){const x=Tr(D);De(x._canInitEmulator,x,"emulator-config-failed"),De(/^https?:\/\//.test(v),x,"invalid-emulator-scheme");const W=!(null==_||!_.disableWarnings),ie=bt(v),{host:st,port:Dt}=function Ht(D){const v=bt(D),_=/(\/\/)?([^?#/]+)/.exec(D.substr(v.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(x);if(W){const ie=W[1];return{host:ie,port:ce(x.substr(ie.length+1))}}{const[ie,st]=x.split(":");return{host:ie,port:ce(st)}}}(v);x.config.emulator={url:`${ie}//${st}${null===Dt?"":`:${Dt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:st,port:Dt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function nt(){function D(){const v=document.createElement("p"),_=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,_,x)}applyActionCode(_){return function di(D,v){return $r.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return ms(this._delegate,_)}confirmPasswordReset(_,x){return function Xn(D,v,_){return Sr.apply(this,arguments)}(this._delegate,_,x)}createUserWithEmailAndPassword(_,x){var W=this;return(0,c.Z)(function*(){return Pa(W._delegate,function Xo(D,v,_){return Qo.apply(this,arguments)}(W._delegate,_,x))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Oo(D,v){return tl.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function ql(D,v){const _=ts.parseLink(v);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,c.Z)(function*(){md(Qr(),_._delegate,"operation-not-supported-in-this-environment");const x=yield function Nh(D,v){return ya.apply(this,arguments)}(_._delegate,Al);return x?Pa(_._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Pf(D,v){Tr(D)._logFramework(v)}(this._delegate,_)}onAuthStateChanged(_,x,W){const{next:ie,error:st,complete:Dt}=Nf(_,x,W);return this._delegate.onAuthStateChanged(ie,st,Dt)}onIdTokenChanged(_,x,W){const{next:ie,error:st,complete:Dt}=Nf(_,x,W);return this._delegate.onIdTokenChanged(ie,st,Dt)}sendSignInLinkToEmail(_,x){return function el(D,v,_){return Ca.apply(this,arguments)}(this._delegate,_,x)}sendPasswordResetEmail(_,x){return function an(D,v,_){return En.apply(this,arguments)}(this._delegate,_,x||void 0)}setPersistence(_){var x=this;return(0,c.Z)(function*(){let W;switch(function Of(D,v){Ll(Object.values(oa).includes(v),D,"invalid-persistence-type"),(0,G.b$)()?Ll(v!==oa.SESSION,D,"unsupported-persistence-type"):(0,G.UG)()?Ll(v===oa.NONE,D,"unsupported-persistence-type"):hd()?Ll(v===oa.NONE||v===oa.LOCAL&&(0,G.hl)(),D,"unsupported-persistence-type"):Ll(v===oa.NONE||Uh(),D,"unsupported-persistence-type")}(x._delegate,_),_){case oa.SESSION:W=is;break;case oa.LOCAL:W=(yield rt(yi)._isAvailable())?yi:Xi;break;case oa.NONE:W=Lt;break;default:return qe("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Pa(this._delegate,function ks(D){return Ti.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Pa(this._delegate,Er(this._delegate,_))}signInWithCustomToken(_){return Pa(this._delegate,function y(D,v){return I.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,x){return Pa(this._delegate,function Vs(D,v,_){return Er((0,G.m9)(D),ua.credential(v,_))}(this._delegate,_,x))}signInWithEmailLink(_,x){return Pa(this._delegate,function ml(D,v,_){return Po.apply(this,arguments)}(this._delegate,_,x))}signInWithPhoneNumber(_,x){return hs(this._delegate,function na(D,v,_){return Ft.apply(this,arguments)}(this._delegate,_,x))}signInWithPopup(_){var x=this;return(0,c.Z)(function*(){return md(Qr(),x._delegate,"operation-not-supported-in-this-environment"),Pa(x._delegate,function Vn(D,v,_){return Kr.apply(this,arguments)}(x._delegate,_,Al))})()}signInWithRedirect(_){var x=this;return(0,c.Z)(function*(){return md(Qr(),x._delegate,"operation-not-supported-in-this-environment"),yield $l(x._delegate),_u(x._delegate,_,Al)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function wi(D,v){return Fi.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=oa,D})();function Nf(D,v,_){let x=D;"function"!=typeof D&&({next:x,error:v,complete:_}=D);const W=x;return{next:st=>W(st&&Ul.getOrCreate(st)),error:v,complete:_}}function ku(D,v){const _=function nu(D,v){const _=Jd();if(!_)return[];const x=_e(pd,D,v);switch(_.getItem(x)){case oa.NONE:return[Lt];case oa.LOCAL:return[yi,is];case oa.SESSION:return[is];default:return[]}}(D,v);if(typeof self<"u"&&!_.includes(yi)&&_.push(yi),typeof window<"u")for(const x of[Xi,is])_.includes(x)||_.push(x);return _.includes(Lt)||_.push(Lt),_}class Ho{constructor(){this.providerId="phone",this._delegate=new b(aa(q.Z.auth()))}static credential(v,_){return b.credential(v,_)}verifyPhoneNumber(v,_){return this._delegate.verifyPhoneNumber(v,_)}unwrap(){return this._delegate}}Ho.PHONE_SIGN_IN_METHOD=b.PHONE_SIGN_IN_METHOD,Ho.PROVIDER_ID=b.PROVIDER_ID;const Ya=De;class eh{constructor(v,_,x=q.Z.app()){var W;Ya(null===(W=x.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new wl(v,_,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function th(D){D.INTERNAL.registerComponent(new ge.wA("auth-compat",v=>{const _=v.getProvider("app-compat").getImmediate(),x=v.getProvider("auth");return new su(_,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:de_EMAIL_SIGNIN,PASSWORD_RESET:de_PASSWORD_RESET,RECOVER_EMAIL:de_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:de_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:de_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:de_VERIFY_EMAIL}},EmailAuthProvider:ua,FacebookAuthProvider:Io,GithubAuthProvider:co,GoogleAuthProvider:Fs,OAuthProvider:ps,SAMLAuthProvider:wo,PhoneAuthProvider:Ho,PhoneMultiFactorGenerator:bu,RecaptchaVerifier:eh,TwitterAuthProvider:Ja,Auth:su,AuthCredential:Et,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.1")}(q.Z)},5705:(_n,It,L)=>{"use strict";L.d(It,{Fc:()=>Se,Oo:()=>ge});var c=L(4650),q=L(6895),G=L(2078);const Te=function(Ue,pe,re,de,Oe){return{color:Ue,"font-size":pe,"margin-right":re,opacity:de,"pointer-events":Oe}};function Pe(Ue,pe){if(1&Ue){const re=c.EpF();c.TgZ(0,"ion-icon",1),c.NdJ("click",function(){const Ge=c.CHM(re).index,ut=c.oxw();return c.KtG(ut.rateChange(Ge))}),c.qZA()}if(2&Ue){const re=pe.index,de=c.oxw();c.Q6J("name",re+1<=de.rating?"star":"star-outline")("ngStyle",c.qbA(2,Te,re+1<=de.rating?de.filledColor:de.color,de.size+"px",de.margin+"px",de.disabled?de.opacity:"1",de.disabled?"none":""))}}let ge=(()=>{class Ue{constructor(){this.stars=[1,2,3,4,5],this.rating=0,this.size=20,this.color="grey",this.filledColor="orange",this.margin=5,this.disabled=!1,this.opacity=.5,this.ratingChange=new c.vpe}ngOnInit(){}rateChange(re){this.rating=re+1,this.ratingChange.emit(re+1)}}return Ue.\u0275fac=function(re){return new(re||Ue)},Ue.\u0275cmp=c.Xpm({type:Ue,selectors:[["ion-rating-stars"]],inputs:{rating:"rating",size:"size",color:"color",filledColor:"filledColor",margin:"margin",disabled:"disabled",opacity:"opacity"},outputs:{ratingChange:"ratingChange"},decls:2,vars:1,consts:[[3,"name","ngStyle","click",4,"ngFor","ngForOf"],[3,"name","ngStyle","click"]],template:function(re,de){1&re&&(c.TgZ(0,"div"),c.YNc(1,Pe,1,8,"ion-icon",0),c.qZA()),2&re&&(c.xp6(1),c.Q6J("ngForOf",de.stars))},dependencies:[q.sg,q.PC,G.gu],encapsulation:2}),Ue})(),Se=(()=>{class Ue{}return Ue.\u0275fac=function(re){return new(re||Ue)},Ue.\u0275mod=c.oAB({type:Ue}),Ue.\u0275inj=c.cJS({imports:[q.ez,G.Pc]}),Ue})()},5861:(_n,It,L)=>{"use strict";function c(G,Te,Pe,Fe,ge,Se,Ue){try{var pe=G[Se](Ue),re=pe.value}catch(de){return void Pe(de)}pe.done?Te(re):Promise.resolve(re).then(Fe,ge)}function q(G){return function(){var Te=this,Pe=arguments;return new Promise(function(Fe,ge){var Se=G.apply(Te,Pe);function Ue(re){c(Se,Fe,ge,Ue,pe,"next",re)}function pe(re){c(Se,Fe,ge,Ue,pe,"throw",re)}Ue(void 0)})}}L.d(It,{Z:()=>q})}},_n=>{_n(_n.s=7579)}]);