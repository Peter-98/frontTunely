"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(v,d,c)=>{c.r(d),c.d(d,{HomePageModule:()=>g});var h=c(6895),s=c(2078),i=c(433),l=c(4262),m=c(655),t=c(4650),_=c(7556);const p=function(){return["/login"]};function O(r,o){1&r&&(t.TgZ(0,"ion-button",4),t._UZ(1,"img",15),t.qZA()),2&r&&t.Q6J("routerLink",t.DdM(1,p))}function u(r,o){if(1&r){const n=t.EpF();t.TgZ(0,"ion-button",16),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.logout())}),t._UZ(1,"ion-icon",17),t.qZA()}}const f=function(){return["/sign-up"]},P=[{path:"",component:(()=>{class r{constructor(n,a,e){this.toastController=n,this.authService=a,this.router=e,this.data="",this.auth=!1}ngOnInit(){this.authService.isAuthenticated().subscribe(n=>{n?(console.log("AUTENTIFICADO"),this.auth=!0):(console.log("NO AUTENTIFICADO"),this.auth=!1)})}goToTrackListData(){this.router.navigate(["/trackslist",this.data])}goToTrackList(){this.router.navigate(["/trackslist"])}logout(){this.authService.doLogout().then(n=>{console.log("User logout"),this.presentToast("You have successfully logged out"),this.router.navigate(["/home"])},n=>{console.log(n)})}presentToast(n){return(0,m.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:n,duration:2e3})).present()})}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(s.yF),t.Y36(_.e),t.Y36(l.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-home"]],decls:18,vars:7,consts:[["collapse","fade",3,"translucent"],["color","translucent"],["src","/assets/imgs/logo.png","width","150","height","50",1,"title-image"],["slot","end"],[3,"routerLink"],["src","/assets/icon/add-user.png",1,"custom-icon"],[3,"routerLink",4,"ngIf"],["slot","end",3,"click",4,"ngIf"],["padding","",1,"background",3,"fullscreen"],["role","banner",1,"banner"],["action","",1,"search-bar"],["type","search","name","search","pattern",".*\\S.*","required","",3,"ngModel","ngModelChange"],["type","submit",1,"search-btn",3,"click"],[1,"text-box"],["type","button",1,"btn","btn-white","animated",3,"click"],["src","/assets/icon/enter.png",1,"custom-icon"],["slot","end",3,"click"],["slot","icon-only","name","exit-outline"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1),t._UZ(2,"img",2),t.TgZ(3,"ion-buttons",3)(4,"ion-button",4),t._UZ(5,"img",5),t.qZA(),t.YNc(6,O,2,2,"ion-button",6),t.YNc(7,u,2,0,"ion-button",7),t.qZA()()(),t.TgZ(8,"ion-content",8)(9,"section",9)(10,"h1"),t._uU(11,"Life is music"),t.qZA(),t.TgZ(12,"form",10)(13,"input",11),t.NdJ("ngModelChange",function(M){return a.data=M}),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){return a.goToTrackListData()}),t.qZA()(),t.TgZ(15,"div",13)(16,"button",14),t.NdJ("click",function(){return a.goToTrackList()}),t._uU(17,"All songs"),t.qZA()()()()),2&n&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("routerLink",t.DdM(6,f)),t.xp6(2),t.Q6J("ngIf",!a.auth),t.xp6(1),t.Q6J("ngIf",a.auth),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("ngModel",a.data))},dependencies:[h.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.c5,i.On,i.F,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.sr,s.YI,l.rH],styles:['ion-content.background[_ngcontent-%COMP%]{--background: url(wp2.a9194bfa6fc63b3c.jpeg) 0 0/100% 100% no-repeat}@font-face{font-family:Dancing Script;src:url(DancingScript.37c09881bb8c7428.ttf)}h1[_ngcontent-%COMP%]{margin:0;padding:0}.banner[_ngcontent-%COMP%]{box-sizing:border-box;height:100%;left:0;padding:5em 0;position:flex;text-align:center;top:0;width:100%;bottom:0}.banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{bottom:0;color:#fff;font-family:Dancing Script;font-size:2.375rem;margin-bottom:1em}ion-toolbar[_ngcontent-%COMP%]{--background-color: transparent;--ion-color-base: transparent !important}img.custom-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin:0 auto}ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}*[_ngcontent-%COMP%]{border:0;box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font:1em Hind,sans-serif;line-height:1.5em}body[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#171717}body[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]{display:flex}body[_ngcontent-%COMP%]{background:#f1f1f1;height:100vh}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%]:before, .search-btn[_ngcontent-%COMP%]:after{transition:all .25s ease-out}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%]{width:3em;height:3em}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid:not(:focus), .search-btn[_ngcontent-%COMP%]{cursor:pointer}.search-bar[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{width:100%}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:focus) + .search-btn[_ngcontent-%COMP%]:focus{outline:transparent}.search-bar[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin:auto;padding:1.5em;justify-content:center;max-width:30em;display:flex}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border-radius:1.5em;box-shadow:0 0 0 .4em #171717 inset;padding:.75em;transform:translate(.5em,.5em) scale(.5);transform-origin:100% 0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{background:#fff;border-radius:.375em 0 0 .375em;box-shadow:0 0 0 .1em #d9d9d9 inset;transform:scale(1)}.search-btn[_ngcontent-%COMP%]{background:#171717;border-radius:0 .75em .75em 0/0 1.5em 1.5em 0;padding:.75em;position:relative;transform:translate(.25em,.25em) rotate(45deg) scale(.25,.125);transform-origin:0 50%}.search-btn[_ngcontent-%COMP%]:before, .search-btn[_ngcontent-%COMP%]:after{content:"";display:block;opacity:0;position:absolute}.search-btn[_ngcontent-%COMP%]:before{border-radius:50%;box-shadow:0 0 0 .2em #f1f1f1 inset;top:.75em;left:.75em;width:1.2em;height:1.2em}.search-btn[_ngcontent-%COMP%]:after{background:#f1f1f1;border-radius:0 .25em .25em 0;top:51%;left:51%;width:.75em;height:.25em;transform:translate(.2em) rotate(45deg);transform-origin:0 50%}.search-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;width:1px;height:1px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-btn[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + .search-btn[_ngcontent-%COMP%]{background:#2762f3;border-radius:0 .375em .375em 0;transform:scale(1)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-btn[_ngcontent-%COMP%]:before, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-btn[_ngcontent-%COMP%]:after, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + .search-btn[_ngcontent-%COMP%]:before, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + .search-btn[_ngcontent-%COMP%]:after{opacity:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-btn[_ngcontent-%COMP%]:hover, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + .search-btn[_ngcontent-%COMP%]:hover, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:focus) + .search-btn[_ngcontent-%COMP%]:focus{background:#0c48db}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-btn[_ngcontent-%COMP%]:active, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + .search-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}@media screen and (prefers-color-scheme: dark){body[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#f1f1f1}body[_ngcontent-%COMP%]{background:#171717}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-shadow:0 0 0 .4em #f1f1f1 inset}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{opacity:.5;background:#3d3d3d;box-shadow:0 0 0 .1em #3d3d3d inset}.search-btn[_ngcontent-%COMP%]{background:#f1f1f1}}.text-box[_ngcontent-%COMP%]{margin-left:auto;margin-top:42vh}.btn.animated[_ngcontent-%COMP%]{position:relative;overflow:hidden;display:inline-block;text-transform:uppercase;text-decoration:none;padding:15px 40px;border-radius:100px;transition:all .2s;z-index:1}.btn.animated[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(0,0,0,.2)}.btn.animated[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 5px 10px rgba(0,0,0,.2)}.btn-white.animated[_ngcontent-%COMP%]{color:#777;background-color:#fff}.btn.animated[_ngcontent-%COMP%]:after{content:"";display:inline-block;height:100%;width:0;border-radius:100px;position:absolute;top:0;left:50%;z-index:-1;transition:all .4s ease-out}.btn.animated[_ngcontent-%COMP%]:hover:after{width:100%;left:0;transform:translate(-50%);opacity:0}.btn.animated[_ngcontent-%COMP%]:active:after{width:100%;left:0;transform:translate(-50%);opacity:1;transition:0s}']}),r})()}];let b=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.Bz.forChild(P),l.Bz]}),r})(),g=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,i.u5,s.Pc,b]}),r})()},7556:(v,d,c)=>{c.d(d,{e:()=>b});var h=c(655),s=c(4004),i=c(262),l=c(5577),m=c(8996),t=c(9751),_=c(5698),p=c(9260),u=(c(3042),c(4650)),f=c(1762),C=c(1205),P=c(529);let b=(()=>{class g{constructor(o,n,a){this.afs=o,this.afAuth=n,this.http=a,this.url="http://webapps.pedromrtaguilera.tech:3000/auth",this.afAuth.authState.subscribe(e=>{e?(this.userData=e,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")||"{}")):(localStorage.setItem("user","{}"),JSON.parse(localStorage.getItem("user")||"{}"))})}postLogin(o,n){const a={email:o,pass:n};return console.log("LOG 1",a),this.http.post(`${this.url}/login`,a).pipe((0,s.U)(e=>{if(e&&e.token)return console.log("LOG 2",e),localStorage.setItem("token",e.token),e.token;throw console.log("LOG 3",e),new Error("Error en la solicitud")}),(0,i.K)(e=>{throw console.log("LOG 4"),new Error("Error en la solicitud")}))}postSignUp(o,n){return this.http.post(`${this.url}/signup`,{email:o,pass:n}).pipe((0,s.U)(e=>{if(e&&e.token)return localStorage.setItem("token",e.token),e.token;throw new Error("Error en la solicitud")}),(0,i.K)(e=>{throw new Error("Error en la solicitud")}))}doLogin(o){const{email:n,password:a}=o;return this.postLogin(n,a).pipe((0,l.z)(e=>(0,m.D)(p.Z.auth().signInWithEmailAndPassword(n,a)).pipe((0,l.z)(M=>(0,m.D)(Promise.resolve(e))),(0,i.K)(M=>{throw new Error("Error en la autenticaci\xf3n de Firebase")}))),(0,i.K)(e=>{throw new Error("Error en la autenticaci\xf3n de MongoDB")}))}doLogout(){return new Promise((o,n)=>{this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),o()}).catch(a=>{console.log(a),n()})})}doRegister(o){return new t.y(n=>{this.postSignUp(o.email,o.password).subscribe(a=>{localStorage.setItem("token",a),this.afAuth.createUserWithEmailAndPassword(o.email,o.password).then(e=>{n.next(e),n.complete()}).catch(e=>{n.error(e)})},a=>{n.error(a)})})}isAuthenticated(){return this.afAuth.authState}getUserId(){return(0,h.mG)(this,void 0,void 0,function*(){const o=yield this.afAuth.authState.pipe((0,_.q)(1)).toPromise();return console.log("respues getId",o),o?o.uid:null})}}return g.\u0275fac=function(o){return new(o||g)(u.LFG(f.ST),u.LFG(C.zQ),u.LFG(P.eN))},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);