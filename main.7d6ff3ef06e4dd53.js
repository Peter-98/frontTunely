(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(yn,Et,V)=>{"use strict";V.d(Et,{nm:()=>Ze});var u=V(8623);V(4650),V(259);var pt=V(5861),et=V(2951),He=V(4859),z=V(2090),Pe=V(1877);const Te=new Map,Se={activated:!1,tokenObservers:[]},it={initialized:!1,enabled:!1};function qe(ht){return Te.get(ht)||Object.assign({},Se)}function tt(){return it}const ze="https://content-firebaseappcheck.googleapis.com/v1",we="exchangeDebugToken",Ae={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class at{constructor(Xe,wt,Gt,an,Fn){if(this.operation=Xe,this.retryPolicy=wt,this.getWaitDuration=Gt,this.lowerBound=an,this.upperBound=Fn,this.pending=null,this.nextErrorWaitInterval=an,an>Fn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Xe){var wt=this;return(0,pt.Z)(function*(){wt.stop();try{wt.pending=new z.BH,yield function Ye(ht){return new Promise(Xe=>{setTimeout(Xe,ht)})}(wt.getNextRun(Xe)),wt.pending.resolve(),yield wt.pending.promise,wt.pending=new z.BH,yield wt.operation(),wt.pending.resolve(),yield wt.pending.promise,wt.process(!0).catch(()=>{})}catch(Gt){wt.retryPolicy(Gt)?wt.process(!1).catch(()=>{}):wt.stop()}})()}getNextRun(Xe){if(Xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const wt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),wt}}}const Ue=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gn(ht,Xe){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,pt.Z)(function*({url:ht,body:Xe},wt){const Gt={"Content-Type":"application/json"},an=wt.getImmediate({optional:!0});if(an){const Fi=yield an.getHeartbeatsHeader();Fi&&(Gt["X-Firebase-Client"]=Fi)}const Fn={method:"POST",body:JSON.stringify(Xe),headers:Gt};let Lr,Xn;try{Lr=yield fetch(ht,Fn)}catch(Fi){throw Ue.create("fetch-network-error",{originalErrorMessage:null==Fi?void 0:Fi.message})}if(200!==Lr.status)throw Ue.create("fetch-status-error",{httpStatus:Lr.status});try{Xn=yield Lr.json()}catch(Fi){throw Ue.create("fetch-parse-error",{originalErrorMessage:null==Fi?void 0:Fi.message})}const Rr=Xn.ttl.match(/^([\d.]+)(s)$/);if(!Rr||!Rr[2]||isNaN(Number(Rr[1])))throw Ue.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Xn.ttl}`});const Bs=1e3*Number(Rr[1]),qs=Date.now();return{token:Xn.token,expireTimeMillis:qs+Bs,issuedAtTimeMillis:qs}})).apply(this,arguments)}const hr="firebase-app-check-database",Pr=1,yr="firebase-app-check-store";let vr=null;function dr(ht,Xe){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,pt.Z)(function*(ht,Xe){const Gt=(yield function nn(){return vr||(vr=new Promise((ht,Xe)=>{try{const wt=indexedDB.open(hr,Pr);wt.onsuccess=Gt=>{ht(Gt.target.result)},wt.onerror=Gt=>{var an;Xe(Ue.create("storage-open",{originalErrorMessage:null===(an=Gt.target.error)||void 0===an?void 0:an.message}))},wt.onupgradeneeded=Gt=>{0===Gt.oldVersion&&Gt.target.result.createObjectStore(yr,{keyPath:"compositeKey"})}}catch(wt){Xe(Ue.create("storage-open",{originalErrorMessage:null==wt?void 0:wt.message}))}}),vr)}()).transaction(yr,"readwrite"),Fn=Gt.objectStore(yr).put({compositeKey:ht,value:Xe});return new Promise((Lr,Xn)=>{Fn.onsuccess=Rr=>{Lr()},Gt.onerror=Rr=>{var Bs;Xn(Ue.create("storage-set",{originalErrorMessage:null===(Bs=Rr.target.error)||void 0===Bs?void 0:Bs.message}))}})})).apply(this,arguments)}const Vr=new Pe.Yd("@firebase/app-check");function ei(ht,Xe){return(0,z.hl)()?function oi(ht,Xe){return dr(function Vn(ht){return`${ht.options.appId}-${ht.name}`}(ht),Xe)}(ht,Xe).catch(wt=>{Vr.warn(`Failed to write token to IndexedDB. Error: ${wt}`)}):Promise.resolve()}function or(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,pt.Z)(function*(){const ht=tt();if(ht.enabled&&ht.token)return ht.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Tr={error:"UNKNOWN_ERROR"};function Or(ht){return z.US.encodeString(JSON.stringify(ht),!1)}function kt(ht){return Be.apply(this,arguments)}function Be(){return(Be=(0,pt.Z)(function*(ht,Xe=!1){const wt=ht.app;!function Wt(ht){if(!qe(ht).activated)throw Ue.create("use-before-activation",{appName:ht.name})}(wt);const Gt=qe(wt);let Fn,an=Gt.token;if(an&&!dt(an)&&(Gt.token=void 0,an=void 0),!an){const Rr=yield Gt.cachedTokenPromise;Rr&&(dt(Rr)?an=Rr:yield ei(wt,void 0))}if(!Xe&&an&&dt(an))return{token:an.token};let Xn,Lr=!1;if(function Di(){return tt().enabled}()){Gt.exchangeTokenPromise||(Gt.exchangeTokenPromise=Gn(function dn(ht,Xe){const{projectId:wt,appId:Gt,apiKey:an}=ht.options;return{url:`${ze}/projects/${wt}/apps/${Gt}:${we}?key=${an}`,body:{debug_token:Xe}}}(wt,yield or()),ht.heartbeatServiceProvider).finally(()=>{Gt.exchangeTokenPromise=void 0}),Lr=!0);const Rr=yield Gt.exchangeTokenPromise;return yield ei(wt,Rr),Gt.token=Rr,{token:Rr.token}}try{Gt.exchangeTokenPromise||(Gt.exchangeTokenPromise=Gt.provider.getToken().finally(()=>{Gt.exchangeTokenPromise=void 0}),Lr=!0),an=yield qe(wt).exchangeTokenPromise}catch(Rr){"appCheck/throttled"===Rr.code?Vr.warn(Rr.message):Vr.error(Rr),Fn=Rr}return an?Fn?Xn=dt(an)?{token:an.token,internalError:Fn}:un(Fn):(Xn={token:an.token},Gt.token=an,yield ei(wt,an)):Xn=un(Fn),Lr&&function It(ht,Xe){const wt=qe(ht).tokenObservers;for(const Gt of wt)try{"EXTERNAL"===Gt.type&&null!=Xe.error?Gt.error(Xe.error):Gt.next(Xe)}catch(an){}}(wt,Xn),Xn})).apply(this,arguments)}function ge(ht,Xe){const wt=qe(ht),Gt=wt.tokenObservers.filter(an=>an.next!==Xe);0===Gt.length&&wt.tokenRefresher&&wt.tokenRefresher.isRunning()&&wt.tokenRefresher.stop(),wt.tokenObservers=Gt}function fe(ht){const{app:Xe}=ht,wt=qe(Xe);let Gt=wt.tokenRefresher;Gt||(Gt=function $e(ht){const{app:Xe}=ht;return new at((0,pt.Z)(function*(){let Gt;if(Gt=qe(Xe).token?yield kt(ht,!0):yield kt(ht),Gt.error)throw Gt.error;if(Gt.internalError)throw Gt.internalError}),()=>!0,()=>{const wt=qe(Xe);if(wt.token){let Gt=wt.token.issuedAtTimeMillis+.5*(wt.token.expireTimeMillis-wt.token.issuedAtTimeMillis)+3e5;return Gt=Math.min(Gt,wt.token.expireTimeMillis-3e5),Math.max(0,Gt-Date.now())}return 0},Ae.RETRIAL_MIN_WAIT,Ae.RETRIAL_MAX_WAIT)}(ht),wt.tokenRefresher=Gt),!Gt.isRunning()&&wt.isTokenAutoRefreshEnabled&&Gt.start()}function dt(ht){return ht.expireTimeMillis-Date.now()>0}function un(ht){return{token:Or(Tr),error:ht}}class Fe{constructor(Xe,wt){this.app=Xe,this.heartbeatServiceProvider=wt}_delete(){const{tokenObservers:Xe}=qe(this.app);for(const wt of Xe)ge(this.app,wt.next);return Promise.resolve()}}const Ir="app-check-internal";!function Zi(){(0,et._registerComponent)(new He.wA("app-check",ht=>function Me(ht,Xe){return new Fe(ht,Xe)}(ht.getProvider("app").getImmediate(),ht.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ht,Xe,wt)=>{ht.getProvider(Ir).initialize()})),(0,et._registerComponent)(new He.wA(Ir,ht=>function de(ht){return{getToken:Xe=>kt(ht,Xe),addTokenListener:Xe=>function $t(ht,Xe,wt,Gt){const{app:an}=ht,Fn=qe(an);if(Fn.tokenObservers=[...Fn.tokenObservers,{next:wt,error:Gt,type:Xe}],Fn.token&&dt(Fn.token)){const Xn=Fn.token;Promise.resolve().then(()=>{wt({token:Xn.token}),fe(ht)}).catch(()=>{})}Fn.cachedTokenPromise.then(()=>fe(ht))}(ht,"INTERNAL",Xe),removeTokenListener:Xe=>ge(ht.app,Xe)}}(ht.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.7.0")}();class Ze{constructor(){return(0,u.vb)("app-check")}}typeof window<"u"&&window},1205:(yn,Et,V)=>{"use strict";V.d(Et,{zQ:()=>ze,ww:()=>_t,rT:()=>it,f7:()=>nt,L6:()=>Te,_Q:()=>Se,lh:()=>qe,Qv:()=>Pe,nw:()=>tt});var u=V(4650),Q=V(7579),W=V(9646),xe=V(9751),Oe=V(8996),ke=V(6451),ve=V(5363),Ne=V(3900),je=V(4004),me=V(6063);class ce extends Q.x{constructor(we=1/0,Ae=1/0,Ie=me.l){super(),this._bufferSize=we,this._windowTime=Ae,this._timestampProvider=Ie,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,we),this._windowTime=Math.max(1,Ae)}next(we){const{isStopped:Ae,_buffer:Ie,_infiniteTimeWindow:at,_timestampProvider:Ye,_windowTime:Ke}=this;Ae||(Ie.push(we),!at&&Ie.push(Ye.now()+Ke)),this._trimBuffer(),super.next(we)}_subscribe(we){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe(we),{_infiniteTimeWindow:Ie,_buffer:at}=this,Ye=at.slice();for(let Ke=0;Ke<Ye.length&&!we.closed;Ke+=Ie?1:2)we.next(Ye[Ke]);return this._checkFinalizedStatuses(we),Ae}_trimBuffer(){const{_bufferSize:we,_timestampProvider:Ae,_buffer:Ie,_infiniteTimeWindow:at}=this,Ye=(at?1:2)*we;if(we<1/0&&Ye<Ie.length&&Ie.splice(0,Ie.length-Ye),!at){const Ke=Ae.now();let Ue=0;for(let Bt=1;Bt<Ie.length&&Ie[Bt]<=Ke;Bt+=2)Ue=Bt;Ue&&Ie.splice(0,Ue+1)}}}var he=V(3099);function Re(ct,we,Ae){let Ie,at=!1;return ct&&"object"==typeof ct?({bufferSize:Ie=1/0,windowTime:we=1/0,refCount:at=!1,scheduler:Ae}=ct):Ie=null!=ct?ct:1/0,(0,he.B)({connector:()=>new ce(Ie,we,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:at})}var Ve=V(590),lt=V(576);function At(ct,we){return(0,lt.m)(we)?(0,Ne.w)(()=>ct,we):(0,Ne.w)(()=>ct)}var De=V(9468),ye=V(9300),ue=V(8623),rt=V(2011),pt=V(6895),et=V(6217),He=V(9260);const Pe=new u.OlP("angularfire2.auth.use-emulator"),Te=new u.OlP("angularfire2.auth.settings"),Se=new u.OlP("angularfire2.auth.tenant-id"),it=new u.OlP("angularfire2.auth.langugage-code"),qe=new u.OlP("angularfire2.auth.use-device-language"),nt=new u.OlP("angularfire.auth.persistence"),tt=(ct,we,Ae,Ie,at,Ye,Ke,Ue)=>(0,rt.cc)(`${ct.name}.auth`,"AngularFireAuth",ct.name,()=>{const Bt=we.runOutsideAngular(()=>ct.auth());if(Ae&&Bt.useEmulator(...Ae),Ie&&(Bt.tenantId=Ie),Bt.languageCode=at,Ye&&Bt.useDeviceLanguage(),Ke)for(const[Wt,Yt]of Object.entries(Ke))Bt.settings[Wt]=Yt;return Ue&&Bt.setPersistence(Ue),Bt},[Ae,Ie,at,Ye,Ke,Ue]);let ze=(()=>{class ct{constructor(Ae,Ie,at,Ye,Ke,Ue,Bt,Wt,Yt,Ct,Gn,Kn){const er=new Q.x,kn=(0,W.of)(void 0).pipe((0,ve.Q)(Ke.outsideAngular),(0,Ne.w)(()=>Ye.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3042)))),(0,je.U)(()=>(0,rt.on)(Ae,Ye,Ie)),(0,je.U)(dn=>tt(dn,Ye,Ue,Wt,Yt,Ct,Bt,Gn)),Re({bufferSize:1,refCount:!1}));if((0,pt.PM)(at))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,W.of)(null);else{kn.pipe((0,Ve.P)()).subscribe();const hr=kn.pipe((0,Ne.w)(Sn=>Sn.getRedirectResult().then(vr=>vr,()=>null)),ue.iC,Re({bufferSize:1,refCount:!1})),Pr=kn.pipe((0,Ne.w)(Sn=>new xe.y(vr=>({unsubscribe:Ye.runOutsideAngular(()=>Sn.onAuthStateChanged(nn=>vr.next(nn),nn=>vr.error(nn),()=>vr.complete()))})))),yr=kn.pipe((0,Ne.w)(Sn=>new xe.y(vr=>({unsubscribe:Ye.runOutsideAngular(()=>Sn.onIdTokenChanged(nn=>vr.next(nn),nn=>vr.error(nn),()=>vr.complete()))}))));this.authState=hr.pipe(At(Pr),(0,De.R)(Ke.outsideAngular),(0,ve.Q)(Ke.insideAngular)),this.user=hr.pipe(At(yr),(0,De.R)(Ke.outsideAngular),(0,ve.Q)(Ke.insideAngular)),this.idToken=this.user.pipe((0,Ne.w)(Sn=>Sn?(0,Oe.D)(Sn.getIdToken()):(0,W.of)(null))),this.idTokenResult=this.user.pipe((0,Ne.w)(Sn=>Sn?(0,Oe.D)(Sn.getIdTokenResult()):(0,W.of)(null))),this.credential=(0,ke.T)(hr,er,this.authState.pipe((0,ye.h)(Sn=>!Sn))).pipe((0,je.U)(Sn=>null!=Sn&&Sn.user?Sn:null),(0,De.R)(Ke.outsideAngular),(0,ve.Q)(Ke.insideAngular))}return(0,rt.pX)(this,kn,Ye,{spy:{apply:(dn,hr,Pr)=>{(dn.startsWith("signIn")||dn.startsWith("createUser"))&&Pr.then(yr=>er.next(yr))}}})}}return ct.\u0275fac=function(Ae){return new(Ae||ct)(u.LFG(rt.Dh),u.LFG(rt.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ue.HU),u.LFG(Pe,8),u.LFG(Te,8),u.LFG(Se,8),u.LFG(it,8),u.LFG(qe,8),u.LFG(nt,8),u.LFG(et.nm,8))},ct.\u0275prov=u.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"any"}),ct})(),_t=(()=>{class ct{constructor(){He.Z.registerVersion("angularfire",ue.q4.full,"auth-compat")}}return ct.\u0275fac=function(Ae){return new(Ae||ct)},ct.\u0275mod=u.oAB({type:ct}),ct.\u0275inj=u.cJS({providers:[ze]}),ct})()},1762:(yn,Et,V)=>{"use strict";V.d(Et,{ST:()=>Tp,yb:()=>d_});var u=V(4650),Q=V(4986),W=V(9751),xe=V(8996),Oe=V(9646),ke=V(8623),ve=V(8675),Ne=V(4482),je=V(5403);function me(){return(0,Ne.e)((r,e)=>{let t,s=!1;r.subscribe((0,je.x)(e,c=>{const g=t;t=c,s&&e.next([g,c]),s=!0}))})}var Te,ce=V(4004),he=V(5026),Re=V(1884),Ve=V(9300),lt=V(2011),At=V(6895),ye=(V(3042),V(3942)),ue=V(5861),rt=V(2951),pt=V(4859),et=V(1877),He=V(2090),z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pe={},Se=Se||{},it=z||self;function qe(){}function nt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function tt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var _t="closure_uid_"+(1e9*Math.random()>>>0),ct=0;function we(r,e,t){return r.call.apply(r.bind,arguments)}function Ae(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Ie(r,e,t){return(Ie=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?we:Ae).apply(null,arguments)}function at(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Ye(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,c,g){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[c].apply(s,w)}}function Ke(){this.s=this.s,this.o=this.o}Ke.prototype.s=!1,Ke.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function ze(r){Object.prototype.hasOwnProperty.call(r,_t)&&r[_t]||(r[_t]=++ct)}(this)},Ke.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bt=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Wt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function Yt(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(nt(s)){const c=r.length||0,g=s.length||0;r.length=c+g;for(let w=0;w<g;w++)r[c+w]=s[w]}else r.push(s)}}function Ct(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var Gn=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{it.addEventListener("test",qe,e),it.removeEventListener("test",qe,e)}catch(t){}return r}();function Kn(r){return/^[\s\xa0]*$/.test(r)}var er=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function kn(r,e){return r<e?-1:r>e?1:0}function dn(){var r=it.navigator;return r&&(r=r.userAgent)?r:""}function hr(r){return-1!=dn().indexOf(r)}function Pr(r){return Pr[" "](r),r}function yr(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}Pr[" "]=qe;var dr,r,Sn=hr("Opera"),vr=hr("Trident")||hr("MSIE"),nn=hr("Edge"),ci=nn||vr,oi=hr("Gecko")&&!(-1!=dn().toLowerCase().indexOf("webkit")&&!hr("Edge"))&&!(hr("Trident")||hr("MSIE"))&&!hr("Edge"),Nr=-1!=dn().toLowerCase().indexOf("webkit")&&!hr("Edge");function Ai(){var r=it.document;return r?r.documentMode:void 0}e:{var Rn="",mn=(r=dn(),oi?/rv:([^\);]+)(\)|;)/.exec(r):nn?/Edge\/([\d\.]+)/.exec(r):vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Nr?/WebKit\/(\S+)/.exec(r):Sn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(mn&&(Rn=mn?mn[1]:""),vr){var cn=Ai();if(null!=cn&&cn>parseFloat(Rn)){dr=String(cn);break e}}dr=Rn}var Vn={},ei=it.document&&vr&&(Ai()||parseInt(dr,10))||void 0;function ii(r,e){if(Ct.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(oi){e:{try{Pr(e.nodeName);var c=!0;break e}catch(g){}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Fr[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&ii.$.h.call(this)}}Ye(ii,Ct);var Fr={2:"touch",3:"pen",4:"mouse"};ii.prototype.h=function(){ii.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Di="closure_listenable_"+(1e6*Math.random()|0),or=0;function Yn(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=c,this.key=++or,this.fa=this.ia=!1}function ai(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Tr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Or(r){const e={};for(const t in r)e[t]=r[t];return e}const kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let g=0;g<kt.length;g++)t=kt[g],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Ge(r){this.src=r,this.g={},this.h=0}function jt(r,e){var t=e.type;if(t in r.g){var g,s=r.g[t],c=Bt(s,e);(g=0<=c)&&Array.prototype.splice.call(s,c,1),g&&(ai(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function $t(r,e,t,s){for(var c=0;c<r.length;++c){var g=r[c];if(!g.fa&&g.listener==e&&g.capture==!!t&&g.la==s)return c}return-1}Ge.prototype.add=function(r,e,t,s,c){var g=r.toString();(r=this.g[g])||(r=this.g[g]=[],this.h++);var w=$t(r,e,s,c);return-1<w?(e=r[w],t||(e.ia=!1)):((e=new Yn(e,this.src,g,!!s,c)).ia=t,r.push(e)),e};var ge="closure_lm_"+(1e6*Math.random()|0),fe={};function $e(r,e,t,s,c){if(s&&s.once)return un(r,e,t,s,c);if(Array.isArray(e)){for(var g=0;g<e.length;g++)$e(r,e[g],t,s,c);return null}return t=vn(t),r&&r[Di]?r.O(e,t,tt(s)?!!s.capture:!!s,c):It(r,e,t,!1,s,c)}function It(r,e,t,s,c,g){if(!e)throw Error("Invalid event type");var w=tt(c)?!!c.capture:!!c,O=Mt(r);if(O||(r[ge]=O=new Ge(r)),(t=O.add(e,t,s,w,g)).proxy)return t;if(s=function dt(){const e=ut;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Gn||(c=w),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(de(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function un(r,e,t,s,c){if(Array.isArray(e)){for(var g=0;g<e.length;g++)un(r,e[g],t,s,c);return null}return t=vn(t),r&&r[Di]?r.P(e,t,tt(s)?!!s.capture:!!s,c):It(r,e,t,!0,s,c)}function Fe(r,e,t,s,c){if(Array.isArray(e))for(var g=0;g<e.length;g++)Fe(r,e[g],t,s,c);else s=tt(s)?!!s.capture:!!s,t=vn(t),r&&r[Di]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=$t(g=r.g[e],t,s,c))&&(ai(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete r.g[e],r.h--))):r&&(r=Mt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=$t(e,t,s,c)),(t=-1<r?e[r]:null)&&Me(t))}function Me(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[Di])jt(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(de(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Mt(e))?(jt(t,r),0==t.h&&(t.src=null,e[ge]=null)):ai(r)}}}function de(r){return r in fe?fe[r]:fe[r]="on"+r}function ut(r,e){if(r.fa)r=!0;else{e=new ii(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Me(r),r=t.call(s,e)}return r}function Mt(r){return(r=r[ge])instanceof Ge?r:null}var Xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(r){return"function"==typeof r?r:(r[Xt]||(r[Xt]=function(e){return r.handleEvent(e)}),r[Xt])}function Nn(){Ke.call(this),this.i=new Ge(this),this.S=this,this.J=null}function rr(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Ct(e,r);else if(e instanceof Ct)e.target=e.target||r;else{var c=e;Be(e=new Ct(s,r),c)}if(c=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];c=di(w,s,!0,e)&&c}if(c=di(w=e.g=r,s,!0,e)&&c,c=di(w,s,!1,e)&&c,t)for(g=0;g<t.length;g++)c=di(w=e.g=t[g],s,!1,e)&&c}function di(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.fa&&w.capture==t){var O=w.listener,H=w.la||w.src;w.ia&&jt(r.i,w),c=!1!==O.call(H,s)&&c}}return c&&!s.defaultPrevented}Ye(Nn,Ke),Nn.prototype[Di]=!0,Nn.prototype.removeEventListener=function(r,e,t,s){Fe(this,r,e,t,s)},Nn.prototype.N=function(){if(Nn.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)ai(t[s]);delete r.g[e],r.h--}}this.J=null},Nn.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Nn.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Rt=it.JSON.stringify;function bt(){var r=jr;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var $n,An=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new jn,r=>r.reset());class jn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lr(r){it.setTimeout(()=>{throw r},0)}function Er(r,e){$n||function pr(){var r=it.Promise.resolve(void 0);$n=function(){r.then(Xr)}}(),mr||($n(),mr=!0),jr.add(r,e)}var mr=!1,jr=new class Kt{constructor(){this.h=this.g=null}add(e,t){const s=An.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Xr(){for(var r;r=bt();){try{r.h.call(r.g)}catch(t){lr(t)}var e=An;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}mr=!1}function Ni(r,e){Nn.call(this),this.h=r||1,this.g=e||it,this.j=Ie(this.qb,this),this.l=Date.now()}function gs(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function ss(r,e,t){if("function"==typeof r)t&&(r=Ie(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Ie(r.handleEvent,r)}return 2147483647<Number(e)?-1:it.setTimeout(r,e||0)}function Wr(r){r.g=ss(()=>{r.g=null,r.i&&(r.i=!1,Wr(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Ye(Ni,Nn),(Te=Ni.prototype).ga=!1,Te.T=null,Te.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rr(this,"tick"),this.ga&&(gs(this),this.start()))}},Te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Te.N=function(){Ni.$.N.call(this),gs(this),delete this.g};class pn extends Ke{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(r){Ke.call(this),this.h=r,this.g={}}Ye(nr,Ke);var li=[];function Ir(r,e,t,s){Array.isArray(t)||(t&&(li[0]=t.toString()),t=li);for(var c=0;c<t.length;c++){var g=$e(e,t[c],s||r.handleEvent,!1,r.h||r);if(!g)break;r.g[g.key]=g}}function Zi(r){Tr(r.g,function(e,t){this.g.hasOwnProperty(t)&&Me(e)},r),r.g={}}function te(){this.g=!0}function ft(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ae(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var g=c[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<c.length;w++)c[w]=""}}}return Rt(t)}catch(O){return e}}(r,t)+(s?" "+s:"")})}nr.prototype.N=function(){nr.$.N.call(this),Zi(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.Ea=function(){this.g=!1},te.prototype.info=function(){};var Je={},vt=null;function Ft(){return vt=vt||new Nn}function Vt(r){Ct.call(this,Je.Ta,r)}function sn(r){const e=Ft();rr(e,new Vt(e))}function Pn(r,e){Ct.call(this,Je.STAT_EVENT,r),this.stat=e}function bn(r){const e=Ft();rr(e,new Pn(e,r))}function xr(r,e){Ct.call(this,Je.Ua,r),this.size=e}function zr(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){r()},e)}Je.Ta="serverreachability",Ye(Vt,Ct),Je.STAT_EVENT="statevent",Ye(Pn,Ct),Je.Ua="timingevent",Ye(xr,Ct);var xi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ar={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ws(){}function Xe(){}Ws.prototype.h=null;var Fn,wt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gt(){Ct.call(this,"d")}function an(){Ct.call(this,"c")}function Lr(){}function Xn(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new nr(this),this.P=Bs,this.V=new Ni(r=ci?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}Ye(Gt,Ct),Ye(an,Ct),Ye(Lr,Ws),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Fn=new Lr;var Bs=45e3,qs={},Fi={};function Xi(r,e,t){r.L=1,r.v=ns(Bi(e)),r.s=t,r.S=!0,os(r,null)}function os(r,e){r.G=Date.now(),oo(r),r.A=Bi(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Zs(t.i,"t",s),r.C=0,t=r.l.I,r.h=new Rr,r.g=Jo(r.l,t?e:null,!r.s),0<r.O&&(r.M=new pn(Ie(r.Pa,r,r.g),r.O)),Ir(r.U,r.g,"readystatechange",r.nb),e=r.I?Or(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),sn(),function pe(r,e,t,s,c,g){r.info(function(){if(r.g)if(g)for(var w="",O=g.split("&"),H=0;H<O.length;H++){var Z=O[H].split("=");if(1<Z.length){var oe=Z[0];Z=Z[1];var We=oe.split("_");w=2<=We.length&&"type"==We[1]?w+(oe+"=")+Z+"&":w+(oe+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+w})}(r.j,r.u,r.A,r.m,r.W,r.s)}function ko(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Ko(r,e,t){let c,s=!0;for(;!r.J&&r.C<t.length;){if(c=Li(r,t),c==Fi){4==e&&(r.o=4,bn(14),s=!1),ft(r.j,r.m,null,"[Incomplete Response]");break}if(c==qs){r.o=4,bn(15),ft(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}ft(r.j,r.m,c,null),Ks(r,c)}ko(r)&&c!=Fi&&c!=qs&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,bn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),pl(e),e.L=!0,bn(11))):(ft(r.j,r.m,t,"[Invalid Chunked Response]"),Cs(r),Io(r))}function Li(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Fi:(t=Number(e.substring(t,s)),isNaN(t)?qs:(s+=1)+t>e.length?Fi:(e=e.substr(s,t),r.C=s+t,e))}function oo(r){r.Y=Date.now()+r.P,Eo(r,r.P)}function Eo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=zr(Ie(r.lb,r),e)}function Yo(r){r.B&&(it.clearTimeout(r.B),r.B=null)}function Io(r){0==r.l.H||r.J||da(r.l,r)}function Cs(r){Yo(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,gs(r.V),Zi(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function Ks(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||$i(t.h,r)))if(!r.K&&$i(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch(Z){s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Bo(t),Qs(t)}go(t),bn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=zr(Ie(t.ib,t),6e3));if(1>=ho(t.h)&&t.na){try{t.na()}catch(Z){}t.na=void 0}}else ha(t,11)}else if((r.K||t.g==r)&&Bo(t),!Kn(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let Z=c[e];if(t.V=Z[0],Z=Z[1],2==t.H)if("c"==Z[0]){t.J=Z[1],t.oa=Z[2];const oe=Z[3];null!=oe&&(t.qa=oe,t.j.info("VER="+t.qa));const We=Z[4];null!=We&&(t.Ga=We,t.j.info("SVER="+t.Ga));const Tt=Z[5];null!=Tt&&"number"==typeof Tt&&0<Tt&&(t.K=s=1.5*Tt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Qt=r.g;if(Qt){const Cn=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cn){var g=s.h;g.g||-1==Cn.indexOf("spdy")&&-1==Cn.indexOf("quic")&&-1==Cn.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(as(g,g.h),g.h=null))}if(s.F){const Tn=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Tn&&(s.Da=Tn,ui(s.G,s.F,Tn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var w=r;if((s=t).wa=$o(s,s.I?s.oa:null,s.Y),w.K){vs(s.h,w);var O=w,H=s.K;H&&O.setTimeout(H),O.B&&(Yo(O),oo(O)),s.g=w}else xa(s);0<t.i.length&&Ga(t)}else"stop"!=Z[0]&&"close"!=Z[0]||ha(t,7);else 3==t.H&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?ha(t,7):Do(t):"noop"!=Z[0]&&t.l&&t.l.Aa(Z),t.A=0)}sn()}catch(Z){}}function wo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(nt(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Ha(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(nt(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Ta(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(nt(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,g=0;g<c;g++)e.call(void 0,s[g],t&&t[g],r)}(Te=Xn.prototype).setTimeout=function(r){this.P=r},Te.nb=function(r){r=r.target;const e=this.M;e&&3==br(r)?e.l():this.Pa(r)},Te.Pa=function(r){try{if(r==this.g)e:{const oe=br(this.g);var e=this.g.Ia();if(this.g.da(),!(3>oe)&&(3!=oe||ci||this.g&&(this.h.h||this.g.ja()||cs(this.g)))){this.J||4!=oe||7==e||sn(),Yo(this);var t=this.g.da();this.aa=t;t:if(ko(this)){var s=cs(this.g);r="";var c=s.length,g=4==br(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),Io(this);var w="";break t}this.h.i=new it.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:g&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,w=this.h.g}else w=this.g.ja();if(this.i=200==t,function Ze(r,e,t,s,c,g,w){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.W,oe,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var O,H=this.g;if((O=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kn(O)){var Z=O;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,bn(12),Cs(this),Io(this);break e}ft(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ks(this,t)}this.S?(Ko(this,oe,w),ci&&this.i&&3==oe&&(Ir(this.U,this.V,"tick",this.mb),this.V.start())):(ft(this.j,this.m,w,null),Ks(this,w)),4==oe&&Cs(this),this.i&&!this.J&&(4==oe?da(this.l,this):(this.i=!1,oo(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,bn(12)):(this.o=0,bn(13)),Cs(this),Io(this)}}}catch(oe){}},Te.mb=function(){if(this.g){var r=br(this.g),e=this.g.ja();this.C<e.length&&(Yo(this),Ko(this,r,e),this.i&&4!=r&&oo(this))}},Te.cancel=function(){this.J=!0,Cs(this)},Te.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Nt(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(sn(),bn(17)),Cs(this),this.o=2,Io(this)):Eo(this,this.Y-r)};var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $s(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof $s){this.h=void 0!==e?e:r.h,aa(this,r.j),this.s=r.s,this.g=r.g,ao(this,r.m),this.l=r.l,e=r.i;var t=new Ds;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ms(this,t),this.o=r.o}else r&&(t=String(r).match(Qi))?(this.h=!!e,aa(this,t[1]||"",!0),this.s=lo(t[2]||""),this.g=lo(t[3]||"",!0),ao(this,t[4]),this.l=lo(t[5]||"",!0),ms(this,t[6]||"",!0),this.o=lo(t[7]||"")):(this.h=!!e,this.i=new Ds(null,this.h))}function Bi(r){return new $s(r)}function aa(r,e,t){r.j=t?lo(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function ao(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function ms(r,e,t){e instanceof Ds?(r.i=e,function Zo(r,e){e&&!r.j&&(co(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(yi(this,s),Zs(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Os(e,Ys)),r.i=new Ds(e,r.h))}function ui(r,e,t){r.i.set(e,t)}function ns(r){return ui(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function lo(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Os(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,uo),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function uo(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}$s.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Os(e,la,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Os(e,la,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Os(t,"/"==t.charAt(0)?No:bs,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Os(t,Aa)),r.join("")};var la=/[#\/\?@]/g,bs=/[#\?:]/g,No=/[#\?]/g,Ys=/[#\?@]/g,Aa=/#/g;function Ds(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function co(r){r.g||(r.g=new Map,r.h=0,r.i&&function Sa(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var g=r[t].substring(0,s);c=r[t].substring(s+1)}else g=r[t];e(g,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yi(r,e){co(r),e=Ei(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Ts(r,e){return co(r),e=Ei(r,e),r.g.has(e)}function Zs(r,e,t){yi(r,e),0<t.length&&(r.i=null,r.g.set(Ei(r,e),Wt(t)),r.h+=t.length)}function Ei(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Mi(r){this.l=r||fl,r=it.PerformanceNavigationTiming?0<(r=it.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(it.g&&it.g.Ka&&it.g.Ka()&&it.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Te=Ds.prototype).add=function(r,e){co(this),this.i=null,r=Ei(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Te.forEach=function(r,e){co(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},Te.sa=function(){co(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let g=0;g<c.length;g++)t.push(e[s])}return t},Te.Z=function(r){co(this);let e=[];if("string"==typeof r)Ts(this,r)&&(e=e.concat(this.g.get(Ei(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Te.set=function(r,e){return co(this),this.i=null,Ts(this,r=Ei(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Te.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const g=encodeURIComponent(String(s)),w=this.Z(s);for(s=0;s<w.length;s++){var c=g;""!==w[s]&&(c+="="+encodeURIComponent(String(w[s]))),r.push(c)}}return this.i=r.join("&")};var fl=10;function ys(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ho(r){return r.h?1:r.g?r.g.size:0}function $i(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function as(r,e){r.g?r.g.add(e):r.h=e}function vs(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Fo(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Wt(r.i)}function ls(){}function ua(){this.g=new ls}function Lo(r,e,t){const s=t||"";try{wo(r,function(c,g){let w=c;tt(c)&&(w=Rt(c)),e.push(s+g+"="+encodeURIComponent(w))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function Co(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch(g){}}function ca(r){this.l=r.fc||null,this.j=r.ob||!1}function us(r,e){Nn.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mi.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},ls.prototype.stringify=function(r){return it.JSON.stringify(r,void 0)},ls.prototype.parse=function(r){return it.JSON.parse(r,void 0)},Ye(ca,Ws),ca.prototype.g=function(){return new us(this.l,this.j)},ca.prototype.i=function(r){return function(){return r}}({}),Ye(us,Nn);var fo=0;function nl(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function ji(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Us(r)}function Us(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Te=us.prototype).open=function(r,e){if(this.readyState!=fo)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Us(this)},Te.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||it).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ji(this)),this.readyState=fo},Te.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nl(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Te.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?ji(this):Us(this),3==this.readyState&&nl(this)}},Te.Za=function(r){this.g&&(this.response=this.responseText=r,ji(this))},Te.Ya=function(r){this.g&&(this.response=r,ji(this))},Te.ka=function(){this.g&&ji(this)},Te.setRequestHeader=function(r,e){this.v.append(r,e)},Te.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Te.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(us.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var y=it.JSON.parse;function I(r){Nn.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=f,this.L=this.M=!1}Ye(I,Nn);var f="",T=/^https?$/i,q=["POST","PUT"];function tn(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,gn(r),Sr(r)}function gn(r){r.F||(r.F=!0,rr(r,"complete"),rr(r,"error"))}function qn(r){if(r.h&&typeof Se<"u"&&(!r.C[1]||4!=br(r)||2!=r.da()))if(r.v&&4==br(r))ss(r.La,0,r);else if(rr(r,"readystatechange"),4==br(r)){r.h=!1;try{const O=r.da();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===O){var c=String(r.I).match(Qi)[1]||null;if(!c&&it.self&&it.self.location){var g=it.self.location.protocol;c=g.substr(0,g.length-1)}s=!T.test(c?c.toLowerCase():"")}t=s}if(t)rr(r,"complete"),rr(r,"success");else{r.m=6;try{var w=2<br(r)?r.g.statusText:""}catch(H){w=""}r.j=w+" ["+r.da()+"]",gn(r)}}finally{Sr(r)}}}function Sr(r,e){if(r.g){hi(r);const t=r.g,s=r.C[0]?qe:null;r.g=null,r.C=null,e||rr(r,"ready");try{t.onreadystatechange=s}catch(c){}}}function hi(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(it.clearTimeout(r.A),r.A=null)}function br(r){return r.g?r.g.readyState:0}function cs(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case f:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _s(r){let e="";return Tr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ii(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=_s(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ui(r,e,t))}function Ui(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function bo(r){this.Ga=0,this.i=[],this.j=new te,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ui("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ui("baseRetryDelayMs",5e3,r),this.hb=Ui("retryDelaySeedMs",1e4,r),this.eb=Ui("forwardChannelMaxRetries",2,r),this.xa=Ui("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new Mi(r&&r.concurrentRequestLimit),this.Ja=new ua,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Do(r){if(za(r),3==r.H){var e=r.W++,t=Bi(r.G);ui(t,"SID",r.J),ui(t,"RID",e),ui(t,"TYPE","terminate"),po(r,t),(e=new Xn(r,r.j,e,void 0)).L=2,e.v=ns(Bi(t)),t=!1,it.navigator&&it.navigator.sendBeacon&&(t=it.navigator.sendBeacon(e.v.toString(),"")),!t&&it.Image&&((new Image).src=e.v,t=!0),t||(e.g=Jo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),oo(e)}Hi(r)}function Qs(r){r.g&&(pl(r),r.g.cancel(),r.g=null)}function za(r){Qs(r),r.u&&(it.clearTimeout(r.u),r.u=null),Bo(r),r.h.cancel(),r.m&&("number"==typeof r.m&&it.clearTimeout(r.m),r.m=null)}function Ga(r){ys(r.h)||r.m||(r.m=!0,Er(r.Na,r),r.C=0)}function gu(r,e){var t;t=e?e.m:r.W++;const s=Bi(r.G);ui(s,"SID",r.J),ui(s,"RID",t),ui(s,"AID",r.V),po(r,s),r.o&&r.s&&Ii(s,r.o,r.s),t=new Xn(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=Xo(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),as(r.h,t),Xi(t,s,e)}function po(r,e){r.ma&&Tr(r.ma,function(t,s){ui(e,s,t)}),r.l&&wo({},function(t,s){ui(e,s,t)})}function Xo(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Ie(r.l.Va,r.l,r):null;e:{var c=r.i;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=c[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let O=!0;for(let H=0;H<t;H++){let Z=c[H].h;const oe=c[H].g;if(Z-=g,0>Z)g=Math.max(0,c[H].h-100),O=!1;else try{Lo(oe,w,"req"+Z+"_")}catch(We){s&&s(oe)}}if(O){s=w.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function xa(r){r.g||r.u||(r.ba=1,Er(r.Ma,r),r.A=0)}function go(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=zr(Ie(r.Ma,r),Qo(r,r.A)),r.A++,0))}function pl(r){null!=r.B&&(it.clearTimeout(r.B),r.B=null)}function gl(r){r.g=new Xn(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Bi(r.wa);ui(e,"RID","rpc"),ui(e,"SID",r.J),ui(e,"CI",r.M?"0":"1"),ui(e,"AID",r.V),ui(e,"TYPE","xmlhttp"),po(r,e),r.o&&r.s&&Ii(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ns(Bi(e)),t.s=null,t.S=!0,os(t,r)}function Bo(r){null!=r.v&&(it.clearTimeout(r.v),r.v=null)}function da(r,e){var t=null;if(r.g==e){Bo(r),pl(r),r.g=null;var s=2}else{if(!$i(r.h,e))return;t=e.F,vs(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;rr(s=Ft(),new xr(s,t)),Ga(r)}else xa(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==s&&function pu(r,e){return!(ho(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=zr(Ie(r.Na,r,e),Qo(r,r.C)),r.C++,0)))}(r,e)||2==s&&go(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:ha(r,5);break;case 4:ha(r,10);break;case 3:ha(r,6);break;default:ha(r,2)}}function Qo(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function ha(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Ie(r.pb,r);t||(t=new $s("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||aa(t,"https"),ns(t)),function ur(r,e){const t=new te;if(it.Image){const s=new Image;s.onload=at(Co,t,s,"TestLoadImage: loaded",!0,e),s.onerror=at(Co,t,s,"TestLoadImage: error",!1,e),s.onabort=at(Co,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=at(Co,t,s,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else bn(2);r.H=0,r.l&&r.l.za(e),Hi(r),za(r)}function Hi(r){if(r.H=0,r.pa=[],r.l){const e=Fo(r.h);(0!=e.length||0!=r.i.length)&&(Yt(r.pa,e),Yt(r.pa,r.i),r.h.i.length=0,Wt(r.i),r.i.length=0),r.l.ya()}}function $o(r,e,t){var s=t instanceof $s?Bi(t):new $s(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),ao(s,s.m);else{var c=it.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var g=new $s(null,void 0);s&&aa(g,s),e&&(g.g=e),c&&ao(g,c),t&&(g.l=t),s=g}return e=r.Da,(t=r.F)&&e&&ui(s,t,e),ui(s,"VER",r.qa),po(r,s),s}function Jo(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new I(t&&r.Ha&&!r.va?new ca({ob:!0}):r.va)).Oa(r.I),e}function mo(){}function qr(){if(vr&&!(10<=Number(ei)))throw Error("Environmental error: no available transport.")}function rs(r,e){Nn.call(this),this.g=new bo(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Kn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Ss(this)}function wi(r){Gt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ju(){an.call(this),this.status=1}function Ss(r){this.g=r}function As(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Al(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)s[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var g=r.g[3],w=(e=r.g[0])+(g^(t=r.g[1])&((c=r.g[2])^g))+s[0]+3614090360&4294967295;w=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=(t=(c=(g=(e=t+(w<<7&4294967295|w>>>25))+((w=g+(c^e&(t^c))+s[1]+3905402710&4294967295)<<12&4294967295|w>>>20))+((w=c+(t^g&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^c&(g^e))+s[3]+3250441966&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(c^g))+s[4]+4118548399&4294967295)<<7&4294967295|w>>>25))+((w=g+(c^e&(t^c))+s[5]+1200080426&4294967295)<<12&4294967295|w>>>20))+((w=c+(t^g&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^c&(g^e))+s[7]+4249261313&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(c^g))+s[8]+1770035416&4294967295)<<7&4294967295|w>>>25))+((w=g+(c^e&(t^c))+s[9]+2336552879&4294967295)<<12&4294967295|w>>>20))+((w=c+(t^g&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^c&(g^e))+s[11]+2304563134&4294967295)<<22&4294967295|w>>>10))+((w=e+(g^t&(c^g))+s[12]+1804603682&4294967295)<<7&4294967295|w>>>25))+((w=g+(c^e&(t^c))+s[13]+4254626195&4294967295)<<12&4294967295|w>>>20))+((w=c+(t^g&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^c&(g^e))+s[15]+1236535329&4294967295)<<22&4294967295|w>>>10))+((w=e+(c^g&(t^c))+s[1]+4129170786&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^c&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|w>>>23))+((w=c+(e^t&(g^e))+s[11]+643717713&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(c^g))+s[0]+3921069994&4294967295)<<20&4294967295|w>>>12))+((w=e+(c^g&(t^c))+s[5]+3593408605&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^c&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|w>>>23))+((w=c+(e^t&(g^e))+s[15]+3634488961&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(c^g))+s[4]+3889429448&4294967295)<<20&4294967295|w>>>12))+((w=e+(c^g&(t^c))+s[9]+568446438&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^c&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|w>>>23))+((w=c+(e^t&(g^e))+s[3]+4107603335&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(c^g))+s[8]+1163531501&4294967295)<<20&4294967295|w>>>12))+((w=e+(c^g&(t^c))+s[13]+2850285829&4294967295)<<5&4294967295|w>>>27))+((w=g+(t^c&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|w>>>23))+((w=c+(e^t&(g^e))+s[7]+1735328473&4294967295)<<14&4294967295|w>>>18))+((w=t+(g^e&(c^g))+s[12]+2368359562&4294967295)<<20&4294967295|w>>>12))+((w=e+(t^c^g)+s[5]+4294588738&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^c)+s[8]+2272392833&4294967295)<<11&4294967295|w>>>21))+((w=c+(g^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|w>>>16))+((w=t+(c^g^e)+s[14]+4259657740&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^c^g)+s[1]+2763975236&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^c)+s[4]+1272893353&4294967295)<<11&4294967295|w>>>21))+((w=c+(g^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|w>>>16))+((w=t+(c^g^e)+s[10]+3200236656&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^c^g)+s[13]+681279174&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^c)+s[0]+3936430074&4294967295)<<11&4294967295|w>>>21))+((w=c+(g^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|w>>>16))+((w=t+(c^g^e)+s[6]+76029189&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^c^g)+s[9]+3654602809&4294967295)<<4&4294967295|w>>>28))+((w=g+(e^t^c)+s[12]+3873151461&4294967295)<<11&4294967295|w>>>21))+((w=c+(g^e^t)+s[15]+530742520&4294967295)<<16&4294967295|w>>>16))+((w=t+(c^g^e)+s[2]+3299628645&4294967295)<<23&4294967295|w>>>9))+((w=e+(c^(t|~g))+s[0]+4096336452&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|w>>>22))+((w=c+(e^(g|~t))+s[14]+2878612391&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|w>>>11))+((w=e+(c^(t|~g))+s[12]+1700485571&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|w>>>22))+((w=c+(e^(g|~t))+s[10]+4293915773&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|w>>>11))+((w=e+(c^(t|~g))+s[8]+1873313359&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|w>>>22))+((w=c+(e^(g|~t))+s[6]+2734768916&4294967295)<<15&4294967295|w>>>17))+((w=t+(g^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|w>>>11))+((g=(e=t+((w=e+(c^(t|~g))+s[4]+4149444226&4294967295)<<6&4294967295|w>>>26))+((w=g+(t^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|w>>>22))^((c=g+((w=c+(e^(g|~t))+s[2]+718787259&4294967295)<<15&4294967295|w>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(w<<21&4294967295|w>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+g&4294967295}function fi(r,e){this.h=e;for(var t=[],s=!0,c=r.length-1;0<=c;c--){var g=0|r[c];s&&g==e||(t[c]=g,s=!1)}this.g=t}(Te=I.prototype).Oa=function(r){this.M=r},Te.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fn.g(),this.C=function ht(r){return r.h||(r.h=r.i())}(this.u?this.u:Fn),this.g.onreadystatechange=Ie(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(g){return void tn(this,g)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const g of s.keys())t.set(g,s.get(g))}s=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),c=it.FormData&&r instanceof it.FormData,!(0<=Bt(q,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,w]of t)this.g.setRequestHeader(g,w);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hi(this),0<this.B&&((this.L=function Le(r){return vr&&function Vr(){return yr(Vn,9,function(){let r=0;const e=er(String(dr)).split("."),t=er("9").split("."),s=Math.max(e.length,t.length);for(let w=0;0==r&&w<s;w++){var c=e[w]||"",g=t[w]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==c[0].length&&0==g[0].length)break;r=kn(0==c[1].length?0:parseInt(c[1],10),0==g[1].length?0:parseInt(g[1],10))||kn(0==c[2].length,0==g[2].length)||kn(c[2],g[2]),c=c[3],g=g[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ie(this.ua,this)):this.A=ss(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(g){tn(this,g)}},Te.ua=function(){typeof Se<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rr(this,"timeout"),this.abort(8))},Te.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,rr(this,"complete"),rr(this,"abort"),Sr(this))},Te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sr(this,!0)),I.$.N.call(this)},Te.La=function(){this.s||(this.G||this.v||this.l?qn(this):this.kb())},Te.kb=function(){qn(this)},Te.da=function(){try{return 2<br(this)?this.g.status:-1}catch(r){return-1}},Te.ja=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Te.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),y(e)}},Te.Ia=function(){return this.m},Te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Te=bo.prototype).qa=8,Te.H=1,Te.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new Xn(this,this.j,r,void 0);let g=this.s;if(this.U&&(g?(g=Or(g),Be(g,this.U)):g=this.U),null!==this.o||this.O||(c.I=g,g=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xo(this,c,e),ui(t=Bi(this.G),"RID",r),ui(t,"CVER",22),this.F&&ui(t,"X-HTTP-Session-Id",this.F),po(this,t),g&&(this.O?e="headers="+encodeURIComponent(String(_s(g)))+"&"+e:this.o&&Ii(t,this.o,g)),as(this.h,c),this.bb&&ui(t,"TYPE","init"),this.P?(ui(t,"$req",e),ui(t,"SID","null"),c.ba=!0,Xi(c,t,null)):Xi(c,t,e),this.H=2}}else 3==this.H&&(r?gu(this,r):0==this.i.length||ys(this.h)||gu(this))},Te.Ma=function(){if(this.u=null,gl(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=zr(Ie(this.jb,this),r)}},Te.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,bn(10),Qs(this),gl(this))},Te.ib=function(){null!=this.v&&(this.v=null,Qs(this),go(this),bn(19))},Te.pb=function(r){r?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))},(Te=mo.prototype).Ba=function(){},Te.Aa=function(){},Te.za=function(){},Te.ya=function(){},Te.Va=function(){},qr.prototype.g=function(r,e){return new rs(r,e)},Ye(rs,Nn),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;bn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=$o(r,null,r.Y),Ga(r)},rs.prototype.close=function(){Do(this.g)},rs.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Rt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&Ga(e)},rs.prototype.N=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,rs.$.N.call(this)},Ye(wi,Gt),Ye(ju,an),Ye(Ss,mo),Ss.prototype.Ba=function(){rr(this.g,"a")},Ss.prototype.Aa=function(r){rr(this.g,new wi(r))},Ss.prototype.za=function(r){rr(this.g,new ju)},Ss.prototype.ya=function(){rr(this.g,"b")},Ye(As,function Uo(){this.blockSize=-1}),As.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},As.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,c=this.h,g=0;g<e;){if(0==c)for(;g<=t;)Al(this,r,g),g+=this.blockSize;if("string"==typeof r){for(;g<e;)if(s[c++]=r.charCodeAt(g++),c==this.blockSize){Al(this,s),c=0;break}}else for(;g<e;)if(s[c++]=r[g++],c==this.blockSize){Al(this,s),c=0;break}}this.h=c,this.i+=e},As.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var ml={};function rl(r){return-128<=r&&128>r?yr(ml,r,function(e){return new fi([0|e],0>e?-1:0)}):new fi([0|r],0>r?-1:0)}function F(r){if(isNaN(r)||!isFinite(r))return ne;if(0>r)return gr(F(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=U;return new fi(e,0)}var U=4294967296,ne=rl(0),be=rl(1),Lt=rl(16777216);function qt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function On(r){return-1==r.h}function gr(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new fi(t,~r.h).add(be)}function kr(r,e){return r.add(gr(e))}function Ar(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function wr(r,e){this.g=r,this.h=e}function Gi(r,e){if(qt(e))throw Error("division by zero");if(qt(r))return new wr(ne,ne);if(On(r))return e=Gi(gr(r),e),new wr(gr(e.g),gr(e.h));if(On(e))return e=Gi(r,gr(e)),new wr(gr(e.g),e.h);if(30<r.g.length){if(On(r)||On(e))throw Error("slowDivide_ only works with positive integers.");for(var t=be,s=e;0>=s.X(r);)t=Pi(t),s=Pi(s);var c=Ti(t,1),g=Ti(s,1);for(s=Ti(s,2),t=Ti(t,2);!qt(s);){var w=g.add(s);0>=w.X(r)&&(c=c.add(t),g=w),s=Ti(s,1),t=Ti(t,1)}return e=kr(r,c.R(e)),new wr(c,e)}for(c=ne;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),w=(g=F(t)).R(e);On(w)||0<w.X(r);)w=(g=F(t-=s)).R(e);qt(g)&&(g=be),c=c.add(g),r=kr(r,w)}return new wr(c,r)}function Pi(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new fi(t,r.h)}function Ti(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,c=[],g=0;g<s;g++)c[g]=0<e?r.D(g+t)>>>e|r.D(g+t+1)<<32-e:r.D(g+t);return new fi(c,r.h)}(Te=fi.prototype).ea=function(){if(On(this))return-gr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:U+s)*e,e*=U}return r},Te.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(qt(this))return"0";if(On(this))return"-"+gr(this).toString(r);for(var e=F(Math.pow(r,6)),t=this,s="";;){var c=Gi(t,e).g,g=((0<(t=kr(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(qt(t=c))return g+s;for(;6>g.length;)g="0"+g;s=g+s}},Te.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Te.X=function(r){return On(r=kr(this,r))?-1:qt(r)?0:1},Te.abs=function(){return On(this)?gr(this):this},Te.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,c=0;c<=e;c++){var g=s+(65535&this.D(c))+(65535&r.D(c)),w=(g>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);s=w>>>16,t[c]=(w&=65535)<<16|(g&=65535)}return new fi(t,-2147483648&t[t.length-1]?-1:0)},Te.R=function(r){if(qt(this)||qt(r))return ne;if(On(this))return On(r)?gr(this).R(gr(r)):gr(gr(this).R(r));if(On(r))return gr(this.R(gr(r)));if(0>this.X(Lt)&&0>r.X(Lt))return F(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<r.g.length;c++){var g=this.D(s)>>>16,w=65535&this.D(s),O=r.D(c)>>>16,H=65535&r.D(c);t[2*s+2*c]+=w*H,Ar(t,2*s+2*c),t[2*s+2*c+1]+=g*H,Ar(t,2*s+2*c+1),t[2*s+2*c+1]+=w*O,Ar(t,2*s+2*c+1),t[2*s+2*c+2]+=g*O,Ar(t,2*s+2*c+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new fi(t,0)},Te.gb=function(r){return Gi(this,r).h},Te.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new fi(t,this.h&r.h)},Te.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new fi(t,this.h|r.h)},Te.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new fi(t,this.h^r.h)},qr.prototype.createWebChannel=qr.prototype.g,rs.prototype.send=rs.prototype.u,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,ar.COMPLETE="complete",Xe.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",Nn.prototype.listen=Nn.prototype.O,I.prototype.listenOnce=I.prototype.P,I.prototype.getLastError=I.prototype.Sa,I.prototype.getLastErrorCode=I.prototype.Ia,I.prototype.getStatus=I.prototype.da,I.prototype.getResponseJson=I.prototype.Wa,I.prototype.getResponseText=I.prototype.ja,I.prototype.send=I.prototype.ha,I.prototype.setWithCredentials=I.prototype.Oa,As.prototype.digest=As.prototype.l,As.prototype.reset=As.prototype.reset,As.prototype.update=As.prototype.j,fi.prototype.add=fi.prototype.add,fi.prototype.multiply=fi.prototype.R,fi.prototype.modulo=fi.prototype.gb,fi.prototype.compare=fi.prototype.X,fi.prototype.toNumber=fi.prototype.ea,fi.prototype.toString=fi.prototype.toString,fi.prototype.getBits=fi.prototype.D,fi.fromNumber=F,fi.fromString=function K(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return gr(K(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=F(Math.pow(e,8)),s=ne,c=0;c<r.length;c+=8){var g=Math.min(8,r.length-c),w=parseInt(r.substring(c,c+g),e);8>g?(g=F(Math.pow(e,g)),s=s.R(g).add(F(w))):s=(s=s.R(t)).add(F(w))}return s};var To=Pe.createWebChannelTransport=function(){return new qr},bi=Pe.getStatEventTarget=function(){return Ft()},Vs=Pe.ErrorCode=xi,Si=Pe.EventType=ar,fa=Pe.Event=Je,Js=Pe.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ra=Pe.FetchXmlHttpFactory=ca,Wa=Pe.WebChannel=Xe,xl=Pe.XhrIo=I,il=Pe.Md5=As,pa=Pe.Integer=fi;const ql="@firebase/firestore";class Wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");let Rl="9.21.0";const qi=new et.Yd("@firebase/firestore");function Kl(){return qi.logLevel}function on(r,...e){if(qi.logLevel<=et.in.DEBUG){const t=e.map(Pl);qi.debug(`Firestore (${Rl}): ${r}`,...t)}}function Ki(r,...e){if(qi.logLevel<=et.in.ERROR){const t=e.map(Pl);qi.error(`Firestore (${Rl}): ${r}`,...t)}}function pi(r,...e){if(qi.logLevel<=et.in.WARN){const t=e.map(Pl);qi.warn(`Firestore (${Rl}): ${r}`,...t)}}function Pl(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch(t){return r}}function Un(r="Unexpected state"){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+r;throw Ki(e),new Error(e)}function Jn(r,e){r||Un()}function Mn(r,e){return r}const Ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends He.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class So{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _c{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wi.UNAUTHENTICATED))}shutdown(){}}class sl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ol{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const g=Z=>this.i!==c?(c=this.i,t(Z)):Promise.resolve();let w=new is;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new is,e.enqueueRetryable(()=>g(this.currentUser))};const O=()=>{const Z=w;e.enqueueRetryable((0,ue.Z)(function*(){yield Z.promise,yield g(s.currentUser)}))},H=Z=>{on("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(Z=>H(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?H(Z):(on("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new is)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(on("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Jn("string"==typeof s.accessToken),new So(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jn(null===e||"string"==typeof e),new Wi(e)}}class qa{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Hu{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new qa(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=g=>{null!=g.error&&on("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.T;return this.T=g.token,on("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const c=g=>{on("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.I.onInit(g=>c(g)),setTimeout(()=>{if(!this.appCheck){const g=this.I.getImmediate({optional:!0});g?c(g):on("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn("string"==typeof t.token),this.T=t.token,new kl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ji(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Ka{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=Ji(40);for(let g=0;g<c.length;++g)s.length<20&&c[g]<t&&(s+=e.charAt(c[g]%e.length))}return s}}function cr(r,e){return r<e?-1:r>e?1:0}function ea(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Ma(r){return r+"\0"}class Br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(Ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(Ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(Ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(Ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Br(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cr(this.nanoseconds,e.nanoseconds):cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zn(e)}static min(){return new Zn(new Br(0,0))}static max(){return new Zn(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ga{constructor(e,t,s){void 0===t?t=0:t>e.length&&Un(),void 0===s?s=e.length-t:s>e.length-t&&Un(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ga.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const g=e.get(c),w=t.get(c);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vi extends ga{construct(e,t,s){return new vi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new vi(t)}static emptyPath(){return new vi([])}}const Rd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends ga{construct(e,t,s){return new Dr(e,t,s)}static isValidIdentifier(e){return Rd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const g=()=>{if(0===s.length)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let w=!1;for(;c<e.length;){const O=e[c];if("\\"===O){if(c+1===e.length)throw new Zt(Ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[c+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Zt(Ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=H,c+=2}else"`"===O?(w=!w,c++):"."!==O||w?(s+=O,c++):(g(),c++)}if(g(),w)throw new Zt(Ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class xn{constructor(e){this.path=e}static fromPath(e){return new xn(vi.fromString(e))}static fromName(e){return new xn(vi.fromString(e).popFirst(5))}static empty(){return new xn(vi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xn(new vi(e.slice()))}}class ol{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Ec(r){return r.fields.find(e=>2===e.kind)}function eo(r){return r.fields.filter(e=>2!==e.kind)}ol.UNKNOWN_ID=-1;class Nl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pa(0,ti.min())}}function Ic(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=Zn.fromTimestamp(1e9===s?new Br(t+1,0):new Br(t,s));return new ti(c,xn.empty(),e)}function Ya(r){return new ti(r.readTime,r.key,-1)}class ti{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ti(Zn.min(),xn.empty(),-1)}static max(){return new ti(Zn.max(),xn.empty(),-1)}}function vu(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=xn.comparator(r.documentKey,e.documentKey),0!==t?t:cr(r.largestBatchId,e.largestBatchId))}const al="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ds(r){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,ue.Z)(function*(r){if(r.code!==Ut.FAILED_PRECONDITION||r.message!==al)throw r;on("LocalStore","Unexpectedly lost primary lease")}),Oa.apply(this,arguments)}class mt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mt((s,c)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,c)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mt?t:mt.resolve(t)}catch(t){return mt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mt.reject(t)}static resolve(e){return new mt((t,s)=>{t(e)})}static reject(e){return new mt((t,s)=>{s(e)})}static waitFor(e){return new mt((t,s)=>{let c=0,g=0,w=!1;e.forEach(O=>{++c,O.next(()=>{++g,w&&g===c&&t()},H=>s(H))}),w=!0,g===c&&t()})}static or(e){let t=mt.resolve(!1);for(const s of e)t=t.next(c=>c?mt.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,g)=>{s.push(t.call(this,c,g))}),this.waitFor(s)}static mapArray(e,t){return new mt((s,c)=>{const g=e.length,w=new Array(g);let O=0;for(let H=0;H<g;H++){const Z=H;t(e[Z]).next(oe=>{w[Z]=oe,++O,O===g&&s(w)},oe=>c(oe))}})}static doWhile(e,t){return new mt((s,c)=>{const g=()=>{!0===e()?t().next(()=>{g()},c):s()};g()})}}class Qr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new is,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new gi(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const c=R(s.target.error);this.R.reject(new gi(e,c))}}static open(e,t,s,c){try{return new Qr(t,e.transaction(c,s))}catch(g){throw new gi(t,g)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(on("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Zc(t)}}class fr{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===fr.S((0,He.z$)())&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return on("SimpleDb","Removing database:",e),hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,He.hl)())return!1;if(fr.C())return!0;const e=(0,He.z$)(),t=fr.S(e),s=0<t&&t<10,c=fr.N(e),g=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,ue.Z)(function*(){return t.db||(on("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{s(w.target.result)},g.onblocked=()=>{c(new gi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const O=w.target.error;c("VersionError"===O.name?new Zt(Ut.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new Zt(Ut.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new gi(e,O))},g.onupgradeneeded=w=>{on("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.$(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{on("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var g=this;return(0,ue.Z)(function*(){const w="readonly"===t;let O=0;for(;;){++O;try{g.db=yield g.O(e);const H=Qr.open(g.db,e,w?"readonly":"readwrite",s),Z=c(H).next(oe=>(H.P(),oe)).catch(oe=>(H.abort(oe),mt.reject(oe))).toPromise();return Z.catch(()=>{}),yield H.v,Z}catch(H){const Z=H,oe="FirebaseError"!==Z.name&&O<3;if(on("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",oe),g.close(),!oe)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vl{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return hs(this.L.delete())}}class gi extends Zt{constructor(e,t){super(Ut.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vo(r){return"IndexedDbTransactionError"===r.name}class Zc{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(on("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(on("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),hs(s)}add(e){return on("SimpleDb","ADD",this.store.name,e,e),hs(this.store.add(e))}get(e){return hs(this.store.get(e)).next(t=>(void 0===t&&(t=null),on("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return on("SimpleDb","DELETE",this.store.name,e),hs(this.store.delete(e))}count(){return on("SimpleDb","COUNT",this.store.name),hs(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),g=[];return this.W(c,(w,O)=>{g.push(O)}).next(()=>g)}{const c=this.store.getAll(s.range);return new mt((g,w)=>{c.onerror=O=>{w(O.target.error)},c.onsuccess=O=>{g(O.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new mt((c,g)=>{s.onerror=w=>{g(w.target.error)},s.onsuccess=w=>{c(w.target.result)}})}J(e,t){on("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const c=this.cursor(s);return this.W(c,(g,w,O)=>O.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.W(c,t)}Z(e){const t=this.cursor({});return new mt((s,c)=>{t.onerror=g=>{const w=R(g.target.error);c(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():s()}):s()}})}W(e,t){const s=[];return new mt((c,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void c();const H=new vl(O),Z=t(O.primaryKey,O.value,H);if(Z instanceof mt){const oe=Z.catch(We=>(H.done(),mt.reject(We)));s.push(oe)}H.isDone?c():null===H.K?O.continue():O.continue(H.K)}}).next(()=>mt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hs(r){return new mt((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=R(s.target.error);t(c)}})}let A=!1;function R(r){const e=fr.S((0,He.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A||(A=!0,setTimeout(()=>{throw s},0)),s}}return r}class b{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;on("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{on("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Vo(s)?on("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ds(s)}yield t.et(6e4)}))}}class P{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let c=t,g=!0;return mt.doWhile(()=>!0===g&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!s.has(w))return on("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,c).next(O=>{c-=O,s.add(w)});g=!1})).next(()=>t-c)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(g=>{const w=g.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(c,g)).next(O=>(on("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>w.size)}))}rt(e,t){let s=e;return t.changes.forEach((c,g)=>{const w=Ya(g);vu(w,s)>0&&(s=w)}),new ti(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let j=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>s.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function ee(r){return null==r}function ie(r){return 0===r&&1/r==-1/0}function st(r){return"number"==typeof r&&Number.isInteger(r)&&!ie(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function xt(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hn(e)),e=_n(r.get(t),e);return Hn(e)}function _n(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const g=r.charAt(c);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Hn(r){return r+"\x01\x01"}function In(r){const e=r.length;if(Jn(e>=2),2===e)return Jn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),vi.emptyPath();const t=e-2,s=[];let c="";for(let g=0;g<e;){const w=r.indexOf("\x01",g);switch((w<0||w>t)&&Un(),r.charAt(w+1)){case"\x01":const O=r.substring(g,w);let H;0===c.length?H=O:(c+=O,H=c,c=""),s.push(H);break;case"\x10":c+=r.substring(g,w),c+="\0";break;case"\x11":c+=r.substring(g,w+1);break;default:Un()}g=w+2}return new vi(s)}const mi=["userId","batchId"];function _i(r,e){return[r,xt(e)]}function xs(r,e,t){return[r,xt(e),t]}const to={},jo=["prefixPath","collectionGroup","readTime","documentId"],ta=["prefixPath","collectionGroup","documentId"],yo=["collectionGroup","readTime","prefixPath","documentId"],ll=["canonicalId","targetId"],Es=["targetId","path"],Gr=["path","targetId"],Fl=["collectionId","parent"],ma=["indexId","uid"],Wu=["uid","sequenceNumber"],Za=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xc=["indexId","uid","orderedDocumentKey"],ya=["userId","collectionPath","documentId"],wh=["userId","collectionPath","largestBatchId"],no=["userId","collectionGroup","largestBatchId"],qu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qc=[...qu,"documentOverlays"],wc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],va=wc,Jc=[...va,"indexConfiguration","indexState","indexEntries"];class ul extends Yl{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Is(r,e){const t=Mn(r);return fr.M(t.at,e)}function Ku(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _a(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Yu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class zi{constructor(e,t){this.comparator=e,this.root=t||N.EMPTY}insert(e,t){return new zi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,N.BLACK,null,null))}remove(e){return new zi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,N.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&c&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class N{constructor(e,t,s,c,g){this.key=e,this.value=t,this.color=null!=s?s:N.RED,this.left=null!=c?c:N.EMPTY,this.right=null!=g?g:N.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,g){return new N(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const g=s(e,c.key);return c=g<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===g?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return N.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return N.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,N.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,N.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Un();const e=this.left.check();if(e!==this.right.check())throw Un();return e+(this.isRed()?0:1)}}N.EMPTY=null,N.RED=!0,N.BLACK=!1,N.EMPTY=new class{constructor(){this.size=0}get key(){throw Un()}get value(){throw Un()}get color(){throw Un()}get left(){throw Un()}get right(){throw Un()}copy(r,e,t,s,c){return this}insert(r,e,t){return new N(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class B{constructor(e){this.comparator=e,this.data=new zi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J(this.data.getIterator())}getIteratorFrom(e){return new J(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof B)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(c,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new B(this.comparator);return t.data=e,t}}class J{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ee(r){return r.hasNext()?r.getNext():void 0}class ot{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new ot([])}unionWith(e){let t=new B(Dr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class St extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new St("Invalid base64 string: "+c):c}}(e);return new hn(t)}static fromUint8Array(e){const t=function(s){let c="";for(let g=0;g<s.length;++g)c+=String.fromCharCode(s[g]);return c}(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const Bn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(r){if(Jn(!!r),"string"==typeof r){let e=0;const t=Bn.exec(r);if(Jn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tr(r.seconds),nanos:tr(r.nanos)}}function tr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function ir(r){return"string"==typeof r?hn.fromBase64String(r):hn.fromUint8Array(r)}function Ao(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kr(r){const e=r.mapValue.fields.__previous_value__;return Ao(e)?Kr(e):e}function ka(r){const e=ln(r.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}class Na{constructor(e,t,s,c,g,w,O,H){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.useFetchStreams=H}}class vo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vo&&e.projectId===this.projectId&&e.database===this.database}}const js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xo={nullValue:"NULL_VALUE"};function na(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ao(r)?4:Od(r)?9007199254740991:10:Un()}function ra(r,e){if(r===e)return!0;const t=na(r);if(t!==na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ka(r).isEqual(ka(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const g=ln(s.timestampValue),w=ln(c.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,ir(r.bytesValue).isEqual(ir(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return tr(s.geoPointValue.latitude)===tr(c.geoPointValue.latitude)&&tr(s.geoPointValue.longitude)===tr(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return tr(s.integerValue)===tr(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const g=tr(s.doubleValue),w=tr(c.doubleValue);return g===w?ie(g)===ie(w):isNaN(g)&&isNaN(w)}return!1}(r,e);case 9:return ea(r.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(s,c){const g=s.mapValue.fields||{},w=c.mapValue.fields||{};if(Ku(g)!==Ku(w))return!1;for(const O in g)if(g.hasOwnProperty(O)&&(void 0===w[O]||!ra(g[O],w[O])))return!1;return!0}(r,e);default:return Un()}var c}function ed(r,e){return void 0!==(r.values||[]).find(t=>ra(t,e))}function Ll(r,e){if(r===e)return 0;const t=na(r),s=na(e);if(t!==s)return cr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return cr(r.booleanValue,e.booleanValue);case 2:return function(c,g){const w=tr(c.integerValue||c.doubleValue),O=tr(g.integerValue||g.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(r,e);case 3:return bc(r.timestampValue,e.timestampValue);case 4:return bc(ka(r),ka(e));case 5:return cr(r.stringValue,e.stringValue);case 6:return function(c,g){const w=ir(c),O=ir(g);return w.compareTo(O)}(r.bytesValue,e.bytesValue);case 7:return function(c,g){const w=c.split("/"),O=g.split("/");for(let H=0;H<w.length&&H<O.length;H++){const Z=cr(w[H],O[H]);if(0!==Z)return Z}return cr(w.length,O.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,g){const w=cr(tr(c.latitude),tr(g.latitude));return 0!==w?w:cr(tr(c.longitude),tr(g.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,g){const w=c.values||[],O=g.values||[];for(let H=0;H<w.length&&H<O.length;++H){const Z=Ll(w[H],O[H]);if(Z)return Z}return cr(w.length,O.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===js.mapValue&&g===js.mapValue)return 0;if(c===js.mapValue)return 1;if(g===js.mapValue)return-1;const w=c.fields||{},O=Object.keys(w),H=g.fields||{},Z=Object.keys(H);O.sort(),Z.sort();for(let oe=0;oe<O.length&&oe<Z.length;++oe){const We=cr(O[oe],Z[oe]);if(0!==We)return We;const Tt=Ll(w[O[oe]],H[Z[oe]]);if(0!==Tt)return Tt}return cr(O.length,Z.length)}(r.mapValue,e.mapValue);default:throw Un()}}function bc(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return cr(r,e);const t=ln(r),s=ln(e),c=cr(t.seconds,s.seconds);return 0!==c?c:cr(t.nanos,s.nanos)}function Zu(r){return _u(r)}function _u(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=ln(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?ir(r.bytesValue).toBase64():"referenceValue"in r?xn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",g=!0;for(const w of s.values||[])g?g=!1:c+=",",c+=_u(w);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let g="{",w=!0;for(const O of c)w?w=!1:g+=",",g+=`${O}:${_u(s.fields[O])}`;return g+"}"}(r.mapValue):Un();var e}function ro(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function td(r){return!!r&&"integerValue"in r}function Eu(r){return!!r&&"arrayValue"in r}function Pd(r){return!!r&&"nullValue"in r}function io(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Iu(r){return!!r&&"mapValue"in r}function Zl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _a(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Zl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Od(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ef(r){return"nullValue"in r?xo:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ro(vo.empty(),xn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Un()}function nd(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ro(vo.empty(),xn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?js:Un()}function kd(r,e){const t=Ll(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function wu(r,e){const t=Ll(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class ks{constructor(e){this.value=e}static empty(){return new ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Iu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(t)}setAll(e){let t=Dr.emptyPath(),s={},c=[];e.forEach((w,O)=>{if(!t.isImmediateParentOf(O)){const H=this.getFieldsMap(t);this.applyChanges(H,s,c),s={},c=[],t=O.popLast()}w?s[O.lastSegment()]=Zl(w):c.push(O.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,c)}delete(e){const t=this.field(e.popLast());Iu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Iu(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){_a(t,(c,g)=>e[c]=g);for(const c of s)delete e[c]}clone(){return new ks(Zl(this.value))}}function Xu(r){const e=[];return _a(r.fields,(t,s)=>{const c=new Dr([t]);if(Iu(s)){const g=Xu(s.mapValue).fields;if(0===g.length)e.push(c);else for(const w of g)e.push(c.child(w))}else e.push(c)}),new ot(e)}class es{constructor(e,t,s,c,g,w,O){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=g,this.data=w,this.documentState=O}static newInvalidDocument(e){return new es(e,0,Zn.min(),Zn.min(),Zn.min(),ks.empty(),0)}static newFoundDocument(e,t,s,c){return new es(e,1,t,Zn.min(),s,c,0)}static newNoDocument(e,t){return new es(e,2,t,Zn.min(),Zn.min(),ks.empty(),0)}static newUnknownDocument(e,t){return new es(e,3,t,Zn.min(),Zn.min(),ks.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xl{constructor(e,t){this.position=e,this.inclusive=t}}function Nd(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const g=e[c],w=r.position[c];if(s=g.field.isKeyField()?xn.comparator(xn.fromName(w.referenceValue),t.key):Ll(w,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function Qu(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ra(r.position[t],e.position[t]))return!1;return!0}class Dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fd(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Ld{}class $r extends Ld{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ap(e,t,s):"array-contains"===t?new $d(e,s):"in"===t?new Ql(e,s):"not-in"===t?new Ud(e,s):"array-contains-any"===t?new nc(e,s):new $r(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Bd(e,s):new tc(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ll(t,this.value)):null!==t&&na(this.value)===na(t)&&this.matchesComparison(Ll(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ci extends Ld{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Ci(e,t)}matches(e){return _l(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _l(r){return"and"===r.op}function Ju(r){return"or"===r.op}function El(r){return Cu(r)&&_l(r)}function Cu(r){for(const e of r.filters)if(e instanceof Ci)return!1;return!0}function Bl(r){if(r instanceof $r)return r.field.canonicalString()+r.op.toString()+Zu(r.value);if(El(r))return r.filters.map(e=>Bl(e)).join(",");{const e=r.filters.map(t=>Bl(t)).join(",");return`${r.op}(${e})`}}function ec(r,e){return r instanceof $r?(t=r,(s=e)instanceof $r&&t.op===s.op&&t.field.isEqual(s.field)&&ra(t.value,s.value)):r instanceof Ci?function(t,s){return s instanceof Ci&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,g,w)=>c&&ec(g,s.filters[w]),!0)}(r,e):void Un();var t,s}function Il(r,e){const t=r.filters.concat(e);return Ci.create(t,r.op)}function Ch(r){return r instanceof $r?`${(e=r).field.canonicalString()} ${e.op} ${Zu(e.value)}`:r instanceof Ci?function(e){return e.op.toString()+" {"+e.getFilters().map(Ch).join(" ,")+"}"}(r):"Filter";var e}class Ap extends $r{constructor(e,t,s){super(e,t,s),this.key=xn.fromName(s.referenceValue)}matches(e){const t=xn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Bd extends $r{constructor(e,t){super(e,"in",t),this.keys=If(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tc extends $r{constructor(e,t){super(e,"not-in",t),this.keys=If(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function If(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>xn.fromName(s.referenceValue))}class $d extends $r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Eu(t)&&ed(t.arrayValue,this.value)}}class Ql extends $r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ed(this.value.arrayValue,t)}}class Ud extends $r{constructor(e,t){super(e,"not-in",t)}matches(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ed(this.value.arrayValue,t)}}class nc extends $r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Eu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ed(this.value.arrayValue,s))}}class Jl{constructor(e,t=null,s=[],c=[],g=null,w=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=g,this.startAt=w,this.endAt=O,this.ft=null}}function rd(r,e=null,t=[],s=[],c=null,g=null,w=null){return new Jl(r,e,t,s,c,g,w)}function eu(r){const e=Mn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Bl(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),ee(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Zu(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Zu(s)).join(",")),e.ft=t}return e.ft}function Vi(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Fd(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ec(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qu(r.startAt,e.startAt)&&Qu(r.endAt,e.endAt)}function Ea(r){return xn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function ia(r,e){return r.filters.filter(t=>t instanceof $r&&t.field.isEqual(e))}function id(r,e,t){let s=xo,c=!0;for(const g of ia(r,e)){let w=xo,O=!0;switch(g.op){case"<":case"<=":w=Ef(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,O=!1;break;case"!=":case"not-in":w=xo}kd({value:s,inclusive:c},{value:w,inclusive:O})<0&&(s=w,c=O)}if(null!==t)for(let g=0;g<r.orderBy.length;++g)if(r.orderBy[g].field.isEqual(e)){const w=t.position[g];kd({value:s,inclusive:c},{value:w,inclusive:t.inclusive})<0&&(s=w,c=t.inclusive);break}return{value:s,inclusive:c}}function Vd(r,e,t){let s=js,c=!0;for(const g of ia(r,e)){let w=js,O=!0;switch(g.op){case">=":case">":w=nd(g.value),O=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,O=!1;break;case"!=":case"not-in":w=js}wu({value:s,inclusive:c},{value:w,inclusive:O})>0&&(s=w,c=O)}if(null!==t)for(let g=0;g<r.orderBy.length;++g)if(r.orderBy[g].field.isEqual(e)){const w=t.position[g];wu({value:s,inclusive:c},{value:w,inclusive:t.inclusive})>0&&(s=w,c=t.inclusive);break}return{value:s,inclusive:c}}class wl{constructor(e,t=null,s=[],c=[],g=null,w="F",O=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=g,this.limitType=w,this.startAt=O,this.endAt=H,this.dt=null,this._t=null}}function rc(r,e,t,s,c,g,w,O){return new wl(r,e,t,s,c,g,w,O)}function $l(r){return new wl(r)}function Ul(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function bu(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function Vl(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function sd(r){return null!==r.collectionGroup}function Fa(r){const e=Mn(r);if(null===e.dt){e.dt=[];const t=Vl(e),s=bu(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Dc(t)),e.dt.push(new Dc(Dr.keyField(),"asc"));else{let c=!1;for(const g of e.explicitOrderBy)e.dt.push(g),g.field.isKeyField()&&(c=!0);if(!c){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Dc(Dr.keyField(),g))}}}return e.dt}function Ro(r){const e=Mn(r);if(!e._t)if("F"===e.limitType)e._t=rd(e.path,e.collectionGroup,Fa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of Fa(e))t.push(new Dc(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new Xl(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Xl(e.startAt.position,e.startAt.inclusive):null;e._t=rd(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function Tc(r,e){e.getFirstInequalityField(),Vl(r);const t=r.filters.concat([e]);return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ic(r,e,t){return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function tu(r,e){return Vi(Ro(r),Ro(e))&&r.limitType===e.limitType}function jd(r){return`${eu(Ro(r))}|lt:${r.limitType}`}function od(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Ch(s)).join(", ")}]`),ee(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Zu(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Zu(s)).join(",")),`Target(${t})`}(Ro(r))}; limitType=${r.limitType})`}function sc(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):xn.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of Fa(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,g,w){const O=Nd(c,g,w);return c.inclusive?O<=0:O<0}(t.startAt,Fa(t),s)||t.endAt&&!function(c,g,w){const O=Nd(c,g,w);return c.inclusive?O>=0:O>0}(t.endAt,Fa(t),s)));var t,s}function Du(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function bh(r){return(e,t)=>{let s=!1;for(const c of Fa(r)){const g=wf(c,e,t);if(0!==g)return g;s=s||c.field.isKeyField()}return 0}}function wf(r,e,t){const s=r.field.isKeyField()?xn.comparator(e.key,t.key):function(c,g,w){const O=g.data.field(c),H=w.data.field(c);return null!==O&&null!==H?Ll(O,H):Un()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Un()}}class nu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,g]of s)if(this.equalsFn(c,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<c.length;g++)if(this.equalsFn(c[g][0],e))return void(c[g]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(t,s)=>{for(const[c,g]of s)e(c,g)})}isEmpty(){return Yu(this.inner)}size(){return this.innerSize}}const xp=new zi(xn.comparator);function Mo(){return xp}const Dh=new zi(xn.comparator);function oc(...r){let e=Dh;for(const t of r)e=e.insert(t.key,t);return e}function Tu(r){let e=Dh;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function La(){return Au()}function Su(){return Au()}function Au(){return new nu(r=>r.toString(),(r,e)=>r.isEqual(e))}const Cf=new zi(xn.comparator),Hd=new B(xn.comparator);function Yr(...r){let e=Hd;for(const t of r)e=e.add(t);return e}const ad=new B(cr);function Th(){return ad}function ld(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ie(e)?"-0":e}}function Sc(r){return{integerValue:""+r}}function Po(r,e){return st(e)?Sc(e):ld(r,e)}class ru{constructor(){this._=void 0}}function Sh(r,e,t){return r instanceof iu?function(s,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Ao(c)&&(c=Kr(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(t,e):r instanceof jl?cd(r,e):r instanceof xu?su(r,e):function(s,c){const g=ud(s,c),w=Ru(g)+Ru(s.wt);return td(g)&&td(s.wt)?Sc(w):ld(s.serializer,w)}(r,e)}function bf(r,e,t){return r instanceof jl?cd(r,e):r instanceof xu?su(r,e):t}function ud(r,e){return r instanceof Ia?td(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class iu extends ru{}class jl extends ru{constructor(e){super(),this.elements=e}}function cd(r,e){const t=Df(e);for(const s of r.elements)t.some(c=>ra(c,s))||t.push(s);return{arrayValue:{values:t}}}class xu extends ru{constructor(e){super(),this.elements=e}}function su(r,e){let t=Df(e);for(const s of r.elements)t=t.filter(c=>!ra(c,s));return{arrayValue:{values:t}}}class Ia extends ru{constructor(e,t){super(),this.serializer=e,this.wt=t}}function Ru(r){return tr(r.integerValue||r.doubleValue)}function Df(r){return Eu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class zd{constructor(e,t){this.field=e,this.transform=t}}class Xa{constructor(e,t){this.version=e,this.transformResults=t}}class fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class hd{}function Cl(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new D(r.key,fs.none()):new Ho(r.key,r.data,fs.none());{const t=r.data,s=ks.empty();let c=new B(Dr.comparator);for(let g of e.fields)if(!c.has(g)){let w=t.field(g);null===w&&g.length>1&&(g=g.popLast(),w=t.field(g)),null===w?s.delete(g):s.set(g,w),c=c.add(g)}return new sa(r.key,s,new ot(c.toArray()),fs.none())}}function fd(r,e,t){r instanceof Ho?function(s,c,g){const w=s.value.clone(),O=xh(s.fieldTransforms,c,g.transformResults);w.setAll(O),c.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(r,e,t):r instanceof sa?function(s,c,g){if(!dd(s.precondition,c))return void c.convertToUnknownDocument(g.version);const w=xh(s.fieldTransforms,c,g.transformResults),O=c.data;O.setAll(Wd(s)),O.setAll(w),c.convertToFoundDocument(g.version,O).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ac(r,e,t,s){return r instanceof Ho?function(c,g,w,O){if(!dd(c.precondition,g))return w;const H=c.value.clone(),Z=Rh(c.fieldTransforms,O,g);return H.setAll(Z),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null}(r,e,t,s):r instanceof sa?function(c,g,w,O){if(!dd(c.precondition,g))return w;const H=Rh(c.fieldTransforms,O,g),Z=g.data;return Z.setAll(Wd(c)),Z.setAll(H),g.convertToFoundDocument(g.version,Z).setHasLocalMutations(),null===w?null:w.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(oe=>oe.field))}(r,e,t,s):(w=t,dd(r.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function Ah(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),g=ud(s.transform,c||null);null!=g&&(null===t&&(t=ks.empty()),t.set(s.field,g))}return t||null}function Gd(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&ea(t,s,(c,g)=>function Rp(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof jl&&s instanceof jl||t instanceof xu&&s instanceof xu?ea(t.elements,s.elements,ra):t instanceof Ia&&s instanceof Ia?ra(t.wt,s.wt):t instanceof iu&&s instanceof iu);var t,s}(c,g))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class Ho extends hd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class sa extends hd{constructor(e,t,s,c,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Wd(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function xh(r,e,t){const s=new Map;Jn(r.length===t.length);for(let c=0;c<t.length;c++){const g=r[c],w=g.transform,O=e.data.field(g.field);s.set(g.field,bf(w,O,t[c]))}return s}function Rh(r,e,t){const s=new Map;for(const c of r){const g=c.transform,w=t.data.field(c.field);s.set(c.field,Sh(g,w,e))}return s}class D extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const g=this.mutations[c];g.key.isEqual(e.key)&&fd(g,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ac(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ac(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Su();return this.mutations.forEach(c=>{const g=e.get(c.key),w=g.overlayedDocument;let O=this.applyToLocalView(w,g.mutatedFields);O=t.has(c.key)?null:O;const H=Cl(w,O);null!==H&&s.set(c.key,H),w.isValidDocument()||w.convertToNoDocument(Zn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yr())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(t,s)=>Gd(t,s))&&ea(this.baseMutations,e.baseMutations,(t,s)=>Gd(t,s))}}class x{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){Jn(e.mutations.length===s.length);let c=Cf;const g=e.mutations;for(let w=0;w<g.length;w++)c=c.insert(g[w].key,s[w].version);return new x(e,t,s,c)}}class G{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qe{constructor(e,t){this.count=e,this.unchangedNames=t}}var yt,zt;function wn(r){switch(r){default:return Un();case Ut.CANCELLED:case Ut.UNKNOWN:case Ut.DEADLINE_EXCEEDED:case Ut.RESOURCE_EXHAUSTED:case Ut.INTERNAL:case Ut.UNAVAILABLE:case Ut.UNAUTHENTICATED:return!1;case Ut.INVALID_ARGUMENT:case Ut.NOT_FOUND:case Ut.ALREADY_EXISTS:case Ut.PERMISSION_DENIED:case Ut.FAILED_PRECONDITION:case Ut.ABORTED:case Ut.OUT_OF_RANGE:case Ut.UNIMPLEMENTED:case Ut.DATA_LOSS:return!0}}function zn(r){if(void 0===r)return Ki("GRPC error has no .code"),Ut.UNKNOWN;switch(r){case yt.OK:return Ut.OK;case yt.CANCELLED:return Ut.CANCELLED;case yt.UNKNOWN:return Ut.UNKNOWN;case yt.DEADLINE_EXCEEDED:return Ut.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return Ut.RESOURCE_EXHAUSTED;case yt.INTERNAL:return Ut.INTERNAL;case yt.UNAVAILABLE:return Ut.UNAVAILABLE;case yt.UNAUTHENTICATED:return Ut.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return Ut.INVALID_ARGUMENT;case yt.NOT_FOUND:return Ut.NOT_FOUND;case yt.ALREADY_EXISTS:return Ut.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return Ut.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return Ut.FAILED_PRECONDITION;case yt.ABORTED:return Ut.ABORTED;case yt.OUT_OF_RANGE:return Ut.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return Ut.UNIMPLEMENTED;case yt.DATA_LOSS:return Ut.DATA_LOSS;default:return Un()}}(zt=yt||(yt={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Wn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ts}static getOrCreateInstance(){return null===ts&&(ts=new Wn),ts}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ts=null;function wa(){return new TextEncoder}const qd=new pa([4294967295,4294967295],0);function Ac(r){const e=wa().encode(r),t=new il;return t.update(e),new Uint8Array(t.digest())}function xc(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new pa([t,s],0),new pa([c,g],0)]}class Rs{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(s<0)throw new Qa(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Qa(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=pa.fromNumber(this.yt)}Tt(e,t,s){let c=e.add(t.multiply(pa.fromNumber(s)));return 1===c.compare(qd)&&(c=new pa([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=Ac(e),[s,c]=xc(t);for(let g=0;g<this.hashCount;g++){const w=this.Tt(s,c,g);if(!this.Et(w))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),w=new Rs(g,c,t);return s.forEach(O=>w.insert(O)),w}insert(e){if(0===this.yt)return;const t=Ac(e),[s,c]=xc(t);for(let g=0;g<this.hashCount;g++){const w=this.Tt(s,c,g);this.Rt(w)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bl{constructor(e,t,s,c,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new bl(Zn.min(),c,new zi(cr),Mo(),Yr())}}class Mu{constructor(e,t,s,c,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Mu(s,t,Yr(),Yr(),Yr())}}class Rc{constructor(e,t,s,c){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=c}}class Kd{constructor(e,t){this.targetId=e,this.bt=t}}class Mc{constructor(e,t,s=hn.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Mh{constructor(){this.Vt=0,this.St=Tf(),this.Dt=hn.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Yr(),t=Yr(),s=Yr();return this.St.forEach((c,g)=>{switch(g){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Un()}}),new Mu(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Tf()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Ph{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Mo(),this.jt=pd(),this.zt=new zi(cr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Un()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const s=e.targetId,c=e.bt.count,g=this.ne(s);if(g){const w=g.target;if(Ea(w))if(0===c){const O=new xn(w.path);this.Jt(s,O,es.newNoDocument(O,Zn.min()))}else Jn(1===c);else{const O=this.se(s);if(O!==c){const H=this.ie(e,O);0!==H&&(this.te(s),this.zt=this.zt.insert(s,2===H?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Z,oe,We){var Tt,Qt,Cn,Tn,sr,ni;const Ri={localCacheCount:oe,existenceFilterCount:We.count},ri=We.unchangedNames;return ri&&(Ri.bloomFilter={applied:0===Z,hashCount:null!==(Tt=null==ri?void 0:ri.hashCount)&&void 0!==Tt?Tt:0,bitmapLength:null!==(Tn=null===(Cn=null===(Qt=null==ri?void 0:ri.bits)||void 0===Qt?void 0:Qt.bitmap)||void 0===Cn?void 0:Cn.length)&&void 0!==Tn?Tn:0,padding:null!==(ni=null===(sr=null==ri?void 0:ri.bits)||void 0===sr?void 0:sr.padding)&&void 0!==ni?ni:0}),Ri}(H,O,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:c}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:g="",padding:w=0},hashCount:O=0}=s;let H,Z;try{H=ir(g).toUint8Array()}catch(oe){if(oe instanceof St)return pi("Decoding the base64 bloom filter in existence filter failed ("+oe.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw oe}try{Z=new Rs(H,w,O)}catch(oe){return pi(oe instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",oe),1}return 0===Z.yt?1:c!==t-this.re(e.targetId,Z)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let c=0;return s.forEach(g=>{const w=this.Kt.oe(),O=`projects/${w.projectId}/databases/${w.database}/documents/${g.path.canonicalString()}`;t.At(O)||(this.Jt(e,g,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((g,w)=>{const O=this.ne(w);if(O){if(g.current&&Ea(O.target)){const H=new xn(O.target.path);null!==this.Qt.get(H)||this.ce(w,H)||this.Jt(w,H,es.newNoDocument(H,e))}g.kt&&(t.set(w,g.Ot()),g.$t())}});let s=Yr();this.jt.forEach((g,w)=>{let O=!0;w.forEachWhile(H=>{const Z=this.ne(H);return!Z||"TargetPurposeLimboResolution"===Z.purpose||(O=!1,!1)}),O&&(s=s.add(g))}),this.Qt.forEach((g,w)=>w.setReadTime(e));const c=new bl(e,t,this.zt,this.Qt,s);return this.Qt=Mo(),this.jt=pd(),this.zt=new zi(cr),c}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Mh,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new B(cr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||on("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Mh),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function pd(){return new zi(xn.comparator)}function Tf(){return new zi(xn.comparator)}const Xy={asc:"ASCENDING",desc:"DESCENDING"},Pu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sf={and:"AND",or:"OR"};class Mp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oh(r,e){return r.useProto3Json||ee(e)?e:{value:e}}function ou(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kh(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Pp(r,e){return ou(r,e.toTimestamp())}function Ns(r){return Jn(!!r),Zn.fromTimestamp(function(e){const t=ln(e);return new Br(t.seconds,t.nanos)}(r))}function Yd(r,e){return(t=r,new vi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Af(r){const e=vi.fromString(r);return Jn(Bp(e)),e}function Pc(r,e){return Yd(r.databaseId,e.path)}function Hl(r,e){const t=Af(e);if(t.get(1)!==r.databaseId.projectId)throw new Zt(Ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Zt(Ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xn(Nh(t))}function Op(r,e){return Yd(r.databaseId,e)}function xf(r){const e=Af(r);return 4===e.length?vi.emptyPath():Nh(e)}function Oc(r){return new vi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Nh(r){return Jn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function kc(r,e,t){return{name:Pc(r,e),fields:t.value.mapValue.fields}}function kp(r,e,t){const s=Hl(r,e.name),c=Ns(e.updateTime),g=e.createTime?Ns(e.createTime):Zn.min(),w=new ks({mapValue:{fields:e.fields}}),O=es.newFoundDocument(s,c,g,w);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function Zd(r,e){let t;if(e instanceof Ho)t={update:kc(r,e.key,e.value)};else if(e instanceof D)t={delete:Pc(r,e.key)};else if(e instanceof sa)t={update:kc(r,e.key,e.data),updateMask:zm(e.fieldMask)};else{if(!(e instanceof v))return Un();t={verify:Pc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,g){const w=g.transform;if(w instanceof iu)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof jl)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof xu)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Ia)return{fieldPath:g.field.canonicalString(),increment:w.wt};throw Un()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Pp(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Un()),t;var c}function gd(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?fs.updateTime(Ns(c.updateTime)):void 0!==c.exists?fs.exists(c.exists):fs.none():fs.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(g,w){let O=null;"setToServerValue"in w?(Jn("REQUEST_TIME"===w.setToServerValue),O=new iu):"appendMissingElements"in w?O=new jl(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new xu(w.removeAllFromArray.values||[]):"increment"in w?O=new Ia(g,w.increment):Un();const H=Dr.fromServerFormat(w.fieldPath);return new zd(H,O)}(r,c)):[];var c;if(e.update){const c=Hl(r,e.update.name),g=new ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new ot((e.updateMask.fieldPaths||[]).map(Z=>Dr.fromServerFormat(Z)));return new sa(c,g,w,t,s)}return new Ho(c,g,t,s)}if(e.delete){const c=Hl(r,e.delete);return new D(c,t)}if(e.verify){const c=Hl(r,e.verify);return new v(c,t)}return Un()}function Ou(r,e){return{documents:[Op(r,e.path)]}}function md(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Op(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Op(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(H){if(0!==H.length)return Qd(Ci.create(H,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const g=function(H){if(0!==H.length)return H.map(Z=>{return{field:Nc((oe=Z).field),direction:Ng(oe.dir)};var oe})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=Oh(r,e.limit);var O,H;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function ku(r){let e=xf(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){Jn(1===s);const oe=t.from[0];oe.allDescendants?c=oe.collectionId:e=e.child(oe.collectionId)}let g=[];t.where&&(g=function(oe){const We=Lp(oe);return We instanceof Ci&&El(We)?We.getFilters():[We]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(oe=>{return new Dc(Nu((We=oe).field),function(Tt){switch(Tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(We.direction));var We}));let O=null;t.limit&&(O=function(oe){let We;return We="object"==typeof oe?oe.value:oe,ee(We)?null:We}(t.limit));let H=null;var oe;t.startAt&&(H=new Xl((oe=t.startAt).values||[],!!oe.before));let Z=null;return t.endAt&&(Z=function(oe){return new Xl(oe.values||[],!oe.before)}(t.endAt)),rc(e,c,w,g,O,"F",H,Z)}function Lp(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nu(e.unaryFilter.field);return $r.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Nu(e.unaryFilter.field);return $r.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Nu(e.unaryFilter.field);return $r.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Nu(e.unaryFilter.field);return $r.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Un()}}(r):void 0!==r.fieldFilter?$r.create(Nu((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Un()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Ci.create(e.compositeFilter.filters.map(t=>Lp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Un()}}(e.compositeFilter.op))}(r):Un();var e}function Ng(r){return Xy[r]}function lc(r){return Pu[r]}function Fg(r){return Sf[r]}function Nc(r){return{fieldPath:r.canonicalString()}}function Nu(r){return Dr.fromServerFormat(r.fieldPath)}function Qd(r){return r instanceof $r?function(e){if("=="===e.op){if(io(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NAN"}};if(Pd(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(io(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NAN"}};if(Pd(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(e.field),op:lc(e.op),value:e.value}}}(r):r instanceof Ci?function(e){const t=e.getFilters().map(s=>Qd(s));return 1===t.length?t[0]:{compositeFilter:{op:Fg(e.op),filters:t}}}(r):Un()}function zm(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bp(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class uc{constructor(e,t,s,c,g=Zn.min(),w=Zn.min(),O=hn.EMPTY_BYTE_STRING,H=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O,this.expectedCount=H}withSequenceNumber(e){return new uc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Fh{constructor(e){this.le=e}}function Up(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Fc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Pc(c=r.le,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:ou(c,g.version.toTimestamp()),createTime:ou(c,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:au(e.version)};else{if(!e.isUnknownDocument())return Un();s.unknownDocument={path:t.path.toArray(),version:au(e.version)}}var c,g;return s}function Fc(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function au(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _o(r){const e=new Br(r.seconds,r.nanoseconds);return Zn.fromTimestamp(e)}function Ja(r,e){const t=(e.baseMutations||[]).map(g=>gd(r.le,g));for(let g=0;g<e.mutations.length-1;++g)g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(e.mutations[g].updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g);const s=e.mutations.map(g=>gd(r.le,g)),c=Br.fromMillis(e.localWriteTimeMs);return new _(e.batchId,c,t,s)}function Lh(r){const e=_o(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?_o(r.lastLimboFreeSnapshotVersion):Zn.min();let s;var c;return void 0!==r.query.documents?(Jn(1===(c=r.query).documents.length),s=Ro($l(xf(c.documents[0])))):s=Ro(ku(r.query)),new uc(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,hn.fromBase64String(r.resumeToken))}function Mf(r,e){const t=au(e.snapshotVersion),s=au(e.lastLimboFreeSnapshotVersion);let c;c=Ea(e.target)?Ou(r.le,e.target):md(r.le,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eu(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function Bh(r){const e=ku({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?ic(e,e.limit,"L"):e}function yd(r,e){return new G(e.largestBatchId,gd(r.le,e.overlayMutation))}function Jd(r,e){const t=e.path.lastSegment();return[r,xt(e.path.popLast()),t]}function Vp(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:au(s.readTime),documentKey:xt(s.documentKey.path),largestBatchId:s.largestBatchId}}class Dl{getBundleMetadata(e,t){return $h(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:_o(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return $h(e).put({bundleId:(s=t).id,createTime:au(Ns(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Pf(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Bh(c.bundledQuery),readTime:_o(c.readTime)};var c})}saveNamedQuery(e,t){return Pf(e).put({name:(s=t).name,readTime:au(Ns(s.readTime)),bundledQuery:s.bundledQuery});var s}}function $h(r){return Is(r,"bundles")}function Pf(r){return Is(r,"namedQueries")}class vd{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new vd(e,t.uid||"")}getOverlay(e,t){return Lc(e).get(Jd(this.userId,t)).next(s=>s?yd(this.serializer,s):null)}getOverlays(e,t){const s=La();return mt.forEach(t,c=>this.getOverlay(e,c).next(g=>{null!==g&&s.set(c,g)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((g,w)=>{const O=new G(t,w);c.push(this.de(e,O))}),mt.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(w=>c.add(xt(w.getCollectionPath())));const g=[];return c.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,s],[this.userId,w,s+1],!1,!0);g.push(Lc(e).J("collectionPathOverlayIndex",O))}),mt.waitFor(g)}getOverlaysForCollection(e,t,s){const c=La(),g=xt(t),w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return Lc(e).j("collectionPathOverlayIndex",w).next(O=>{for(const H of O){const Z=yd(this.serializer,H);c.set(Z.getKey(),Z)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const g=La();let w;const O=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lc(e).X({index:"collectionGroupOverlayIndex",range:O},(H,Z,oe)=>{const We=yd(this.serializer,Z);g.size()<c||We.largestBatchId===w?(g.set(We.getKey(),We),w=We.largestBatchId):oe.done()}).next(()=>g)}de(e,t){return Lc(e).put(function(s,c,g){const[w,O,H]=Jd(c,g.mutation.key);return{userId:c,collectionPath:O,documentId:H,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Zd(s.le,g.mutation)}}(this.serializer,this.userId,t))}}function Lc(r){return Is(r,"documentOverlays")}class Hs{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(tr(e.integerValue));else if("doubleValue"in e){const s=tr(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),ie(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(ir(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?Od(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Un()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const c of Object.keys(s))this.Ie(c,t),this.we(s[c],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const c of s)this.we(c,t)}Ae(e,t){this.ge(t,37),xn.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Lg(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Bg(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const g=Lg(255&t[c]);if(s+=g,8!==g)break}return s}(r);return Math.ceil(e/8)}Hs.be=new Hs;class $g{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),s=Bg(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),s=Bg(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class Gm{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class Wm{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Uh{constructor(){this.Qe=new $g,this.je=new Gm(this.Qe),this.ze=new Wm(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Bc{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Bc(this.indexId,this.documentKey,this.arrayValue,s)}}function Ca(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=lu(r.arrayValue,e.arrayValue),0!==t?t:(t=lu(r.directionalValue,e.directionalValue),0!==t?t:xn.comparator(r.documentKey,e.documentKey)))}function lu(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Ug{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){Jn(e.collectionGroup===this.collectionId);const t=Ec(e);if(void 0!==t&&!this.tn(t))return!1;const s=eo(e);let c=0,g=0;for(;c<s.length&&this.tn(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Xe){const w=s[c];if(!this.en(this.Xe,w)||!this.nn(this.Je[g++],w))return!1;++c}for(;c<s.length;++c)if(g>=this.Je.length||!this.nn(this.Je[g++],s[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vg(r){var e,t;if(Jn(r instanceof $r||r instanceof Ci),r instanceof $r){if(r instanceof Ql){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(g=>$r.create(r.field,"==",g)))||[];return Ci.create(c,"or")}return r}const s=r.filters.map(c=>Vg(c));return Ci.create(s,r.op)}function jg(r){if(0===r.getFilters().length)return[];const e=kf(Vg(r));return Jn(jp(e)),Vh(e)||Of(e)?[e]:e.getFilters()}function Vh(r){return r instanceof $r}function Of(r){return r instanceof Ci&&El(r)}function jp(r){return Vh(r)||Of(r)||function(e){if(e instanceof Ci&&Ju(e)){for(const t of e.getFilters())if(!Vh(t)&&!Of(t))return!1;return!0}return!1}(r)}function kf(r){if(Jn(r instanceof $r||r instanceof Ci),r instanceof $r)return r;if(1===r.filters.length)return kf(r.filters[0]);const e=r.filters.map(s=>kf(s));let t=Ci.create(e,r.op);return t=eh(t),jp(t)?t:(Jn(t instanceof Ci),Jn(_l(t)),Jn(t.filters.length>1),t.filters.reduce((s,c)=>Nf(s,c)))}function Nf(r,e){let t;return Jn(r instanceof $r||r instanceof Ci),Jn(e instanceof $r||e instanceof Ci),t=r instanceof $r?e instanceof $r?Ci.create([r,e],"and"):Hg(r,e):e instanceof $r?Hg(e,r):function(s,c){if(Jn(s.filters.length>0&&c.filters.length>0),_l(s)&&_l(c))return Il(s,c.getFilters());const g=Ju(s)?s:c,w=Ju(s)?c:s,O=g.filters.map(H=>Nf(H,w));return Ci.create(O,"or")}(r,e),eh(t)}function Hg(r,e){if(_l(e))return Il(e,r.getFilters());{const t=e.filters.map(s=>Nf(r,s));return Ci.create(t,"or")}}function eh(r){if(Jn(r instanceof $r||r instanceof Ci),r instanceof $r)return r;const e=r.getFilters();if(1===e.length)return eh(e[0]);if(Cu(r))return r;const t=e.map(c=>eh(c)),s=[];return t.forEach(c=>{c instanceof $r?s.push(c):c instanceof Ci&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Ci.create(s,r.op)}class qm{constructor(){this.sn=new Hp}addToCollectionParentIndex(e,t){return this.sn.add(t),mt.resolve()}getCollectionParents(e,t){return mt.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return mt.resolve()}deleteFieldIndex(e,t){return mt.resolve()}getDocumentsMatchingTarget(e,t){return mt.resolve(null)}getIndexType(e,t){return mt.resolve(0)}getFieldIndexes(e,t){return mt.resolve([])}getNextCollectionGroupToUpdate(e){return mt.resolve(null)}getMinOffset(e,t){return mt.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,t){return mt.resolve(ti.min())}updateCollectionGroup(e,t,s){return mt.resolve()}updateIndexEntries(e,t){return mt.resolve()}}class Hp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new B(vi.comparator),g=!c.has(s);return this.index[t]=c.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new B(vi.comparator)).toArray()}}const cl=new Uint8Array(0);class zp{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new Hp,this.on=new nu(s=>eu(s),(s,c)=>Vi(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const g={collectionId:s,parent:xt(c)};return Ff(e).put(g)}return mt.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Ma(t),""],!1,!0);return Ff(e).j(c).next(g=>{for(const w of g){if(w.collectionId!==t)break;s.push(In(w.parent))}return s})}addFieldIndex(e,t){const s=cc(e),c={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete c.indexId;const g=s.add(c);if(t.indexState){const w=zl(e);return g.next(O=>{w.put(Vp(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=cc(e),c=zl(e),g=jh(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=jh(e);let c=!0;const g=new Map;return mt.forEach(this.un(t),w=>this.cn(e,w).next(O=>{c&&(c=!!O),g.set(w,O)})).next(()=>{if(c){let w=Yr();const O=[];return mt.forEach(g,(H,Z)=>{var oe;on("IndexedDbIndexManager",`Using index ${oe=H,`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(ri=>`${ri.fieldPath}:${ri.kind}`).join(",")}`} to execute ${eu(t)}`);const We=function(ri,Va){const Ps=Ec(Va);if(void 0===Ps)return null;for(const ps of ia(ri,Ps.fieldPath))switch(ps.op){case"array-contains-any":return ps.value.arrayValue.values||[];case"array-contains":return[ps.value]}return null}(Z,H),Tt=function(ri,Va){const Ps=new Map;for(const ps of eo(Va))for(const ja of ia(ri,ps.fieldPath))switch(ja.op){case"==":case"in":Ps.set(ps.fieldPath.canonicalString(),ja.value);break;case"not-in":case"!=":return Ps.set(ps.fieldPath.canonicalString(),ja.value),Array.from(Ps.values())}return null}(Z,H),Qt=function(ri,Va){const Ps=[];let ps=!0;for(const ja of eo(Va)){const Ih=0===ja.kind?id(ri,ja.fieldPath,ri.startAt):Vd(ri,ja.fieldPath,ri.startAt);Ps.push(Ih.value),ps&&(ps=Ih.inclusive)}return new Xl(Ps,ps)}(Z,H),Cn=function(ri,Va){const Ps=[];let ps=!0;for(const ja of eo(Va)){const Ih=0===ja.kind?Vd(ri,ja.fieldPath,ri.endAt):id(ri,ja.fieldPath,ri.endAt);Ps.push(Ih.value),ps&&(ps=Ih.inclusive)}return new Xl(Ps,ps)}(Z,H),Tn=this.an(H,Z,Qt),sr=this.an(H,Z,Cn),ni=this.hn(H,Z,Tt),Ri=this.ln(H.indexId,We,Tn,Qt.inclusive,sr,Cn.inclusive,ni);return mt.forEach(Ri,ri=>s.H(ri,t.limit).next(Va=>{Va.forEach(Ps=>{const ps=xn.fromSegments(Ps.documentKey);w.has(ps)||(w=w.add(ps),O.push(ps))})}))}).next(()=>O)}return mt.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:jg(Ci.create(e.filters,"and")).map(s=>rd(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,c,g,w,O){const H=(null!=t?t.length:1)*Math.max(s.length,g.length),Z=H/(null!=t?t.length:1),oe=[];for(let We=0;We<H;++We){const Tt=t?this.fn(t[We/Z]):cl,Qt=this.dn(e,Tt,s[We%Z],c),Cn=this._n(e,Tt,g[We%Z],w),Tn=O.map(sr=>this.dn(e,Tt,sr,!0));oe.push(...this.createRange(Qt,Cn,Tn))}return oe}dn(e,t,s,c){const g=new Bc(e,xn.empty(),t,s);return c?g:g.He()}_n(e,t,s,c){const g=new Bc(e,xn.empty(),t,s);return c?g.He():g}cn(e,t){const s=new Ug(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(g=>{let w=null;for(const O of g)s.Ze(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,t){let s=2;const c=this.un(t);return mt.forEach(c,g=>this.cn(e,g).next(w=>{w?0!==s&&w.fields.length<function(O){let H=new B(Dr.comparator),Z=!1;for(const oe of O.filters)for(const We of oe.getFlattenedFilters())We.field.isKeyField()||("array-contains"===We.op||"array-contains-any"===We.op?Z=!0:H=H.add(We.field));for(const oe of O.orderBy)oe.field.isKeyField()||(H=H.add(oe.field));return H.size+(Z?1:0)}(g)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}wn(e,t){const s=new Uh;for(const c of eo(e)){const g=t.data.field(c.fieldPath);if(null==g)return null;const w=s.We(c.kind);Hs.be._e(g,w)}return s.Ge()}fn(e){const t=new Uh;return Hs.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new Uh;return Hs.be._e(ro(this.databaseId,t),s.We(function(c){const g=eo(c);return 0===g.length?0:g[g.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let c=[];c.push(new Uh);let g=0;for(const w of eo(e)){const O=s[g++];for(const H of c)if(this.gn(t,w.fieldPath)&&Eu(O))c=this.yn(c,w,O);else{const Z=H.We(w.kind);Hs.be._e(O,Z)}}return this.pn(c)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const c=[...e],g=[];for(const w of s.arrayValue.values||[])for(const O of c){const H=new Uh;H.seed(O.Ge()),Hs.be._e(w,H.We(t.kind)),g.push(H)}return g}gn(e,t){return!!e.filters.find(s=>s instanceof $r&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=cc(e),c=zl(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(g=>{const w=[];return mt.forEach(g,O=>c.get([O.indexId,this.uid]).next(H=>{w.push(function(Z,oe){const We=oe?new Pa(oe.sequenceNumber,new ti(_o(oe.readTime),new xn(In(oe.documentKey)),oe.largestBatchId)):Pa.empty(),Tt=Z.fields.map(([Qt,Cn])=>new Nl(Dr.fromServerFormat(Qt),Cn));return new ol(Z.indexId,Z.collectionGroup,Tt,We)}(O,H))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const g=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==g?g:cr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=cc(e),g=zl(e);return this.In(e).next(w=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>mt.forEach(O,H=>g.put(Vp(H.indexId,this.user,w,s)))))}updateIndexEntries(e,t){const s=new Map;return mt.forEach(t,(c,g)=>{const w=s.get(c.collectionGroup);return(w?mt.resolve(w):this.getFieldIndexes(e,c.collectionGroup)).next(O=>(s.set(c.collectionGroup,O),mt.forEach(O,H=>this.Tn(e,c,H).next(Z=>{const oe=this.En(g,H);return Z.isEqual(oe)?mt.resolve():this.An(e,g,H,Z,oe)}))))})}Rn(e,t,s,c){return jh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,c){return jh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const c=jh(e);let g=new B(Ca);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(w,O)=>{g=g.add(new Bc(s.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>g)}En(e,t){let s=new B(Ca);const c=this.wn(t,e);if(null==c)return s;const g=Ec(t);if(null!=g){const w=e.data.field(g.fieldPath);if(Eu(w))for(const O of w.arrayValue.values||[])s=s.add(new Bc(t.indexId,e.key,this.fn(O),c))}else s=s.add(new Bc(t.indexId,e.key,cl,c));return s}An(e,t,s,c,g){on("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(O,H,Z,oe,We){const Tt=O.getIterator(),Qt=H.getIterator();let Cn=Ee(Tt),Tn=Ee(Qt);for(;Cn||Tn;){let sr=!1,ni=!1;if(Cn&&Tn){const Ri=Z(Cn,Tn);Ri<0?ni=!0:Ri>0&&(sr=!0)}else null!=Cn?ni=!0:sr=!0;sr?(oe(Tn),Tn=Ee(Qt)):ni?(We(Cn),Cn=Ee(Tt)):(Cn=Ee(Tt),Tn=Ee(Qt))}}(c,g,Ca,O=>{w.push(this.Rn(e,t,s,O))},O=>{w.push(this.vn(e,t,s,O))}),mt.waitFor(w)}In(e){let t=1;return zl(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,g)=>{g.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((w,O)=>Ca(w,O)).filter((w,O,H)=>!O||0!==Ca(w,H[O-1]));const c=[];c.push(e);for(const w of s){const O=Ca(w,e),H=Ca(w,t);if(0===O)c[0]=e.He();else if(O>0&&H<0)c.push(w),c.push(w.He());else if(H>0)break}c.push(t);const g=[];for(let w=0;w<c.length;w+=2){if(this.Pn(c[w],c[w+1]))return[];g.push(IDBKeyRange.bound([c[w].indexId,this.uid,c[w].arrayValue,c[w].directionalValue,cl,[]],[c[w+1].indexId,this.uid,c[w+1].arrayValue,c[w+1].directionalValue,cl,[]]))}return g}Pn(e,t){return Ca(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zg)}getMinOffset(e,t){return mt.mapArray(this.un(t),s=>this.cn(e,s).next(c=>c||Un())).next(zg)}}function Ff(r){return Is(r,"collectionParents")}function jh(r){return Is(r,"indexEntries")}function cc(r){return Is(r,"indexConfiguration")}function zl(r){return Is(r,"indexState")}function zg(r){Jn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;vu(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new ti(e.readTime,e.documentKey,t)}const Hh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zo{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new zo(e,zo.DEFAULT_COLLECTION_PERCENTILE,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gg(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let O=0;const H=s.X({range:w},(oe,We,Tt)=>(O++,Tt.delete()));g.push(H.next(()=>{Jn(1===O)}));const Z=[];for(const oe of t.mutations){const We=xs(e,oe.key.path,t.batchId);g.push(c.delete(We)),Z.push(oe.key)}return mt.waitFor(g).next(()=>Z)}function dc(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Un();e=r.noDocument}return JSON.stringify(e).length}zo.DEFAULT_COLLECTION_PERCENTILE=10,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zo.DEFAULT=new zo(41943040,zo.DEFAULT_COLLECTION_PERCENTILE,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zo.DISABLED=new zo(-1,0,0);class Zr{constructor(e,t,s,c){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=c,this.bn={}}static fe(e,t,s,c){Jn(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Zr(g,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).X({index:"userMutationsIndex",range:s},(c,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const g=$c(e),w=Fu(e);return w.add({}).next(O=>{Jn("number"==typeof O);const H=new _(O,t,s,c),Z=function(Tt,Qt,Cn){const Tn=Cn.baseMutations.map(ni=>Zd(Tt.le,ni)),sr=Cn.mutations.map(ni=>Zd(Tt.le,ni));return{userId:Qt,batchId:Cn.batchId,localWriteTimeMs:Cn.localWriteTime.toMillis(),baseMutations:Tn,mutations:sr}}(this.serializer,this.userId,H),oe=[];let We=new B((Tt,Qt)=>cr(Tt.canonicalString(),Qt.canonicalString()));for(const Tt of c){const Qt=xs(this.userId,Tt.key.path,O);We=We.add(Tt.key.path.popLast()),oe.push(w.put(Z)),oe.push(g.put(Qt,to))}return We.forEach(Tt=>{oe.push(this.indexManager.addToCollectionParentIndex(e,Tt))}),e.addOnCommittedListener(()=>{this.bn[O]=H.keys()}),mt.waitFor(oe).next(()=>H)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(s=>s?(Jn(s.userId===this.userId),Ja(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?mt.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return Fu(e).X({index:"userMutationsIndex",range:c},(w,O,H)=>{O.userId===this.userId&&(Jn(O.batchId>=s),g=Ja(this.serializer,O)),H.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Fu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,g,w)=>{s=g.batchId,w.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).j("userMutationsIndex",t).next(s=>s.map(c=>Ja(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=_i(this.userId,t.path),c=IDBKeyRange.lowerBound(s),g=[];return $c(e).X({range:c},(w,O,H)=>{const[Z,oe,We]=w,Tt=In(oe);if(Z===this.userId&&t.path.isEqual(Tt))return Fu(e).get(We).next(Qt=>{if(!Qt)throw Un();Jn(Qt.userId===this.userId),g.push(Ja(this.serializer,Qt))});H.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new B(cr);const c=[];return t.forEach(g=>{const w=_i(this.userId,g.path),O=IDBKeyRange.lowerBound(w),H=$c(e).X({range:O},(Z,oe,We)=>{const[Tt,Qt,Cn]=Z,Tn=In(Qt);Tt===this.userId&&g.path.isEqual(Tn)?s=s.add(Cn):We.done()});c.push(H)}),mt.waitFor(c).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,g=_i(this.userId,s),w=IDBKeyRange.lowerBound(g);let O=new B(cr);return $c(e).X({range:w},(H,Z,oe)=>{const[We,Tt,Qt]=H,Cn=In(Tt);We===this.userId&&s.isPrefixOf(Cn)?Cn.length===c&&(O=O.add(Qt)):oe.done()}).next(()=>this.Sn(e,O))}Sn(e,t){const s=[],c=[];return t.forEach(g=>{c.push(Fu(e).get(g).next(w=>{if(null===w)throw Un();Jn(w.userId===this.userId),s.push(Ja(this.serializer,w))}))}),mt.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Gg(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),mt.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return mt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return $c(e).X({range:s},(g,w,O)=>{if(g[0]===this.userId){const H=In(g[1]);c.push(H)}else O.done()}).next(()=>{Jn(0===c.length)})})}containsKey(e,t){return Lf(e,this.userId,t)}Cn(e){return zh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lf(r,e,t){const s=_i(e,t.path),c=s[1],g=IDBKeyRange.lowerBound(s);let w=!1;return $c(r).X({range:g,Y:!0},(O,H,Z)=>{const[oe,We,Tt]=O;oe===e&&We===c&&(w=!0),Z.done()}).next(()=>w)}function Fu(r){return Is(r,"mutations")}function $c(r){return Is(r,"documentMutations")}function zh(r){return Is(r,"mutationQueues")}class hc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new hc(0)}static kn(){return new hc(-1)}}class Bf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new hc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>Zn.fromTimestamp(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>th(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(Jn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let c=0;const g=[];return th(e).X((w,O)=>{const H=Lh(O);H.sequenceNumber<=t&&null===s.get(H.targetId)&&(c++,g.push(this.removeTargetData(e,H)))}).next(()=>mt.waitFor(g)).next(()=>c)}forEachTarget(e,t){return th(e).X((s,c)=>{const g=Lh(c);t(g)})}Mn(e){return Gp(e).get("targetGlobalKey").next(t=>(Jn(null!==t),t))}On(e,t){return Gp(e).put("targetGlobalKey",t)}$n(e,t){return th(e).put(Mf(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=eu(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return th(e).X({range:c,index:"queryTargetsIndex"},(w,O,H)=>{const Z=Lh(O);Vi(t,Z.target)&&(g=Z,H.done())}).next(()=>g)}addMatchingKeys(e,t,s){const c=[],g=Lu(e);return t.forEach(w=>{const O=xt(w.path);c.push(g.put({targetId:s,path:O})),c.push(this.referenceDelegate.addReference(e,s,w))}),mt.waitFor(c)}removeMatchingKeys(e,t,s){const c=Lu(e);return mt.forEach(t,g=>{const w=xt(g.path);return mt.waitFor([c.delete([s,w]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=Lu(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=Lu(e);let g=Yr();return c.X({range:s,Y:!0},(w,O,H)=>{const Z=In(w[1]),oe=new xn(Z);g=g.add(oe)}).next(()=>g)}containsKey(e,t){const s=xt(t.path),c=IDBKeyRange.bound([s],[Ma(s)],!1,!0);let g=0;return Lu(e).X({index:"documentTargetsIndex",Y:!0,range:c},([w,O],H,Z)=>{0!==w&&(g++,Z.done())}).next(()=>g>0)}he(e,t){return th(e).get(t).next(s=>s?Lh(s):null)}}function th(r){return Is(r,"targets")}function Gp(r){return Is(r,"targetGlobal")}function Lu(r){return Is(r,"targetDocuments")}function Wg([r,e],[t,s]){const c=cr(r,t);return 0===c?cr(e,s):c}class Km{constructor(e){this.Bn=e,this.buffer=new B(Wg),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Wg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;on("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Vo(s)?on("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ds(s)}yield t.Gn(3e5)}))}}class qp{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return mt.resolve(j.ct);const s=new Km(t);return this.Qn.forEachTarget(e,c=>s.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>s.Un(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(on("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(Hh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(on("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hh):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,c,g,w,O,H,Z;const oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(We=>(We>this.params.maximumSequenceNumbersToCollect?(on("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${We}`),c=this.params.maximumSequenceNumbersToCollect):c=We,w=Date.now(),this.nthSequenceNumber(e,c))).next(We=>(s=We,O=Date.now(),this.removeTargets(e,s,t))).next(We=>(g=We,H=Date.now(),this.removeOrphanedDocuments(e,s))).next(We=>(Z=Date.now(),Kl()<=et.in.DEBUG&&on("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-oe}ms\n\tDetermined least recently used ${c} in `+(O-w)+`ms\n\tRemoved ${g} targets in `+(H-O)+`ms\n\tRemoved ${We} documents in `+(Z-H)+`ms\nTotal Duration: ${Z-oe}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:g,documentsRemoved:We})))}}class Kp{constructor(e,t){this.db=e,this.garbageCollector=function fc(r,e){return new qp(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,c)=>t(c))}addReference(e,t,s){return _d(e,s)}removeReference(e,t,s){return _d(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return _d(e,t)}Yn(e,t){return function(s,c){let g=!1;return zh(s).Z(w=>Lf(s,w,c).next(O=>(O&&(g=!0),mt.resolve(!O)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let g=0;return this.Jn(e,(w,O)=>{if(O<=t){const H=this.Yn(e,w).next(Z=>{if(!Z)return g++,s.getEntry(e,w).next(()=>(s.removeEntry(w,Zn.min()),Lu(e).delete([0,xt(w.path)])))});c.push(H)}}).next(()=>mt.waitFor(c)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return _d(e,t)}Jn(e,t){const s=Lu(e);let c,g=j.ct;return s.X({index:"documentTargetsIndex"},([w,O],{path:H,sequenceNumber:Z})=>{0===w?(g!==j.ct&&t(new xn(In(c)),g),g=Z,c=H):g=j.ct}).next(()=>{g!==j.ct&&t(new xn(In(c)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _d(r,e){return Lu(r).put((s=r.currentSequenceNumber,{targetId:0,path:xt(e.path),sequenceNumber:s}));var s}class ba{constructor(){this.changes=new nu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?mt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $f{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Tl(e).put(s)}removeEntry(e,t,s){return Tl(e).delete(function(c,g){const w=c.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Fc(g),w[w.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=es.newInvalidDocument(t);return Tl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ed(t))},(c,g)=>{s=this.Zn(t,g)}).next(()=>s)}ts(e,t){let s={size:0,document:es.newInvalidDocument(t)};return Tl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ed(t))},(c,g)=>{s={document:this.Zn(t,g),size:dc(g)}}).next(()=>s)}getEntries(e,t){let s=Mo();return this.es(e,t,(c,g)=>{const w=this.Zn(c,g);s=s.insert(c,w)}).next(()=>s)}ns(e,t){let s=Mo(),c=new zi(xn.comparator);return this.es(e,t,(g,w)=>{const O=this.Zn(g,w);s=s.insert(g,O),c=c.insert(g,dc(w))}).next(()=>({documents:s,ss:c}))}es(e,t,s){if(t.isEmpty())return mt.resolve();let c=new B(Vc);t.forEach(H=>c=c.add(H));const g=IDBKeyRange.bound(Ed(c.first()),Ed(c.last())),w=c.getIterator();let O=w.getNext();return Tl(e).X({index:"documentKeyIndex",range:g},(H,Z,oe)=>{const We=xn.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;O&&Vc(O,We)<0;)s(O,null),O=w.getNext();O&&O.isEqual(We)&&(s(O,Z),O=w.hasNext()?w.getNext():null),O?oe.G(Ed(O)):oe.done()}).next(()=>{for(;O;)s(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const g=t.path,w=[g.popLast().toArray(),g.lastSegment(),Fc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],O=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).j(IDBKeyRange.bound(w,O,!0)).next(H=>{let Z=Mo();for(const oe of H){const We=this.Zn(xn.fromSegments(oe.prefixPath.concat(oe.collectionGroup,oe.documentId)),oe);We.isFoundDocument()&&(sc(t,We)||c.has(We.key))&&(Z=Z.insert(We.key,We))}return Z})}getAllFromCollectionGroup(e,t,s,c){let g=Mo();const w=qg(t,s),O=qg(t,ti.max());return Tl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(H,Z,oe)=>{const We=this.Zn(xn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);g=g.insert(We.key,We),g.size===c&&oe.done()}).next(()=>g)}newChangeBuffer(e){return new Yp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gl(e).get("remoteDocumentGlobalKey").next(t=>(Jn(!!t),t))}Xn(e,t){return Gl(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function $p(r,e){let t;if(e.document)t=kp(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=xn.fromSegments(e.noDocument.path),c=_o(e.noDocument.readTime);t=es.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Un();{const s=xn.fromSegments(e.unknownDocument.path),c=_o(e.unknownDocument.version);t=es.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new Br(s[0],s[1]);return Zn.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Zn.min()))return s}return es.newInvalidDocument(e)}}function Uc(r){return new $f(r)}class Yp extends ba{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new nu(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new B((g,w)=>cr(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const O=this.os.get(g);if(t.push(this.rs.removeEntry(e,g,O.readTime)),w.isValidDocument()){const H=Up(this.rs.serializer,w);c=c.add(g.path.popLast());const Z=dc(H);s+=Z-O.size,t.push(this.rs.addEntry(e,g,H))}else if(s-=O.size,this.trackRemovals){const H=Up(this.rs.serializer,w.convertToNoDocument(Zn.min()));t.push(this.rs.addEntry(e,g,H))}}),c.forEach(g=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.rs.updateMetadata(e,s)),mt.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:c})=>(c.forEach((g,w)=>{this.os.set(g,{size:w,readTime:s.get(g).readTime})}),s))}}function Gl(r){return Is(r,"remoteDocumentGlobal")}function Tl(r){return Is(r,"remoteDocumentsV14")}function Ed(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qg(r,e){const t=e.documentKey.path.toArray();return[r,Fc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vc(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(c=cr(t[g],s[g]),c)return c;return c=cr(t.length,s.length),c||(c=cr(t[t.length-2],s[s.length-2]),c||cr(t[t.length-1],s[s.length-1]))}class Gh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Kg{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&ac(s.mutation,c,ot.empty(),Br.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Yr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Yr()){const c=La();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(g=>{let w=oc();return g.forEach((O,H)=>{w=w.insert(O,H.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const s=La();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Yr()))}populateOverlays(e,t,s){const c=[];return s.forEach(g=>{t.has(g)||c.push(g)}),this.documentOverlayCache.getOverlays(e,c).next(g=>{g.forEach((w,O)=>{t.set(w,O)})})}computeViews(e,t,s,c){let g=Mo();const w=Au(),O=Au();return t.forEach((H,Z)=>{const oe=s.get(Z.key);c.has(Z.key)&&(void 0===oe||oe.mutation instanceof sa)?g=g.insert(Z.key,Z):void 0!==oe?(w.set(Z.key,oe.mutation.getFieldMask()),ac(oe.mutation,Z,oe.mutation.getFieldMask(),Br.now())):w.set(Z.key,ot.empty())}),this.recalculateAndSaveOverlays(e,g).next(H=>(H.forEach((Z,oe)=>w.set(Z,oe)),t.forEach((Z,oe)=>{var We;return O.set(Z,new Gh(oe,null!==(We=w.get(Z))&&void 0!==We?We:null))}),O))}recalculateAndSaveOverlays(e,t){const s=Au();let c=new zi((w,O)=>w-O),g=Yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const O of w)O.keys().forEach(H=>{const Z=t.get(H);if(null===Z)return;let oe=s.get(H)||ot.empty();oe=O.applyToLocalView(Z,oe),s.set(H,oe);const We=(c.get(O.batchId)||Yr()).add(H);c=c.insert(O.batchId,We)})}).next(()=>{const w=[],O=c.getReverseIterator();for(;O.hasNext();){const H=O.getNext(),Z=H.key,oe=H.value,We=Su();oe.forEach(Tt=>{if(!g.has(Tt)){const Qt=Cl(t.get(Tt),s.get(Tt));null!==Qt&&We.set(Tt,Qt),g=g.add(Tt)}}),w.push(this.documentOverlayCache.saveOverlays(e,Z,We))}return mt.waitFor(w)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return xn.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(g=>{const w=c-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-g.size):mt.resolve(La());let O=-1,H=g;return w.next(Z=>mt.forEach(Z,(oe,We)=>(O<We.largestBatchId&&(O=We.largestBatchId),g.get(oe)?mt.resolve():this.remoteDocumentCache.getEntry(e,oe).next(Tt=>{H=H.insert(oe,Tt)}))).next(()=>this.populateOverlays(e,Z,g)).next(()=>this.computeViews(e,H,Z,Yr())).next(oe=>({batchId:O,changes:Tu(oe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xn(t)).next(s=>{let c=oc();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let g=oc();return this.indexManager.getCollectionParents(e,c).next(w=>mt.forEach(w,O=>{const H=(Z=t,oe=O.child(c),new wl(oe,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,oe;return this.getDocumentsMatchingCollectionQuery(e,H,s).next(Z=>{Z.forEach((oe,We)=>{g=g.insert(oe,We)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(g=>{c.forEach((O,H)=>{const Z=H.getKey();null===g.get(Z)&&(g=g.insert(Z,es.newInvalidDocument(Z)))});let w=oc();return g.forEach((O,H)=>{const Z=c.get(O);void 0!==Z&&ac(Z.mutation,H,ot.empty(),Br.now()),sc(t,H)&&(w=w.insert(O,H))}),w})}}class Yg{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return mt.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:Ns(s.createTime)}),mt.resolve()}getNamedQuery(e,t){return mt.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:Bh(s.bundledQuery),readTime:Ns(s.readTime)}),mt.resolve();var s}}class nh{constructor(){this.overlays=new zi(xn.comparator),this.hs=new Map}getOverlay(e,t){return mt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=La();return mt.forEach(t,c=>this.getOverlay(e,c).next(g=>{null!==g&&s.set(c,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,g)=>{this.de(e,t,g)}),mt.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.hs.get(s);return void 0!==c&&(c.forEach(g=>this.overlays=this.overlays.remove(g)),this.hs.delete(s)),mt.resolve()}getOverlaysForCollection(e,t,s){const c=La(),g=t.length+1,w=new xn(t.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const H=O.getNext().value,Z=H.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===g&&H.largestBatchId>s&&c.set(H.getKey(),H)}return mt.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let g=new zi((Z,oe)=>Z-oe);const w=this.overlays.getIterator();for(;w.hasNext();){const Z=w.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let oe=g.get(Z.largestBatchId);null===oe&&(oe=La(),g=g.insert(Z.largestBatchId,oe)),oe.set(Z.getKey(),Z)}}const O=La(),H=g.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Z,oe)=>O.set(Z,oe)),!(O.size()>=c)););return mt.resolve(O)}de(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const w=this.hs.get(c.largestBatchId).delete(s.key);this.hs.set(c.largestBatchId,w)}this.overlays=this.overlays.insert(s.key,new G(t,s));let g=this.hs.get(t);void 0===g&&(g=Yr(),this.hs.set(t,g)),this.hs.set(t,g.add(s.key))}}class Zp{constructor(){this.ls=new B(Go.fs),this.ds=new B(Go._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new Go(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new Go(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new xn(new vi([])),s=new Go(t,e),c=new Go(t,e+1),g=[];return this.ds.forEachInRange([s,c],w=>{this.gs(w),g.push(w.key)}),g}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new xn(new vi([])),s=new Go(t,e),c=new Go(t,e+1);let g=Yr();return this.ds.forEachInRange([s,c],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new Go(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Go{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return xn.comparator(e.key,t.key)||cr(e.Es,t.Es)}static _s(e,t){return cr(e.Es,t.Es)||xn.comparator(e.key,t.key)}}class Ym{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new B(Go.fs)}checkEmpty(e){return mt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const g=this.As;this.As++;const w=new _(g,t,s,c);this.mutationQueue.push(w);for(const O of c)this.Rs=this.Rs.add(new Go(O.key,g)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return mt.resolve(w)}lookupMutationBatch(e,t){return mt.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),g=c<0?0:c;return mt.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Go(t,0),c=new Go(t,Number.POSITIVE_INFINITY),g=[];return this.Rs.forEachInRange([s,c],w=>{const O=this.vs(w.Es);g.push(O)}),mt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new B(cr);return t.forEach(c=>{const g=new Go(c,0),w=new Go(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([g,w],O=>{s=s.add(O.Es)})}),mt.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let g=s;xn.isDocumentKey(g)||(g=g.child(""));const w=new Go(new xn(g),0);let O=new B(cr);return this.Rs.forEachWhile(H=>{const Z=H.key.path;return!!s.isPrefixOf(Z)&&(Z.length===c&&(O=O.add(H.Es)),!0)},w),mt.resolve(this.bs(O))}bs(e){const t=[];return e.forEach(s=>{const c=this.vs(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){Jn(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return mt.forEach(t.mutations,c=>{const g=new Go(c.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new Go(t,0),c=this.Rs.firstAfterOrEqual(s);return mt.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return mt.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zm{constructor(e){this.Ss=e,this.docs=new zi(xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),g=c?c.size:0,w=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return mt.resolve(s?s.document.mutableCopy():es.newInvalidDocument(t))}getEntries(e,t){let s=Mo();return t.forEach(c=>{const g=this.docs.get(c);s=s.insert(c,g?g.document.mutableCopy():es.newInvalidDocument(c))}),mt.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let g=Mo();const w=t.path,O=new xn(w.child("")),H=this.docs.getIteratorFrom(O);for(;H.hasNext();){const{key:Z,value:{document:oe}}=H.getNext();if(!w.isPrefixOf(Z.path))break;Z.path.length>w.length+1||vu(Ya(oe),s)<=0||(c.has(oe.key)||sc(t,oe))&&(g=g.insert(oe.key,oe.mutableCopy()))}return mt.resolve(g)}getAllFromCollectionGroup(e,t,s,c){Un()}Ds(e,t){return mt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Wh(this)}getSize(e){return mt.resolve(this.size)}}class Wh extends ba{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(s)}),mt.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Uf{constructor(e){this.persistence=e,this.Cs=new nu(t=>eu(t),Vi),this.lastRemoteSnapshotVersion=Zn.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Zp,this.targetCount=0,this.ks=hc.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,c)=>t(c)),mt.resolve()}getLastRemoteSnapshotVersion(e){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mt.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),mt.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,mt.resolve()}updateTargetData(e,t){return this.$n(t),mt.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,mt.resolve()}removeTargets(e,t,s){let c=0;const g=[];return this.Cs.forEach((w,O)=>{O.sequenceNumber<=t&&null===s.get(O.targetId)&&(this.Cs.delete(w),g.push(this.removeMatchingKeysForTargetId(e,O.targetId)),c++)}),mt.waitFor(g).next(()=>c)}getTargetCount(e){return mt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return mt.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),mt.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const c=this.persistence.referenceDelegate,g=[];return c&&t.forEach(w=>{g.push(c.markPotentiallyOrphaned(e,w))}),mt.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),mt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return mt.resolve(s)}containsKey(e,t){return mt.resolve(this.Ns.containsKey(t))}}class Id{constructor(e,t){this.Ms={},this.overlays={},this.Os=new j(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Uf(this),this.indexManager=new qm,this.remoteDocumentCache=new Zm(s=>this.referenceDelegate.Bs(s)),this.serializer=new Fh(t),this.Ls=new Yg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new Ym(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){on("MemoryPersistence","Starting transaction:",e);const c=new Vf(this.Os.next());return this.referenceDelegate.qs(),s(c).next(g=>this.referenceDelegate.Us(c).next(()=>g)).toPromise().then(g=>(c.raiseOnCommittedEvent(),g))}Ks(e,t){return mt.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class Vf extends Yl{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.Gs=new Zp,this.Qs=null}static js(e){return new qh(e)}get zs(){if(this.Qs)return this.Qs;throw Un()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),mt.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),mt.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),mt.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(g=>this.zs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.zs,s=>{const c=xn.fromPath(s);return this.Ws(e,c).next(g=>{g||t.removeEntry(c,Zn.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return mt.or([()=>mt.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class Xp{constructor(e){this.serializer=e}$(e,t,s,c){const g=new Qr("createOrUpgrade",t);var O;s<1&&c>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mi,{unique:!0}),O.createObjectStore("documentMutations"),Kh(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=mt.resolve();return s<3&&c>=3&&(0!==s&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Kh(e)),w=w.next(()=>function(O){const H=O.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Z)}(g))),s<4&&c>=4&&(0!==s&&(w=w.next(()=>function(O,H){return H.store("mutations").j().next(Z=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mi,{unique:!0});const oe=H.store("mutations"),We=Z.map(Tt=>oe.put(Tt));return mt.waitFor(We)})}(e,g))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(w=w.next(()=>this.Js(g))),s<6&&c>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(g)))),s<7&&c>=7&&(w=w.next(()=>this.Xs(g))),s<8&&c>=8&&(w=w.next(()=>this.Zs(e,g))),s<9&&c>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(w=w.next(()=>this.ti(g))),s<11&&c>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(w=w.next(()=>{!function(O){const H=O.createObjectStore("documentOverlays",{keyPath:ya});H.createIndex("collectionPathOverlayIndex",wh,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",no,{unique:!1})}(e)})),s<13&&c>=13&&(w=w.next(()=>function(O){const H=O.createObjectStore("remoteDocumentsV14",{keyPath:jo});H.createIndex("documentKeyIndex",ta),H.createIndex("collectionGroupIndex",yo)}(e)).next(()=>this.ei(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(w=w.next(()=>this.ni(e,g))),s<15&&c>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:ma}).createIndex("sequenceNumberIndex",Wu,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Za}).createIndex("documentKeyIndex",Xc,{unique:!1})}(e))),w}Ys(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=dc(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(c=>mt.forEach(c,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",w).next(O=>mt.forEach(O,H=>{Jn(H.userId===g.userId);const Z=Ja(this.serializer,H);return Gg(e,g.userId,Z).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const g=[];return s.X((w,O)=>{const H=new vi(w),Z=[0,xt(H)];g.push(t.get(Z).next(oe=>oe?mt.resolve():t.put({targetId:0,path:xt(H),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>mt.waitFor(g))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Fl});const s=t.store("collectionParents"),c=new Hp,g=w=>{if(c.add(w)){const O=w.lastSegment(),H=w.popLast();return s.put({collectionId:O,parent:xt(H)})}};return t.store("remoteDocuments").X({Y:!0},(w,O)=>{const H=new vi(w);return g(H.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([w,O,H],Z)=>{const oe=In(O);return g(oe.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,c)=>{const g=Lh(c),w=Mf(this.serializer,g);return t.put(w)})}ei(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((g,w)=>{const O=t.store("remoteDocumentsV14"),H=(Z=w,Z.document?new xn(vi.fromString(Z.document.name).popFirst(5)):Z.noDocument?xn.fromSegments(Z.noDocument.path):Z.unknownDocument?xn.fromSegments(Z.unknownDocument.path):Un()).path.toArray();var Z;const oe={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};c.push(O.put(oe))}).next(()=>mt.waitFor(c))}ni(e,t){const s=t.store("mutations"),c=Uc(this.serializer),g=new Id(qh.js,this.serializer.le);return s.j().next(w=>{const O=new Map;return w.forEach(H=>{var Z;let oe=null!==(Z=O.get(H.userId))&&void 0!==Z?Z:Yr();Ja(this.serializer,H).keys().forEach(We=>oe=oe.add(We)),O.set(H.userId,oe)}),mt.forEach(O,(H,Z)=>{const oe=new Wi(Z),We=vd.fe(this.serializer,oe),Tt=g.getIndexManager(oe),Qt=Zr.fe(oe,this.serializer,Tt,g.referenceDelegate);return new Kg(c,Qt,We,Tt).recalculateAndSaveOverlaysForDocumentKeys(new ul(t,j.ct),H).next()})})}}function Kh(r){r.createObjectStore("targetDocuments",{keyPath:Es}).createIndex("documentTargetsIndex",Gr,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ll,{unique:!0}),r.createObjectStore("targetGlobal")}const Qp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class el{constructor(e,t,s,c,g,w,O,H,Z,oe,We=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=g,this.window=w,this.document=O,this.ii=Z,this.ri=oe,this.oi=We,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Tt=>Promise.resolve(),!el.D())throw new Zt(Ut.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kp(this,c),this.fi=t+"main",this.serializer=new Fh(H),this.di=new fr(this.fi,this.oi,new Xp(this.serializer)),this.Fs=new Bf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uc(this.serializer),this.Ls=new Dl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===oe&&Ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(Ut.FAILED_PRECONDITION,Qp);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new j(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,ue.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,ue.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Vo(e))return on("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return on("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return ih(e).get("owner").next(t=>mt.resolve(this.Ri(t)))}vi(e){return Jp(e).delete(this.clientId)}Pi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Is(s,"clientMetadata");return c.j().next(g=>{const w=e.Vi(g,18e5),O=g.filter(H=>-1===w.indexOf(H));return mt.forEach(O,H=>c.delete(H.clientId)).next(()=>O)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?mt.resolve(!0):ih(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Zt(Ut.FAILED_PRECONDITION,Qp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jp(e).j().next(s=>void 0===this.Vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&on("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new ul(t,j.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Jp(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return Zr.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zp(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return vd.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){on("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",g=15===(w=this.oi)?Jc:14===w?va:13===w?wc:12===w?Qc:11===w?qu:void Un();var w;let O;return this.di.runTransaction(e,c,g,H=>(O=new ul(H,this.Os?this.Os.next():j.ct),"readwrite-primary"===t?this.Ii(O).next(Z=>!!Z||this.Ti(O)).next(Z=>{if(!Z)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Zt(Ut.FAILED_PRECONDITION,al);return s(O)}).next(Z=>this.Ai(O).next(()=>Z)):this.Oi(O).next(()=>s(O)))).then(H=>(O.raiseOnCommittedEvent(),H))}Oi(e){return ih(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(Ut.FAILED_PRECONDITION,Qp)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ih(e).put("owner",t)}static D(){return fr.D()}Ei(e){const t=ih(e);return t.get("owner").next(s=>this.Ri(s)?(on("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):mt.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ki(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,He.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return on("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ki("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ih(r){return Is(r,"owner")}function Jp(r){return Is(r,"clientMetadata")}function jc(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class jf{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=c}static Bi(e,t){let s=Yr(),c=Yr();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:c=c.add(g.doc.key)}return new jf(e,t.fromCache,s,c)}}class eg{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ui(e,t).next(g=>g||this.Ki(e,t,c,s)).next(g=>g||this.Gi(e,t))}Ui(e,t){if(Ul(t))return mt.resolve(null);let s=Ro(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=ic(t,null,"F"),s=Ro(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(g=>{const w=Yr(...g);return this.qi.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,s).next(H=>{const Z=this.Qi(t,O);return this.ji(t,Z,w,H.readTime)?this.Ui(e,ic(t,null,"F")):this.zi(e,Z,t,H)}))})))}Ki(e,t,s,c){return Ul(t)||c.isEqual(Zn.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(g=>{const w=this.Qi(t,g);return this.ji(t,w,s,c)?this.Gi(e,t):(Kl()<=et.in.DEBUG&&on("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),od(t)),this.zi(e,w,t,Ic(c,-1)))})}Qi(e,t){let s=new B(bh(e));return t.forEach((c,g)=>{sc(e,g)&&(s=s.add(g))}),s}ji(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(c)>0)}Gi(e,t){return Kl()<=et.in.DEBUG&&on("QueryEngine","Using full collection scan to execute query:",od(t)),this.qi.getDocumentsMatchingQuery(e,t,ti.min())}zi(e,t,s,c){return this.qi.getDocumentsMatchingQuery(e,s,c).next(g=>(t.forEach(w=>{g=g.insert(w.key,w)}),g))}}class Zg{constructor(e,t,s,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new zi(cr),this.Ji=new nu(g=>eu(g),Vi),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kg(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function Xg(r,e,t,s){return new Zg(r,e,t,s)}function Qg(r,e){return sh.apply(this,arguments)}function sh(){return sh=(0,ue.Z)(function*(r,e){const t=Mn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(g=>(c=g,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const w=[],O=[];let H=Yr();for(const Z of c){w.push(Z.batchId);for(const oe of Z.mutations)H=H.add(oe.key)}for(const Z of g){O.push(Z.batchId);for(const oe of Z.mutations)H=H.add(oe.key)}return t.localDocuments.getDocuments(s,H).next(Z=>({tr:Z,removedBatchIds:w,addedBatchIds:O}))})})}),sh.apply(this,arguments)}function Hf(r){const e=Mn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function zf(r,e,t){let s=Yr(),c=Yr();return t.forEach(g=>s=s.add(g)),e.getEntries(r,s).next(g=>{let w=Mo();return t.forEach((O,H)=>{const Z=g.get(O);H.isFoundDocument()!==Z.isFoundDocument()&&(c=c.add(O)),H.isNoDocument()&&H.version.isEqual(Zn.min())?(e.removeEntry(O,H.readTime),w=w.insert(O,H)):!Z.isValidDocument()||H.version.compareTo(Z.version)>0||0===H.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(H),w=w.insert(O,H)):on("LocalStore","Ignoring outdated watch update for ",O,". Current version:",Z.version," Watch version:",H.version)}),{er:w,nr:c}})}function Gf(r,e){const t=Mn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function wd(r,e){const t=Mn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Fs.getTargetData(s,e).next(g=>g?(c=g,mt.resolve(c)):t.Fs.allocateTargetId(s).next(w=>(c=new uc(e,w,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Hi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function Hc(r,e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,ue.Z)(function*(r,e,t){const s=Mn(r),c=s.Hi.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,w=>s.persistence.referenceDelegate.removeTarget(w,c)))}catch(w){if(!Vo(w))throw w;on("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(c.target)}),Zh.apply(this,arguments)}function ah(r,e,t){const s=Mn(r);let c=Zn.min(),g=Yr();return s.persistence.runTransaction("Execute query","readonly",w=>function(O,H,Z){const oe=Mn(O),We=oe.Ji.get(Z);return void 0!==We?mt.resolve(oe.Hi.get(We)):oe.Fs.getTargetData(H,Z)}(s,w,Ro(e)).next(O=>{if(O)return c=O.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(w,O.targetId).next(H=>{g=H})}).next(()=>s.Wi.getDocumentsMatchingQuery(w,e,t?c:Zn.min(),t?g:Yr())).next(O=>(Jg(s,Du(e),O),{documents:O,sr:g})))}function tg(r,e){const t=Mn(r),s=Mn(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",g=>s.he(g,e).next(w=>w?w.target:null))}function Wf(r,e){const t=Mn(r),s=t.Yi.get(e)||Zn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Ic(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Jg(t,e,c),c))}function Jg(r,e,t){let s=r.Yi.get(e)||Zn.min();t.forEach((c,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),r.Yi.set(e,s)}function dl(){return dl=(0,ue.Z)(function*(r,e,t,s){const c=Mn(r);let g=Yr(),w=Mo();for(const Z of t){const oe=e.ir(Z.metadata.name);Z.document&&(g=g.add(oe));const We=e.rr(Z);We.setReadTime(e.ur(Z.metadata.readTime)),w=w.insert(oe,We)}const O=c.Xi.newChangeBuffer({trackRemovals:!0}),H=yield wd(c,(Z=s,Ro($l(vi.fromString(`__bundle__/docs/${Z}`)))));var Z;return c.persistence.runTransaction("Apply bundle documents","readwrite",Z=>zf(Z,O,w).next(oe=>(O.apply(Z),oe)).next(oe=>c.Fs.removeMatchingKeysForTargetId(Z,H.targetId).next(()=>c.Fs.addMatchingKeys(Z,g,H.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(Z,oe.er,oe.nr)).next(()=>oe.er)))}),dl.apply(this,arguments)}function Qm(r,e){return lh.apply(this,arguments)}function lh(){return lh=(0,ue.Z)(function*(r,e,t=Yr()){const s=yield wd(r,Ro(Bh(e.bundledQuery))),c=Mn(r);return c.persistence.runTransaction("Save named query","readwrite",g=>{const w=Ns(e.readTime);if(s.snapshotVersion.compareTo(w)>=0)return c.Ls.saveNamedQuery(g,e);const O=s.withResumeToken(hn.EMPTY_BYTE_STRING,w);return c.Hi=c.Hi.insert(O.targetId,O),c.Fs.updateTargetData(g,O).next(()=>c.Fs.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>c.Fs.addMatchingKeys(g,t,s.targetId)).next(()=>c.Ls.saveNamedQuery(g,e))})}),lh.apply(this,arguments)}function qf(r,e){return`firestore_clients_${r}_${e}`}function em(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Kf(r,e){return`firestore_targets_${r}_${e}`}class Ba{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static cr(e,t,s){const c=JSON.parse(s);let g,w="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return w&&c.error&&(w="string"==typeof c.error.message&&"string"==typeof c.error.code,w&&(g=new Zt(c.error.code,c.error.message))),w?new Ba(e,t,c.state,g):(Ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let c,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(c=new Zt(s.error.code,s.error.message))),g?new uh(e,s.state,c):(Ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,g=Th();for(let w=0;c&&w<s.activeTargetIds.length;++w)c=st(s.activeTargetIds[w]),g=g.add(s.activeTargetIds[w]);return c?new Yf(e,g):(Ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tm{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tm(t.clientId,t.onlineState):(Ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ch{constructor(){this.activeTargetIds=Th()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zf{constructor(e,t,s,c,g){this.window=e,this.si=t,this.persistenceKey=s,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new zi(cr),this.started=!1,this.gr=[];const w=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.yr=qf(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new ch),this.Ir=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const g=e.getItem(qf(e.persistenceKey,c));if(g){const w=Yf.cr(c,g);w&&(e.mr=e.mr.insert(w.clientId,w))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const c=e.Pr(s);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Kf(this.persistenceKey,e));if(s){const c=uh.cr(e,s);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kf(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return on("SharedClientState","READ",e,t),t}setItem(e,t){on("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){on("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(on("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void Ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const c=t.Or(s.key);return t.$r(c,null)}{const c=t.Fr(s.key,s.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const c=t.Br(s.key,s.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const c=t.qr(s.key,s.newValue);if(c)return t.Ur(c)}}else if(s.key===t.Ar){if(null!==s.newValue){const c=t.Pr(s.newValue);if(c)return t.br(c)}}else if(s.key===t.pr){const c=function(g){let w=j.ct;if(null!=g)try{const O=JSON.parse(g);Jn("number"==typeof O),w=O}catch(O){Ki("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(s.newValue);c!==j.ct&&t.sequenceNumberHandler(c)}else if(s.key===t.Rr){const c=t.Kr(s.newValue);yield Promise.all(c.map(g=>t.syncEngine.Gr(g)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const c=new Ba(this.currentUser,e,t,s),g=em(this.persistenceKey,this.currentUser,e);this.setItem(g,c.ar())}Dr(e){const t=em(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const c=Kf(this.persistenceKey,e),g=new uh(e,t,s);this.setItem(c,g.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return Yf.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),c=Number(s[1]);return Ba.cr(new Wi(void 0!==s[2]?s[2]:null),c,t)}qr(e,t){const s=this.Er.exec(e),c=Number(s[1]);return uh.cr(c,t)}Pr(e){return tm.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);on("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),g=this.Vr(s),w=[],O=[];return g.forEach(H=>{c.has(H)||w.push(H)}),c.forEach(H=>{g.has(H)||O.push(H)}),this.syncEngine.zr(w,O).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Th();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class nm{constructor(){this.Wr=new ch,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new ch,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qy{Jr(e){}shutdown(){}}class ng{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){on("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){on("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xh=null;function rg(){return null===Xh?Xh=268435456+Math.round(2147483648*Math.random()):Xh++,"0x"+Xh.toString(16)}const Jm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ig{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const $a="WebChannelConnection";class ey extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,c,g){const w=rg(),O=this.Io(e,t);on("RestConnection",`Sending RPC '${e}' ${w}:`,O,s);const H={};return this.To(H,c,g),this.Eo(e,O,H,s).then(Z=>(on("RestConnection",`Received RPC '${e}' ${w}: `,Z),Z),Z=>{throw pi("RestConnection",`RPC '${e}' ${w} failed with error: `,Z,"url: ",O,"request:",s),Z})}Ao(e,t,s,c,g,w){return this.po(e,t,s,c,g)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,g)=>e[g]=c),s&&s.headers.forEach((c,g)=>e[g]=c)}Io(e,t){return`${this.wo}/v1/${t}:${Jm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,c){const g=rg();return new Promise((w,O)=>{const H=new xl;H.setWithCredentials(!0),H.listenOnce(Si.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case Vs.NO_ERROR:const oe=H.getResponseJson();on($a,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(oe)),w(oe);break;case Vs.TIMEOUT:on($a,`RPC '${e}' ${g} timed out`),O(new Zt(Ut.DEADLINE_EXCEEDED,"Request time out"));break;case Vs.HTTP_ERROR:const We=H.getStatus();if(on($a,`RPC '${e}' ${g} failed with status:`,We,"response text:",H.getResponseText()),We>0){let Tt=H.getResponseJson();Array.isArray(Tt)&&(Tt=Tt[0]);const Qt=null==Tt?void 0:Tt.error;if(Qt&&Qt.status&&Qt.message){const Cn=function(Tn){const sr=Tn.toLowerCase().replace(/_/g,"-");return Object.values(Ut).indexOf(sr)>=0?sr:Ut.UNKNOWN}(Qt.status);O(new Zt(Cn,Qt.message))}else O(new Zt(Ut.UNKNOWN,"Server responded with status "+H.getStatus()))}else O(new Zt(Ut.UNAVAILABLE,"Connection failed."));break;default:Un()}}finally{on($a,`RPC '${e}' ${g} completed.`)}});const Z=JSON.stringify(c);on($a,`RPC '${e}' ${g} sending request:`,c),H.send(t,"POST",Z,s,15)})}Ro(e,t,s){const c=rg(),g=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=To(),O=bi(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(H.xmlHttpFactory=new Ra({})),this.To(H.initMessageHeaders,t,s),H.encodeInitMessageHeaders=!0;const Z=g.join("");on($a,`Creating RPC '${e}' stream ${c}: ${Z}`,H);const oe=w.createWebChannel(Z,H);let We=!1,Tt=!1;const Qt=new ig({io:Tn=>{Tt?on($a,`Not sending because RPC '${e}' stream ${c} is closed:`,Tn):(We||(on($a,`Opening RPC '${e}' stream ${c} transport.`),oe.open(),We=!0),on($a,`RPC '${e}' stream ${c} sending:`,Tn),oe.send(Tn))},ro:()=>oe.close()}),Cn=(Tn,sr,ni)=>{Tn.listen(sr,Ri=>{try{ni(Ri)}catch(ri){setTimeout(()=>{throw ri},0)}})};return Cn(oe,Wa.EventType.OPEN,()=>{Tt||on($a,`RPC '${e}' stream ${c} transport opened.`)}),Cn(oe,Wa.EventType.CLOSE,()=>{Tt||(Tt=!0,on($a,`RPC '${e}' stream ${c} transport closed`),Qt.fo())}),Cn(oe,Wa.EventType.ERROR,Tn=>{Tt||(Tt=!0,pi($a,`RPC '${e}' stream ${c} transport errored:`,Tn),Qt.fo(new Zt(Ut.UNAVAILABLE,"The operation could not be completed")))}),Cn(oe,Wa.EventType.MESSAGE,Tn=>{var sr;if(!Tt){const ni=Tn.data[0];Jn(!!ni);const ri=ni.error||(null===(sr=ni[0])||void 0===sr?void 0:sr.error);if(ri){on($a,`RPC '${e}' stream ${c} received error:`,ri);const Va=ri.status;let Ps=function(ja){const Ih=yt[ja];if(void 0!==Ih)return zn(Ih)}(Va),ps=ri.message;void 0===Ps&&(Ps=Ut.INTERNAL,ps="Unknown error status: "+Va+" with message "+ri.message),Tt=!0,Qt.fo(new Zt(Ps,ps)),oe.close()}else on($a,`RPC '${e}' stream ${c} received:`,ni),Qt._o(ni)}}),Cn(O,fa.STAT_EVENT,Tn=>{Tn.stat===Js.PROXY?on($a,`RPC '${e}' stream ${c} detected buffering proxy`):Tn.stat===Js.NOPROXY&&on($a,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Qt.lo()},0),Qt}}function rm(){return typeof window<"u"?window:null}function Xf(){return typeof document<"u"?document:null}function Qh(r){return new Mp(r,!0)}class uu{constructor(e,t,s=1e3,c=1.5,g=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=c,this.bo=g,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-s);c>0&&on("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class sg{constructor(e,t,s,c,g,w,O,H){this.si=e,this.Mo=s,this.Oo=c,this.connection=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=H,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new uu(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,ue.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,ue.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,ue.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Ut.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Ut.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.$o===t&&this.Xo(s,c)},s=>{e(()=>{const c=new Zt(Ut.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(c)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{s(()=>this.Zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,ue.Z)(function*(){e.state=0,e.start()}))}Zo(e){return on("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(on("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ty extends sg{constructor(e,t,s,c,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,w),this.serializer=g}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Rf(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:Un(),c=e.targetChange.targetIds||[],g=function(H,Z){return H.useProto3Json?(Jn(void 0===Z||"string"==typeof Z),hn.fromBase64String(Z||"")):(Jn(void 0===Z||Z instanceof Uint8Array),hn.fromUint8Array(Z||new Uint8Array))}(r,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(H){const Z=void 0===H.code?Ut.UNKNOWN:zn(H.code);return new Zt(Z,H.message||"")}(w);t=new Mc(s,c,g,O||null)}else if("documentChange"in e){const s=e.documentChange,c=Hl(r,s.document.name),g=Ns(s.document.updateTime),w=s.document.createTime?Ns(s.document.createTime):Zn.min(),O=new ks({mapValue:{fields:s.document.fields}}),H=es.newFoundDocument(c,g,w,O);t=new Rc(s.targetIds||[],s.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const s=e.documentDelete,c=Hl(r,s.document),g=s.readTime?Ns(s.readTime):Zn.min(),w=es.newNoDocument(c,g);t=new Rc([],s.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const s=e.documentRemove,c=Hl(r,s.document);t=new Rc([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Un();{const s=e.filter,{count:c=0,unchangedNames:g}=s,w=new Qe(c,g);t=new Kd(s.targetId,w)}}var H;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return Zn.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?Zn.min():g.readTime?Ns(g.readTime):Zn.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=Oc(this.serializer),t.addTarget=function(c,g){let w;const O=g.target;if(w=Ea(O)?{documents:Ou(c,O)}:{query:md(c,O)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=kh(c,g.resumeToken);const H=Oh(c,g.expectedCount);null!==H&&(w.expectedCount=H)}else if(g.snapshotVersion.compareTo(Zn.min())>0){w.readTime=ou(c,g.snapshotVersion.toTimestamp());const H=Oh(c,g.expectedCount);null!==H&&(w.expectedCount=H)}return w}(this.serializer,e);const s=function Fp(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Un()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=Oc(this.serializer),t.removeTarget=e,this.zo(t)}}class ny extends sg{constructor(e,t,s,c,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,w),this.serializer=g,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Xd(r,e){return r&&r.length>0?(Jn(void 0!==e),r.map(t=>function(s,c){let g=Ns(s.updateTime?s.updateTime:c);return g.isEqual(Zn.min())&&(g=Ns(c)),new Xa(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ns(e.commitTime);return this.listener.uu(s,t)}return Jn(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Oc(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Zd(this.serializer,s))};this.zo(t)}}class im extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new Zt(Ut.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.po(e,t,s,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Zt(Ut.UNKNOWN,c.toString())})}Ao(e,t,s,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Ao(e,t,s,g,w,c)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Zt(Ut.UNKNOWN,g.toString())})}terminate(){this.hu=!0}}class ry{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Ki(t),this.wu=!1):on("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ag{constructor(e,t,s,c,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=g,this.vu.Jr(O=>{s.enqueueAndForget((0,ue.Z)(function*(){var H;pc(w)&&(on("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,ue.Z)(function*(Z){const oe=Mn(Z);oe.Au.add(4),yield Ms(oe),oe.Pu.set("Unknown"),oe.Au.delete(4),yield Jh(oe)}),function(Z){return H.apply(this,arguments)})(w))}))}),this.Pu=new ry(s,c)}}function Jh(r){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,ue.Z)(function*(r){if(pc(r))for(const e of r.Ru)yield e(!0)}),Bu.apply(this,arguments)}function Ms(r){return Da.apply(this,arguments)}function Da(){return Da=(0,ue.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Da.apply(this,arguments)}function cu(r,e){const t=Mn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),ep(t)?Jf(t):a(t).Uo()&&ef(t,e))}function Qf(r,e){const t=Mn(r),s=a(t);t.Eu.delete(e),s.Uo()&&iy(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():pc(t)&&t.Pu.set("Unknown"))}function ef(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}a(r).nu(e)}function iy(r,e){r.bu.Lt(e),a(r).su(e)}function Jf(r){r.bu=new Ph({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),a(r).start(),r.Pu.mu()}function ep(r){return pc(r)&&!a(r).qo()&&r.Eu.size>0}function pc(r){return 0===Mn(r).Au.size}function tp(r){r.bu=void 0}function np(r){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,ue.Z)(function*(r){r.Eu.forEach((e,t)=>{ef(r,e)})}),Wl.apply(this,arguments)}function tf(r,e){return $u.apply(this,arguments)}function $u(){return $u=(0,ue.Z)(function*(r,e){tp(r),ep(r)?(r.Pu.pu(e),Jf(r)):r.Pu.set("Unknown")}),$u.apply(this,arguments)}function nf(r,e,t){return rp.apply(this,arguments)}function rp(){return rp=(0,ue.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof Mc&&2===e.state&&e.cause)try{yield(s=(0,ue.Z)(function*(c,g){const w=g.cause;for(const O of g.targetIds)c.Eu.has(O)&&(yield c.remoteSyncer.rejectListen(O,w),c.Eu.delete(O),c.bu.removeTarget(O))}),function(c,g){return s.apply(this,arguments)})(r,e)}catch(s){on("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield rf(r,s)}else if(e instanceof Rc?r.bu.Wt(e):e instanceof Kd?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(Zn.min()))try{const s=yield Hf(r.localStore);t.compareTo(s)>=0&&(yield function(c,g){const w=c.bu.ue(g);return w.targetChanges.forEach((O,H)=>{if(O.resumeToken.approximateByteSize()>0){const Z=c.Eu.get(H);Z&&c.Eu.set(H,Z.withResumeToken(O.resumeToken,g))}}),w.targetMismatches.forEach((O,H)=>{const Z=c.Eu.get(O);if(!Z)return;c.Eu.set(O,Z.withResumeToken(hn.EMPTY_BYTE_STRING,Z.snapshotVersion)),iy(c,O);const oe=new uc(Z.target,O,H,Z.sequenceNumber);ef(c,oe)}),c.remoteSyncer.applyRemoteEvent(w)}(r,t))}catch(s){on("RemoteStore","Failed to raise snapshot:",s),yield rf(r,s)}var s}),rp.apply(this,arguments)}function rf(r,e,t){return ip.apply(this,arguments)}function ip(){return ip=(0,ue.Z)(function*(r,e,t){if(!Vo(e))throw e;r.Au.add(1),yield Ms(r),r.Pu.set("Offline"),t||(t=()=>Hf(r.localStore)),r.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){on("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield Jh(r)}))}),ip.apply(this,arguments)}function lg(r,e){return e().catch(t=>rf(r,t,e))}function Cd(r){return zc.apply(this,arguments)}function zc(){return zc=(0,ue.Z)(function*(r){const e=Mn(r),t=l(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;sy(e);)try{const c=yield Gf(e.localStore,s);if(null===c){0===e.Tu.length&&t.Qo();break}s=c.batchId,Jy(e,c)}catch(c){yield rf(e,c)}om(e)&&ug(e)}),zc.apply(this,arguments)}function sy(r){return pc(r)&&r.Tu.length<10}function Jy(r,e){r.Tu.push(e);const t=l(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function om(r){return pc(r)&&!l(r).qo()&&r.Tu.length>0}function ug(r){l(r).start()}function oy(r){return cg.apply(this,arguments)}function cg(){return cg=(0,ue.Z)(function*(r){l(r).au()}),cg.apply(this,arguments)}function am(r){return dg.apply(this,arguments)}function dg(){return dg=(0,ue.Z)(function*(r){const e=l(r);for(const t of r.Tu)e.ou(t.mutations)}),dg.apply(this,arguments)}function ay(r,e,t){return sp.apply(this,arguments)}function sp(){return sp=(0,ue.Z)(function*(r,e,t){const s=r.Tu.shift(),c=x.from(s,e,t);yield lg(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield Cd(r)}),sp.apply(this,arguments)}function hg(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,ue.Z)(function*(r,e){var t;e&&l(r).ru&&(yield(t=(0,ue.Z)(function*(s,c){if(wn(g=c.code)&&g!==Ut.ABORTED){const w=s.Tu.shift();l(s).Go(),yield lg(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,c)),yield Cd(s)}var g}),function(s,c){return t.apply(this,arguments)})(r,e)),om(r)&&ug(r)}),fg.apply(this,arguments)}function sf(r,e){return pg.apply(this,arguments)}function pg(){return pg=(0,ue.Z)(function*(r,e){const t=Mn(r);t.asyncQueue.verifyOperationInProgress(),on("RemoteStore","RemoteStore received new credentials");const s=pc(t);t.Au.add(3),yield Ms(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield Jh(t)}),pg.apply(this,arguments)}function gg(r,e){return d.apply(this,arguments)}function d(){return d=(0,ue.Z)(function*(r,e){const t=Mn(r);e?(t.Au.delete(2),yield Jh(t)):e||(t.Au.add(2),yield Ms(t),t.Pu.set("Unknown"))}),d.apply(this,arguments)}function a(r){return r.Vu||(r.Vu=function(e,t,s){const c=Mn(e);return c.lu(),new ty(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:np.bind(null,r),co:tf.bind(null,r),eu:nf.bind(null,r)}),r.Ru.push(function(){var e=(0,ue.Z)(function*(t){t?(r.Vu.Go(),ep(r)?Jf(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),tp(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function l(r){return r.Su||(r.Su=function(e,t,s){const c=Mn(e);return c.lu(),new ny(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:oy.bind(null,r),co:hg.bind(null,r),cu:am.bind(null,r),uu:ay.bind(null,r)}),r.Ru.push(function(){var e=(0,ue.Z)(function*(t){t?(r.Su.Go(),yield Cd(r)):(yield r.Su.stop(),r.Tu.length>0&&(on("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class m{constructor(e,t,s,c,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=g,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,s,c,g){const w=Date.now()+s,O=new m(e,t,w,c,g);return O.start(s),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(Ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C(r,e){if(Ki("AsyncQueue",`${e}: ${r}`),Vo(r))return new Zt(Ut.UNAVAILABLE,`${e}: ${r}`);throw r}class M{constructor(e){this.comparator=e?(t,s)=>e(t,s)||xn.comparator(t.key,s.key):(t,s)=>xn.comparator(t.key,s.key),this.keyedMap=oc(),this.sortedSet=new zi(this.comparator)}static emptySet(e){return new M(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof M)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=s.getNext().key;if(!c.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new M;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class ${constructor(){this.Du=new zi(xn.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Un():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class X{constructor(e,t,s,c,g,w,O,H,Z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=H,this.hasCachedResults=Z}static fromInitialDocuments(e,t,s,c,g){const w=[];return t.forEach(O=>{w.push({type:0,doc:O})}),new X(e,t,M.emptySet(t),w,s,c,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class le{constructor(){this.xu=void 0,this.listeners=[]}}class _e{constructor(){this.queries=new nu(e=>jd(e),tu),this.onlineState="Unknown",this.Nu=new Set}}function Dt(r,e){return Pt.apply(this,arguments)}function Pt(){return Pt=(0,ue.Z)(function*(r,e){const t=Mn(r),s=e.query;let c=!1,g=t.queries.get(s);if(g||(c=!0,g=new le),c)try{g.xu=yield t.onListen(s)}catch(w){const O=C(w,`Initialization of query '${od(e.query)}' failed`);return void e.onError(O)}t.queries.set(s,g),g.listeners.push(e),e.ku(t.onlineState),g.xu&&e.Mu(g.xu)&&Ur(t)}),Pt.apply(this,arguments)}function Ht(r,e){return En.apply(this,arguments)}function En(){return En=(0,ue.Z)(function*(r,e){const t=Mn(r),s=e.query;let c=!1;const g=t.queries.get(s);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),c=0===g.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),En.apply(this,arguments)}function Ln(r,e){const t=Mn(r);let s=!1;for(const c of e){const w=t.queries.get(c.query);if(w){for(const O of w.listeners)O.Mu(c)&&(s=!0);w.xu=c}}s&&Ur(t)}function Jr(r,e,t){const s=Mn(r),c=s.queries.get(e);if(c)for(const g of c.listeners)g.onError(t);s.queries.delete(e)}function Ur(r){r.Nu.forEach(e=>{e.next()})}class ws{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new X(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=X.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class Oi{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Yi{constructor(e){this.serializer=e}ir(e){return Hl(this.serializer,e)}rr(e){return e.metadata.exists?kp(this.serializer,e.document,!1):es.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Ns(e)}}class so{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oa(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=vi.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Yi(this.serializer);for(const c of e)if(c.metadata.queries){const g=s.ir(c.metadata.name);for(const w of c.metadata.queries){const O=(t.get(w)||Yr()).add(g);t.set(w,O)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function Xm(r,e,t,s){return dl.apply(this,arguments)}(e.localStore,new Yi(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const c of e.queries)yield Qm(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function oa(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class gc{constructor(e){this.key=e}}class mc{constructor(e){this.key=e}}class du{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Yr(),this.mutatedKeys=Yr(),this.Zu=bh(e),this.tc=new M(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new $,c=t?t.tc:this.tc;let g=t?t.mutatedKeys:this.mutatedKeys,w=c,O=!1;const H="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,Z="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((oe,We)=>{const Tt=c.get(oe),Qt=sc(this.query,We)?We:null,Cn=!!Tt&&this.mutatedKeys.has(Tt.key),Tn=!!Qt&&(Qt.hasLocalMutations||this.mutatedKeys.has(Qt.key)&&Qt.hasCommittedMutations);let sr=!1;Tt&&Qt?Tt.data.isEqual(Qt.data)?Cn!==Tn&&(s.track({type:3,doc:Qt}),sr=!0):this.ic(Tt,Qt)||(s.track({type:2,doc:Qt}),sr=!0,(H&&this.Zu(Qt,H)>0||Z&&this.Zu(Qt,Z)<0)&&(O=!0)):!Tt&&Qt?(s.track({type:0,doc:Qt}),sr=!0):Tt&&!Qt&&(s.track({type:1,doc:Tt}),sr=!0,(H||Z)&&(O=!0)),sr&&(Qt?(w=w.add(Qt),g=Tn?g.add(oe):g.delete(oe)):(w=w.delete(oe),g=g.delete(oe)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const oe="F"===this.query.limitType?w.last():w.first();w=w.delete(oe.key),g=g.delete(oe.key),s.track({type:1,doc:oe})}return{tc:w,sc:s,ji:O,mutatedKeys:g}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const g=e.sc.Cu();g.sort((Z,oe)=>function(We,Tt){const Qt=Cn=>{switch(Cn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Un()}};return Qt(We)-Qt(Tt)}(Z.type,oe.type)||this.Zu(Z.doc,oe.doc)),this.rc(s);const w=t?this.oc():[],O=0===this.Xu.size&&this.current?1:0,H=O!==this.Yu;return this.Yu=O,0!==g.length||H?{snapshot:new X(this.query,e.tc,c,g,e.mutatedKeys,0===O,H,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:w}:{uc:w}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new $,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Yr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new mc(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new gc(s))}),t}ac(e){this.Ju=e.sr,this.Xu=Yr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return X.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Gc{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class op{constructor(e){this.key=e,this.lc=!1}}class ap{constructor(e,t,s,c,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.fc={},this.dc=new nu(O=>jd(O),tu),this._c=new Map,this.wc=new Set,this.mc=new zi(xn.comparator),this.gc=new Map,this.yc=new Zp,this.Ic={},this.Tc=new Map,this.Ec=hc.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function lp(r,e){return dh.apply(this,arguments)}function dh(){return dh=(0,ue.Z)(function*(r,e){const t=ym(r);let s,c;const g=t.dc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),c=g.view.hc();else{const w=yield wd(t.localStore,Ro(e)),O=t.sharedClientState.addLocalQueryTarget(w.targetId);s=w.targetId,c=yield hh(t,e,s,"current"===O,w.resumeToken),t.isPrimaryClient&&cu(t.remoteStore,w)}return c}),dh.apply(this,arguments)}function hh(r,e,t,s,c){return fh.apply(this,arguments)}function fh(){return fh=(0,ue.Z)(function*(r,e,t,s,c){r.Rc=(We,Tt,Qt)=>{return(Cn=(0,ue.Z)(function*(Tn,sr,ni,Ri){let ri=sr.view.nc(ni);ri.ji&&(ri=yield ah(Tn.localStore,sr.query,!1).then(({documents:ps})=>sr.view.nc(ps,ri)));const Va=Ri&&Ri.targetChanges.get(sr.targetId),Ps=sr.view.applyChanges(ri,Tn.isPrimaryClient,Va);return _g(Tn,sr.targetId,Ps.uc),Ps.snapshot}),function(Tn,sr,ni,Ri){return Cn.apply(this,arguments)})(r,We,Tt,Qt);var Cn};const g=yield ah(r.localStore,e,!0),w=new du(e,g.sr),O=w.nc(g.documents),H=Mu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),Z=w.applyChanges(O,r.isPrimaryClient,H);_g(r,t,Z.uc);const oe=new Gc(e,t,w);return r.dc.set(e,oe),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),Z.snapshot}),fh.apply(this,arguments)}function ev(r,e){return lm.apply(this,arguments)}function lm(){return lm=(0,ue.Z)(function*(r,e){const t=Mn(r),s=t.dc.get(e),c=t._c.get(s.targetId);if(c.length>1)return t._c.set(s.targetId,c.filter(g=>!tu(g,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Hc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Qf(t.remoteStore,s.targetId),bd(t,s.targetId)}).catch(ds))):(bd(t,s.targetId),yield Hc(t.localStore,s.targetId,!0))}),lm.apply(this,arguments)}function um(){return um=(0,ue.Z)(function*(r,e,t){const s=vm(r);try{const c=yield function(g,w){const O=Mn(g),H=Br.now(),Z=w.reduce((Tt,Qt)=>Tt.add(Qt.key),Yr());let oe,We;return O.persistence.runTransaction("Locally write mutations","readwrite",Tt=>{let Qt=Mo(),Cn=Yr();return O.Xi.getEntries(Tt,Z).next(Tn=>{Qt=Tn,Qt.forEach((sr,ni)=>{ni.isValidDocument()||(Cn=Cn.add(sr))})}).next(()=>O.localDocuments.getOverlayedDocuments(Tt,Qt)).next(Tn=>{oe=Tn;const sr=[];for(const ni of w){const Ri=Ah(ni,oe.get(ni.key).overlayedDocument);null!=Ri&&sr.push(new sa(ni.key,Ri,Xu(Ri.value.mapValue),fs.exists(!0)))}return O.mutationQueue.addMutationBatch(Tt,H,sr,w)}).next(Tn=>{We=Tn;const sr=Tn.applyToLocalDocumentSet(oe,Cn);return O.documentOverlayCache.saveOverlays(Tt,Tn.batchId,sr)})}).then(()=>({batchId:We.batchId,changes:Tu(oe)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(g,w,O){let H=g.Ic[g.currentUser.toKey()];H||(H=new zi(cr)),H=H.insert(w,O),g.Ic[g.currentUser.toKey()]=H}(s,c.batchId,t),yield Uu(s,c.changes),yield Cd(s.remoteStore)}catch(c){const g=C(c,"Failed to persist write");t.reject(g)}}),um.apply(this,arguments)}function ly(r,e){return cm.apply(this,arguments)}function cm(){return cm=(0,ue.Z)(function*(r,e){const t=Mn(r);try{const s=yield function Yh(r,e){const t=Mn(r),s=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const O=[];e.targetChanges.forEach((oe,We)=>{const Tt=c.get(We);if(!Tt)return;O.push(t.Fs.removeMatchingKeys(g,oe.removedDocuments,We).next(()=>t.Fs.addMatchingKeys(g,oe.addedDocuments,We)));let Qt=Tt.withSequenceNumber(g.currentSequenceNumber);var Cn,Tn,sr;null!==e.targetMismatches.get(We)?Qt=Qt.withResumeToken(hn.EMPTY_BYTE_STRING,Zn.min()).withLastLimboFreeSnapshotVersion(Zn.min()):oe.resumeToken.approximateByteSize()>0&&(Qt=Qt.withResumeToken(oe.resumeToken,s)),c=c.insert(We,Qt),Tn=Qt,sr=oe,(0===(Cn=Tt).resumeToken.approximateByteSize()||Tn.snapshotVersion.toMicroseconds()-Cn.snapshotVersion.toMicroseconds()>=3e8||sr.addedDocuments.size+sr.modifiedDocuments.size+sr.removedDocuments.size>0)&&O.push(t.Fs.updateTargetData(g,Qt))});let H=Mo(),Z=Yr();if(e.documentUpdates.forEach(oe=>{e.resolvedLimboDocuments.has(oe)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(g,oe))}),O.push(zf(g,w,e.documentUpdates).next(oe=>{H=oe.er,Z=oe.nr})),!s.isEqual(Zn.min())){const oe=t.Fs.getLastRemoteSnapshotVersion(g).next(We=>t.Fs.setTargetsMetadata(g,g.currentSequenceNumber,s));O.push(oe)}return mt.waitFor(O).next(()=>w.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,H,Z)).next(()=>H)}).then(g=>(t.Hi=c,g))}(t.localStore,e);e.targetChanges.forEach((c,g)=>{const w=t.gc.get(g);w&&(Jn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?w.lc=!0:c.modifiedDocuments.size>0?Jn(w.lc):c.removedDocuments.size>0&&(Jn(w.lc),w.lc=!1))}),yield Uu(t,s,e)}catch(s){yield ds(s)}}),cm.apply(this,arguments)}function uy(r,e,t){const s=Mn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.dc.forEach((g,w)=>{const O=w.view.ku(e);O.snapshot&&c.push(O.snapshot)}),function(g,w){const O=Mn(g);O.onlineState=w;let H=!1;O.queries.forEach((Z,oe)=>{for(const We of oe.listeners)We.ku(w)&&(H=!0)}),H&&Ur(O)}(s.eventManager,e),c.length&&s.fc.eu(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function nv(r,e,t){return dm.apply(this,arguments)}function dm(){return dm=(0,ue.Z)(function*(r,e,t){const s=Mn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.gc.get(e),g=c&&c.key;if(g){let w=new zi(xn.comparator);w=w.insert(g,es.newNoDocument(g,Zn.min()));const O=Yr().add(g),H=new bl(Zn.min(),new Map,new zi(cr),w,O);yield ly(s,H),s.mc=s.mc.remove(g),s.gc.delete(e),up(s)}else yield Hc(s.localStore,e,!1).then(()=>bd(s,e,t)).catch(ds)}),dm.apply(this,arguments)}function E_(r,e){return cy.apply(this,arguments)}function cy(){return cy=(0,ue.Z)(function*(r,e){const t=Mn(r),s=e.batch.batchId;try{const c=yield function oh(r,e){const t=Mn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),g=t.Xi.newChangeBuffer({trackRemovals:!0});return function(w,O,H,Z){const oe=H.batch,We=oe.keys();let Tt=mt.resolve();return We.forEach(Qt=>{Tt=Tt.next(()=>Z.getEntry(O,Qt)).next(Cn=>{const Tn=H.docVersions.get(Qt);Jn(null!==Tn),Cn.version.compareTo(Tn)<0&&(oe.applyToRemoteDocument(Cn,H),Cn.isValidDocument()&&(Cn.setReadTime(H.commitVersion),Z.addEntry(Cn)))})}),Tt.next(()=>w.mutationQueue.removeMutationBatch(O,oe))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let O=Yr();for(let H=0;H<w.mutationResults.length;++H)w.mutationResults[H].transformResults.length>0&&(O=O.add(w.batch.mutations[H].key));return O}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);hy(t,s,null),yg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Uu(t,c)}catch(c){yield ds(c)}}),cy.apply(this,arguments)}function rv(r,e,t){return dy.apply(this,arguments)}function dy(){return dy=(0,ue.Z)(function*(r,e,t){const s=Mn(r);try{const c=yield function(g,w){const O=Mn(g);return O.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Z;return O.mutationQueue.lookupMutationBatch(H,w).next(oe=>(Jn(null!==oe),Z=oe.keys(),O.mutationQueue.removeMutationBatch(H,oe))).next(()=>O.mutationQueue.performConsistencyCheck(H)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(H,Z,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Z)).next(()=>O.localDocuments.getDocuments(H,Z))})}(s.localStore,e);hy(s,e,t),yg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Uu(s,c)}catch(c){yield ds(c)}}),dy.apply(this,arguments)}function mg(){return mg=(0,ue.Z)(function*(r,e){const t=Mn(r);pc(t.remoteStore)||on("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=Mn(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===s)return void e.resolve();const c=t.Tc.get(s)||[];c.push(e),t.Tc.set(s,c)}catch(s){const c=C(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),mg.apply(this,arguments)}function yg(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function hy(r,e,t){const s=Mn(r);let c=s.Ic[s.currentUser.toKey()];if(c){const g=c.get(e);g&&(t?g.reject(t):g.resolve(),c=c.remove(e)),s.Ic[s.currentUser.toKey()]=c}}function bd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||vg(r,s)})}function vg(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(Qf(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),up(r))}function _g(r,e,t){for(const s of t)s instanceof gc?(r.yc.addReference(s.key,e),w_(r,s)):s instanceof mc?(on("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||vg(r,s.key)):Un()}function w_(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(on("SyncEngine","New document in limbo: "+t),r.wc.add(s),up(r))}function up(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new xn(vi.fromString(e)),s=r.Ec.next();r.gc.set(s,new op(t)),r.mc=r.mc.insert(t,s),cu(r.remoteStore,new uc(Ro($l(t.path)),s,"TargetPurposeLimboResolution",j.ct))}}function Uu(r,e,t){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,ue.Z)(function*(r,e,t){const s=Mn(r),c=[],g=[],w=[];var O;s.dc.isEmpty()||(s.dc.forEach((O,H)=>{w.push(s.Rc(H,e,t).then(Z=>{if((Z||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(H.targetId,null!=Z&&Z.fromCache?"not-current":"current"),Z){c.push(Z);const oe=jf.Bi(H.targetId,Z);g.push(oe)}}))}),yield Promise.all(w),s.fc.eu(c),yield(O=(0,ue.Z)(function*(H,Z){const oe=Mn(H);try{yield oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",We=>mt.forEach(Z,Tt=>mt.forEach(Tt.$i,Qt=>oe.persistence.referenceDelegate.addReference(We,Tt.targetId,Qt)).next(()=>mt.forEach(Tt.Fi,Qt=>oe.persistence.referenceDelegate.removeReference(We,Tt.targetId,Qt)))))}catch(We){if(!Vo(We))throw We;on("LocalStore","Failed to update sequence numbers: "+We)}for(const We of Z){const Tt=We.targetId;if(!We.fromCache){const Qt=oe.Hi.get(Tt),Tn=Qt.withLastLimboFreeSnapshotVersion(Qt.snapshotVersion);oe.Hi=oe.Hi.insert(Tt,Tn)}}}),function(H,Z){return O.apply(this,arguments)})(s.localStore,g))}),Eg.apply(this,arguments)}function iv(r,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,ue.Z)(function*(r,e){const t=Mn(r);if(!t.currentUser.isEqual(e)){on("SyncEngine","User change. New user:",e.toKey());const s=yield Qg(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(w=>{w.forEach(O=>{O.reject(new Zt(Ut.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Uu(t,s.tr)}var c}),Ig.apply(this,arguments)}function sv(r,e){const t=Mn(r),s=t.gc.get(e);if(s&&s.lc)return Yr().add(s.key);{let c=Yr();const g=t._c.get(e);if(!g)return c;for(const w of g){const O=t.dc.get(w);c=c.unionWith(O.view.ec)}return c}}function ov(r,e){return wg.apply(this,arguments)}function wg(){return wg=(0,ue.Z)(function*(r,e){const t=Mn(r),s=yield ah(t.localStore,e.query,!0),c=e.view.ac(s);return t.isPrimaryClient&&_g(t,e.targetId,c.uc),c}),wg.apply(this,arguments)}function av(r,e){return fy.apply(this,arguments)}function fy(){return fy=(0,ue.Z)(function*(r,e){const t=Mn(r);return Wf(t.localStore,e).then(s=>Uu(t,s))}),fy.apply(this,arguments)}function lv(r,e,t,s){return hm.apply(this,arguments)}function hm(){return hm=(0,ue.Z)(function*(r,e,t,s){const c=Mn(r),g=yield function(w,O){const H=Mn(w),Z=Mn(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",oe=>Z.Vn(oe,O).next(We=>We?H.localDocuments.getDocuments(oe,We):mt.resolve(null)))}(c.localStore,e);var O;null!==g?("pending"===t?yield Cd(c.remoteStore):"acknowledged"===t||"rejected"===t?(hy(c,e,s||null),yg(c,e),O=e,Mn(Mn(c.localStore).mutationQueue).Dn(O)):Un(),yield Uu(c,g)):on("SyncEngine","Cannot apply mutation batch with id: "+e)}),hm.apply(this,arguments)}function fm(){return fm=(0,ue.Z)(function*(r,e){const t=Mn(r);if(ym(t),vm(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield cv(t,s.toArray());t.Ac=!0,yield gg(t.remoteStore,!0);for(const g of c)cu(t.remoteStore,g)}else if(!1===e&&!1!==t.Ac){const s=[];let c=Promise.resolve();t._c.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?s.push(w):c=c.then(()=>(bd(t,w),Hc(t.localStore,w,!0))),Qf(t.remoteStore,w)}),yield c,yield cv(t,s),function(g){const w=Mn(g);w.gc.forEach((O,H)=>{Qf(w.remoteStore,H)}),w.yc.Is(),w.gc=new Map,w.mc=new zi(xn.comparator)}(t),t.Ac=!1,yield gg(t.remoteStore,!1)}}),fm.apply(this,arguments)}function cv(r,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,ue.Z)(function*(r,e,t){const s=Mn(r),c=[],g=[];for(const w of e){let O;const H=s._c.get(w);if(H&&0!==H.length){O=yield wd(s.localStore,Ro(H[0]));for(const Z of H){const oe=s.dc.get(Z),We=yield ov(s,oe);We.snapshot&&g.push(We.snapshot)}}else{const Z=yield tg(s.localStore,w);O=yield wd(s.localStore,Z),yield hh(s,py(Z),w,!1,O.resumeToken)}c.push(O)}return s.fc.eu(g),c}),pm.apply(this,arguments)}function py(r){return rc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function dv(r){const e=Mn(r);return Mn(Mn(e.localStore).persistence).Mi()}function gy(r,e,t,s){return gm.apply(this,arguments)}function gm(){return gm=(0,ue.Z)(function*(r,e,t,s){const c=Mn(r);if(c.Ac)return void on("SyncEngine","Ignoring unexpected query state notification.");const g=c._c.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield Wf(c.localStore,Du(g[0])),O=bl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hn.EMPTY_BYTE_STRING);yield Uu(c,w,O);break}case"rejected":yield Hc(c.localStore,e,!0),bd(c,e,s);break;default:Un()}}),gm.apply(this,arguments)}function hv(r,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,ue.Z)(function*(r,e,t){const s=ym(r);if(s.Ac){for(const c of e){if(s._c.has(c)){on("SyncEngine","Adding an already active target "+c);continue}const g=yield tg(s.localStore,c),w=yield wd(s.localStore,g);yield hh(s,py(g),w.targetId,!1,w.resumeToken),cu(s.remoteStore,w)}for(const c of t)s._c.has(c)&&(yield Hc(s.localStore,c,!1).then(()=>{Qf(s.remoteStore,c),bd(s,c)}).catch(ds))}}),mm.apply(this,arguments)}function ym(r){const e=Mn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ly.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nv.bind(null,e),e.fc.eu=Ln.bind(null,e.eventManager),e.fc.vc=Jr.bind(null,e.eventManager),e}function vm(r){const e=Mn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rv.bind(null,e),e}class cp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=Qh(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Xg(this.persistence,new eg,e.initialUser,this.serializer)}createPersistence(e){return new Id(qh.js,this.serializer)}createSharedClientState(e){return new nm}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class dp extends cp{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield vm(s.bc.syncEngine),yield Cd(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Xg(this.persistence,new eg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Wp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new P(t,this.persistence);return new b(e.asyncQueue,s)}createPersistence(e){const t=jc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?zo.withCacheSize(this.cacheSizeBytes):zo.DEFAULT;return new el(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,rm(),Xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new nm}}class Dd extends dp{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof Zf&&(s.sharedClientState.syncEngine={Qr:lv.bind(null,c),jr:gy.bind(null,c),zr:hv.bind(null,c),Mi:dv.bind(null,c),Gr:av.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var g=(0,ue.Z)(function*(w){yield function uv(r,e){return fm.apply(this,arguments)}(s.bc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}createSharedClientState(e){const t=rm();if(!Zf.D(t))throw new Zt(Ut.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=jc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class hp{initialize(e,t){var s=this;return(0,ue.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>uy(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=iv.bind(null,s.syncEngine),yield gg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _e}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),s=new ey(e.databaseInfo);return new im(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,g=O=>uy(this.syncEngine,O,0),w=ng.D()?new ng:new Qy,new ag(t,s,c,g,w);var t,s,c,g,w}createSyncEngine(e,t){return function(s,c,g,w,O,H,Z){const oe=new ap(s,c,g,w,O,H);return Z&&(oe.Ac=!0),oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const s=Mn(t);on("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield Ms(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gv(r,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class af{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new is,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),c=Number(s);isNaN(c)&&e.kc(`length string (${s}) is not valid number`);const g=yield e.Mc(c);return new Oi(JSON.parse(g),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,ue.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class my{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(Ut.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,ue.Z)(function*(g,w){const O=Mn(g),H=Oc(O.serializer)+"/documents",Z={documents:w.map(Qt=>Pc(O.serializer,Qt))},oe=yield O.Ao("BatchGetDocuments",H,Z,w.length),We=new Map;oe.forEach(Qt=>{const Cn=function Np(r,e){return"found"in e?function(t,s){Jn(!!s.found);const c=Hl(t,s.found.name),g=Ns(s.found.updateTime),w=s.found.createTime?Ns(s.found.createTime):Zn.min(),O=new ks({mapValue:{fields:s.found.fields}});return es.newFoundDocument(c,g,w,O)}(r,e):"missing"in e?function(t,s){Jn(!!s.missing),Jn(!!s.readTime);const c=Hl(t,s.missing),g=Ns(s.readTime);return es.newNoDocument(c,g)}(r,e):Un()}(O.serializer,Qt);We.set(Cn.key.toString(),Cn)});const Tt=[];return w.forEach(Qt=>{const Cn=We.get(Qt.toString());Jn(!!Cn),Tt.push(Cn)}),Tt}),function(g,w){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new D(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const g=xn.fromPath(c);e.mutations.push(new v(g,e.precondition(g)))}),yield(s=(0,ue.Z)(function*(c,g){const w=Mn(c),O=Oc(w.serializer)+"/documents",H={writes:g.map(Z=>Zd(w.serializer,Z))};yield w.po("Commit",O,H)}),function(c,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Un();t=Zn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Zt(Ut.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zn.min())?fs.exists(!1):fs.updateTime(t):fs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zn.min()))throw new Zt(Ut.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fs.updateTime(t)}return fs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C_{constructor(e,t,s,c,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=g,this.Fc=s.maxAttempts,this.Lo=new uu(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,ue.Z)(function*(){const t=new my(e.datastore),s=e.Lc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(g=>{e.qc(g)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!ee(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wn(t)}return!1}}class yy{constructor(e,t,s,c){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Wi.UNAUTHENTICATED,this.clientId=Ka.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var w=(0,ue.Z)(function*(O){on("FirestoreClient","Received user=",O.uid),yield g.authCredentialListener(O),g.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(on("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(Ut.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=C(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function vy(r,e){return mv.apply(this,arguments)}function mv(){return mv=(0,ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),on("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,ue.Z)(function*(g){s.isEqual(g)||(yield Qg(e.localStore,g),s=g)});return function(g){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),mv.apply(this,arguments)}function _y(r,e){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield wy(r);on("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>sf(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,g)=>sf(e.remoteStore,g)),r._onlineComponents=e}),Ey.apply(this,arguments)}function Iy(r){return"FirebaseError"===r.name?r.code===Ut.FAILED_PRECONDITION||r.code===Ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function wy(r){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,ue.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){on("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Iy(t))throw t;pi("Error using user provided cache. Falling back to memory cache: "+t),yield vy(r,new cp)}}else on("FirestoreClient","Using default OfflineComponentProvider"),yield vy(r,new cp);return r._offlineComponents}),Wo.apply(this,arguments)}function Cg(r){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,ue.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(on("FirestoreClient","Using user provided OnlineComponentProvider"),yield _y(r,r._uninitializedComponentsProvider._online)):(on("FirestoreClient","Using default OnlineComponentProvider"),yield _y(r,new hp))),r._onlineComponents}),Cy.apply(this,arguments)}function yv(r){return wy(r).then(e=>e.persistence)}function bg(r){return wy(r).then(e=>e.localStore)}function vv(r){return Cg(r).then(e=>e.remoteStore)}function _m(r){return Cg(r).then(e=>e.syncEngine)}function yc(r){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,ue.Z)(function*(r){const e=yield Cg(r),t=e.eventManager;return t.onListen=lp.bind(null,e.syncEngine),t.onUnlisten=ev.bind(null,e.syncEngine),t}),Dy.apply(this,arguments)}function Ty(r,e,t={}){const s=new is;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(c,g,w,O,H){const Z=new fp({next:We=>{g.enqueueAndForget(()=>Ht(c,oe));const Tt=We.docs.has(w);!Tt&&We.fromCache?H.reject(new Zt(Ut.UNAVAILABLE,"Failed to get document because the client is offline.")):Tt&&We.fromCache&&O&&"server"===O.source?H.reject(new Zt(Ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(We)},error:We=>H.reject(We)}),oe=new ws($l(w.path),Z,{includeMetadataChanges:!0,Uu:!0});return Dt(c,oe)}(yield yc(r),r.asyncQueue,e,t,s)})),s.promise}function Sy(r,e,t={}){const s=new is;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(c,g,w,O,H){const Z=new fp({next:We=>{g.enqueueAndForget(()=>Ht(c,oe)),We.fromCache&&"server"===O.source?H.reject(new Zt(Ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(We)},error:We=>H.reject(We)}),oe=new ws(w,Z,{includeMetadataChanges:!0,Uu:!0});return Dt(c,oe)}(yield yc(r),r.asyncQueue,e,t,s)})),s.promise}const vc=new Map;function hu(r,e,t){if(!t)throw new Zt(Ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Vu(r,e,t,s){if(!0===e&&!0===s)throw new Zt(Ut.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function xy(r){if(!xn.isDocumentKey(r))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ry(r){if(xn.isDocumentKey(r))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Em(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Un()}function ki(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Zt(Ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Em(r);throw new Zt(Ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ev(r,e){if(e<=0)throw new Zt(Ut.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Iv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(Ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(Ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vu("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zt(Ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(Ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _c;switch(t.type){case"firstParty":return new Hu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zt(Ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vc.get(e);t&&(on("ComponentProvider","Removing Datastore"),vc.delete(e),t.terminate())}(this),Promise.resolve()}}class zs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zs(this.firestore,e,this._key)}}class Ua{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class qc extends Ua{constructor(e,t,s){super(e,t,$l(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zs(this.firestore,null,new xn(e))}withConverter(e){return new qc(this.firestore,e,this._path)}}function My(r,e,...t){if(r=(0,He.m9)(r),hu("collection","path",e),r instanceof lf){const s=vi.fromString(e,...t);return Ry(s),new qc(r,null,s)}{if(!(r instanceof zs||r instanceof qc))throw new Zt(Ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return Ry(s),new qc(r.firestore,null,s)}}function uf(r,e,...t){if(r=(0,He.m9)(r),1===arguments.length&&(e=Ka.A()),hu("doc","path",e),r instanceof lf){const s=vi.fromString(e,...t);return xy(s),new zs(r,null,new xn(s))}{if(!(r instanceof zs||r instanceof qc))throw new Zt(Ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vi.fromString(e,...t));return xy(s),new zs(r.firestore,r instanceof qc?r.converter:null,new xn(s))}}function Cv(r,e){return r=(0,He.m9)(r),e=(0,He.m9)(e),(r instanceof zs||r instanceof qc)&&(e instanceof zs||e instanceof qc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Im(r,e){return r=(0,He.m9)(r),e=(0,He.m9)(e),r instanceof Ua&&e instanceof Ua&&r.firestore===e.firestore&&tu(r._query,e._query)&&r.converter===e.converter}class bv{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new uu(this,"async_queue_retry"),this.Yc=()=>{const t=Xf();t&&on("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=Xf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=Xf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new is;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,ue.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Vo(t))throw t;on("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,Ki("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=m.createAndSchedule(this,e,t,s,g=>this.ea(g));return this.jc.push(c),c}Xc(){this.zc&&Un()}verifyOperationInProgress(){}na(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function Dg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class wm{constructor(){this._progressObserver={},this._taskCompletionResolver=new is,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fs extends lf{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new bv,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Py(this),this._firestoreClient.terminate()}}function Oo(r){return r._firestoreClient||Py(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Py(r){var e,t,s;const c=r._freezeSettings(),g=(O=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Na(r._databaseId,O,r._persistenceKey,(Z=c).host,Z.ssl,Z.experimentalForceLongPolling,Z.experimentalAutoDetectLongPolling,Z.useFetchStreams));var O,Z;r._firestoreClient=new yy(r._authCredentials,r._appCheckCredentials,r._queue,g),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=c.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function Av(r,e,t){const s=new is;return r.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield vy(r,t),yield _y(r,e),s.resolve()}catch(c){const g=c;if(!Iy(g))throw g;pi("Error enabling indexeddb cache. Falling back to memory cache: "+g),s.reject(g)}})).then(()=>s.promise)}function xv(r){if(r._initialized||r._terminated)throw new Zt(Ut.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kc(hn.fromBase64String(e))}catch(t){throw new Zt(Ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kc(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(Ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cf{constructor(e){this._methodName=e}}class Cm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(Ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(Ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cr(this._lat,e._lat)||cr(this._long,e._long)}}const L_=/^__.*__$/;class B_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ho(e,this.data,t,this.fieldTransforms)}}class Oy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ky(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Un()}}class Sg{constructor(e,t,s,c,g,w){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===g&&this.oa(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.la(e),c}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Sm(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ky(this.ua)&&L_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Rv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Qh(e)}ga(e,t,s,c=!1){return new Sg({ua:e,methodName:t,ma:s,path:Dr.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(r){const e=r._freezeSettings(),t=Qh(r._databaseId);return new Rv(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ag(r,e,t,s,c,g={}){const w=r.ga(g.merge||g.mergeFields?2:0,e,t,c);Tm("Data must be an object, but it was:",w,s);const O=Dm(s,w);let H,Z;if(g.merge)H=new ot(w.fieldMask),Z=w.fieldTransforms;else if(g.mergeFields){const oe=[];for(const We of g.mergeFields){const Tt=yp(e,We,t);if(!w.contains(Tt))throw new Zt(Ut.INVALID_ARGUMENT,`Field '${Tt}' is specified in your field mask but missing from your input data.`);Ov(oe,Tt)||oe.push(Tt)}H=new ot(oe),Z=w.fieldTransforms.filter(We=>H.covers(We.field))}else H=null,Z=w.fieldTransforms;return new B_(new ks(O),H,Z)}class gp extends cf{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gp}}function Ny(r,e,t){return new Sg({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bm extends cf{_toFieldTransform(e){return new zd(e.path,new iu)}isEqual(e){return e instanceof bm}}class Mv extends cf{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Ny(this,e,!0),s=this.ya.map(g=>mp(g,t)),c=new jl(s);return new zd(e.path,c)}isEqual(e){return this===e}}class Pv extends cf{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Ny(this,e,!0),s=this.ya.map(g=>mp(g,t)),c=new xu(s);return new zd(e.path,c)}isEqual(e){return this===e}}class df extends cf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new Ia(e.serializer,Po(e.serializer,this.pa));return new zd(e.path,t)}isEqual(e){return this===e}}function Fy(r,e,t,s){const c=r.ga(1,e,t);Tm("Data must be an object, but it was:",c,s);const g=[],w=ks.empty();_a(s,(H,Z)=>{const oe=Mr(e,H,t);Z=(0,He.m9)(Z);const We=c.fa(oe);if(Z instanceof gp)g.push(oe);else{const Tt=mp(Z,We);null!=Tt&&(g.push(oe),w.set(oe,Tt))}});const O=new ot(g);return new Oy(w,O,c.fieldTransforms)}function Ly(r,e,t,s,c,g){const w=r.ga(1,e,t),O=[yp(e,s,t)],H=[c];if(g.length%2!=0)throw new Zt(Ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Tt=0;Tt<g.length;Tt+=2)O.push(yp(e,g[Tt])),H.push(g[Tt+1]);const Z=[],oe=ks.empty();for(let Tt=O.length-1;Tt>=0;--Tt)if(!Ov(Z,O[Tt])){const Qt=O[Tt];let Cn=H[Tt];Cn=(0,He.m9)(Cn);const Tn=w.fa(Qt);if(Cn instanceof gp)Z.push(Qt);else{const sr=mp(Cn,Tn);null!=sr&&(Z.push(Qt),oe.set(Qt,sr))}}const We=new ot(Z);return new Oy(oe,We,w.fieldTransforms)}function hf(r,e,t,s=!1){return mp(t,r.ga(s?4:3,e))}function mp(r,e){if($_(r=(0,He.m9)(r)))return Tm("Unsupported field value:",e,r),Dm(r,e);if(r instanceof cf)return function(t,s){if(!ky(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const c=[];let g=0;for(const w of t){let O=mp(w,s.da(g));null==O&&(O={nullValue:"NULL_VALUE"}),c.push(O),g++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,He.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Po(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Br.fromDate(t);return{timestampValue:ou(s.serializer,c)}}if(t instanceof Br){const c=new Br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ou(s.serializer,c)}}if(t instanceof Cm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Kc)return{bytesValue:kh(s.serializer,t._byteString)};if(t instanceof zs){const c=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(c))throw s._a(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Yd(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Em(t)}`)}(r,e)}function Dm(r,e){const t={};return Yu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(r,(s,c)=>{const g=mp(c,e.aa(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function $_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Br||r instanceof Cm||r instanceof Kc||r instanceof zs||r instanceof cf)}function Tm(r,e,t){if(!$_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Em(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function yp(r,e,t){if((e=(0,He.m9)(e))instanceof Td)return e._internalPath;if("string"==typeof e)return Mr(r,e);throw Sm("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function Mr(r,e,t){if(e.search(tE)>=0)throw Sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Td(...e.split("."))._internalPath}catch(s){throw Sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sm(r,e,t,s,c){const g=s&&!s.isEmpty(),w=void 0!==c;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let H="";return(g||w)&&(H+=" (found",g&&(H+=` in field ${s}`),w&&(H+=` in document ${c}`),H+=")"),new Zt(Ut.INVALID_ARGUMENT,O+r+H)}function Ov(r,e){return r.some(t=>t.isEqual(e))}class xg{constructor(e,t,s,c,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new zs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Am("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vp extends xg{data(){return super.data()}}function Am(r,e){return"string"==typeof e?Mr(r,e):e instanceof Td?e._internalPath:e._delegate._internalPath}function Rg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Zt(Ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class Ls extends _p{}function ff(r,e,...t){let s=[];e instanceof _p&&s.push(e),s=s.concat(t),function(c){const g=c.filter(O=>O instanceof Ip).length,w=c.filter(O=>O instanceof Ep).length;if(g>1||g>0&&w>0)throw new Zt(Ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class Ep extends Ls{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ep(e,t,s)}_apply(e){const t=this._parse(e);return wp(e._query,t),new Ua(e.firestore,e.converter,Tc(e._query,t))}_parse(e){const t=ph(e.firestore);return function(c,g,w,O,H,Z,oe){let We;if(H.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){Lv(oe,Z);const Tt=[];for(const Qt of oe)Tt.push($y(O,c,Qt));We={arrayValue:{values:Tt}}}else We=$y(O,c,oe)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||Lv(oe,Z),We=hf(w,"where",oe,"in"===Z||"not-in"===Z);return $r.create(H,Z,We)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ip extends _p{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ip(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let g=s;const w=c.getFlattenedFilters();for(const O of w)wp(g,O),g=Tc(g,O)}(e._query,t),new Ua(e.firestore,e.converter,Tc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xm extends Ls{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xm(e,t)}_apply(e){const t=function(s,c,g){if(null!==s.startAt)throw new Zt(Ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Zt(Ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new Dc(c,g);return function(O,H){if(null===bu(O)){const Z=Vl(O);null!==Z&&Cp(0,Z,H.field)}}(s,w),w}(e._query,this._field,this._direction);return new Ua(e.firestore,e.converter,function(s,c){const g=s.explicitOrderBy.concat([c]);return new wl(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Rm extends Ls{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Rm(e,t,s)}_apply(e){return new Ua(e.firestore,e.converter,ic(e._query,this._limit,this._limitType))}}class gh extends Ls{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new gh(e,t,s)}_apply(e){const t=By(e,this.type,this._docOrFields,this._inclusive);return new Ua(e.firestore,e.converter,(c=t,new wl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Mm extends Ls{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Mm(e,t,s)}_apply(e){const t=By(e,this.type,this._docOrFields,this._inclusive);return new Ua(e.firestore,e.converter,(c=t,new wl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function By(r,e,t,s){if(t[0]=(0,He.m9)(t[0]),t[0]instanceof xg)return function(c,g,w,O,H){if(!O)throw new Zt(Ut.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const Z=[];for(const oe of Fa(c))if(oe.field.isKeyField())Z.push(ro(g,O.key));else{const We=O.data.field(oe.field);if(Ao(We))throw new Zt(Ut.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===We){const Tt=oe.field.canonicalString();throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Tt}' (used as the orderBy) does not exist.`)}Z.push(We)}return new Xl(Z,H)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=ph(r.firestore);return function(g,w,O,H,Z,oe){const We=g.explicitOrderBy;if(Z.length>We.length)throw new Zt(Ut.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Tt=[];for(let Qt=0;Qt<Z.length;Qt++){const Cn=Z[Qt];if(We[Qt].field.isKeyField()){if("string"!=typeof Cn)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Cn}`);if(!sd(g)&&-1!==Cn.indexOf("/"))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Cn}' contains a slash.`);const Tn=g.path.child(vi.fromString(Cn));if(!xn.isDocumentKey(Tn))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Tn}' is not because it contains an odd number of segments.`);const sr=new xn(Tn);Tt.push(ro(w,sr))}else{const Tn=hf(O,H,Cn);Tt.push(Tn)}}return new Xl(Tt,oe)}(r._query,r.firestore._databaseId,c,e,t,s)}}function $y(r,e,t){if("string"==typeof(t=(0,He.m9)(t))){if(""===t)throw new Zt(Ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sd(e)&&-1!==t.indexOf("/"))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vi.fromString(t));if(!xn.isDocumentKey(s))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ro(r,new xn(s))}if(t instanceof zs)return ro(r,t._key);throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function Lv(r,e){if(!Array.isArray(r)||0===r.length)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wp(r,e){if(e.isInequality()){const s=Vl(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const g=bu(r);null!==g&&Cp(0,c,g)}const t=function(s,c){for(const g of s)for(const w of g.getFlattenedFilters())if(c.indexOf(w.op)>=0)return w.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Zt(Ut.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Cp(r,e,t){if(!t.isEqual(e))throw new Zt(Ut.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Uy{convertValue(e,t="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Un()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return _a(e,(c,g)=>{s[c]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new Cm(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Kr(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const t=ln(e);return new Br(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vi.fromString(e);Jn(Bp(s));const c=new vo(s.get(1),s.get(3)),g=new xn(s.popFirst(5));return c.isEqual(t)||Ki(`Document ${g} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Om(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class $v extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zs(this.firestore,null,t)}}class pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mh extends xg{constructor(e,t,s,c,g,w){super(e,t,s,c,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Am("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class km extends mh{data(e={}){return super.data(e)}}class gf{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new pf(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new km(this._firestore,this._userDataWriter,s.key,s,new pf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(Ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(w=>({type:"added",doc:new km(s._firestore,s._userDataWriter,w.doc.key,w.doc,new pf(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(w=>c||3!==w.type).map(w=>{const O=new km(s._firestore,s._userDataWriter,w.doc.key,w.doc,new pf(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter);let H=-1,Z=-1;return 0!==w.type&&(H=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),Z=g.indexOf(w.doc.key)),{type:rE(w.type),doc:O,oldIndex:H,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Un()}}function Vy(r,e){return r instanceof mh&&e instanceof mh?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof gf&&e instanceof gf&&r._firestore===e._firestore&&Im(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class yh extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zs(this.firestore,null,t)}}function Vv(r,e,t){r=ki(r,zs);const s=ki(r.firestore,Fs),c=Om(r.converter,e,t);return bp(s,[Ag(ph(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,fs.none())])}function jv(r,e,t,...s){r=ki(r,zs);const c=ki(r.firestore,Fs),g=ph(c);let w;return w="string"==typeof(e=(0,He.m9)(e))||e instanceof Td?Ly(g,"updateDoc",r._key,e,t,s):Fy(g,"updateDoc",r._key,e),bp(c,[w.toMutation(r._key,fs.exists(!0))])}function jy(r,...e){var t,s,c;r=(0,He.m9)(r);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||Dg(e[w])||(g=e[w],w++);const O={includeMetadataChanges:g.includeMetadataChanges};if(Dg(e[w])){const We=e[w];e[w]=null===(t=We.next)||void 0===t?void 0:t.bind(We),e[w+1]=null===(s=We.error)||void 0===s?void 0:s.bind(We),e[w+2]=null===(c=We.complete)||void 0===c?void 0:c.bind(We)}let H,Z,oe;if(r instanceof zs)Z=ki(r.firestore,Fs),oe=$l(r._key.path),H={next:We=>{e[w]&&e[w](mf(Z,r,We))},error:e[w+1],complete:e[w+2]};else{const We=ki(r,Ua);Z=ki(We.firestore,Fs),oe=We._query;const Tt=new yh(Z);H={next:Qt=>{e[w]&&e[w](new gf(Z,Tt,We,Qt))},error:e[w+1],complete:e[w+2]},Rg(r._query)}return function(We,Tt,Qt,Cn){const Tn=new fp(Cn),sr=new ws(Tt,Tn,Qt);return We.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Dt(yield yc(We),sr)})),()=>{Tn.Sc(),We.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Ht(yield yc(We),sr)}))}}(Oo(Z),oe,O,H)}function bp(r,e){return function(t,s){const c=new is;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function tv(r,e,t){return um.apply(this,arguments)}(yield _m(t),s,c)})),c.promise}(Oo(r),e)}function mf(r,e,t){const s=t.docs.get(e._key),c=new yh(r);return new mh(r,c,e._key,s,new pf(t.hasPendingWrites,t.fromCache),e.converter)}const Hy={maxAttempts:5};class Kv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ph(e)}set(e,t,s){this._verifyNotCommitted();const c=Sd(e,this._firestore),g=Om(c.converter,t,s),w=Ag(this._dataReader,"WriteBatch.set",c._key,g,null!==c.converter,s);return this._mutations.push(w.toMutation(c._key,fs.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const g=Sd(e,this._firestore);let w;return w="string"==typeof(t=(0,He.m9)(t))||t instanceof Td?Ly(this._dataReader,"WriteBatch.update",g._key,t,s,c):Fy(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sd(e,this._firestore);return this._mutations=this._mutations.concat(new D(t._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(Ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sd(r,e){if((r=(0,He.m9)(r)).firestore!==e)throw new Zt(Ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ph(e)}get(e){const t=Sd(e,this._firestore),s=new $v(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Un();const g=c[0];if(g.isFoundDocument())return new xg(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new xg(this._firestore,s,t._key,null,t.converter);throw Un()})}set(e,t,s){const c=Sd(e,this._firestore),g=Om(c.converter,t,s),w=Ag(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,s);return this._transaction.set(c._key,w),this}update(e,t,s,...c){const g=Sd(e,this._firestore);let w;return w="string"==typeof(t=(0,He.m9)(t))||t instanceof Td?Ly(this._dataReader,"Transaction.update",g._key,t,s,c):Fy(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=Sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sd(e,this._firestore),s=new yh(this._firestore);return super.get(e).then(c=>new mh(this._firestore,s,t._key,c._document,new pf(!1,!1),t.converter))}}!function(r,e=!0){Rl=rt.SDK_VERSION,(0,rt._registerComponent)(new pt.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const g=t.getProvider("app").getImmediate(),w=new Fs(new Ol(t.getProvider("auth-internal")),new yl(t.getProvider("app-check-internal")),function(O,H){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Zt(Ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(O.options.projectId,H)}(g,s),g);return c=Object.assign({useFetchStreams:e},c),w._setSettings(c),w},"PUBLIC").setMultipleInstances(!0)),(0,rt.registerVersion)(ql,"3.11.0",r),(0,rt.registerVersion)(ql,"3.11.0","esm2017")}();function Fm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yv(){if(typeof Uint8Array>"u")throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function Zv(){if(!function en(){return typeof atob<"u"}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Pg{constructor(e){this._delegate=e}static fromBase64String(e){return Zv(),new Pg(Kc.fromBase64String(e))}static fromUint8Array(e){return Yv(),new Pg(Kc.fromUint8Array(e))}toBase64(){return Zv(),this._delegate.toBase64()}toUint8Array(){return Yv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Og(r){return function Gy(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class Xv{enableIndexedDbPersistence(e,t){return function Tv(r,e){xv(r=ki(r,Fs));const t=Oo(r);if(t._uninitializedComponentsProvider)throw new Zt(Ut.FAILED_PRECONDITION,"SDK cache is already specified.");pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),c=new hp;return Av(t,c,new dp(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Sv(r){xv(r=ki(r,Fs));const e=Oo(r);if(e._uninitializedComponentsProvider)throw new Zt(Ut.FAILED_PRECONDITION,"SDK cache is already specified.");pi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new hp;return Av(e,s,new Dd(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R_(r){if(r._initialized&&!r._terminated)throw new Zt(Ut.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new is;return r._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(s){if(!fr.D())return Promise.resolve();const c=s+"main";yield fr.delete(c)}),function(s){return t.apply(this,arguments)})(jc(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Lm{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof vo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function pp(r,e,t,s={}){var c;const g=(r=ki(r,lf))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&pi("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let w,O;if("string"==typeof s.mockUserToken)w=s.mockUserToken,O=Wi.MOCK_USER;else{w=(0,He.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const H=s.mockUserToken.sub||s.mockUserToken.user_id;if(!H)throw new Zt(Ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new Wi(H)}r._authCredentials=new sl(new So(w,O))}}(this._delegate,e,t,s)}enableNetwork(){return function P_(r){return function b_(r){return r.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield yv(r),t=yield vv(r);return e.setNetworkEnabled(!0),function(s){const c=Mn(s);return c.Au.delete(0),Jh(c)}(t)}))}(Oo(r=ki(r,Fs)))}(this._delegate)}disableNetwork(){return function O_(r){return function _v(r){return r.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield yv(r),t=yield vv(r);return e.setNetworkEnabled(!1),(s=(0,ue.Z)(function*(c){const g=Mn(c);g.Au.add(0),yield Ms(g),g.Pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Oo(r=ki(r,Fs)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Vu("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function M_(r){return function(e){const t=new is;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function I_(r,e){return mg.apply(this,arguments)}(yield _m(e),t)})),t.promise}(Oo(r=ki(r,Fs)))}(this._delegate)}onSnapshotsInSync(e){return function e0(r,e){return function Ay(r,e){const t=new fp(e);return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield yc(r),c=t,Mn(s).Nu.add(c),void c.next();var s,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield yc(r),c=t,void Mn(s).Nu.delete(c);var s,c}))}}(Oo(r=ki(r,Fs)),Dg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vf(this,My(this._delegate,e))}catch(t){throw hl(t,"collection()","Firestore.collection()")}}doc(e){try{return new tl(this,uf(this._delegate,e))}catch(t){throw hl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Sl(this,function wv(r,e){if(r=ki(r,lf),hu("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(Ut.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ua(r,null,(t=e,new wl(vi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=ki(r,Fs);const s=Object.assign(Object.assign({},Hy),t);return function(c){if(c.maxAttempts<1)throw new Zt(Ut.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,g,w){const O=new is;return c.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const H=yield function by(r){return Cg(r).then(e=>e.datastore)}(c);new C_(c.asyncQueue,H,w,g,O).run()})),O.promise}(Oo(r),c=>e(new a0(r,c)),s)}(this._delegate,t=>e(new $m(this,t)))}batch(){return Oo(this._delegate),new Qv(new Kv(this._delegate,e=>bp(this._delegate,e)))}loadBundle(e){return function k_(r,e){const t=Oo(r=ki(r,Fs)),s=new wm;return function Wc(r,e,t,s){const c=function(g,w){let O;return O="string"==typeof g?wa().encode(g):g,H=function(H,Z){if(H instanceof Uint8Array)return gv(H,Z);if(H instanceof ArrayBuffer)return gv(new Uint8Array(H),Z);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new af(H,w);var H}(t,Qh(e));r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function fv(r,e,t){const s=Mn(r);var c;(c=(0,ue.Z)(function*(g,w,O){try{const H=yield w.getMetadata();if(yield function(Tt,Qt){const Cn=Mn(Tt),Tn=Ns(Qt.createTime);return Cn.persistence.runTransaction("hasNewerBundle","readonly",sr=>Cn.Ls.getBundleMetadata(sr,Qt.id)).then(sr=>!!sr&&sr.createTime.compareTo(Tn)>=0)}(g.localStore,H))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(Tt=H).totalDocuments,bytesLoaded:Tt.totalBytes,totalDocuments:Tt.totalDocuments,totalBytes:Tt.totalBytes}),Promise.resolve(new Set);O._updateProgress(oa(H));const Z=new so(H,g.localStore,w.serializer);let oe=yield w.Pc();for(;oe;){const Tt=yield Z.ju(oe);Tt&&O._updateProgress(Tt),oe=yield w.Pc()}const We=yield Z.complete();return yield Uu(g,We.Hu,void 0),yield function(Tt,Qt){const Cn=Mn(Tt);return Cn.persistence.runTransaction("Save bundle","readwrite",Tn=>Cn.Ls.saveBundleMetadata(Tn,Qt))}(g.localStore,H),O._completeWith(We.progress),Promise.resolve(We.Wu)}catch(H){return pi("SyncEngine",`Loading bundle failed with ${H}`),O._failWith(H),Promise.resolve(new Set)}var Tt}),function(g,w,O){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield _m(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function N_(r,e){return function T_(r,e){return r.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,s){const c=Mn(t);return c.persistence.runTransaction("Get named query","readonly",g=>c.Ls.getNamedQuery(g,s))}(yield bg(r),e)}))}(Oo(r=ki(r,Fs)),e).then(t=>t?new Ua(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Sl(this,t):null)}}class Bm extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pg(new Kc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tl.forKey(t,this.firestore,null)}}class $m{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bm(e)}get(e){const t=Ad(e);return this._delegate.get(t).then(s=>new Dp(this._firestore,new mh(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Ad(e);return s?(Fm("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const g=Ad(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...c),this}delete(e){const t=Ad(e);return this._delegate.delete(t),this}}class Qv{constructor(e){this._delegate=e}set(e,t,s){const c=Ad(e);return s?(Fm("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const g=Ad(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...c),this}delete(e){const t=Ad(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new km(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=vh.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let g=c.get(t);return g||(g=new vh(e,new Bm(e),t),c.set(t,g)),g}}vh.INSTANCES=new WeakMap;class tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tl(t,new zs(t._delegate,s,new xn(e)))}static forKey(e,t,s){return new tl(t,new zs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new vf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vf(this.firestore,My(this._delegate,e))}catch(t){throw hl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,He.m9)(e))instanceof zs&&Cv(this._delegate,e)}set(e,t){t=Fm("DocumentReference.set",t);try{return t?Vv(this._delegate,e,t):Vv(this._delegate,e)}catch(s){throw hl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?jv(this._delegate,e):jv(this._delegate,e,t,...s)}catch(c){throw hl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return bp(ki(r.firestore,Fs),[new D(r._key,fs.none())])}(this._delegate)}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new Dp(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return jy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z_(r){r=ki(r,zs);const e=ki(r.firestore,Fs),t=Oo(e),s=new yh(e);return function D_(r,e){const t=new is;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(c,g,w){try{const O=yield function(H,Z){const oe=Mn(H);return oe.persistence.runTransaction("read document","readonly",We=>oe.localDocuments.getDocument(We,Z))}(c,g);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new Zt(Ut.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const H=C(O,`Failed to get document '${g} from cache`);w.reject(H)}}),function(c,g,w){return s.apply(this,arguments)})(yield bg(r),e,t);var s})),t.promise}(t,r._key).then(c=>new mh(e,s,r._key,c,new pf(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uv(r){r=ki(r,zs);const e=ki(r.firestore,Fs);return Ty(Oo(e),r._key,{source:"server"}).then(t=>mf(e,r,t))}(this._delegate):function Nm(r){r=ki(r,zs);const e=ki(r.firestore,Fs);return Ty(Oo(e),r._key).then(t=>mf(e,r,t))}(this._delegate),t.then(s=>new Dp(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new tl(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}function hl(r,e,t){return r.message=r.message.replace(e,t),r}function Jv(r){for(const e of r)if("object"==typeof e&&!Og(e))return e;return{}}function v0(r,e){var t,s;let c;return c=Og(r[0])?r[0]:Og(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:g=>{c.next&&c.next(e(g))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Dp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Vy(this._delegate,e._delegate)}}class yf extends Dp{data(e){const t=this._delegate.data(e);return function mu(r,e){r||Un()}(void 0!==t),t}}class Sl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bm(e)}where(e,t,s){try{return new Sl(this.firestore,ff(this._delegate,function kv(r,e,t){const s=e,c=Am("where",r);return Ep._create(c,s,t)}(e,t,s)))}catch(c){throw hl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Sl(this.firestore,ff(this._delegate,function Nv(r,e="asc"){const t=e,s=Am("orderBy",r);return xm._create(s,t)}(e,t)))}catch(s){throw hl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Sl(this.firestore,ff(this._delegate,function j_(r){return Ev("limit",r),Rm._create("limit",r,"F")}(e)))}catch(t){throw hl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Sl(this.firestore,ff(this._delegate,function H_(r){return Ev("limitToLast",r),Rm._create("limitToLast",r,"L")}(e)))}catch(t){throw hl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Sl(this.firestore,ff(this._delegate,function z_(...r){return gh._create("startAt",r,!0)}(...e)))}catch(t){throw hl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Sl(this.firestore,ff(this._delegate,function G_(...r){return gh._create("startAfter",r,!1)}(...e)))}catch(t){throw hl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Sl(this.firestore,ff(this._delegate,function Pm(...r){return Mm._create("endBefore",r,!1)}(...e)))}catch(t){throw hl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Sl(this.firestore,ff(this._delegate,function Fv(...r){return Mm._create("endAt",r,!0)}(...e)))}catch(t){throw hl(t,"endAt()","Query.endAt()")}}isEqual(e){return Im(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function X_(r){r=ki(r,Ua);const e=ki(r.firestore,Fs),t=Oo(e),s=new yh(e);return function Q0(r,e){const t=new is;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(c,g,w){try{const O=yield ah(c,g,!0),H=new du(g,O.sr),Z=H.nc(O.documents),oe=H.applyChanges(Z,!1);w.resolve(oe.snapshot)}catch(O){const H=C(O,`Failed to execute query '${g} against cache`);w.reject(H)}}),function(c,g,w){return s.apply(this,arguments)})(yield bg(r),e,t);var s})),t.promise}(t,r._query).then(c=>new gf(e,s,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Q_(r){r=ki(r,Ua);const e=ki(r.firestore,Fs),t=Oo(e),s=new yh(e);return Sy(t,r._query,{source:"server"}).then(c=>new gf(e,s,r,c))}(this._delegate):function Mg(r){r=ki(r,Ua);const e=ki(r.firestore,Fs),t=Oo(e),s=new yh(e);return Rg(r._query),Sy(t,r._query).then(c=>new gf(e,s,r,c))}(this._delegate),t.then(s=>new qy(this.firestore,new gf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Jv(e),s=v0(e,c=>new qy(this.firestore,new gf(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return jy(this._delegate,t,s)}withConverter(e){return new Sl(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}class Wy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Sl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wy(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new yf(this._firestore,s))})}isEqual(e){return Vy(this._delegate,e._delegate)}}class vf extends Sl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tl(this.firestore,e):null}doc(e){try{return new tl(this.firestore,void 0===e?uf(this._delegate):uf(this._delegate,e))}catch(t){throw hl(t,"doc()","CollectionReference.doc()")}}add(e){return function J_(r,e){const t=ki(r.firestore,Fs),s=uf(r),c=Om(r.converter,e);return bp(t,[Ag(ph(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,fs.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new tl(this.firestore,t))}isEqual(e){return Cv(this._delegate,e._delegate)}withConverter(e){return new vf(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}function Ad(r){return ki(r,zs)}class Um{constructor(...e){this._delegate=new Td(...e)}static documentId(){return new Um(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,He.m9)(e))instanceof Td&&this._delegate._internalPath.isEqual(e._internalPath)}}class _h{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c0(){return new bm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _h(e)}static delete(){const e=function u0(){return new gp("deleteField")}();return e._methodName="FieldValue.delete",new _h(e)}static arrayUnion(...e){const t=function d0(...r){return new Mv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new _h(t)}static arrayRemove(...e){const t=function h0(...r){return new Pv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new _h(t)}static increment(e){const t=function f0(r){return new df("increment",r)}(e);return t._methodName="FieldValue.increment",new _h(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e_={Firestore:Lm,GeoPoint:Cm,Timestamp:Br,Blob:Pg,Transaction:$m,WriteBatch:Qv,DocumentReference:tl,DocumentSnapshot:Dp,Query:Sl,QueryDocumentSnapshot:yf,QuerySnapshot:qy,CollectionReference:vf,FieldPath:Um,FieldValue:_h,setLogLevel:function y0(r){!function Ml(r){qi.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function t_(r,e){r.INTERNAL.registerComponent(new pt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},e_)))})(r,(e,t)=>new Lm(e,t,new Xv)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(ye.Z);var Eh=V(1205),E0=V(6217),I0=V(9260);function w0(r,e){return function n_(r,e=Q.z){return new W.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function Ky(r,e){return w0(r,e).pipe((0,ce.U)(t=>({payload:t,type:"query"})))}function Vm(r,e){return Ky(r,e).pipe((0,ve.O)(void 0),me(),(0,ce.U)(([t,s])=>{const c=s.payload.docChanges(),g=c.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((w,O)=>{const H=c.find(oe=>oe.doc.ref.isEqual(w.ref)),Z=null==t?void 0:t.payload.docs.find(oe=>oe.ref.isEqual(w.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(w.metadata)||!H&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),g}))}function C0(r,e,t){return Vm(r,t).pipe((0,he.R)((s,c)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function i_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Yy(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Yy(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Yy(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(g=>g.payload),e),[]),(0,Re.x)(),(0,ce.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function Yy(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function s_(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class o_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Vm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ce.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,ve.O)(void 0),me(),(0,Ve.h)(([s,c])=>c.length>0||!s),(0,ce.U)(([s,c])=>c),ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,he.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ke.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(ke.iC)}add(e){return this.ref.add(e)}doc(e){return new a_(this.ref.doc(e),this.afs)}}class a_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:g}=c_(s,t);return new o_(c,g,this.afs)}snapshotChanges(){return function r_(r,e){return w0(r,e).pipe((0,ve.O)(void 0),me(),(0,ce.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ce.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xe.D)(this.ref.get(e)).pipe(ke.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Vm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Ve.h)(t=>t.length>0),ke.iC):Vm(this.query,this.afs.schedulers.outsideAngular).pipe(ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,he.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=s_(e);return C0(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),ke.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(ke.iC)}}const l_=new u.OlP("angularfire2.enableFirestorePersistence"),u_=new u.OlP("angularfire2.firestore.persistenceSettings"),T0=new u.OlP("angularfire2.firestore.settings"),S0=new u.OlP("angularfire2.firestore.use-emulator");function c_(r,e=(t=>t)){return{query:e(r),ref:r}}let Tp=(()=>{class r{constructor(t,s,c,g,w,O,H,Z,oe,We,Tt,Qt,Cn,Tn,sr,ni,Ri){this.schedulers=H;const ri=(0,lt.on)(t,O,s),Va=oe;We&&(0,Eh.nw)(ri,O,Tt,Cn,Tn,sr,Qt,ni),[this.firestore,this.persistenceEnabled$]=(0,lt.cc)(`${ri.name}.firestore`,"AngularFirestore",ri.name,()=>{const Ps=O.runOutsideAngular(()=>ri.firestore());if(g&&Ps.settings(g),Va&&Ps.useEmulator(...Va),c&&!(0,At.PM)(w)){const ps=()=>{try{return(0,xe.D)(Ps.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(ja){return typeof console<"u"&&console.warn(ja),(0,Oe.of)(!1)}};return[Ps,O.runOutsideAngular(ps)]}return[Ps,(0,Oe.of)(!1)]},[g,Va,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:w}=c_(c,s),O=this.schedulers.ngZone.run(()=>g);return new o_(O,w,this)}collectionGroup(t,s){const c=s||(w=>w),g=this.firestore.collectionGroup(t);return new D0(c(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new a_(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(u.LFG(lt.Dh),u.LFG(lt.xv,8),u.LFG(l_,8),u.LFG(T0,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ke.HU),u.LFG(u_,8),u.LFG(S0,8),u.LFG(Eh.zQ,8),u.LFG(Eh.Qv,8),u.LFG(Eh.L6,8),u.LFG(Eh._Q,8),u.LFG(Eh.rT,8),u.LFG(Eh.lh,8),u.LFG(Eh.f7,8),u.LFG(E0.nm,8))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),d_=(()=>{class r{constructor(){I0.Z.registerVersion("angularfire",ke.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:l_,useValue:!0},{provide:u_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({providers:[Tp]}),r})()},2011:(yn,Et,V)=>{"use strict";V.d(Et,{Dh:()=>Ne,GT:()=>ke,cc:()=>Ve,hO:()=>Re,on:()=>me,pX:()=>Oe,xv:()=>je});var u=V(4650),Q=V(9260),W=V(8623);yn=V.hmd(yn);const xe=["ngOnDestroy"],Oe=(ye,ue,rt,pt={})=>new Proxy(ye,{get:(et,He)=>rt.runOutsideAngular(()=>{var z;if(ye[He])return!(null===(z=null==pt?void 0:pt.spy)||void 0===z)&&z.get&&pt.spy.get(He,ye[He]),ye[He];if(xe.indexOf(He)>-1)return()=>{};const Pe=ue.toPromise().then(Te=>{const Se=Te&&Te[He];return"function"==typeof Se?Se.bind(Te):Se&&Se.then?Se.then(it=>rt.run(()=>it)):rt.run(()=>Se)});return new Proxy(()=>{},{get:(Te,Se)=>Pe[Se],apply:(Te,Se,it)=>Pe.then(qe=>{var nt;const tt=qe&&qe(...it);return!(null===(nt=null==pt?void 0:pt.spy)||void 0===nt)&&nt.apply&&pt.spy.apply(He,it,tt),tt})})})}),ke=(ye,ue)=>{ue.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(pt=>{Object.defineProperty(ye.prototype,pt,Object.getOwnPropertyDescriptor(rt.prototype||rt,pt))})})};class ve{constructor(ue){return ue}}const Ne=new u.OlP("angularfire2.app.options"),je=new u.OlP("angularfire2.app.name");function me(ye,ue,rt){const et="object"==typeof rt&&rt||{};et.name=et.name||"string"==typeof rt&&rt||"[DEFAULT]";const z=Q.Z.apps.filter(Pe=>Pe&&Pe.name===et.name)[0]||ue.runOutsideAngular(()=>Q.Z.initializeApp(ye,et));try{JSON.stringify(ye)!==JSON.stringify(z.options)&&ce("error",`${z.name} Firebase App already initialized with different options${yn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Pe){}return new ve(z)}const ce=(ye,...ue)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...ue)},he={provide:ve,useFactory:me,deps:[Ne,u.R0b,[new u.FiY,je]]};let Re=(()=>{class ye{constructor(rt){Q.Z.registerVersion("angularfire",W.q4.full,"core"),Q.Z.registerVersion("angularfire",W.q4.full,"app-compat"),Q.Z.registerVersion("angular",u.q4F.full,rt.toString())}static initializeApp(rt,pt){return{ngModule:ye,providers:[{provide:Ne,useValue:rt},{provide:je,useValue:pt}]}}}return ye.\u0275fac=function(rt){return new(rt||ye)(u.LFG(u.Lbi))},ye.\u0275mod=u.oAB({type:ye}),ye.\u0275inj=u.cJS({providers:[he]}),ye})();function Ve(ye,ue,rt,pt,et){const[,He,z]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===ye)||[];if(He)return function lt(ye,ue){try{return ye.toString()===ue.toString()}catch(rt){return ye===ue}}(et,z)||(De("error",`${ue} was already initialized on the ${rt} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:et,was:z})),He;{const Pe=pt();return globalThis.\u0275AngularfireInstanceCache.push([ye,Pe,et]),Pe}}const At=!!yn.hot,De=(ye,...ue)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8623:(yn,Et,V)=>{"use strict";V.d(Et,{q4:()=>jo,iC:()=>_a,fc:()=>Is,HU:()=>wc,vb:()=>wh,JM:()=>ya});var u=V(4650),Q=V(259),W=V(5861),xe=V(2951),Oe=V(2090),ke=V(4859),ve=V(1877);const Ne=(N,B)=>B.some(J=>N instanceof J);let je,me;const Re=new WeakMap,Ve=new WeakMap,lt=new WeakMap,At=new WeakMap,De=new WeakMap;let rt={get(N,B,J){if(N instanceof IDBTransaction){if("done"===B)return Ve.get(N);if("objectStoreNames"===B)return N.objectStoreNames||lt.get(N);if("store"===B)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return z(N[B])},set:(N,B,J)=>(N[B]=J,!0),has:(N,B)=>N instanceof IDBTransaction&&("done"===B||"store"===B)||B in N};function He(N){return"function"==typeof N?function et(N){return N!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(N)?function(...B){return N.apply(Pe(this),B),z(Re.get(this))}:function(...B){return z(N.apply(Pe(this),B))}:function(B,...J){const Ee=N.call(Pe(this),B,...J);return lt.set(Ee,B.sort?B.sort():[B]),z(Ee)}}(N):(N instanceof IDBTransaction&&function ue(N){if(Ve.has(N))return;const B=new Promise((J,Ee)=>{const ot=()=>{N.removeEventListener("complete",St),N.removeEventListener("error",en),N.removeEventListener("abort",en)},St=()=>{J(),ot()},en=()=>{Ee(N.error||new DOMException("AbortError","AbortError")),ot()};N.addEventListener("complete",St),N.addEventListener("error",en),N.addEventListener("abort",en)});Ve.set(N,B)}(N),Ne(N,function ce(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(N,rt):N)}function z(N){if(N instanceof IDBRequest)return function ye(N){const B=new Promise((J,Ee)=>{const ot=()=>{N.removeEventListener("success",St),N.removeEventListener("error",en)},St=()=>{J(z(N.result)),ot()},en=()=>{Ee(N.error),ot()};N.addEventListener("success",St),N.addEventListener("error",en)});return B.then(J=>{J instanceof IDBCursor&&Re.set(J,N)}).catch(()=>{}),De.set(B,N),B}(N);if(At.has(N))return At.get(N);const B=He(N);return B!==N&&(At.set(N,B),De.set(B,N)),B}const Pe=N=>De.get(N);function Te(N,B,{blocked:J,upgrade:Ee,blocking:ot,terminated:St}={}){const en=indexedDB.open(N,B),hn=z(en);return Ee&&en.addEventListener("upgradeneeded",Bn=>{Ee(z(en.result),Bn.oldVersion,Bn.newVersion,z(en.transaction))}),J&&en.addEventListener("blocked",()=>J()),hn.then(Bn=>{St&&Bn.addEventListener("close",()=>St()),ot&&Bn.addEventListener("versionchange",()=>ot())}).catch(()=>{}),hn}function Se(N,{blocked:B}={}){const J=indexedDB.deleteDatabase(N);return B&&J.addEventListener("blocked",()=>B()),z(J).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],nt=new Map;function tt(N,B){if(!(N instanceof IDBDatabase)||B in N||"string"!=typeof B)return;if(nt.get(B))return nt.get(B);const J=B.replace(/FromIndex$/,""),Ee=B!==J,ot=qe.includes(J);if(!(J in(Ee?IDBIndex:IDBObjectStore).prototype)||!ot&&!it.includes(J))return;const St=function(){var en=(0,W.Z)(function*(hn,...Bn){const ln=this.transaction(hn,ot?"readwrite":"readonly");let tr=ln.store;return Ee&&(tr=tr.index(Bn.shift())),(yield Promise.all([tr[J](...Bn),ot&&ln.done]))[0]});return function(Bn){return en.apply(this,arguments)}}();return nt.set(B,St),St}!function pt(N){rt=N(rt)}(N=>({...N,get:(B,J,Ee)=>tt(B,J)||N.get(B,J,Ee),has:(B,J)=>!!tt(B,J)||N.has(B,J)}));const ze="@firebase/installations",_t="0.6.4",ct=1e4,we=`w:${_t}`,Ae="FIS_v2",Ie="https://firebaseinstallations.googleapis.com/v1",at=36e5,Bt=new Oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Wt(N){return N instanceof Oe.ZR&&N.code.includes("request-failed")}function Yt({projectId:N}){return`${Ie}/projects/${N}/installations`}function Ct(N){return{token:N.token,requestStatus:2,expiresIn:Pr(N.expiresIn),creationTime:Date.now()}}function Gn(N,B){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,W.Z)(function*(N,B){const Ee=(yield B.json()).error;return Bt.create("request-failed",{requestName:N,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function er({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function dn(N){return hr.apply(this,arguments)}function hr(){return(hr=(0,W.Z)(function*(N){const B=yield N();return B.status>=500&&B.status<600?N():B})).apply(this,arguments)}function Pr(N){return Number(N.replace("s","000"))}function vr(){return(vr=(0,W.Z)(function*({appConfig:N,heartbeatServiceProvider:B},{fid:J}){const Ee=Yt(N),ot=er(N),St=B.getImmediate({optional:!0});if(St){const ln=yield St.getHeartbeatsHeader();ln&&ot.append("x-firebase-client",ln)}const hn={method:"POST",headers:ot,body:JSON.stringify({fid:J,authVersion:Ae,appId:N.appId,sdkVersion:we})},Bn=yield dn(()=>fetch(Ee,hn));if(Bn.ok){const ln=yield Bn.json();return{fid:ln.fid||J,registrationStatus:2,refreshToken:ln.refreshToken,authToken:Ct(ln.authToken)}}throw yield Gn("Create Installation",Bn)})).apply(this,arguments)}function nn(N){return new Promise(B=>{setTimeout(B,N)})}const oi=/^[cdef][\w-]{21}$/,Nr="";function Ai(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const J=function dr(N){return function ci(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return oi.test(J)?J:Nr}catch(N){return Nr}}function Rn(N){return`${N.appName}!${N.appId}`}const mn=new Map;function cn(N,B){const J=Rn(N);Jt(J,B),function _r(N,B){const J=function ii(){return!ei&&"BroadcastChannel"in self&&(ei=new BroadcastChannel("[Firebase] FID Change"),ei.onmessage=N=>{Jt(N.data.key,N.data.fid)}),ei}();J&&J.postMessage({key:N,fid:B}),function Fr(){0===mn.size&&ei&&(ei.close(),ei=null)}()}(J,B)}function Jt(N,B){const J=mn.get(N);if(J)for(const Ee of J)Ee(B)}let ei=null;const Di="firebase-installations-database",or=1,Yn="firebase-installations-store";let ai=null;function Tr(){return ai||(ai=Te(Di,or,{upgrade:(N,B)=>{0===B&&N.createObjectStore(Yn)}})),ai}function Or(N,B){return kt.apply(this,arguments)}function kt(){return(kt=(0,W.Z)(function*(N,B){const J=Rn(N),ot=(yield Tr()).transaction(Yn,"readwrite"),St=ot.objectStore(Yn),en=yield St.get(J);return yield St.put(B,J),yield ot.done,(!en||en.fid!==B.fid)&&cn(N,B.fid),B})).apply(this,arguments)}function Be(N){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,W.Z)(function*(N){const B=Rn(N),Ee=(yield Tr()).transaction(Yn,"readwrite");yield Ee.objectStore(Yn).delete(B),yield Ee.done})).apply(this,arguments)}function jt(N,B){return $t.apply(this,arguments)}function $t(){return($t=(0,W.Z)(function*(N,B){const J=Rn(N),ot=(yield Tr()).transaction(Yn,"readwrite"),St=ot.objectStore(Yn),en=yield St.get(J),hn=B(en);return void 0===hn?yield St.delete(J):yield St.put(hn,J),yield ot.done,hn&&(!en||en.fid!==hn.fid)&&cn(N,hn.fid),hn})).apply(this,arguments)}function ge(N){return fe.apply(this,arguments)}function fe(){return fe=(0,W.Z)(function*(N){let B;const J=yield jt(N.appConfig,Ee=>{const ot=function $e(N){return ut(N||{fid:Ai(),registrationStatus:0})}(Ee),St=function It(N,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(Bt.create("app-offline"))};const J={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function dt(N,B){return un.apply(this,arguments)}(N,J);return{installationEntry:J,registrationPromise:Ee}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:Fe(N)}:{installationEntry:B}}(N,ot);return B=St.registrationPromise,St.installationEntry});return J.fid===Nr?{installationEntry:yield B}:{installationEntry:J,registrationPromise:B}}),fe.apply(this,arguments)}function un(){return un=(0,W.Z)(function*(N,B){try{const J=yield function Sn(N,B){return vr.apply(this,arguments)}(N,B);return Or(N.appConfig,J)}catch(J){throw Wt(J)&&409===J.customData.serverCode?yield Be(N.appConfig):yield Or(N.appConfig,{fid:B.fid,registrationStatus:0}),J}}),un.apply(this,arguments)}function Fe(N){return Me.apply(this,arguments)}function Me(){return(Me=(0,W.Z)(function*(N){let B=yield de(N.appConfig);for(;1===B.registrationStatus;)yield nn(100),B=yield de(N.appConfig);if(0===B.registrationStatus){const{installationEntry:J,registrationPromise:Ee}=yield ge(N);return Ee||J}return B})).apply(this,arguments)}function de(N){return jt(N,B=>{if(!B)throw Bt.create("installation-not-found");return ut(B)})}function ut(N){return function Mt(N){return 1===N.registrationStatus&&N.registrationTime+ct<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function vn(){return(vn=(0,W.Z)(function*({appConfig:N,heartbeatServiceProvider:B},J){const Ee=function Nn(N,{fid:B}){return`${Yt(N)}/${B}/authTokens:generate`}(N,J),ot=function kn(N,{refreshToken:B}){const J=er(N);return J.append("Authorization",function yr(N){return`${Ae} ${N}`}(B)),J}(N,J),St=B.getImmediate({optional:!0});if(St){const ln=yield St.getHeartbeatsHeader();ln&&ot.append("x-firebase-client",ln)}const hn={method:"POST",headers:ot,body:JSON.stringify({installation:{sdkVersion:we,appId:N.appId}})},Bn=yield dn(()=>fetch(Ee,hn));if(Bn.ok)return Ct(yield Bn.json());throw yield Gn("Generate Auth Token",Bn)})).apply(this,arguments)}function rr(N){return di.apply(this,arguments)}function di(){return di=(0,W.Z)(function*(N,B=!1){let J;const Ee=yield jt(N.appConfig,St=>{if(!lr(St))throw Bt.create("not-registered");const en=St.authToken;if(!B&&function Er(N){return 2===N.requestStatus&&!function $n(N){const B=Date.now();return B<N.creationTime||N.creationTime+N.expiresIn<B+at}(N)}(en))return St;if(1===en.requestStatus)return J=function Rt(N,B){return bt.apply(this,arguments)}(N,B),St;{if(!navigator.onLine)throw Bt.create("app-offline");const hn=function pr(N){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:B})}(St);return J=function An(N,B){return jn.apply(this,arguments)}(N,hn),hn}});return J?yield J:Ee.authToken}),di.apply(this,arguments)}function bt(){return(bt=(0,W.Z)(function*(N,B){let J=yield Kt(N.appConfig);for(;1===J.authToken.requestStatus;)yield nn(100),J=yield Kt(N.appConfig);const Ee=J.authToken;return 0===Ee.requestStatus?rr(N,B):Ee})).apply(this,arguments)}function Kt(N){return jt(N,B=>{if(!lr(B))throw Bt.create("not-registered");return function mr(N){return 1===N.requestStatus&&N.requestTime+ct<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function jn(){return jn=(0,W.Z)(function*(N,B){try{const J=yield function Xt(N,B){return vn.apply(this,arguments)}(N,B),Ee=Object.assign(Object.assign({},B),{authToken:J});return yield Or(N.appConfig,Ee),J}catch(J){if(!Wt(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const Ee=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield Or(N.appConfig,Ee)}else yield Be(N.appConfig);throw J}}),jn.apply(this,arguments)}function lr(N){return void 0!==N&&2===N.registrationStatus}function Xr(){return(Xr=(0,W.Z)(function*(N){const B=N,{installationEntry:J,registrationPromise:Ee}=yield ge(B);return Ee?Ee.catch(console.error):rr(B).catch(console.error),J.fid})).apply(this,arguments)}function gs(){return gs=(0,W.Z)(function*(N,B=!1){const J=N;return yield function ss(N){return Wr.apply(this,arguments)}(J),(yield rr(J,B)).token}),gs.apply(this,arguments)}function Wr(){return(Wr=(0,W.Z)(function*(N){const{registrationPromise:B}=yield ge(N);B&&(yield B)})).apply(this,arguments)}function ft(N){return Bt.create("missing-app-config-values",{valueName:N})}const Nt="installations",Je=N=>{const B=N.getProvider("app").getImmediate(),J=function Ze(N){if(!N||!N.options)throw ft("App Configuration");if(!N.name)throw ft("App Name");const B=["projectId","apiKey","appId"];for(const J of B)if(!N.options[J])throw ft(J);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(B);return{app:B,appConfig:J,heartbeatServiceProvider:(0,xe._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},vt=N=>{const B=N.getProvider("app").getImmediate(),J=(0,xe._getProvider)(B,Nt).getImmediate();return{getId:()=>function jr(N){return Xr.apply(this,arguments)}(J),getToken:ot=>function Ni(N){return gs.apply(this,arguments)}(J,ot)}};(function Ft(){(0,xe._registerComponent)(new ke.wA(Nt,Je,"PUBLIC")),(0,xe._registerComponent)(new ke.wA("installations-internal",vt,"PRIVATE"))})(),(0,xe.registerVersion)(ze,_t),(0,xe.registerVersion)(ze,_t,"esm2017");const Vt="@firebase/remote-config",zr=new Oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Li{constructor(B,J,Ee,ot){this.client=B,this.storage=J,this.storageCache=Ee,this.logger=ot}isCachedDataFresh(B,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-J,ot=Ee<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${ot}.`),ot}fetch(B){var J=this;return(0,W.Z)(function*(){const[Ee,ot]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(ot&&J.isCachedDataFresh(B.cacheMaxAgeMillis,Ee))return ot;B.eTag=ot&&ot.eTag;const St=yield J.client.fetch(B),en=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===St.status&&en.push(J.storage.setLastSuccessfulFetchResponse(St)),yield Promise.all(en),St})()}}function oo(N=navigator){return N.languages&&N.languages[0]||N.language}class Eo{constructor(B,J,Ee,ot,St,en){this.firebaseInstallations=B,this.sdkVersion=J,this.namespace=Ee,this.projectId=ot,this.apiKey=St,this.appId=en}fetch(B){var J=this;return(0,W.Z)(function*(){const[Ee,ot]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),en=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,hn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},Bn={sdk_version:J.sdkVersion,app_instance_id:Ee,app_instance_id_token:ot,app_id:J.appId,language_code:oo()},ln={method:"POST",headers:hn,body:JSON.stringify(Bn)},tr=fetch(en,ln),ir=new Promise((js,xo)=>{B.signal.addEventListener(()=>{const na=new Error("The operation was aborted.");na.name="AbortError",xo(na)})});let Ao;try{yield Promise.race([tr,ir]),Ao=yield tr}catch(js){let xo="fetch-client-network";throw"AbortError"===(null==js?void 0:js.name)&&(xo="fetch-timeout"),zr.create(xo,{originalErrorMessage:null==js?void 0:js.message})}let Kr=Ao.status;const ka=Ao.headers.get("ETag")||void 0;let Na,vo;if(200===Ao.status){let js;try{js=yield Ao.json()}catch(xo){throw zr.create("fetch-client-parse",{originalErrorMessage:null==xo?void 0:xo.message})}Na=js.entries,vo=js.state}if("INSTANCE_STATE_UNSPECIFIED"===vo?Kr=500:"NO_CHANGE"===vo?Kr=304:("NO_TEMPLATE"===vo||"EMPTY_CONFIG"===vo)&&(Na={}),304!==Kr&&200!==Kr)throw zr.create("fetch-status",{httpStatus:Kr});return{status:Kr,eTag:ka,config:Na}})()}}class Cs{constructor(B,J){this.client=B,this.storage=J}fetch(B){var J=this;return(0,W.Z)(function*(){const Ee=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(B,Ee)})()}attemptFetch(B,{throttleEndTimeMillis:J,backoffCount:Ee}){var ot=this;return(0,W.Z)(function*(){yield function Yo(N,B){return new Promise((J,Ee)=>{const ot=Math.max(B-Date.now(),0),St=setTimeout(J,ot);N.addEventListener(()=>{clearTimeout(St),Ee(zr.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,J);try{const St=yield ot.client.fetch(B);return yield ot.storage.deleteThrottleMetadata(),St}catch(St){if(!function Io(N){if(!(N instanceof Oe.ZR&&N.customData))return!1;const B=Number(N.customData.httpStatus);return 429===B||500===B||503===B||504===B}(St))throw St;const en={throttleEndTimeMillis:Date.now()+(0,Oe.$s)(Ee),backoffCount:Ee+1};return yield ot.storage.setThrottleMetadata(en),ot.attemptFetch(B,en)}})()}}class Ha{constructor(B,J,Ee,ot,St){this.app=B,this._client=J,this._storageCache=Ee,this._storage=ot,this._logger=St,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wo(N,B){const J=N.target.error||void 0;return zr.create(B,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const Qi="app_namespace_store";class aa{constructor(B,J,Ee,ot=function Bi(){return new Promise((N,B)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=Ee=>{B(wo(Ee,"storage-open"))},J.onsuccess=Ee=>{N(Ee.target.result)},J.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(Qi,{keyPath:"compositeKey"})}}catch(J){B(zr.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=B,this.appName=J,this.namespace=Ee,this.openDbPromise=ot}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var J=this;return(0,W.Z)(function*(){const Ee=yield J.openDbPromise;return new Promise((ot,St)=>{const hn=Ee.transaction([Qi],"readonly").objectStore(Qi),Bn=J.createCompositeKey(B);try{const ln=hn.get(Bn);ln.onerror=tr=>{St(wo(tr,"storage-get"))},ln.onsuccess=tr=>{const ir=tr.target.result;ot(ir?ir.value:void 0)}}catch(ln){St(zr.create("storage-get",{originalErrorMessage:null==ln?void 0:ln.message}))}})})()}set(B,J){var Ee=this;return(0,W.Z)(function*(){const ot=yield Ee.openDbPromise;return new Promise((St,en)=>{const Bn=ot.transaction([Qi],"readwrite").objectStore(Qi),ln=Ee.createCompositeKey(B);try{const tr=Bn.put({compositeKey:ln,value:J});tr.onerror=ir=>{en(wo(ir,"storage-set"))},tr.onsuccess=()=>{St()}}catch(tr){en(zr.create("storage-set",{originalErrorMessage:null==tr?void 0:tr.message}))}})})()}delete(B){var J=this;return(0,W.Z)(function*(){const Ee=yield J.openDbPromise;return new Promise((ot,St)=>{const hn=Ee.transaction([Qi],"readwrite").objectStore(Qi),Bn=J.createCompositeKey(B);try{const ln=hn.delete(Bn);ln.onerror=tr=>{St(wo(tr,"storage-delete"))},ln.onsuccess=()=>{ot()}}catch(ln){St(zr.create("storage-delete",{originalErrorMessage:null==ln?void 0:ln.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class ao{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,W.Z)(function*(){const J=B.storage.getLastFetchStatus(),Ee=B.storage.getLastSuccessfulFetchTimestampMillis(),ot=B.storage.getActiveConfig(),St=yield J;St&&(B.lastFetchStatus=St);const en=yield Ee;en&&(B.lastSuccessfulFetchTimestampMillis=en);const hn=yield ot;hn&&(B.activeConfig=hn)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function lo(){return Os.apply(this,arguments)}function Os(){return(Os=(0,W.Z)(function*(){if(!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch(N){return!1}})).apply(this,arguments)}!function ms(){(0,xe._registerComponent)(new ke.wA("remote-config",function N(B,{instanceIdentifier:J}){const Ee=B.getProvider("app").getImmediate(),ot=B.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zr.create("registration-window");if(!(0,Oe.hl)())throw zr.create("indexed-db-unavailable");const{projectId:St,apiKey:en,appId:hn}=Ee.options;if(!St)throw zr.create("registration-project-id");if(!en)throw zr.create("registration-api-key");if(!hn)throw zr.create("registration-app-id");const Bn=new aa(hn,Ee.name,J=J||"firebase"),ln=new ao(Bn),tr=new ve.Yd(Vt);tr.logLevel=ve.in.ERROR;const ir=new Eo(ot,xe.SDK_VERSION,J,St,en,hn),Ao=new Cs(ir,Bn),Kr=new Li(Ao,Bn,ln,tr),ka=new Ha(Ee,Kr,ln,Bn,tr);return function Lr(N){const B=(0,Oe.m9)(N);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(ka),ka},"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(Vt,"0.4.4"),(0,xe.registerVersion)(Vt,"0.4.4","esm2017")}();const uo="/firebase-messaging-sw.js",la="/firebase-cloud-messaging-push-scope",bs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",No="https://fcmregistrations.googleapis.com/v1",Ys="google.c.a.c_id",Aa="google.c.a.c_l",Ds="google.c.a.ts",co="google.c.a.e";var Ts=(()=>{return(N=Ts||(Ts={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",Ts;var N})();function Zs(N){const B=new Uint8Array(N);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ei(N){const J=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(J),ot=new Uint8Array(Ee.length);for(let St=0;St<Ee.length;++St)ot[St]=Ee.charCodeAt(St);return ot}const Zo="fcm_token_details_db",Xs=5,Mi="fcm_token_object_Store";function ys(){return ys=(0,W.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(St=>St.name).includes(Zo))return null;let B=null;return(yield Te(Zo,Xs,{upgrade:(Ee=(0,W.Z)(function*(ot,St,en,hn){var Bn;if(St<2||!ot.objectStoreNames.contains(Mi))return;const ln=hn.objectStore(Mi),tr=yield ln.index("fcmSenderId").get(N);if(yield ln.clear(),tr)if(2===St){const ir=tr;if(!ir.auth||!ir.p256dh||!ir.endpoint)return;B={token:ir.fcmToken,createTime:null!==(Bn=ir.createTime)&&void 0!==Bn?Bn:Date.now(),subscriptionOptions:{auth:ir.auth,p256dh:ir.p256dh,endpoint:ir.endpoint,swScope:ir.swScope,vapidKey:"string"==typeof ir.vapidKey?ir.vapidKey:Zs(ir.vapidKey)}}}else if(3===St){const ir=tr;B={token:ir.fcmToken,createTime:ir.createTime,subscriptionOptions:{auth:Zs(ir.auth),p256dh:Zs(ir.p256dh),endpoint:ir.endpoint,swScope:ir.swScope,vapidKey:Zs(ir.vapidKey)}}}else if(4===St){const ir=tr;B={token:ir.fcmToken,createTime:ir.createTime,subscriptionOptions:{auth:Zs(ir.auth),p256dh:Zs(ir.p256dh),endpoint:ir.endpoint,swScope:ir.swScope,vapidKey:Zs(ir.vapidKey)}}}}),function(St,en,hn,Bn){return Ee.apply(this,arguments)})})).close(),yield Se(Zo),yield Se("fcm_vapid_details_db"),yield Se("undefined"),function ho(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:B}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}(B)?B:null;var Ee}),ys.apply(this,arguments)}const $i="firebase-messaging-database",as=1,vs="firebase-messaging-store";let Fo=null;function ls(){return Fo||(Fo=Te($i,as,{upgrade:(N,B)=>{0===B&&N.createObjectStore(vs)}})),Fo}function ua(N){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,W.Z)(function*(N){const B=fo(N),Ee=yield(yield ls()).transaction(vs).objectStore(vs).get(B);if(Ee)return Ee;{const ot=yield function fl(N){return ys.apply(this,arguments)}(N.appConfig.senderId);if(ot)return yield ur(N,ot),ot}}),Lo.apply(this,arguments)}function ur(N,B){return Co.apply(this,arguments)}function Co(){return(Co=(0,W.Z)(function*(N,B){const J=fo(N),ot=(yield ls()).transaction(vs,"readwrite");return yield ot.objectStore(vs).put(B,J),yield ot.done,B})).apply(this,arguments)}function us(){return(us=(0,W.Z)(function*(N){const B=fo(N),Ee=(yield ls()).transaction(vs,"readwrite");yield Ee.objectStore(vs).delete(B),yield Ee.done})).apply(this,arguments)}function fo({appConfig:N}){return N.appId}const ji=new Oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Us(N,B){return y.apply(this,arguments)}function y(){return(y=(0,W.Z)(function*(N,B){const J=yield tn(N),Ee=qn(B),ot={method:"POST",headers:J,body:JSON.stringify(Ee)};let St;try{St=yield(yield fetch(Le(N.appConfig),ot)).json()}catch(en){throw ji.create("token-subscribe-failed",{errorInfo:null==en?void 0:en.toString()})}if(St.error)throw ji.create("token-subscribe-failed",{errorInfo:St.error.message});if(!St.token)throw ji.create("token-subscribe-no-token");return St.token})).apply(this,arguments)}function f(){return(f=(0,W.Z)(function*(N,B){const J=yield tn(N),Ee=qn(B.subscriptionOptions),ot={method:"PATCH",headers:J,body:JSON.stringify(Ee)};let St;try{St=yield(yield fetch(`${Le(N.appConfig)}/${B.token}`,ot)).json()}catch(en){throw ji.create("token-update-failed",{errorInfo:null==en?void 0:en.toString()})}if(St.error)throw ji.create("token-update-failed",{errorInfo:St.error.message});if(!St.token)throw ji.create("token-update-no-token");return St.token})).apply(this,arguments)}function T(N,B){return q.apply(this,arguments)}function q(){return(q=(0,W.Z)(function*(N,B){const Ee={method:"DELETE",headers:yield tn(N)};try{const St=yield(yield fetch(`${Le(N.appConfig)}/${B}`,Ee)).json();if(St.error)throw ji.create("token-unsubscribe-failed",{errorInfo:St.error.message})}catch(ot){throw ji.create("token-unsubscribe-failed",{errorInfo:null==ot?void 0:ot.toString()})}})).apply(this,arguments)}function Le({projectId:N}){return`${No}/projects/${N}/registrations`}function tn(N){return gn.apply(this,arguments)}function gn(){return(gn=(0,W.Z)(function*({appConfig:N,installations:B}){const J=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function qn({p256dh:N,auth:B,endpoint:J,vapidKey:Ee}){const ot={web:{endpoint:J,auth:B,p256dh:N}};return Ee!==bs&&(ot.web.applicationPubKey=Ee),ot}const Sr=6048e5;function br(){return br=(0,W.Z)(function*(N){const B=yield function Qs(N,B){return za.apply(this,arguments)}(N.swRegistration,N.vapidKey),J={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:B.endpoint,auth:Zs(B.getKey("auth")),p256dh:Zs(B.getKey("p256dh"))},Ee=yield ua(N.firebaseDependencies);if(Ee){if(function Ga(N,B){return B.vapidKey===N.vapidKey&&B.endpoint===N.endpoint&&B.auth===N.auth&&B.p256dh===N.p256dh}(Ee.subscriptionOptions,J))return Date.now()>=Ee.createTime+Sr?function Ii(N,B){return Ui.apply(this,arguments)}(N,{token:Ee.token,createTime:Date.now(),subscriptionOptions:J}):Ee.token;try{yield T(N.firebaseDependencies,Ee.token)}catch(ot){console.warn(ot)}return bo(N.firebaseDependencies,J)}return bo(N.firebaseDependencies,J)}),br.apply(this,arguments)}function _s(){return _s=(0,W.Z)(function*(N){const B=yield ua(N.firebaseDependencies);B&&(yield T(N.firebaseDependencies,B.token),yield function ca(N){return us.apply(this,arguments)}(N.firebaseDependencies));const J=yield N.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()}),_s.apply(this,arguments)}function Ui(){return Ui=(0,W.Z)(function*(N,B){try{const J=yield function I(N,B){return f.apply(this,arguments)}(N.firebaseDependencies,B),Ee=Object.assign(Object.assign({},B),{token:J,createTime:Date.now()});return yield ur(N.firebaseDependencies,Ee),J}catch(J){throw yield function cs(N){return _s.apply(this,arguments)}(N),J}}),Ui.apply(this,arguments)}function bo(N,B){return Do.apply(this,arguments)}function Do(){return(Do=(0,W.Z)(function*(N,B){const Ee={token:yield Us(N,B),createTime:Date.now(),subscriptionOptions:B};return yield ur(N,Ee),Ee.token})).apply(this,arguments)}function za(){return(za=(0,W.Z)(function*(N,B){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ei(B)})})).apply(this,arguments)}function pu(N){const B={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function gu(N,B){if(!B.notification)return;N.notification={};const J=B.notification.title;J&&(N.notification.title=J);const Ee=B.notification.body;Ee&&(N.notification.body=Ee);const ot=B.notification.image;ot&&(N.notification.image=ot);const St=B.notification.icon;St&&(N.notification.icon=St)}(B,N),function po(N,B){B.data&&(N.data=B.data)}(B,N),function Xo(N,B){var J,Ee,ot,St,en;if(!(B.fcmOptions||null!==(J=B.notification)&&void 0!==J&&J.click_action))return;N.fcmOptions={};const hn=null!==(ot=null===(Ee=B.fcmOptions)||void 0===Ee?void 0:Ee.link)&&void 0!==ot?ot:null===(St=B.notification)||void 0===St?void 0:St.click_action;hn&&(N.fcmOptions.link=hn);const Bn=null===(en=B.fcmOptions)||void 0===en?void 0:en.analytics_label;Bn&&(N.fcmOptions.analyticsLabel=Bn)}(B,N),B}function go(N,B){const J=[];for(let Ee=0;Ee<N.length;Ee++)J.push(N.charAt(Ee)),Ee<B.length&&J.push(B.charAt(Ee));return J.join("")}function gl(N){return ji.create("missing-app-config-values",{valueName:N})}go("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),go("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bo{constructor(B,J,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ot=function pl(N){if(!N||!N.options)throw gl("App Configuration Object");if(!N.name)throw gl("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:J}=N;for(const Ee of B)if(!J[Ee])throw gl(Ee);return{appName:N.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:ot,installations:J,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function da(N){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,W.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(uo,{scope:la}),N.swRegistration.update().catch(()=>{})}catch(B){throw ji.create("failed-service-worker-registration",{browserErrorMessage:null==B?void 0:B.message})}})).apply(this,arguments)}function Hi(){return(Hi=(0,W.Z)(function*(N,B){if(!B&&!N.swRegistration&&(yield da(N)),B||!N.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw ji.create("invalid-sw-registration");N.swRegistration=B}})).apply(this,arguments)}function Jo(){return(Jo=(0,W.Z)(function*(N,B){B?N.vapidKey=B:N.vapidKey||(N.vapidKey=bs)})).apply(this,arguments)}function qr(){return qr=(0,W.Z)(function*(N,B){if(!navigator)throw ji.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ji.create("permission-blocked");return yield function $o(N,B){return Jo.apply(this,arguments)}(N,null==B?void 0:B.vapidKey),yield function ha(N,B){return Hi.apply(this,arguments)}(N,null==B?void 0:B.serviceWorkerRegistration),function hi(N){return br.apply(this,arguments)}(N)}),qr.apply(this,arguments)}function wi(){return(wi=(0,W.Z)(function*(N,B,J){const Ee=function ju(N){switch(N){case Ts.NOTIFICATION_CLICKED:return"notification_open";case Ts.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(B);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:J[Ys],message_name:J[Aa],message_time:J[Ds],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uo(){return Uo=(0,W.Z)(function*(N,B){const J=B.data;if(!J.isFirebaseMessaging)return;N.onMessageHandler&&J.messageType===Ts.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(pu(J)):N.onMessageHandler.next(pu(J)));const Ee=J.data;(function xa(N){return"object"==typeof N&&!!N&&Ys in N})(Ee)&&"1"===Ee[co]&&(yield function rs(N,B,J){return wi.apply(this,arguments)}(N,J.messageType,Ee))}),Uo.apply(this,arguments)}const As="@firebase/messaging",fi=N=>{const B=new Bo(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Ss(N,B){return Uo.apply(this,arguments)}(B,J)),B},ml=N=>{const B=N.getProvider("messaging").getImmediate();return{getToken:Ee=>function mo(N,B){return qr.apply(this,arguments)}(B,Ee)}};function F(){return K.apply(this,arguments)}function K(){return(K=(0,W.Z)(function*(){try{yield(0,Oe.eu)()}catch(N){return!1}return typeof window<"u"&&(0,Oe.hl)()&&(0,Oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rl(){(0,xe._registerComponent)(new ke.wA("messaging",fi,"PUBLIC")),(0,xe._registerComponent)(new ke.wA("messaging-internal",ml,"PRIVATE")),(0,xe.registerVersion)(As,"0.12.4"),(0,xe.registerVersion)(As,"0.12.4","esm2017")}();const Ar="analytics",wr="firebase_id",Gi="origin",Pi=6e4,Ti="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",To="https://www.googletagmanager.com/gtag/js",bi=new ve.Yd("@firebase/analytics"),Si=new Oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fa(N){if(!N.startsWith(To)){const B=Si.create("invalid-gtag-resource",{gtagURL:N});return bi.warn(B.message),""}return N}function Js(N){return Promise.all(N.map(B=>B.catch(J=>J)))}function pa(){return(pa=(0,W.Z)(function*(N,B,J,Ee,ot,St){const en=Ee[ot];try{if(en)yield B[en];else{const Bn=(yield Js(J)).find(ln=>ln.measurementId===ot);Bn&&(yield B[Bn.appId])}}catch(hn){bi.error(hn)}N("config",ot,St)})).apply(this,arguments)}function Wi(){return(Wi=(0,W.Z)(function*(N,B,J,Ee,ot){try{let St=[];if(ot&&ot.send_to){let en=ot.send_to;Array.isArray(en)||(en=[en]);const hn=yield Js(J);for(const Bn of en){const ln=hn.find(ir=>ir.measurementId===Bn),tr=ln&&B[ln.appId];if(!tr){St=[];break}St.push(tr)}}0===St.length&&(St=Object.values(B)),yield Promise.all(St),N("event",Ee,ot||{})}catch(St){bi.error(St)}})).apply(this,arguments)}const Ml=30,pi=new class Ki{constructor(B={},J=1e3){this.throttleMetadata=B,this.intervalMillis=J}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,J){this.throttleMetadata[B]=J}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function Pl(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function Jn(){return(Jn=(0,W.Z)(function*(N){var B;const{appId:J,apiKey:Ee}=N,ot={method:"GET",headers:Pl(Ee)},St=Ti.replace("{app-id}",J),en=yield fetch(St,ot);if(200!==en.status&&304!==en.status){let hn="";try{const Bn=yield en.json();null!==(B=Bn.error)&&void 0!==B&&B.message&&(hn=Bn.error.message)}catch(Bn){}throw Si.create("config-fetch-failed",{httpStatus:en.status,responseMessage:hn})}return en.json()})).apply(this,arguments)}function Mn(){return(Mn=(0,W.Z)(function*(N,B=pi,J){const{appId:Ee,apiKey:ot,measurementId:St}=N.options;if(!Ee)throw Si.create("no-app-id");if(!ot){if(St)return{measurementId:St,appId:Ee};throw Si.create("no-api-key")}const en=B.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},hn=new _c;return setTimeout((0,W.Z)(function*(){hn.abort()}),void 0!==J?J:Pi),Ut({appId:Ee,apiKey:ot,measurementId:St},en,hn,B)})).apply(this,arguments)}function Ut(N,B,J){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,W.Z)(function*(N,{throttleEndTimeMillis:B,backoffCount:J},Ee,ot=pi){var St;const{appId:en,measurementId:hn}=N;try{yield function is(N,B){return new Promise((J,Ee)=>{const ot=Math.max(B-Date.now(),0),St=setTimeout(J,ot);N.addEventListener(()=>{clearTimeout(St),Ee(Si.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(Ee,B)}catch(Bn){if(hn)return bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${null==Bn?void 0:Bn.message}]`),{appId:en,measurementId:hn};throw Bn}try{const Bn=yield function Un(N){return Jn.apply(this,arguments)}(N);return ot.deleteThrottleMetadata(en),Bn}catch(Bn){const ln=Bn;if(!function So(N){if(!(N instanceof Oe.ZR&&N.customData))return!1;const B=Number(N.customData.httpStatus);return 429===B||500===B||503===B||504===B}(ln)){if(ot.deleteThrottleMetadata(en),hn)return bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${null==ln?void 0:ln.message}]`),{appId:en,measurementId:hn};throw Bn}const tr=503===Number(null===(St=null==ln?void 0:ln.customData)||void 0===St?void 0:St.httpStatus)?(0,Oe.$s)(J,ot.intervalMillis,Ml):(0,Oe.$s)(J,ot.intervalMillis),ir={throttleEndTimeMillis:Date.now()+tr,backoffCount:J+1};return ot.setThrottleMetadata(en,ir),bi.debug(`Calling attemptFetch again in ${tr} millis`),Ut(N,ir,Ee,ot)}}),Zt.apply(this,arguments)}class _c{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}let sl,Zn;function qa(){return(qa=(0,W.Z)(function*(N,B,J,Ee,ot){if(ot&&ot.global)N("event",J,Ee);else{const St=yield B;N("event",J,Object.assign(Object.assign({},Ee),{send_to:St}))}})).apply(this,arguments)}function Dr(){return(Dr=(0,W.Z)(function*(){if(!(0,Oe.hl)())return bi.warn(Si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Oe.eu)()}catch(N){return bi.warn(Si.create("indexeddb-unavailable",{errorInfo:null==N?void 0:N.toString()}).message),!1}return!0})).apply(this,arguments)}function ol(){return ol=(0,W.Z)(function*(N,B,J,Ee,ot,St,en){var hn;const Bn=function mu(N){return Mn.apply(this,arguments)}(N);Bn.then(Kr=>{J[Kr.measurementId]=Kr.appId,N.options.measurementId&&Kr.measurementId!==N.options.measurementId&&bi.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${Kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kr=>bi.error(Kr)),B.push(Bn);const ln=function Rd(){return Dr.apply(this,arguments)}().then(Kr=>{if(Kr)return Ee.getId()}),[tr,ir]=yield Promise.all([Bn,ln]);(function Kl(N){const B=window.document.getElementsByTagName("script");for(const J of Object.values(B))if(J.src&&J.src.includes(To)&&J.src.includes(N))return J;return null})(St)||function Wa(N,B){const J=function Ra(N,B){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(N,B)),J}("firebase-js-sdk-policy",{createScriptURL:fa}),Ee=document.createElement("script"),ot=`${To}?l=${N}&id=${B}`;Ee.src=J?null==J?void 0:J.createScriptURL(ot):ot,Ee.async=!0,document.head.appendChild(Ee)}(St,tr.measurementId),Zn&&(ot("consent","default",Zn),function ga(N){Zn=N}(void 0)),ot("js",new Date);const Ao=null!==(hn=null==en?void 0:en.config)&&void 0!==hn?hn:{};return Ao[Gi]="firebase",Ao.update=!0,null!=ir&&(Ao[wr]=ir),ot("config",tr.measurementId,Ao),sl&&(ot("set",sl),function vi(N){sl=N}(void 0)),tr.measurementId}),ol.apply(this,arguments)}class Ec{constructor(B){this.app=B}_delete(){return delete eo[this.app.options.appId],Promise.resolve()}}let eo={},Gu=[];const Nl={};let Ic,Ya,yu="dataLayer",Pa="gtag",ti=!1;function Yl(N,B,J){!function al(){const N=[];if((0,Oe.ru)()&&N.push("This is a browser extension environment."),(0,Oe.zI)()||N.push("Cookies are not available."),N.length>0){const B=N.map((Ee,ot)=>`(${ot+1}) ${Ee}`).join(" "),J=Si.create("invalid-analytics-context",{errorInfo:B});bi.warn(J.message)}}();const Ee=N.options.appId;if(!Ee)throw Si.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw Si.create("no-api-key");bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=eo[Ee])throw Si.create("already-exists",{id:Ee});if(!ti){!function xl(N){let B=[];Array.isArray(window[N])?B=window[N]:window[N]=B}(yu);const{wrappedGtag:St,gtagCore:en}=function qi(N,B,J,Ee,ot){let St=function(...en){window[Ee].push(arguments)};return window[ot]&&"function"==typeof window[ot]&&(St=window[ot]),window[ot]=function Rl(N,B,J,Ee){function St(){return St=(0,W.Z)(function*(en,...hn){try{if("event"===en){const[Bn,ln]=hn;yield function ql(N,B,J,Ee,ot){return Wi.apply(this,arguments)}(N,B,J,Bn,ln)}else if("config"===en){const[Bn,ln]=hn;yield function il(N,B,J,Ee,ot,St){return pa.apply(this,arguments)}(N,B,J,Ee,Bn,ln)}else if("consent"===en){const[Bn]=hn;N("consent","update",Bn)}else if("get"===en){const[Bn,ln,tr]=hn;N("get",Bn,ln,tr)}else if("set"===en){const[Bn]=hn;N("set",Bn)}else N(en,...hn)}catch(Bn){bi.error(Bn)}}),St.apply(this,arguments)}return function ot(en){return St.apply(this,arguments)}}(St,N,B,J),{gtagCore:St,wrappedGtag:window[ot]}}(eo,Gu,Nl,yu,Pa);Ya=St,Ic=en,ti=!0}return eo[Ee]=function xn(N,B,J,Ee,ot,St,en){return ol.apply(this,arguments)}(N,Gu,Nl,B,Ic,yu,J),new Ec(N)}function mt(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,W.Z)(function*(){if((0,Oe.ru)()||!(0,Oe.zI)()||!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch(N){return!1}})).apply(this,arguments)}const P="@firebase/analytics",j="0.10.0";!function ee(){(0,xe._registerComponent)(new ke.wA(Ar,(B,{options:J})=>Yl(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,xe._registerComponent)(new ke.wA("analytics-internal",function N(B){try{const J=B.getProvider(Ar).getImmediate();return{logEvent:(Ee,ot,St)=>function R(N,B,J,Ee){N=(0,Oe.m9)(N),function Ol(N,B,J,Ee,ot){return qa.apply(this,arguments)}(Ya,eo[N.app.options.appId],B,J,Ee).catch(ot=>bi.error(ot))}(J,Ee,ot,St)}}catch(J){throw Si.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,xe.registerVersion)(P,j),(0,xe.registerVersion)(P,j,"esm2017")}();var ie=V(4408),xt=V(7565);const Hn=new class _n extends xt.v{}(class st extends ie.o{constructor(B,J){super(B,J),this.scheduler=B,this.work=J}schedule(B,J=0){return J>0?super.schedule(B,J):(this.delay=J,this.state=B,this.scheduler.flush(this),this)}execute(B,J){return J>0||this.closed?super.execute(B,J):this._execute(B,J)}requestAsyncId(B,J,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId(B,J,Ee):(B.flush(this),0)}});var mi=V(4986),_i=V(8505),xs=V(5363),to=V(9468);const jo=new u.GfV("7.5.0"),ta="__angularfire_symbol__analyticsIsSupportedValue",yo="__angularfire_symbol__analyticsIsSupported",ll="__angularfire_symbol__remoteConfigIsSupportedValue",Es="__angularfire_symbol__remoteConfigIsSupported",Gr="__angularfire_symbol__messagingIsSupportedValue",Fl="__angularfire_symbol__messagingIsSupported";function ya(N,B,J){if(B){if(1===B.length)return B[0];const St=B.filter(en=>en.app===J);if(1===St.length)return St[0]}return J.container.getProvider(N).getImmediate({optional:!0})}globalThis[yo]||(globalThis[yo]=mt().then(N=>globalThis[ta]=N).catch(()=>globalThis[ta]=!1)),globalThis[Fl]||(globalThis[Fl]=F().then(N=>globalThis[Gr]=N).catch(()=>globalThis[Gr]=!1)),globalThis[Es]||(globalThis[Es]=lo().then(N=>globalThis[ll]=N).catch(()=>globalThis[ll]=!1));const wh=(N,B)=>{const J=B?[B]:(0,Q.C6)(),Ee=[];return J.forEach(ot=>{ot.container.getProvider(N).instances.forEach(en=>{Ee.includes(en)||Ee.push(en)})}),Ee};function no(){}class qu{constructor(B,J=Hn){this.zone=B,this.delegate=J}now(){return this.delegate.now()}schedule(B,J,Ee){const ot=this.zone;return this.delegate.schedule(function(en){ot.runGuarded(()=>{B.apply(this,[en])})},J,Ee)}}class Qc{constructor(B){this.zone=B,this.task=null}call(B,J){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",no,{},no,no)),J.pipe((0,_i.b)({next:Ee,complete:Ee,error:Ee})).subscribe(B).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wc=(()=>{class N{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new qu(Zone.current)),this.insideAngular=J.run(()=>new qu(Zone.current,mi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(J){return new(J||N)(u.LFG(u.R0b))},N.\u0275prov=u.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function va(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Is(N){return N.pipe((0,xs.Q)(va().outsideAngular))}function _a(N){return va(),function Yu(N){return function(J){return(J=J.lift(new Qc(N.ngZone))).pipe((0,to.R)(N.outsideAngular),(0,xs.Q)(N.insideAngular))}}(va())(N)}},2090:(yn,Et,V)=>{"use strict";V.d(Et,{$s:()=>Be,BH:()=>He,DV:()=>Pr,Dv:()=>Jt,G6:()=>we,GJ:()=>dn,L:()=>je,LL:()=>Ue,Pz:()=>et,Sg:()=>z,UG:()=>Se,UI:()=>Sn,US:()=>ke,Wj:()=>ii,Wl:()=>Ct,Yr:()=>ct,ZB:()=>he,ZR:()=>Ke,aH:()=>pt,b$:()=>nt,cI:()=>Yt,dS:()=>Di,eu:()=>Ie,g5:()=>W,gK:()=>_r,gQ:()=>dr,h$:()=>Ne,hl:()=>Ae,hu:()=>Q,jU:()=>it,lb:()=>Fr,m9:()=>$t,ne:()=>Rn,p$:()=>ce,pd:()=>Ai,r3:()=>hr,ru:()=>qe,tV:()=>me,uI:()=>Te,ug:()=>or,vZ:()=>vr,w1:()=>ze,w9:()=>kn,xO:()=>oi,xb:()=>yr,z$:()=>Pe,zI:()=>at,zd:()=>Nr});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Q=function(ge,fe){if(!ge)throw W(fe)},W=function(ge){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ge)},xe=function(ge){const fe=[];let $e=0;for(let It=0;It<ge.length;It++){let dt=ge.charCodeAt(It);dt<128?fe[$e++]=dt:dt<2048?(fe[$e++]=dt>>6|192,fe[$e++]=63&dt|128):55296==(64512&dt)&&It+1<ge.length&&56320==(64512&ge.charCodeAt(It+1))?(dt=65536+((1023&dt)<<10)+(1023&ge.charCodeAt(++It)),fe[$e++]=dt>>18|240,fe[$e++]=dt>>12&63|128,fe[$e++]=dt>>6&63|128,fe[$e++]=63&dt|128):(fe[$e++]=dt>>12|224,fe[$e++]=dt>>6&63|128,fe[$e++]=63&dt|128)}return fe},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,fe){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $e=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,It=[];for(let dt=0;dt<ge.length;dt+=3){const un=ge[dt],Fe=dt+1<ge.length,Me=Fe?ge[dt+1]:0,de=dt+2<ge.length,ut=de?ge[dt+2]:0;let vn=(15&Me)<<2|ut>>6,Nn=63&ut;de||(Nn=64,Fe||(vn=64)),It.push($e[un>>2],$e[(3&un)<<4|Me>>4],$e[vn],$e[Nn])}return It.join("")},encodeString(ge,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(ge):this.encodeByteArray(xe(ge),fe)},decodeString(ge,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(ge):function(ge){const fe=[];let $e=0,It=0;for(;$e<ge.length;){const dt=ge[$e++];if(dt<128)fe[It++]=String.fromCharCode(dt);else if(dt>191&&dt<224){const un=ge[$e++];fe[It++]=String.fromCharCode((31&dt)<<6|63&un)}else if(dt>239&&dt<365){const de=((7&dt)<<18|(63&ge[$e++])<<12|(63&ge[$e++])<<6|63&ge[$e++])-65536;fe[It++]=String.fromCharCode(55296+(de>>10)),fe[It++]=String.fromCharCode(56320+(1023&de))}else{const un=ge[$e++],Fe=ge[$e++];fe[It++]=String.fromCharCode((15&dt)<<12|(63&un)<<6|63&Fe)}}return fe.join("")}(this.decodeStringToByteArray(ge,fe))},decodeStringToByteArray(ge,fe){this.init_();const $e=fe?this.charToByteMapWebSafe_:this.charToByteMap_,It=[];for(let dt=0;dt<ge.length;){const un=$e[ge.charAt(dt++)],Me=dt<ge.length?$e[ge.charAt(dt)]:0;++dt;const ut=dt<ge.length?$e[ge.charAt(dt)]:64;++dt;const Xt=dt<ge.length?$e[ge.charAt(dt)]:64;if(++dt,null==un||null==Me||null==ut||null==Xt)throw new ve;It.push(un<<2|Me>>4),64!==ut&&(It.push(Me<<4&240|ut>>2),64!==Xt&&It.push(ut<<6&192|Xt))}return It},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(ge){const fe=xe(ge);return ke.encodeByteArray(fe,!0)},je=function(ge){return Ne(ge).replace(/\./g,"")},me=function(ge){try{return ke.decodeString(ge,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function ce(ge){return he(void 0,ge)}function he(ge,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return fe}for(const $e in fe)!fe.hasOwnProperty($e)||!Re($e)||(ge[$e]=he(ge[$e],fe[$e]));return ge}function Re(ge){return"__proto__"!==ge}const ye=()=>{try{return function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch($e){return}const fe=ge&&me(ge[1]);return fe&&JSON.parse(fe)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},pt=()=>{var ge;return null===(ge=ye())||void 0===ge?void 0:ge.config},et=ge=>{var fe;return null===(fe=ye())||void 0===fe?void 0:fe[`_${ge}`]};class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,$e)=>{this.resolve=fe,this.reject=$e})}wrapCallback(fe){return($e,It)=>{$e?this.reject($e):this.resolve(It),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe($e):fe($e,It))}}}function z(ge,fe){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const It=fe||"demo-project",dt=ge.iat||0,un=ge.sub||ge.user_id;if(!un)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${It}`,aud:It,iat:dt,exp:dt+3600,auth_time:dt,sub:un,user_id:un,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(Fe)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Se(){var ge;const fe=null===(ge=ye())||void 0===ge?void 0:ge.forceEnvironment;if("node"===fe)return!0;if("browser"===fe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($e){return!1}}function it(){return"object"==typeof self&&self.self===self}function qe(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ze(){const ge=Pe();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function ct(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function we(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch(ge){return!1}}function Ie(){return new Promise((ge,fe)=>{try{let $e=!0;const It="validate-browser-context-for-indexeddb-analytics-module",dt=self.indexedDB.open(It);dt.onsuccess=()=>{dt.result.close(),$e||self.indexedDB.deleteDatabase(It),ge(!0)},dt.onupgradeneeded=()=>{$e=!1},dt.onerror=()=>{var un;fe((null===(un=dt.error)||void 0===un?void 0:un.message)||"")}}catch($e){fe($e)}})}function at(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ke extends Error{constructor(fe,$e,It){super($e),this.code=fe,this.customData=It,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(fe,$e,It){this.service=fe,this.serviceName=$e,this.errors=It}create(fe,...$e){const It=$e[0]||{},dt=`${this.service}/${fe}`,un=this.errors[fe],Fe=un?function Bt(ge,fe){return ge.replace(Wt,($e,It)=>{const dt=fe[It];return null!=dt?String(dt):`<${It}?>`})}(un,It):"Error";return new Ke(dt,`${this.serviceName}: ${Fe} (${dt}).`,It)}}const Wt=/\{\$([^}]+)}/g;function Yt(ge){return JSON.parse(ge)}function Ct(ge){return JSON.stringify(ge)}const Gn=function(ge){let fe={},$e={},It={},dt="";try{const un=ge.split(".");fe=Yt(me(un[0])||""),$e=Yt(me(un[1])||""),dt=un[2],It=$e.d||{},delete $e.d}catch(un){}return{header:fe,claims:$e,data:It,signature:dt}},kn=function(ge){const $e=Gn(ge).claims;return!!$e&&"object"==typeof $e&&$e.hasOwnProperty("iat")},dn=function(ge){const fe=Gn(ge).claims;return"object"==typeof fe&&!0===fe.admin};function hr(ge,fe){return Object.prototype.hasOwnProperty.call(ge,fe)}function Pr(ge,fe){if(Object.prototype.hasOwnProperty.call(ge,fe))return ge[fe]}function yr(ge){for(const fe in ge)if(Object.prototype.hasOwnProperty.call(ge,fe))return!1;return!0}function Sn(ge,fe,$e){const It={};for(const dt in ge)Object.prototype.hasOwnProperty.call(ge,dt)&&(It[dt]=fe.call($e,ge[dt],dt,ge));return It}function vr(ge,fe){if(ge===fe)return!0;const $e=Object.keys(ge),It=Object.keys(fe);for(const dt of $e){if(!It.includes(dt))return!1;const un=ge[dt],Fe=fe[dt];if(nn(un)&&nn(Fe)){if(!vr(un,Fe))return!1}else if(un!==Fe)return!1}for(const dt of It)if(!$e.includes(dt))return!1;return!0}function nn(ge){return null!==ge&&"object"==typeof ge}function oi(ge){const fe=[];for(const[$e,It]of Object.entries(ge))Array.isArray(It)?It.forEach(dt=>{fe.push(encodeURIComponent($e)+"="+encodeURIComponent(dt))}):fe.push(encodeURIComponent($e)+"="+encodeURIComponent(It));return fe.length?"&"+fe.join("&"):""}function Nr(ge){const fe={};return ge.replace(/^\?/,"").split("&").forEach(It=>{if(It){const[dt,un]=It.split("=");fe[decodeURIComponent(dt)]=decodeURIComponent(un)}}),fe}function Ai(ge){const fe=ge.indexOf("?");if(!fe)return"";const $e=ge.indexOf("#",fe);return ge.substring(fe,$e>0?$e:void 0)}class dr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,$e){$e||($e=0);const It=this.W_;if("string"==typeof fe)for(let Xt=0;Xt<16;Xt++)It[Xt]=fe.charCodeAt($e)<<24|fe.charCodeAt($e+1)<<16|fe.charCodeAt($e+2)<<8|fe.charCodeAt($e+3),$e+=4;else for(let Xt=0;Xt<16;Xt++)It[Xt]=fe[$e]<<24|fe[$e+1]<<16|fe[$e+2]<<8|fe[$e+3],$e+=4;for(let Xt=16;Xt<80;Xt++){const vn=It[Xt-3]^It[Xt-8]^It[Xt-14]^It[Xt-16];It[Xt]=4294967295&(vn<<1|vn>>>31)}let ut,Mt,dt=this.chain_[0],un=this.chain_[1],Fe=this.chain_[2],Me=this.chain_[3],de=this.chain_[4];for(let Xt=0;Xt<80;Xt++){Xt<40?Xt<20?(ut=Me^un&(Fe^Me),Mt=1518500249):(ut=un^Fe^Me,Mt=1859775393):Xt<60?(ut=un&Fe|Me&(un|Fe),Mt=2400959708):(ut=un^Fe^Me,Mt=3395469782);const vn=(dt<<5|dt>>>27)+ut+de+Mt+It[Xt]&4294967295;de=Me,Me=Fe,Fe=4294967295&(un<<30|un>>>2),un=dt,dt=vn}this.chain_[0]=this.chain_[0]+dt&4294967295,this.chain_[1]=this.chain_[1]+un&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+Me&4294967295,this.chain_[4]=this.chain_[4]+de&4294967295}update(fe,$e){if(null==fe)return;void 0===$e&&($e=fe.length);const It=$e-this.blockSize;let dt=0;const un=this.buf_;let Fe=this.inbuf_;for(;dt<$e;){if(0===Fe)for(;dt<=It;)this.compress_(fe,dt),dt+=this.blockSize;if("string"==typeof fe){for(;dt<$e;)if(un[Fe]=fe.charCodeAt(dt),++Fe,++dt,Fe===this.blockSize){this.compress_(un),Fe=0;break}}else for(;dt<$e;)if(un[Fe]=fe[dt],++Fe,++dt,Fe===this.blockSize){this.compress_(un),Fe=0;break}}this.inbuf_=Fe,this.total_+=$e}digest(){const fe=[];let $e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let dt=this.blockSize-1;dt>=56;dt--)this.buf_[dt]=255&$e,$e/=256;this.compress_(this.buf_);let It=0;for(let dt=0;dt<5;dt++)for(let un=24;un>=0;un-=8)fe[It]=this.chain_[dt]>>un&255,++It;return fe}}function Rn(ge,fe){const $e=new mn(ge,fe);return $e.subscribe.bind($e)}class mn{constructor(fe,$e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(()=>{fe(this)}).catch(It=>{this.error(It)})}next(fe){this.forEachObserver($e=>{$e.next(fe)})}error(fe){this.forEachObserver($e=>{$e.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,$e,It){let dt;if(void 0===fe&&void 0===$e&&void 0===It)throw new Error("Missing Observer.");dt=function Vn(ge,fe){if("object"!=typeof ge||null===ge)return!1;for(const $e of fe)if($e in ge&&"function"==typeof ge[$e])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:$e,complete:It},void 0===dt.next&&(dt.next=Vr),void 0===dt.error&&(dt.error=Vr),void 0===dt.complete&&(dt.complete=Vr);const un=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?dt.error(this.finalError):dt.complete()}catch(Fe){}}),this.observers.push(dt),un}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let $e=0;$e<this.observers.length;$e++)this.sendOne($e,fe)}sendOne(fe,$e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{$e(this.observers[fe])}catch(It){typeof console<"u"&&console.error&&console.error(It)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vr(){}const Jt=function(ge,fe,$e,It){let dt;if(It<fe?dt="at least "+fe:It>$e&&(dt=0===$e?"none":"no more than "+$e),dt)throw new Error(ge+" failed: Was called with "+It+(1===It?" argument.":" arguments.")+" Expects "+dt+".")};function _r(ge,fe){return`${ge} failed: ${fe} argument `}function ii(ge,fe,$e,It){if((!It||$e)&&"function"!=typeof $e)throw new Error(_r(ge,fe)+"must be a valid function.")}function Fr(ge,fe,$e,It){if((!It||$e)&&("object"!=typeof $e||null===$e))throw new Error(_r(ge,fe)+"must be a valid context object.")}const Di=function(ge){const fe=[];let $e=0;for(let It=0;It<ge.length;It++){let dt=ge.charCodeAt(It);if(dt>=55296&&dt<=56319){const un=dt-55296;It++,Q(It<ge.length,"Surrogate pair missing trail surrogate."),dt=65536+(un<<10)+(ge.charCodeAt(It)-56320)}dt<128?fe[$e++]=dt:dt<2048?(fe[$e++]=dt>>6|192,fe[$e++]=63&dt|128):dt<65536?(fe[$e++]=dt>>12|224,fe[$e++]=dt>>6&63|128,fe[$e++]=63&dt|128):(fe[$e++]=dt>>18|240,fe[$e++]=dt>>12&63|128,fe[$e++]=dt>>6&63|128,fe[$e++]=63&dt|128)}return fe},or=function(ge){let fe=0;for(let $e=0;$e<ge.length;$e++){const It=ge.charCodeAt($e);It<128?fe++:It<2048?fe+=2:It>=55296&&It<=56319?(fe+=4,$e++):fe+=3}return fe},ai=1e3,Tr=2,Or=144e5,kt=.5;function Be(ge,fe=ai,$e=Tr){const It=fe*Math.pow($e,ge),dt=Math.round(kt*It*(Math.random()-.5)*2);return Math.min(Or,It+dt)}function $t(ge){return ge&&ge._delegate?ge._delegate:ge}},2078:(yn,Et,V)=>{"use strict";V.d(Et,{dr:()=>ii,oU:()=>Di,cs:()=>No,YG:()=>Or,Sm:()=>kt,PM:()=>Be,FN:()=>Ge,Zi:()=>jt,tO:()=>$t,Dq:()=>ge,W2:()=>dt,Gu:()=>vn,pK:()=>bt,Ie:()=>Kt,Q$:()=>pr,q_:()=>mr,jP:()=>uo,wd:()=>Gt,sr:()=>Fn,Pc:()=>Us,r4:()=>us,YI:()=>Aa,j9:()=>Rn,yF:()=>ua});var u=V(4650),Q=V(433),W=V(655),xe=V(8421),Oe=V(9751),ke=V(5577),ve=V(1144),Ne=V(576),je=V(3268);const me=["addListener","removeListener"],ce=["addEventListener","removeEventListener"],he=["on","off"];function Re(y,I,f,T){if((0,Ne.m)(f)&&(T=f,f=void 0),T)return Re(y,I,f).pipe((0,je.Z)(T));const[q,Le]=function De(y){return(0,Ne.m)(y.addEventListener)&&(0,Ne.m)(y.removeEventListener)}(y)?ce.map(tn=>gn=>y[tn](I,gn,f)):function lt(y){return(0,Ne.m)(y.addListener)&&(0,Ne.m)(y.removeListener)}(y)?me.map(Ve(y,I)):function At(y){return(0,Ne.m)(y.on)&&(0,Ne.m)(y.off)}(y)?he.map(Ve(y,I)):[];if(!q&&(0,ve.z)(y))return(0,ke.z)(tn=>Re(tn,I,f))((0,xe.Xf)(y));if(!q)throw new TypeError("Invalid event target");return new Oe.y(tn=>{const gn=(...qn)=>tn.next(1<qn.length?qn:qn[0]);return q(gn),()=>Le(gn)})}function Ve(y,I){return f=>T=>y[f](I,T)}var ye=V(7579),ue=V(1135),rt=V(1194),Pe=(V(181),V(6439),V(7838),V(1898),V(5179)),Te=V(5730),Se=V(5820),it=V(1843),nt=(V(6369),V(3539)),_t=(V(3457),V(4349),V(1308)),Ie=V(9300),at=V(3900),Ye=V(1884),Ke=V(6895);const Bt=Pe.i,Ct=["*"],hr=y=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(y):"function"==typeof requestAnimationFrame?requestAnimationFrame(y):setTimeout(y),Pr=y=>!!y.resolveComponentFactory;let yr=(()=>{class y{constructor(f,T){this.injector=f,this.el=T,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(f){this.el.nativeElement.value=this.lastValue=null==f?"":f,Sn(this.el)}handleChangeEvent(f,T){f===this.el.nativeElement&&(T!==this.lastValue&&(this.lastValue=T,this.onChange(T)),Sn(this.el))}_handleBlurEvent(f){f===this.el.nativeElement&&(this.onTouched(),Sn(this.el))}registerOnChange(f){this.onChange=f}registerOnTouched(f){this.onTouched=f}setDisabledState(f){this.el.nativeElement.disabled=f}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let f;try{f=this.injector.get(Q.a5)}catch(q){}if(!f)return;f.statusChanges&&(this.statusChanges=f.statusChanges.subscribe(()=>Sn(this.el)));const T=f.control;T&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Le=>{if(typeof T[Le]<"u"){const tn=T[Le].bind(T);T[Le]=(...gn)=>{tn(...gn),Sn(this.el)}}})}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.zs3),u.Y36(u.SBq))},y.\u0275dir=u.lG2({type:y,hostBindings:function(f,T){1&f&&u.NdJ("ionBlur",function(Le){return T._handleBlurEvent(Le.target)})}}),y})();const Sn=y=>{hr(()=>{const I=y.nativeElement,f=null!=I.value&&I.value.toString().length>0,T=vr(I);nn(I,T);const q=I.closest("ion-item");q&&nn(q,f?[...T,"item-has-value"]:T)})},vr=y=>{const I=y.classList,f=[];for(let T=0;T<I.length;T++){const q=I.item(T);null!==q&&ci(q,"ng-")&&f.push(`ion-${q.substring(3)}`)}return f},nn=(y,I)=>{const f=y.classList;f.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),f.add(...I)},ci=(y,I)=>y.substring(0,I.length)===I;let Rn=(()=>{class y extends yr{constructor(f,T){super(f,T)}_handleInputEvent(f){this.handleChangeEvent(f,f.value)}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.zs3),u.Y36(u.SBq))},y.\u0275dir=u.lG2({type:y,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(f,T){1&f&&u.NdJ("ionChange",function(Le){return T._handleInputEvent(Le.target)})},features:[u._Bn([{provide:Q.JU,useExisting:y,multi:!0}]),u.qOj]}),y})();const mn=(y,I)=>{const f=y.prototype;I.forEach(T=>{Object.defineProperty(f,T,{get(){return this.el[T]},set(q){this.z.runOutsideAngular(()=>this.el[T]=q)}})})},cn=(y,I)=>{const f=y.prototype;I.forEach(T=>{f[T]=function(){const q=arguments;return this.z.runOutsideAngular(()=>this.el[T].apply(this.el,q))}})},Vn=(y,I,f)=>{f.forEach(T=>y[T]=Re(I,T))};function Jt(y){return function(f){const{defineCustomElementFn:T,inputs:q,methods:Le}=y;return void 0!==T&&T(),q&&mn(f,q),Le&&cn(f,Le),f}}let ii=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-app"]],ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0})],y),y})(),Di=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],y),y})(),Or=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement,Vn(this,this.el,["ionFocus","ionBlur"])}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],y),y})(),kt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["collapse"]})],y),y})(),Be=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],y),y})(),Ge=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["mode"]})],y),y})(),jt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],y),y})(),$t=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})(),ge=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})(),dt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement,Vn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],y),y})(),vn=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],y),y})(),bt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement,Vn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],y),y})(),Kt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],y),y})(),pr=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],y),y})(),mr=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],y),y})(),Gt=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","size"]})],y),y})(),Fn=(()=>{let y=class{constructor(f,T,q){this.z=q,f.detach(),this.el=T.nativeElement}};return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},y.\u0275cmp=u.Xpm({type:y,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,T){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),y=(0,W.gn)([Jt({defineCustomElementFn:void 0,inputs:["color","mode"]})],y),y})();class Lr{constructor(I={}){this.data=I}get(I){return this.data[I]}}let Xn=(()=>{class y{constructor(f,T){this.zone=f,this.appRef=T}create(f,T,q,Le){return new Rr(f,T,q,this.appRef,this.zone,Le)}}return y.\u0275fac=function(f){return new(f||y)(u.LFG(u.R0b),u.LFG(u.z2F))},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac}),y})();class Rr{constructor(I,f,T,q,Le,tn){this.resolverOrInjector=I,this.injector=f,this.location=T,this.appRef=q,this.zone=Le,this.elementReferenceKey=tn,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(I,f,T,q){return this.zone.run(()=>new Promise(Le=>{const tn=Object.assign({},T);void 0!==this.elementReferenceKey&&(tn[this.elementReferenceKey]=I),Le(Bs(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,I,f,tn,q))}))}removeViewFromDom(I,f){return this.zone.run(()=>new Promise(T=>{const q=this.elRefMap.get(f);if(q){q.destroy(),this.elRefMap.delete(f);const Le=this.elEventsMap.get(f);Le&&(Le(),this.elEventsMap.delete(f))}T()}))}}const Bs=(y,I,f,T,q,Le,tn,gn,qn,Sr,hi)=>{let br;const cs=u.zs3.create({providers:os(Sr),parent:f});if(I&&Pr(I)){const bo=I.resolveComponentFactory(qn);br=T?T.createComponent(bo,T.length,cs):bo.create(cs)}else{if(!T)return null;br=T.createComponent(qn,{index:T.indexOf,injector:cs,environmentInjector:I})}const _s=br.instance,Ii=br.location.nativeElement;if(Sr&&Object.assign(_s,Sr),hi)for(const bo of hi)Ii.classList.add(bo);const Ui=Fi(y,_s,Ii);return gn.appendChild(Ii),T||q.attachView(br.hostView),br.changeDetectorRef.reattach(),Le.set(Ii,br),tn.set(Ii,Ui),Ii},qs=[it.L,it.a,it.b,it.c,it.d],Fi=(y,I,f)=>y.run(()=>{const T=qs.filter(q=>"function"==typeof I[q]).map(q=>{const Le=tn=>I[q](tn.detail);return f.addEventListener(q,Le),()=>f.removeEventListener(q,Le)});return()=>T.forEach(q=>q())}),Xi=new u.OlP("NavParamsToken"),os=y=>[{provide:Xi,useValue:y},{provide:Lr,useFactory:ko,deps:[Xi]}],ko=y=>new Lr(y),Li=(y,I)=>((y=y.filter(f=>f.stackId!==I.stackId)).push(I),y),Yo=(y,I)=>{const f=y.createUrlTree(["."],{relativeTo:I});return y.serializeUrl(f)},Cs=(y,I)=>{if(!y)return;const f=Ks(I);for(let T=0;T<f.length;T++){if(T>=y.length)return f[T];if(f[T]!==y[T])return}},Ks=y=>y.split("/").map(I=>I.trim()).filter(I=>""!==I),Ta=y=>{y&&(y.ref.destroy(),y.unlistenEvents())};class Ha{constructor(I,f,T,q,Le,tn){this.containerEl=f,this.router=T,this.navCtrl=q,this.zone=Le,this.location=tn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==I?Ks(I):void 0}createView(I,f){var T;const q=Yo(this.router,f),Le=null===(T=null==I?void 0:I.location)||void 0===T?void 0:T.nativeElement,tn=Fi(this.zone,I.instance,Le);return{id:this.nextId++,stackId:Cs(this.tabsPrefix,q),unlistenEvents:tn,element:Le,ref:I,url:q}}getExistingView(I){const f=Yo(this.router,I),T=this.views.find(q=>q.url===f);return T&&T.ref.changeDetectorRef.reattach(),T}setActive(I){var f,T;const q=this.navCtrl.consumeTransition();let{direction:Le,animation:tn,animationBuilder:gn}=q;const qn=this.activeView,Sr=((y,I)=>!I||y.stackId!==I.stackId)(I,qn);Sr&&(Le="back",tn=void 0);const hi=this.views.slice();let br;const cs=this.router;cs.getCurrentNavigation?br=cs.getCurrentNavigation():!(null===(f=cs.navigations)||void 0===f)&&f.value&&(br=cs.navigations.value),null!==(T=null==br?void 0:br.extras)&&void 0!==T&&T.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const _s=this.views.includes(I),Ii=this.insertView(I,Le);_s||I.ref.changeDetectorRef.detectChanges();const Ui=I.animationBuilder;return void 0===gn&&"back"===Le&&!Sr&&void 0!==Ui&&(gn=Ui),qn&&(qn.animationBuilder=gn),this.zone.runOutsideAngular(()=>this.wait(()=>(qn&&qn.ref.changeDetectorRef.detach(),I.ref.changeDetectorRef.reattach(),this.transition(I,qn,tn,this.canGoBack(1),!1,gn).then(()=>wo(I,Ii,hi,this.location,this.zone)).then(()=>({enteringView:I,direction:Le,animation:tn,tabSwitch:Sr})))))}canGoBack(I,f=this.getActiveStackId()){return this.getStack(f).length>I}pop(I,f=this.getActiveStackId()){return this.zone.run(()=>{var T,q;const Le=this.getStack(f);if(Le.length<=I)return Promise.resolve(!1);const tn=Le[Le.length-I-1];let gn=tn.url;const qn=tn.savedData;if(qn){const hi=qn.get("primary");null!==(q=null===(T=null==hi?void 0:hi.route)||void 0===T?void 0:T._routerState)&&void 0!==q&&q.snapshot.url&&(gn=hi.route._routerState.snapshot.url)}const{animationBuilder:Sr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(gn,Object.assign(Object.assign({},tn.savedExtras),{animation:Sr})).then(()=>!0)})}startBackTransition(){const I=this.activeView;if(I){const f=this.getStack(I.stackId),T=f[f.length-2],q=T.animationBuilder;return this.wait(()=>this.transition(T,I,"back",this.canGoBack(2),!0,q))}return Promise.resolve()}endBackTransition(I){I?(this.skipTransition=!0,this.pop(1)):this.activeView&&Qi(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(I){const f=this.getStack(I);return f.length>0?f[f.length-1]:void 0}getRootUrl(I){const f=this.getStack(I);return f.length>0?f[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Ta),this.activeView=void 0,this.views=[]}getStack(I){return this.views.filter(f=>f.stackId===I)}insertView(I,f){return this.activeView=I,this.views=((y,I,f)=>"root"===f?Li(y,I):"forward"===f?((y,I)=>(y.indexOf(I)>=0?y=y.filter(T=>T.stackId!==I.stackId||T.id<=I.id):y.push(I),y))(y,I):((y,I)=>y.indexOf(I)>=0?y.filter(T=>T.stackId!==I.stackId||T.id<=I.id):Li(y,I))(y,I))(this.views,I,f),this.views.slice()}transition(I,f,T,q,Le,tn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(f===I)return Promise.resolve(!1);const gn=I?I.element:void 0,qn=f?f.element:void 0,Sr=this.containerEl;return gn&&gn!==qn&&(gn.classList.add("ion-page"),gn.classList.add("ion-page-invisible"),gn.parentElement!==Sr&&Sr.appendChild(gn),Sr.commit)?Sr.commit(gn,qn,{deepWait:!0,duration:void 0===T?0:void 0,direction:T,showGoBack:q,progressAnimation:Le,animationBuilder:tn}):Promise.resolve(!1)}wait(I){return(0,W.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const f=this.runningTask=I();return f.finally(()=>this.runningTask=void 0),f})}}const wo=(y,I,f,T,q)=>"function"==typeof requestAnimationFrame?new Promise(Le=>{requestAnimationFrame(()=>{Qi(y,I,f,T,q),Le()})}):Promise.resolve(),Qi=(y,I,f,T,q)=>{q.run(()=>f.filter(Le=>!I.includes(Le)).forEach(Ta)),I.forEach(Le=>{const gn=T.path().split("?")[0].split("#")[0];if(Le!==y&&Le.url!==gn){const qn=Le.element;qn.setAttribute("aria-hidden","true"),qn.classList.add("ion-page-hidden"),Le.ref.changeDetectorRef.detach()}})};let Sa=(()=>{class y{get(f,T){const q=Bi();return q?q.get(f,T):null}getBoolean(f,T){const q=Bi();return!!q&&q.getBoolean(f,T)}getNumber(f,T){const q=Bi();return q?q.getNumber(f,T):0}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const $s=new u.OlP("USERCONFIG"),Bi=()=>{if(typeof window<"u"){const y=window.Ionic;if(null!=y&&y.config)return y.config}return null};let aa=(()=>{class y{constructor(f,T){this.doc=f,this.backButton=new ye.x,this.keyboardDidShow=new ye.x,this.keyboardDidHide=new ye.x,this.pause=new ye.x,this.resume=new ye.x,this.resize=new ye.x,T.run(()=>{var q;let Le;this.win=f.defaultView,this.backButton.subscribeWithPriority=function(tn,gn){return this.subscribe(qn=>qn.register(tn,Sr=>T.run(()=>gn(Sr))))},ms(this.pause,f,"pause"),ms(this.resume,f,"resume"),ms(this.backButton,f,"ionBackButton"),ms(this.resize,this.win,"resize"),ms(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ms(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(tn=>{Le=tn}),null!==(q=this.win)&&void 0!==q&&q.cordova?f.addEventListener("deviceready",()=>{Le("cordova")},{once:!0}):Le("dom")})}is(f){return(0,Pe.a)(this.win,f)}platforms(){return(0,Pe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(f){return ao(this.win.location.href,f)}isLandscape(){return!this.isPortrait()}isPortrait(){var f,T;return null===(T=(f=this.win).matchMedia)||void 0===T?void 0:T.call(f,"(orientation: portrait)").matches}testUserAgent(f){const T=this.win.navigator;return!!(null!=T&&T.userAgent&&T.userAgent.indexOf(f)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return y.\u0275fac=function(f){return new(f||y)(u.LFG(Ke.K0),u.LFG(u.R0b))},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const ao=(y,I)=>{I=I.replace(/[[\]\\]/g,"\\$&");const T=new RegExp("[\\?&]"+I+"=([^&#]*)").exec(y);return T?decodeURIComponent(T[1].replace(/\+/g," ")):null},ms=(y,I,f)=>{I&&I.addEventListener(f,T=>{y.next(null!=T?T.detail:void 0)})};let ui=(()=>{class y{constructor(f,T,q,Le){this.location=T,this.serializer=q,this.router=Le,this.direction=lo,this.animated=Os,this.guessDirection="forward",this.lastNavId=-1,Le&&Le.events.subscribe(tn=>{if(tn instanceof rt.OD){const gn=tn.restoredState?tn.restoredState.navigationId:tn.id;this.guessDirection=gn<this.lastNavId?"back":"forward",this.guessAnimation=tn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?tn.id:gn}}),f.backButton.subscribeWithPriority(0,tn=>{this.pop(),tn()})}navigateForward(f,T={}){return this.setDirection("forward",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}navigateBack(f,T={}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}navigateRoot(f,T={}){return this.setDirection("root",T.animated,T.animationDirection,T.animation),this.navigate(f,T)}back(f={animated:!0,animationDirection:"back"}){return this.setDirection("back",f.animated,f.animationDirection,f.animation),this.location.back()}pop(){return(0,W.mG)(this,void 0,void 0,function*(){let f=this.topOutlet;for(;f&&!(yield f.pop());)f=f.parentOutlet})}setDirection(f,T,q,Le){this.direction=f,this.animated=ns(f,T,q),this.animationBuilder=Le}setTopOutlet(f){this.topOutlet=f}consumeTransition(){let T,f="root";const q=this.animationBuilder;return"auto"===this.direction?(f=this.guessDirection,T=this.guessAnimation):(T=this.animated,f=this.direction),this.direction=lo,this.animated=Os,this.animationBuilder=void 0,{direction:f,animation:T,animationBuilder:q}}navigate(f,T){if(Array.isArray(f))return this.router.navigate(f,T);{const q=this.serializer.parse(f.toString());return void 0!==T.queryParams&&(q.queryParams=Object.assign({},T.queryParams)),void 0!==T.fragment&&(q.fragment=T.fragment),this.router.navigateByUrl(q,T)}}}return y.\u0275fac=function(f){return new(f||y)(u.LFG(aa),u.LFG(Ke.Ye),u.LFG(rt.Hx),u.LFG(rt.F0,8))},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const ns=(y,I,f)=>{if(!1!==I){if(void 0!==f)return f;if("forward"===y||"back"===y)return y;if("root"===y&&!0===I)return"forward"}},lo="auto",Os=void 0;let uo=(()=>{class y{constructor(f,T,q,Le,tn,gn,qn,Sr,hi,br,cs,_s,Ii){this.parentContexts=f,this.location=T,this.config=tn,this.navCtrl=gn,this.componentFactoryResolver=qn,this.parentOutlet=Ii,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new ue.X(null),this.stackEvents=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.nativeEl=hi.nativeElement,this.name=q||rt.eC,this.tabsPrefix="true"===Le?Yo(br,_s):void 0,this.stackCtrl=new Ha(this.tabsPrefix,this.nativeEl,br,gn,cs,Sr),f.onChildOutletCreated(this.name,this)}set animation(f){this.nativeEl.animation=f}set animated(f){this.nativeEl.animated=f}set swipeGesture(f){this._swipeGesture=f,this.nativeEl.swipeHandler=f?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:T=>this.stackCtrl.endBackTransition(T)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const f=this.getContext();null!=f&&f.route&&this.activateWith(f.route,f.resolver||null)}new Promise(f=>(0,Te.c)(this.nativeEl,f)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(f,T){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const T=this.getContext();this.activatedView.savedData=new Map(T.children.contexts);const q=this.activatedView.savedData.get("primary");if(q&&T.route&&(q.route=Object.assign({},T.route)),this.activatedView.savedExtras={},T.route){const Le=T.route.snapshot;this.activatedView.savedExtras.queryParams=Le.queryParams,this.activatedView.savedExtras.fragment=Le.fragment}}const f=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(f)}}activateWith(f,T){var q;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=f;let Le,tn=this.stackCtrl.getExistingView(f);if(tn){Le=this.activated=tn.ref;const gn=tn.savedData;gn&&(this.getContext().children.contexts=gn),this.updateActivatedRouteProxy(Le.instance,f)}else{const gn=f._futureSnapshot;if(null==gn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const qn=this.parentContexts.getOrCreateContext(this.name).children,Sr=new ue.X(null),hi=this.createActivatedRouteProxy(Sr,f),br=new la(hi,qn,this.location.injector),cs=null!==(q=gn.routeConfig.component)&&void 0!==q?q:gn.component;if((T=T||this.componentFactoryResolver)&&Pr(T)){const _s=T.resolveComponentFactory(cs);Le=this.activated=this.location.createComponent(_s,this.location.length,br)}else Le=this.activated=this.location.createComponent(cs,{index:this.location.length,injector:br,environmentInjector:null!=T?T:this.environmentInjector});Sr.next(Le.instance),tn=this.stackCtrl.createView(this.activated,f),this.proxyMap.set(Le.instance,hi),this.currentActivatedRoute$.next({component:Le.instance,activatedRoute:f})}this.activatedView=tn,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(tn).then(gn=>{this.activateEvents.emit(Le.instance),this.stackEvents.emit(gn)})}canGoBack(f=1,T){return this.stackCtrl.canGoBack(f,T)}pop(f=1,T){return this.stackCtrl.pop(f,T)}getLastUrl(f){const T=this.stackCtrl.getLastUrl(f);return T?T.url:void 0}getLastRouteView(f){return this.stackCtrl.getLastUrl(f)}getRootView(f){return this.stackCtrl.getRootUrl(f)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(f,T){const q=new rt.gz;return q._futureSnapshot=T._futureSnapshot,q._routerState=T._routerState,q.snapshot=T.snapshot,q.outlet=T.outlet,q.component=T.component,q._paramMap=this.proxyObservable(f,"paramMap"),q._queryParamMap=this.proxyObservable(f,"queryParamMap"),q.url=this.proxyObservable(f,"url"),q.params=this.proxyObservable(f,"params"),q.queryParams=this.proxyObservable(f,"queryParams"),q.fragment=this.proxyObservable(f,"fragment"),q.data=this.proxyObservable(f,"data"),q}proxyObservable(f,T){return f.pipe((0,Ie.h)(q=>!!q),(0,at.w)(q=>this.currentActivatedRoute$.pipe((0,Ie.h)(Le=>null!==Le&&Le.component===q),(0,at.w)(Le=>Le&&Le.activatedRoute[T]),(0,Ye.x)())))}updateActivatedRouteProxy(f,T){const q=this.proxyMap.get(f);if(!q)throw new Error("Could not find activated route proxy for view");q._futureSnapshot=T._futureSnapshot,q._routerState=T._routerState,q.snapshot=T.snapshot,q.outlet=T.outlet,q.component=T.component,this.currentActivatedRoute$.next({component:f,activatedRoute:T})}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(rt.y6),u.Y36(u.s_b),u.$8M("name"),u.$8M("tabs"),u.Y36(Sa),u.Y36(ui),u.Y36(u._Vd,8),u.Y36(Ke.Ye),u.Y36(u.SBq),u.Y36(rt.F0),u.Y36(u.R0b),u.Y36(rt.gz),u.Y36(y,12))},y.\u0275dir=u.lG2({type:y,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),y})();class la{constructor(I,f,T){this.route=I,this.childContexts=f,this.parent=T}get(I,f){return I===rt.gz?this.route:I===rt.y6?this.childContexts:this.parent.get(I,f)}}let No=(()=>{class y{constructor(f,T,q){this.routerOutlet=f,this.navCtrl=T,this.config=q}onClick(f){var T;const q=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(T=this.routerOutlet)&&void 0!==T&&T.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),f.preventDefault()):null!=q&&(this.navCtrl.navigateBack(q,{animation:this.routerAnimation}),f.preventDefault())}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(uo,8),u.Y36(ui),u.Y36(Sa))},y.\u0275dir=u.lG2({type:y,selectors:[["ion-back-button"]],hostBindings:function(f,T){1&f&&u.NdJ("click",function(Le){return T.onClick(Le)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),y})(),Aa=(()=>{class y{constructor(f,T,q,Le,tn){this.locationStrategy=f,this.navCtrl=T,this.elementRef=q,this.router=Le,this.routerLink=tn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var f;if(null!==(f=this.routerLink)&&void 0!==f&&f.urlTree){const T=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=T}}onClick(f){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),f.preventDefault()}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(Ke.S$),u.Y36(ui),u.Y36(u.SBq),u.Y36(rt.F0),u.Y36(rt.rH,8))},y.\u0275dir=u.lG2({type:y,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(f,T){1&f&&u.NdJ("click",function(Le){return T.onClick(Le)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[u.TTD]}),y})();class Mi{constructor(I){this.ctrl=I}create(I){return this.ctrl.create(I||{})}dismiss(I,f,T){return this.ctrl.dismiss(I,f,T)}getTop(){return this.ctrl.getTop()}}class vs{}let Fo=(()=>{class y extends Mi{constructor(f,T,q,Le){super(nt.m),this.angularDelegate=f,this.resolver=T,this.injector=q,this.environmentInjector=Le}create(f){var T;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(T=this.resolver)&&void 0!==T?T:this.environmentInjector,this.injector,void 0,"modal")}))}}return y.\u0275fac=function(f){return new(f||y)(u.LFG(Xn),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(vs,8))},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac}),y})(),ls=(()=>{class y extends Mi{constructor(f,T,q,Le){super(nt.c),this.angularDelegate=f,this.resolver=T,this.injector=q,this.environmentInjector=Le}create(f){var T;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(T=this.resolver)&&void 0!==T?T:this.environmentInjector,this.injector,void 0,"popover")}))}}return y.\u0275fac=function(f){return new(f||y)(u.LFG(Xn),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(vs,8))},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac}),y})(),ua=(()=>{class y extends Mi{constructor(){super(nt.t)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();class us{shouldDetach(I){return!1}shouldAttach(I){return!1}store(I,f){}retrieve(I){return null}shouldReuseRoute(I,f){if(I.routeConfig!==f.routeConfig)return!1;const T=I.params,q=f.params,Le=Object.keys(T),tn=Object.keys(q);if(Le.length!==tn.length)return!1;for(const gn of Le)if(q[gn]!==T[gn])return!1;return!0}}const fo=(y,I,f)=>()=>{if(I.defaultView&&typeof window<"u"){(0,Se.s)(Object.assign(Object.assign({},y),{_zoneGate:Le=>f.run(Le)}));const q="__zone_symbol__addEventListener"in I.body?"__zone_symbol__addEventListener":"addEventListener";return function Ue(){var y=[];if(typeof window<"u"){var I=window;(!I.customElements||I.Element&&(!I.Element.prototype.closest||!I.Element.prototype.matches||!I.Element.prototype.remove||!I.Element.prototype.getRootNode))&&y.push(V.e(6748).then(V.t.bind(V,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||I.NodeList&&!I.NodeList.prototype.forEach||!I.fetch||!function(){try{var T=new URL("b","http://a");return T.pathname="c%20d","http://a/c%20d"===T.href&&T.searchParams}catch(q){return!1}}()||typeof WeakMap>"u")&&y.push(V.e(2214).then(V.t.bind(V,4144,23)))}return Promise.all(y)}().then(()=>((y,I)=>typeof window>"u"?Promise.resolve():(0,_t.p)().then(()=>(Bt(),(0,_t.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),I))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:hr,jmp:Le=>f.runOutsideAngular(Le),ael(Le,tn,gn,qn){Le[q](tn,gn,qn)},rel(Le,tn,gn,qn){Le.removeEventListener(tn,gn,qn)}}))}};let Us=(()=>{class y{static forRoot(f){return{ngModule:y,providers:[{provide:$s,useValue:f},{provide:u.ip1,useFactory:fo,multi:!0,deps:[$s,Ke.K0,u.R0b]}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({providers:[Xn,Fo,ls],imports:[[Ke.ez]]}),y})()},181:(yn,Et,V)=>{"use strict";V.d(Et,{c:()=>At});var u=V(5730),Q=V(3457);let W;const Oe=De=>De.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ke=De=>(void 0===W&&(W=void 0===De.style.animationName&&void 0!==De.style.webkitAnimationName?"-webkit-":""),W),ve=(De,ye,ue)=>{const rt=ye.startsWith("animation")?ke(De):"";De.style.setProperty(rt+ye,ue)},Ne=(De,ye)=>{const ue=ye.startsWith("animation")?ke(De):"";De.style.removeProperty(ue+ye)},ce=[],lt=(De=[],ye)=>{if(void 0!==ye){const ue=Array.isArray(ye)?ye:[ye];return[...De,...ue]}return De},At=De=>{let ye,ue,rt,pt,et,He,it,Ae,Ie,at,Ye,Wt,Yt,z=[],Pe=[],Te=[],Se=!1,qe={},nt=[],tt=[],ze={},_t=0,ct=!1,we=!1,Ke=!0,Ue=!1,Bt=!0,Ct=!1;const Gn=De,Kn=[],er=[],kn=[],dn=[],hr=[],Pr=[],yr=[],Sn=[],vr=[],nn=[],ci="function"==typeof AnimationEffect||void 0!==Q.w&&"function"==typeof Q.w.AnimationEffect,oi="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ci,Ai=()=>nn,Vn=(ae,Je)=>((null!=Je&&Je.oneTimeCallback?er:Kn).push({c:ae,o:Je}),Yt),Jt=()=>{if(oi)nn.forEach(ae=>{ae.cancel()}),nn.length=0;else{const ae=kn.slice();(0,u.r)(()=>{ae.forEach(Je=>{Ne(Je,"animation-name"),Ne(Je,"animation-duration"),Ne(Je,"animation-timing-function"),Ne(Je,"animation-iteration-count"),Ne(Je,"animation-delay"),Ne(Je,"animation-play-state"),Ne(Je,"animation-fill-mode"),Ne(Je,"animation-direction")})})}},_r=()=>{hr.forEach(ae=>{null!=ae&&ae.parentNode&&ae.parentNode.removeChild(ae)}),hr.length=0},jt=()=>void 0!==et?et:it?it.getFill():"both",$t=()=>void 0!==Ie?Ie:void 0!==He?He:it?it.getDirection():"normal",ge=()=>ct?"linear":void 0!==rt?rt:it?it.getEasing():"linear",fe=()=>we?0:void 0!==at?at:void 0!==ue?ue:it?it.getDuration():0,$e=()=>void 0!==pt?pt:it?it.getIterations():1,It=()=>void 0!==Ye?Ye:void 0!==ye?ye:it?it.getDelay():0,Kt=()=>{0!==_t&&(_t--,0===_t&&((()=>{pn(),Sn.forEach(Vt=>Vt()),vr.forEach(Vt=>Vt());const ae=Ke?1:0,Je=nt,vt=tt,Ft=ze;kn.forEach(Vt=>{const sn=Vt.classList;Je.forEach(Pn=>sn.add(Pn)),vt.forEach(Pn=>sn.remove(Pn));for(const Pn in Ft)Ft.hasOwnProperty(Pn)&&ve(Vt,Pn,Ft[Pn])}),Kn.forEach(Vt=>Vt.c(ae,Yt)),er.forEach(Vt=>Vt.c(ae,Yt)),er.length=0,Bt=!0,Ke&&(Ue=!0),Ke=!0})(),it&&it.animationFinish()))},An=(ae=!0)=>{_r();const Je=(De=>(De.forEach(ye=>{for(const ue in ye)if(ye.hasOwnProperty(ue)){const rt=ye[ue];if("easing"===ue)ye["animation-timing-function"]=rt,delete ye[ue];else{const pt=Oe(ue);pt!==ue&&(ye[pt]=rt,delete ye[ue])}}}),De))(z);kn.forEach(vt=>{if(Je.length>0){const Ft=((De=[])=>De.map(ye=>{const ue=ye.offset,rt=[];for(const pt in ye)ye.hasOwnProperty(pt)&&"offset"!==pt&&rt.push(`${pt}: ${ye[pt]};`);return`${100*ue}% { ${rt.join(" ")} }`}).join(" "))(Je);Wt=void 0!==De?De:(De=>{let ye=ce.indexOf(De);return ye<0&&(ye=ce.push(De)-1),`ion-animation-${ye}`})(Ft);const Vt=((De,ye,ue)=>{var rt;const pt=(De=>{const ye=void 0!==De.getRootNode?De.getRootNode():De;return ye.head||ye})(ue),et=ke(ue),He=pt.querySelector("#"+De);if(He)return He;const z=(null!==(rt=ue.ownerDocument)&&void 0!==rt?rt:document).createElement("style");return z.id=De,z.textContent=`@${et}keyframes ${De} { ${ye} } @${et}keyframes ${De}-alt { ${ye} }`,pt.appendChild(z),z})(Wt,Ft,vt);hr.push(Vt),ve(vt,"animation-duration",`${fe()}ms`),ve(vt,"animation-timing-function",ge()),ve(vt,"animation-delay",`${It()}ms`),ve(vt,"animation-fill-mode",jt()),ve(vt,"animation-direction",$t());const sn=$e()===1/0?"infinite":$e().toString();ve(vt,"animation-iteration-count",sn),ve(vt,"animation-play-state","paused"),ae&&ve(vt,"animation-name",`${Vt.id}-alt`),(0,u.r)(()=>{ve(vt,"animation-name",Vt.id||null)})}})},lr=(ae=!0)=>{(()=>{Pr.forEach(Ft=>Ft()),yr.forEach(Ft=>Ft());const ae=Pe,Je=Te,vt=qe;kn.forEach(Ft=>{const Vt=Ft.classList;ae.forEach(sn=>Vt.add(sn)),Je.forEach(sn=>Vt.remove(sn));for(const sn in vt)vt.hasOwnProperty(sn)&&ve(Ft,sn,vt[sn])})})(),z.length>0&&(oi?(kn.forEach(ae=>{const Je=ae.animate(z,{id:Gn,delay:It(),duration:fe(),easing:ge(),iterations:$e(),fill:jt(),direction:$t()});Je.pause(),nn.push(Je)}),nn.length>0&&(nn[0].onfinish=()=>{Kt()})):An(ae)),Se=!0},Er=ae=>{if(ae=Math.min(Math.max(ae,0),.9999),oi)nn.forEach(Je=>{Je.currentTime=Je.effect.getComputedTiming().delay+fe()*ae,Je.pause()});else{const Je=`-${fe()*ae}ms`;kn.forEach(vt=>{z.length>0&&(ve(vt,"animation-delay",Je),ve(vt,"animation-play-state","paused"))})}},$n=ae=>{nn.forEach(Je=>{Je.effect.updateTiming({delay:It(),duration:fe(),easing:ge(),iterations:$e(),fill:jt(),direction:$t()})}),void 0!==ae&&Er(ae)},pr=(ae=!0,Je)=>{(0,u.r)(()=>{kn.forEach(vt=>{ve(vt,"animation-name",Wt||null),ve(vt,"animation-duration",`${fe()}ms`),ve(vt,"animation-timing-function",ge()),ve(vt,"animation-delay",void 0!==Je?`-${Je*fe()}ms`:`${It()}ms`),ve(vt,"animation-fill-mode",jt()||null),ve(vt,"animation-direction",$t()||null);const Ft=$e()===1/0?"infinite":$e().toString();ve(vt,"animation-iteration-count",Ft),ae&&ve(vt,"animation-name",`${Wt}-alt`),(0,u.r)(()=>{ve(vt,"animation-name",Wt||null)})})})},mr=(ae=!1,Je=!0,vt)=>(ae&&dn.forEach(Ft=>{Ft.update(ae,Je,vt)}),oi?$n(vt):pr(Je,vt),Yt),gs=()=>{Se&&(oi?nn.forEach(ae=>{ae.pause()}):kn.forEach(ae=>{ve(ae,"animation-play-state","paused")}),Ct=!0)},Wr=()=>{Ae=void 0,Kt()},pn=()=>{Ae&&clearTimeout(Ae)},te=ae=>new Promise(Je=>{null!=ae&&ae.sync&&(we=!0,Vn(()=>we=!1,{oneTimeCallback:!0})),Se||lr(),Ue&&(oi?(Er(0),$n()):pr(),Ue=!1),Bt&&(_t=dn.length+1,Bt=!1),Vn(()=>Je(),{oneTimeCallback:!0}),dn.forEach(vt=>{vt.play()}),oi?(nn.forEach(ae=>{ae.play()}),(0===z.length||0===kn.length)&&Kt()):(()=>{if(pn(),(0,u.r)(()=>{kn.forEach(ae=>{z.length>0&&ve(ae,"animation-play-state","running")})}),0===z.length||0===kn.length)Kt();else{const ae=It()||0,Je=fe()||0,vt=$e()||1;isFinite(vt)&&(Ae=setTimeout(Wr,ae+Je*vt+100)),((De,ye)=>{let ue;const rt={passive:!0},et=He=>{De===He.target&&(ue&&ue(),pn(),(0,u.r)(()=>{kn.forEach(ae=>{Ne(ae,"animation-duration"),Ne(ae,"animation-delay"),Ne(ae,"animation-play-state")}),(0,u.r)(Kt)}))};De&&(De.addEventListener("webkitAnimationEnd",et,rt),De.addEventListener("animationend",et,rt),ue=()=>{De.removeEventListener("webkitAnimationEnd",et,rt),De.removeEventListener("animationend",et,rt)})})(kn[0])}})(),Ct=!1}),Ze=(ae,Je)=>{const vt=z[0];return void 0===vt||void 0!==vt.offset&&0!==vt.offset?z=[{offset:0,[ae]:Je},...z]:vt[ae]=Je,Yt};return Yt={parentAnimation:it,elements:kn,childAnimations:dn,id:Gn,animationFinish:Kt,from:Ze,to:(ae,Je)=>{const vt=z[z.length-1];return void 0===vt||void 0!==vt.offset&&1!==vt.offset?z=[...z,{offset:1,[ae]:Je}]:vt[ae]=Je,Yt},fromTo:(ae,Je,vt)=>Ze(ae,Je).to(ae,vt),parent:ae=>(it=ae,Yt),play:te,pause:()=>(dn.forEach(ae=>{ae.pause()}),gs(),Yt),stop:()=>{dn.forEach(ae=>{ae.stop()}),Se&&(Jt(),Se=!1),ct=!1,we=!1,Bt=!0,Ie=void 0,at=void 0,Ye=void 0,_t=0,Ue=!1,Ke=!0,Ct=!1},destroy:ae=>(dn.forEach(Je=>{Je.destroy(ae)}),(ae=>{Jt(),ae&&_r()})(ae),kn.length=0,dn.length=0,z.length=0,Kn.length=0,er.length=0,Se=!1,Bt=!0,Yt),keyframes:ae=>{const Je=z!==ae;return z=ae,Je&&(ae=>{oi?Ai().forEach(Je=>{if(Je.effect.setKeyframes)Je.effect.setKeyframes(ae);else{const vt=new KeyframeEffect(Je.effect.target,ae,Je.effect.getTiming());Je.effect=vt}}):An()})(z),Yt},addAnimation:ae=>{if(null!=ae)if(Array.isArray(ae))for(const Je of ae)Je.parent(Yt),dn.push(Je);else ae.parent(Yt),dn.push(ae);return Yt},addElement:ae=>{if(null!=ae)if(1===ae.nodeType)kn.push(ae);else if(ae.length>=0)for(let Je=0;Je<ae.length;Je++)kn.push(ae[Je]);else console.error("Invalid addElement value");return Yt},update:mr,fill:ae=>(et=ae,mr(!0),Yt),direction:ae=>(He=ae,mr(!0),Yt),iterations:ae=>(pt=ae,mr(!0),Yt),duration:ae=>(!oi&&0===ae&&(ae=1),ue=ae,mr(!0),Yt),easing:ae=>(rt=ae,mr(!0),Yt),delay:ae=>(ye=ae,mr(!0),Yt),getWebAnimations:Ai,getKeyframes:()=>z,getFill:jt,getDirection:$t,getDelay:It,getIterations:$e,getEasing:ge,getDuration:fe,afterAddRead:ae=>(Sn.push(ae),Yt),afterAddWrite:ae=>(vr.push(ae),Yt),afterClearStyles:(ae=[])=>{for(const Je of ae)ze[Je]="";return Yt},afterStyles:(ae={})=>(ze=ae,Yt),afterRemoveClass:ae=>(tt=lt(tt,ae),Yt),afterAddClass:ae=>(nt=lt(nt,ae),Yt),beforeAddRead:ae=>(Pr.push(ae),Yt),beforeAddWrite:ae=>(yr.push(ae),Yt),beforeClearStyles:(ae=[])=>{for(const Je of ae)qe[Je]="";return Yt},beforeStyles:(ae={})=>(qe=ae,Yt),beforeRemoveClass:ae=>(Te=lt(Te,ae),Yt),beforeAddClass:ae=>(Pe=lt(Pe,ae),Yt),onFinish:Vn,isRunning:()=>0!==_t&&!Ct,progressStart:(ae=!1,Je)=>(dn.forEach(vt=>{vt.progressStart(ae,Je)}),gs(),ct=ae,Se||lr(),mr(!1,!0,Je),Yt),progressStep:ae=>(dn.forEach(Je=>{Je.progressStep(ae)}),Er(ae),Yt),progressEnd:(ae,Je,vt)=>(ct=!1,dn.forEach(Ft=>{Ft.progressEnd(ae,Je,vt)}),void 0!==vt&&(at=vt),Ue=!1,Ke=!0,0===ae?(Ie="reverse"===$t()?"normal":"reverse","reverse"===Ie&&(Ke=!1),oi?(mr(),Er(1-Je)):(Ye=(1-Je)*fe()*-1,mr(!1,!1))):1===ae&&(oi?(mr(),Er(Je)):(Ye=Je*fe()*-1,mr(!1,!1))),void 0!==ae&&(Vn(()=>{at=void 0,Ie=void 0,Ye=void 0},{oneTimeCallback:!0}),it||te()),Yt)}}},5820:(yn,Et,V)=>{"use strict";V.d(Et,{E:()=>me,a:()=>u,s:()=>Ne});const u=ce=>{try{if(ce instanceof ve)return ce.value;if(!xe()||"string"!=typeof ce||""===ce)return ce;if(ce.includes("onload="))return"";const he=document.createDocumentFragment(),Re=document.createElement("div");he.appendChild(Re),Re.innerHTML=ce,ke.forEach(De=>{const ye=he.querySelectorAll(De);for(let ue=ye.length-1;ue>=0;ue--){const rt=ye[ue];rt.parentNode?rt.parentNode.removeChild(rt):he.removeChild(rt);const pt=W(rt);for(let et=0;et<pt.length;et++)Q(pt[et])}});const Ve=W(he);for(let De=0;De<Ve.length;De++)Q(Ve[De]);const lt=document.createElement("div");lt.appendChild(he);const At=lt.querySelector("div");return null!==At?At.innerHTML:lt.innerHTML}catch(he){return console.error(he),""}},Q=ce=>{if(ce.nodeType&&1!==ce.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ce.attributes instanceof NamedNodeMap))return void ce.remove();for(let Re=ce.attributes.length-1;Re>=0;Re--){const Ve=ce.attributes.item(Re),lt=Ve.name;if(!Oe.includes(lt.toLowerCase())){ce.removeAttribute(lt);continue}const At=Ve.value,De=ce[lt];(null!=At&&At.toLowerCase().includes("javascript:")||null!=De&&De.toLowerCase().includes("javascript:"))&&ce.removeAttribute(lt)}const he=W(ce);for(let Re=0;Re<he.length;Re++)Q(he[Re])},W=ce=>null!=ce.children?ce.children:ce.childNodes,xe=()=>{var ce;const he=window,Re=null===(ce=null==he?void 0:he.Ionic)||void 0===ce?void 0:ce.config;return!Re||(Re.get?Re.get("sanitizerEnabled",!0):!0===Re.sanitizerEnabled||void 0===Re.sanitizerEnabled)},Oe=["class","id","href","src","name","slot"],ke=["script","style","iframe","meta","link","object","embed"];class ve{constructor(he){this.value=he}}const Ne=ce=>{const he=window,Re=he.Ionic;if(!Re||!Re.config||"Object"===Re.config.constructor.name)return he.Ionic=he.Ionic||{},he.Ionic.config=Object.assign(Object.assign({},he.Ionic.config),ce),he.Ionic.config},me=!0},4349:(yn,Et,V)=>{"use strict";V.d(Et,{G:()=>Oe});class Q{constructor(ve,Ne,je,me,ce){this.id=Ne,this.name=je,this.disableScroll=ce,this.priority=1e6*me+Ne,this.ctrl=ve}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ve=this.ctrl.capture(this.name,this.id,this.priority);return ve&&this.disableScroll&&this.ctrl.disableScroll(this.id),ve}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class W{constructor(ve,Ne,je,me){this.id=Ne,this.disable=je,this.disableScroll=me,this.ctrl=ve}block(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.disableGesture(ve,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.enableGesture(ve,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const xe="backdrop-no-scroll",Oe=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ve){var Ne;return new Q(this,this.newID(),ve.name,null!==(Ne=ve.priority)&&void 0!==Ne?Ne:0,!!ve.disableScroll)}createBlocker(ve={}){return new W(this,this.newID(),ve.disable,!!ve.disableScroll)}start(ve,Ne,je){return this.canStart(ve)?(this.requestedStart.set(Ne,je),!0):(this.requestedStart.delete(Ne),!1)}capture(ve,Ne,je){if(!this.start(ve,Ne,je))return!1;const me=this.requestedStart;let ce=-1e4;if(me.forEach(he=>{ce=Math.max(ce,he)}),ce===je){this.capturedId=Ne,me.clear();const he=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ve}});return document.dispatchEvent(he),!0}return me.delete(Ne),!1}release(ve){this.requestedStart.delete(ve),this.capturedId===ve&&(this.capturedId=void 0)}disableGesture(ve,Ne){let je=this.disabledGestures.get(ve);void 0===je&&(je=new Set,this.disabledGestures.set(ve,je)),je.add(Ne)}enableGesture(ve,Ne){const je=this.disabledGestures.get(ve);void 0!==je&&je.delete(Ne)}disableScroll(ve){this.disabledScroll.add(ve),1===this.disabledScroll.size&&document.body.classList.add(xe)}enableScroll(ve){this.disabledScroll.delete(ve),0===this.disabledScroll.size&&document.body.classList.remove(xe)}canStart(ve){return!(void 0!==this.capturedId||this.isDisabled(ve))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ve){const Ne=this.disabledGestures.get(ve);return!!(Ne&&Ne.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(yn,Et,V)=>{"use strict";V.r(Et),V.d(Et,{MENU_BACK_BUTTON_PRIORITY:()=>Oe,OVERLAY_BACK_BUTTON_PRIORITY:()=>xe,blockHardwareBackButton:()=>Q,startHardwareBackButton:()=>W});var u=V(5861);const Q=()=>{document.addEventListener("backbutton",()=>{})},W=()=>{const ke=document;let ve=!1;ke.addEventListener("backbutton",()=>{if(ve)return;let Ne=0,je=[];const me=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Re,Ve){je.push({priority:Re,handler:Ve,id:Ne++})}}});ke.dispatchEvent(me);const ce=function(){var Re=(0,u.Z)(function*(Ve){try{if(null!=Ve&&Ve.handler){const lt=Ve.handler(he);null!=lt&&(yield lt)}}catch(lt){console.error(lt)}});return function(lt){return Re.apply(this,arguments)}}(),he=()=>{if(je.length>0){let Re={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};je.forEach(Ve=>{Ve.priority>=Re.priority&&(Re=Ve)}),ve=!0,je=je.filter(Ve=>Ve.id!==Re.id),ce(Re).then(()=>ve=!1)}};he()})},xe=100,Oe=99},5730:(yn,Et,V)=>{"use strict";V.d(Et,{a:()=>ve,b:()=>Ne,c:()=>W,d:()=>Ve,e:()=>lt,f:()=>Re,g:()=>je,h:()=>pt,i:()=>ke,j:()=>xe,k:()=>he,l:()=>At,m:()=>ce,n:()=>De,o:()=>rt,p:()=>ue,q:()=>et,r:()=>me,s:()=>He,t:()=>u,u:()=>ye});const u=(z,Pe=0)=>new Promise(Te=>{Q(z,Pe,Te)}),Q=(z,Pe=0,Te)=>{let Se,it;const qe={passive:!0},tt=()=>{Se&&Se()},ze=_t=>{(void 0===_t||z===_t.target)&&(tt(),Te(_t))};return z&&(z.addEventListener("webkitTransitionEnd",ze,qe),z.addEventListener("transitionend",ze,qe),it=setTimeout(ze,Pe+500),Se=()=>{it&&(clearTimeout(it),it=void 0),z.removeEventListener("webkitTransitionEnd",ze,qe),z.removeEventListener("transitionend",ze,qe)}),tt},W=(z,Pe)=>{z.componentOnReady?z.componentOnReady().then(Te=>Pe(Te)):me(()=>Pe(z))},xe=(z,Pe=[])=>{const Te={};return Pe.forEach(Se=>{z.hasAttribute(Se)&&(null!==z.getAttribute(Se)&&(Te[Se]=z.getAttribute(Se)),z.removeAttribute(Se))}),Te},Oe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ke=(z,Pe)=>{let Te=Oe;return Pe&&Pe.length>0&&(Te=Te.filter(Se=>!Pe.includes(Se))),xe(z,Te)},ve=(z,Pe,Te,Se)=>{var it;if(typeof window<"u"){const qe=window,nt=null===(it=null==qe?void 0:qe.Ionic)||void 0===it?void 0:it.config;if(nt){const tt=nt.get("_ael");if(tt)return tt(z,Pe,Te,Se);if(nt._ael)return nt._ael(z,Pe,Te,Se)}}return z.addEventListener(Pe,Te,Se)},Ne=(z,Pe,Te,Se)=>{var it;if(typeof window<"u"){const qe=window,nt=null===(it=null==qe?void 0:qe.Ionic)||void 0===it?void 0:it.config;if(nt){const tt=nt.get("_rel");if(tt)return tt(z,Pe,Te,Se);if(nt._rel)return nt._rel(z,Pe,Te,Se)}}return z.removeEventListener(Pe,Te,Se)},je=(z,Pe=z)=>z.shadowRoot||Pe,me=z=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(z):"function"==typeof requestAnimationFrame?requestAnimationFrame(z):setTimeout(z),ce=z=>!!z.shadowRoot&&!!z.attachShadow,he=z=>{const Pe=z.closest("ion-item");return Pe?Pe.querySelector("ion-label"):null},Re=z=>{if(z.focus(),z.classList.contains("ion-focusable")){const Pe=z.closest("ion-app");Pe&&Pe.setFocus([z])}},Ve=(z,Pe)=>{let Te;const Se=z.getAttribute("aria-labelledby"),it=z.id;let qe=null!==Se&&""!==Se.trim()?Se:Pe+"-lbl",nt=null!==Se&&""!==Se.trim()?document.getElementById(Se):he(z);return nt?(null===Se&&(nt.id=qe),Te=nt.textContent,nt.setAttribute("aria-hidden","true")):""!==it.trim()&&(nt=document.querySelector(`label[for="${it}"]`),nt&&(""!==nt.id?qe=nt.id:nt.id=qe=`${it}-lbl`,Te=nt.textContent)),{label:nt,labelId:qe,labelText:Te}},lt=(z,Pe,Te,Se,it)=>{if(z||ce(Pe)){let qe=Pe.querySelector("input.aux-input");qe||(qe=Pe.ownerDocument.createElement("input"),qe.type="hidden",qe.classList.add("aux-input"),Pe.appendChild(qe)),qe.disabled=it,qe.name=Te,qe.value=Se||""}},At=(z,Pe,Te)=>Math.max(z,Math.min(Pe,Te)),De=(z,Pe)=>{if(!z){const Te="ASSERT: "+Pe;throw console.error(Te),new Error(Te)}},ye=z=>z.timeStamp||Date.now(),ue=z=>{if(z){const Pe=z.changedTouches;if(Pe&&Pe.length>0){const Te=Pe[0];return{x:Te.clientX,y:Te.clientY}}if(void 0!==z.pageX)return{x:z.pageX,y:z.pageY}}return{x:0,y:0}},rt=z=>{const Pe="rtl"===document.dir;switch(z){case"start":return Pe;case"end":return!Pe;default:throw new Error(`"${z}" is not a valid value for [side]. Use "start" or "end" instead.`)}},pt=(z,Pe)=>{const Te=z._original||z;return{_original:z,emit:et(Te.emit.bind(Te),Pe)}},et=(z,Pe=0)=>{let Te;return(...Se)=>{clearTimeout(Te),Te=setTimeout(z,Pe,...Se)}},He=(z,Pe)=>{if(null!=z||(z={}),null!=Pe||(Pe={}),z===Pe)return!0;const Te=Object.keys(z);if(Te.length!==Object.keys(Pe).length)return!1;for(const Se of Te)if(!(Se in Pe)||z[Se]!==Pe[Se])return!1;return!0}},1843:(yn,Et,V)=>{"use strict";V.d(Et,{L:()=>xe,a:()=>Oe,b:()=>ke,c:()=>ve,d:()=>Ne,e:()=>Pe,g:()=>it,l:()=>He,s:()=>Te,t:()=>ce});var u=V(5861),Q=V(1308),W=V(5730);const xe="ionViewWillEnter",Oe="ionViewDidEnter",ke="ionViewWillLeave",ve="ionViewDidLeave",Ne="ionViewWillUnload",ce=qe=>new Promise((nt,tt)=>{(0,Q.c)(()=>{he(qe),Re(qe).then(ze=>{ze.animation&&ze.animation.destroy(),Ve(qe),nt(ze)},ze=>{Ve(qe),tt(ze)})})}),he=qe=>{const nt=qe.enteringEl,tt=qe.leavingEl;Se(nt,tt,qe.direction),qe.showGoBack?nt.classList.add("can-go-back"):nt.classList.remove("can-go-back"),Te(nt,!1),nt.style.setProperty("pointer-events","none"),tt&&(Te(tt,!1),tt.style.setProperty("pointer-events","none"))},Re=function(){var qe=(0,u.Z)(function*(nt){const tt=yield lt(nt);return tt&&Q.B.isBrowser?At(tt,nt):De(nt)});return function(tt){return qe.apply(this,arguments)}}(),Ve=qe=>{const nt=qe.enteringEl,tt=qe.leavingEl;nt.classList.remove("ion-page-invisible"),nt.style.removeProperty("pointer-events"),void 0!==tt&&(tt.classList.remove("ion-page-invisible"),tt.style.removeProperty("pointer-events"))},lt=function(){var qe=(0,u.Z)(function*(nt){return nt.leavingEl&&nt.animated&&0!==nt.duration?nt.animationBuilder?nt.animationBuilder:"ios"===nt.mode?(yield Promise.resolve().then(V.bind(V,6439))).iosTransitionAnimation:(yield Promise.resolve().then(V.bind(V,7838))).mdTransitionAnimation:void 0});return function(tt){return qe.apply(this,arguments)}}(),At=function(){var qe=(0,u.Z)(function*(nt,tt){yield ye(tt,!0);const ze=nt(tt.baseEl,tt);pt(tt.enteringEl,tt.leavingEl);const _t=yield rt(ze,tt);return tt.progressCallback&&tt.progressCallback(void 0),_t&&et(tt.enteringEl,tt.leavingEl),{hasCompleted:_t,animation:ze}});return function(tt,ze){return qe.apply(this,arguments)}}(),De=function(){var qe=(0,u.Z)(function*(nt){const tt=nt.enteringEl,ze=nt.leavingEl;return yield ye(nt,!1),pt(tt,ze),et(tt,ze),{hasCompleted:!0}});return function(tt){return qe.apply(this,arguments)}}(),ye=function(){var qe=(0,u.Z)(function*(nt,tt){const _t=(void 0!==nt.deepWait?nt.deepWait:tt)?[Pe(nt.enteringEl),Pe(nt.leavingEl)]:[z(nt.enteringEl),z(nt.leavingEl)];yield Promise.all(_t),yield ue(nt.viewIsReady,nt.enteringEl)});return function(tt,ze){return qe.apply(this,arguments)}}(),ue=function(){var qe=(0,u.Z)(function*(nt,tt){nt&&(yield nt(tt))});return function(tt,ze){return qe.apply(this,arguments)}}(),rt=(qe,nt)=>{const tt=nt.progressCallback,ze=new Promise(_t=>{qe.onFinish(ct=>_t(1===ct))});return tt?(qe.progressStart(!0),tt(qe)):qe.play(),ze},pt=(qe,nt)=>{He(nt,ke),He(qe,xe)},et=(qe,nt)=>{He(qe,Oe),He(nt,ve)},He=(qe,nt)=>{if(qe){const tt=new CustomEvent(nt,{bubbles:!1,cancelable:!1});qe.dispatchEvent(tt)}},z=qe=>qe?new Promise(nt=>(0,W.c)(qe,nt)):Promise.resolve(),Pe=function(){var qe=(0,u.Z)(function*(nt){const tt=nt;if(tt){if(null!=tt.componentOnReady){if(null!=(yield tt.componentOnReady()))return}else if(null!=tt.__registerHost)return void(yield new Promise(_t=>(0,W.r)(_t)));yield Promise.all(Array.from(tt.children).map(Pe))}});return function(tt){return qe.apply(this,arguments)}}(),Te=(qe,nt)=>{nt?(qe.setAttribute("aria-hidden","true"),qe.classList.add("ion-page-hidden")):(qe.hidden=!1,qe.removeAttribute("aria-hidden"),qe.classList.remove("ion-page-hidden"))},Se=(qe,nt,tt)=>{void 0!==qe&&(qe.style.zIndex="back"===tt?"99":"101"),void 0!==nt&&(nt.style.zIndex="100")},it=qe=>qe.classList.contains("ion-page")?qe:qe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||qe},6369:(yn,Et,V)=>{"use strict";V.d(Et,{m:()=>ce});var u=V(5861),Q=V(7593),W=V(5730),xe=V(5179),Oe=V(181);const ke=he=>(0,Oe.c)().duration(he?400:300),ve=he=>{let Re,Ve;const lt=he.width+8,At=(0,Oe.c)(),De=(0,Oe.c)();he.isEndSide?(Re=lt+"px",Ve="0px"):(Re=-lt+"px",Ve="0px"),At.addElement(he.menuInnerEl).fromTo("transform",`translateX(${Re})`,`translateX(${Ve})`);const ue="ios"===(0,xe.b)(he),rt=ue?.2:.25;return De.addElement(he.backdropEl).fromTo("opacity",.01,rt),ke(ue).addAnimation([At,De])},Ne=he=>{let Re,Ve;const lt=(0,xe.b)(he),At=he.width;he.isEndSide?(Re=-At+"px",Ve=At+"px"):(Re=At+"px",Ve=-At+"px");const De=(0,Oe.c)().addElement(he.menuInnerEl).fromTo("transform",`translateX(${Ve})`,"translateX(0px)"),ye=(0,Oe.c)().addElement(he.contentEl).fromTo("transform","translateX(0px)",`translateX(${Re})`),ue=(0,Oe.c)().addElement(he.backdropEl).fromTo("opacity",.01,.32);return ke("ios"===lt).addAnimation([De,ye,ue])},je=he=>{const Re=(0,xe.b)(he),Ve=he.width*(he.isEndSide?-1:1)+"px",lt=(0,Oe.c)().addElement(he.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ve})`);return ke("ios"===Re).addAnimation(lt)},ce=(()=>{const he=new Map,Re=[],Ve=function(){var Ae=(0,u.Z)(function*(Ie){const at=yield pt(Ie);return!!at&&at.open()});return function(at){return Ae.apply(this,arguments)}}(),lt=function(){var Ae=(0,u.Z)(function*(Ie){const at=yield void 0!==Ie?pt(Ie):et();return void 0!==at&&at.close()});return function(at){return Ae.apply(this,arguments)}}(),At=function(){var Ae=(0,u.Z)(function*(Ie){const at=yield pt(Ie);return!!at&&at.toggle()});return function(at){return Ae.apply(this,arguments)}}(),De=function(){var Ae=(0,u.Z)(function*(Ie,at){const Ye=yield pt(at);return Ye&&(Ye.disabled=!Ie),Ye});return function(at,Ye){return Ae.apply(this,arguments)}}(),ye=function(){var Ae=(0,u.Z)(function*(Ie,at){const Ye=yield pt(at);return Ye&&(Ye.swipeGesture=Ie),Ye});return function(at,Ye){return Ae.apply(this,arguments)}}(),ue=function(){var Ae=(0,u.Z)(function*(Ie){if(null!=Ie){const at=yield pt(Ie);return void 0!==at&&at.isOpen()}return void 0!==(yield et())});return function(at){return Ae.apply(this,arguments)}}(),rt=function(){var Ae=(0,u.Z)(function*(Ie){const at=yield pt(Ie);return!!at&&!at.disabled});return function(at){return Ae.apply(this,arguments)}}(),pt=function(){var Ae=(0,u.Z)(function*(Ie){return yield we(),"start"===Ie||"end"===Ie?ct(Ke=>Ke.side===Ie&&!Ke.disabled)||ct(Ke=>Ke.side===Ie):null!=Ie?ct(Ye=>Ye.menuId===Ie):ct(Ye=>!Ye.disabled)||(Re.length>0?Re[0].el:void 0)});return function(at){return Ae.apply(this,arguments)}}(),et=function(){var Ae=(0,u.Z)(function*(){return yield we(),tt()});return function(){return Ae.apply(this,arguments)}}(),He=function(){var Ae=(0,u.Z)(function*(){return yield we(),ze()});return function(){return Ae.apply(this,arguments)}}(),z=function(){var Ae=(0,u.Z)(function*(){return yield we(),_t()});return function(){return Ae.apply(this,arguments)}}(),Pe=(Ae,Ie)=>{he.set(Ae,Ie)},it=Ae=>{const Ie=Ae.side;Re.filter(at=>at.side===Ie&&at!==Ae).forEach(at=>at.disabled=!0)},qe=function(){var Ae=(0,u.Z)(function*(Ie,at,Ye){if(_t())return!1;if(at){const Ke=yield et();Ke&&Ie.el!==Ke&&(yield Ke.setOpen(!1,!1))}return Ie._setOpen(at,Ye)});return function(at,Ye,Ke){return Ae.apply(this,arguments)}}(),tt=()=>ct(Ae=>Ae._isOpen),ze=()=>Re.map(Ae=>Ae.el),_t=()=>Re.some(Ae=>Ae.isAnimating),ct=Ae=>{const Ie=Re.find(Ae);if(void 0!==Ie)return Ie.el},we=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ae=>new Promise(Ie=>(0,W.c)(Ae,Ie))));return Pe("reveal",je),Pe("push",Ne),Pe("overlay",ve),typeof document<"u"&&document.addEventListener("ionBackButton",Ae=>{const Ie=tt();Ie&&Ae.detail.register(Q.MENU_BACK_BUTTON_PRIORITY,()=>Ie.close())}),{registerAnimation:Pe,get:pt,getMenus:He,getOpen:et,isEnabled:rt,swipeGesture:ye,isAnimating:z,isOpen:ue,enable:De,toggle:At,close:lt,open:Ve,_getOpenSync:tt,_createAnimation:(Ae,Ie)=>{const at=he.get(Ae);if(!at)throw new Error("animation not registered");return at(Ie)},_register:Ae=>{Re.indexOf(Ae)<0&&(Ae.disabled||it(Ae),Re.push(Ae))},_unregister:Ae=>{const Ie=Re.indexOf(Ae);Ie>-1&&Re.splice(Ie,1)},_setOpen:qe,_setActiveMenu:it}})()},3457:(yn,Et,V)=>{"use strict";V.d(Et,{w:()=>u});const u=typeof window<"u"?window:void 0},1898:(yn,Et,V)=>{"use strict";V.r(Et),V.d(Et,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>je});var u=V(4349);const Q=(Re,Ve,lt,At)=>{const De=W(Re)?{capture:!!At.capture,passive:!!At.passive}:!!At.capture;let ye,ue;return Re.__zone_symbol__addEventListener?(ye="__zone_symbol__addEventListener",ue="__zone_symbol__removeEventListener"):(ye="addEventListener",ue="removeEventListener"),Re[ye](Ve,lt,De),()=>{Re[ue](Ve,lt,De)}},W=Re=>{if(void 0===xe)try{const Ve=Object.defineProperty({},"passive",{get:()=>{xe=!0}});Re.addEventListener("optsTest",()=>{},Ve)}catch(Ve){xe=!1}return!!xe};let xe;const ve=Re=>Re instanceof Document?Re:Re.ownerDocument,je=Re=>{let Ve=!1,lt=!1,At=!0,De=!1;const ye=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Re),ue=ye.canStart,rt=ye.onWillStart,pt=ye.onStart,et=ye.onEnd,He=ye.notCaptured,z=ye.onMove,Pe=ye.threshold,Te=ye.passive,Se=ye.blurOnStart,it={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},qe=((Re,Ve,lt)=>{const At=lt*(Math.PI/180),De="x"===Re,ye=Math.cos(At),ue=Ve*Ve;let rt=0,pt=0,et=!1,He=0;return{start(z,Pe){rt=z,pt=Pe,He=0,et=!0},detect(z,Pe){if(!et)return!1;const Te=z-rt,Se=Pe-pt,it=Te*Te+Se*Se;if(it<ue)return!1;const qe=Math.sqrt(it),nt=(De?Te:Se)/qe;return He=nt>ye?1:nt<-ye?-1:0,et=!1,!0},isGesture:()=>0!==He,getDirection:()=>He}})(ye.direction,ye.threshold,ye.maxAngle),nt=u.G.createGesture({name:Re.gestureName,priority:Re.gesturePriority,disableScroll:Re.disableScroll}),_t=()=>{Ve&&(De=!1,z&&z(it))},ct=()=>!!nt.capture()&&(Ve=!0,At=!1,it.startX=it.currentX,it.startY=it.currentY,it.startTime=it.currentTime,rt?rt(it).then(Ae):Ae(),!0),Ae=()=>{Se&&(()=>{if(typeof document<"u"){const Ue=document.activeElement;null!=Ue&&Ue.blur&&Ue.blur()}})(),pt&&pt(it),At=!0},Ie=()=>{Ve=!1,lt=!1,De=!1,At=!0,nt.release()},at=Ue=>{const Bt=Ve,Wt=At;if(Ie(),Wt){if(me(it,Ue),Bt)return void(et&&et(it));He&&He(it)}},Ye=((Re,Ve,lt,At,De)=>{let ye,ue,rt,pt,et,He,z,Pe=0;const Te=we=>{Pe=Date.now()+2e3,Ve(we)&&(!ue&&lt&&(ue=Q(Re,"touchmove",lt,De)),rt||(rt=Q(we.target,"touchend",it,De)),pt||(pt=Q(we.target,"touchcancel",it,De)))},Se=we=>{Pe>Date.now()||Ve(we)&&(!He&&lt&&(He=Q(ve(Re),"mousemove",lt,De)),z||(z=Q(ve(Re),"mouseup",qe,De)))},it=we=>{nt(),At&&At(we)},qe=we=>{tt(),At&&At(we)},nt=()=>{ue&&ue(),rt&&rt(),pt&&pt(),ue=rt=pt=void 0},tt=()=>{He&&He(),z&&z(),He=z=void 0},ze=()=>{nt(),tt()},_t=(we=!0)=>{we?(ye||(ye=Q(Re,"touchstart",Te,De)),et||(et=Q(Re,"mousedown",Se,De))):(ye&&ye(),et&&et(),ye=et=void 0,ze())};return{enable:_t,stop:ze,destroy:()=>{_t(!1),At=lt=Ve=void 0}}})(ye.el,Ue=>{const Bt=he(Ue);return!(lt||!At||(ce(Ue,it),it.startX=it.currentX,it.startY=it.currentY,it.startTime=it.currentTime=Bt,it.velocityX=it.velocityY=it.deltaX=it.deltaY=0,it.event=Ue,ue&&!1===ue(it))||(nt.release(),!nt.start()))&&(lt=!0,0===Pe?ct():(qe.start(it.startX,it.startY),!0))},Ue=>{Ve?!De&&At&&(De=!0,me(it,Ue),requestAnimationFrame(_t)):(me(it,Ue),qe.detect(it.currentX,it.currentY)&&(!qe.isGesture()||!ct())&&Ke())},at,{capture:!1,passive:Te}),Ke=()=>{Ie(),Ye.stop(),He&&He(it)};return{enable(Ue=!0){Ue||(Ve&&at(void 0),Ie()),Ye.enable(Ue)},destroy(){nt.destroy(),Ye.destroy()}}},me=(Re,Ve)=>{if(!Ve)return;const lt=Re.currentX,At=Re.currentY,De=Re.currentTime;ce(Ve,Re);const ye=Re.currentX,ue=Re.currentY,pt=(Re.currentTime=he(Ve))-De;if(pt>0&&pt<100){const He=(ue-At)/pt;Re.velocityX=(ye-lt)/pt*.7+.3*Re.velocityX,Re.velocityY=.7*He+.3*Re.velocityY}Re.deltaX=ye-Re.startX,Re.deltaY=ue-Re.startY,Re.event=Ve},ce=(Re,Ve)=>{let lt=0,At=0;if(Re){const De=Re.changedTouches;if(De&&De.length>0){const ye=De[0];lt=ye.clientX,At=ye.clientY}else void 0!==Re.pageX&&(lt=Re.pageX,At=Re.pageY)}Ve.currentX=lt,Ve.currentY=At},he=Re=>Re.timeStamp||Date.now()},1308:(yn,Et,V)=>{"use strict";V.d(Et,{B:()=>Zi,H:()=>kn,a:()=>Ke,b:()=>Rt,c:()=>Ir,e:()=>Yn,f:()=>li,g:()=>Ue,h:()=>Kn,i:()=>or,j:()=>$t,k:()=>bt,p:()=>At,r:()=>jn,s:()=>Ve});var u=V(5861);let W,xe,Oe,ke=!1,ve=!1,Ne=!1,je=!1,me=!1;const ce=typeof window<"u"?window:{},he=ce.document||{head:{}},Re={$flags$:0,$resourcesUrl$:"",jmp:te=>te(),raf:te=>requestAnimationFrame(te),ael:(te,pe,Ze,ft)=>te.addEventListener(pe,Ze,ft),rel:(te,pe,Ze,ft)=>te.removeEventListener(pe,Ze,ft),ce:(te,pe)=>new CustomEvent(te,pe)},Ve=te=>{Object.assign(Re,te)},At=te=>Promise.resolve(te),De=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(te){}return!1})(),ye=(te,pe,Ze,ft)=>{Ze&&Ze.map(([Nt,ae,Je])=>{const vt=rt(te,Nt),Ft=ue(pe,Je),Vt=pt(Nt);Re.ael(vt,ae,Ft,Vt),(pe.$rmListeners$=pe.$rmListeners$||[]).push(()=>Re.rel(vt,ae,Ft,Vt))})},ue=(te,pe)=>Ze=>{try{256&te.$flags$?te.$lazyInstance$[pe](Ze):(te.$queuedListeners$=te.$queuedListeners$||[]).push([pe,Ze])}catch(ft){$n(ft)}},rt=(te,pe)=>4&pe?he:8&pe?ce:16&pe?he.body:te,pt=te=>0!=(2&te),Te="s-id",Se="sty-id",nt="http://www.w3.org/1999/xlink",_t=new WeakMap,ct=(te,pe,Ze)=>{let ft=jr.get(te);De&&Ze?(ft=ft||new CSSStyleSheet,"string"==typeof ft?ft=pe:ft.replaceSync(pe)):ft=pe,jr.set(te,ft)},we=(te,pe,Ze,ft)=>{let Nt=Ie(pe,Ze);const ae=jr.get(Nt);if(te=11===te.nodeType?te:he,ae)if("string"==typeof ae){let vt,Je=_t.get(te=te.head||te);Je||_t.set(te,Je=new Set),Je.has(Nt)||(te.host&&(vt=te.querySelector(`[${Se}="${Nt}"]`))?vt.innerHTML=ae:(vt=he.createElement("style"),vt.innerHTML=ae,te.insertBefore(vt,te.querySelector("link"))),Je&&Je.add(Nt))}else te.adoptedStyleSheets.includes(ae)||(te.adoptedStyleSheets=[...te.adoptedStyleSheets,ae]);return Nt},Ie=(te,pe)=>"sc-"+(pe&&32&te.$flags$?te.$tagName$+"-"+pe:te.$tagName$),at=te=>te.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ke=te=>Xr.push(te),Ue=te=>An(te).$modeName$,Bt={},Gn=te=>"object"==(te=typeof te)||"function"===te,Kn=(te,pe,...Ze)=>{let ft=null,Nt=null,ae=null,Je=!1,vt=!1;const Ft=[],Vt=Pn=>{for(let bn=0;bn<Pn.length;bn++)ft=Pn[bn],Array.isArray(ft)?Vt(ft):null!=ft&&"boolean"!=typeof ft&&((Je="function"!=typeof te&&!Gn(ft))&&(ft=String(ft)),Je&&vt?Ft[Ft.length-1].$text$+=ft:Ft.push(Je?er(null,ft):ft),vt=Je)};if(Vt(Ze),pe){pe.key&&(Nt=pe.key),pe.name&&(ae=pe.name);{const Pn=pe.className||pe.class;Pn&&(pe.class="object"!=typeof Pn?Pn:Object.keys(Pn).filter(bn=>Pn[bn]).join(" "))}}if("function"==typeof te)return te(null===pe?{}:pe,Ft,hr);const sn=er(te,null);return sn.$attrs$=pe,Ft.length>0&&(sn.$children$=Ft),sn.$key$=Nt,sn.$name$=ae,sn},er=(te,pe)=>({$flags$:0,$tag$:te,$text$:pe,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),kn={},hr={forEach:(te,pe)=>te.map(Pr).forEach(pe),map:(te,pe)=>te.map(Pr).map(pe).map(yr)},Pr=te=>({vattrs:te.$attrs$,vchildren:te.$children$,vkey:te.$key$,vname:te.$name$,vtag:te.$tag$,vtext:te.$text$}),yr=te=>{if("function"==typeof te.vtag){const Ze=Object.assign({},te.vattrs);return te.vkey&&(Ze.key=te.vkey),te.vname&&(Ze.name=te.vname),Kn(te.vtag,Ze,...te.vchildren||[])}const pe=er(te.vtag,te.vtext);return pe.$attrs$=te.vattrs,pe.$children$=te.vchildren,pe.$key$=te.vkey,pe.$name$=te.vname,pe},Sn=(te,pe,Ze,ft,Nt,ae)=>{if(Ze!==ft){let Je=Er(te,pe),vt=pe.toLowerCase();if("class"===pe){const Ft=te.classList,Vt=nn(Ze),sn=nn(ft);Ft.remove(...Vt.filter(Pn=>Pn&&!sn.includes(Pn))),Ft.add(...sn.filter(Pn=>Pn&&!Vt.includes(Pn)))}else if("style"===pe){for(const Ft in Ze)(!ft||null==ft[Ft])&&(Ft.includes("-")?te.style.removeProperty(Ft):te.style[Ft]="");for(const Ft in ft)(!Ze||ft[Ft]!==Ze[Ft])&&(Ft.includes("-")?te.style.setProperty(Ft,ft[Ft]):te.style[Ft]=ft[Ft])}else if("key"!==pe)if("ref"===pe)ft&&ft(te);else if(Je||"o"!==pe[0]||"n"!==pe[1]){const Ft=Gn(ft);if((Je||Ft&&null!==ft)&&!Nt)try{if(te.tagName.includes("-"))te[pe]=ft;else{const sn=null==ft?"":ft;"list"===pe?Je=!1:(null==Ze||te[pe]!=sn)&&(te[pe]=sn)}}catch(sn){}let Vt=!1;vt!==(vt=vt.replace(/^xlink\:?/,""))&&(pe=vt,Vt=!0),null==ft||!1===ft?(!1!==ft||""===te.getAttribute(pe))&&(Vt?te.removeAttributeNS(nt,pe):te.removeAttribute(pe)):(!Je||4&ae||Nt)&&!Ft&&(ft=!0===ft?"":ft,Vt?te.setAttributeNS(nt,pe,ft):te.setAttribute(pe,ft))}else pe="-"===pe[2]?pe.slice(3):Er(ce,vt)?vt.slice(2):vt[2]+pe.slice(3),Ze&&Re.rel(te,pe,Ze,!1),ft&&Re.ael(te,pe,ft,!1)}},vr=/\s/,nn=te=>te?te.split(vr):[],ci=(te,pe,Ze,ft)=>{const Nt=11===pe.$elm$.nodeType&&pe.$elm$.host?pe.$elm$.host:pe.$elm$,ae=te&&te.$attrs$||Bt,Je=pe.$attrs$||Bt;for(ft in ae)ft in Je||Sn(Nt,ft,ae[ft],void 0,Ze,pe.$flags$);for(ft in Je)Sn(Nt,ft,ae[ft],Je[ft],Ze,pe.$flags$)},oi=(te,pe,Ze,ft)=>{const Nt=pe.$children$[Ze];let Je,vt,Ft,ae=0;if(ke||(Ne=!0,"slot"===Nt.$tag$&&(W&&ft.classList.add(W+"-s"),Nt.$flags$|=Nt.$children$?2:1)),null!==Nt.$text$)Je=Nt.$elm$=he.createTextNode(Nt.$text$);else if(1&Nt.$flags$)Je=Nt.$elm$=he.createTextNode("");else{if(je||(je="svg"===Nt.$tag$),Je=Nt.$elm$=he.createElementNS(je?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Nt.$flags$?"slot-fb":Nt.$tag$),je&&"foreignObject"===Nt.$tag$&&(je=!1),ci(null,Nt,je),(te=>null!=te)(W)&&Je["s-si"]!==W&&Je.classList.add(Je["s-si"]=W),Nt.$children$)for(ae=0;ae<Nt.$children$.length;++ae)vt=oi(te,Nt,ae,Je),vt&&Je.appendChild(vt);"svg"===Nt.$tag$?je=!1:"foreignObject"===Je.tagName&&(je=!0)}return Je["s-hn"]=Oe,3&Nt.$flags$&&(Je["s-sr"]=!0,Je["s-cr"]=xe,Je["s-sn"]=Nt.$name$||"",Ft=te&&te.$children$&&te.$children$[Ze],Ft&&Ft.$tag$===Nt.$tag$&&te.$elm$&&Nr(te.$elm$,!1)),Je},Nr=(te,pe)=>{Re.$flags$|=1;const Ze=te.childNodes;for(let ft=Ze.length-1;ft>=0;ft--){const Nt=Ze[ft];Nt["s-hn"]!==Oe&&Nt["s-ol"]&&(Vn(Nt).insertBefore(Nt,cn(Nt)),Nt["s-ol"].remove(),Nt["s-ol"]=void 0,Ne=!0),pe&&Nr(Nt,pe)}Re.$flags$&=-2},Ai=(te,pe,Ze,ft,Nt,ae)=>{let vt,Je=te["s-cr"]&&te["s-cr"].parentNode||te;for(Je.shadowRoot&&Je.tagName===Oe&&(Je=Je.shadowRoot);Nt<=ae;++Nt)ft[Nt]&&(vt=oi(null,Ze,Nt,te),vt&&(ft[Nt].$elm$=vt,Je.insertBefore(vt,cn(pe))))},dr=(te,pe,Ze,ft,Nt)=>{for(;pe<=Ze;++pe)(ft=te[pe])&&(Nt=ft.$elm$,Fr(ft),ve=!0,Nt["s-ol"]?Nt["s-ol"].remove():Nr(Nt,!0),Nt.remove())},mn=(te,pe)=>te.$tag$===pe.$tag$&&("slot"===te.$tag$?te.$name$===pe.$name$:te.$key$===pe.$key$),cn=te=>te&&te["s-ol"]||te,Vn=te=>(te["s-ol"]?te["s-ol"]:te).parentNode,Vr=(te,pe)=>{const Ze=pe.$elm$=te.$elm$,ft=te.$children$,Nt=pe.$children$,ae=pe.$tag$,Je=pe.$text$;let vt;null===Je?(je="svg"===ae||"foreignObject"!==ae&&je,"slot"===ae||ci(te,pe,je),null!==ft&&null!==Nt?((te,pe,Ze,ft)=>{let zr,xi,Nt=0,ae=0,Je=0,vt=0,Ft=pe.length-1,Vt=pe[0],sn=pe[Ft],Pn=ft.length-1,bn=ft[0],xr=ft[Pn];for(;Nt<=Ft&&ae<=Pn;)if(null==Vt)Vt=pe[++Nt];else if(null==sn)sn=pe[--Ft];else if(null==bn)bn=ft[++ae];else if(null==xr)xr=ft[--Pn];else if(mn(Vt,bn))Vr(Vt,bn),Vt=pe[++Nt],bn=ft[++ae];else if(mn(sn,xr))Vr(sn,xr),sn=pe[--Ft],xr=ft[--Pn];else if(mn(Vt,xr))("slot"===Vt.$tag$||"slot"===xr.$tag$)&&Nr(Vt.$elm$.parentNode,!1),Vr(Vt,xr),te.insertBefore(Vt.$elm$,sn.$elm$.nextSibling),Vt=pe[++Nt],xr=ft[--Pn];else if(mn(sn,bn))("slot"===Vt.$tag$||"slot"===xr.$tag$)&&Nr(sn.$elm$.parentNode,!1),Vr(sn,bn),te.insertBefore(sn.$elm$,Vt.$elm$),sn=pe[--Ft],bn=ft[++ae];else{for(Je=-1,vt=Nt;vt<=Ft;++vt)if(pe[vt]&&null!==pe[vt].$key$&&pe[vt].$key$===bn.$key$){Je=vt;break}Je>=0?(xi=pe[Je],xi.$tag$!==bn.$tag$?zr=oi(pe&&pe[ae],Ze,Je,te):(Vr(xi,bn),pe[Je]=void 0,zr=xi.$elm$),bn=ft[++ae]):(zr=oi(pe&&pe[ae],Ze,ae,te),bn=ft[++ae]),zr&&Vn(Vt.$elm$).insertBefore(zr,cn(Vt.$elm$))}Nt>Ft?Ai(te,null==ft[Pn+1]?null:ft[Pn+1].$elm$,Ze,ft,ae,Pn):ae>Pn&&dr(pe,Nt,Ft)})(Ze,ft,pe,Nt):null!==Nt?(null!==te.$text$&&(Ze.textContent=""),Ai(Ze,null,pe,Nt,0,Nt.length-1)):null!==ft&&dr(ft,0,ft.length-1),je&&"svg"===ae&&(je=!1)):(vt=Ze["s-cr"])?vt.parentNode.textContent=Je:te.$text$!==Je&&(Ze.data=Je)},Jt=te=>{const pe=te.childNodes;let Ze,ft,Nt,ae,Je,vt;for(ft=0,Nt=pe.length;ft<Nt;ft++)if(Ze=pe[ft],1===Ze.nodeType){if(Ze["s-sr"])for(Je=Ze["s-sn"],Ze.hidden=!1,ae=0;ae<Nt;ae++)if(vt=pe[ae].nodeType,pe[ae]["s-hn"]!==Ze["s-hn"]||""!==Je){if(1===vt&&Je===pe[ae].getAttribute("slot")){Ze.hidden=!0;break}}else if(1===vt||3===vt&&""!==pe[ae].textContent.trim()){Ze.hidden=!0;break}Jt(Ze)}},_r=[],ei=te=>{let pe,Ze,ft,Nt,ae,Je,vt=0;const Ft=te.childNodes,Vt=Ft.length;for(;vt<Vt;vt++){if(pe=Ft[vt],pe["s-sr"]&&(Ze=pe["s-cr"])&&Ze.parentNode)for(ft=Ze.parentNode.childNodes,Nt=pe["s-sn"],Je=ft.length-1;Je>=0;Je--)Ze=ft[Je],!Ze["s-cn"]&&!Ze["s-nr"]&&Ze["s-hn"]!==pe["s-hn"]&&(ii(Ze,Nt)?(ae=_r.find(sn=>sn.$nodeToRelocate$===Ze),ve=!0,Ze["s-sn"]=Ze["s-sn"]||Nt,ae?ae.$slotRefNode$=pe:_r.push({$slotRefNode$:pe,$nodeToRelocate$:Ze}),Ze["s-sr"]&&_r.map(sn=>{ii(sn.$nodeToRelocate$,Ze["s-sn"])&&(ae=_r.find(Pn=>Pn.$nodeToRelocate$===Ze),ae&&!sn.$slotRefNode$&&(sn.$slotRefNode$=ae.$slotRefNode$))})):_r.some(sn=>sn.$nodeToRelocate$===Ze)||_r.push({$nodeToRelocate$:Ze}));1===pe.nodeType&&ei(pe)}},ii=(te,pe)=>1===te.nodeType?null===te.getAttribute("slot")&&""===pe||te.getAttribute("slot")===pe:te["s-sn"]===pe||""===pe,Fr=te=>{te.$attrs$&&te.$attrs$.ref&&te.$attrs$.ref(null),te.$children$&&te.$children$.map(Fr)},or=te=>An(te).$hostElement$,Yn=(te,pe,Ze)=>{const ft=or(te);return{emit:Nt=>ai(ft,pe,{bubbles:!!(4&Ze),composed:!!(2&Ze),cancelable:!!(1&Ze),detail:Nt})}},ai=(te,pe,Ze)=>{const ft=Re.ce(pe,Ze);return te.dispatchEvent(ft),ft},Tr=(te,pe)=>{pe&&!te.$onRenderResolve$&&pe["s-p"]&&pe["s-p"].push(new Promise(Ze=>te.$onRenderResolve$=Ze))},Or=(te,pe)=>{if(te.$flags$|=16,!(4&te.$flags$))return Tr(te,te.$ancestorComponent$),Ir(()=>kt(te,pe));te.$flags$|=512},kt=(te,pe)=>{const ft=te.$lazyInstance$;let Nt;return pe&&(te.$flags$|=256,te.$queuedListeners$&&(te.$queuedListeners$.map(([ae,Je])=>fe(ft,ae,Je)),te.$queuedListeners$=null),Nt=fe(ft,"componentWillLoad")),Nt=$e(Nt,()=>fe(ft,"componentWillRender")),$e(Nt,()=>Be(te,ft,pe))},Be=function(){var te=(0,u.Z)(function*(pe,Ze,ft){const Nt=pe.$hostElement$,Je=Nt["s-rc"];ft&&(te=>{const pe=te.$cmpMeta$,Ze=te.$hostElement$,ft=pe.$flags$,ae=we(Ze.shadowRoot?Ze.shadowRoot:Ze.getRootNode(),pe,te.$modeName$);10&ft&&(Ze["s-sc"]=ae,Ze.classList.add(ae+"-h"),2&ft&&Ze.classList.add(ae+"-s"))})(pe);Ge(pe,Ze),Je&&(Je.map(Ft=>Ft()),Nt["s-rc"]=void 0);{const Ft=Nt["s-p"],Vt=()=>jt(pe);0===Ft.length?Vt():(Promise.all(Ft).then(Vt),pe.$flags$|=4,Ft.length=0)}});return function(Ze,ft,Nt){return te.apply(this,arguments)}}(),Ge=(te,pe,Ze)=>{try{pe=pe.render&&pe.render(),te.$flags$&=-17,te.$flags$|=2,((te,pe)=>{const Ze=te.$hostElement$,ft=te.$cmpMeta$,Nt=te.$vnode$||er(null,null),ae=(te=>te&&te.$tag$===kn)(pe)?pe:Kn(null,null,pe);if(Oe=Ze.tagName,ft.$attrsToReflect$&&(ae.$attrs$=ae.$attrs$||{},ft.$attrsToReflect$.map(([Je,vt])=>ae.$attrs$[vt]=Ze[Je])),ae.$tag$=null,ae.$flags$|=4,te.$vnode$=ae,ae.$elm$=Nt.$elm$=Ze.shadowRoot||Ze,W=Ze["s-sc"],xe=Ze["s-cr"],ke=0!=(1&ft.$flags$),ve=!1,Vr(Nt,ae),Re.$flags$|=1,Ne){ei(ae.$elm$);let Je,vt,Ft,Vt,sn,Pn,bn=0;for(;bn<_r.length;bn++)Je=_r[bn],vt=Je.$nodeToRelocate$,vt["s-ol"]||(Ft=he.createTextNode(""),Ft["s-nr"]=vt,vt.parentNode.insertBefore(vt["s-ol"]=Ft,vt));for(bn=0;bn<_r.length;bn++)if(Je=_r[bn],vt=Je.$nodeToRelocate$,Je.$slotRefNode$){for(Vt=Je.$slotRefNode$.parentNode,sn=Je.$slotRefNode$.nextSibling,Ft=vt["s-ol"];Ft=Ft.previousSibling;)if(Pn=Ft["s-nr"],Pn&&Pn["s-sn"]===vt["s-sn"]&&Vt===Pn.parentNode&&(Pn=Pn.nextSibling,!Pn||!Pn["s-nr"])){sn=Pn;break}(!sn&&Vt!==vt.parentNode||vt.nextSibling!==sn)&&vt!==sn&&(!vt["s-hn"]&&vt["s-ol"]&&(vt["s-hn"]=vt["s-ol"].parentNode.nodeName),Vt.insertBefore(vt,sn))}else 1===vt.nodeType&&(vt.hidden=!0)}ve&&Jt(ae.$elm$),Re.$flags$&=-2,_r.length=0})(te,pe)}catch(ft){$n(ft,te.$hostElement$)}return null},jt=te=>{const Ze=te.$hostElement$,Nt=te.$lazyInstance$,ae=te.$ancestorComponent$;fe(Nt,"componentDidRender"),64&te.$flags$?fe(Nt,"componentDidUpdate"):(te.$flags$|=64,It(Ze),fe(Nt,"componentDidLoad"),te.$onReadyResolve$(Ze),ae||ge()),te.$onInstanceResolve$(Ze),te.$onRenderResolve$&&(te.$onRenderResolve$(),te.$onRenderResolve$=void 0),512&te.$flags$&&nr(()=>Or(te,!1)),te.$flags$&=-517},$t=te=>{{const pe=An(te),Ze=pe.$hostElement$.isConnected;return Ze&&2==(18&pe.$flags$)&&Or(pe,!1),Ze}},ge=te=>{It(he.documentElement),nr(()=>ai(ce,"appload",{detail:{namespace:"ionic"}}))},fe=(te,pe,Ze)=>{if(te&&te[pe])try{return te[pe](Ze)}catch(ft){$n(ft)}},$e=(te,pe)=>te&&te.then?te.then(pe):pe(),It=te=>te.classList.add("hydrated"),un=(te,pe,Ze,ft,Nt,ae,Je)=>{let vt,Ft,Vt,sn;if(1===ae.nodeType){for(vt=ae.getAttribute("c-id"),vt&&(Ft=vt.split("."),(Ft[0]===Je||"0"===Ft[0])&&(Vt={$flags$:0,$hostId$:Ft[0],$nodeId$:Ft[1],$depth$:Ft[2],$index$:Ft[3],$tag$:ae.tagName.toLowerCase(),$elm$:ae,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},pe.push(Vt),ae.removeAttribute("c-id"),te.$children$||(te.$children$=[]),te.$children$[Vt.$index$]=Vt,te=Vt,ft&&"0"===Vt.$depth$&&(ft[Vt.$index$]=Vt.$elm$))),sn=ae.childNodes.length-1;sn>=0;sn--)un(te,pe,Ze,ft,Nt,ae.childNodes[sn],Je);if(ae.shadowRoot)for(sn=ae.shadowRoot.childNodes.length-1;sn>=0;sn--)un(te,pe,Ze,ft,Nt,ae.shadowRoot.childNodes[sn],Je)}else if(8===ae.nodeType)Ft=ae.nodeValue.split("."),(Ft[1]===Je||"0"===Ft[1])&&(vt=Ft[0],Vt={$flags$:0,$hostId$:Ft[1],$nodeId$:Ft[2],$depth$:Ft[3],$index$:Ft[4],$elm$:ae,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===vt?(Vt.$elm$=ae.nextSibling,Vt.$elm$&&3===Vt.$elm$.nodeType&&(Vt.$text$=Vt.$elm$.textContent,pe.push(Vt),ae.remove(),te.$children$||(te.$children$=[]),te.$children$[Vt.$index$]=Vt,ft&&"0"===Vt.$depth$&&(ft[Vt.$index$]=Vt.$elm$))):Vt.$hostId$===Je&&("s"===vt?(Vt.$tag$="slot",ae["s-sn"]=Ft[5]?Vt.$name$=Ft[5]:"",ae["s-sr"]=!0,ft&&(Vt.$elm$=he.createElement(Vt.$tag$),Vt.$name$&&Vt.$elm$.setAttribute("name",Vt.$name$),ae.parentNode.insertBefore(Vt.$elm$,ae),ae.remove(),"0"===Vt.$depth$&&(ft[Vt.$index$]=Vt.$elm$)),Ze.push(Vt),te.$children$||(te.$children$=[]),te.$children$[Vt.$index$]=Vt):"r"===vt&&(ft?ae.remove():(Nt["s-cr"]=ae,ae["s-cn"]=!0))));else if(te&&"style"===te.$tag$){const Pn=er(null,ae.textContent);Pn.$elm$=ae,Pn.$index$="0",te.$children$=[Pn]}},Fe=(te,pe)=>{if(1===te.nodeType){let Ze=0;for(;Ze<te.childNodes.length;Ze++)Fe(te.childNodes[Ze],pe);if(te.shadowRoot)for(Ze=0;Ze<te.shadowRoot.childNodes.length;Ze++)Fe(te.shadowRoot.childNodes[Ze],pe)}else if(8===te.nodeType){const Ze=te.nodeValue.split(".");"o"===Ze[0]&&(pe.set(Ze[1]+"."+Ze[2],te),te.nodeValue="",te["s-en"]=Ze[3])}},Mt=(te,pe,Ze)=>{if(pe.$members$){te.watchers&&(pe.$watchers$=te.watchers);const ft=Object.entries(pe.$members$),Nt=te.prototype;if(ft.map(([ae,[Je]])=>{31&Je||2&Ze&&32&Je?Object.defineProperty(Nt,ae,{get(){return((te,pe)=>An(this).$instanceValues$.get(pe))(0,ae)},set(vt){((te,pe,Ze,ft)=>{const Nt=An(te),ae=Nt.$hostElement$,Je=Nt.$instanceValues$.get(pe),vt=Nt.$flags$,Ft=Nt.$lazyInstance$;Ze=((te,pe)=>null==te||Gn(te)?te:4&pe?"false"!==te&&(""===te||!!te):2&pe?parseFloat(te):1&pe?String(te):te)(Ze,ft.$members$[pe][0]);const Vt=Number.isNaN(Je)&&Number.isNaN(Ze);if((!(8&vt)||void 0===Je)&&Ze!==Je&&!Vt&&(Nt.$instanceValues$.set(pe,Ze),Ft)){if(ft.$watchers$&&128&vt){const Pn=ft.$watchers$[pe];Pn&&Pn.map(bn=>{try{Ft[bn](Ze,Je,pe)}catch(xr){$n(xr,ae)}})}2==(18&vt)&&Or(Nt,!1)}})(this,ae,vt,pe)},configurable:!0,enumerable:!0}):1&Ze&&64&Je&&Object.defineProperty(Nt,ae,{value(...vt){const Ft=An(this);return Ft.$onInstancePromise$.then(()=>Ft.$lazyInstance$[ae](...vt))}})}),1&Ze){const ae=new Map;Nt.attributeChangedCallback=function(Je,vt,Ft){Re.jmp(()=>{const Vt=ae.get(Je);if(this.hasOwnProperty(Vt))Ft=this[Vt],delete this[Vt];else if(Nt.hasOwnProperty(Vt)&&"number"==typeof this[Vt]&&this[Vt]==Ft)return;this[Vt]=(null!==Ft||"boolean"!=typeof this[Vt])&&Ft})},te.observedAttributes=ft.filter(([Je,vt])=>15&vt[0]).map(([Je,vt])=>{const Ft=vt[1]||Je;return ae.set(Ft,Je),512&vt[0]&&pe.$attrsToReflect$.push([Je,Ft]),Ft})}}return te},Xt=function(){var te=(0,u.Z)(function*(pe,Ze,ft,Nt,ae){if(!(32&Ze.$flags$)){{if(Ze.$flags$|=32,(ae=mr(ft)).then){const Vt=()=>{};ae=yield ae,Vt()}ae.isProxied||(ft.$watchers$=ae.watchers,Mt(ae,ft,2),ae.isProxied=!0);const Ft=()=>{};Ze.$flags$|=8;try{new ae(Ze)}catch(Vt){$n(Vt)}Ze.$flags$&=-9,Ze.$flags$|=128,Ft(),vn(Ze.$lazyInstance$)}if(ae.style){let Ft=ae.style;"string"!=typeof Ft&&(Ft=Ft[Ze.$modeName$=(te=>Xr.map(pe=>pe(te)).find(pe=>!!pe))(pe)]);const Vt=Ie(ft,Ze.$modeName$);if(!jr.has(Vt)){const sn=()=>{};ct(Vt,Ft,!!(1&ft.$flags$)),sn()}}}const Je=Ze.$ancestorComponent$,vt=()=>Or(Ze,!0);Je&&Je["s-rc"]?Je["s-rc"].push(vt):vt()});return function(Ze,ft,Nt,ae,Je){return te.apply(this,arguments)}}(),vn=te=>{fe(te,"connectedCallback")},rr=te=>{const pe=te["s-cr"]=he.createComment("");pe["s-cn"]=!0,te.insertBefore(pe,te.firstChild)},Rt=(te,pe={})=>{const ft=[],Nt=pe.exclude||[],ae=ce.customElements,Je=he.head,vt=Je.querySelector("meta[charset]"),Ft=he.createElement("style"),Vt=[],sn=he.querySelectorAll(`[${Se}]`);let Pn,bn=!0,xr=0;for(Object.assign(Re,pe),Re.$resourcesUrl$=new URL(pe.resourcesUrl||"./",he.baseURI).href,Re.$flags$|=2;xr<sn.length;xr++)ct(sn[xr].getAttribute(Se),at(sn[xr].innerHTML),!0);te.map(zr=>{zr[1].map(xi=>{const ar={$flags$:xi[0],$tagName$:xi[1],$members$:xi[2],$listeners$:xi[3]};ar.$members$=xi[2],ar.$listeners$=xi[3],ar.$attrsToReflect$=[],ar.$watchers$={};const Ws=ar.$tagName$,ht=class extends HTMLElement{constructor(Xe){super(Xe),lr(Xe=this,ar),1&ar.$flags$&&Xe.attachShadow({mode:"open",delegatesFocus:!!(16&ar.$flags$)})}connectedCallback(){Pn&&(clearTimeout(Pn),Pn=null),bn?Vt.push(this):Re.jmp(()=>(te=>{if(!(1&Re.$flags$)){const pe=An(te),Ze=pe.$cmpMeta$,ft=()=>{};if(1&pe.$flags$)ye(te,pe,Ze.$listeners$),vn(pe.$lazyInstance$);else{let Nt;if(pe.$flags$|=1,Nt=te.getAttribute(Te),Nt){if(1&Ze.$flags$){const ae=we(te.shadowRoot,Ze,te.getAttribute("s-mode"));te.classList.remove(ae+"-h",ae+"-s")}((te,pe,Ze,ft)=>{const ae=te.shadowRoot,Je=[],Ft=ae?[]:null,Vt=ft.$vnode$=er(pe,null);Re.$orgLocNodes$||Fe(he.body,Re.$orgLocNodes$=new Map),te[Te]=Ze,te.removeAttribute(Te),un(Vt,Je,[],Ft,te,te,Ze),Je.map(sn=>{const Pn=sn.$hostId$+"."+sn.$nodeId$,bn=Re.$orgLocNodes$.get(Pn),xr=sn.$elm$;bn&&""===bn["s-en"]&&bn.parentNode.insertBefore(xr,bn.nextSibling),ae||(xr["s-hn"]=pe,bn&&(xr["s-ol"]=bn,xr["s-ol"]["s-nr"]=xr)),Re.$orgLocNodes$.delete(Pn)}),ae&&Ft.map(sn=>{sn&&ae.appendChild(sn)})})(te,Ze.$tagName$,Nt,pe)}Nt||12&Ze.$flags$&&rr(te);{let ae=te;for(;ae=ae.parentNode||ae.host;)if(1===ae.nodeType&&ae.hasAttribute("s-id")&&ae["s-p"]||ae["s-p"]){Tr(pe,pe.$ancestorComponent$=ae);break}}Ze.$members$&&Object.entries(Ze.$members$).map(([ae,[Je]])=>{if(31&Je&&te.hasOwnProperty(ae)){const vt=te[ae];delete te[ae],te[ae]=vt}}),nr(()=>Xt(te,pe,Ze))}ft()}})(this))}disconnectedCallback(){Re.jmp(()=>(te=>{if(!(1&Re.$flags$)){const pe=An(this),Ze=pe.$lazyInstance$;pe.$rmListeners$&&(pe.$rmListeners$.map(ft=>ft()),pe.$rmListeners$=void 0),fe(Ze,"disconnectedCallback")}})())}componentOnReady(){return An(this).$onReadyPromise$}};ar.$lazyBundleId$=zr[0],!Nt.includes(Ws)&&!ae.get(Ws)&&(ft.push(Ws),ae.define(Ws,Mt(ht,ar,1)))})}),Ft.innerHTML=ft+"{visibility:hidden}.hydrated{visibility:inherit}",Ft.setAttribute("data-styles",""),Je.insertBefore(Ft,vt?vt.nextSibling:Je.firstChild),bn=!1,Vt.length?Vt.map(zr=>zr.connectedCallback()):Re.jmp(()=>Pn=setTimeout(ge,30))},bt=te=>{const pe=new URL(te,Re.$resourcesUrl$);return pe.origin!==ce.location.origin?pe.href:pe.pathname},Kt=new WeakMap,An=te=>Kt.get(te),jn=(te,pe)=>Kt.set(pe.$lazyInstance$=te,pe),lr=(te,pe)=>{const Ze={$flags$:0,$hostElement$:te,$cmpMeta$:pe,$instanceValues$:new Map};return Ze.$onInstancePromise$=new Promise(ft=>Ze.$onInstanceResolve$=ft),Ze.$onReadyPromise$=new Promise(ft=>Ze.$onReadyResolve$=ft),te["s-p"]=[],te["s-rc"]=[],ye(te,Ze,pe.$listeners$),Kt.set(te,Ze)},Er=(te,pe)=>pe in te,$n=(te,pe)=>(0,console.error)(te,pe),pr=new Map,mr=(te,pe,Ze)=>{const ft=te.$tagName$.replace(/-/g,"_"),Nt=te.$lazyBundleId$,ae=pr.get(Nt);return ae?ae[ft]:V(863)(`./${Nt}.entry.js`).then(Je=>(pr.set(Nt,Je),Je[ft]),$n)},jr=new Map,Xr=[],Ni=[],gs=[],ss=(te,pe)=>Ze=>{te.push(Ze),me||(me=!0,pe&&4&Re.$flags$?nr(pn):Re.raf(pn))},Wr=te=>{for(let pe=0;pe<te.length;pe++)try{te[pe](performance.now())}catch(Ze){$n(Ze)}te.length=0},pn=()=>{Wr(Ni),Wr(gs),(me=Ni.length>0)&&Re.raf(pn)},nr=te=>At().then(te),li=ss(Ni,!1),Ir=ss(gs,!0),Zi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(yn,Et,V)=>{"use strict";V.d(Et,{a:()=>ce,b:()=>_t,c:()=>W,g:()=>me,i:()=>ct});var u=V(1308);class Q{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Ie){const at=this.m.get(Ae);return void 0!==at?at:Ie}getBoolean(Ae,Ie=!1){const at=this.m.get(Ae);return void 0===at?Ie:"string"==typeof at?"true"===at:!!at}getNumber(Ae,Ie){const at=parseFloat(this.m.get(Ae));return isNaN(at)?void 0!==Ie?Ie:NaN:at}set(Ae,Ie){this.m.set(Ae,Ie)}}const W=new Q,je="ionic-persist-config",me=we=>he(we),ce=(we,Ae)=>("string"==typeof we&&(Ae=we,we=void 0),me(we).includes(Ae)),he=(we=window)=>{if(typeof we>"u")return[];we.Ionic=we.Ionic||{};let Ae=we.Ionic.platforms;return null==Ae&&(Ae=we.Ionic.platforms=Re(we),Ae.forEach(Ie=>we.document.documentElement.classList.add(`plt-${Ie}`))),Ae},Re=we=>{const Ae=W.get("platform");return Object.keys(tt).filter(Ie=>{const at=null==Ae?void 0:Ae[Ie];return"function"==typeof at?at(we):tt[Ie](we)})},lt=we=>!!(qe(we,/iPad/i)||qe(we,/Macintosh/i)&&et(we)),ye=we=>qe(we,/android|sink/i),et=we=>nt(we,"(any-pointer:coarse)"),z=we=>Pe(we)||Te(we),Pe=we=>!!(we.cordova||we.phonegap||we.PhoneGap),Te=we=>{const Ae=we.Capacitor;return!(null==Ae||!Ae.isNative)},qe=(we,Ae)=>Ae.test(we.navigator.userAgent),nt=(we,Ae)=>{var Ie;return null===(Ie=we.matchMedia)||void 0===Ie?void 0:Ie.call(we,Ae).matches},tt={ipad:lt,iphone:we=>qe(we,/iPhone/i),ios:we=>qe(we,/iPhone|iPod/i)||lt(we),android:ye,phablet:we=>{const Ae=we.innerWidth,Ie=we.innerHeight,at=Math.min(Ae,Ie),Ye=Math.max(Ae,Ie);return at>390&&at<520&&Ye>620&&Ye<800},tablet:we=>{const Ae=we.innerWidth,Ie=we.innerHeight,at=Math.min(Ae,Ie),Ye=Math.max(Ae,Ie);return lt(we)||(we=>ye(we)&&!qe(we,/mobile/i))(we)||at>460&&at<820&&Ye>780&&Ye<1400},cordova:Pe,capacitor:Te,electron:we=>qe(we,/electron/i),pwa:we=>{var Ae;return!!(null!==(Ae=we.matchMedia)&&void 0!==Ae&&Ae.call(we,"(display-mode: standalone)").matches||we.navigator.standalone)},mobile:et,mobileweb:we=>et(we)&&!z(we),desktop:we=>!et(we),hybrid:z};let ze;const _t=we=>we&&(0,u.g)(we)||ze,ct=(we={})=>{if(typeof window>"u")return;const Ae=window.document,Ie=window,at=Ie.Ionic=Ie.Ionic||{},Ye={};we._ael&&(Ye.ael=we._ael),we._rel&&(Ye.rel=we._rel),we._ce&&(Ye.ce=we._ce),(0,u.s)(Ye);const Ke=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(we=>{try{const Ae=we.sessionStorage.getItem(je);return null!==Ae?JSON.parse(Ae):{}}catch(Ae){return{}}})(Ie)),{persistConfig:!1}),at.config),(we=>{const Ae={};return we.location.search.slice(1).split("&").map(Ie=>Ie.split("=")).map(([Ie,at])=>[decodeURIComponent(Ie),decodeURIComponent(at)]).filter(([Ie])=>((we,Ae)=>we.substr(0,Ae.length)===Ae)(Ie,"ionic:")).map(([Ie,at])=>[Ie.slice("ionic:".length),at]).forEach(([Ie,at])=>{Ae[Ie]=at}),Ae})(Ie)),we);W.reset(Ke),W.getBoolean("persistConfig")&&((we,Ae)=>{try{we.sessionStorage.setItem(je,JSON.stringify(Ae))}catch(Ie){return}})(Ie,Ke),he(Ie),at.config=W,at.mode=ze=W.get("mode",Ae.documentElement.getAttribute("mode")||(ce(Ie,"ios")?"ios":"md")),W.set("mode",ze),Ae.documentElement.setAttribute("mode",ze),Ae.documentElement.classList.add(ze),W.getBoolean("_testing")&&W.set("animated",!1);const Ue=Wt=>{var Yt;return null===(Yt=Wt.tagName)||void 0===Yt?void 0:Yt.startsWith("ION-")},Bt=Wt=>["ios","md"].includes(Wt);(0,u.a)(Wt=>{for(;Wt;){const Yt=Wt.mode||Wt.getAttribute("mode");if(Yt){if(Bt(Yt))return Yt;Ue(Wt)&&console.warn('Invalid ionic mode: "'+Yt+'", expected: "ios" or "md"')}Wt=Wt.parentElement}return ze})}},6439:(yn,Et,V)=>{"use strict";V.r(Et),V.d(Et,{iosTransitionAnimation:()=>Re,shadow:()=>ve});var u=V(181),Q=V(1843);V(3457),V(1308);const ke=Ve=>document.querySelector(`${Ve}.ion-cloned-element`),ve=Ve=>Ve.shadowRoot||Ve,Ne=Ve=>{const lt="ION-TABS"===Ve.tagName?Ve:Ve.querySelector("ion-tabs"),At="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=lt){const De=lt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=De?De.querySelector(At):null}return Ve.querySelector(At)},je=(Ve,lt)=>{const At="ION-TABS"===Ve.tagName?Ve:Ve.querySelector("ion-tabs");let De=[];if(null!=At){const ye=At.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ye&&(De=ye.querySelectorAll("ion-buttons"))}else De=Ve.querySelectorAll("ion-buttons");for(const ye of De){const ue=ye.closest("ion-header"),rt=ue&&!ue.classList.contains("header-collapse-condense-inactive"),pt=ye.querySelector("ion-back-button"),et=ye.classList.contains("buttons-collapse");if(null!==pt&&("start"===ye.slot||""===ye.slot)&&(et&&rt&&lt||!et))return pt}return null},ce=(Ve,lt,At,De,ye,ue)=>{const rt=lt?`calc(100% - ${ue.right+4}px)`:ue.left-4+"px",pt=lt?"7px":"-7px",et=lt?"-4px":"4px",He=lt?"-4px":"4px",z=lt?"right":"left",Pe=lt?"left":"right",it=At?[{offset:0,opacity:1,transform:`translate3d(${et}, ${ue.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${pt}, ${ye.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${pt}, ${ye.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${ue.top-46}px, 0) scale(1)`}],tt=At?[{offset:0,opacity:1,transform:`translate3d(${He}, ${ue.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${He}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${He}, ${ue.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${He}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${He}, ${ue.top-46}px, 0) scale(1)`}],ze=(0,u.c)(),_t=(0,u.c)(),ct=ke("ion-back-button"),we=ve(ct).querySelector(".button-text"),Ae=ve(ct).querySelector("ion-icon");ct.text=De.text,ct.mode=De.mode,ct.icon=De.icon,ct.color=De.color,ct.disabled=De.disabled,ct.style.setProperty("display","block"),ct.style.setProperty("position","fixed"),_t.addElement(Ae),ze.addElement(we),ze.beforeStyles({"transform-origin":`${z} center`}).beforeAddWrite(()=>{De.style.setProperty("display","none"),ct.style.setProperty(z,rt)}).afterAddWrite(()=>{De.style.setProperty("display",""),ct.style.setProperty("display","none"),ct.style.removeProperty(z)}).keyframes(it),_t.beforeStyles({"transform-origin":`${Pe} center`}).keyframes(tt),Ve.addAnimation([ze,_t])},he=(Ve,lt,At,De,ye,ue)=>{const rt=lt?`calc(100% - ${ye.right}px)`:`${ye.left}px`,pt=lt?"-18px":"18px",et=lt?"right":"left",Pe=At?[{offset:0,opacity:0,transform:`translate3d(${pt}, ${ue.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${pt}, ${ue.top-4}px, 0) scale(0.5)`}],Te=ke("ion-title"),Se=(0,u.c)();Te.innerText=De.innerText,Te.size=De.size,Te.color=De.color,Se.addElement(Te),Se.beforeStyles({"transform-origin":`${et} center`,height:"46px",display:"",position:"relative",[et]:rt}).beforeAddWrite(()=>{De.style.setProperty("display","none")}).afterAddWrite(()=>{De.style.setProperty("display",""),Te.style.setProperty("display","none")}).keyframes(Pe),Ve.addAnimation(Se)},Re=(Ve,lt)=>{var At;try{const De="cubic-bezier(0.32,0.72,0,1)",ye="opacity",ue="transform",rt="0%",et="rtl"===Ve.ownerDocument.dir,He=et?"-99.5%":"99.5%",z=et?"33%":"-33%",Pe=lt.enteringEl,Te=lt.leavingEl,Se="back"===lt.direction,it=Pe.querySelector(":scope > ion-content"),qe=Pe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),nt=Pe.querySelectorAll(":scope > ion-header > ion-toolbar"),tt=(0,u.c)(),ze=(0,u.c)();if(tt.addElement(Pe).duration((null!==(At=lt.duration)&&void 0!==At?At:0)||540).easing(lt.easing||De).fill("both").beforeRemoveClass("ion-page-invisible"),Te&&null!=Ve){const Ae=(0,u.c)();Ae.addElement(Ve),tt.addAnimation(Ae)}if(it||0!==nt.length||0!==qe.length?(ze.addElement(it),ze.addElement(qe)):ze.addElement(Pe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),tt.addAnimation(ze),Se?ze.beforeClearStyles([ye]).fromTo("transform",`translateX(${z})`,`translateX(${rt})`).fromTo(ye,.8,1):ze.beforeClearStyles([ye]).fromTo("transform",`translateX(${He})`,`translateX(${rt})`),it){const Ae=ve(it).querySelector(".transition-effect");if(Ae){const Ie=Ae.querySelector(".transition-cover"),at=Ae.querySelector(".transition-shadow"),Ye=(0,u.c)(),Ke=(0,u.c)(),Ue=(0,u.c)();Ye.addElement(Ae).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ke.addElement(Ie).beforeClearStyles([ye]).fromTo(ye,0,.1),Ue.addElement(at).beforeClearStyles([ye]).fromTo(ye,.03,.7),Ye.addAnimation([Ke,Ue]),ze.addAnimation([Ye])}}const _t=Pe.querySelector("ion-header.header-collapse-condense"),{forward:ct,backward:we}=((Ve,lt,At,De,ye)=>{const ue=je(De,At),rt=Ne(ye),pt=Ne(De),et=je(ye,At),He=null!==ue&&null!==rt&&!At,z=null!==pt&&null!==et&&At;if(He){const Pe=rt.getBoundingClientRect(),Te=ue.getBoundingClientRect();he(Ve,lt,At,rt,Pe,Te),ce(Ve,lt,At,ue,Pe,Te)}else if(z){const Pe=pt.getBoundingClientRect(),Te=et.getBoundingClientRect();he(Ve,lt,At,pt,Pe,Te),ce(Ve,lt,At,et,Pe,Te)}return{forward:He,backward:z}})(tt,et,Se,Pe,Te);if(nt.forEach(Ae=>{const Ie=(0,u.c)();Ie.addElement(Ae),tt.addAnimation(Ie);const at=(0,u.c)();at.addElement(Ae.querySelector("ion-title"));const Ye=(0,u.c)(),Ke=Array.from(Ae.querySelectorAll("ion-buttons,[menuToggle]")),Ue=Ae.closest("ion-header"),Bt=null==Ue?void 0:Ue.classList.contains("header-collapse-condense-inactive");let Wt;Wt=Ke.filter(Se?er=>{const kn=er.classList.contains("buttons-collapse");return kn&&!Bt||!kn}:er=>!er.classList.contains("buttons-collapse")),Ye.addElement(Wt);const Yt=(0,u.c)();Yt.addElement(Ae.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ct=(0,u.c)();Ct.addElement(ve(Ae).querySelector(".toolbar-background"));const Gn=(0,u.c)(),Kn=Ae.querySelector("ion-back-button");if(Kn&&Gn.addElement(Kn),Ie.addAnimation([at,Ye,Yt,Ct,Gn]),Ye.fromTo(ye,.01,1),Yt.fromTo(ye,.01,1),Se)Bt||at.fromTo("transform",`translateX(${z})`,`translateX(${rt})`).fromTo(ye,.01,1),Yt.fromTo("transform",`translateX(${z})`,`translateX(${rt})`),Gn.fromTo(ye,.01,1);else if(_t||at.fromTo("transform",`translateX(${He})`,`translateX(${rt})`).fromTo(ye,.01,1),Yt.fromTo("transform",`translateX(${He})`,`translateX(${rt})`),Ct.beforeClearStyles([ye,"transform"]),(null==Ue?void 0:Ue.translucent)?Ct.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ct.fromTo(ye,.01,"var(--opacity)"),ct||Gn.fromTo(ye,.01,1),Kn&&!ct){const kn=(0,u.c)();kn.addElement(ve(Kn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ie.addAnimation(kn)}}),Te){const Ae=(0,u.c)(),Ie=Te.querySelector(":scope > ion-content"),at=Te.querySelectorAll(":scope > ion-header > ion-toolbar"),Ye=Te.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ie||0!==at.length||0!==Ye.length?(Ae.addElement(Ie),Ae.addElement(Ye)):Ae.addElement(Te.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),tt.addAnimation(Ae),Se){Ae.beforeClearStyles([ye]).fromTo("transform",`translateX(${rt})`,et?"translateX(-100%)":"translateX(100%)");const Ke=(0,Q.g)(Te);tt.afterAddWrite(()=>{"normal"===tt.getDirection()&&Ke.style.setProperty("display","none")})}else Ae.fromTo("transform",`translateX(${rt})`,`translateX(${z})`).fromTo(ye,1,.8);if(Ie){const Ke=ve(Ie).querySelector(".transition-effect");if(Ke){const Ue=Ke.querySelector(".transition-cover"),Bt=Ke.querySelector(".transition-shadow"),Wt=(0,u.c)(),Yt=(0,u.c)(),Ct=(0,u.c)();Wt.addElement(Ke).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Yt.addElement(Ue).beforeClearStyles([ye]).fromTo(ye,.1,0),Ct.addElement(Bt).beforeClearStyles([ye]).fromTo(ye,.7,.03),Wt.addAnimation([Yt,Ct]),Ae.addAnimation([Wt])}}at.forEach(Ke=>{const Ue=(0,u.c)();Ue.addElement(Ke);const Bt=(0,u.c)();Bt.addElement(Ke.querySelector("ion-title"));const Wt=(0,u.c)(),Yt=Ke.querySelectorAll("ion-buttons,[menuToggle]"),Ct=Ke.closest("ion-header"),Gn=null==Ct?void 0:Ct.classList.contains("header-collapse-condense-inactive"),Kn=Array.from(Yt).filter(yr=>{const Sn=yr.classList.contains("buttons-collapse");return Sn&&!Gn||!Sn});Wt.addElement(Kn);const er=(0,u.c)(),kn=Ke.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");kn.length>0&&er.addElement(kn);const dn=(0,u.c)();dn.addElement(ve(Ke).querySelector(".toolbar-background"));const hr=(0,u.c)(),Pr=Ke.querySelector("ion-back-button");if(Pr&&hr.addElement(Pr),Ue.addAnimation([Bt,Wt,er,hr,dn]),tt.addAnimation(Ue),hr.fromTo(ye,.99,0),Wt.fromTo(ye,.99,0),er.fromTo(ye,.99,0),Se){if(Gn||Bt.fromTo("transform",`translateX(${rt})`,et?"translateX(-100%)":"translateX(100%)").fromTo(ye,.99,0),er.fromTo("transform",`translateX(${rt})`,et?"translateX(-100%)":"translateX(100%)"),dn.beforeClearStyles([ye,"transform"]),(null==Ct?void 0:Ct.translucent)?dn.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):dn.fromTo(ye,"var(--opacity)",0),Pr&&!we){const Sn=(0,u.c)();Sn.addElement(ve(Pr).querySelector(".button-text")).fromTo("transform",`translateX(${rt})`,`translateX(${(et?-124:124)+"px"})`),Ue.addAnimation(Sn)}}else Gn||Bt.fromTo("transform",`translateX(${rt})`,`translateX(${z})`).fromTo(ye,.99,0).afterClearStyles([ue,ye]),er.fromTo("transform",`translateX(${rt})`,`translateX(${z})`).afterClearStyles([ue,ye]),hr.afterClearStyles([ye]),Bt.afterClearStyles([ye]),Wt.afterClearStyles([ye])})}return tt}catch(De){throw De}}},7838:(yn,Et,V)=>{"use strict";V.r(Et),V.d(Et,{mdTransitionAnimation:()=>Oe});var u=V(181),Q=V(1843);V(3457),V(1308);const Oe=(ke,ve)=>{var Ne,je,me;const Re="back"===ve.direction,lt=ve.leavingEl,At=(0,Q.g)(ve.enteringEl),De=At.querySelector("ion-toolbar"),ye=(0,u.c)();if(ye.addElement(At).fill("both").beforeRemoveClass("ion-page-invisible"),Re?ye.duration((null!==(Ne=ve.duration)&&void 0!==Ne?Ne:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ye.duration((null!==(je=ve.duration)&&void 0!==je?je:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),De){const ue=(0,u.c)();ue.addElement(De),ye.addAnimation(ue)}if(lt&&Re){ye.duration((null!==(me=ve.duration)&&void 0!==me?me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ue=(0,u.c)();ue.addElement((0,Q.g)(lt)).onFinish(rt=>{1===rt&&ue.elements.length>0&&ue.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ye.addAnimation(ue)}return ye}},3539:(yn,Et,V)=>{"use strict";V.d(Et,{B:()=>Ie,G:()=>at,a:()=>Ne,b:()=>je,c:()=>Re,d:()=>Se,e:()=>lt,f:()=>qe,g:()=>ze,h:()=>ke,i:()=>ct,j:()=>ye,k:()=>Pe,m:()=>ce,s:()=>Ae,t:()=>Ve});var u=V(5861),Q=V(5179),W=V(7593),xe=V(5730);let Oe=0;const ke=new WeakMap,ve=Ye=>({create:Ke=>At(Ye,Ke),dismiss:(Ke,Ue,Bt)=>He(document,Ke,Ue,Ye,Bt),getTop:()=>(0,u.Z)(function*(){return Pe(document,Ye)})()}),Ne=ve("ion-alert"),je=ve("ion-action-sheet"),ce=ve("ion-modal"),Re=ve("ion-popover"),Ve=ve("ion-toast"),lt=Ye=>{typeof document<"u"&&et(document);const Ke=Oe++;Ye.overlayIndex=Ke,Ye.hasAttribute("id")||(Ye.id=`ion-overlay-${Ke}`)},At=(Ye,Ke)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Ye).then(()=>{const Ue=document.createElement(Ye);return Ue.classList.add("overlay-hidden"),Object.assign(Ue,Object.assign(Object.assign({},Ke),{hasController:!0})),nt(document).appendChild(Ue),new Promise(Bt=>(0,xe.c)(Ue,Bt))}):Promise.resolve(),De='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ye=(Ye,Ke)=>{let Ue=Ye.querySelector(De);const Bt=null==Ue?void 0:Ue.shadowRoot;Bt&&(Ue=Bt.querySelector(De)||Ue),Ue?(0,xe.f)(Ue):Ke.focus()},rt=(Ye,Ke)=>{const Ue=Array.from(Ye.querySelectorAll(De));let Bt=Ue.length>0?Ue[Ue.length-1]:null;const Wt=null==Bt?void 0:Bt.shadowRoot;Wt&&(Bt=Wt.querySelector(De)||Bt),Bt?Bt.focus():Ke.focus()},et=Ye=>{0===Oe&&(Oe=1,Ye.addEventListener("focus",Ke=>{((Ye,Ke)=>{const Ue=Pe(Ke,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Bt=Ye.target;Ue&&Bt&&!Ue.classList.contains("ion-disable-focus-trap")&&(Ue.shadowRoot?(()=>{if(Ue.contains(Bt))Ue.lastFocus=Bt;else{const Ct=Ue.lastFocus;ye(Ue,Ue),Ct===Ke.activeElement&&rt(Ue,Ue),Ue.lastFocus=Ke.activeElement}})():(()=>{if(Ue===Bt)Ue.lastFocus=void 0;else{const Ct=(0,xe.g)(Ue);if(!Ct.contains(Bt))return;const Gn=Ct.querySelector(".ion-overlay-wrapper");if(!Gn)return;if(Gn.contains(Bt))Ue.lastFocus=Bt;else{const Kn=Ue.lastFocus;ye(Gn,Ue),Kn===Ke.activeElement&&rt(Gn,Ue),Ue.lastFocus=Ke.activeElement}}})())})(Ke,Ye)},!0),Ye.addEventListener("ionBackButton",Ke=>{const Ue=Pe(Ye);null!=Ue&&Ue.backdropDismiss&&Ke.detail.register(W.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ue.dismiss(void 0,Ie))}),Ye.addEventListener("keyup",Ke=>{if("Escape"===Ke.key){const Ue=Pe(Ye);null!=Ue&&Ue.backdropDismiss&&Ue.dismiss(void 0,Ie)}}))},He=(Ye,Ke,Ue,Bt,Wt)=>{const Yt=Pe(Ye,Bt,Wt);return Yt?Yt.dismiss(Ke,Ue):Promise.reject("overlay does not exist")},Pe=(Ye,Ke,Ue)=>{const Bt=((Ye,Ke)=>(void 0===Ke&&(Ke="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ye.querySelectorAll(Ke)).filter(Ue=>Ue.overlayIndex>0)))(Ye,Ke).filter(Wt=>!(Ye=>Ye.classList.contains("overlay-hidden"))(Wt));return void 0===Ue?Bt[Bt.length-1]:Bt.find(Wt=>Wt.id===Ue)},Te=(Ye=!1)=>{const Ue=nt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ue&&(Ye?Ue.setAttribute("aria-hidden","true"):Ue.removeAttribute("aria-hidden"))},Se=function(){var Ye=(0,u.Z)(function*(Ke,Ue,Bt,Wt,Yt){var Ct,Gn;if(Ke.presented)return;Te(!0),Ke.presented=!0,Ke.willPresent.emit(),null===(Ct=Ke.willPresentShorthand)||void 0===Ct||Ct.emit();const Kn=(0,Q.b)(Ke),er=Ke.enterAnimation?Ke.enterAnimation:Q.c.get(Ue,"ios"===Kn?Bt:Wt);(yield tt(Ke,er,Ke.el,Yt))&&(Ke.didPresent.emit(),null===(Gn=Ke.didPresentShorthand)||void 0===Gn||Gn.emit()),"ION-TOAST"!==Ke.el.tagName&&it(Ke.el),Ke.keyboardClose&&(null===document.activeElement||!Ke.el.contains(document.activeElement))&&Ke.el.focus()});return function(Ue,Bt,Wt,Yt,Ct){return Ye.apply(this,arguments)}}(),it=function(){var Ye=(0,u.Z)(function*(Ke){let Ue=document.activeElement;if(!Ue)return;const Bt=null==Ue?void 0:Ue.shadowRoot;Bt&&(Ue=Bt.querySelector(De)||Ue),yield Ke.onDidDismiss(),Ue.focus()});return function(Ue){return Ye.apply(this,arguments)}}(),qe=function(){var Ye=(0,u.Z)(function*(Ke,Ue,Bt,Wt,Yt,Ct,Gn){var Kn,er;if(!Ke.presented)return!1;Te(!1),Ke.presented=!1;try{Ke.el.style.setProperty("pointer-events","none"),Ke.willDismiss.emit({data:Ue,role:Bt}),null===(Kn=Ke.willDismissShorthand)||void 0===Kn||Kn.emit({data:Ue,role:Bt});const kn=(0,Q.b)(Ke),dn=Ke.leaveAnimation?Ke.leaveAnimation:Q.c.get(Wt,"ios"===kn?Yt:Ct);Bt!==at&&(yield tt(Ke,dn,Ke.el,Gn)),Ke.didDismiss.emit({data:Ue,role:Bt}),null===(er=Ke.didDismissShorthand)||void 0===er||er.emit({data:Ue,role:Bt}),ke.delete(Ke),Ke.el.classList.add("overlay-hidden"),Ke.el.style.removeProperty("pointer-events"),void 0!==Ke.el.lastFocus&&(Ke.el.lastFocus=void 0)}catch(kn){console.error(kn)}return Ke.el.remove(),!0});return function(Ue,Bt,Wt,Yt,Ct,Gn,Kn){return Ye.apply(this,arguments)}}(),nt=Ye=>Ye.querySelector("ion-app")||Ye.body,tt=function(){var Ye=(0,u.Z)(function*(Ke,Ue,Bt,Wt){Bt.classList.remove("overlay-hidden");const Ct=Ue(Ke.el,Wt);(!Ke.animated||!Q.c.getBoolean("animated",!0))&&Ct.duration(0),Ke.keyboardClose&&Ct.beforeAddWrite(()=>{const Kn=Bt.ownerDocument.activeElement;null!=Kn&&Kn.matches("input,ion-input, ion-textarea")&&Kn.blur()});const Gn=ke.get(Ke)||[];return ke.set(Ke,[...Gn,Ct]),yield Ct.play(),!0});return function(Ue,Bt,Wt,Yt){return Ye.apply(this,arguments)}}(),ze=(Ye,Ke)=>{let Ue;const Bt=new Promise(Wt=>Ue=Wt);return _t(Ye,Ke,Wt=>{Ue(Wt.detail)}),Bt},_t=(Ye,Ke,Ue)=>{const Bt=Wt=>{(0,xe.b)(Ye,Ke,Bt),Ue(Wt)};(0,xe.a)(Ye,Ke,Bt)},ct=Ye=>"cancel"===Ye||Ye===Ie,we=Ye=>Ye(),Ae=(Ye,Ke)=>{if("function"==typeof Ye)return Q.c.get("_zoneGate",we)(()=>{try{return Ye(Ke)}catch(Bt){throw Bt}})},Ie="backdrop",at="gesture"},8080:(yn,Et,V)=>{"use strict";var u=V(1481),Q=V(4650),W=V(1194),xe=V(2078);let Oe=(()=>{class d{constructor(){}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275cmp=Q.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,template:function(l,m){1&l&&(Q.TgZ(0,"ion-app"),Q._UZ(1,"ion-router-outlet"),Q.qZA())},dependencies:[xe.dr,xe.jP]}),d})();const ke=[{path:"home",loadChildren:()=>V.e(4851).then(V.bind(V,4851)).then(d=>d.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([V.e(8592),V.e(4987)]).then(V.bind(V,4987)).then(d=>d.LoginPageModule)},{path:"sign-up",loadChildren:()=>Promise.all([V.e(8592),V.e(4317)]).then(V.bind(V,4317)).then(d=>d.SignUpPageModule)},{path:"tracks/:searchTerm",loadChildren:()=>V.e(6847).then(V.bind(V,6847)).then(d=>d.TracksPageModule)},{path:"details",loadChildren:()=>V.e(2171).then(V.bind(V,2171)).then(d=>d.DetailsPageModule)}];let ve=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=Q.oAB({type:d}),d.\u0275inj=Q.cJS({imports:[W.Bz.forRoot(ke,{preloadingStrategy:W.wm}),W.Bz]}),d})();var Ne=V(433),je=V(2011),me=V(1205),ce=V(9751),he=V(9646),Re=V(8996),Ve=V(4986),lt=V(4482),At=V(5403),ye=V(4004),ue=V(3900),rt=V(8623),pt=V(3942),et=V(5861),He=V(2951),z=V(2090),Pe=V(4859);const Te="firebasestorage.googleapis.com",Se="storageBucket";class tt extends z.ZR{constructor(a,l,m=0){super(_t(a),`Firebase Storage: ${l} (${_t(a)})`),this.status_=m,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return _t(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ze=(()=>{return(d=ze||(ze={})).UNKNOWN="unknown",d.OBJECT_NOT_FOUND="object-not-found",d.BUCKET_NOT_FOUND="bucket-not-found",d.PROJECT_NOT_FOUND="project-not-found",d.QUOTA_EXCEEDED="quota-exceeded",d.UNAUTHENTICATED="unauthenticated",d.UNAUTHORIZED="unauthorized",d.UNAUTHORIZED_APP="unauthorized-app",d.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",d.INVALID_CHECKSUM="invalid-checksum",d.CANCELED="canceled",d.INVALID_EVENT_NAME="invalid-event-name",d.INVALID_URL="invalid-url",d.INVALID_DEFAULT_BUCKET="invalid-default-bucket",d.NO_DEFAULT_BUCKET="no-default-bucket",d.CANNOT_SLICE_BLOB="cannot-slice-blob",d.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",d.NO_DOWNLOAD_URL="no-download-url",d.INVALID_ARGUMENT="invalid-argument",d.INVALID_ARGUMENT_COUNT="invalid-argument-count",d.APP_DELETED="app-deleted",d.INVALID_ROOT_OPERATION="invalid-root-operation",d.INVALID_FORMAT="invalid-format",d.INTERNAL_ERROR="internal-error",d.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ze;var d})();function _t(d){return"storage/"+d}function ct(){return new tt(ze.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ke(){return new tt(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ue(){return new tt(ze.CANCELED,"User canceled the upload/download.")}function Ct(){return new tt(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kn(d){return new tt(ze.INVALID_ARGUMENT,d)}function dn(){return new tt(ze.APP_DELETED,"The Firebase app was deleted.")}function hr(d){return new tt(ze.INVALID_ROOT_OPERATION,"The operation '"+d+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pr(d,a){return new tt(ze.INVALID_FORMAT,"String does not match format '"+d+"': "+a)}function yr(d){throw new tt(ze.INTERNAL_ERROR,"Internal error: "+d)}class Sn{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let m;try{m=Sn.makeFromUrl(a,l)}catch(C){return new Sn(a,"")}if(""===m.path)return m;throw function Wt(d){return new tt(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+d+"'.")}(a)}static makeFromUrl(a,l){let m=null;const C="([A-Za-z0-9.\\-_]+)",X=new RegExp("^gs://"+C+"(/(.*))?$","i");function _e(so){so.path_=decodeURIComponent(so.path)}const Pt=l.replace(/[.]/g,"\\."),Yi=[{regex:X,indices:{bucket:1,path:3},postModify:function M(so){"/"===so.path.charAt(so.path.length-1)&&(so.path_=so.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Pt}/v[A-Za-z0-9_]+/b/${C}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_e},{regex:new RegExp(`^https?://${l===Te?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${C}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_e}];for(let so=0;so<Yi.length;so++){const oa=Yi[so],gc=oa.regex.exec(a);if(gc){let du=gc[oa.indices.path];du||(du=""),m=new Sn(gc[oa.indices.bucket],du),oa.postModify(m);break}}if(null==m)throw function Bt(d){return new tt(ze.INVALID_URL,"Invalid URL '"+d+"'.")}(a);return m}}class vr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function dr(d){return"string"==typeof d||d instanceof String}function Rn(d){return mn()&&d instanceof Blob}function mn(){return typeof Blob<"u"&&!(0,z.UG)()}function cn(d,a,l,m){if(m<a)throw kn(`Invalid value for '${d}'. Expected ${a} or greater.`);if(m>l)throw kn(`Invalid value for '${d}'. Expected ${l} or less.`)}function Vn(d,a,l){let m=a;return null==l&&(m=`https://${a}`),`${l}://${m}/v0${d}`}function Vr(d){const a=encodeURIComponent;let l="?";for(const m in d)d.hasOwnProperty(m)&&(l=l+(a(m)+"=")+a(d[m])+"&");return l=l.slice(0,-1),l}var Jt=(()=>{return(d=Jt||(Jt={}))[d.NO_ERROR=0]="NO_ERROR",d[d.NETWORK_ERROR=1]="NETWORK_ERROR",d[d.ABORT=2]="ABORT",Jt;var d})();function _r(d,a){const l=d>=500&&d<600,C=-1!==[408,429].indexOf(d),M=-1!==a.indexOf(d);return l||C||M}class ei{constructor(a,l,m,C,M,$,X,le,_e,Dt,Pt,Ht=!0){this.url_=a,this.method_=l,this.headers_=m,this.body_=C,this.successCodes_=M,this.additionalRetryCodes_=$,this.callback_=X,this.errorCallback_=le,this.timeout_=_e,this.progressCallback_=Dt,this.connectionFactory_=Pt,this.retry=Ht,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((En,Ln)=>{this.resolve_=En,this.reject_=Ln,this.start_()})}start_(){const l=(m,C)=>{const M=this.resolve_,$=this.reject_,X=C.connection;if(C.wasSuccessCode)try{const le=this.callback_(X,X.getResponse());!function oi(d){return void 0!==d}(le)?M():M(le)}catch(le){$(le)}else if(null!==X){const le=ct();le.serverResponse=X.getErrorText(),$(this.errorCallback_?this.errorCallback_(X,le):le)}else $(C.canceled?this.appDelete_?dn():Ue():Ke())};this.canceled_?l(0,new ii(!1,null,!0)):this.backoffId_=function nn(d,a,l){let m=1,C=null,M=null,$=!1,X=0;function le(){return 2===X}let _e=!1;function Dt(...Ur){_e||(_e=!0,a.apply(null,Ur))}function Pt(Ur){C=setTimeout(()=>{C=null,d(En,le())},Ur)}function Ht(){M&&clearTimeout(M)}function En(Ur,...ws){if(_e)return void Ht();if(Ur)return Ht(),void Dt.call(null,Ur,...ws);if(le()||$)return Ht(),void Dt.call(null,Ur,...ws);let Yi;m<64&&(m*=2),1===X?(X=2,Yi=0):Yi=1e3*(m+Math.random()),Pt(Yi)}let Ln=!1;function Jr(Ur){Ln||(Ln=!0,Ht(),!_e&&(null!==C?(Ur||(X=2),clearTimeout(C),Pt(0)):Ur||(X=1)))}return Pt(0),M=setTimeout(()=>{$=!0,Jr(!0)},l),Jr}((m,C)=>{if(C)return void m(!1,new ii(!1,null,!0));const M=this.connectionFactory_();this.pendingConnection_=M;const $=X=>{null!==this.progressCallback_&&this.progressCallback_(X.loaded,X.lengthComputable?X.total:-1)};null!==this.progressCallback_&&M.addUploadProgressListener($),M.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&M.removeUploadProgressListener($),this.pendingConnection_=null;const X=M.getErrorCode()===Jt.NO_ERROR,le=M.getStatus();if(!X||_r(le,this.additionalRetryCodes_)&&this.retry){const Dt=M.getErrorCode()===Jt.ABORT;return void m(!1,new ii(!1,null,Dt))}const _e=-1!==this.successCodes_.indexOf(le);m(!0,new ii(_e,M))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function ci(d){d(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ii{constructor(a,l,m){this.wasSuccessCode=a,this.connection=l,this.canceled=!!m}}function Or(...d){const a=function Tr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let m=0;m<d.length;m++)l.append(d[m]);return l.getBlob()}if(mn())return new Blob(d);throw new tt(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ge={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jt{constructor(a,l){this.data=a,this.contentType=l||null}}function $t(d,a){switch(d){case Ge.RAW:return new jt(ge(a));case Ge.BASE64:case Ge.BASE64URL:return new jt($e(d,a));case Ge.DATA_URL:return new jt(function dt(d){const a=new It(d);return a.base64?$e(Ge.BASE64,a.rest):function fe(d){let a;try{a=decodeURIComponent(d)}catch(l){throw Pr(Ge.DATA_URL,"Malformed data URL.")}return ge(a)}(a.rest)}(a),function un(d){return new It(d).contentType}(a))}throw ct()}function ge(d){const a=[];for(let l=0;l<d.length;l++){let m=d.charCodeAt(l);m<=127?a.push(m):m<=2047?a.push(192|m>>6,128|63&m):55296==(64512&m)?l<d.length-1&&56320==(64512&d.charCodeAt(l+1))?(m=65536|(1023&m)<<10|1023&d.charCodeAt(++l),a.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m)):a.push(239,191,189):56320==(64512&m)?a.push(239,191,189):a.push(224|m>>12,128|m>>6&63,128|63&m)}return new Uint8Array(a)}function $e(d,a){switch(d){case Ge.BASE64:{const C=-1!==a.indexOf("-"),M=-1!==a.indexOf("_");if(C||M)throw Pr(d,"Invalid character '"+(C?"-":"_")+"' found: is it base64url encoded?");break}case Ge.BASE64URL:{const C=-1!==a.indexOf("+"),M=-1!==a.indexOf("/");if(C||M)throw Pr(d,"Invalid character '"+(C?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Be(d){if(typeof atob>"u")throw function er(d){return new tt(ze.UNSUPPORTED_ENVIRONMENT,`${d} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(d)}(a)}catch(C){throw C.message.includes("polyfill")?C:Pr(d,"Invalid character found")}const m=new Uint8Array(l.length);for(let C=0;C<l.length;C++)m[C]=l.charCodeAt(C);return m}class It{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw Pr(Ge.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const m=l[1]||null;null!=m&&(this.base64=function Fe(d,a){return d.length>=a.length&&d.substring(d.length-a.length)===a}(m,";base64"),this.contentType=this.base64?m.substring(0,m.length-7):m),this.rest=a.substring(a.indexOf(",")+1)}}class Me{constructor(a,l){let m=0,C="";Rn(a)?(this.data_=a,m=a.size,C=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),m=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),m=a.length),this.size_=m,this.type_=C}size(){return this.size_}type(){return this.type_}slice(a,l){if(Rn(this.data_)){const C=function kt(d,a,l){return d.webkitSlice?d.webkitSlice(a,l):d.mozSlice?d.mozSlice(a,l):d.slice?d.slice(a,l):null}(this.data_,a,l);return null===C?null:new Me(C)}{const m=new Uint8Array(this.data_.buffer,a,l-a);return new Me(m,!0)}}static getBlob(...a){if(mn()){const l=a.map(m=>m instanceof Me?m.data_:m);return new Me(Or.apply(null,l))}{const l=a.map($=>dr($)?$t(Ge.RAW,$).data:$.data_);let m=0;l.forEach($=>{m+=$.byteLength});const C=new Uint8Array(m);let M=0;return l.forEach($=>{for(let X=0;X<$.length;X++)C[M++]=$[X]}),new Me(C,!0)}}uploadData(){return this.data_}}function de(d){let a;try{a=JSON.parse(d)}catch(l){return null}return function Ai(d){return"object"==typeof d&&!Array.isArray(d)}(a)?a:null}function Xt(d){const a=d.lastIndexOf("/",d.length-2);return-1===a?d:d.slice(a+1)}function vn(d,a){return a}class Nn{constructor(a,l,m,C){this.server=a,this.local=l||a,this.writable=!!m,this.xform=C||vn}}let rr=null;function Rt(){if(rr)return rr;const d=[];d.push(new Nn("bucket")),d.push(new Nn("generation")),d.push(new Nn("metageneration")),d.push(new Nn("name","fullPath",!0));const l=new Nn("name");l.xform=function a(M,$){return function di(d){return!dr(d)||d.length<2?d:Xt(d)}($)},d.push(l);const C=new Nn("size");return C.xform=function m(M,$){return void 0!==$?Number($):$},d.push(C),d.push(new Nn("timeCreated")),d.push(new Nn("updated")),d.push(new Nn("md5Hash",null,!0)),d.push(new Nn("cacheControl",null,!0)),d.push(new Nn("contentDisposition",null,!0)),d.push(new Nn("contentEncoding",null,!0)),d.push(new Nn("contentLanguage",null,!0)),d.push(new Nn("contentType",null,!0)),d.push(new Nn("metadata","customMetadata",!0)),rr=d,rr}function An(d,a,l){const m=de(a);return null===m?null:function Kt(d,a,l){const m={type:"file"},C=l.length;for(let M=0;M<C;M++){const $=l[M];m[$.local]=$.xform(m,a[$.server])}return function bt(d,a){Object.defineProperty(d,"ref",{get:function l(){const M=new Sn(d.bucket,d.fullPath);return a._makeStorageReference(M)}})}(m,d),m}(d,m,l)}function lr(d,a){const l={},m=a.length;for(let C=0;C<m;C++){const M=a[C];M.writable&&(l[M.server]=d[M.local])}return JSON.stringify(l)}const Er="prefixes",$n="items";class jr{constructor(a,l,m,C){this.url=a,this.method=l,this.handler=m,this.timeout=C,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xr(d){if(!d)throw ct()}function Ni(d,a){return function l(m,C){const M=An(d,C,a);return Xr(null!==M),M}}function Wr(d){return function a(l,m){let C;return C=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function at(){return new tt(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Ie(){return new tt(ze.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function Ae(d){return new tt(ze.QUOTA_EXCEEDED,"Quota for bucket '"+d+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(d.bucket):403===l.getStatus()?function Ye(d){return new tt(ze.UNAUTHORIZED,"User does not have permission to access '"+d+"'.")}(d.path):m,C.status=l.getStatus(),C.serverResponse=m.serverResponse,C}}function pn(d){const a=Wr(d);return function l(m,C){let M=a(m,C);return 404===m.getStatus()&&(M=function we(d){return new tt(ze.OBJECT_NOT_FOUND,"Object '"+d+"' does not exist.")}(d.path)),M.serverResponse=C.serverResponse,M}}function nr(d,a,l){const C=Vn(a.fullServerUrl(),d.host,d._protocol),$=d.maxOperationRetryTime,X=new jr(C,"GET",Ni(d,l),$);return X.errorHandler=pn(a),X}function li(d,a,l,m,C){const M={};M.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(M.delimiter=l),m&&(M.pageToken=m),C&&(M.maxResults=C);const X=Vn(a.bucketOnlyServerUrl(),d.host,d._protocol),_e=d.maxOperationRetryTime,Dt=new jr(X,"GET",function gs(d,a){return function l(m,C){const M=function mr(d,a,l){const m=de(l);return null===m?null:function pr(d,a,l){const m={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Er])for(const C of l[Er]){const M=C.replace(/\/$/,""),$=d._makeStorageReference(new Sn(a,M));m.prefixes.push($)}if(l[$n])for(const C of l[$n]){const M=d._makeStorageReference(new Sn(a,C.name));m.items.push(M)}return m}(d,a,m)}(d,a,C);return Xr(null!==M),M}}(d,a.bucket),_e);return Dt.urlParams=M,Dt.errorHandler=Wr(a),Dt}function ft(d,a,l){const m=Object.assign({},l);return m.fullPath=d.path,m.size=a.size(),m.contentType||(m.contentType=function Ze(d,a){return d&&d.contentType||a&&a.type()||"application/octet-stream"}(null,a)),m}class ae{constructor(a,l,m,C){this.current=a,this.total=l,this.finalized=!!m,this.metadata=C||null}}function Je(d,a){let l=null;try{l=d.getResponseHeader("X-Goog-Upload-Status")}catch(C){Xr(!1)}return Xr(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Pn={STATE_CHANGED:"state_changed"},bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xr(d){switch(d){case"running":case"pausing":case"canceling":return bn.RUNNING;case"paused":return bn.PAUSED;case"success":return bn.SUCCESS;case"canceled":return bn.CANCELED;default:return bn.ERROR}}class zr{constructor(a,l,m){if(function Nr(d){return"function"==typeof d}(a)||null!=l||null!=m)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=m?m:void 0;else{const M=a;this.next=M.next,this.error=M.error,this.complete=M.complete}}}function xi(d){return(...a)=>{Promise.resolve().then(()=>d(...a))}}let ar=null;class Ws{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jt.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jt.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jt.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,m,C){if(this.sent_)throw yr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==C)for(const M in C)C.hasOwnProperty(M)&&this.xhr_.setRequestHeader(M,C[M].toString());return void 0!==m?this.xhr_.send(m):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(a){return-1}}getResponse(){if(!this.sent_)throw yr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class ht extends Ws{initXhr(){this.xhr_.responseType="text"}}function Xe(){return ar?ar():new ht}class Lr{constructor(a,l,m=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=m,this._mappings=Rt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=C=>{if(this._request=void 0,this._chunkMultiplier=1,C._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const M=this.isExponentialBackoffExpired();if(_r(C.status,[])){if(!M)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();C=Ke()}this._error=C,this._transition("error")}},this._metadataErrorHandler=C=>{this._request=void 0,C._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=C,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((C,M)=>{this._resolve=C,this._reject=M,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,m])=>{switch(this._state){case"running":a(l,m);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const m=function vt(d,a,l,m,C){const M=a.bucketOnlyServerUrl(),$=ft(a,m,C),X={name:$.fullPath},le=Vn(M,d.host,d._protocol),Dt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${m.size()}`,"X-Goog-Upload-Header-Content-Type":$.contentType,"Content-Type":"application/json; charset=utf-8"},Pt=lr($,l),Ln=new jr(le,"POST",function En(Jr){let Ur;Je(Jr);try{Ur=Jr.getResponseHeader("X-Goog-Upload-URL")}catch(ws){Xr(!1)}return Xr(dr(Ur)),Ur},d.maxUploadRetryTime);return Ln.urlParams=X,Ln.headers=Dt,Ln.body=Pt,Ln.errorHandler=Wr(a),Ln}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),C=this._ref.storage._makeRequest(m,Xe,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._uploadUrl=M,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,m)=>{const C=function Ft(d,a,l,m){const le=new jr(l,"POST",function M(_e){const Dt=Je(_e,["active","final"]);let Pt=null;try{Pt=_e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(En){Xr(!1)}Pt||Xr(!1);const Ht=Number(Pt);return Xr(!isNaN(Ht)),new ae(Ht,m.size(),"final"===Dt)},d.maxUploadRetryTime);return le.headers={"X-Goog-Upload-Command":"query"},le.errorHandler=Wr(a),le}(this._ref.storage,this._ref._location,a,this._blob),M=this._ref.storage._makeRequest(C,Xe,l,m);this._request=M,M.getPromise().then($=>{this._request=void 0,this._updateProgress($.current),this._needToFetchStatus=!1,$.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new ae(this._transferred,this._blob.size()),m=this._uploadUrl;this._resolveToken((C,M)=>{let $;try{$=function sn(d,a,l,m,C,M,$,X){const le=new ae(0,0);if($?(le.current=$.current,le.total=$.total):(le.current=0,le.total=m.size()),m.size()!==le.total)throw function Gn(){return new tt(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _e=le.total-le.current;let Dt=_e;C>0&&(Dt=Math.min(Dt,C));const Pt=le.current;let En="";En=0===Dt?"finalize":_e===Dt?"upload, finalize":"upload";const Ln={"X-Goog-Upload-Command":En,"X-Goog-Upload-Offset":`${le.current}`},Jr=m.slice(Pt,Pt+Dt);if(null===Jr)throw Ct();const Yi=new jr(l,"POST",function Ur(so,oa){const gc=Je(so,["active","final"]),mc=le.current+Dt,du=m.size();let Gc;return Gc="final"===gc?Ni(a,M)(so,oa):null,new ae(mc,du,"final"===gc,Gc)},a.maxUploadRetryTime);return Yi.headers=Ln,Yi.body=Jr.uploadData(),Yi.progressCallback=X||null,Yi.errorHandler=Wr(d),Yi}(this._ref._location,this._ref.storage,m,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(le){return this._error=le,void this._transition("error")}const X=this._ref.storage._makeRequest($,Xe,C,M,!1);this._request=X,X.getPromise().then(le=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(le.current),le.finalized?(this._metadata=le.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const m=nr(this._ref.storage,this._ref._location,this._mappings),C=this._ref.storage._makeRequest(m,Xe,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const m=function Nt(d,a,l,m,C){const M=a.bucketOnlyServerUrl(),$={"X-Goog-Upload-Protocol":"multipart"},le=function X(){let Yi="";for(let so=0;so<2;so++)Yi+=Math.random().toString().slice(2);return Yi}();$["Content-Type"]="multipart/related; boundary="+le;const _e=ft(a,m,C),Dt=lr(_e,l),En=Me.getBlob("--"+le+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Dt+"\r\n--"+le+"\r\nContent-Type: "+_e.contentType+"\r\n\r\n",m,"\r\n--"+le+"--");if(null===En)throw Ct();const Ln={name:_e.fullPath},Jr=Vn(M,d.host,d._protocol),ws=d.maxUploadRetryTime,Oi=new jr(Jr,"POST",Ni(d,l),ws);return Oi.urlParams=Ln,Oi.headers=$,Oi.body=En.uploadData(),Oi.errorHandler=Wr(a),Oi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),C=this._ref.storage._makeRequest(m,Xe,a,l);this._request=C,C.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=Ue(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=xr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,m,C){const M=new zr(l||void 0,m||void 0,C||void 0);return this._addObserver(M),()=>{this._removeObserver(M)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(xr(this._state)){case bn.SUCCESS:xi(this._resolve.bind(null,this.snapshot))();break;case bn.CANCELED:case bn.ERROR:xi(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(xr(this._state)){case bn.RUNNING:case bn.PAUSED:a.next&&xi(a.next.bind(a,this.snapshot))();break;case bn.SUCCESS:a.complete&&xi(a.complete.bind(a))();break;default:a.error&&xi(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class Xn{constructor(a,l){this._service=a,this._location=l instanceof Sn?l:Sn.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new Xn(a,l)}get root(){const a=new Sn(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xt(this._location.path)}get storage(){return this._service}get parent(){const a=function ut(d){if(0===d.length)return null;const a=d.lastIndexOf("/");return-1===a?"":d.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Sn(this._location.bucket,a);return new Xn(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw hr(a)}}function ko(d,a,l){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,et.Z)(function*(d,a,l){const C=yield Li(d,{pageToken:l});a.prefixes.push(...C.prefixes),a.items.push(...C.items),null!=C.nextPageToken&&(yield ko(d,a,C.nextPageToken))})).apply(this,arguments)}function Li(d,a){null!=a&&"number"==typeof a.maxResults&&cn("options.maxResults",1,1e3,a.maxResults);const l=a||{},m=li(d.storage,d._location,"/",l.pageToken,l.maxResults);return d.storage.makeRequestWithTokens(m,Xe)}function Yo(d){d._throwIfRoot("getDownloadURL");const a=function Zi(d,a,l){const C=Vn(a.fullServerUrl(),d.host,d._protocol),$=d.maxOperationRetryTime,X=new jr(C,"GET",function ss(d,a){return function l(m,C){const M=An(d,C,a);return Xr(null!==M),function jn(d,a,l,m){const C=de(a);if(null===C||!dr(C.downloadTokens))return null;const M=C.downloadTokens;if(0===M.length)return null;const $=encodeURIComponent;return M.split(",").map(_e=>{const Pt=d.fullPath;return Vn("/b/"+$(d.bucket)+"/o/"+$(Pt),l,m)+Vr({alt:"media",token:_e})})[0]}(M,C,d.host,d._protocol)}}(d,l),$);return X.errorHandler=pn(a),X}(d.storage,d._location,Rt());return d.storage.makeRequestWithTokens(a,Xe).then(l=>{if(null===l)throw function Kn(){return new tt(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Cs(d,a){const l=function Mt(d,a){const l=a.split("/").filter(m=>m.length>0).join("/");return 0===d.length?l:d+"/"+l}(d._location.path,a),m=new Sn(d._location.bucket,l);return new Xn(d.storage,m)}function Ha(d,a){if(d instanceof $s){const l=d;if(null==l._bucket)throw function Yt(){return new tt(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Se+"' property when initializing the app?")}();const m=new Xn(l,l._bucket);return null!=a?Ha(m,a):m}return void 0!==a?Cs(d,a):d}function wo(d,a){if(a&&function Ks(d){return/^[A-Za-z]+:\/\//.test(d)}(a)){if(d instanceof $s)return function Ta(d,a){return new Xn(d,a)}(d,a);throw kn("To use ref(service, url), the first argument must be a Storage instance.")}return Ha(d,a)}function Qi(d,a){const l=null==a?void 0:a[Se];return null==l?null:Sn.makeFromBucketSpec(l,d)}class $s{constructor(a,l,m,C,M){this.app=a,this._authProvider=l,this._appCheckProvider=m,this._url=C,this._firebaseVersion=M,this._bucket=null,this._host=Te,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=C?Sn.makeFromBucketSpec(C,this._host):Qi(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Sn.makeFromBucketSpec(this._url,a):Qi(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){cn("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){cn("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,et.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const m=yield l.getToken();if(null!==m)return m.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,et.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new Xn(this,a)}_makeRequest(a,l,m,C,M=!0){if(this._deleted)return new vr(dn());{const $=function ai(d,a,l,m,C,M,$=!0){const X=Vr(d.urlParams),le=d.url+X,_e=Object.assign({},d.headers);return function or(d,a){a&&(d["X-Firebase-GMPID"]=a)}(_e,a),function Fr(d,a){null!==a&&a.length>0&&(d.Authorization="Firebase "+a)}(_e,l),function Di(d,a){d["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(_e,M),function Yn(d,a){null!==a&&(d["X-Firebase-AppCheck"]=a)}(_e,m),new ei(le,d.method,_e,d.body,d.successCodes,d.additionalRetryCodes,d.handler,d.errorHandler,d.timeout,d.progressCallback,C,$)}(a,this._appId,m,C,l,this._firebaseVersion,M);return this._requests.add($),$.getPromise().then(()=>this._requests.delete($),()=>this._requests.delete($)),$}}makeRequestWithTokens(a,l){var m=this;return(0,et.Z)(function*(){const[C,M]=yield Promise.all([m._getAuthToken(),m._getAppCheckToken()]);return m._makeRequest(a,l,C,M).getPromise()})()}}const Bi="@firebase/storage";function Aa(d,a){return wo(d=(0,z.m9)(d),a)}function Ei(d,{instanceIdentifier:a}){const l=d.getProvider("app").getImmediate(),m=d.getProvider("auth-internal"),C=d.getProvider("app-check-internal");return new $s(l,m,C,a,He.SDK_VERSION)}!function Zo(){(0,He._registerComponent)(new Pe.wA("storage",Ei,"PUBLIC").setMultipleInstances(!0)),(0,He.registerVersion)(Bi,"0.11.2",""),(0,He.registerVersion)(Bi,"0.11.2","esm2017")}();class Xs{constructor(a,l,m){this._delegate=a,this.task=l,this.ref=m}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Mi{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xs(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(m=>{if(a)return a(new Xs(m,this,this._ref))},l)}on(a,l,m,C){let M;return l&&(M="function"==typeof l?$=>l(new Xs($,this,this._ref)):{next:l.next?$=>l.next(new Xs($,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,M,m||void 0,C||void 0)}}class fl{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new ys(a,this._service))}get items(){return this._delegate.items.map(a=>new ys(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ys{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function Ds(d,a){return Cs(d,a)}(this._delegate,a);return new ys(l,this.storage)}get root(){return new ys(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new ys(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new Mi(function lo(d,a,l){return function Fi(d,a,l){return d._throwIfRoot("uploadBytesResumable"),new Lr(d,new Me(a),l)}(d=(0,z.m9)(d),a,l)}(this._delegate,a,l),this)}putString(a,l=Ge.RAW,m){this._throwIfRoot("putString");const C=$t(l,a),M=Object.assign({},m);return null==M.contentType&&null!=C.contentType&&(M.contentType=C.contentType),new Mi(new Lr(this._delegate,new Me(C.data,!0),M),this)}listAll(){return function bs(d){return function os(d){const a={prefixes:[],items:[]};return ko(d,a).then(()=>a)}(d=(0,z.m9)(d))}(this._delegate).then(a=>new fl(a,this.storage))}list(a){return function la(d,a){return Li(d=(0,z.m9)(d),a)}(this._delegate,a||void 0).then(l=>new fl(l,this.storage))}getMetadata(){return function Os(d){return function oo(d){d._throwIfRoot("getMetadata");const a=nr(d.storage,d._location,Rt());return d.storage.makeRequestWithTokens(a,Xe)}(d=(0,z.m9)(d))}(this._delegate)}updateMetadata(a){return function uo(d,a){return function Eo(d,a){d._throwIfRoot("updateMetadata");const l=function te(d,a,l,m){const M=Vn(a.fullServerUrl(),d.host,d._protocol),X=lr(l,m),_e=d.maxOperationRetryTime,Dt=new jr(M,"PATCH",Ni(d,m),_e);return Dt.headers={"Content-Type":"application/json; charset=utf-8"},Dt.body=X,Dt.errorHandler=pn(a),Dt}(d.storage,d._location,a,Rt());return d.storage.makeRequestWithTokens(l,Xe)}(d=(0,z.m9)(d),a)}(this._delegate,a)}getDownloadURL(){return function No(d){return Yo(d=(0,z.m9)(d))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ys(d){return function Io(d){d._throwIfRoot("deleteObject");const a=function pe(d,a){const m=Vn(a.fullServerUrl(),d.host,d._protocol),X=new jr(m,"DELETE",function $(le,_e){},d.maxOperationRetryTime);return X.successCodes=[200,204],X.errorHandler=pn(a),X}(d.storage,d._location);return d.storage.makeRequestWithTokens(a,Xe)}(d=(0,z.m9)(d))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw hr(a)}}class ho{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if($i(a))throw kn("ref() expected a child path but got a URL, use refFromURL instead.");return new ys(Aa(this._delegate,a),this)}refFromURL(a){if(!$i(a))throw kn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Sn.makeFromUrl(a,this._delegate.host)}catch(l){throw kn("refFromUrl() expected a valid full URL but got an invalid one.")}return new ys(Aa(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,m={}){!function yi(d,a,l,m={}){!function Sa(d,a,l,m={}){d.host=`${a}:${l}`,d._protocol="http";const{mockUserToken:C}=m;C&&(d._overrideAuthToken="string"==typeof C?C:(0,z.Sg)(C,d.app.options.projectId))}(d,a,l,m)}(this._delegate,a,l,m)}}function $i(d){return/^[A-Za-z]+:\/\//.test(d)}function ls(d,{instanceIdentifier:a}){const l=d.getProvider("app-compat").getImmediate(),m=d.getProvider("storage").getImmediate({identifier:a});return new ho(l,m)}!function ua(d){const a={TaskState:bn,TaskEvent:Pn,StringFormat:Ge,Storage:ho,Reference:ys};d.INTERNAL.registerComponent(new Pe.wA("storage-compat",ls,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),d.registerVersion("@firebase/storage-compat","0.3.2")}(pt.Z);var Lo=V(6217),ur=V(9260);function ca(d){const a=function Co(d){return new ce.y(a=>{const l=$=>a.next($);l(d.snapshot);const M=d.on("state_changed",l);return d.then($=>{l($),a.complete()},$=>{l(d.snapshot),($=>{a.error($)})($)}),function(){M()}}).pipe(function De(d,a=Ve.z){return(0,lt.e)((l,m)=>{let C=null,M=null,$=null;const X=()=>{if(C){C.unsubscribe(),C=null;const _e=M;M=null,m.next(_e)}};function le(){const _e=$+d,Dt=a.now();if(Dt<_e)return C=this.schedule(void 0,_e-Dt),void m.add(C);X()}l.subscribe((0,At.x)(m,_e=>{M=_e,$=a.now(),C||(C=a.schedule(le,d),m.add(C))},()=>{X(),m.complete()},void 0,()=>{M=C=null}))})}(0))}(d);return{task:d,then:d.then.bind(d),catch:d.catch.bind(d),pause:d.pause.bind(d),cancel:d.cancel.bind(d),resume:d.resume.bind(d),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,ye.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function us(d){return{getDownloadURL:()=>(0,he.of)(void 0).pipe(rt.fc,(0,ue.w)(()=>d.getDownloadURL()),rt.iC),getMetadata:()=>(0,he.of)(void 0).pipe(rt.fc,(0,ue.w)(()=>d.getMetadata()),rt.iC),delete:()=>(0,Re.D)(d.delete()),child:a=>us(d.child(a)),updateMetadata:a=>(0,Re.D)(d.updateMetadata(a)),put:(a,l)=>ca(d.put(a,l)),putString:(a,l,m)=>ca(d.putString(a,l,m)),list:a=>(0,Re.D)(d.list(a)),listAll:()=>(0,Re.D)(d.listAll())}}const fo=new Q.OlP("angularfire2.storageBucket"),nl=new Q.OlP("angularfire2.storage.maxUploadRetryTime"),ji=new Q.OlP("angularfire2.storage.maxOperationRetryTime"),Us=new Q.OlP("angularfire2.storage.use-emulator");let y=(()=>{class d{constructor(l,m,C,M,$,X,le,_e,Dt,Pt){const Ht=(0,je.on)(l,$,m);this.storage=(0,je.cc)(`${Ht.name}.storage.${C}`,"AngularFireStorage",Ht.name,()=>{const En=$.runOutsideAngular(()=>Ht.storage(C||void 0)),Ln=Dt;return Ln&&En.useEmulator(...Ln),le&&En.setMaxUploadRetryTime(le),_e&&En.setMaxOperationRetryTime(_e),En},[le,_e])}ref(l){return us(this.storage.ref(l))}refFromURL(l){return us(this.storage.refFromURL(l))}upload(l,m,C){return us(this.storage.ref(l)).put(m,C)}}return d.\u0275fac=function(l){return new(l||d)(Q.LFG(je.Dh),Q.LFG(je.xv,8),Q.LFG(fo,8),Q.LFG(Q.Lbi),Q.LFG(Q.R0b),Q.LFG(rt.HU),Q.LFG(nl,8),Q.LFG(ji,8),Q.LFG(Us,8),Q.LFG(Lo.nm,8))},d.\u0275prov=Q.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),f=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=Q.oAB({type:d}),d.\u0275inj=Q.cJS({}),d})(),T=(()=>{class d{constructor(){ur.Z.registerVersion("angularfire",rt.q4.full,"gcs-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=Q.oAB({type:d}),d.\u0275inj=Q.cJS({providers:[y],imports:[f]}),d})();var q=V(1762),Le=V(6451),tn=V(3099),gn=V(5026),qn=V(1884),Sr=V(8421),hi=V(4671),br=V(5032),cs=V(7669);V(3042);var bo=V(1877);const Do="@firebase/database";let za="";function Ga(d){za=d}class pu{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,z.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,z.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class gu{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,z.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const po=function(d){try{if(typeof window<"u"&&typeof window[d]<"u"){const a=window[d];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new pu(a)}}catch(a){}return new gu},Xo=po("localStorage"),xa=po("sessionStorage"),go=new bo.Yd("@firebase/database"),pl=function(){let d=1;return function(){return d++}}(),gl=function(d){const a=(0,z.dS)(d),l=new z.gQ;l.update(a);const m=l.digest();return z.US.encodeByteArray(m)},Bo=function(...d){let a="";for(let l=0;l<d.length;l++){const m=d[l];Array.isArray(m)||m&&"object"==typeof m&&"number"==typeof m.length?a+=Bo.apply(null,m):a+="object"==typeof m?(0,z.Wl)(m):m,a+=" "}return a};let da=null,Qo=!0;const ha=function(d,a){(0,z.hu)(!a||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(go.logLevel=bo.in.VERBOSE,da=go.log.bind(go),a&&xa.set("logging_enabled",!0)):"function"==typeof d?da=d:(da=null,xa.remove("logging_enabled"))},Hi=function(...d){if(!0===Qo&&(Qo=!1,null===da&&!0===xa.get("logging_enabled")&&ha(!0)),da){const a=Bo.apply(null,d);da(a)}},$o=function(d){return function(...a){Hi(d,...a)}},Jo=function(...d){const a="FIREBASE INTERNAL ERROR: "+Bo(...d);go.error(a)},mo=function(...d){const a=`FIREBASE FATAL ERROR: ${Bo(...d)}`;throw go.error(a),new Error(a)},qr=function(...d){const a="FIREBASE WARNING: "+Bo(...d);go.warn(a)},wi=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Ss="[MIN_NAME]",Uo="[MAX_NAME]",As=function(d,a){if(d===a)return 0;if(d===Ss||a===Uo)return-1;if(a===Ss||d===Uo)return 1;{const l=gr(d),m=gr(a);return null!==l?null!==m?l-m==0?d.length-a.length:l-m:-1:null!==m?1:d<a?-1:1}},Al=function(d,a){return d===a?0:d<a?-1:1},fi=function(d,a){if(a&&d in a)return a[d];throw new Error("Missing required key ("+d+") in object: "+(0,z.Wl)(a))},ml=function(d){if("object"!=typeof d||null===d)return(0,z.Wl)(d);const a=[];for(const m in d)a.push(m);a.sort();let l="{";for(let m=0;m<a.length;m++)0!==m&&(l+=","),l+=(0,z.Wl)(a[m]),l+=":",l+=ml(d[a[m]]);return l+="}",l},rl=function(d,a){const l=d.length;if(l<=a)return[d];const m=[];for(let C=0;C<l;C+=a)m.push(d.substring(C,C+a>l?l:C+a));return m};function F(d,a){for(const l in d)d.hasOwnProperty(l)&&a(l,d[l])}const K=function(d){(0,z.hu)(!wi(d),"Invalid JSON number");const m=1023;let C,M,$,X,le;0===d?(M=0,$=0,C=1/d==-1/0?1:0):(C=d<0,(d=Math.abs(d))>=Math.pow(2,1-m)?(X=Math.min(Math.floor(Math.log(d)/Math.LN2),m),M=X+m,$=Math.round(d*Math.pow(2,52-X)-Math.pow(2,52))):(M=0,$=Math.round(d/Math.pow(2,-1074))));const _e=[];for(le=52;le;le-=1)_e.push($%2?1:0),$=Math.floor($/2);for(le=11;le;le-=1)_e.push(M%2?1:0),M=Math.floor(M/2);_e.push(C?1:0),_e.reverse();const Dt=_e.join("");let Pt="";for(le=0;le<64;le+=8){let Ht=parseInt(Dt.substr(le,8),2).toString(16);1===Ht.length&&(Ht="0"+Ht),Pt+=Ht}return Pt.toLowerCase()},Lt=new RegExp("^-?(0*)\\d{1,10}$"),gr=function(d){if(Lt.test(d)){const a=Number(d);if(a>=-2147483648&&a<=2147483647)return a}return null},kr=function(d){try{d()}catch(a){setTimeout(()=>{throw qr("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Ar=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},wr=function(d,a){const l=setTimeout(d,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Gi{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(m=>this.appCheck=m)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,m)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,m):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(m=>m.addTokenListener(a))}notifyForInvalidToken(){qr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pi{constructor(a,l,m){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=m,this.auth_=null,this.auth_=m.getImmediate({optional:!0}),this.auth_||m.onInit(C=>this.auth_=C)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,m)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,m):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qr(a)}}let Ti=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const Js=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,il="websocket",pa="long_polling";class ql{constructor(a,l,m,C,M=!1,$="",X=!1,le=!1){this.secure=l,this.namespace=m,this.webSocketOnly=C,this.nodeAdmin=M,this.persistenceKey=$,this.includeNamespaceInQueryParams=X,this.isUsingEmulator=le,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xo.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Xo.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Rl(d,a,l){let m;if((0,z.hu)("string"==typeof a,"typeof type must == string"),(0,z.hu)("object"==typeof l,"typeof params must == object"),a===il)m=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(a!==pa)throw new Error("Unknown connection type: "+a);m=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function Wi(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const C=[];return F(l,(M,$)=>{C.push(M+"="+$)}),m+C.join("&")}class qi{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,z.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,z.p$)(this.counters_)}}const Kl={},Ml={};function on(d){const a=d.toString();return Kl[a]||(Kl[a]=new qi),Kl[a]}class pi{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const m=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let C=0;C<m.length;++C)m[C]&&kr(()=>{this.onMessage_(m[C])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ji{constructor(a,l,m,C,M,$,X){this.connId=a,this.repoInfo=l,this.applicationId=m,this.appCheckToken=C,this.authToken=M,this.transportSessionId=$,this.lastSessionId=X,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$o(a),this.stats_=on(l),this.urlFn=le=>(this.appCheckToken&&(le.ac=this.appCheckToken),Rl(l,pa,le))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new pi(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,z.Yr)()||"complete"===document.readyState)d();else{let a=!1;const l=function(){document.body?a||(a=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ka((...M)=>{const[$,X,le,_e,Dt]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===$)this.id=X,this.password=le;else{if("close"!==$)throw new Error("Unrecognized command received: "+$);X?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(X,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[$,X]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse($,X)},()=>{this.onClosed_()},this.urlFn);const m={start:"t"};m.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(m.cb=this.scriptTagHolder.uniqueCallbackIdentifier),m.v="5",this.transportSessionId&&(m.s=this.transportSessionId),this.lastSessionId&&(m.ls=this.lastSessionId),this.applicationId&&(m.p=this.applicationId),this.appCheckToken&&(m.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Js.test(location.hostname)&&(m.r="f");const C=this.urlFn(m);this.log_("Connecting via long-poll to "+C),this.scriptTagHolder.addTag(C,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ji.forceAllow_=!0}static forceDisallow(){Ji.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Ji.forceAllow_&&(Ji.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,z.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const m=(0,z.h$)(l),C=rl(m,1840);for(let M=0;M<C.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,C.length,C[M]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const m={dframe:"t"};m.id=a,m.pw=l,this.myDisconnFrame.src=this.urlFn(m),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,z.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Ka{constructor(a,l,m,C){if(this.onDisconnect=m,this.urlFn=C,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=pl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Ka.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const $="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(X){Hi("frame writing exception"),X.stack&&Hi(X.stack),Hi(X)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||Hi("No IE domain setting required")}catch(l){const m=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+m+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),m="",C=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+m.length<=1870;){const $=this.pendingSegs.shift();m=m+"&seg"+C+"="+$.seg+"&ts"+C+"="+$.ts+"&d"+C+"="+$.d,C++}return l+=m,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,m){this.pendingSegs.push({seg:a,ts:l,d:m}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const m=()=>{this.outstandingRequests.delete(l),this.newRequest_()},C=setTimeout(m,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(C),m()})}addTag(a,l){(0,z.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const m=this.myIFrame.doc.createElement("script");m.type="text/javascript",m.async=!0,m.src=a,m.onload=m.onreadystatechange=function(){const C=m.readyState;(!C||"loaded"===C||"complete"===C)&&(m.onload=m.onreadystatechange=null,m.parentNode&&m.parentNode.removeChild(m),l())},m.onerror=()=>{Hi("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(m)}catch(m){}},Math.floor(1))}}let Ma=null;typeof MozWebSocket<"u"?Ma=MozWebSocket:typeof WebSocket<"u"&&(Ma=WebSocket);let Br=(()=>{class d{constructor(l,m,C,M,$,X,le){this.connId=l,this.applicationId=C,this.appCheckToken=M,this.authToken=$,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$o(this.connId),this.stats_=on(m),this.connURL=d.connectionURL_(m,X,le,M,C),this.nodeAdmin=m.nodeAdmin}static connectionURL_(l,m,C,M,$){const X={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&Js.test(location.hostname)&&(X.r="f"),m&&(X.s=m),C&&(X.ls=C),M&&(X.ac=M),$&&(X.p=$),Rl(l,il,X)}open(l,m){this.onDisconnect=m,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xo.set("previous_websocket_failure",!0);try{let C;if((0,z.Yr)()){C={headers:{"User-Agent":`Firebase/5/${za}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(C.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(C.headers["X-Firebase-AppCheck"]=this.appCheckToken);const $=process.env,X=0===this.connURL.indexOf("wss://")?$.HTTPS_PROXY||$.https_proxy:$.HTTP_PROXY||$.http_proxy;X&&(C.proxy={origin:X})}this.mySock=new Ma(this.connURL,[],C)}catch(C){this.log_("Error instantiating WebSocket.");const M=C.message||C.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=C=>{this.handleIncomingFrame(C)},this.mySock.onerror=C=>{this.log_("WebSocket error.  Closing connection.");const M=C.message||C.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const C=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);C&&C.length>1&&parseFloat(C[1])<4.4&&(l=!0)}return!l&&null!==Ma&&!d.forceDisallow_}static previouslyFailed(){return Xo.isInMemoryStorage||!0===Xo.get("previous_websocket_failure")}markConnectionHealthy(){Xo.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const m=this.frames.join("");this.frames=null;const C=(0,z.cI)(m);this.onMessage(C)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const m=Number(l);if(!isNaN(m))return this.handleNewFrameCount_(m),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const m=l.data;if(this.bytesReceived+=m.length,this.stats_.incrementCounter("bytes_received",m.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(m);else{const C=this.extractFrameCount_(m);null!==C&&this.appendFrame_(C)}}send(l){this.resetKeepAlive();const m=(0,z.Wl)(l);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const C=rl(m,16384);C.length>1&&this.sendString_(String(C.length));for(let M=0;M<C.length;M++)this.sendString_(C[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(m){this.log_("Exception thrown from WebSocket.send():",m.message||m.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),Zn=(()=>{class d{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Ji,Br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const m=Br&&Br.isAvailable();let C=m&&!Br.previouslyFailed();if(l.webSocketOnly&&(m||qr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),C=!0),C)this.transports_=[Br];else{const M=this.transports_=[];for(const $ of d.ALL_TRANSPORTS)$&&$.isAvailable()&&M.push($);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class ti{constructor(a,l,m,C,M,$,X,le,_e,Dt){this.id=a,this.repoInfo_=l,this.applicationId_=m,this.appCheckToken_=C,this.authToken_=M,this.onMessage_=$,this.onReady_=X,this.onDisconnect_=le,this.onKill_=_e,this.lastSessionId=Dt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$o("c:"+this.id+":"),this.transportManager_=new Zn(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),m=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,m)},Math.floor(0));const C=a.healthyTimeout||0;C>0&&(this.healthyTimeout_=wr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(C)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=fi("t",a),m=fi("d",a);if("c"===l)this.onSecondaryControl_(m);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(m)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=fi("t",a),m=fi("d",a);"c"===l?this.onControl_(m):"d"===l&&this.onDataMessage_(m)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=fi("t",a);if("d"in a){const m=a.d;if("h"===l){const C=Object.assign({},m);this.repoInfo_.isUsingEmulator&&(C.h=this.repoInfo_.host),this.onHandshake_(C)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let C=0;C<this.pendingDataMessages.length;++C)this.onDataMessage_(this.pendingDataMessages[C]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(m):"r"===l?this.onReset_(m):"e"===l?Jo("Server Error: "+m):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jo("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,m=a.v,C=a.h;this.sessionId=a.s,this.repoInfo_.host=C,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==m&&qr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),m=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,m),wr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vu{put(a,l,m,C){}merge(a,l,m,C){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,m){}onDisconnectMerge(a,l,m){}onDisconnectCancel(a,l){}reportStats(a){}}class al{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,z.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const m=[...this.listeners_[a]];for(let C=0;C<m.length;C++)m[C].callback.apply(m[C].context,l)}}on(a,l,m){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:m});const C=this.getInitialEvent(a);C&&l.apply(m,C)}off(a,l,m){this.validateEventType_(a);const C=this.listeners_[a]||[];for(let M=0;M<C.length;M++)if(C[M].callback===l&&(!m||m===C[M].context))return void C.splice(M,1)}validateEventType_(a){(0,z.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class Yl extends al{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yl}getInitialEvent(a){return(0,z.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const ds=32,Oa=768;class mt{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let m=0;for(let C=0;C<this.pieces_.length;C++)this.pieces_[C].length>0&&(this.pieces_[m]=this.pieces_[C],m++);this.pieces_.length=m,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Qr(){return new mt("")}function fr(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function vl(d){return d.pieces_.length-d.pieceNum_}function gi(d){let a=d.pieceNum_;return a<d.pieces_.length&&a++,new mt(d.pieces_,a)}function Vo(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function hs(d,a=0){return d.pieces_.slice(d.pieceNum_+a)}function A(d){if(d.pieceNum_>=d.pieces_.length)return null;const a=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)a.push(d.pieces_[l]);return new mt(a,0)}function R(d,a){const l=[];for(let m=d.pieceNum_;m<d.pieces_.length;m++)l.push(d.pieces_[m]);if(a instanceof mt)for(let m=a.pieceNum_;m<a.pieces_.length;m++)l.push(a.pieces_[m]);else{const m=a.split("/");for(let C=0;C<m.length;C++)m[C].length>0&&l.push(m[C])}return new mt(l,0)}function b(d){return d.pieceNum_>=d.pieces_.length}function P(d,a){const l=fr(d),m=fr(a);if(null===l)return a;if(l===m)return P(gi(d),gi(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+d+")")}function j(d,a){const l=hs(d,0),m=hs(a,0);for(let C=0;C<l.length&&C<m.length;C++){const M=As(l[C],m[C]);if(0!==M)return M}return l.length===m.length?0:l.length<m.length?-1:1}function ee(d,a){if(vl(d)!==vl(a))return!1;for(let l=d.pieceNum_,m=a.pieceNum_;l<=d.pieces_.length;l++,m++)if(d.pieces_[l]!==a.pieces_[m])return!1;return!0}function ie(d,a){let l=d.pieceNum_,m=a.pieceNum_;if(vl(d)>vl(a))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==a.pieces_[m])return!1;++l,++m}return!0}class st{constructor(a,l){this.errorPrefix_=l,this.parts_=hs(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let m=0;m<this.parts_.length;m++)this.byteLength_+=(0,z.ug)(this.parts_[m]);Hn(this)}}function Hn(d){if(d.byteLength_>Oa)throw new Error(d.errorPrefix_+"has a key path longer than "+Oa+" bytes ("+d.byteLength_+").");if(d.parts_.length>ds)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ds+") or object contains a cycle "+In(d))}function In(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class mi extends al{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const m=!document[a];m!==this.visible_&&(this.visible_=m,this.trigger("visible",m))},!1)}static getInstance(){return new mi}getInitialEvent(a){return(0,z.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const _i=1e3;let ma,Es=(()=>{class d extends vu{constructor(l,m,C,M,$,X,le,_e){if(super(),this.repoInfo_=l,this.applicationId_=m,this.onDataUpdate_=C,this.onConnectStatus_=M,this.onServerInfoUpdate_=$,this.authTokenProvider_=X,this.appCheckTokenProvider_=le,this.authOverride_=_e,this.id=d.nextPersistentConnectionId_++,this.log_=$o("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_i,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_e&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mi.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Yl.getInstance().on("online",this.onOnline_,this)}sendRequest(l,m,C){const M=++this.requestNumber_,$={r:M,a:l,b:m};this.log_((0,z.Wl)($)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest($),C&&(this.requestCBHash_[M]=C)}get(l){this.initConnection_();const m=new z.BH,M={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:X=>{const le=X.d;"ok"===X.s?m.resolve(le):m.reject(le)}};return this.outstandingGets_.push(M),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),m.promise}listen(l,m,C,M){this.initConnection_();const $=l._queryIdentifier,X=l._path.toString();this.log_("Listen called for "+X+" "+$),this.listens.has(X)||this.listens.set(X,new Map),(0,z.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(X).has($),"listen() called twice for same path/queryId.");const le={onComplete:M,hashFn:m,query:l,tag:C};this.listens.get(X).set($,le),this.connected_&&this.sendListen_(le)}sendGet_(l){const m=this.outstandingGets_[l];this.sendRequest("g",m.request,C=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),m.onComplete&&m.onComplete(C)})}sendListen_(l){const m=l.query,C=m._path.toString(),M=m._queryIdentifier;this.log_("Listen on "+C+" for "+M);const $={p:C};l.tag&&($.q=m._queryObject,$.t=l.tag),$.h=l.hashFn(),this.sendRequest("q",$,le=>{const _e=le.d,Dt=le.s;d.warnOnListenWarnings_(_e,m),(this.listens.get(C)&&this.listens.get(C).get(M))===l&&(this.log_("listen response",le),"ok"!==Dt&&this.removeListen_(C,M),l.onComplete&&l.onComplete(Dt,_e))})}static warnOnListenWarnings_(l,m){if(l&&"object"==typeof l&&(0,z.r3)(l,"w")){const C=(0,z.DV)(l,"w");if(Array.isArray(C)&&~C.indexOf("no_index")){const M='".indexOn": "'+m._queryParams.getIndex().toString()+'"',$=m._path.toString();qr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${$} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,z.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,m=(0,z.w9)(l)?"auth":"gauth",C={cred:l};null===this.authOverride_?C.noauth=!0:"object"==typeof this.authOverride_&&(C.authvar=this.authOverride_),this.sendRequest(m,C,M=>{const $=M.s,X=M.d||"error";this.authToken_===l&&("ok"===$?this.invalidAuthTokenCount_=0:this.onAuthRevoked_($,X))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const m=l.s,C=l.d||"error";"ok"===m?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(m,C)})}unlisten(l,m){const C=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+C+" "+M),(0,z.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(C,M)&&this.connected_&&this.sendUnlisten_(C,M,l._queryObject,m)}sendUnlisten_(l,m,C,M){this.log_("Unlisten on "+l+" for "+m);const $={p:l};M&&($.q=C,$.t=M),this.sendRequest("n",$)}onDisconnectPut(l,m,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,m,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:m,onComplete:C})}onDisconnectMerge(l,m,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,m,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:m,onComplete:C})}onDisconnectCancel(l,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,m):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:m})}sendOnDisconnect_(l,m,C,M){const $={p:m,d:C};this.log_("onDisconnect "+l,$),this.sendRequest(l,$,X=>{M&&setTimeout(()=>{M(X.s,X.d)},Math.floor(0))})}put(l,m,C,M){this.putInternal("p",l,m,C,M)}merge(l,m,C,M){this.putInternal("m",l,m,C,M)}putInternal(l,m,C,M,$){this.initConnection_();const X={p:m,d:C};void 0!==$&&(X.h=$),this.outstandingPuts_.push({action:l,request:X,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+m)}sendPut_(l){const m=this.outstandingPuts_[l].action,C=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(m,C,$=>{this.log_(m+" response",$),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M($.s,$.d)})}reportStats(l){if(this.connected_){const m={c:l};this.log_("reportStats",m),this.sendRequest("s",m,C=>{"ok"!==C.s&&this.log_("reportStats","Error sending stats: "+C.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,z.Wl)(l));const m=l.r,C=this.requestCBHash_[m];C&&(delete this.requestCBHash_[m],C(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,m){this.log_("handleServerMessage",l,m),"d"===l?this.onDataUpdate_(m.p,m.d,!1,m.t):"m"===l?this.onDataUpdate_(m.p,m.d,!0,m.t):"c"===l?this.onListenRevoked_(m.p,m.q):"ac"===l?this.onAuthRevoked_(m.s,m.d):"apc"===l?this.onAppCheckRevoked_(m.s,m.d):"sd"===l?this.onSecurityDebugPacket_(m):Jo("Unrecognized action received from server: "+(0,z.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_i),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let m=Math.max(0,this.reconnectDelay_-l);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,et.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const m=l.onDataMessage_.bind(l),C=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),$=l.id+":"+d.nextConnectionId_++,X=l.lastSessionId;let le=!1,_e=null;const Dt=function(){_e?_e.close():(le=!0,M())};l.realtime_={close:Dt,sendRequest:function(En){(0,z.hu)(_e,"sendRequest call when we're not connected not allowed."),_e.sendRequest(En)}};const Ht=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[En,Ln]=yield Promise.all([l.authTokenProvider_.getToken(Ht),l.appCheckTokenProvider_.getToken(Ht)]);le?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),l.authToken_=En&&En.accessToken,l.appCheckToken_=Ln&&Ln.token,_e=new ti($,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,m,C,M,Jr=>{qr(Jr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},X))}catch(En){l.log_("Failed to get token: "+En),le||(l.repoInfo_.nodeAdmin&&qr(En),Dt())}}})()}interrupt(l){Hi("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Hi("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const m=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:m})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const m=this.outstandingPuts_[l];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,m){let C;C=m?m.map($=>ml($)).join("$"):"default";const M=this.removeListen_(l,C);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,m){const C=new mt(l).toString();let M;if(this.listens.has(C)){const $=this.listens.get(C);M=$.get(m),$.delete(m),0===$.size&&this.listens.delete(C)}else M=void 0;return M}onAuthRevoked_(l,m){Hi("Auth token revoked: "+l+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,m){Hi("App check token revoked: "+l+"/"+m),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const m of l.values())this.sendListen_(m);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let m="js";(0,z.Yr)()&&(m=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+m+"."+za.replace(/\./g,"-")]=1,(0,z.uI)()?l["framework.cordova"]=1:(0,z.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Yl.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Gr{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new Gr(a,l)}}class Fl{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const m=new Gr(Ss,a),C=new Gr(Ss,l);return 0!==this.compare(m,C)}minPost(){return Gr.MIN}}class Wu extends Fl{static get __EMPTY_NODE(){return ma}static set __EMPTY_NODE(a){ma=a}compare(a,l){return As(a.name,l.name)}isDefinedOn(a){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return Gr.MIN}maxPost(){return new Gr(Uo,ma)}makePost(a,l){return(0,z.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Gr(a,ma)}toString(){return".key"}}const Za=new Wu;class Xc{constructor(a,l,m,C,M=null){this.isReverse_=C,this.resultGenerator_=M,this.nodeStack_=[];let $=1;for(;!a.isEmpty();)if($=l?m(a.key,l):1,C&&($*=-1),$<0)a=this.isReverse_?a.left:a.right;else{if(0===$){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let wc,ya=(()=>{class d{constructor(l,m,C,M,$){this.key=l,this.value=m,this.color=null!=C?C:d.RED,this.left=null!=M?M:no.EMPTY_NODE,this.right=null!=$?$:no.EMPTY_NODE}copy(l,m,C,M,$){return new d(null!=l?l:this.key,null!=m?m:this.value,null!=C?C:this.color,null!=M?M:this.left,null!=$?$:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,m,C){let M=this;const $=C(l,M.key);return M=$<0?M.copy(null,null,null,M.left.insert(l,m,C),null):0===$?M.copy(null,m,null,null,null):M.copy(null,null,null,null,M.right.insert(l,m,C)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return no.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,m){let C,M;if(C=this,m(l,C.key)<0)!C.left.isEmpty()&&!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.remove(l,m),null);else{if(C.left.isRed_()&&(C=C.rotateRight_()),!C.right.isEmpty()&&!C.right.isRed_()&&!C.right.left.isRed_()&&(C=C.moveRedRight_()),0===m(l,C.key)){if(C.right.isEmpty())return no.EMPTY_NODE;M=C.right.min_(),C=C.copy(M.key,M.value,null,null,C.right.removeMin_())}C=C.copy(null,null,null,null,C.right.remove(l,m))}return C.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),m=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,m)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class no{constructor(a,l=no.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new no(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,ya.BLACK,null,null))}remove(a){return new no(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,ya.BLACK,null,null))}get(a){let l,m=this.root_;for(;!m.isEmpty();){if(l=this.comparator_(a,m.key),0===l)return m.value;l<0?m=m.left:l>0&&(m=m.right)}return null}getPredecessorKey(a){let l,m=this.root_,C=null;for(;!m.isEmpty();){if(l=this.comparator_(a,m.key),0===l){if(m.left.isEmpty())return C?C.key:null;for(m=m.left;!m.right.isEmpty();)m=m.right;return m.key}l<0?m=m.left:l>0&&(C=m,m=m.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new Xc(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new Xc(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new Xc(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new Xc(this.root_,null,this.comparator_,!0,a)}}function qu(d,a){return As(d.name,a.name)}function Qc(d,a){return As(d,a)}no.EMPTY_NODE=new class wh{copy(a,l,m,C,M){return this}insert(a,l,m){return new ya(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Jc=function(d){return"number"==typeof d?"number:"+K(d):"string:"+d},ul=function(d){if(d.isLeafNode()){const a=d.val();(0,z.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,z.r3)(a,".sv"),"Priority must be a string or number.")}else(0,z.hu)(d===wc||d.isEmpty(),"priority of unexpected type.");(0,z.hu)(d===wc||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Is,_a,Yu,Ku=(()=>{class d{constructor(l,m=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=m,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ul(this.priorityNode_)}static set __childrenNodeConstructor(l){Is=l}static get __childrenNodeConstructor(){return Is}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return b(l)?this:".priority"===fr(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,m){return null}updateImmediateChild(l,m){return".priority"===l?this.updatePriority(m):m.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,m).updatePriority(this.priorityNode_)}updateChild(l,m){const C=fr(l);return null===C?m:m.isEmpty()&&".priority"!==C?this:((0,z.hu)(".priority"!==C||1===vl(l),".priority must be the last token in a path"),this.updateImmediateChild(C,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(gi(l),m)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,m){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Jc(this.priorityNode_.val())+":");const m=typeof this.value_;l+=m+":",l+="number"===m?K(this.value_):this.value_,this.lazyHash_=gl(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,z.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const m=typeof l.value_,C=typeof this.value_,M=d.VALUE_TYPE_ORDER.indexOf(m),$=d.VALUE_TYPE_ORDER.indexOf(C);return(0,z.hu)(M>=0,"Unknown leaf type: "+m),(0,z.hu)($>=0,"Unknown leaf type: "+C),M===$?"object"===C?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:$-M}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const B=new class N extends Fl{compare(a,l){const m=a.node.getPriority(),C=l.node.getPriority(),M=m.compareTo(C);return 0===M?As(a.name,l.name):M}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return Gr.MIN}maxPost(){return new Gr(Uo,new Ku("[PRIORITY-POST]",Yu))}makePost(a,l){const m=_a(a);return new Gr(l,new Ku("[PRIORITY-POST]",m))}toString(){return".priority"}},J=Math.log(2);class Ee{constructor(a){this.count=parseInt(Math.log(a+1)/J,10),this.current_=this.count-1;const C=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&C}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const ot=function(d,a,l,m){d.sort(a);const C=function(le,_e){const Dt=_e-le;let Pt,Ht;if(0===Dt)return null;if(1===Dt)return Pt=d[le],Ht=l?l(Pt):Pt,new ya(Ht,Pt.node,ya.BLACK,null,null);{const En=parseInt(Dt/2,10)+le,Ln=C(le,En),Jr=C(En+1,_e);return Pt=d[En],Ht=l?l(Pt):Pt,new ya(Ht,Pt.node,ya.BLACK,Ln,Jr)}},X=function(le){let _e=null,Dt=null,Pt=d.length;const Ht=function(Ln,Jr){const Ur=Pt-Ln,ws=Pt;Pt-=Ln;const Oi=C(Ur+1,ws),Yi=d[Ur],so=l?l(Yi):Yi;En(new ya(so,Yi.node,Jr,null,Oi))},En=function(Ln){_e?(_e.left=Ln,_e=Ln):(Dt=Ln,_e=Ln)};for(let Ln=0;Ln<le.count;++Ln){const Jr=le.nextBitIsOne(),Ur=Math.pow(2,le.count-(Ln+1));Jr?Ht(Ur,ya.BLACK):(Ht(Ur,ya.BLACK),Ht(Ur,ya.RED))}return Dt}(new Ee(d.length));return new no(m||a,X)};let St;const en={};class hn{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,z.hu)(en&&B,"ChildrenNode.ts has not been loaded"),St=St||new hn({".priority":en},{".priority":B}),St}get(a){const l=(0,z.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof no?l:null}hasIndex(a){return(0,z.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,z.hu)(a!==Za,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const m=[];let C=!1;const M=l.getIterator(Gr.Wrap);let X,$=M.getNext();for(;$;)C=C||a.isDefinedOn($.node),m.push($),$=M.getNext();X=C?ot(m,a.getCompare()):en;const le=a.toString(),_e=Object.assign({},this.indexSet_);_e[le]=a;const Dt=Object.assign({},this.indexes_);return Dt[le]=X,new hn(Dt,_e)}addToIndexes(a,l){const m=(0,z.UI)(this.indexes_,(C,M)=>{const $=(0,z.DV)(this.indexSet_,M);if((0,z.hu)($,"Missing index implementation for "+M),C===en){if($.isDefinedOn(a.node)){const X=[],le=l.getIterator(Gr.Wrap);let _e=le.getNext();for(;_e;)_e.name!==a.name&&X.push(_e),_e=le.getNext();return X.push(a),ot(X,$.getCompare())}return en}{const X=l.get(a.name);let le=C;return X&&(le=le.remove(new Gr(a.name,X))),le.insert(a,a.node)}});return new hn(m,this.indexSet_)}removeFromIndexes(a,l){const m=(0,z.UI)(this.indexes_,C=>{if(C===en)return C;{const M=l.get(a.name);return M?C.remove(new Gr(a.name,M)):C}});return new hn(m,this.indexSet_)}}let Bn,ln=(()=>{class d{constructor(l,m,C){this.children_=l,this.priorityNode_=m,this.indexMap_=C,this.lazyHash_=null,this.priorityNode_&&ul(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Bn||(Bn=new d(new no(Qc),null,hn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bn}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const m=this.children_.get(l);return null===m?Bn:m}}getChild(l){const m=fr(l);return null===m?this:this.getImmediateChild(m).getChild(gi(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,m){if((0,z.hu)(m,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(m);{const C=new Gr(l,m);let M,$;m.isEmpty()?(M=this.children_.remove(l),$=this.indexMap_.removeFromIndexes(C,this.children_)):(M=this.children_.insert(l,m),$=this.indexMap_.addToIndexes(C,this.children_));const X=M.isEmpty()?Bn:this.priorityNode_;return new d(M,X,$)}}updateChild(l,m){const C=fr(l);if(null===C)return m;{(0,z.hu)(".priority"!==fr(l)||1===vl(l),".priority must be the last token in a path");const M=this.getImmediateChild(C).updateChild(gi(l),m);return this.updateImmediateChild(C,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const m={};let C=0,M=0,$=!0;if(this.forEachChild(B,(X,le)=>{m[X]=le.val(l),C++,$&&d.INTEGER_REGEXP_.test(X)?M=Math.max(M,Number(X)):$=!1}),!l&&$&&M<2*C){const X=[];for(const le in m)X[le]=m[le];return X}return l&&!this.getPriority().isEmpty()&&(m[".priority"]=this.getPriority().val()),m}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Jc(this.getPriority().val())+":"),this.forEachChild(B,(m,C)=>{const M=C.hash();""!==M&&(l+=":"+m+":"+M)}),this.lazyHash_=""===l?"":gl(l)}return this.lazyHash_}getPredecessorChildName(l,m,C){const M=this.resolveIndex_(C);if(M){const $=M.getPredecessorKey(new Gr(l,m));return $?$.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const m=this.resolveIndex_(l);if(m){const C=m.minKey();return C&&C.name}return this.children_.minKey()}getFirstChild(l){const m=this.getFirstChildName(l);return m?new Gr(m,this.children_.get(m)):null}getLastChildName(l){const m=this.resolveIndex_(l);if(m){const C=m.maxKey();return C&&C.name}return this.children_.maxKey()}getLastChild(l){const m=this.getLastChildName(l);return m?new Gr(m,this.children_.get(m)):null}forEachChild(l,m){const C=this.resolveIndex_(l);return C?C.inorderTraversal(M=>m(M.name,M.node)):this.children_.inorderTraversal(m)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,m){const C=this.resolveIndex_(m);if(C)return C.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,Gr.Wrap);let $=M.peek();for(;null!=$&&m.compare($,l)<0;)M.getNext(),$=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,m){const C=this.resolveIndex_(m);if(C)return C.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,Gr.Wrap);let $=M.peek();for(;null!=$&&m.compare($,l)>0;)M.getNext(),$=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ir?-1:0}withIndex(l){if(l===Za||this.indexMap_.hasIndex(l))return this;{const m=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,m)}}isIndexed(l){return l===Za||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const m=l;if(this.getPriority().equals(m.getPriority())){if(this.children_.count()===m.children_.count()){const C=this.getIterator(B),M=m.getIterator(B);let $=C.getNext(),X=M.getNext();for(;$&&X;){if($.name!==X.name||!$.node.equals(X.node))return!1;$=C.getNext(),X=M.getNext()}return null===$&&null===X}return!1}return!1}}resolveIndex_(l){return l===Za?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const ir=new class tr extends ln{constructor(){super(new no(Qc),ln.EMPTY_NODE,hn.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return ln.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Gr,{MIN:{value:new Gr(Ss,ln.EMPTY_NODE)},MAX:{value:new Gr(Uo,ir)}}),Wu.__EMPTY_NODE=ln.EMPTY_NODE,Ku.__childrenNodeConstructor=ln,function va(d){wc=d}(ir),function Cc(d){Yu=d}(ir);const Ao=!0;function Kr(d,a=null){if(null===d)return ln.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(a=d[".priority"]),(0,z.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new Ku(d,Kr(a));if(d instanceof Array||!Ao){let l=ln.EMPTY_NODE;return F(d,(m,C)=>{if((0,z.r3)(d,m)&&"."!==m.substring(0,1)){const M=Kr(C);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(m,M))}}),l.updatePriority(Kr(a))}{const l=[];let m=!1;if(F(d,($,X)=>{if("."!==$.substring(0,1)){const le=Kr(X);le.isEmpty()||(m=m||!le.getPriority().isEmpty(),l.push(new Gr($,le)))}}),0===l.length)return ln.EMPTY_NODE;const M=ot(l,qu,$=>$.name,Qc);if(m){const $=ot(l,B.getCompare());return new ln(M,Kr(a),new hn({".priority":$},{".priority":B}))}return new ln(M,Kr(a),hn.Default)}}!function zi(d){_a=d}(Kr);class ka extends Fl{constructor(a){super(),this.indexPath_=a,(0,z.hu)(!b(a)&&".priority"!==fr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const m=this.extractChild(a.node),C=this.extractChild(l.node),M=m.compareTo(C);return 0===M?As(a.name,l.name):M}makePost(a,l){const m=Kr(a),C=ln.EMPTY_NODE.updateChild(this.indexPath_,m);return new Gr(l,C)}maxPost(){const a=ln.EMPTY_NODE.updateChild(this.indexPath_,ir);return new Gr(Uo,a)}toString(){return hs(this.indexPath_,0).join("/")}}const vo=new class Na extends Fl{compare(a,l){const m=a.node.compareTo(l.node);return 0===m?As(a.name,l.name):m}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return Gr.MIN}maxPost(){return Gr.MAX}makePost(a,l){const m=Kr(a);return new Gr(l,m)}toString(){return".value"}};function js(d){return{type:"value",snapshotNode:d}}function xo(d,a){return{type:"child_added",snapshotNode:a,childName:d}}function na(d,a){return{type:"child_removed",snapshotNode:a,childName:d}}function ra(d,a,l){return{type:"child_changed",snapshotNode:a,childName:d,oldSnap:l}}class Ll{constructor(a){this.index_=a}updateChild(a,l,m,C,M,$){(0,z.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const X=a.getImmediateChild(l);return X.getChild(C).equals(m.getChild(C))&&X.isEmpty()===m.isEmpty()||(null!=$&&(m.isEmpty()?a.hasChild(l)?$.trackChildChange(na(l,X)):(0,z.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):X.isEmpty()?$.trackChildChange(xo(l,m)):$.trackChildChange(ra(l,m,X))),a.isLeafNode()&&m.isEmpty())?a:a.updateImmediateChild(l,m).withIndex(this.index_)}updateFullNode(a,l,m){return null!=m&&(a.isLeafNode()||a.forEachChild(B,(C,M)=>{l.hasChild(C)||m.trackChildChange(na(C,M))}),l.isLeafNode()||l.forEachChild(B,(C,M)=>{if(a.hasChild(C)){const $=a.getImmediateChild(C);$.equals(M)||m.trackChildChange(ra(C,M,$))}else m.trackChildChange(xo(C,M))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?ln.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class bc{constructor(a){this.indexedFilter_=new Ll(a.getIndex()),this.index_=a.getIndex(),this.startPost_=bc.getStartPost_(a),this.endPost_=bc.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,m=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&m}updateChild(a,l,m,C,M,$){return this.matches(new Gr(l,m))||(m=ln.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,m,C,M,$)}updateFullNode(a,l,m){l.isLeafNode()&&(l=ln.EMPTY_NODE);let C=l.withIndex(this.index_);C=C.updatePriority(ln.EMPTY_NODE);const M=this;return l.forEachChild(B,($,X)=>{M.matches(new Gr($,X))||(C=C.updateImmediateChild($,ln.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,C,m)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class Zu{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const m=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?m<=0:m<0},this.withinEndPost=l=>{const m=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?m<=0:m<0},this.rangedFilter_=new bc(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,m,C,M,$){return this.rangedFilter_.matches(new Gr(l,m))||(m=ln.EMPTY_NODE),a.getImmediateChild(l).equals(m)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,m,C,M,$):this.fullLimitUpdateChild_(a,l,m,M,$)}updateFullNode(a,l,m){let C;if(l.isLeafNode()||l.isEmpty())C=ln.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;C=ln.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let $=0;for(;M.hasNext()&&$<this.limit_;){const X=M.getNext();if(this.withinDirectionalStart(X)){if(!this.withinDirectionalEnd(X))break;C=C.updateImmediateChild(X.name,X.node),$++}}}else{let M;C=l.withIndex(this.index_),C=C.updatePriority(ln.EMPTY_NODE),M=this.reverse_?C.getReverseIterator(this.index_):C.getIterator(this.index_);let $=0;for(;M.hasNext();){const X=M.getNext();$<this.limit_&&this.withinDirectionalStart(X)&&this.withinDirectionalEnd(X)?$++:C=C.updateImmediateChild(X.name,ln.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,C,m)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,m,C,M){let $;if(this.reverse_){const Pt=this.index_.getCompare();$=(Ht,En)=>Pt(En,Ht)}else $=this.index_.getCompare();const X=a;(0,z.hu)(X.numChildren()===this.limit_,"");const le=new Gr(l,m),_e=this.reverse_?X.getFirstChild(this.index_):X.getLastChild(this.index_),Dt=this.rangedFilter_.matches(le);if(X.hasChild(l)){const Pt=X.getImmediateChild(l);let Ht=C.getChildAfterChild(this.index_,_e,this.reverse_);for(;null!=Ht&&(Ht.name===l||X.hasChild(Ht.name));)Ht=C.getChildAfterChild(this.index_,Ht,this.reverse_);const En=null==Ht?1:$(Ht,le);if(Dt&&!m.isEmpty()&&En>=0)return null!=M&&M.trackChildChange(ra(l,m,Pt)),X.updateImmediateChild(l,m);{null!=M&&M.trackChildChange(na(l,Pt));const Jr=X.updateImmediateChild(l,ln.EMPTY_NODE);return null!=Ht&&this.rangedFilter_.matches(Ht)?(null!=M&&M.trackChildChange(xo(Ht.name,Ht.node)),Jr.updateImmediateChild(Ht.name,Ht.node)):Jr}}return m.isEmpty()?a:Dt&&$(_e,le)>=0?(null!=M&&(M.trackChildChange(na(_e.name,_e.node)),M.trackChildChange(xo(l,m))),X.updateImmediateChild(l,m).updateImmediateChild(_e.name,ln.EMPTY_NODE)):a}}class _u{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=B}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ss}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===B}copy(){const a=new _u;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Eu(d,a,l){const m=d.copy();return m.startSet_=!0,void 0===a&&(a=null),m.indexStartValue_=a,null!=l?(m.startNameSet_=!0,m.indexStartName_=l):(m.startNameSet_=!1,m.indexStartName_=""),m}function io(d,a,l){const m=d.copy();return m.endSet_=!0,void 0===a&&(a=null),m.indexEndValue_=a,void 0!==l?(m.endNameSet_=!0,m.indexEndName_=l):(m.endNameSet_=!1,m.indexEndName_=""),m}function Zl(d,a){const l=d.copy();return l.index_=a,l}function Od(d){const a={};if(d.isDefault())return a;let l;if(d.index_===B?l="$priority":d.index_===vo?l="$value":d.index_===Za?l="$key":((0,z.hu)(d.index_ instanceof ka,"Unrecognized index type!"),l=d.index_.toString()),a.orderBy=(0,z.Wl)(l),d.startSet_){const m=d.startAfterSet_?"startAfter":"startAt";a[m]=(0,z.Wl)(d.indexStartValue_),d.startNameSet_&&(a[m]+=","+(0,z.Wl)(d.indexStartName_))}if(d.endSet_){const m=d.endBeforeSet_?"endBefore":"endAt";a[m]=(0,z.Wl)(d.indexEndValue_),d.endNameSet_&&(a[m]+=","+(0,z.Wl)(d.indexEndName_))}return d.limitSet_&&(d.isViewFromLeft()?a.limitToFirst=d.limit_:a.limitToLast=d.limit_),a}function Ef(d){const a={};if(d.startSet_&&(a.sp=d.indexStartValue_,d.startNameSet_&&(a.sn=d.indexStartName_),a.sin=!d.startAfterSet_),d.endSet_&&(a.ep=d.indexEndValue_,d.endNameSet_&&(a.en=d.indexEndName_),a.ein=!d.endBeforeSet_),d.limitSet_){a.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),a.vf=l}return d.index_!==B&&(a.i=d.index_.toString()),a}class nd extends vu{constructor(a,l,m,C){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=m,this.appCheckTokenProvider_=C,this.log_=$o("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,z.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,m,C){const M=a._path.toString();this.log_("Listen called for "+M+" "+a._queryIdentifier);const $=nd.getListenId_(a,m),X={};this.listens_[$]=X;const le=Od(a._queryParams);this.restRequest_(M+".json",le,(_e,Dt)=>{let Pt=Dt;if(404===_e&&(Pt=null,_e=null),null===_e&&this.onDataUpdate_(M,Pt,!1,m),(0,z.DV)(this.listens_,$)===X){let Ht;Ht=_e?401===_e?"permission_denied":"rest_error:"+_e:"ok",C(Ht,null)}})}unlisten(a,l){const m=nd.getListenId_(a,l);delete this.listens_[m]}get(a){const l=Od(a._queryParams),m=a._path.toString(),C=new z.BH;return this.restRequest_(m+".json",l,(M,$)=>{let X=$;404===M&&(X=null,M=null),null===M?(this.onDataUpdate_(m,X,!1,null),C.resolve(X)):C.reject(new Error(X))}),C.promise}refreshAuthToken(a){}restRequest_(a,l={},m){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([C,M])=>{C&&C.accessToken&&(l.auth=C.accessToken),M&&M.token&&(l.ac=M.token);const $=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,z.xO)(l);this.log_("Sending REST request for "+$);const X=new XMLHttpRequest;X.onreadystatechange=()=>{if(m&&4===X.readyState){this.log_("REST Response for "+$+" received. status:",X.status,"response:",X.responseText);let le=null;if(X.status>=200&&X.status<300){try{le=(0,z.cI)(X.responseText)}catch(_e){qr("Failed to parse JSON response for "+$+": "+X.responseText)}m(null,le)}else 401!==X.status&&404!==X.status&&qr("Got unsuccessful REST response for "+$+" Status: "+X.status),m(X.status);m=null}},X.open("GET",$,!0),X.send()})}}class kd{constructor(){this.rootNode_=ln.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function wu(){return{value:null,children:new Map}}function ks(d,a,l){if(b(a))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(a,l);else{const m=fr(a);d.children.has(m)||d.children.set(m,wu()),ks(d.children.get(m),a=gi(a),l)}}function Xu(d,a){if(b(a))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(B,(m,C)=>{ks(d,new mt(m),C)}),Xu(d,a)}}if(d.children.size>0){const l=fr(a);return a=gi(a),d.children.has(l)&&Xu(d.children.get(l),a)&&d.children.delete(l),0===d.children.size}return!0}function es(d,a,l){null!==d.value?l(a,d.value):function Xl(d,a){d.children.forEach((l,m)=>{a(m,l)})}(d,(m,C)=>{es(C,new mt(a.toString()+"/"+m),l)})}class Nd{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&F(this.last_,(m,C)=>{l[m]=l[m]-C}),this.last_=a,l}}class Ld{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Nd(a);const m=1e4+2e4*Math.random();wr(this.reportStats_.bind(this),Math.floor(m))}reportStats_(){const a=this.statsListener_.get(),l={};let m=!1;F(a,(C,M)=>{M>0&&(0,z.r3)(this.statsToReport_,C)&&(l[C]=M,m=!0)}),m&&this.server_.reportStats(l),wr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $r=(()=>{return(d=$r||($r={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$r;var d})();function Ju(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class El{constructor(a,l,m){this.path=a,this.affectedTree=l,this.revert=m,this.type=$r.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(b(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new mt(a));return new El(Qr(),l,this.revert)}}return(0,z.hu)(fr(this.path)===a,"operationForChild called for unrelated child."),new El(gi(this.path),this.affectedTree,this.revert)}}class Cu{constructor(a,l){this.source=a,this.path=l,this.type=$r.LISTEN_COMPLETE}operationForChild(a){return b(this.path)?new Cu(this.source,Qr()):new Cu(this.source,gi(this.path))}}class Bl{constructor(a,l,m){this.source=a,this.path=l,this.snap=m,this.type=$r.OVERWRITE}operationForChild(a){return b(this.path)?new Bl(this.source,Qr(),this.snap.getImmediateChild(a)):new Bl(this.source,gi(this.path),this.snap)}}class ec{constructor(a,l,m){this.source=a,this.path=l,this.children=m,this.type=$r.MERGE}operationForChild(a){if(b(this.path)){const l=this.children.subtree(new mt(a));return l.isEmpty()?null:l.value?new Bl(this.source,Qr(),l.value):new ec(this.source,Qr(),l)}return(0,z.hu)(fr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new ec(this.source,gi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Il{constructor(a,l,m){this.node_=a,this.fullyInitialized_=l,this.filtered_=m}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(b(a))return this.isFullyInitialized()&&!this.filtered_;const l=fr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class Ch{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Bd(d,a,l,m,C,M){const $=m.filter(X=>X.type===l);$.sort((X,le)=>function If(d,a,l){if(null==a.childName||null==l.childName)throw(0,z.g5)("Should only compare child_ events.");const m=new Gr(a.childName,a.snapshotNode),C=new Gr(l.childName,l.snapshotNode);return d.index_.compare(m,C)}(d,X,le)),$.forEach(X=>{const le=function tc(d,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,d.index_)),a}(d,X,M);C.forEach(_e=>{_e.respondsTo(X.type)&&a.push(_e.createEvent(le,d.query_))})})}function $d(d,a){return{eventCache:d,serverCache:a}}function Ql(d,a,l,m){return $d(new Il(a,l,m),d.serverCache)}function Ud(d,a,l,m){return $d(d.eventCache,new Il(a,l,m))}function nc(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function Jl(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let rd;class Vi{constructor(a,l=(()=>(rd||(rd=new no(Al)),rd))()){this.value=a,this.children=l}static fromObject(a){let l=new Vi(null);return F(a,(m,C)=>{l=l.set(new mt(m),C)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Qr(),value:this.value};if(b(a))return null;{const m=fr(a),C=this.children.get(m);if(null!==C){const M=C.findRootMostMatchingPathAndValue(gi(a),l);return null!=M?{path:R(new mt(m),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(b(a))return this;{const l=fr(a),m=this.children.get(l);return null!==m?m.subtree(gi(a)):new Vi(null)}}set(a,l){if(b(a))return new Vi(l,this.children);{const m=fr(a),M=(this.children.get(m)||new Vi(null)).set(gi(a),l),$=this.children.insert(m,M);return new Vi(this.value,$)}}remove(a){if(b(a))return this.children.isEmpty()?new Vi(null):new Vi(null,this.children);{const l=fr(a),m=this.children.get(l);if(m){const C=m.remove(gi(a));let M;return M=C.isEmpty()?this.children.remove(l):this.children.insert(l,C),null===this.value&&M.isEmpty()?new Vi(null):new Vi(this.value,M)}return this}}get(a){if(b(a))return this.value;{const l=fr(a),m=this.children.get(l);return m?m.get(gi(a)):null}}setTree(a,l){if(b(a))return l;{const m=fr(a),M=(this.children.get(m)||new Vi(null)).setTree(gi(a),l);let $;return $=M.isEmpty()?this.children.remove(m):this.children.insert(m,M),new Vi(this.value,$)}}fold(a){return this.fold_(Qr(),a)}fold_(a,l){const m={};return this.children.inorderTraversal((C,M)=>{m[C]=M.fold_(R(a,C),l)}),l(a,this.value,m)}findOnPath(a,l){return this.findOnPath_(a,Qr(),l)}findOnPath_(a,l,m){const C=!!this.value&&m(l,this.value);if(C)return C;if(b(a))return null;{const M=fr(a),$=this.children.get(M);return $?$.findOnPath_(gi(a),R(l,M),m):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Qr(),l)}foreachOnPath_(a,l,m){if(b(a))return this;{this.value&&m(l,this.value);const C=fr(a),M=this.children.get(C);return M?M.foreachOnPath_(gi(a),R(l,C),m):new Vi(null)}}foreach(a){this.foreach_(Qr(),a)}foreach_(a,l){this.children.inorderTraversal((m,C)=>{C.foreach_(R(a,m),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,m)=>{m.value&&a(l,m.value)})}}class Ea{constructor(a){this.writeTree_=a}static empty(){return new Ea(new Vi(null))}}function ia(d,a,l){if(b(a))return new Ea(new Vi(l));{const m=d.writeTree_.findRootMostValueAndPath(a);if(null!=m){const C=m.path;let M=m.value;const $=P(C,a);return M=M.updateChild($,l),new Ea(d.writeTree_.set(C,M))}{const C=new Vi(l),M=d.writeTree_.setTree(a,C);return new Ea(M)}}}function id(d,a,l){let m=d;return F(l,(C,M)=>{m=ia(m,R(a,C),M)}),m}function Vd(d,a){if(b(a))return Ea.empty();{const l=d.writeTree_.setTree(a,new Vi(null));return new Ea(l)}}function wl(d,a){return null!=rc(d,a)}function rc(d,a){const l=d.writeTree_.findRootMostValueAndPath(a);return null!=l?d.writeTree_.get(l.path).getChild(P(l.path,a)):null}function $l(d){const a=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(B,(m,C)=>{a.push(new Gr(m,C))}):d.writeTree_.children.inorderTraversal((m,C)=>{null!=C.value&&a.push(new Gr(m,C.value))}),a}function Ul(d,a){if(b(a))return d;{const l=rc(d,a);return new Ea(null!=l?new Vi(l):d.writeTree_.subtree(a))}}function bu(d){return d.writeTree_.isEmpty()}function Vl(d,a){return sd(Qr(),d.writeTree_,a)}function sd(d,a,l){if(null!=a.value)return l.updateChild(d,a.value);{let m=null;return a.children.inorderTraversal((C,M)=>{".priority"===C?((0,z.hu)(null!==M.value,"Priority writes must always be leaf nodes"),m=M.value):l=sd(R(d,C),M,l)}),!l.getChild(d).isEmpty()&&null!==m&&(l=l.updateChild(R(d,".priority"),m)),l}}function Fa(d,a){return ad(a,d)}function jd(d,a){if(d.snap)return ie(d.path,a);for(const l in d.children)if(d.children.hasOwnProperty(l)&&ie(R(d.path,l),a))return!0;return!1}function sc(d){return d.visible}function Du(d,a,l){let m=Ea.empty();for(let C=0;C<d.length;++C){const M=d[C];if(a(M)){const $=M.path;let X;if(M.snap)ie(l,$)?(X=P(l,$),m=ia(m,X,M.snap)):ie($,l)&&(X=P($,l),m=ia(m,Qr(),M.snap.getChild(X)));else{if(!M.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(ie(l,$))X=P(l,$),m=id(m,X,M.children);else if(ie($,l))if(X=P($,l),b(X))m=id(m,Qr(),M.children);else{const le=(0,z.DV)(M.children,fr(X));if(le){const _e=le.getChild(gi(X));m=ia(m,Qr(),_e)}}}}}return m}function bh(d,a,l,m,C){if(m||C){const M=Ul(d.visibleWrites,a);return!C&&bu(M)?l:C||null!=l||wl(M,Qr())?Vl(Du(d.allWrites,function(_e){return(_e.visible||C)&&(!m||!~m.indexOf(_e.writeId))&&(ie(_e.path,a)||ie(a,_e.path))},a),l||ln.EMPTY_NODE):null}{const M=rc(d.visibleWrites,a);if(null!=M)return M;{const $=Ul(d.visibleWrites,a);return bu($)?l:null!=l||wl($,Qr())?Vl($,l||ln.EMPTY_NODE):null}}}function Tu(d,a,l,m){return bh(d.writeTree,d.treePath,a,l,m)}function La(d,a){return function wf(d,a,l){let m=ln.EMPTY_NODE;const C=rc(d.visibleWrites,a);if(C)return C.isLeafNode()||C.forEachChild(B,(M,$)=>{m=m.updateImmediateChild(M,$)}),m;if(l){const M=Ul(d.visibleWrites,a);return l.forEachChild(B,($,X)=>{const le=Vl(Ul(M,new mt($)),X);m=m.updateImmediateChild($,le)}),$l(M).forEach($=>{m=m.updateImmediateChild($.name,$.node)}),m}return $l(Ul(d.visibleWrites,a)).forEach($=>{m=m.updateImmediateChild($.name,$.node)}),m}(d.writeTree,d.treePath,a)}function Su(d,a,l,m){return function nu(d,a,l,m,C){(0,z.hu)(m||C,"Either existingEventSnap or existingServerSnap must exist");const M=R(a,l);if(wl(d.visibleWrites,M))return null;{const $=Ul(d.visibleWrites,M);return bu($)?C.getChild(l):Vl($,C.getChild(l))}}(d.writeTree,d.treePath,a,l,m)}function Au(d,a){return function Mo(d,a){return rc(d.visibleWrites,a)}(d.writeTree,R(d.treePath,a))}function Hd(d,a,l){return function xp(d,a,l,m){const C=R(a,l),M=rc(d.visibleWrites,C);return null!=M?M:m.isCompleteForChild(l)?Vl(Ul(d.visibleWrites,C),m.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,a,l)}function Yr(d,a){return ad(R(d.treePath,a),d.writeTree)}function ad(d,a){return{treePath:d,writeTree:a}}class Th{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,m=a.childName;(0,z.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==m,"Only non-priority child changes can be tracked.");const C=this.changeMap.get(m);if(C){const M=C.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(m,ra(m,a.snapshotNode,C.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(m);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(m,na(m,C.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(m,xo(m,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,z.g5)("Illegal combination of changes: "+a+" occurred after "+C);this.changeMap.set(m,ra(m,a.snapshotNode,C.oldSnap))}}else this.changeMap.set(m,a)}getChanges(){return Array.from(this.changeMap.values())}}const Sc=new class ld{getCompleteChild(a){return null}getChildAfterChild(a,l,m){return null}};class Po{constructor(a,l,m=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=m}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const m=null!=this.optCompleteServerCache_?new Il(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hd(this.writes_,a,m)}}getChildAfterChild(a,l,m){const C=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jl(this.viewCache_),M=function Cf(d,a,l,m,C,M){return function Dh(d,a,l,m,C,M,$){let X;const le=Ul(d.visibleWrites,a),_e=rc(le,Qr());if(null!=_e)X=_e;else{if(null==l)return[];X=Vl(le,l)}if(X=X.withIndex($),X.isEmpty()||X.isLeafNode())return[];{const Dt=[],Pt=$.getCompare(),Ht=M?X.getReverseIteratorFrom(m,$):X.getIteratorFrom(m,$);let En=Ht.getNext();for(;En&&Dt.length<C;)0!==Pt(En,m)&&Dt.push(En),En=Ht.getNext();return Dt}}(d.writeTree,d.treePath,a,l,m,C,M)}(this.writes_,C,l,1,m,a);return 0===M.length?null:M[0]}}function iu(d,a,l,m,C,M){const $=a.eventCache;if(null!=Au(m,l))return a;{let X,le;if(b(l))if((0,z.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const _e=Jl(a),Pt=La(m,_e instanceof ln?_e:ln.EMPTY_NODE);X=d.filter.updateFullNode(a.eventCache.getNode(),Pt,M)}else{const _e=Tu(m,Jl(a));X=d.filter.updateFullNode(a.eventCache.getNode(),_e,M)}else{const _e=fr(l);if(".priority"===_e){(0,z.hu)(1===vl(l),"Can't have a priority with additional path components");const Dt=$.getNode();le=a.serverCache.getNode();const Pt=Su(m,l,Dt,le);X=null!=Pt?d.filter.updatePriority(Dt,Pt):$.getNode()}else{const Dt=gi(l);let Pt;if($.isCompleteForChild(_e)){le=a.serverCache.getNode();const Ht=Su(m,l,$.getNode(),le);Pt=null!=Ht?$.getNode().getImmediateChild(_e).updateChild(Dt,Ht):$.getNode().getImmediateChild(_e)}else Pt=Hd(m,_e,a.serverCache);X=null!=Pt?d.filter.updateChild($.getNode(),_e,Pt,Dt,C,M):$.getNode()}}return Ql(a,X,$.isFullyInitialized()||b(l),d.filter.filtersNodes())}}function jl(d,a,l,m,C,M,$,X){const le=a.serverCache;let _e;const Dt=$?d.filter:d.filter.getIndexedFilter();if(b(l))_e=Dt.updateFullNode(le.getNode(),m,null);else if(Dt.filtersNodes()&&!le.isFiltered()){const En=le.getNode().updateChild(l,m);_e=Dt.updateFullNode(le.getNode(),En,null)}else{const En=fr(l);if(!le.isCompleteForPath(l)&&vl(l)>1)return a;const Ln=gi(l),Ur=le.getNode().getImmediateChild(En).updateChild(Ln,m);_e=".priority"===En?Dt.updatePriority(le.getNode(),Ur):Dt.updateChild(le.getNode(),En,Ur,Ln,Sc,null)}const Pt=Ud(a,_e,le.isFullyInitialized()||b(l),Dt.filtersNodes());return iu(d,Pt,l,C,new Po(C,Pt,M),X)}function cd(d,a,l,m,C,M,$){const X=a.eventCache;let le,_e;const Dt=new Po(C,a,M);if(b(l))_e=d.filter.updateFullNode(a.eventCache.getNode(),m,$),le=Ql(a,_e,!0,d.filter.filtersNodes());else{const Pt=fr(l);if(".priority"===Pt)_e=d.filter.updatePriority(a.eventCache.getNode(),m),le=Ql(a,_e,X.isFullyInitialized(),X.isFiltered());else{const Ht=gi(l),En=X.getNode().getImmediateChild(Pt);let Ln;if(b(Ht))Ln=m;else{const Jr=Dt.getCompleteChild(Pt);Ln=null!=Jr?".priority"===Vo(Ht)&&Jr.getChild(A(Ht)).isEmpty()?Jr:Jr.updateChild(Ht,m):ln.EMPTY_NODE}le=En.equals(Ln)?a:Ql(a,d.filter.updateChild(X.getNode(),Pt,Ln,Ht,Dt,$),X.isFullyInitialized(),d.filter.filtersNodes())}}return le}function xu(d,a){return d.eventCache.isCompleteForChild(a)}function Ia(d,a,l){return l.foreach((m,C)=>{a=a.updateChild(m,C)}),a}function Ru(d,a,l,m,C,M,$,X){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let _e,le=a;_e=b(l)?m:new Vi(null).setTree(l,m);const Dt=a.serverCache.getNode();return _e.children.inorderTraversal((Pt,Ht)=>{if(Dt.hasChild(Pt)){const Ln=Ia(0,a.serverCache.getNode().getImmediateChild(Pt),Ht);le=jl(d,le,new mt(Pt),Ln,C,M,$,X)}}),_e.children.inorderTraversal((Pt,Ht)=>{const En=!a.serverCache.isCompleteForChild(Pt)&&null===Ht.value;if(!Dt.hasChild(Pt)&&!En){const Jr=Ia(0,a.serverCache.getNode().getImmediateChild(Pt),Ht);le=jl(d,le,new mt(Pt),Jr,C,M,$,X)}}),le}class Xa{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const m=this.query_._queryParams,C=new Ll(m.getIndex()),M=function Md(d){return d.loadsAllData()?new Ll(d.getIndex()):d.hasLimit()?new Zu(d):new bc(d)}(m);this.processor_=function ru(d){return{filter:d}}(M);const $=l.serverCache,X=l.eventCache,le=C.updateFullNode(ln.EMPTY_NODE,$.getNode(),null),_e=M.updateFullNode(ln.EMPTY_NODE,X.getNode(),null),Dt=new Il(le,$.isFullyInitialized(),C.filtersNodes()),Pt=new Il(_e,X.isFullyInitialized(),M.filtersNodes());this.viewCache_=$d(Pt,Dt),this.eventGenerator_=new Ch(this.query_)}get query(){return this.query_}}function hd(d,a){const l=Jl(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!b(a)&&!l.getImmediateChild(fr(a)).isEmpty())?l.getChild(a):null}function Cl(d){return 0===d.eventRegistrations_.length}function ac(d,a,l){const m=[];if(l){(0,z.hu)(null==a,"A cancel should cancel all event registrations.");const C=d.query._path;d.eventRegistrations_.forEach(M=>{const $=M.createCancelEvent(l,C);$&&m.push($)})}if(a){let C=[];for(let M=0;M<d.eventRegistrations_.length;++M){const $=d.eventRegistrations_[M];if($.matches(a)){if(a.hasAnyCallback()){C=C.concat(d.eventRegistrations_.slice(M+1));break}}else C.push($)}d.eventRegistrations_=C}else d.eventRegistrations_=[];return m}function Ah(d,a,l,m){a.type===$r.MERGE&&null!==a.source.queryId&&((0,z.hu)(Jl(d.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(nc(d.viewCache_),"Missing event cache, even though we have a server cache"));const C=d.viewCache_,M=function bf(d,a,l,m,C){const M=new Th;let $,X;if(l.type===$r.OVERWRITE){const _e=l;_e.source.fromUser?$=cd(d,a,_e.path,_e.snap,m,C,M):((0,z.hu)(_e.source.fromServer,"Unknown source."),X=_e.source.tagged||a.serverCache.isFiltered()&&!b(_e.path),$=jl(d,a,_e.path,_e.snap,m,C,X,M))}else if(l.type===$r.MERGE){const _e=l;_e.source.fromUser?$=function su(d,a,l,m,C,M,$){let X=a;return m.foreach((le,_e)=>{const Dt=R(l,le);xu(a,fr(Dt))&&(X=cd(d,X,Dt,_e,C,M,$))}),m.foreach((le,_e)=>{const Dt=R(l,le);xu(a,fr(Dt))||(X=cd(d,X,Dt,_e,C,M,$))}),X}(d,a,_e.path,_e.children,m,C,M):((0,z.hu)(_e.source.fromServer,"Unknown source."),X=_e.source.tagged||a.serverCache.isFiltered(),$=Ru(d,a,_e.path,_e.children,m,C,X,M))}else if(l.type===$r.ACK_USER_WRITE){const _e=l;$=_e.revert?function Rp(d,a,l,m,C,M){let $;if(null!=Au(m,l))return a;{const X=new Po(m,a,C),le=a.eventCache.getNode();let _e;if(b(l)||".priority"===fr(l)){let Dt;if(a.serverCache.isFullyInitialized())Dt=Tu(m,Jl(a));else{const Pt=a.serverCache.getNode();(0,z.hu)(Pt instanceof ln,"serverChildren would be complete if leaf node"),Dt=La(m,Pt)}_e=d.filter.updateFullNode(le,Dt,M)}else{const Dt=fr(l);let Pt=Hd(m,Dt,a.serverCache);null==Pt&&a.serverCache.isCompleteForChild(Dt)&&(Pt=le.getImmediateChild(Dt)),_e=null!=Pt?d.filter.updateChild(le,Dt,Pt,gi(l),X,M):a.eventCache.getNode().hasChild(Dt)?d.filter.updateChild(le,Dt,ln.EMPTY_NODE,gi(l),X,M):le,_e.isEmpty()&&a.serverCache.isFullyInitialized()&&($=Tu(m,Jl(a)),$.isLeafNode()&&(_e=d.filter.updateFullNode(_e,$,M)))}return $=a.serverCache.isFullyInitialized()||null!=Au(m,Qr()),Ql(a,_e,$,d.filter.filtersNodes())}}(d,a,_e.path,m,C,M):function Df(d,a,l,m,C,M,$){if(null!=Au(C,l))return a;const X=a.serverCache.isFiltered(),le=a.serverCache;if(null!=m.value){if(b(l)&&le.isFullyInitialized()||le.isCompleteForPath(l))return jl(d,a,l,le.getNode().getChild(l),C,M,X,$);if(b(l)){let _e=new Vi(null);return le.getNode().forEachChild(Za,(Dt,Pt)=>{_e=_e.set(new mt(Dt),Pt)}),Ru(d,a,l,_e,C,M,X,$)}return a}{let _e=new Vi(null);return m.foreach((Dt,Pt)=>{const Ht=R(l,Dt);le.isCompleteForPath(Ht)&&(_e=_e.set(Dt,le.getNode().getChild(Ht)))}),Ru(d,a,l,_e,C,M,X,$)}}(d,a,_e.path,_e.affectedTree,m,C,M)}else{if(l.type!==$r.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+l.type);$=function zd(d,a,l,m,C){const M=a.serverCache;return iu(d,Ud(a,M.getNode(),M.isFullyInitialized()||b(l),M.isFiltered()),l,m,Sc,C)}(d,a,l.path,m,M)}const le=M.getChanges();return function ud(d,a,l){const m=a.eventCache;if(m.isFullyInitialized()){const C=m.getNode().isLeafNode()||m.getNode().isEmpty(),M=nc(d);(l.length>0||!d.eventCache.isFullyInitialized()||C&&!m.getNode().equals(M)||!m.getNode().getPriority().equals(M.getPriority()))&&l.push(js(nc(a)))}}(a,$,le),{viewCache:$,changes:le}}(d.processor_,C,a,l,m);return function Sh(d,a){(0,z.hu)(a.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(a.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,M.viewCache),(0,z.hu)(M.viewCache.serverCache.isFullyInitialized()||!C.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=M.viewCache,Ho(d,M.changes,M.viewCache.eventCache.getNode(),null)}function Ho(d,a,l,m){return function Ap(d,a,l,m){const C=[],M=[];return a.forEach($=>{"child_changed"===$.type&&d.index_.indexedValueChanged($.oldSnap,$.snapshotNode)&&M.push(function ed(d,a){return{type:"child_moved",snapshotNode:a,childName:d}}($.childName,$.snapshotNode))}),Bd(d,C,"child_removed",a,m,l),Bd(d,C,"child_added",a,m,l),Bd(d,C,"child_moved",M,m,l),Bd(d,C,"child_changed",a,m,l),Bd(d,C,"value",a,m,l),C}(d.eventGenerator_,a,l,m?[m]:d.eventRegistrations_)}let sa,Wn;class Wd{constructor(){this.views=new Map}}function v(d,a,l,m){const C=a.source.queryId;if(null!==C){const M=d.views.get(C);return(0,z.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Ah(M,a,l,m)}{let M=[];for(const $ of d.views.values())M=M.concat(Ah($,a,l,m));return M}}function _(d,a,l,m,C){const $=d.views.get(a._queryIdentifier);if(!$){let X=Tu(l,C?m:null),le=!1;X?le=!0:m instanceof ln?(X=La(l,m),le=!1):(X=ln.EMPTY_NODE,le=!1);const _e=$d(new Il(X,le,!1),new Il(m,C,!1));return new Xa(a,_e)}return $}function re(d){const a=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function Qe(d,a){let l=null;for(const m of d.views.values())l=l||hd(m,a);return l}function yt(d,a){return a._queryParams.loadsAllData()?zn(d):d.views.get(a._queryIdentifier)}function zt(d,a){return null!=yt(d,a)}function wn(d){return null!=zn(d)}function zn(d){for(const a of d.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let qd=1;class Ac{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Vi(null),this.pendingWriteTree_=function oc(){return{visibleWrites:Ea.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xc(d,a,l,m,C){return function Ro(d,a,l,m,C){(0,z.hu)(m>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===C&&(C=!0),d.allWrites.push({path:a,snap:l,writeId:m,visible:C}),C&&(d.visibleWrites=ia(d.visibleWrites,a,l)),d.lastWriteId=m}(d.pendingWriteTree_,a,l,m,C),C?Pu(d,new Bl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Qa(d,a,l=!1){const m=function ic(d,a){for(let l=0;l<d.allWrites.length;l++){const m=d.allWrites[l];if(m.writeId===a)return m}return null}(d.pendingWriteTree_,a);if(function tu(d,a){const l=d.allWrites.findIndex(X=>X.writeId===a);(0,z.hu)(l>=0,"removeWrite called with nonexistent writeId.");const m=d.allWrites[l];d.allWrites.splice(l,1);let C=m.visible,M=!1,$=d.allWrites.length-1;for(;C&&$>=0;){const X=d.allWrites[$];X.visible&&($>=l&&jd(X,m.path)?C=!1:ie(m.path,X.path)&&(M=!0)),$--}return!!C&&(M?(function od(d){d.visibleWrites=Du(d.allWrites,sc,Qr()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(m.snap?d.visibleWrites=Vd(d.visibleWrites,m.path):F(m.children,le=>{d.visibleWrites=Vd(d.visibleWrites,R(m.path,le))}),!0))}(d.pendingWriteTree_,a)){let M=new Vi(null);return null!=m.snap?M=M.set(Qr(),!0):F(m.children,$=>{M=M.set(new mt($),!0)}),Pu(d,new El(m.path,M,l))}return[]}function bl(d,a,l){return Pu(d,new Bl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function Mc(d,a,l,m,C=!1){const M=a._path,$=d.syncPointTree_.get(M);let X=[];if($&&("default"===a._queryIdentifier||zt($,a))){const le=function G(d,a,l,m){const C=a._queryIdentifier,M=[];let $=[];const X=wn(d);if("default"===C)for(const[le,_e]of d.views.entries())$=$.concat(ac(_e,l,m)),Cl(_e)&&(d.views.delete(le),_e.query._queryParams.loadsAllData()||M.push(_e.query));else{const le=d.views.get(C);le&&($=$.concat(ac(le,l,m)),Cl(le)&&(d.views.delete(C),le.query._queryParams.loadsAllData()||M.push(le.query)))}return X&&!wn(d)&&M.push(new(function Rh(){return(0,z.hu)(sa,"Reference.ts has not been loaded"),sa}())(a._repo,a._path)),{removed:M,events:$}}($,a,l,m);(function D(d){return 0===d.views.size})($)&&(d.syncPointTree_=d.syncPointTree_.remove(M));const _e=le.removed;if(X=le.events,!C){const Dt=-1!==_e.findIndex(Ht=>Ht._queryParams.loadsAllData()),Pt=d.syncPointTree_.findOnPath(M,(Ht,En)=>wn(En));if(Dt&&!Pt){const Ht=d.syncPointTree_.subtree(M);if(!Ht.isEmpty()){const En=function Af(d){return d.fold((a,l,m)=>{if(l&&wn(l))return[zn(l)];{let C=[];return l&&(C=re(l)),F(m,(M,$)=>{C=C.concat($)}),C}})}(Ht);for(let Ln=0;Ln<En.length;++Ln){const Jr=En[Ln],Ur=Jr.query,ws=Oh(d,Jr);d.listenProvider_.startListening(Pc(Ur),ou(d,Ur),ws.hashFn,ws.onComplete)}}}!Pt&&_e.length>0&&!m&&(Dt?d.listenProvider_.stopListening(Pc(a),null):_e.forEach(Ht=>{const En=d.queryToTagMap.get(kh(Ht));d.listenProvider_.stopListening(Pc(Ht),En)}))}!function Hl(d,a){for(let l=0;l<a.length;++l){const m=a[l];if(!m._queryParams.loadsAllData()){const C=kh(m),M=d.queryToTagMap.get(C);d.queryToTagMap.delete(C),d.tagToQueryMap.delete(M)}}}(d,_e)}return X}function Mh(d,a,l,m){const C=Pp(d,m);if(null!=C){const M=Ns(C),$=M.path,X=M.queryId,le=P($,a);return Yd(d,$,new Bl(Ju(X),le,l))}return[]}function pd(d,a,l,m=!1){const C=a._path;let M=null,$=!1;d.syncPointTree_.foreachOnPath(C,(Ht,En)=>{const Ln=P(Ht,C);M=M||Qe(En,Ln),$=$||wn(En)});let le,X=d.syncPointTree_.get(C);X?($=$||wn(X),M=M||Qe(X,Qr())):(X=new Wd,d.syncPointTree_=d.syncPointTree_.set(C,X)),null!=M?le=!0:(le=!1,M=ln.EMPTY_NODE,d.syncPointTree_.subtree(C).foreachChild((En,Ln)=>{const Jr=Qe(Ln,Qr());Jr&&(M=M.updateImmediateChild(En,Jr))}));const _e=zt(X,a);if(!_e&&!a._queryParams.loadsAllData()){const Ht=kh(a);(0,z.hu)(!d.queryToTagMap.has(Ht),"View does not exist, but we have a tag");const En=function Op(){return qd++}();d.queryToTagMap.set(Ht,En),d.tagToQueryMap.set(En,Ht)}let Pt=function x(d,a,l,m,C,M){const $=_(d,a,m,C,M);return d.views.has(a._queryIdentifier)||d.views.set(a._queryIdentifier,$),function fd(d,a){d.eventRegistrations_.push(a)}($,l),function Gd(d,a){const l=d.viewCache_.eventCache,m=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(B,(M,$)=>{m.push(xo(M,$))}),l.isFullyInitialized()&&m.push(js(l.getNode())),Ho(d,m,l.getNode(),a)}($,l)}(X,a,l,Fa(d.pendingWriteTree_,C),M,le);if(!_e&&!$&&!m){const Ht=yt(X,a);Pt=Pt.concat(function xf(d,a,l){const m=a._path,C=ou(d,a),M=Oh(d,l),$=d.listenProvider_.startListening(Pc(a),C,M.hashFn,M.onComplete),X=d.syncPointTree_.subtree(m);if(C)(0,z.hu)(!wn(X.value),"If we're adding a query, it shouldn't be shadowed");else{const le=X.fold((_e,Dt,Pt)=>{if(!b(_e)&&Dt&&wn(Dt))return[zn(Dt).query];{let Ht=[];return Dt&&(Ht=Ht.concat(re(Dt).map(En=>En.query))),F(Pt,(En,Ln)=>{Ht=Ht.concat(Ln)}),Ht}});for(let _e=0;_e<le.length;++_e){const Dt=le[_e];d.listenProvider_.stopListening(Pc(Dt),ou(d,Dt))}}return $}(d,a,Ht))}return Pt}function Tf(d,a,l){const C=d.pendingWriteTree_,M=d.syncPointTree_.findOnPath(a,($,X)=>{const _e=Qe(X,P($,a));if(_e)return _e});return bh(C,a,M,l,!0)}function Pu(d,a){return Sf(a,d.syncPointTree_,null,Fa(d.pendingWriteTree_,Qr()))}function Sf(d,a,l,m){if(b(d.path))return Mp(d,a,l,m);{const C=a.get(Qr());null==l&&null!=C&&(l=Qe(C,Qr()));let M=[];const $=fr(d.path),X=d.operationForChild($),le=a.children.get($);if(le&&X){const _e=l?l.getImmediateChild($):null,Dt=Yr(m,$);M=M.concat(Sf(X,le,_e,Dt))}return C&&(M=M.concat(v(C,d,m,l))),M}}function Mp(d,a,l,m){const C=a.get(Qr());null==l&&null!=C&&(l=Qe(C,Qr()));let M=[];return a.children.inorderTraversal(($,X)=>{const le=l?l.getImmediateChild($):null,_e=Yr(m,$),Dt=d.operationForChild($);Dt&&(M=M.concat(Mp(Dt,X,le,_e)))}),C&&(M=M.concat(v(C,d,m,l))),M}function Oh(d,a){const l=a.query,m=ou(d,l);return{hashFn:()=>(function fs(d){return d.viewCache_.serverCache.getNode()}(a)||ln.EMPTY_NODE).hash(),onComplete:C=>{if("ok"===C)return m?function Kd(d,a,l){const m=Pp(d,l);if(m){const C=Ns(m),M=C.path,$=C.queryId,X=P(M,a);return Yd(d,M,new Cu(Ju($),X))}return[]}(d,l._path,m):function Rc(d,a){return Pu(d,new Cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(d,l._path);{const M=function be(d,a){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const m=new Error(d+" at "+a._path.toString()+": "+l);return m.code=d.toUpperCase(),m}(C,l);return Mc(d,l,null,M)}}}}function ou(d,a){const l=kh(a);return d.queryToTagMap.get(l)}function kh(d){return d._path.toString()+"$"+d._queryIdentifier}function Pp(d,a){return d.tagToQueryMap.get(a)}function Ns(d){const a=d.indexOf("$");return(0,z.hu)(-1!==a&&a<d.length-1,"Bad queryKey."),{queryId:d.substr(a+1),path:new mt(d.substr(0,a))}}function Yd(d,a,l){const m=d.syncPointTree_.get(a);return(0,z.hu)(m,"Missing sync point for query tag that we're tracking"),v(m,l,Fa(d.pendingWriteTree_,a),null)}function Pc(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function wa(){return(0,z.hu)(Wn,"Reference.ts has not been loaded"),Wn}())(d._repo,d._path):d}class Oc{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new Oc(l)}node(){return this.node_}}class Nh{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=R(this.path_,a);return new Nh(this.syncTree_,l)}node(){return Tf(this.syncTree_,this.path_)}}const kc=function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d},kp=function(d,a,l){return d&&"object"==typeof d?((0,z.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?Np(d[".sv"],a,l):"object"==typeof d[".sv"]?Rf(d[".sv"],a):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},Np=function(d,a,l){if("timestamp"===d)return l.timestamp;(0,z.hu)(!1,"Unexpected server value: "+d)},Rf=function(d,a,l){d.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const m=d.increment;"number"!=typeof m&&(0,z.hu)(!1,"Unexpected increment value: "+m);const C=a.node();if((0,z.hu)(null!==C&&typeof C<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!C.isLeafNode())return m;const $=C.getValue();return"number"!=typeof $?m:$+m},Zd=function(d,a,l,m){return Xd(a,new Nh(l,d),m)},gd=function(d,a,l){return Xd(d,new Oc(a),l)};function Xd(d,a,l){const m=d.getPriority().val(),C=kp(m,a.getImmediateChild(".priority"),l);let M;if(d.isLeafNode()){const $=d,X=kp($.getValue(),a,l);return X!==$.getValue()||C!==$.getPriority().val()?new Ku(X,Kr(C)):d}{const $=d;return M=$,C!==$.getPriority().val()&&(M=M.updatePriority(new Ku(C))),$.forEachChild(B,(X,le)=>{const _e=Xd(le,a.getImmediateChild(X),l);_e!==le&&(M=M.updateImmediateChild(X,_e))}),M}}class Ou{constructor(a="",l=null,m={children:{},childCount:0}){this.name=a,this.parent=l,this.node=m}}function md(d,a){let l=a instanceof mt?a:new mt(a),m=d,C=fr(l);for(;null!==C;){const M=(0,z.DV)(m.node.children,C)||{children:{},childCount:0};m=new Ou(C,m,M),l=gi(l),C=fr(l)}return m}function ku(d){return d.node.value}function Fp(d,a){d.node.value=a,Qd(d)}function Lp(d){return d.node.childCount>0}function lc(d,a){F(d.node.children,(l,m)=>{a(new Ou(l,d,m))})}function Fg(d,a,l,m){l&&!m&&a(d),lc(d,C=>{Fg(C,a,!0,m)}),l&&m&&a(d)}function Nu(d){return new mt(null===d.parent?d.name:Nu(d.parent)+"/"+d.name)}function Qd(d){null!==d.parent&&function zm(d,a,l){const m=function Ng(d){return void 0===ku(d)&&!Lp(d)}(l),C=(0,z.r3)(d.node.children,a);m&&C?(delete d.node.children[a],d.node.childCount--,Qd(d)):!m&&!C&&(d.node.children[a]=l.node,d.node.childCount++,Qd(d))}(d.parent,d.name,d)}const Bp=/[\[\].#$\/\u0000-\u001F\u007F]/,uc=/[\[\].#$\u0000-\u001F\u007F]/,Fh=10485760,$p=function(d){return"string"==typeof d&&0!==d.length&&!Bp.test(d)},Up=function(d){return"string"==typeof d&&0!==d.length&&!uc.test(d)},au=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!wi(d)||d&&"object"==typeof d&&(0,z.r3)(d,".sv")},_o=function(d,a,l,m){m&&void 0===a||Ja((0,z.gK)(d,"value"),a,l)},Ja=function(d,a,l){const m=l instanceof mt?new st(l,d):l;if(void 0===a)throw new Error(d+"contains undefined "+In(m));if("function"==typeof a)throw new Error(d+"contains a function "+In(m)+" with contents = "+a.toString());if(wi(a))throw new Error(d+"contains "+a.toString()+" "+In(m));if("string"==typeof a&&a.length>Fh/3&&(0,z.ug)(a)>Fh)throw new Error(d+"contains a string greater than "+Fh+" utf8 bytes "+In(m)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let C=!1,M=!1;if(F(a,($,X)=>{if(".value"===$)C=!0;else if(".priority"!==$&&".sv"!==$&&(M=!0,!$p($)))throw new Error(d+" contains an invalid key ("+$+") "+In(m)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xt(d,a){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(a),d.byteLength_+=(0,z.ug)(a),Hn(d)})(m,$),Ja(d,X,m),function _n(d){const a=d.parts_.pop();d.byteLength_-=(0,z.ug)(a),d.parts_.length>0&&(d.byteLength_-=1)}(m)}),C&&M)throw new Error(d+' contains ".value" child '+In(m)+" in addition to actual children.")}},Mf=function(d,a,l,m){if(m&&void 0===a)return;const C=(0,z.gK)(d,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(C+" must be an object containing the children to replace.");const M=[];F(a,($,X)=>{const le=new mt($);if(Ja(C,X,R(l,le)),".priority"===Vo(le)&&!au(X))throw new Error(C+"contains an invalid value for '"+le.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(le)}),function(d,a){let l,m;for(l=0;l<a.length;l++){m=a[l];const M=hs(m);for(let $=0;$<M.length;$++)if((".priority"!==M[$]||$!==M.length-1)&&!$p(M[$]))throw new Error(d+"contains an invalid key ("+M[$]+") in path "+m.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(j);let C=null;for(l=0;l<a.length;l++){if(m=a[l],null!==C&&ie(C,m))throw new Error(d+"contains a path "+C.toString()+" that is ancestor of another path "+m.toString());C=m}}(C,M)},Bh=function(d,a,l){if(!l||void 0!==a){if(wi(a))throw new Error((0,z.gK)(d,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!au(a))throw new Error((0,z.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yd=function(d,a,l,m){if(!(m&&void 0===l||$p(l)))throw new Error((0,z.gK)(d,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jd=function(d,a,l,m){if(!(m&&void 0===l||Up(l)))throw new Error((0,z.gK)(d,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vp=function(d,a,l,m){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Jd(d,a,l,m)},Dl=function(d,a){if(".info"===fr(a))throw new Error(d+" failed = Can't modify data under /.info/")},$h=function(d,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!$p(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Up(d)}(l))throw new Error((0,z.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vd(d,a){let l=null;for(let m=0;m<a.length;m++){const C=a[m],M=C.getPath();null!==l&&!ee(M,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(C)}l&&d.eventLists_.push(l)}function Lc(d,a,l){vd(d,l),Lg(d,m=>ee(m,a))}function Hs(d,a,l){vd(d,l),Lg(d,m=>ie(m,a)||ie(a,m))}function Lg(d,a){d.recursionDepth_++;let l=!0;for(let m=0;m<d.eventLists_.length;m++){const C=d.eventLists_[m];C&&(a(C.path)?(Bg(d.eventLists_[m]),d.eventLists_[m]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function Bg(d){for(let a=0;a<d.events.length;a++){const l=d.events[a];if(null!==l){d.events[a]=null;const m=l.getEventRunner();da&&Hi("event: "+l.toString()),kr(m)}}}const $g="repo_interrupt",Gm=25;class Wm{constructor(a,l,m,C){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=m,this.appCheckProvider_=C,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wu(),this.transactionQueueTree_=new Ou,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Bc(d){const l=d.infoData_.getNode(new mt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Ca(d){return kc({timestamp:Bc(d)})}function lu(d,a,l,m,C){d.dataUpdateCount++;const M=new mt(a);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(a,l):l;let $=[];if(C)if(m){const le=(0,z.UI)(l,_e=>Kr(_e));$=function Ph(d,a,l,m){const C=Pp(d,m);if(C){const M=Ns(C),$=M.path,X=M.queryId,le=P($,a),_e=Vi.fromObject(l);return Yd(d,$,new ec(Ju(X),le,_e))}return[]}(d.serverSyncTree_,M,le,C)}else{const le=Kr(l);$=Mh(d.serverSyncTree_,M,le,C)}else if(m){const le=(0,z.UI)(l,_e=>Kr(_e));$=function Mu(d,a,l){const m=Vi.fromObject(l);return Pu(d,new ec({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,m))}(d.serverSyncTree_,M,le)}else{const le=Kr(l);$=bl(d.serverSyncTree_,M,le)}let X=M;$.length>0&&(X=dc(d,M)),Hs(d.eventQueue_,X,$)}function Ug(d,a){jg(d,"connected",a),!1===a&&function Nf(d){cc(d,"onDisconnectEvents");const a=Ca(d),l=wu();es(d.onDisconnect_,Qr(),(C,M)=>{const $=Zd(C,M,d.serverSyncTree_,a);ks(l,C,$)});let m=[];es(l,Qr(),(C,M)=>{m=m.concat(bl(d.serverSyncTree_,C,M));const $=hc(d,C);dc(d,$)}),d.onDisconnect_=wu(),Hs(d.eventQueue_,Qr(),m)}(d)}function jg(d,a,l){const m=new mt("/.info/"+a),C=Kr(l);d.infoData_.updateSnapshot(m,C);const M=bl(d.infoSyncTree_,m,C);Hs(d.eventQueue_,m,M)}function Vh(d){return d.nextWriteId_++}function jp(d,a,l,m,C){cc(d,"set",{path:a.toString(),value:l,priority:m});const M=Ca(d),$=Kr(l,m),X=Tf(d.serverSyncTree_,a),le=gd($,X,M),_e=Vh(d),Dt=xc(d.serverSyncTree_,a,le,_e,!0);vd(d.eventQueue_,Dt),d.server_.put(a.toString(),$.val(!0),(Ht,En)=>{const Ln="ok"===Ht;Ln||qr("set at "+a+" failed: "+Ht);const Jr=Qa(d.serverSyncTree_,_e,!Ln);Hs(d.eventQueue_,a,Jr),zl(0,C,Ht,En)});const Pt=hc(d,a);dc(d,Pt),Hs(d.eventQueue_,Pt,[])}function Hg(d,a,l){d.server_.onDisconnectCancel(a.toString(),(m,C)=>{"ok"===m&&Xu(d.onDisconnect_,a),zl(0,l,m,C)})}function eh(d,a,l,m){const C=Kr(l);d.server_.onDisconnectPut(a.toString(),C.val(!0),(M,$)=>{"ok"===M&&ks(d.onDisconnect_,a,C),zl(0,m,M,$)})}function zp(d,a,l){let m;m=".info"===fr(a._path)?Mc(d.infoSyncTree_,a,l):Mc(d.serverSyncTree_,a,l),Lc(d.eventQueue_,a._path,m)}function Ff(d){d.persistentConnection_&&d.persistentConnection_.interrupt($g)}function cc(d,...a){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),Hi(l,...a)}function zl(d,a,l,m){a&&kr(()=>{if("ok"===l)a(null);else{const C=(l||"error").toUpperCase();let M=C;m&&(M+=": "+m);const $=new Error(M);$.code=C,a($)}})}function Hh(d,a,l){return Tf(d.serverSyncTree_,a,l)||ln.EMPTY_NODE}function zo(d,a=d.transactionQueueTree_){if(a||zh(d,a),ku(a)){const l=Fu(d,a);(0,z.hu)(l.length>0,"Sending zero length transaction queue"),l.every(C=>0===C.status)&&function Gg(d,a,l){const m=l.map(_e=>_e.currentWriteId),C=Hh(d,a,m);let M=C;const $=C.hash();for(let _e=0;_e<l.length;_e++){const Dt=l[_e];(0,z.hu)(0===Dt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Dt.status=1,Dt.retryCount++;const Pt=P(a,Dt.path);M=M.updateChild(Pt,Dt.currentOutputSnapshotRaw)}const X=M.val(!0),le=a;d.server_.put(le.toString(),X,_e=>{cc(d,"transaction put response",{path:le.toString(),status:_e});let Dt=[];if("ok"===_e){const Pt=[];for(let Ht=0;Ht<l.length;Ht++)l[Ht].status=2,Dt=Dt.concat(Qa(d.serverSyncTree_,l[Ht].currentWriteId)),l[Ht].onComplete&&Pt.push(()=>l[Ht].onComplete(null,!0,l[Ht].currentOutputSnapshotResolved)),l[Ht].unwatcher();zh(d,md(d.transactionQueueTree_,a)),zo(d,d.transactionQueueTree_),Hs(d.eventQueue_,a,Dt);for(let Ht=0;Ht<Pt.length;Ht++)kr(Pt[Ht])}else{if("datastale"===_e)for(let Pt=0;Pt<l.length;Pt++)l[Pt].status=3===l[Pt].status?4:0;else{qr("transaction at "+le.toString()+" failed: "+_e);for(let Pt=0;Pt<l.length;Pt++)l[Pt].status=4,l[Pt].abortReason=_e}dc(d,a)}},$)}(d,Nu(a),l)}else Lp(a)&&lc(a,l=>{zo(d,l)})}function dc(d,a){const l=Lf(d,a),m=Nu(l);return function Zr(d,a,l){if(0===a.length)return;const m=[];let C=[];const $=a.filter(X=>0===X.status).map(X=>X.currentWriteId);for(let X=0;X<a.length;X++){const le=a[X],_e=P(l,le.path);let Pt,Dt=!1;if((0,z.hu)(null!==_e,"rerunTransactionsUnderNode_: relativePath should not be null."),4===le.status)Dt=!0,Pt=le.abortReason,C=C.concat(Qa(d.serverSyncTree_,le.currentWriteId,!0));else if(0===le.status)if(le.retryCount>=Gm)Dt=!0,Pt="maxretry",C=C.concat(Qa(d.serverSyncTree_,le.currentWriteId,!0));else{const Ht=Hh(d,le.path,$);le.currentInputSnapshot=Ht;const En=a[X].update(Ht.val());if(void 0!==En){Ja("transaction failed: Data returned ",En,le.path);let Ln=Kr(En);"object"==typeof En&&null!=En&&(0,z.r3)(En,".priority")||(Ln=Ln.updatePriority(Ht.getPriority()));const Ur=le.currentWriteId,ws=Ca(d),Oi=gd(Ln,Ht,ws);le.currentOutputSnapshotRaw=Ln,le.currentOutputSnapshotResolved=Oi,le.currentWriteId=Vh(d),$.splice($.indexOf(Ur),1),C=C.concat(xc(d.serverSyncTree_,le.path,Oi,le.currentWriteId,le.applyLocally)),C=C.concat(Qa(d.serverSyncTree_,Ur,!0))}else Dt=!0,Pt="nodata",C=C.concat(Qa(d.serverSyncTree_,le.currentWriteId,!0))}Hs(d.eventQueue_,l,C),C=[],Dt&&(a[X].status=2,setTimeout(a[X].unwatcher,Math.floor(0)),a[X].onComplete&&m.push("nodata"===Pt?()=>a[X].onComplete(null,!1,a[X].currentInputSnapshot):()=>a[X].onComplete(new Error(Pt),!1,null)))}zh(d,d.transactionQueueTree_);for(let X=0;X<m.length;X++)kr(m[X]);zo(d,d.transactionQueueTree_)}(d,Fu(d,l),m),m}function Lf(d,a){let l,m=d.transactionQueueTree_;for(l=fr(a);null!==l&&void 0===ku(m);)m=md(m,l),l=fr(a=gi(a));return m}function Fu(d,a){const l=[];return $c(d,a,l),l.sort((m,C)=>m.order-C.order),l}function $c(d,a,l){const m=ku(a);if(m)for(let C=0;C<m.length;C++)l.push(m[C]);lc(a,C=>{$c(d,C,l)})}function zh(d,a){const l=ku(a);if(l){let m=0;for(let C=0;C<l.length;C++)2!==l[C].status&&(l[m]=l[C],m++);l.length=m,Fp(a,l.length>0?l:void 0)}lc(a,m=>{zh(d,m)})}function hc(d,a){const l=Nu(Lf(d,a)),m=md(d.transactionQueueTree_,a);return function Nc(d,a,l){let m=l?d:d.parent;for(;null!==m;){if(a(m))return!0;m=m.parent}}(m,C=>{Bf(d,C)}),Bf(d,m),Fg(m,C=>{Bf(d,C)}),l}function Bf(d,a){const l=ku(a);if(l){const m=[];let C=[],M=-1;for(let $=0;$<l.length;$++)3===l[$].status||(1===l[$].status?((0,z.hu)(M===$-1,"All SENT items should be at beginning of queue."),M=$,l[$].status=3,l[$].abortReason="set"):((0,z.hu)(0===l[$].status,"Unexpected transaction status in abort"),l[$].unwatcher(),C=C.concat(Qa(d.serverSyncTree_,l[$].currentWriteId,!0)),l[$].onComplete&&m.push(l[$].onComplete.bind(null,new Error("set"),!1,null))));-1===M?Fp(a,void 0):l.length=M+1,Hs(d.eventQueue_,Nu(a),C);for(let $=0;$<m.length;$++)kr(m[$])}}const Lu=function(d,a){const l=Wg(d),m=l.namespace;return"firebase.com"===l.domain&&mo(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!m||"undefined"===m)&&"localhost"!==l.domain&&mo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ql(l.host,l.secure,m,"ws"===l.scheme||"wss"===l.scheme,a,"",m!==l.subdomain),path:new mt(l.pathString)}},Wg=function(d){let a="",l="",m="",C="",M="",$=!0,X="https",le=443;if("string"==typeof d){let _e=d.indexOf("//");_e>=0&&(X=d.substring(0,_e-1),d=d.substring(_e+2));let Dt=d.indexOf("/");-1===Dt&&(Dt=d.length);let Pt=d.indexOf("?");-1===Pt&&(Pt=d.length),a=d.substring(0,Math.min(Dt,Pt)),Dt<Pt&&(C=function th(d){let a="";const l=d.split("/");for(let m=0;m<l.length;m++)if(l[m].length>0){let C=l[m];try{C=decodeURIComponent(C.replace(/\+/g," "))}catch(M){}a+="/"+C}return a}(d.substring(Dt,Pt)));const Ht=function Gp(d){const a={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const m=l.split("=");2===m.length?a[decodeURIComponent(m[0])]=decodeURIComponent(m[1]):qr(`Invalid query segment '${l}' in query '${d}'`)}return a}(d.substring(Math.min(d.length,Pt)));_e=a.indexOf(":"),_e>=0?($="https"===X||"wss"===X,le=parseInt(a.substring(_e+1),10)):_e=a.length;const En=a.slice(0,_e);if("localhost"===En.toLowerCase())l="localhost";else if(En.split(".").length<=2)l=En;else{const Ln=a.indexOf(".");m=a.substring(0,Ln).toLowerCase(),l=a.substring(Ln+1),M=m}"ns"in Ht&&(M=Ht.ns)}return{host:a,port:le,domain:l,subdomain:m,secure:$,scheme:X,pathString:C,namespace:M}},Km="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wp=function(){let d=0;const a=[];return function(l){const m=l===d;let C;d=l;const M=new Array(8);for(C=7;C>=0;C--)M[C]=Km.charAt(l%64),l=Math.floor(l/64);(0,z.hu)(0===l,"Cannot push at time == 0");let $=M.join("");if(m){for(C=11;C>=0&&63===a[C];C--)a[C]=0;a[C]++}else for(C=0;C<12;C++)a[C]=Math.floor(64*Math.random());for(C=0;C<12;C++)$+=Km.charAt(a[C]);return(0,z.hu)(20===$.length,"nextPushId: Length should be 20."),$}}();class qp{constructor(a,l,m,C){this.eventType=a,this.eventRegistration=l,this.snapshot=m,this.prevName=C}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Wl)(this.snapshot.exportVal())}}class fc{constructor(a,l,m){this.eventRegistration=a,this.error=l,this.path=m}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Kp{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class _d{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new z.BH;return Hg(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Dl("OnDisconnect.remove",this._path);const a=new z.BH;return eh(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Dl("OnDisconnect.set",this._path),_o("OnDisconnect.set",a,this._path,!1);const l=new z.BH;return eh(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){Dl("OnDisconnect.setWithPriority",this._path),_o("OnDisconnect.setWithPriority",a,this._path,!1),Bh("OnDisconnect.setWithPriority",l,!1);const m=new z.BH;return function qm(d,a,l,m,C){const M=Kr(l,m);d.server_.onDisconnectPut(a.toString(),M.val(!0),($,X)=>{"ok"===$&&ks(d.onDisconnect_,a,M),zl(0,C,$,X)})}(this._repo,this._path,a,l,m.wrapCallback(()=>{})),m.promise}update(a){Dl("OnDisconnect.update",this._path),Mf("OnDisconnect.update",a,this._path,!1);const l=new z.BH;return function Hp(d,a,l,m){if((0,z.xb)(l))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void zl(0,m,"ok",void 0);d.server_.onDisconnectMerge(a.toString(),l,(C,M)=>{"ok"===C&&F(l,($,X)=>{const le=Kr(X);ks(d.onDisconnect_,R(a,$),le)}),zl(0,m,C,M)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class ba{constructor(a,l,m,C){this._repo=a,this._path=l,this._queryParams=m,this._orderByCalled=C}get key(){return b(this._path)?null:Vo(this._path)}get ref(){return new Gl(this._repo,this._path)}get _queryIdentifier(){const a=Ef(this._queryParams),l=ml(a);return"{}"===l?"default":l}get _queryObject(){return Ef(this._queryParams)}isEqual(a){if(!((a=(0,z.m9)(a))instanceof ba))return!1;const l=this._repo===a._repo,m=ee(this._path,a._path);return l&&m&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Zc(d){let a="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(a+="/"+encodeURIComponent(String(d.pieces_[l])));return a||"/"}(this._path)}}function $f(d,a){if(!0===d._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function Uc(d){let a=null,l=null;if(d.hasStart()&&(a=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===Za){const m="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",C="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Ss)throw new Error(m);if("string"!=typeof a)throw new Error(C)}if(d.hasEnd()){if(d.getIndexEndName()!==Uo)throw new Error(m);if("string"!=typeof l)throw new Error(C)}}else if(d.getIndex()===B){if(null!=a&&!au(a)||null!=l&&!au(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(d.getIndex()instanceof ka||d.getIndex()===vo,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Yp(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Gl extends ba{constructor(a,l){super(a,l,new _u,!1)}get parent(){const a=A(this._path);return null===a?null:new Gl(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Tl{constructor(a,l,m){this._node=a,this.ref=l,this._index=m}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new mt(a),m=Vc(this.ref,a);return new Tl(this._node.getChild(l),m,B)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(m,C)=>a(new Tl(C,Vc(this.ref,m),B)))}hasChild(a){const l=new mt(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ed(d,a){return(d=(0,z.m9)(d))._checkNotDeleted("ref"),void 0!==a?Vc(d._root,a):d._root}function qg(d,a){(d=(0,z.m9)(d))._checkNotDeleted("refFromURL");const l=Lu(a,d._repo.repoInfo_.nodeAdmin);$h("refFromURL",l);const m=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&m.host!==d._repo.repoInfo_.host&&mo("refFromURL: Host name does not match the current database: (found "+m.host+" but expected "+d._repo.repoInfo_.host+")"),Ed(d,l.path.toString())}function Vc(d,a){return null===fr((d=(0,z.m9)(d))._path)?Vp("child","path",a,!1):Jd("child","path",a,!1),new Gl(d._repo,R(d._path,a))}function nh(d,a){d=(0,z.m9)(d),Dl("set",d._path),_o("set",a,d._path,!1);const l=new z.BH;return jp(d._repo,d._path,a,null,l.wrapCallback(()=>{})),l.promise}function Ym(d,a){Mf("update",a,d._path,!1);const l=new z.BH;return function kf(d,a,l,m){cc(d,"update",{path:a.toString(),value:l});let C=!0;const M=Ca(d),$={};if(F(l,(X,le)=>{C=!1,$[X]=Zd(R(a,X),Kr(le),d.serverSyncTree_,M)}),C)Hi("update() called with empty data.  Don't do anything."),zl(0,m,"ok",void 0);else{const X=Vh(d),le=function Rs(d,a,l,m){!function Tc(d,a,l,m){(0,z.hu)(m>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:a,children:l,writeId:m,visible:!0}),d.visibleWrites=id(d.visibleWrites,a,l),d.lastWriteId=m}(d.pendingWriteTree_,a,l,m);const C=Vi.fromObject(l);return Pu(d,new ec({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,C))}(d.serverSyncTree_,a,$,X);vd(d.eventQueue_,le),d.server_.merge(a.toString(),l,(_e,Dt)=>{const Pt="ok"===_e;Pt||qr("update at "+a+" failed: "+_e);const Ht=Qa(d.serverSyncTree_,X,!Pt),En=Ht.length>0?dc(d,a):a;Hs(d.eventQueue_,En,Ht),zl(0,m,_e,Dt)}),F(l,_e=>{const Dt=hc(d,R(a,_e));dc(d,Dt)}),Hs(d.eventQueue_,a,[])}}(d._repo,d._path,a,l.wrapCallback(()=>{})),l.promise}function Zm(d){d=(0,z.m9)(d);const a=new Kp(()=>{}),l=new Wh(a);return function Of(d,a,l){const m=function Xy(d,a){const l=a._path;let m=null;d.syncPointTree_.foreachOnPath(l,(_e,Dt)=>{const Pt=P(_e,l);m=m||Qe(Dt,Pt)});let C=d.syncPointTree_.get(l);C?m=m||Qe(C,Qr()):(C=new Wd,d.syncPointTree_=d.syncPointTree_.set(l,C));const M=null!=m,$=M?new Il(m,!0,!1):null;return function dd(d){return nc(d.viewCache_)}(_(C,a,Fa(d.pendingWriteTree_,a._path),M?$.getNode():ln.EMPTY_NODE,M))}(d.serverSyncTree_,a);return null!=m?Promise.resolve(m):d.server_.get(a).then(C=>{const M=Kr(C).withIndex(a._queryParams.getIndex());let $;if(pd(d.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())$=bl(d.serverSyncTree_,a._path,M);else{const X=ou(d.serverSyncTree_,a);$=Mh(d.serverSyncTree_,a._path,M,X)}return Hs(d.eventQueue_,a._path,$),Mc(d.serverSyncTree_,a,l,null,!0),M},C=>(cc(d,"get for query "+(0,z.Wl)(a)+" failed: "+C),Promise.reject(new Error(C))))}(d._repo,d,l).then(m=>new Tl(m,new Gl(d._repo,d._path),d._queryParams.getIndex()))}class Wh{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const m=l._queryParams.getIndex();return new qp("value",this,new Tl(a.snapshotNode,new Gl(l._repo,l._path),m))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new fc(this,a,l):null}matches(a){return a instanceof Wh&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Uf{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new fc(this,a,l):null}createEvent(a,l){(0,z.hu)(null!=a.childName,"Child events should have a childName.");const m=Vc(new Gl(l._repo,l._path),a.childName),C=l._queryParams.getIndex();return new qp(a.type,this,new Tl(a.snapshotNode,m,C),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Uf&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Id(d,a,l,m,C){let M;if("object"==typeof m&&(M=void 0,C=m),"function"==typeof m&&(M=m),C&&C.onlyOnce){const le=l,_e=(Dt,Pt)=>{zp(d._repo,d,X),le(Dt,Pt)};_e.userCallback=l.userCallback,_e.context=l.context,l=_e}const $=new Kp(l,M||void 0),X="value"===a?new Wh($):new Uf(a,$);return function cl(d,a,l){let m;m=".info"===fr(a._path)?pd(d.infoSyncTree_,a,l):pd(d.serverSyncTree_,a,l),Lc(d.eventQueue_,a._path,m)}(d._repo,d,X),()=>zp(d._repo,d,X)}function Vf(d,a,l,m){return Id(d,"value",a,l,m)}function qh(d,a,l,m){return Id(d,"child_added",a,l,m)}function rh(d,a,l,m){return Id(d,"child_changed",a,l,m)}function Xp(d,a,l,m){return Id(d,"child_moved",a,l,m)}function Kh(d,a,l,m){return Id(d,"child_removed",a,l,m)}function Qp(d,a,l){let m=null;const C=l?new Kp(l):null;"value"===a?m=new Wh(C):a&&(m=new Uf(a,C)),zp(d._repo,d,m)}class el{}class ih extends el{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){_o("endAt",this._value,a._path,!0);const l=io(a._queryParams,this._value,this._key);if(Yp(l),Uc(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ba(a._repo,a._path,l,a._orderByCalled)}}class jc extends el{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){_o("endBefore",this._value,a._path,!1);const l=function Iu(d,a,l){let m;return m=io(d,a,d.index_===Za||l?l:Ss),m.endBeforeSet_=!0,m}(a._queryParams,this._value,this._key);if(Yp(l),Uc(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ba(a._repo,a._path,l,a._orderByCalled)}}class eg extends el{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){_o("startAt",this._value,a._path,!0);const l=Eu(a._queryParams,this._value,this._key);if(Yp(l),Uc(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ba(a._repo,a._path,l,a._orderByCalled)}}class Xg extends el{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){_o("startAfter",this._value,a._path,!1);const l=function Pd(d,a,l){let m;return m=Eu(d,a,d.index_===Za||l?l:Uo),m.startAfterSet_=!0,m}(a._queryParams,this._value,this._key);if(Yp(l),Uc(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ba(a._repo,a._path,l,a._orderByCalled)}}class sh extends el{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ba(a._repo,a._path,function ro(d,a){const l=d.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class Hf extends el{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ba(a._repo,a._path,function td(d,a){const l=d.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class zf extends el{constructor(a){super(),this._path=a}_apply(a){$f(a,"orderByChild");const l=new mt(this._path);if(b(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const m=new ka(l),C=Zl(a._queryParams,m);return Uc(C),new ba(a._repo,a._path,C,!0)}}class wd extends el{_apply(a){$f(a,"orderByKey");const l=Zl(a._queryParams,Za);return Uc(l),new ba(a._repo,a._path,l,!0)}}class Zh extends el{_apply(a){$f(a,"orderByPriority");const l=Zl(a._queryParams,B);return Uc(l),new ba(a._repo,a._path,l,!0)}}class tg extends el{_apply(a){$f(a,"orderByValue");const l=Zl(a._queryParams,vo);return Uc(l),new ba(a._repo,a._path,l,!0)}}class Jg extends el{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(_o("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ih(this._value,this._key)._apply(new eg(this._value,this._key)._apply(a))}}function dl(d,...a){let l=(0,z.m9)(d);for(const m of a)l=m._apply(l);return l}(function xh(d){(0,z.hu)(!sa,"__referenceConstructor has already been defined"),sa=d})(Gl),function ts(d){(0,z.hu)(!Wn,"__referenceConstructor has already been defined"),Wn=d}(Gl);const Qm="FIREBASE_DATABASE_EMULATOR_HOST",lh={};let qf=!1;function Kf(d,a,l,m,C){let M=m||d.options.databaseURL;void 0===M&&(d.options.projectId||mo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",d.options.projectId),M=`${d.options.projectId}-default-rtdb.firebaseio.com`);let le,_e,$=Lu(M,C),X=$.repoInfo;typeof process<"u"&&process.env&&(_e=process.env[Qm]),_e?(le=!0,M=`http://${_e}?ns=${X.namespace}`,$=Lu(M,C),X=$.repoInfo):le=!$.repoInfo.secure;const Dt=C&&le?new Ti(Ti.OWNER):new Pi(d.name,d.options,a);$h("Invalid Firebase Database URL",$),b($.path)||mo("Database URL must point to the root of a Firebase Database (not including a child path).");const Pt=function uh(d,a,l,m){let C=lh[a.name];C||(C={},lh[a.name]=C);let M=C[d.toURLString()];return M&&mo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new Wm(d,qf,l,m),C[d.toURLString()]=M,M}(X,d,Dt,new Gi(d.name,l));return new tm(Pt,d)}class tm{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Uh(d,a,l){if(d.stats_=on(d.repoInfo_),d.forceRestClient_||Ar())d.server_=new nd(d.repoInfo_,(m,C,M,$)=>{lu(d,m,C,M,$)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Ug(d,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(l)}catch(m){throw new Error("Invalid authOverride provided: "+m)}}d.persistentConnection_=new Es(d.repoInfo_,a,(m,C,M,$)=>{lu(d,m,C,M,$)},m=>{Ug(d,m)},m=>{!function Vg(d,a){F(a,(l,m)=>{jg(d,l,m)})}(d,m)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(m=>{d.server_.refreshAuthToken(m)}),d.appCheckProvider_.addTokenChangeListener(m=>{d.server_.refreshAppCheckToken(m.token)}),d.statsReporter_=function Ki(d,a){const l=d.toString();return Ml[l]||(Ml[l]=a()),Ml[l]}(d.repoInfo_,()=>new Ld(d.stats_,d.server_)),d.infoData_=new kd,d.infoSyncTree_=new Ac({startListening:(m,C,M,$)=>{let X=[];const le=d.infoData_.getNode(m._path);return le.isEmpty()||(X=bl(d.infoSyncTree_,m._path,le),setTimeout(()=>{$("ok")},0)),X},stopListening:()=>{}}),jg(d,"connected",!1),d.serverSyncTree_=new Ac({startListening:(m,C,M,$)=>(d.server_.listen(m,M,C,(X,le)=>{const _e=$(X,le);Hs(d.eventQueue_,m._path,_e)}),[]),stopListening:(m,C)=>{d.server_.unlisten(m,C)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gl(this._repo,Qr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ba(d,a){const l=lh[a];(!l||l[d.key]!==d)&&mo(`Database ${a}(${d.repoInfo_}) has already been deleted.`),Ff(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&mo("Cannot call "+a+" on a deleted database.")}}function ch(){Zn.IS_TRANSPORT_INITIALIZED&&qr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Zf(){ch(),Ji.forceDisallow()}function nm(){ch(),Br.forceDisallow(),Ji.forceAllow()}function Jm(d,a){ha(d,a)}const $a={".sv":"timestamp"};class Xf{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Es.prototype.simpleListen=function(d,a){this.sendRequest("q",{p:d},a)},Es.prototype.echo=function(d,a){this.sendRequest("echo",{d},a)},function ig(d){Ga(He.SDK_VERSION),(0,He._registerComponent)(new Pe.wA("database",(a,{instanceIdentifier:l})=>Kf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,He.registerVersion)(Do,"0.14.4",d),(0,He.registerVersion)(Do,"0.14.4","esm2017")}();const im=new bo.Yd("@firebase/database-compat"),sm=function(d){im.warn("FIREBASE WARNING: "+d)};class ag{constructor(a){this._delegate=a}cancel(a){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),m=>a(m)),l}remove(a){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),m=>a(m)),l}set(a,l){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",l,!0);const m=this._delegate.set(a);return l&&m.then(()=>l(null),C=>l(C)),m}setWithPriority(a,l,m){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",m,!0);const C=this._delegate.setWithPriority(a,l);return m&&C.then(()=>m(null),M=>m(M)),C}update(a,l){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const C={};for(let M=0;M<a.length;++M)C[""+M]=a[M];a=C,sm("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",l,!0);const m=this._delegate.update(a);return l&&m.then(()=>l(null),C=>l(C)),m}}class Jh{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Bu{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),Jd("DataSnapshot.child","path",a,!1),new Bu(this._database,this._delegate.child(a))}hasChild(a){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jd("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new Bu(this._database,l)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new Da(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ms{constructor(a,l){this.database=a,this._delegate=l}on(a,l,m,C){var M;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",l,!1);const $=Ms.getCancelAndContextArgs_("Query.on",m,C),X=(_e,Dt)=>{l.call($.context,new Bu(this.database,_e),Dt)};X.userCallback=l,X.context=$.context;const le=null===(M=$.cancel)||void 0===M?void 0:M.bind($.context);switch(a){case"value":return Vf(this._delegate,X,le),l;case"child_added":return qh(this._delegate,X,le),l;case"child_removed":return Kh(this._delegate,X,le),l;case"child_changed":return rh(this._delegate,X,le),l;case"child_moved":return Xp(this._delegate,X,le),l;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,m){if((0,z.Dv)("Query.off",0,3,arguments.length),function(d,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,z.Wj)("Query.off","callback",l,!0),(0,z.lb)("Query.off","context",m,!0),l){const C=()=>{};C.userCallback=l,C.context=m,Qp(this._delegate,a,C)}else Qp(this._delegate,a)}get(){return Zm(this._delegate).then(a=>new Bu(this.database,a))}once(a,l,m,C){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",l,!0);const M=Ms.getCancelAndContextArgs_("Query.once",m,C),$=new z.BH,X=(_e,Dt)=>{const Pt=new Bu(this.database,_e);l&&l.call(M.context,Pt,Dt),$.resolve(Pt)};X.userCallback=l,X.context=M.context;const le=_e=>{M.cancel&&M.cancel.call(M.context,_e),$.reject(_e)};switch(a){case"value":Vf(this._delegate,X,le,{onlyOnce:!0});break;case"child_added":qh(this._delegate,X,le,{onlyOnce:!0});break;case"child_removed":Kh(this._delegate,X,le,{onlyOnce:!0});break;case"child_changed":rh(this._delegate,X,le,{onlyOnce:!0});break;case"child_moved":Xp(this._delegate,X,le,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return $.promise}limitToFirst(a){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new Ms(this.database,dl(this._delegate,function oh(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sh(d)}(a)))}limitToLast(a){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new Ms(this.database,dl(this._delegate,function Yh(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hf(d)}(a)))}orderByChild(a){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new Ms(this.database,dl(this._delegate,function Gf(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jd("orderByChild","path",d,!1),new zf(d)}(a)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new Ms(this.database,dl(this._delegate,function Hc(){return new wd}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new Ms(this.database,dl(this._delegate,function ah(){return new Zh}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new Ms(this.database,dl(this._delegate,function Wf(){return new tg}()))}startAt(a=null,l){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new Ms(this.database,dl(this._delegate,function Zg(d=null,a){return yd("startAt","key",a,!0),new eg(d,a)}(a,l)))}startAfter(a=null,l){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new Ms(this.database,dl(this._delegate,function Qg(d,a){return yd("startAfter","key",a,!0),new Xg(d,a)}(a,l)))}endAt(a=null,l){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new Ms(this.database,dl(this._delegate,function Jp(d,a){return yd("endAt","key",a,!0),new ih(d,a)}(a,l)))}endBefore(a=null,l){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new Ms(this.database,dl(this._delegate,function jf(d,a){return yd("endBefore","key",a,!0),new jc(d,a)}(a,l)))}equalTo(a,l){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new Ms(this.database,dl(this._delegate,function Xm(d,a){return yd("equalTo","key",a,!0),new Jg(d,a)}(a,l)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,m){const C={cancel:void 0,context:void 0};if(l&&m)C.cancel=l,(0,z.Wj)(a,"cancel",C.cancel,!0),C.context=m,(0,z.lb)(a,"context",C.context,!0);else if(l)if("object"==typeof l&&null!==l)C.context=l;else{if("function"!=typeof l)throw new Error((0,z.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");C.cancel=l}return C}get ref(){return new Da(this.database,new Gl(this._delegate._repo,this._delegate._path))}}class Da extends Ms{constructor(a,l){super(a,new ba(l._repo,l._path,new _u,!1)),this.database=a,this._delegate=l}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new Da(this.database,Vc(this._delegate,a))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new Da(this.database,a):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new Da(this.database,this._delegate.root)}set(a,l){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",l,!0);const m=nh(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}update(a,l){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const C={};for(let M=0;M<a.length;++M)C[""+M]=a[M];a=C,sm("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Dl("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",l,!0);const m=Ym(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}setWithPriority(a,l,m){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",m,!0);const C=function Go(d,a,l){if(Dl("setWithPriority",d._path),_o("setWithPriority",a,d._path,!1),Bh("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const m=new z.BH;return jp(d._repo,d._path,a,l,m.wrapCallback(()=>{})),m.promise}(this._delegate,a,l);return m&&C.then(()=>m(null),M=>m(M)),C}remove(a){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",a,!0);const l=function Yg(d){return Dl("remove",d._path),nh(d,null)}(this._delegate);return a&&l.then(()=>a(null),m=>a(m)),l}transaction(a,l,m){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,z.Wj)("Reference.transaction","onComplete",l,!0),function(d,a,l,m){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,m);const C=function Qh(d,a,l){var m;if(d=(0,z.m9)(d),Dl("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const C=null===(m=null==l?void 0:l.applyLocally)||void 0===m||m,M=new z.BH,X=Vf(d,()=>{});return function zg(d,a,l,m,C,M){cc(d,"transaction on "+a);const $={path:a,update:l,onComplete:m,status:null,order:pl(),applyLocally:M,retryCount:0,unwatcher:C,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},X=Hh(d,a,void 0);$.currentInputSnapshot=X;const le=$.update(X.val());if(void 0===le)$.unwatcher(),$.currentOutputSnapshotRaw=null,$.currentOutputSnapshotResolved=null,$.onComplete&&$.onComplete(null,!1,$.currentInputSnapshot);else{Ja("transaction failed: Data returned ",le,$.path),$.status=0;const _e=md(d.transactionQueueTree_,a),Dt=ku(_e)||[];let Pt;Dt.push($),Fp(_e,Dt),"object"==typeof le&&null!==le&&(0,z.r3)(le,".priority")?(Pt=(0,z.DV)(le,".priority"),(0,z.hu)(au(Pt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Pt=(Tf(d.serverSyncTree_,a)||ln.EMPTY_NODE).getPriority().val();const Ht=Ca(d),En=Kr(le,Pt),Ln=gd(En,X,Ht);$.currentOutputSnapshotRaw=En,$.currentOutputSnapshotResolved=Ln,$.currentWriteId=Vh(d);const Jr=xc(d.serverSyncTree_,a,Ln,$.currentWriteId,$.applyLocally);Hs(d.eventQueue_,a,Jr),zo(d,d.transactionQueueTree_)}}(d._repo,d._path,a,(le,_e,Dt)=>{let Pt=null;le?M.reject(le):(Pt=new Tl(Dt,new Gl(d._repo,d._path),B),M.resolve(new Xf(_e,Pt)))},X,C),M.promise}(this._delegate,a,{applyLocally:m}).then(M=>new Jh(M.committed,new Bu(this.database,M.snapshot)));return l&&C.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),C}setPriority(a,l){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",l,!0);const m=function Zp(d,a){d=(0,z.m9)(d),Dl("setPriority",d._path),Bh("setPriority",a,!1);const l=new z.BH;return jp(d._repo,R(d._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&m.then(()=>l(null),C=>l(C)),m}push(a,l){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",l,!0);const m=function Kg(d,a){d=(0,z.m9)(d),Dl("push",d._path),_o("push",a,d._path,!0);const l=Bc(d._repo),m=Wp(l),C=Vc(d,m),M=Vc(d,m);let $;return $=null!=a?nh(M,a).then(()=>M):Promise.resolve(M),C.then=$.then.bind($),C.catch=$.then.bind($,void 0),C}(this._delegate,a),C=m.then($=>new Da(this.database,$));l&&C.then(()=>l(null),$=>l($));const M=new Da(this.database,m);return M.then=C.then.bind(C),M.catch=C.catch.bind(C,void 0),M}onDisconnect(){return Dl("Reference.onDisconnect",this._delegate._path),new ag(new _d(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cu{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Zf,forceLongPolling:nm}}useEmulator(a,l,m={}){!function ng(d,a,l,m={}){(d=(0,z.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&mo("Cannot call useEmulator() after instance has already been initialized.");const C=d._repoInternal;let M;if(C.repoInfo_.nodeAdmin)m.mockUserToken&&mo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new Ti(Ti.OWNER);else if(m.mockUserToken){const $="string"==typeof m.mockUserToken?m.mockUserToken:(0,z.Sg)(m.mockUserToken,d.app.options.projectId);M=new Ti($)}!function em(d,a,l,m){d.repoInfo_=new ql(`${a}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams,!0),m&&(d.authTokenProvider_=m)}(C,a,l,M)}(this._delegate,a,l,m)}ref(a){if((0,z.Dv)("database.ref",0,1,arguments.length),a instanceof Da){const l=qg(this._delegate,a.toString());return new Da(this,l)}{const l=Ed(this._delegate,a);return new Da(this,l)}}refFromURL(a){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const m=qg(this._delegate,a);return new Da(this,m)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function Xh(d){(d=(0,z.m9)(d))._checkNotDeleted("goOffline"),Ff(d._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function rg(d){(d=(0,z.m9)(d))._checkNotDeleted("goOnline"),function jh(d){d.persistentConnection_&&d.persistentConnection_.resume($g)}(d._repo)}(this._delegate)}}cu.ServerValue={TIMESTAMP:function ey(){return $a}(),increment:d=>function rm(d){return{".sv":{increment:d}}}(d)};var ef=Object.freeze({__proto__:null,initStandalone:function Qf({app:d,url:a,version:l,customAuthImpl:m,namespace:C,nodeAdmin:M=!1}){Ga(l);const $=new Pe.zt("auth-internal",new Pe.H0("database-standalone"));return $.setComponent(new Pe.wA("auth-internal",()=>m,"PRIVATE")),{instance:new cu(Kf(d,$,void 0,a,M),d),namespace:C}}});const iy=cu.ServerValue;function tp(d){return null==d}function np(d){return"function"==typeof d.set}function Wl(d,a){return np(a)?a:d.ref(a)}function tf(d,a){if(function ep(d){return"string"==typeof d}(d))return a.stringCase();if(np(d))return a.firebaseCase();if(function pc(d){return"function"==typeof d.exportVal}(d))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function $u(d,a,l="on",m=Ve.z){return new ce.y(C=>{let M=null;return M=d[l](a,($,X)=>{m.schedule(()=>{C.next({snapshot:$,prevKey:X})}),"once"===l&&m.schedule(()=>C.complete())},$=>{m.schedule(()=>C.error($))}),"on"===l?{unsubscribe(){null!=M&&d.off(a,M)}}:{unsubscribe(){}}}).pipe((0,ye.U)(C=>{const{snapshot:M,prevKey:$}=C;let X=null;return M.exists()&&(X=M.key),{type:a,payload:M,prevKey:$,key:X}}),(0,tn.B)())}function rp(d,a){const l=d.length;for(let m=0;m<l;m++)if(d[m].payload.key===a)return m;return-1}function ip(d,a){const{payload:l,prevKey:m,key:C}=a,M=rp(d,C),$=function rf(d,a){if(tp(a))return 0;{const l=rp(d,a);return-1===l?d.length:l+1}}(d,m);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let X=null;a.payload.forEach(le=>{const _e={payload:le,type:"value",prevKey:X,key:le.key};return X=le.key,d=[...d,_e],!1})}return d;case"child_added":if(M>-1){const X=d[M-1];(X&&X.key||null)!==m&&(d=d.filter(le=>le.payload.key!==l.key)).splice($,0,a)}else{if(null==m)return[a,...d];(d=d.slice()).splice($,0,a)}return d;case"child_removed":return d.filter(X=>X.payload.key!==l.key);case"child_changed":return d.map(X=>X.payload.key===C?a:X);case"child_moved":if(M>-1){const X=d.splice(M,1)[0];return(d=d.slice()).splice($,0,X),d}return d;default:return d}}function lg(d){return(tp(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Cd(d,a,l){return function nf(d,a,l){return $u(d,"value","once",l).pipe((0,ue.w)(m=>{const C=[(0,he.of)(m)];return a.forEach(M=>C.push($u(d,M,"on",l))),(0,Le.T)(...C).pipe((0,gn.R)(ip,[]))}),(0,qn.x)())}(d,a=lg(a),l)}function zc(d,a,l){const m=(a=lg(a)).map(C=>$u(d,C,"on",l));return(0,Le.T)(...m)}function ug(d,a){return function(m,C){return tf(m,{stringCase:()=>d.child(m)[a](C),firebaseCase:()=>m[a](C),snapshotCase:()=>m.ref[a](C)})}}function oy(d){return function(l){return l?tf(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function am(d,a){return function(){return $u(d,"value","on",a)}}!function Jf(d){d.INTERNAL.registerComponent(new Pe.wA("database-compat",(a,{instanceIdentifier:l})=>{const m=a.getProvider("app-compat").getImmediate(),C=a.getProvider("database").getImmediate({identifier:l});return new cu(C,m)},"PUBLIC").setServiceProps({Reference:Da,Query:Ms,Database:cu,DataSnapshot:Bu,enableLogging:Jm,INTERNAL:ef,ServerValue:iy}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.3.4")}(pt.Z);const ay=new Q.OlP("angularfire2.realtimeDatabaseURL"),sp=new Q.OlP("angularfire2.database.use-emulator");let hg=(()=>{class d{constructor(l,m,C,M,$,X,le,_e,Dt,Pt,Ht,En,Ln,Jr,Ur){this.schedulers=X;const ws=le,Oi=(0,je.on)(l,$,m);_e&&(0,me.nw)(Oi,$,Dt,Ht,En,Ln,Pt,Jr),this.database=(0,je.cc)(`${Oi.name}.database.${C}`,"AngularFireDatabase",Oi.name,()=>{const Yi=$.runOutsideAngular(()=>Oi.database(C||void 0));return ws&&Yi.useEmulator(...ws),Yi},[ws])}list(l,m){const C=this.schedulers.ngZone.runOutsideAngular(()=>Wl(this.database,l));let M=C;return m&&(M=m(C)),function cg(d,a){const l=a.schedulers.outsideAngular,m=a.schedulers.ngZone.run(()=>d.ref);return{query:d,update:ug(m,"update"),set:ug(m,"set"),push:C=>m.push(C),remove:oy(m),snapshotChanges:C=>Cd(d,C,l).pipe(rt.iC),stateChanges:C=>zc(d,C,l).pipe(rt.iC),auditTrail:C=>function sy(d,a,l){return function om(d,a,l){return function Jy(d,a){return $u(d,"value","on",a).pipe((0,ye.U)(l=>{let m;return l.payload.forEach(C=>(m=C.key,!1)),{data:l,lastKeyToLoad:m}}))}(d,l).pipe(function _s(...d){const a=(0,cs.jO)(d);return(0,lt.e)((l,m)=>{const C=d.length,M=new Array(C);let $=d.map(()=>!1),X=!1;for(let le=0;le<C;le++)(0,Sr.Xf)(d[le]).subscribe((0,At.x)(m,_e=>{M[le]=_e,!X&&!$[le]&&($[le]=!0,(X=$.every(hi.y))&&($=null))},br.Z));l.subscribe((0,At.x)(m,le=>{if(X){const _e=[le,...M];m.next(a?a(..._e):_e)}}))})}(a),(0,ye.U)(([C,M])=>{const $=C.lastKeyToLoad,X=M.map(le=>le.key);return{actions:M,lastKeyToLoad:$,loadedKeys:X}}),function Ii(d){return(0,lt.e)((a,l)=>{let m=!1,C=0;a.subscribe((0,At.x)(l,M=>(m||(m=!d(M,C++)))&&l.next(M)))})}(C=>-1===C.loadedKeys.indexOf(C.lastKeyToLoad)),(0,ye.U)(C=>C.actions))}(d,zc(d,a).pipe((0,gn.R)((C,M)=>[...C,M],[])),l)}(d,C,l).pipe(rt.iC),valueChanges:(C,M)=>Cd(d,C,l).pipe((0,ye.U)(X=>X.map(le=>M&&M.idField?Object.assign(Object.assign({},le.payload.val()),{[M.idField]:le.key}):le.payload.val())),rt.iC)}}(M,this)}object(l){return function dg(d,a){return{query:d,snapshotChanges:()=>am(d,a.schedulers.outsideAngular)().pipe(rt.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>am(d,a.schedulers.outsideAngular)().pipe(rt.iC,(0,ye.U)(m=>m.payload.exists()?m.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Wl(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(Q.LFG(je.Dh),Q.LFG(je.xv,8),Q.LFG(ay,8),Q.LFG(Q.Lbi),Q.LFG(Q.R0b),Q.LFG(rt.HU),Q.LFG(sp,8),Q.LFG(me.zQ,8),Q.LFG(me.Qv,8),Q.LFG(me.L6,8),Q.LFG(me._Q,8),Q.LFG(me.rT,8),Q.LFG(me.lh,8),Q.LFG(me.f7,8),Q.LFG(Lo.nm,8))},d.\u0275prov=Q.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),fg=(()=>{class d{constructor(){ur.Z.registerVersion("angularfire",rt.q4.full,"rtdb-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=Q.oAB({type:d}),d.\u0275inj=Q.cJS({providers:[hg]}),d})();const sf_firebase={apiKey:"AIzaSyAlipk4_yazgkfMvQO28JtMO-ESxlsV_bs",authDomain:"proyecto-ebfce.firebaseapp.com",projectId:"proyecto-ebfce",storageBucket:"proyecto-ebfce.appspot.com",messagingSenderId:"40983827854",appId:"1:40983827854:web:9cb957bbcb897a860bc0df",measurementId:"G-W5L3D26HR2"};var pg=V(529);let gg=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=Q.oAB({type:d,bootstrap:[Oe]}),d.\u0275inj=Q.cJS({providers:[{provide:W.wN,useClass:xe.r4}],imports:[u.b2,xe.Pc.forRoot(),ve,Ne.u5,Ne.UX,je.hO.initializeApp(sf_firebase),q.yb,me.ww,T,fg,pg.JF]}),d})();(0,Q.G48)(),u.q6().bootstrapModule(gg).catch(d=>console.log(d))},1135:(yn,Et,V)=>{"use strict";V.d(Et,{X:()=>Q});var u=V(7579);class Q extends u.x{constructor(xe){super(),this._value=xe}get value(){return this.getValue()}_subscribe(xe){const Oe=super._subscribe(xe);return!Oe.closed&&xe.next(this._value),Oe}getValue(){const{hasError:xe,thrownError:Oe,_value:ke}=this;if(xe)throw Oe;return this._throwIfClosed(),ke}next(xe){super.next(this._value=xe)}}},9751:(yn,Et,V)=>{"use strict";V.d(Et,{y:()=>Ne});var u=V(930),Q=V(727),W=V(8822),xe=V(9635),Oe=V(2416),ke=V(576),ve=V(2806);let Ne=(()=>{class he{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const lt=new he;return lt.source=this,lt.operator=Ve,lt}subscribe(Ve,lt,At){const De=function ce(he){return he&&he instanceof u.Lv||function me(he){return he&&(0,ke.m)(he.next)&&(0,ke.m)(he.error)&&(0,ke.m)(he.complete)}(he)&&(0,Q.Nn)(he)}(Ve)?Ve:new u.Hp(Ve,lt,At);return(0,ve.x)(()=>{const{operator:ye,source:ue}=this;De.add(ye?ye.call(De,ue):ue?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(lt){Ve.error(lt)}}forEach(Ve,lt){return new(lt=je(lt))((At,De)=>{const ye=new u.Hp({next:ue=>{try{Ve(ue)}catch(rt){De(rt),ye.unsubscribe()}},error:De,complete:At});this.subscribe(ye)})}_subscribe(Ve){var lt;return null===(lt=this.source)||void 0===lt?void 0:lt.subscribe(Ve)}[W.L](){return this}pipe(...Ve){return(0,xe.U)(Ve)(this)}toPromise(Ve){return new(Ve=je(Ve))((lt,At)=>{let De;this.subscribe(ye=>De=ye,ye=>At(ye),()=>lt(De))})}}return he.create=Re=>new he(Re),he})();function je(he){var Re;return null!==(Re=null!=he?he:Oe.v.Promise)&&void 0!==Re?Re:Promise}},7579:(yn,Et,V)=>{"use strict";V.d(Et,{x:()=>ve});var u=V(9751),Q=V(727);const xe=(0,V(3888).d)(je=>function(){je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=V(8737),ke=V(2806);let ve=(()=>{class je extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ce){const he=new Ne(this,this);return he.operator=ce,he}_throwIfClosed(){if(this.closed)throw new xe}next(ce){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(ce)}})}error(ce){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ce;const{observers:he}=this;for(;he.length;)he.shift().error(ce)}})}complete(){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ce}=this;for(;ce.length;)ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ce;return(null===(ce=this.observers)||void 0===ce?void 0:ce.length)>0}_trySubscribe(ce){return this._throwIfClosed(),super._trySubscribe(ce)}_subscribe(ce){return this._throwIfClosed(),this._checkFinalizedStatuses(ce),this._innerSubscribe(ce)}_innerSubscribe(ce){const{hasError:he,isStopped:Re,observers:Ve}=this;return he||Re?Q.Lc:(this.currentObservers=null,Ve.push(ce),new Q.w0(()=>{this.currentObservers=null,(0,Oe.P)(Ve,ce)}))}_checkFinalizedStatuses(ce){const{hasError:he,thrownError:Re,isStopped:Ve}=this;he?ce.error(Re):Ve&&ce.complete()}asObservable(){const ce=new u.y;return ce.source=this,ce}}return je.create=(me,ce)=>new Ne(me,ce),je})();class Ne extends ve{constructor(me,ce){super(),this.destination=me,this.source=ce}next(me){var ce,he;null===(he=null===(ce=this.destination)||void 0===ce?void 0:ce.next)||void 0===he||he.call(ce,me)}error(me){var ce,he;null===(he=null===(ce=this.destination)||void 0===ce?void 0:ce.error)||void 0===he||he.call(ce,me)}complete(){var me,ce;null===(ce=null===(me=this.destination)||void 0===me?void 0:me.complete)||void 0===ce||ce.call(me)}_subscribe(me){var ce,he;return null!==(he=null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(me))&&void 0!==he?he:Q.Lc}}},930:(yn,Et,V)=>{"use strict";V.d(Et,{Hp:()=>At,Lv:()=>he});var u=V(576),Q=V(727),W=V(2416),xe=V(7849),Oe=V(5032);const ke=je("C",void 0,void 0);function je(pt,et,He){return{kind:pt,value:et,error:He}}var me=V(3410),ce=V(2806);class he extends Q.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,Q.Nn)(et)&&et.add(this)):this.destination=rt}static create(et,He,z){return new At(et,He,z)}next(et){this.isStopped?ue(function Ne(pt){return je("N",pt,void 0)}(et),this):this._next(et)}error(et){this.isStopped?ue(function ve(pt){return je("E",void 0,pt)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?ue(ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Re=Function.prototype.bind;function Ve(pt,et){return Re.call(pt,et)}class lt{constructor(et){this.partialObserver=et}next(et){const{partialObserver:He}=this;if(He.next)try{He.next(et)}catch(z){De(z)}}error(et){const{partialObserver:He}=this;if(He.error)try{He.error(et)}catch(z){De(z)}else De(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(He){De(He)}}}class At extends he{constructor(et,He,z){let Pe;if(super(),(0,u.m)(et)||!et)Pe={next:null!=et?et:void 0,error:null!=He?He:void 0,complete:null!=z?z:void 0};else{let Te;this&&W.v.useDeprecatedNextContext?(Te=Object.create(et),Te.unsubscribe=()=>this.unsubscribe(),Pe={next:et.next&&Ve(et.next,Te),error:et.error&&Ve(et.error,Te),complete:et.complete&&Ve(et.complete,Te)}):Pe=et}this.destination=new lt(Pe)}}function De(pt){W.v.useDeprecatedSynchronousErrorHandling?(0,ce.O)(pt):(0,xe.h)(pt)}function ue(pt,et){const{onStoppedNotification:He}=W.v;He&&me.z.setTimeout(()=>He(pt,et))}const rt={closed:!0,next:Oe.Z,error:function ye(pt){throw pt},complete:Oe.Z}},727:(yn,Et,V)=>{"use strict";V.d(Et,{Lc:()=>ke,w0:()=>Oe,Nn:()=>ve});var u=V(576);const W=(0,V(3888).d)(je=>function(ce){je(this),this.message=ce?`${ce.length} errors occurred during unsubscription:\n${ce.map((he,Re)=>`${Re+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ce});var xe=V(8737);class Oe{constructor(me){this.initialTeardown=me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let me;if(!this.closed){this.closed=!0;const{_parentage:ce}=this;if(ce)if(this._parentage=null,Array.isArray(ce))for(const Ve of ce)Ve.remove(this);else ce.remove(this);const{initialTeardown:he}=this;if((0,u.m)(he))try{he()}catch(Ve){me=Ve instanceof W?Ve.errors:[Ve]}const{_finalizers:Re}=this;if(Re){this._finalizers=null;for(const Ve of Re)try{Ne(Ve)}catch(lt){me=null!=me?me:[],lt instanceof W?me=[...me,...lt.errors]:me.push(lt)}}if(me)throw new W(me)}}add(me){var ce;if(me&&me!==this)if(this.closed)Ne(me);else{if(me instanceof Oe){if(me.closed||me._hasParent(this))return;me._addParent(this)}(this._finalizers=null!==(ce=this._finalizers)&&void 0!==ce?ce:[]).push(me)}}_hasParent(me){const{_parentage:ce}=this;return ce===me||Array.isArray(ce)&&ce.includes(me)}_addParent(me){const{_parentage:ce}=this;this._parentage=Array.isArray(ce)?(ce.push(me),ce):ce?[ce,me]:me}_removeParent(me){const{_parentage:ce}=this;ce===me?this._parentage=null:Array.isArray(ce)&&(0,xe.P)(ce,me)}remove(me){const{_finalizers:ce}=this;ce&&(0,xe.P)(ce,me),me instanceof Oe&&me._removeParent(this)}}Oe.EMPTY=(()=>{const je=new Oe;return je.closed=!0,je})();const ke=Oe.EMPTY;function ve(je){return je instanceof Oe||je&&"closed"in je&&(0,u.m)(je.remove)&&(0,u.m)(je.add)&&(0,u.m)(je.unsubscribe)}function Ne(je){(0,u.m)(je)?je():je.unsubscribe()}},2416:(yn,Et,V)=>{"use strict";V.d(Et,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(yn,Et,V)=>{"use strict";V.d(Et,{z:()=>Oe});var u=V(8189),W=V(7669),xe=V(8996);function Oe(...ke){return function Q(){return(0,u.J)(1)}()((0,xe.D)(ke,(0,W.yG)(ke)))}},515:(yn,Et,V)=>{"use strict";V.d(Et,{E:()=>Q});const Q=new(V(9751).y)(Oe=>Oe.complete())},8996:(yn,Et,V)=>{"use strict";V.d(Et,{D:()=>et});var u=V(8421),Q=V(5363),W=V(9468),ke=V(9751),Ne=V(2202),je=V(576),me=V(9672);function he(He,z){if(!He)throw new Error("Iterable cannot be null");return new ke.y(Pe=>{(0,me.f)(Pe,z,()=>{const Te=He[Symbol.asyncIterator]();(0,me.f)(Pe,z,()=>{Te.next().then(Se=>{Se.done?Pe.complete():Pe.next(Se.value)})},0,!0)})})}var Re=V(3670),Ve=V(8239),lt=V(1144),At=V(6495),De=V(2206),ye=V(4532),ue=V(3260);function et(He,z){return z?function pt(He,z){if(null!=He){if((0,Re.c)(He))return function xe(He,z){return(0,u.Xf)(He).pipe((0,W.R)(z),(0,Q.Q)(z))}(He,z);if((0,lt.z)(He))return function ve(He,z){return new ke.y(Pe=>{let Te=0;return z.schedule(function(){Te===He.length?Pe.complete():(Pe.next(He[Te++]),Pe.closed||this.schedule())})})}(He,z);if((0,Ve.t)(He))return function Oe(He,z){return(0,u.Xf)(He).pipe((0,W.R)(z),(0,Q.Q)(z))}(He,z);if((0,De.D)(He))return he(He,z);if((0,At.T)(He))return function ce(He,z){return new ke.y(Pe=>{let Te;return(0,me.f)(Pe,z,()=>{Te=He[Ne.h](),(0,me.f)(Pe,z,()=>{let Se,it;try{({value:Se,done:it}=Te.next())}catch(qe){return void Pe.error(qe)}it?Pe.complete():Pe.next(Se)},0,!0)}),()=>(0,je.m)(null==Te?void 0:Te.return)&&Te.return()})}(He,z);if((0,ue.L)(He))return function rt(He,z){return he((0,ue.Q)(He),z)}(He,z)}throw(0,ye.z)(He)}(He,z):(0,u.Xf)(He)}},8421:(yn,Et,V)=>{"use strict";V.d(Et,{Xf:()=>Re});var u=V(655),Q=V(1144),W=V(8239),xe=V(9751),Oe=V(3670),ke=V(2206),ve=V(4532),Ne=V(6495),je=V(3260),me=V(576),ce=V(7849),he=V(8822);function Re(pt){if(pt instanceof xe.y)return pt;if(null!=pt){if((0,Oe.c)(pt))return function Ve(pt){return new xe.y(et=>{const He=pt[he.L]();if((0,me.m)(He.subscribe))return He.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pt);if((0,Q.z)(pt))return function lt(pt){return new xe.y(et=>{for(let He=0;He<pt.length&&!et.closed;He++)et.next(pt[He]);et.complete()})}(pt);if((0,W.t)(pt))return function At(pt){return new xe.y(et=>{pt.then(He=>{et.closed||(et.next(He),et.complete())},He=>et.error(He)).then(null,ce.h)})}(pt);if((0,ke.D)(pt))return ye(pt);if((0,Ne.T)(pt))return function De(pt){return new xe.y(et=>{for(const He of pt)if(et.next(He),et.closed)return;et.complete()})}(pt);if((0,je.L)(pt))return function ue(pt){return ye((0,je.Q)(pt))}(pt)}throw(0,ve.z)(pt)}function ye(pt){return new xe.y(et=>{(function rt(pt,et){var He,z,Pe,Te;return(0,u.mG)(this,void 0,void 0,function*(){try{for(He=(0,u.KL)(pt);!(z=yield He.next()).done;)if(et.next(z.value),et.closed)return}catch(Se){Pe={error:Se}}finally{try{z&&!z.done&&(Te=He.return)&&(yield Te.call(He))}finally{if(Pe)throw Pe.error}}et.complete()})})(pt,et).catch(He=>et.error(He))})}},6451:(yn,Et,V)=>{"use strict";V.d(Et,{T:()=>ke});var u=V(8189),Q=V(8421),W=V(515),xe=V(7669),Oe=V(8996);function ke(...ve){const Ne=(0,xe.yG)(ve),je=(0,xe._6)(ve,1/0),me=ve;return me.length?1===me.length?(0,Q.Xf)(me[0]):(0,u.J)(je)((0,Oe.D)(me,Ne)):W.E}},9646:(yn,Et,V)=>{"use strict";V.d(Et,{of:()=>W});var u=V(7669),Q=V(8996);function W(...xe){const Oe=(0,u.yG)(xe);return(0,Q.D)(xe,Oe)}},5403:(yn,Et,V)=>{"use strict";V.d(Et,{x:()=>Q});var u=V(930);function Q(xe,Oe,ke,ve,Ne){return new W(xe,Oe,ke,ve,Ne)}class W extends u.Lv{constructor(Oe,ke,ve,Ne,je,me){super(Oe),this.onFinalize=je,this.shouldUnsubscribe=me,this._next=ke?function(ce){try{ke(ce)}catch(he){Oe.error(he)}}:super._next,this._error=Ne?function(ce){try{Ne(ce)}catch(he){Oe.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(ce){Oe.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ke}=this;super.unsubscribe(),!ke&&(null===(Oe=this.onFinalize)||void 0===Oe||Oe.call(this))}}}},4351:(yn,Et,V)=>{"use strict";V.d(Et,{b:()=>W});var u=V(5577),Q=V(576);function W(xe,Oe){return(0,Q.m)(Oe)?(0,u.z)(xe,Oe,1):(0,u.z)(xe,1)}},6590:(yn,Et,V)=>{"use strict";V.d(Et,{d:()=>W});var u=V(4482),Q=V(5403);function W(xe){return(0,u.e)((Oe,ke)=>{let ve=!1;Oe.subscribe((0,Q.x)(ke,Ne=>{ve=!0,ke.next(Ne)},()=>{ve||ke.next(xe),ke.complete()}))})}},1884:(yn,Et,V)=>{"use strict";V.d(Et,{x:()=>xe});var u=V(4671),Q=V(4482),W=V(5403);function xe(ke,ve=u.y){return ke=null!=ke?ke:Oe,(0,Q.e)((Ne,je)=>{let me,ce=!0;Ne.subscribe((0,W.x)(je,he=>{const Re=ve(he);(ce||!ke(me,Re))&&(ce=!1,me=Re,je.next(he))}))})}function Oe(ke,ve){return ke===ve}},9300:(yn,Et,V)=>{"use strict";V.d(Et,{h:()=>W});var u=V(4482),Q=V(5403);function W(xe,Oe){return(0,u.e)((ke,ve)=>{let Ne=0;ke.subscribe((0,Q.x)(ve,je=>xe.call(Oe,je,Ne++)&&ve.next(je)))})}},590:(yn,Et,V)=>{"use strict";V.d(Et,{P:()=>ve});var u=V(6805),Q=V(9300),W=V(5698),xe=V(6590),Oe=V(8068),ke=V(4671);function ve(Ne,je){const me=arguments.length>=2;return ce=>ce.pipe(Ne?(0,Q.h)((he,Re)=>Ne(he,Re,ce)):ke.y,(0,W.q)(1),me?(0,xe.d)(je):(0,Oe.T)(()=>new u.K))}},4004:(yn,Et,V)=>{"use strict";V.d(Et,{U:()=>W});var u=V(4482),Q=V(5403);function W(xe,Oe){return(0,u.e)((ke,ve)=>{let Ne=0;ke.subscribe((0,Q.x)(ve,je=>{ve.next(xe.call(Oe,je,Ne++))}))})}},8189:(yn,Et,V)=>{"use strict";V.d(Et,{J:()=>W});var u=V(5577),Q=V(4671);function W(xe=1/0){return(0,u.z)(Q.y,xe)}},5577:(yn,Et,V)=>{"use strict";V.d(Et,{z:()=>Ne});var u=V(4004),Q=V(8421),W=V(4482),xe=V(9672),Oe=V(5403),ve=V(576);function Ne(je,me,ce=1/0){return(0,ve.m)(me)?Ne((he,Re)=>(0,u.U)((Ve,lt)=>me(he,Ve,Re,lt))((0,Q.Xf)(je(he,Re))),ce):("number"==typeof me&&(ce=me),(0,W.e)((he,Re)=>function ke(je,me,ce,he,Re,Ve,lt,At){const De=[];let ye=0,ue=0,rt=!1;const pt=()=>{rt&&!De.length&&!ye&&me.complete()},et=z=>ye<he?He(z):De.push(z),He=z=>{Ve&&me.next(z),ye++;let Pe=!1;(0,Q.Xf)(ce(z,ue++)).subscribe((0,Oe.x)(me,Te=>{null==Re||Re(Te),Ve?et(Te):me.next(Te)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(ye--;De.length&&ye<he;){const Te=De.shift();lt?(0,xe.f)(me,lt,()=>He(Te)):He(Te)}pt()}catch(Te){me.error(Te)}}))};return je.subscribe((0,Oe.x)(me,et,()=>{rt=!0,pt()})),()=>{null==At||At()}}(he,Re,je,ce)))}},5363:(yn,Et,V)=>{"use strict";V.d(Et,{Q:()=>xe});var u=V(9672),Q=V(4482),W=V(5403);function xe(Oe,ke=0){return(0,Q.e)((ve,Ne)=>{ve.subscribe((0,W.x)(Ne,je=>(0,u.f)(Ne,Oe,()=>Ne.next(je),ke),()=>(0,u.f)(Ne,Oe,()=>Ne.complete(),ke),je=>(0,u.f)(Ne,Oe,()=>Ne.error(je),ke)))})}},5026:(yn,Et,V)=>{"use strict";V.d(Et,{R:()=>xe});var u=V(4482),Q=V(5403);function xe(Oe,ke){return(0,u.e)(function W(Oe,ke,ve,Ne,je){return(me,ce)=>{let he=ve,Re=ke,Ve=0;me.subscribe((0,Q.x)(ce,lt=>{const At=Ve++;Re=he?Oe(Re,lt,At):(he=!0,lt),Ne&&ce.next(Re)},je&&(()=>{he&&ce.next(Re),ce.complete()})))}}(Oe,ke,arguments.length>=2,!0))}},3099:(yn,Et,V)=>{"use strict";V.d(Et,{B:()=>Oe});var u=V(8421),Q=V(7579),W=V(930),xe=V(4482);function Oe(ve={}){const{connector:Ne=(()=>new Q.x),resetOnError:je=!0,resetOnComplete:me=!0,resetOnRefCountZero:ce=!0}=ve;return he=>{let Re,Ve,lt,At=0,De=!1,ye=!1;const ue=()=>{null==Ve||Ve.unsubscribe(),Ve=void 0},rt=()=>{ue(),Re=lt=void 0,De=ye=!1},pt=()=>{const et=Re;rt(),null==et||et.unsubscribe()};return(0,xe.e)((et,He)=>{At++,!ye&&!De&&ue();const z=lt=null!=lt?lt:Ne();He.add(()=>{At--,0===At&&!ye&&!De&&(Ve=ke(pt,ce))}),z.subscribe(He),!Re&&At>0&&(Re=new W.Hp({next:Pe=>z.next(Pe),error:Pe=>{ye=!0,ue(),Ve=ke(rt,je,Pe),z.error(Pe)},complete:()=>{De=!0,ue(),Ve=ke(rt,me),z.complete()}}),(0,u.Xf)(et).subscribe(Re))})(he)}}function ke(ve,Ne,...je){if(!0===Ne)return void ve();if(!1===Ne)return;const me=new W.Hp({next:()=>{me.unsubscribe(),ve()}});return Ne(...je).subscribe(me)}},8675:(yn,Et,V)=>{"use strict";V.d(Et,{O:()=>xe});var u=V(7272),Q=V(7669),W=V(4482);function xe(...Oe){const ke=(0,Q.yG)(Oe);return(0,W.e)((ve,Ne)=>{(ke?(0,u.z)(Oe,ve,ke):(0,u.z)(Oe,ve)).subscribe(Ne)})}},9468:(yn,Et,V)=>{"use strict";V.d(Et,{R:()=>Q});var u=V(4482);function Q(W,xe=0){return(0,u.e)((Oe,ke)=>{ke.add(W.schedule(()=>Oe.subscribe(ke),xe))})}},3900:(yn,Et,V)=>{"use strict";V.d(Et,{w:()=>xe});var u=V(8421),Q=V(4482),W=V(5403);function xe(Oe,ke){return(0,Q.e)((ve,Ne)=>{let je=null,me=0,ce=!1;const he=()=>ce&&!je&&Ne.complete();ve.subscribe((0,W.x)(Ne,Re=>{null==je||je.unsubscribe();let Ve=0;const lt=me++;(0,u.Xf)(Oe(Re,lt)).subscribe(je=(0,W.x)(Ne,At=>Ne.next(ke?ke(Re,At,lt,Ve++):At),()=>{je=null,he()}))},()=>{ce=!0,he()}))})}},5698:(yn,Et,V)=>{"use strict";V.d(Et,{q:()=>xe});var u=V(515),Q=V(4482),W=V(5403);function xe(Oe){return Oe<=0?()=>u.E:(0,Q.e)((ke,ve)=>{let Ne=0;ke.subscribe((0,W.x)(ve,je=>{++Ne<=Oe&&(ve.next(je),Oe<=Ne&&ve.complete())}))})}},8505:(yn,Et,V)=>{"use strict";V.d(Et,{b:()=>Oe});var u=V(576),Q=V(4482),W=V(5403),xe=V(4671);function Oe(ke,ve,Ne){const je=(0,u.m)(ke)||ve||Ne?{next:ke,error:ve,complete:Ne}:ke;return je?(0,Q.e)((me,ce)=>{var he;null===(he=je.subscribe)||void 0===he||he.call(je);let Re=!0;me.subscribe((0,W.x)(ce,Ve=>{var lt;null===(lt=je.next)||void 0===lt||lt.call(je,Ve),ce.next(Ve)},()=>{var Ve;Re=!1,null===(Ve=je.complete)||void 0===Ve||Ve.call(je),ce.complete()},Ve=>{var lt;Re=!1,null===(lt=je.error)||void 0===lt||lt.call(je,Ve),ce.error(Ve)},()=>{var Ve,lt;Re&&(null===(Ve=je.unsubscribe)||void 0===Ve||Ve.call(je)),null===(lt=je.finalize)||void 0===lt||lt.call(je)}))}):xe.y}},8068:(yn,Et,V)=>{"use strict";V.d(Et,{T:()=>xe});var u=V(6805),Q=V(4482),W=V(5403);function xe(ke=Oe){return(0,Q.e)((ve,Ne)=>{let je=!1;ve.subscribe((0,W.x)(Ne,me=>{je=!0,Ne.next(me)},()=>je?Ne.complete():Ne.error(ke())))})}function Oe(){return new u.K}},4408:(yn,Et,V)=>{"use strict";V.d(Et,{o:()=>Oe});var u=V(727);class Q extends u.w0{constructor(ve,Ne){super()}schedule(ve,Ne=0){return this}}const W={setInterval(ke,ve,...Ne){const{delegate:je}=W;return null!=je&&je.setInterval?je.setInterval(ke,ve,...Ne):setInterval(ke,ve,...Ne)},clearInterval(ke){const{delegate:ve}=W;return((null==ve?void 0:ve.clearInterval)||clearInterval)(ke)},delegate:void 0};var xe=V(8737);class Oe extends Q{constructor(ve,Ne){super(ve,Ne),this.scheduler=ve,this.work=Ne,this.pending=!1}schedule(ve,Ne=0){var je;if(this.closed)return this;this.state=ve;const me=this.id,ce=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(ce,me,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(je=this.id)&&void 0!==je?je:this.requestAsyncId(ce,this.id,Ne),this}requestAsyncId(ve,Ne,je=0){return W.setInterval(ve.flush.bind(ve,this),je)}recycleAsyncId(ve,Ne,je=0){if(null!=je&&this.delay===je&&!1===this.pending)return Ne;null!=Ne&&W.clearInterval(Ne)}execute(ve,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const je=this._execute(ve,Ne);if(je)return je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ne){let me,je=!1;try{this.work(ve)}catch(ce){je=!0,me=ce||new Error("Scheduled action threw falsy error")}if(je)return this.unsubscribe(),me}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ne}=this,{actions:je}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,xe.P)(je,this),null!=ve&&(this.id=this.recycleAsyncId(Ne,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(yn,Et,V)=>{"use strict";V.d(Et,{v:()=>W});var u=V(6063);class Q{constructor(Oe,ke=Q.now){this.schedulerActionCtor=Oe,this.now=ke}schedule(Oe,ke=0,ve){return new this.schedulerActionCtor(this,Oe).schedule(ve,ke)}}Q.now=u.l.now;class W extends Q{constructor(Oe,ke=Q.now){super(Oe,ke),this.actions=[],this._active=!1}flush(Oe){const{actions:ke}=this;if(this._active)return void ke.push(Oe);let ve;this._active=!0;do{if(ve=Oe.execute(Oe.state,Oe.delay))break}while(Oe=ke.shift());if(this._active=!1,ve){for(;Oe=ke.shift();)Oe.unsubscribe();throw ve}}}},4986:(yn,Et,V)=>{"use strict";V.d(Et,{z:()=>W});var u=V(4408);const W=new(V(7565).v)(u.o)},6063:(yn,Et,V)=>{"use strict";V.d(Et,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(yn,Et,V)=>{"use strict";V.d(Et,{z:()=>u});const u={setTimeout(Q,W,...xe){const{delegate:Oe}=u;return null!=Oe&&Oe.setTimeout?Oe.setTimeout(Q,W,...xe):setTimeout(Q,W,...xe)},clearTimeout(Q){const{delegate:W}=u;return((null==W?void 0:W.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(yn,Et,V)=>{"use strict";V.d(Et,{h:()=>Q});const Q=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yn,Et,V)=>{"use strict";V.d(Et,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(yn,Et,V)=>{"use strict";V.d(Et,{K:()=>Q});const Q=(0,V(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(yn,Et,V)=>{"use strict";V.d(Et,{_6:()=>ke,jO:()=>xe,yG:()=>Oe});var u=V(576);function W(ve){return ve[ve.length-1]}function xe(ve){return(0,u.m)(W(ve))?ve.pop():void 0}function Oe(ve){return function Q(ve){return ve&&(0,u.m)(ve.schedule)}(W(ve))?ve.pop():void 0}function ke(ve,Ne){return"number"==typeof W(ve)?ve.pop():Ne}},4742:(yn,Et,V)=>{"use strict";V.d(Et,{D:()=>Oe});const{isArray:u}=Array,{getPrototypeOf:Q,prototype:W,keys:xe}=Object;function Oe(ve){if(1===ve.length){const Ne=ve[0];if(u(Ne))return{args:Ne,keys:null};if(function ke(ve){return ve&&"object"==typeof ve&&Q(ve)===W}(Ne)){const je=xe(Ne);return{args:je.map(me=>Ne[me]),keys:je}}}return{args:ve,keys:null}}},8737:(yn,Et,V)=>{"use strict";function u(Q,W){if(Q){const xe=Q.indexOf(W);0<=xe&&Q.splice(xe,1)}}V.d(Et,{P:()=>u})},3888:(yn,Et,V)=>{"use strict";function u(Q){const xe=Q(Oe=>{Error.call(Oe),Oe.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}V.d(Et,{d:()=>u})},1810:(yn,Et,V)=>{"use strict";function u(Q,W){return Q.reduce((xe,Oe,ke)=>(xe[Oe]=W[ke],xe),{})}V.d(Et,{n:()=>u})},2806:(yn,Et,V)=>{"use strict";V.d(Et,{O:()=>xe,x:()=>W});var u=V(2416);let Q=null;function W(Oe){if(u.v.useDeprecatedSynchronousErrorHandling){const ke=!Q;if(ke&&(Q={errorThrown:!1,error:null}),Oe(),ke){const{errorThrown:ve,error:Ne}=Q;if(Q=null,ve)throw Ne}}else Oe()}function xe(Oe){u.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=Oe)}},9672:(yn,Et,V)=>{"use strict";function u(Q,W,xe,Oe=0,ke=!1){const ve=W.schedule(function(){xe(),ke?Q.add(this.schedule(null,Oe)):this.unsubscribe()},Oe);if(Q.add(ve),!ke)return ve}V.d(Et,{f:()=>u})},4671:(yn,Et,V)=>{"use strict";function u(Q){return Q}V.d(Et,{y:()=>u})},1144:(yn,Et,V)=>{"use strict";V.d(Et,{z:()=>u});const u=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(yn,Et,V)=>{"use strict";V.d(Et,{D:()=>Q});var u=V(576);function Q(W){return Symbol.asyncIterator&&(0,u.m)(null==W?void 0:W[Symbol.asyncIterator])}},576:(yn,Et,V)=>{"use strict";function u(Q){return"function"==typeof Q}V.d(Et,{m:()=>u})},3670:(yn,Et,V)=>{"use strict";V.d(Et,{c:()=>W});var u=V(8822),Q=V(576);function W(xe){return(0,Q.m)(xe[u.L])}},6495:(yn,Et,V)=>{"use strict";V.d(Et,{T:()=>W});var u=V(2202),Q=V(576);function W(xe){return(0,Q.m)(null==xe?void 0:xe[u.h])}},8239:(yn,Et,V)=>{"use strict";V.d(Et,{t:()=>Q});var u=V(576);function Q(W){return(0,u.m)(null==W?void 0:W.then)}},3260:(yn,Et,V)=>{"use strict";V.d(Et,{L:()=>xe,Q:()=>W});var u=V(655),Q=V(576);function W(Oe){return(0,u.FC)(this,arguments,function*(){const ve=Oe.getReader();try{for(;;){const{value:Ne,done:je}=yield(0,u.qq)(ve.read());if(je)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Ne)}}finally{ve.releaseLock()}})}function xe(Oe){return(0,Q.m)(null==Oe?void 0:Oe.getReader)}},4482:(yn,Et,V)=>{"use strict";V.d(Et,{A:()=>Q,e:()=>W});var u=V(576);function Q(xe){return(0,u.m)(null==xe?void 0:xe.lift)}function W(xe){return Oe=>{if(Q(Oe))return Oe.lift(function(ke){try{return xe(ke,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(yn,Et,V)=>{"use strict";V.d(Et,{Z:()=>xe});var u=V(4004);const{isArray:Q}=Array;function xe(Oe){return(0,u.U)(ke=>function W(Oe,ke){return Q(ke)?Oe(...ke):Oe(ke)}(Oe,ke))}},5032:(yn,Et,V)=>{"use strict";function u(){}V.d(Et,{Z:()=>u})},9635:(yn,Et,V)=>{"use strict";V.d(Et,{U:()=>W,z:()=>Q});var u=V(4671);function Q(...xe){return W(xe)}function W(xe){return 0===xe.length?u.y:1===xe.length?xe[0]:function(ke){return xe.reduce((ve,Ne)=>Ne(ve),ke)}}},7849:(yn,Et,V)=>{"use strict";V.d(Et,{h:()=>W});var u=V(2416),Q=V(3410);function W(xe){Q.z.setTimeout(()=>{const{onUnhandledError:Oe}=u.v;if(!Oe)throw xe;Oe(xe)})}},4532:(yn,Et,V)=>{"use strict";function u(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Et,{z:()=>u})},863:(yn,Et,V)=>{var u={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7206,9230],"./ion-datetime_3.entry.js":[4959,7206,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function Q(W){if(!V.o(u,W))return Promise.resolve().then(()=>{var ke=new Error("Cannot find module '"+W+"'");throw ke.code="MODULE_NOT_FOUND",ke});var xe=u[W],Oe=xe[0];return Promise.all(xe.slice(1).map(V.e)).then(()=>V(Oe))}Q.keys=()=>Object.keys(u),Q.id=863,yn.exports=Q},655:(yn,Et,V)=>{"use strict";function xe(ze,_t){var ct={};for(var we in ze)Object.prototype.hasOwnProperty.call(ze,we)&&_t.indexOf(we)<0&&(ct[we]=ze[we]);if(null!=ze&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(we=Object.getOwnPropertySymbols(ze);Ae<we.length;Ae++)_t.indexOf(we[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ze,we[Ae])&&(ct[we[Ae]]=ze[we[Ae]])}return ct}function Oe(ze,_t,ct,we){var at,Ae=arguments.length,Ie=Ae<3?_t:null===we?we=Object.getOwnPropertyDescriptor(_t,ct):we;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ie=Reflect.decorate(ze,_t,ct,we);else for(var Ye=ze.length-1;Ye>=0;Ye--)(at=ze[Ye])&&(Ie=(Ae<3?at(Ie):Ae>3?at(_t,ct,Ie):at(_t,ct))||Ie);return Ae>3&&Ie&&Object.defineProperty(_t,ct,Ie),Ie}function he(ze,_t,ct,we){return new(ct||(ct=Promise))(function(Ie,at){function Ye(Bt){try{Ue(we.next(Bt))}catch(Wt){at(Wt)}}function Ke(Bt){try{Ue(we.throw(Bt))}catch(Wt){at(Wt)}}function Ue(Bt){Bt.done?Ie(Bt.value):function Ae(Ie){return Ie instanceof ct?Ie:new ct(function(at){at(Ie)})}(Bt.value).then(Ye,Ke)}Ue((we=we.apply(ze,_t||[])).next())})}function pt(ze){return this instanceof pt?(this.v=ze,this):new pt(ze)}function et(ze,_t,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,we=ct.apply(ze,_t||[]),Ie=[];return Ae={},at("next"),at("throw"),at("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function at(Yt){we[Yt]&&(Ae[Yt]=function(Ct){return new Promise(function(Gn,Kn){Ie.push([Yt,Ct,Gn,Kn])>1||Ye(Yt,Ct)})})}function Ye(Yt,Ct){try{!function Ke(Yt){Yt.value instanceof pt?Promise.resolve(Yt.value.v).then(Ue,Bt):Wt(Ie[0][2],Yt)}(we[Yt](Ct))}catch(Gn){Wt(Ie[0][3],Gn)}}function Ue(Yt){Ye("next",Yt)}function Bt(Yt){Ye("throw",Yt)}function Wt(Yt,Ct){Yt(Ct),Ie.shift(),Ie.length&&Ye(Ie[0][0],Ie[0][1])}}function z(ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,_t=ze[Symbol.asyncIterator];return _t?_t.call(ze):(ze=function At(ze){var _t="function"==typeof Symbol&&Symbol.iterator,ct=_t&&ze[_t],we=0;if(ct)return ct.call(ze);if(ze&&"number"==typeof ze.length)return{next:function(){return ze&&we>=ze.length&&(ze=void 0),{value:ze&&ze[we++],done:!ze}}};throw new TypeError(_t?"Object is not iterable.":"Symbol.iterator is not defined.")}(ze),ct={},we("next"),we("throw"),we("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function we(Ie){ct[Ie]=ze[Ie]&&function(at){return new Promise(function(Ye,Ke){!function Ae(Ie,at,Ye,Ke){Promise.resolve(Ke).then(function(Ue){Ie({value:Ue,done:Ye})},at)}(Ye,Ke,(at=ze[Ie](at)).done,at.value)})}}}V.d(Et,{FC:()=>et,KL:()=>z,_T:()=>xe,gn:()=>Oe,mG:()=>he,qq:()=>pt})},6895:(yn,Et,V)=>{"use strict";V.d(Et,{Do:()=>ue,EM:()=>Os,HT:()=>xe,JF:()=>Ys,K0:()=>ke,Mx:()=>gs,O5:()=>ft,Ov:()=>Gt,PM:()=>ms,S$:()=>At,V_:()=>je,Ye:()=>rt,b0:()=>ye,bD:()=>Sa,ez:()=>Qi,q:()=>W,sg:()=>te,tP:()=>zr,w_:()=>Oe});var u=V(4650);let Q=null;function W(){return Q}function xe(F){Q||(Q=F)}class Oe{}const ke=new u.OlP("DocumentToken");let ve=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=u.Yz7({token:F,factory:function(){return function Ne(){return(0,u.LFG)(me)}()},providedIn:"platform"}),F})();const je=new u.OlP("Location Initialized");let me=(()=>{class F extends ve{constructor(U){super(),this._doc=U,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(U){const ne=W().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",U,!1),()=>ne.removeEventListener("popstate",U)}onHashChange(U){const ne=W().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",U,!1),()=>ne.removeEventListener("hashchange",U)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(U){this._location.pathname=U}pushState(U,ne,be){ce()?this._history.pushState(U,ne,be):this._location.hash=be}replaceState(U,ne,be){ce()?this._history.replaceState(U,ne,be):this._location.hash=be}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return F.\u0275fac=function(U){return new(U||F)(u.LFG(ke))},F.\u0275prov=u.Yz7({token:F,factory:function(){return function he(){return new me((0,u.LFG)(ke))}()},providedIn:"platform"}),F})();function ce(){return!!window.history.pushState}function Re(F,K){if(0==F.length)return K;if(0==K.length)return F;let U=0;return F.endsWith("/")&&U++,K.startsWith("/")&&U++,2==U?F+K.substring(1):1==U?F+K:F+"/"+K}function Ve(F){const K=F.match(/#|\?|$/),U=K&&K.index||F.length;return F.slice(0,U-("/"===F[U-1]?1:0))+F.slice(U)}function lt(F){return F&&"?"!==F[0]?"?"+F:F}let At=(()=>{class F{historyGo(U){throw new Error("Not implemented")}}return F.\u0275fac=function(U){return new(U||F)},F.\u0275prov=u.Yz7({token:F,factory:function(){return(0,u.f3M)(ye)},providedIn:"root"}),F})();const De=new u.OlP("appBaseHref");let ye=(()=>{class F extends At{constructor(U,ne){var be,Lt,qt;super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=null!==(be=null!==(Lt=null!=ne?ne:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Lt?Lt:null===(qt=(0,u.f3M)(ke).location)||void 0===qt?void 0:qt.origin)&&void 0!==be?be:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Re(this._baseHref,U)}path(U=!1){const ne=this._platformLocation.pathname+lt(this._platformLocation.search),be=this._platformLocation.hash;return be&&U?`${ne}${be}`:ne}pushState(U,ne,be,Lt){const qt=this.prepareExternalUrl(be+lt(Lt));this._platformLocation.pushState(U,ne,qt)}replaceState(U,ne,be,Lt){const qt=this.prepareExternalUrl(be+lt(Lt));this._platformLocation.replaceState(U,ne,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){var ne,be;null===(ne=(be=this._platformLocation).historyGo)||void 0===ne||ne.call(be,U)}}return F.\u0275fac=function(U){return new(U||F)(u.LFG(ve),u.LFG(De,8))},F.\u0275prov=u.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),ue=(()=>{class F extends At{constructor(U,ne){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(U){const ne=Re(this._baseHref,U);return ne.length>0?"#"+ne:ne}pushState(U,ne,be,Lt){let qt=this.prepareExternalUrl(be+lt(Lt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(U,ne,qt)}replaceState(U,ne,be,Lt){let qt=this.prepareExternalUrl(be+lt(Lt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(U,ne,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){var ne,be;null===(ne=(be=this._platformLocation).historyGo)||void 0===ne||ne.call(be,U)}}return F.\u0275fac=function(U){return new(U||F)(u.LFG(ve),u.LFG(De,8))},F.\u0275prov=u.Yz7({token:F,factory:F.\u0275fac}),F})(),rt=(()=>{class F{constructor(U){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const ne=this._locationStrategy.getBaseHref();this._basePath=function z(F){if(new RegExp("^(https?:)?//").test(F)){const[,U]=F.split(/\/\/[^\/]+/);return U}return F}(Ve(He(ne))),this._locationStrategy.onPopState(be=>{this._subject.emit({url:this.path(!0),pop:!0,state:be.state,type:be.type})})}ngOnDestroy(){var U;null===(U=this._urlChangeSubscription)||void 0===U||U.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,ne=""){return this.path()==this.normalize(U+lt(ne))}normalize(U){return F.stripTrailingSlash(function et(F,K){if(!F||!K.startsWith(F))return K;const U=K.substring(F.length);return""===U||["/",";","?","#"].includes(U[0])?U:K}(this._basePath,He(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,ne="",be=null){this._locationStrategy.pushState(be,"",U,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+lt(ne)),be)}replaceState(U,ne="",be=null){this._locationStrategy.replaceState(be,"",U,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+lt(ne)),be)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){var ne,be;null===(ne=(be=this._locationStrategy).historyGo)||void 0===ne||ne.call(be,U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)})),()=>{const ne=this._urlChangeListeners.indexOf(U);var be;this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(null===(be=this._urlChangeSubscription)||void 0===be||be.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",ne){this._urlChangeListeners.forEach(be=>be(U,ne))}subscribe(U,ne,be){return this._subject.subscribe({next:U,error:ne,complete:be})}}return F.normalizeQueryParams=lt,F.joinWithSlash=Re,F.stripTrailingSlash=Ve,F.\u0275fac=function(U){return new(U||F)(u.LFG(At))},F.\u0275prov=u.Yz7({token:F,factory:function(){return function pt(){return new rt((0,u.LFG)(At))}()},providedIn:"root"}),F})();function He(F){return F.replace(/\/index.html$/,"")}function gs(F,K){K=encodeURIComponent(K);for(const U of F.split(";")){const ne=U.indexOf("="),[be,Lt]=-1==ne?[U,""]:[U.slice(0,ne),U.slice(ne+1)];if(be.trim()===K)return decodeURIComponent(Lt)}return null}class Zi{constructor(K,U,ne,be){this.$implicit=K,this.ngForOf=U,this.index=ne,this.count=be}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let te=(()=>{class F{set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}constructor(U,ne,be){this._viewContainer=U,this._template=ne,this._differs=be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const ne=this._viewContainer;U.forEachOperation((be,Lt,qt)=>{if(null==be.previousIndex)ne.createEmbeddedView(this._template,new Zi(be.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)ne.remove(null===Lt?void 0:Lt);else if(null!==Lt){const On=ne.get(Lt);ne.move(On,qt),pe(On,be)}});for(let be=0,Lt=ne.length;be<Lt;be++){const On=ne.get(be).context;On.index=be,On.count=Lt,On.ngForOf=this._ngForOf}U.forEachIdentityChange(be=>{pe(ne.get(be.currentIndex),be)})}static ngTemplateContextGuard(U,ne){return!0}}return F.\u0275fac=function(U){return new(U||F)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function pe(F,K){F.context.$implicit=K.item}let ft=(()=>{class F{constructor(U,ne){this._viewContainer=U,this._context=new Nt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){ae("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){ae("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,ne){return!0}}return F.\u0275fac=function(U){return new(U||F)(u.Y36(u.s_b),u.Y36(u.Rgc))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Nt{constructor(){this.$implicit=null,this.ngIf=null}}function ae(F,K){if(K&&!K.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,u.AaK)(K)}'.`)}let zr=(()=>{class F{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const ne=this._viewContainerRef;if(this._viewRef&&ne.remove(ne.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:be,ngTemplateOutletContext:Lt,ngTemplateOutletInjector:qt}=this;this._viewRef=ne.createEmbeddedView(be,Lt,qt?{injector:qt}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function(U){return new(U||F)(u.Y36(u.s_b))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),F})();class Ws{createSubscription(K,U){return K.subscribe({next:U,error:ne=>{throw ne}})}dispose(K){K.unsubscribe()}}class ht{createSubscription(K,U){return K.then(U,ne=>{throw ne})}dispose(K){}}const Xe=new ht,wt=new Ws;let Gt=(()=>{class F{constructor(U){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=U}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(U){return this._obj?U!==this._obj?(this._dispose(),this.transform(U)):this._latestValue:(U&&this._subscribe(U),this._latestValue)}_subscribe(U){this._obj=U,this._strategy=this._selectStrategy(U),this._subscription=this._strategy.createSubscription(U,ne=>this._updateLatestValue(U,ne))}_selectStrategy(U){if((0,u.QGY)(U))return Xe;if((0,u.F4k)(U))return wt;throw function ar(F,K){return new u.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(U,ne){U===this._obj&&(this._latestValue=ne,this._ref.markForCheck())}}return F.\u0275fac=function(U){return new(U||F)(u.Y36(u.sBO,16))},F.\u0275pipe=u.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})(),Qi=(()=>{class F{}return F.\u0275fac=function(U){return new(U||F)},F.\u0275mod=u.oAB({type:F}),F.\u0275inj=u.cJS({}),F})();const Sa="browser",$s="server";function ms(F){return F===$s}let Os=(()=>{class F{}return F.\u0275prov=(0,u.Yz7)({token:F,providedIn:"root",factory:()=>new uo((0,u.LFG)(ke),window)}),F})();class uo{constructor(K,U){this.document=K,this.window=U,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const U=function bs(F,K){const U=F.getElementById(K)||F.getElementsByName(K)[0];if(U)return U;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let be=ne.currentNode;for(;be;){const Lt=be.shadowRoot;if(Lt){const qt=Lt.getElementById(K)||Lt.querySelector(`[name="${K}"]`);if(qt)return qt}be=ne.nextNode()}}return null}(this.document,K);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=K)}}scrollToElement(K){const U=K.getBoundingClientRect(),ne=U.left+this.window.pageXOffset,be=U.top+this.window.pageYOffset,Lt=this.offset();this.window.scrollTo(ne-Lt[0],be-Lt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=la(this.window.history)||la(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch(K){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(K){return!1}}}function la(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class Ys{}},529:(yn,Et,V)=>{"use strict";V.d(Et,{JF:()=>ai,eN:()=>_t});var u=V(6895),Q=V(4650),W=V(9646),xe=V(9751),Oe=V(4351),ke=V(9300),ve=V(4004);class Ne{}class je{}class me{constructor(Be){this.normalizedNames=new Map,this.lazyUpdate=null,Be?this.lazyInit="string"==typeof Be?()=>{this.headers=new Map,Be.split("\n").forEach(Ge=>{const jt=Ge.indexOf(":");if(jt>0){const $t=Ge.slice(0,jt),ge=$t.toLowerCase(),fe=Ge.slice(jt+1).trim();this.maybeSetNormalizedName($t,ge),this.headers.has(ge)?this.headers.get(ge).push(fe):this.headers.set(ge,[fe])}})}:()=>{this.headers=new Map,Object.keys(Be).forEach(Ge=>{let jt=Be[Ge];const $t=Ge.toLowerCase();"string"==typeof jt&&(jt=[jt]),jt.length>0&&(this.headers.set($t,jt),this.maybeSetNormalizedName(Ge,$t))})}:this.headers=new Map}has(Be){return this.init(),this.headers.has(Be.toLowerCase())}get(Be){this.init();const Ge=this.headers.get(Be.toLowerCase());return Ge&&Ge.length>0?Ge[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Be){return this.init(),this.headers.get(Be.toLowerCase())||null}append(Be,Ge){return this.clone({name:Be,value:Ge,op:"a"})}set(Be,Ge){return this.clone({name:Be,value:Ge,op:"s"})}delete(Be,Ge){return this.clone({name:Be,value:Ge,op:"d"})}maybeSetNormalizedName(Be,Ge){this.normalizedNames.has(Ge)||this.normalizedNames.set(Ge,Be)}init(){this.lazyInit&&(this.lazyInit instanceof me?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Be=>this.applyUpdate(Be)),this.lazyUpdate=null))}copyFrom(Be){Be.init(),Array.from(Be.headers.keys()).forEach(Ge=>{this.headers.set(Ge,Be.headers.get(Ge)),this.normalizedNames.set(Ge,Be.normalizedNames.get(Ge))})}clone(Be){const Ge=new me;return Ge.lazyInit=this.lazyInit&&this.lazyInit instanceof me?this.lazyInit:this,Ge.lazyUpdate=(this.lazyUpdate||[]).concat([Be]),Ge}applyUpdate(Be){const Ge=Be.name.toLowerCase();switch(Be.op){case"a":case"s":let jt=Be.value;if("string"==typeof jt&&(jt=[jt]),0===jt.length)return;this.maybeSetNormalizedName(Be.name,Ge);const $t=("a"===Be.op?this.headers.get(Ge):void 0)||[];$t.push(...jt),this.headers.set(Ge,$t);break;case"d":const ge=Be.value;if(ge){let fe=this.headers.get(Ge);if(!fe)return;fe=fe.filter($e=>-1===ge.indexOf($e)),0===fe.length?(this.headers.delete(Ge),this.normalizedNames.delete(Ge)):this.headers.set(Ge,fe)}else this.headers.delete(Ge),this.normalizedNames.delete(Ge)}}forEach(Be){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ge=>Be(this.normalizedNames.get(Ge),this.headers.get(Ge)))}}class he{encodeKey(Be){return At(Be)}encodeValue(Be){return At(Be)}decodeKey(Be){return decodeURIComponent(Be)}decodeValue(Be){return decodeURIComponent(Be)}}const Ve=/%(\d[a-f0-9])/gi,lt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function At(kt){return encodeURIComponent(kt).replace(Ve,(Be,Ge)=>{var jt;return null!==(jt=lt[Ge])&&void 0!==jt?jt:Be})}function De(kt){return`${kt}`}class ye{constructor(Be={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Be.encoder||new he,Be.fromString){if(Be.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(kt,Be){const Ge=new Map;return kt.length>0&&kt.replace(/^\?/,"").split("&").forEach($t=>{const ge=$t.indexOf("="),[fe,$e]=-1==ge?[Be.decodeKey($t),""]:[Be.decodeKey($t.slice(0,ge)),Be.decodeValue($t.slice(ge+1))],It=Ge.get(fe)||[];It.push($e),Ge.set(fe,It)}),Ge}(Be.fromString,this.encoder)}else Be.fromObject?(this.map=new Map,Object.keys(Be.fromObject).forEach(Ge=>{const jt=Be.fromObject[Ge],$t=Array.isArray(jt)?jt.map(De):[De(jt)];this.map.set(Ge,$t)})):this.map=null}has(Be){return this.init(),this.map.has(Be)}get(Be){this.init();const Ge=this.map.get(Be);return Ge?Ge[0]:null}getAll(Be){return this.init(),this.map.get(Be)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Be,Ge){return this.clone({param:Be,value:Ge,op:"a"})}appendAll(Be){const Ge=[];return Object.keys(Be).forEach(jt=>{const $t=Be[jt];Array.isArray($t)?$t.forEach(ge=>{Ge.push({param:jt,value:ge,op:"a"})}):Ge.push({param:jt,value:$t,op:"a"})}),this.clone(Ge)}set(Be,Ge){return this.clone({param:Be,value:Ge,op:"s"})}delete(Be,Ge){return this.clone({param:Be,value:Ge,op:"d"})}toString(){return this.init(),this.keys().map(Be=>{const Ge=this.encoder.encodeKey(Be);return this.map.get(Be).map(jt=>Ge+"="+this.encoder.encodeValue(jt)).join("&")}).filter(Be=>""!==Be).join("&")}clone(Be){const Ge=new ye({encoder:this.encoder});return Ge.cloneFrom=this.cloneFrom||this,Ge.updates=(this.updates||[]).concat(Be),Ge}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Be=>this.map.set(Be,this.cloneFrom.map.get(Be))),this.updates.forEach(Be=>{switch(Be.op){case"a":case"s":const Ge=("a"===Be.op?this.map.get(Be.param):void 0)||[];Ge.push(De(Be.value)),this.map.set(Be.param,Ge);break;case"d":if(void 0===Be.value){this.map.delete(Be.param);break}{let jt=this.map.get(Be.param)||[];const $t=jt.indexOf(De(Be.value));-1!==$t&&jt.splice($t,1),jt.length>0?this.map.set(Be.param,jt):this.map.delete(Be.param)}}}),this.cloneFrom=this.updates=null)}}class rt{constructor(){this.map=new Map}set(Be,Ge){return this.map.set(Be,Ge),this}get(Be){return this.map.has(Be)||this.map.set(Be,Be.defaultValue()),this.map.get(Be)}delete(Be){return this.map.delete(Be),this}has(Be){return this.map.has(Be)}keys(){return this.map.keys()}}function et(kt){return typeof ArrayBuffer<"u"&&kt instanceof ArrayBuffer}function He(kt){return typeof Blob<"u"&&kt instanceof Blob}function z(kt){return typeof FormData<"u"&&kt instanceof FormData}class Te{constructor(Be,Ge,jt,$t){let ge;if(this.url=Ge,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Be.toUpperCase(),function pt(kt){switch(kt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||$t?(this.body=void 0!==jt?jt:null,ge=$t):ge=jt,ge&&(this.reportProgress=!!ge.reportProgress,this.withCredentials=!!ge.withCredentials,ge.responseType&&(this.responseType=ge.responseType),ge.headers&&(this.headers=ge.headers),ge.context&&(this.context=ge.context),ge.params&&(this.params=ge.params)),this.headers||(this.headers=new me),this.context||(this.context=new rt),this.params){const fe=this.params.toString();if(0===fe.length)this.urlWithParams=Ge;else{const $e=Ge.indexOf("?");this.urlWithParams=Ge+(-1===$e?"?":$e<Ge.length-1?"&":"")+fe}}else this.params=new ye,this.urlWithParams=Ge}serializeBody(){return null===this.body?null:et(this.body)||He(this.body)||z(this.body)||function Pe(kt){return typeof URLSearchParams<"u"&&kt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ye?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||z(this.body)?null:He(this.body)?this.body.type||null:et(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ye?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Be={}){var Ge;const jt=Be.method||this.method,$t=Be.url||this.url,ge=Be.responseType||this.responseType,fe=void 0!==Be.body?Be.body:this.body,$e=void 0!==Be.withCredentials?Be.withCredentials:this.withCredentials,It=void 0!==Be.reportProgress?Be.reportProgress:this.reportProgress;let dt=Be.headers||this.headers,un=Be.params||this.params;const Fe=null!==(Ge=Be.context)&&void 0!==Ge?Ge:this.context;return void 0!==Be.setHeaders&&(dt=Object.keys(Be.setHeaders).reduce((Me,de)=>Me.set(de,Be.setHeaders[de]),dt)),Be.setParams&&(un=Object.keys(Be.setParams).reduce((Me,de)=>Me.set(de,Be.setParams[de]),un)),new Te(jt,$t,fe,{params:un,headers:dt,context:Fe,reportProgress:It,responseType:ge,withCredentials:$e})}}var Se=(()=>((Se=Se||{})[Se.Sent=0]="Sent",Se[Se.UploadProgress=1]="UploadProgress",Se[Se.ResponseHeader=2]="ResponseHeader",Se[Se.DownloadProgress=3]="DownloadProgress",Se[Se.Response=4]="Response",Se[Se.User=5]="User",Se))();class it{constructor(Be,Ge=200,jt="OK"){this.headers=Be.headers||new me,this.status=void 0!==Be.status?Be.status:Ge,this.statusText=Be.statusText||jt,this.url=Be.url||null,this.ok=this.status>=200&&this.status<300}}class qe extends it{constructor(Be={}){super(Be),this.type=Se.ResponseHeader}clone(Be={}){return new qe({headers:Be.headers||this.headers,status:void 0!==Be.status?Be.status:this.status,statusText:Be.statusText||this.statusText,url:Be.url||this.url||void 0})}}class nt extends it{constructor(Be={}){super(Be),this.type=Se.Response,this.body=void 0!==Be.body?Be.body:null}clone(Be={}){return new nt({body:void 0!==Be.body?Be.body:this.body,headers:Be.headers||this.headers,status:void 0!==Be.status?Be.status:this.status,statusText:Be.statusText||this.statusText,url:Be.url||this.url||void 0})}}class tt extends it{constructor(Be){super(Be,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Be.url||"(unknown url)"}`:`Http failure response for ${Be.url||"(unknown url)"}: ${Be.status} ${Be.statusText}`,this.error=Be.error||null}}function ze(kt,Be){return{body:Be,headers:kt.headers,context:kt.context,observe:kt.observe,params:kt.params,reportProgress:kt.reportProgress,responseType:kt.responseType,withCredentials:kt.withCredentials}}let _t=(()=>{class kt{constructor(Ge){this.handler=Ge}request(Ge,jt,$t={}){let ge;if(Ge instanceof Te)ge=Ge;else{let It,dt;It=$t.headers instanceof me?$t.headers:new me($t.headers),$t.params&&(dt=$t.params instanceof ye?$t.params:new ye({fromObject:$t.params})),ge=new Te(Ge,jt,void 0!==$t.body?$t.body:null,{headers:It,context:$t.context,params:dt,reportProgress:$t.reportProgress,responseType:$t.responseType||"json",withCredentials:$t.withCredentials})}const fe=(0,W.of)(ge).pipe((0,Oe.b)(It=>this.handler.handle(It)));if(Ge instanceof Te||"events"===$t.observe)return fe;const $e=fe.pipe((0,ke.h)(It=>It instanceof nt));switch($t.observe||"body"){case"body":switch(ge.responseType){case"arraybuffer":return $e.pipe((0,ve.U)(It=>{if(null!==It.body&&!(It.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return It.body}));case"blob":return $e.pipe((0,ve.U)(It=>{if(null!==It.body&&!(It.body instanceof Blob))throw new Error("Response is not a Blob.");return It.body}));case"text":return $e.pipe((0,ve.U)(It=>{if(null!==It.body&&"string"!=typeof It.body)throw new Error("Response is not a string.");return It.body}));default:return $e.pipe((0,ve.U)(It=>It.body))}case"response":return $e;default:throw new Error(`Unreachable: unhandled observe type ${$t.observe}}`)}}delete(Ge,jt={}){return this.request("DELETE",Ge,jt)}get(Ge,jt={}){return this.request("GET",Ge,jt)}head(Ge,jt={}){return this.request("HEAD",Ge,jt)}jsonp(Ge,jt){return this.request("JSONP",Ge,{params:(new ye).append(jt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ge,jt={}){return this.request("OPTIONS",Ge,jt)}patch(Ge,jt,$t={}){return this.request("PATCH",Ge,ze($t,jt))}post(Ge,jt,$t={}){return this.request("POST",Ge,ze($t,jt))}put(Ge,jt,$t={}){return this.request("PUT",Ge,ze($t,jt))}}return kt.\u0275fac=function(Ge){return new(Ge||kt)(Q.LFG(Ne))},kt.\u0275prov=Q.Yz7({token:kt,factory:kt.\u0275fac}),kt})();function ct(kt,Be){return Be(kt)}function we(kt,Be){return(Ge,jt)=>Be.intercept(Ge,{handle:$t=>kt($t,jt)})}const Ie=new Q.OlP("HTTP_INTERCEPTORS"),at=new Q.OlP("HTTP_INTERCEPTOR_FNS");function Ye(){let kt=null;return(Be,Ge)=>{var jt;return null===kt&&(kt=(null!==(jt=(0,Q.f3M)(Ie,{optional:!0}))&&void 0!==jt?jt:[]).reduceRight(we,ct)),kt(Be,Ge)}}let Ke=(()=>{class kt extends Ne{constructor(Ge,jt){super(),this.backend=Ge,this.injector=jt,this.chain=null}handle(Ge){if(null===this.chain){const jt=Array.from(new Set(this.injector.get(at)));this.chain=jt.reduceRight(($t,ge)=>function Ae(kt,Be,Ge){return(jt,$t)=>Ge.runInContext(()=>Be(jt,ge=>kt(ge,$t)))}($t,ge,this.injector),ct)}return this.chain(Ge,jt=>this.backend.handle(jt))}}return kt.\u0275fac=function(Ge){return new(Ge||kt)(Q.LFG(je),Q.LFG(Q.lqb))},kt.\u0275prov=Q.Yz7({token:kt,factory:kt.\u0275fac}),kt})();const Pr=/^\)\]\}',?\n/;let Sn=(()=>{class kt{constructor(Ge){this.xhrFactory=Ge}handle(Ge){if("JSONP"===Ge.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xe.y(jt=>{const $t=this.xhrFactory.build();if($t.open(Ge.method,Ge.urlWithParams),Ge.withCredentials&&($t.withCredentials=!0),Ge.headers.forEach((de,ut)=>$t.setRequestHeader(de,ut.join(","))),Ge.headers.has("Accept")||$t.setRequestHeader("Accept","application/json, text/plain, */*"),!Ge.headers.has("Content-Type")){const de=Ge.detectContentTypeHeader();null!==de&&$t.setRequestHeader("Content-Type",de)}if(Ge.responseType){const de=Ge.responseType.toLowerCase();$t.responseType="json"!==de?de:"text"}const ge=Ge.serializeBody();let fe=null;const $e=()=>{if(null!==fe)return fe;const de=$t.statusText||"OK",ut=new me($t.getAllResponseHeaders()),Mt=function yr(kt){return"responseURL"in kt&&kt.responseURL?kt.responseURL:/^X-Request-URL:/m.test(kt.getAllResponseHeaders())?kt.getResponseHeader("X-Request-URL"):null}($t)||Ge.url;return fe=new qe({headers:ut,status:$t.status,statusText:de,url:Mt}),fe},It=()=>{let{headers:de,status:ut,statusText:Mt,url:Xt}=$e(),vn=null;204!==ut&&(vn=typeof $t.response>"u"?$t.responseText:$t.response),0===ut&&(ut=vn?200:0);let Nn=ut>=200&&ut<300;if("json"===Ge.responseType&&"string"==typeof vn){const rr=vn;vn=vn.replace(Pr,"");try{vn=""!==vn?JSON.parse(vn):null}catch(di){vn=rr,Nn&&(Nn=!1,vn={error:di,text:vn})}}Nn?(jt.next(new nt({body:vn,headers:de,status:ut,statusText:Mt,url:Xt||void 0})),jt.complete()):jt.error(new tt({error:vn,headers:de,status:ut,statusText:Mt,url:Xt||void 0}))},dt=de=>{const{url:ut}=$e(),Mt=new tt({error:de,status:$t.status||0,statusText:$t.statusText||"Unknown Error",url:ut||void 0});jt.error(Mt)};let un=!1;const Fe=de=>{un||(jt.next($e()),un=!0);let ut={type:Se.DownloadProgress,loaded:de.loaded};de.lengthComputable&&(ut.total=de.total),"text"===Ge.responseType&&$t.responseText&&(ut.partialText=$t.responseText),jt.next(ut)},Me=de=>{let ut={type:Se.UploadProgress,loaded:de.loaded};de.lengthComputable&&(ut.total=de.total),jt.next(ut)};return $t.addEventListener("load",It),$t.addEventListener("error",dt),$t.addEventListener("timeout",dt),$t.addEventListener("abort",dt),Ge.reportProgress&&($t.addEventListener("progress",Fe),null!==ge&&$t.upload&&$t.upload.addEventListener("progress",Me)),$t.send(ge),jt.next({type:Se.Sent}),()=>{$t.removeEventListener("error",dt),$t.removeEventListener("abort",dt),$t.removeEventListener("load",It),$t.removeEventListener("timeout",dt),Ge.reportProgress&&($t.removeEventListener("progress",Fe),null!==ge&&$t.upload&&$t.upload.removeEventListener("progress",Me)),$t.readyState!==$t.DONE&&$t.abort()}})}}return kt.\u0275fac=function(Ge){return new(Ge||kt)(Q.LFG(u.JF))},kt.\u0275prov=Q.Yz7({token:kt,factory:kt.\u0275fac}),kt})();const vr=new Q.OlP("XSRF_ENABLED"),ci=new Q.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Nr=new Q.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ai{}let dr=(()=>{class kt{constructor(Ge,jt,$t){this.doc=Ge,this.platform=jt,this.cookieName=$t,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ge=this.doc.cookie||"";return Ge!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,u.Mx)(Ge,this.cookieName),this.lastCookieString=Ge),this.lastToken}}return kt.\u0275fac=function(Ge){return new(Ge||kt)(Q.LFG(u.K0),Q.LFG(Q.Lbi),Q.LFG(ci))},kt.\u0275prov=Q.Yz7({token:kt,factory:kt.\u0275fac}),kt})();function Rn(kt,Be){const Ge=kt.url.toLowerCase();if(!(0,Q.f3M)(vr)||"GET"===kt.method||"HEAD"===kt.method||Ge.startsWith("http://")||Ge.startsWith("https://"))return Be(kt);const jt=(0,Q.f3M)(Ai).getToken(),$t=(0,Q.f3M)(Nr);return null!=jt&&!kt.headers.has($t)&&(kt=kt.clone({headers:kt.headers.set($t,jt)})),Be(kt)}var cn=(()=>((cn=cn||{})[cn.Interceptors=0]="Interceptors",cn[cn.LegacyInterceptors=1]="LegacyInterceptors",cn[cn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",cn[cn.NoXsrfProtection=3]="NoXsrfProtection",cn[cn.JsonpSupport=4]="JsonpSupport",cn[cn.RequestsMadeViaParent=5]="RequestsMadeViaParent",cn))();function Vn(kt,Be){return{\u0275kind:kt,\u0275providers:Be}}function Vr(...kt){const Be=[_t,Sn,Ke,{provide:Ne,useExisting:Ke},{provide:je,useExisting:Sn},{provide:at,useValue:Rn,multi:!0},{provide:vr,useValue:!0},{provide:Ai,useClass:dr}];for(const Ge of kt)Be.push(...Ge.\u0275providers);return(0,Q.MR2)(Be)}const _r=new Q.OlP("LEGACY_INTERCEPTOR_FN");let ai=(()=>{class kt{}return kt.\u0275fac=function(Ge){return new(Ge||kt)},kt.\u0275mod=Q.oAB({type:kt}),kt.\u0275inj=Q.cJS({providers:[Vr(Vn(cn.LegacyInterceptors,[{provide:_r,useFactory:Ye},{provide:at,useExisting:_r,multi:!0}]))]}),kt})()},4650:(yn,Et,V)=>{"use strict";V.d(Et,{$8M:()=>Ka,$WT:()=>jr,$Z:()=>jf,AFp:()=>UE,ALo:()=>c,AaK:()=>Ne,BQk:()=>Uu,CHM:()=>T,CRH:()=>vE,CZH:()=>p_,CqO:()=>ov,D6c:()=>Mw,DdM:()=>i_,EJc:()=>WI,EpF:()=>iv,F$t:()=>pm,F4k:()=>sv,FYo:()=>Mf,FiY:()=>_i,G48:()=>fw,Gf:()=>mE,GfV:()=>Vp,GkF:()=>Eg,Gpc:()=>ce,Hsn:()=>py,JOm:()=>Na,KtG:()=>q,LFG:()=>Tr,LSH:()=>Mu,Lbi:()=>HI,Lck:()=>Jv,MMx:()=>Wy,MR2:()=>kh,NdJ:()=>wg,OlP:()=>Dr,Oqu:()=>Dg,P3R:()=>pd,PXZ:()=>aw,Q6J:()=>mg,QGY:()=>Ig,Qsj:()=>Bh,R0b:()=>Yc,RDi:()=>Th,Rgc:()=>Ri,SBq:()=>Ja,Sil:()=>KI,Suo:()=>yE,TTD:()=>Os,TgZ:()=>bd,X6Q:()=>hw,XFs:()=>nn,Xpm:()=>rr,Xts:()=>Sf,Y36:()=>jc,YKP:()=>hl,YNc:()=>rv,Yjl:()=>Er,Yz7:()=>Wt,Z0I:()=>Kn,ZZ4:()=>Z0,_Bn:()=>vh,_UZ:()=>_g,_Vd:()=>Fc,_c5:()=>xw,_uU:()=>bv,aQg:()=>X0,c2e:()=>zI,cJS:()=>Ct,cg1:()=>Dm,dDg:()=>rw,dqk:()=>Rn,eFA:()=>JE,eJc:()=>k0,ekj:()=>Ay,eoX:()=>YE,f3M:()=>kt,g9A:()=>jE,h0i:()=>tl,hGG:()=>Rw,hij:()=>wm,iGM:()=>gE,ifc:()=>dt,ip1:()=>$E,jDz:()=>vf,kL8:()=>Tm,lG2:()=>lr,lcZ:()=>O,lqb:()=>Ou,lri:()=>qE,n5z:()=>kl,oAB:()=>Kt,oxw:()=>fm,q4F:()=>Dl,qLn:()=>Hs,qOj:()=>hg,qZA:()=>vg,rWj:()=>KE,sBO:()=>pw,s_b:()=>ja,soG:()=>g_,tb:()=>XE,tp0:()=>to,uIk:()=>gc,vHH:()=>De,vpe:()=>Tn,wAp:()=>Mr,xp6:()=>Lf,ynx:()=>up,z2F:()=>m_,zSh:()=>Np,zs3:()=>fc});var u=V(7579),Q=V(727),W=V(9751),xe=V(6451),Oe=V(3099);function ke(n){for(let i in n)if(n[i]===ke)return i;throw Error("Could not find renamed property on target object.")}function ve(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ne(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ne).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function je(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const me=ke({__forward_ref__:ke});function ce(n){return n.__forward_ref__=ce,n.toString=function(){return Ne(this())},n}function he(n){return Re(n)?n():n}function Re(n){return"function"==typeof n&&n.hasOwnProperty(me)&&n.__forward_ref__===ce}function Ve(n){return n&&!!n.\u0275providers}const At="https://g.co/ng/security#xss";class De extends Error{constructor(i,o){super(ye(i,o)),this.code=i}}function ye(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function ue(n){return"string"==typeof n?n:null==n?"":String(n)}function z(n,i){throw new De(-201,!1)}function at(n,i){null==n&&function Ye(n,i,o,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${o} ${h} ${i} <=Actual]`))}(i,n,null,"!=")}function Wt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gn(n){return er(n,Pr)||er(n,Sn)}function Kn(n){return null!==Gn(n)}function er(n,i){return n.hasOwnProperty(i)?n[i]:null}function hr(n){return n&&(n.hasOwnProperty(yr)||n.hasOwnProperty(vr))?n[yr]:null}const Pr=ke({\u0275prov:ke}),yr=ke({\u0275inj:ke}),Sn=ke({ngInjectableDef:ke}),vr=ke({ngInjectorDef:ke});var nn=(()=>((nn=nn||{})[nn.Default=0]="Default",nn[nn.Host=1]="Host",nn[nn.Self=2]="Self",nn[nn.SkipSelf=4]="SkipSelf",nn[nn.Optional=8]="Optional",nn))();let ci;function Nr(n){const i=ci;return ci=n,i}function Ai(n,i,o){const h=Gn(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:o&nn.Optional?null:void 0!==i?i:void z(Ne(n))}const Rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vr={},Jt="__NG_DI_FLAG__",_r="ngTempTokenPath",ei="ngTokenPath",ii=/\n/gm,Fr="\u0275",Di="__source";let or;function Yn(n){const i=or;return or=n,i}function ai(n,i=nn.Default){if(void 0===or)throw new De(-203,!1);return null===or?Ai(n,void 0,i):or.get(n,i&nn.Optional?null:void 0,i)}function Tr(n,i=nn.Default){return(function oi(){return ci}()||ai)(he(n),i)}function kt(n,i=nn.Default){return Tr(n,Be(i))}function Be(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ge(n){const i=[];for(let o=0;o<n.length;o++){const h=he(n[o]);if(Array.isArray(h)){if(0===h.length)throw new De(900,!1);let p,E=nn.Default;for(let S=0;S<h.length;S++){const k=h[S],L=$t(k);"number"==typeof L?-1===L?p=k.token:E|=L:p=k}i.push(Tr(p,E))}else i.push(Tr(h))}return i}function jt(n,i){return n[Jt]=i,n.prototype[Jt]=i,n}function $t(n){return n[Jt]}function $e(n){return{toString:n}.toString()}var It=(()=>((It=It||{})[It.OnPush=0]="OnPush",It[It.Default=1]="Default",It))(),dt=(()=>{return(n=dt||(dt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",dt;var n})();const un={},Fe=[],Me=ke({\u0275cmp:ke}),de=ke({\u0275dir:ke}),ut=ke({\u0275pipe:ke}),Mt=ke({\u0275mod:ke}),Xt=ke({\u0275fac:ke}),vn=ke({__NG_ELEMENT_ID__:ke});let Nn=0;function rr(n){return $e(()=>{const i=Ni(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||dt.Emulated,id:"c"+Nn++,styles:n.styles||Fe,_:null,schemas:n.schemas||null,tView:null};gs(o);const h=n.dependencies;return o.directiveDefs=ss(h,!1),o.pipeDefs=ss(h,!0),o})}function Rt(n){return $n(n)||pr(n)}function bt(n){return null!==n}function Kt(n){return $e(()=>({type:n.type,bootstrap:n.bootstrap||Fe,declarations:n.declarations||Fe,imports:n.imports||Fe,exports:n.exports||Fe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jn(n,i){if(null==n)return un;const o={};for(const h in n)if(n.hasOwnProperty(h)){let p=n[h],E=p;Array.isArray(p)&&(E=p[1],p=p[0]),o[p]=h,i&&(i[p]=E)}return o}function lr(n){return $e(()=>{const i=Ni(n);return gs(i),i})}function Er(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function $n(n){return n[Me]||null}function pr(n){return n[de]||null}function mr(n){return n[ut]||null}function jr(n){const i=$n(n)||pr(n)||mr(n);return null!==i&&i.standalone}function Xr(n,i){const o=n[Mt]||null;if(!o&&!0===i)throw new Error(`Type ${Ne(n)} does not have '\u0275mod' property.`);return o}function Ni(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Fe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jn(n.inputs,i),outputs:jn(n.outputs)}}function gs(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function ss(n,i){if(!n)return null;const o=i?mr:Rt;return()=>("function"==typeof n?n():n).map(h=>o(h)).filter(bt)}const Wr=0,pn=1,nr=2,li=3,Ir=4,Zi=5,te=6,pe=7,Ze=8,ft=9,Nt=10,ae=11,Je=12,vt=13,Ft=14,Vt=15,sn=16,Pn=17,bn=18,xr=19,zr=20,xi=21,ar=22,ht=1,Xe=2,wt=7,Gt=8,an=9,Fn=10;function Xn(n){return Array.isArray(n)&&"object"==typeof n[ht]}function Rr(n){return Array.isArray(n)&&!0===n[ht]}function Bs(n){return 0!=(4&n.flags)}function qs(n){return n.componentOffset>-1}function Fi(n){return 1==(1&n.flags)}function Xi(n){return!!n.template}function os(n){return 0!=(256&n[nr])}function ns(n,i){return n.hasOwnProperty(Xt)?n[Xt]:null}class lo{constructor(i,o,h){this.previousValue=i,this.currentValue=o,this.firstChange=h}isFirstChange(){return this.firstChange}}function Os(){return uo}function uo(n){return n.type.prototype.ngOnChanges&&(n.setInput=bs),la}function la(){const n=Ys(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===un)n.previous=i;else for(let h in i)o[h]=i[h];n.current=null,this.ngOnChanges(i)}}function bs(n,i,o,h){const p=this.declaredInputs[o],E=Ys(n)||function Aa(n,i){return n[No]=i}(n,{previous:un,current:null}),S=E.current||(E.current={}),k=E.previous,L=k[p];S[p]=new lo(L&&L.currentValue,i,k===un),n[h]=i}Os.ngInherit=!0;const No="__ngSimpleChanges__";function Ys(n){return n[No]||null}const yi=function(n,i,o){};function Ei(n){for(;Array.isArray(n);)n=n[Wr];return n}function Xs(n,i){return Ei(i[n])}function Mi(n,i){return Ei(i[n.index])}function ys(n,i){return n.data[i]}function $i(n,i){const o=i[n];return Xn(o)?o:o[Wr]}function vs(n){return 64==(64&n[nr])}function ls(n,i){return null==i?null:n[i]}function ua(n){n[bn]=0}function Lo(n,i){n[Zi]+=i;let o=n,h=n[li];for(;null!==h&&(1===i&&1===o[Zi]||-1===i&&0===o[Zi]);)h[Zi]+=i,o=h,h=h[li]}const ur={lFrame:Qo(null),bindingsEnabled:!0};function ji(){return ur.bindingsEnabled}function I(){return ur.lFrame.lView}function f(){return ur.lFrame.tView}function T(n){return ur.lFrame.contextLView=n,n[Ze]}function q(n){return ur.lFrame.contextLView=null,n}function Le(){let n=tn();for(;null!==n&&64===n.type;)n=n.parent;return n}function tn(){return ur.lFrame.currentTNode}function qn(n,i){const o=ur.lFrame;o.currentTNode=n,o.isParent=i}function Sr(){return ur.lFrame.isParent}function hi(){ur.lFrame.isParent=!1}function Ii(){const n=ur.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Do(){return ur.lFrame.bindingIndex++}function pu(n,i){const o=ur.lFrame;o.bindingIndex=o.bindingRootIndex=n,po(i)}function po(n){ur.lFrame.currentDirectiveIndex=n}function xa(){return ur.lFrame.currentQueryIndex}function go(n){ur.lFrame.currentQueryIndex=n}function pl(n){const i=n[pn];return 2===i.type?i.declTNode:1===i.type?n[te]:null}function gl(n,i,o){if(o&nn.SkipSelf){let p=i,E=n;for(;!(p=p.parent,null!==p||o&nn.Host||(p=pl(E),null===p||(E=E[Vt],10&p.type))););if(null===p)return!1;i=p,n=E}const h=ur.lFrame=da();return h.currentTNode=i,h.lView=n,!0}function Bo(n){const i=da(),o=n[pn];ur.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function da(){const n=ur.lFrame,i=null===n?null:n.child;return null===i?Qo(n):i}function Qo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function ha(){const n=ur.lFrame;return ur.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Hi=ha;function $o(){const n=ha();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qr(){return ur.lFrame.selectedIndex}function rs(n){ur.lFrame.selectedIndex=n}function wi(){const n=ur.lFrame;return ys(n.tView,n.selectedIndex)}function ml(n,i){for(let o=i.directiveStart,h=i.directiveEnd;o<h;o++){const E=n.data[o].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:k,ngAfterViewInit:L,ngAfterViewChecked:Y,ngOnDestroy:se}=E;S&&(n.contentHooks||(n.contentHooks=[])).push(-o,S),k&&((n.contentHooks||(n.contentHooks=[])).push(o,k),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,k)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),Y&&((n.viewHooks||(n.viewHooks=[])).push(o,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Y)),null!=se&&(n.destroyHooks||(n.destroyHooks=[])).push(o,se)}}function rl(n,i,o){U(n,i,3,o)}function F(n,i,o,h){(3&n[nr])===o&&U(n,i,o,h)}function K(n,i){let o=n[nr];(3&o)===i&&(o&=2047,o+=1,n[nr]=o)}function U(n,i,o,h){const E=null!=h?h:-1,S=i.length-1;let k=0;for(let L=void 0!==h?65535&n[bn]:0;L<S;L++)if("number"==typeof i[L+1]){if(k=i[L],null!=h&&k>=h)break}else i[L]<0&&(n[bn]+=65536),(k<E||-1==E)&&(ne(n,o,i,L),n[bn]=(4294901760&n[bn])+L+2),L++}function ne(n,i,o,h){const p=o[h]<0,E=o[h+1],k=n[p?-o[h]:o[h]];if(p){if(n[nr]>>11<n[bn]>>16&&(3&n[nr])===i){n[nr]+=2048,yi(4,k,E);try{E.call(k)}finally{yi(5,k,E)}}}else{yi(4,k,E);try{E.call(k)}finally{yi(5,k,E)}}}const be=-1;class Lt{constructor(i,o,h){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=h}}function Ti(n,i,o){let h=0;for(;h<o.length;){const p=o[h];if("number"==typeof p){if(0!==p)break;h++;const E=o[h++],S=o[h++],k=o[h++];n.setAttribute(i,S,k,E)}else{const E=p,S=o[++h];bi(E)?n.setProperty(i,E,S):n.setAttribute(i,E,S),h++}}return h}function To(n){return 3===n||4===n||6===n}function bi(n){return 64===n.charCodeAt(0)}function Vs(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let h=0;h<i.length;h++){const p=i[h];"number"==typeof p?o=p:0===o||Si(n,o,p,null,-1===o||2===o?i[++h]:null)}}return n}function Si(n,i,o,h,p){let E=0,S=n.length;if(-1===i)S=-1;else for(;E<n.length;){const k=n[E++];if("number"==typeof k){if(k===i){S=-1;break}if(k>i){S=E-1;break}}}for(;E<n.length;){const k=n[E];if("number"==typeof k)break;if(k===o){if(null===h)return void(null!==p&&(n[E+1]=p));if(h===n[E+1])return void(n[E+2]=p)}E++,null!==h&&E++,null!==p&&E++}-1!==S&&(n.splice(S,0,i),E=S+1),n.splice(E++,0,o),null!==h&&n.splice(E++,0,h),null!==p&&n.splice(E++,0,p)}function fa(n){return n!==be}function Js(n){return 32767&n}function Wa(n,i){let o=function Ra(n){return n>>16}(n),h=i;for(;o>0;)h=h[Vt],o--;return h}let xl=!0;function il(n){const i=xl;return xl=n,i}const ql=255,Wi=5;let Rl=0;const qi={};function Ml(n,i){const o=Ki(n,i);if(-1!==o)return o;const h=i[pn];h.firstCreatePass&&(n.injectorIndex=i.length,on(h.data,n),on(i,null),on(h.blueprint,null));const p=pi(n,i),E=n.injectorIndex;if(fa(p)){const S=Js(p),k=Wa(p,i),L=k[pn].data;for(let Y=0;Y<8;Y++)i[E+Y]=k[S+Y]|L[S+Y]}return i[E+8]=p,E}function on(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ki(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function pi(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,h=null,p=i;for(;null!==p;){if(h=Ji(p),null===h)return be;if(o++,p=p[Vt],-1!==h.injectorIndex)return h.injectorIndex|o<<16}return be}function Pl(n,i,o){!function Kl(n,i,o){let h;"string"==typeof o?h=o.charCodeAt(0)||0:o.hasOwnProperty(vn)&&(h=o[vn]),null==h&&(h=o[vn]=Rl++);const p=h&ql;i.data[n+(p>>Wi)]|=1<<p}(n,i,o)}function Jn(n,i,o){if(o&nn.Optional||void 0!==n)return n;z()}function mu(n,i,o,h){if(o&nn.Optional&&void 0===h&&(h=null),!(o&(nn.Self|nn.Host))){const p=n[ft],E=Nr(void 0);try{return p?p.get(i,h,o&nn.Optional):Ai(i,h,o&nn.Optional)}finally{Nr(E)}}return Jn(h,0,o)}function Mn(n,i,o,h=nn.Default,p){if(null!==n){if(1024&i[nr]){const S=function zu(n,i,o,h,p){let E=n,S=i;for(;null!==E&&null!==S&&1024&S[nr]&&!(256&S[nr]);){const k=Ut(E,S,o,h|nn.Self,qi);if(k!==qi)return k;let L=E.parent;if(!L){const Y=S[xi];if(Y){const se=Y.get(o,qi,h);if(se!==qi)return se}L=Ji(S),S=S[Vt]}E=L}return p}(n,i,o,h,qi);if(S!==qi)return S}const E=Ut(n,i,o,h,qi);if(E!==qi)return E}return mu(i,o,h,p)}function Ut(n,i,o,h,p){const E=function _c(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(vn)?n[vn]:void 0;return"number"==typeof i?i>=0?i&ql:Hu:i}(o);if("function"==typeof E){if(!gl(i,n,h))return h&nn.Host?Jn(p,0,h):mu(i,o,h,p);try{const S=E(h);if(null!=S||h&nn.Optional)return S;z()}finally{Hi()}}else if("number"==typeof E){let S=null,k=Ki(n,i),L=be,Y=h&nn.Host?i[sn][te]:null;for((-1===k||h&nn.SkipSelf)&&(L=-1===k?pi(n,i):i[k+8],L!==be&&Ol(h,!1)?(S=i[pn],k=Js(L),i=Wa(L,i)):k=-1);-1!==k;){const se=i[pn];if(sl(E,k,se.data)){const Ce=Zt(k,i,o,S,h,Y);if(Ce!==qi)return Ce}L=i[k+8],L!==be&&Ol(h,i[pn].data[k+8]===Y)&&sl(E,k,i)?(S=se,k=Js(L),i=Wa(L,i)):k=-1}}return p}function Zt(n,i,o,h,p,E){const S=i[pn],k=S.data[n+8],se=is(k,S,o,null==h?qs(k)&&xl:h!=S&&0!=(3&k.type),p&nn.Host&&E===k);return null!==se?So(i,S,se,k):qi}function is(n,i,o,h,p){const E=n.providerIndexes,S=i.data,k=1048575&E,L=n.directiveStart,se=E>>20,gt=p?k+se:n.directiveEnd;for(let Ot=h?k:k+se;Ot<gt;Ot++){const rn=S[Ot];if(Ot<L&&o===rn||Ot>=L&&rn.type===o)return Ot}if(p){const Ot=S[L];if(Ot&&Xi(Ot)&&Ot.type===o)return L}return null}function So(n,i,o,h){let p=n[o];const E=i.data;if(function qt(n){return n instanceof Lt}(p)){const S=p;S.resolving&&function pt(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new De(-200,`Circular dependency in DI detected for ${n}${o}`)}(function rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ue(n)}(E[o]));const k=il(S.canSeeViewProviders);S.resolving=!0;const L=S.injectImpl?Nr(S.injectImpl):null;gl(n,h,nn.Default);try{p=n[o]=S.factory(void 0,E,n,h),i.firstCreatePass&&o>=h.directiveStart&&function fi(n,i,o){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:E}=i.type.prototype;if(h){const S=uo(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,S),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,S)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),E&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,E),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,E))}(o,E[o],i)}finally{null!==L&&Nr(L),il(k),S.resolving=!1,Hi()}}return p}function sl(n,i,o){return!!(o[i+(n>>Wi)]&1<<n)}function Ol(n,i){return!(n&nn.Self||n&nn.Host&&i)}class qa{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,h){return Mn(this._tNode,this._lView,i,Be(h),o)}}function Hu(){return new qa(Le(),I())}function kl(n){return $e(()=>{const i=n.prototype.constructor,o=i[Xt]||yl(i),h=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==h;){const E=p[Xt]||yl(p);if(E&&E!==o)return E;p=Object.getPrototypeOf(p)}return E=>new E})}function yl(n){return Re(n)?()=>{const i=yl(he(n));return i&&i()}:ns(n)}function Ji(n){const i=n[pn],o=i.type;return 2===o?i.declTNode:1===o?n[te]:null}function Ka(n){return function Un(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const h=o.length;let p=0;for(;p<h;){const E=o[p];if(To(E))break;if(0===E)p+=2;else if("number"==typeof E)for(p++;p<h&&"string"==typeof o[p];)p++;else{if(E===i)return o[p+1];p+=2}}}return null}(Le(),n)}const ea="__parameters__";function ga(n,i,o){return $e(()=>{const h=function Zn(n){return function(...o){if(n){const h=n(...o);for(const p in h)this[p]=h[p]}}}(i);function p(...E){if(this instanceof p)return h.apply(this,E),this;const S=new p(...E);return k.annotation=S,k;function k(L,Y,se){const Ce=L.hasOwnProperty(ea)?L[ea]:Object.defineProperty(L,ea,{value:[]})[ea];for(;Ce.length<=se;)Ce.push(null);return(Ce[se]=Ce[se]||[]).push(S),L}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Dr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Oa(n,i){n.forEach(o=>Array.isArray(o)?Oa(o,i):i(o))}function mt(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Qr(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function fr(n,i){const o=[];for(let h=0;h<n;h++)o.push(i);return o}function hs(n,i,o){let h=R(n,i);return h>=0?n[1|h]=o:(h=~h,function Vo(n,i,o,h){let p=n.length;if(p==i)n.push(o,h);else if(1===p)n.push(h,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>i;)n[p]=n[p-2],p--;n[i]=o,n[i+1]=h}}(n,h,i,o)),h}function A(n,i){const o=R(n,i);if(o>=0)return n[1|o]}function R(n,i){return function P(n,i,o){let h=0,p=n.length>>o;for(;p!==h;){const E=h+(p-h>>1),S=n[E<<o];if(i===S)return E<<o;S>i?p=E:h=E+1}return~(p<<o)}(n,i,1)}const _i=jt(ga("Optional"),8),to=jt(ga("SkipSelf"),4);var Na=(()=>((Na=Na||{})[Na.Important=1]="Important",Na[Na.DashCase=2]="DashCase",Na))();const ra=new Map;let ed=0;const Pd="__ngContext__";function io(n,i){Xn(i)?(n[Pd]=i[zr],function bc(n){ra.set(n[zr],n)}(i)):n[Pd]=i}let Nd;function Qu(n,i){return Nd(n,i)}function Fd(n){const i=n[li];return Rr(i)?i[li]:i}function Ci(n){return Ju(n[vt])}function _l(n){return Ju(n[Ir])}function Ju(n){for(;null!==n&&!Rr(n);)n=n[Ir];return n}function El(n,i,o,h,p){if(null!=h){let E,S=!1;Rr(h)?E=h:Xn(h)&&(S=!0,h=h[Wr]);const k=Ei(h);0===n&&null!==o?null==p?id(i,o,k):ia(i,o,k,p||null,!0):1===n&&null!==o?ia(i,o,k,p||null,!0):2===n?function od(n,i,o){const h=$l(n,i);h&&function wl(n,i,o,h){n.removeChild(i,o,h)}(n,h,i,o)}(i,k,S):3===n&&i.destroyNode(k),null!=E&&function nu(n,i,o,h,p){const E=o[wt];E!==Ei(o)&&El(i,n,h,E,p);for(let k=Fn;k<o.length;k++){const L=o[k];Du(L[pn],L,n,i,h,E)}}(i,n,E,o,p)}}function Il(n,i,o){return n.createElement(i,o)}function Ql(n,i){const o=n[an],h=o.indexOf(i),p=i[li];512&i[nr]&&(i[nr]&=-513,Lo(p,-1)),o.splice(h,1)}function Ud(n,i){if(n.length<=Fn)return;const o=Fn+i,h=n[o];if(h){const p=h[Pn];null!==p&&p!==n&&Ql(p,h),i>0&&(n[o-1][Ir]=h[Ir]);const E=Qr(n,Fn+i);!function Ch(n,i){Du(n,i,i[ae],2,null,null),i[Wr]=null,i[te]=null}(h[pn],h);const S=E[xr];null!==S&&S.detachView(E[pn]),h[li]=null,h[Ir]=null,h[nr]&=-65}return h}function nc(n,i){if(!(128&i[nr])){const o=i[ae];o.destroyNode&&Du(n,i,o,3,null,null),function tc(n){let i=n[vt];if(!i)return Jl(n[pn],n);for(;i;){let o=null;if(Xn(i))o=i[vt];else{const h=i[Fn];h&&(o=h)}if(!o){for(;i&&!i[Ir]&&i!==n;)Xn(i)&&Jl(i[pn],i),i=i[li];null===i&&(i=n),Xn(i)&&Jl(i[pn],i),o=i&&i[Ir]}i=o}}(i)}}function Jl(n,i){if(!(128&i[nr])){i[nr]&=-65,i[nr]|=128,function eu(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let h=0;h<o.length;h+=2){const p=i[o[h]];if(!(p instanceof Lt)){const E=o[h+1];if(Array.isArray(E))for(let S=0;S<E.length;S+=2){const k=p[E[S]],L=E[S+1];yi(4,k,L);try{L.call(k)}finally{yi(5,k,L)}}else{yi(4,p,E);try{E.call(p)}finally{yi(5,p,E)}}}}}(n,i),function rd(n,i){const o=n.cleanup,h=i[pe];let p=-1;if(null!==o)for(let E=0;E<o.length-1;E+=2)if("string"==typeof o[E]){const S=o[E+3];S>=0?h[p=S]():h[p=-S].unsubscribe(),E+=2}else{const S=h[p=o[E+1]];o[E].call(S)}if(null!==h){for(let E=p+1;E<h.length;E++)(0,h[E])();i[pe]=null}}(n,i),1===i[pn].type&&i[ae].destroy();const o=i[Pn];if(null!==o&&Rr(i[li])){o!==i[li]&&Ql(o,i);const h=i[xr];null!==h&&h.detachView(n)}!function _u(n){ra.delete(n[zr])}(i)}}function Vi(n,i,o){return function Ea(n,i,o){let h=i;for(;null!==h&&40&h.type;)h=(i=h).parent;if(null===h)return o[Wr];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:E}=n.data[h.directiveStart+p];if(E===dt.None||E===dt.Emulated)return null}return Mi(h,o)}}(n,i.parent,o)}function ia(n,i,o,h,p){n.insertBefore(i,o,h,p)}function id(n,i,o){n.appendChild(i,o)}function Vd(n,i,o,h,p){null!==h?ia(n,i,o,h,p):id(n,i,o)}function $l(n,i){return n.parentNode(i)}function bu(n,i,o){return sd(n,i,o)}let Fa,ad,Sc,sd=function Vl(n,i,o){return 40&n.type?Mi(n,o):null};function Tc(n,i,o,h){const p=Vi(n,h,i),E=i[ae],k=bu(h.parent||i[te],h,i);if(null!=p)if(Array.isArray(o))for(let L=0;L<o.length;L++)Vd(E,p,o[L],k,!1);else Vd(E,p,o,k,!1);void 0!==Fa&&Fa(E,h,i,o,p)}function ic(n,i){if(null!==i){const o=i.type;if(3&o)return Mi(i,n);if(4&o)return jd(-1,n[i.index]);if(8&o){const h=i.child;if(null!==h)return ic(n,h);{const p=n[i.index];return Rr(p)?jd(-1,p):Ei(p)}}if(32&o)return Qu(i,n)()||Ei(n[i.index]);{const h=tu(n,i);return null!==h?Array.isArray(h)?h[0]:ic(Fd(n[sn]),h):ic(n,i.next)}}return null}function tu(n,i){return null!==i?n[sn][te].projection[i.projection]:null}function jd(n,i){const o=Fn+n+1;if(o<i.length){const h=i[o],p=h[pn].firstChild;if(null!==p)return ic(h,p)}return i[wt]}function sc(n,i,o,h,p,E,S){for(;null!=o;){const k=h[o.index],L=o.type;if(S&&0===i&&(k&&io(Ei(k),h),o.flags|=2),32!=(32&o.flags))if(8&L)sc(n,i,o.child,h,p,E,!1),El(i,n,p,k,E);else if(32&L){const Y=Qu(o,h);let se;for(;se=Y();)El(i,n,p,se,E);El(i,n,p,k,E)}else 16&L?wf(n,i,h,o,p,E):El(i,n,p,k,E);o=S?o.projectionNext:o.next}}function Du(n,i,o,h,p,E){sc(o,h,n.firstChild,i,p,E,!1)}function wf(n,i,o,h,p,E){const S=o[sn],L=S[te].projection[h.projection];if(Array.isArray(L))for(let Y=0;Y<L.length;Y++)El(i,n,p,L[Y],E);else sc(n,i,L,S[li],p,E,!0)}function Dh(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function oc(n,i,o){const{mergedAttrs:h,classes:p,styles:E}=o;null!==h&&Ti(n,i,h),null!==p&&Dh(n,i,p),null!==E&&function Mo(n,i,o){n.setAttribute(i,"style",o)}(n,i,E)}function Th(n){ad=n}function bf(n){var i;return(null===(i=function Po(){if(void 0===Sc&&(Sc=null,Rn.trustedTypes))try{Sc=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sc}())||void 0===i?void 0:i.createScriptURL(n))||n}class ud{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${At})`}}function Ia(n){return n instanceof ud?n.changingThisBreaksApplicationSecurity:n}function Ru(n,i){const o=function Df(n){return n instanceof ud&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${At})`)}return o===i}const Ah=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Rs=(()=>((Rs=Rs||{})[Rs.NONE=0]="NONE",Rs[Rs.HTML=1]="HTML",Rs[Rs.STYLE=2]="STYLE",Rs[Rs.SCRIPT=3]="SCRIPT",Rs[Rs.URL=4]="URL",Rs[Rs.RESOURCE_URL=5]="RESOURCE_URL",Rs))();function Mu(n){const i=Pu();return i?i.sanitize(Rs.URL,n)||"":Ru(n,"URL")?Ia(n):function Gd(n){return(n=String(n)).match(Ah)?n:"unsafe:"+n}(ue(n))}function Rc(n){const i=Pu();if(i)return bf(i.sanitize(Rs.RESOURCE_URL,n)||"");if(Ru(n,"ResourceURL"))return bf(Ia(n));throw new De(904,!1)}function pd(n,i,o){return function Ph(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Rc:Mu}(i,o)(n)}function Pu(){const n=I();return n&&n[Je]}const Sf=new Dr("ENVIRONMENT_INITIALIZER"),Mp=new Dr("INJECTOR",-1),Oh=new Dr("INJECTOR_DEF_TYPES");class ou{get(i,o=Vr){if(o===Vr){const h=new Error(`NullInjectorError: No provider for ${Ne(i)}!`);throw h.name="NullInjectorError",h}return o}}function kh(n){return{\u0275providers:n}}function Pp(...n){return{\u0275providers:Ns(0,n),\u0275fromNgModule:!0}}function Ns(n,...i){const o=[],h=new Set;let p;return Oa(i,E=>{const S=E;Af(S,o,[],h)&&(p||(p=[]),p.push(S))}),void 0!==p&&Yd(p,o),o}function Yd(n,i){for(let o=0;o<n.length;o++){const{providers:p}=n[o];Hl(p,E=>{i.push(E)})}}function Af(n,i,o,h){if(!(n=he(n)))return!1;let p=null,E=hr(n);const S=!E&&$n(n);if(E||S){if(S&&!S.standalone)return!1;p=n}else{const L=n.ngModule;if(E=hr(L),!E)return!1;p=L}const k=h.has(p);if(S){if(k)return!1;if(h.add(p),S.dependencies){const L="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const Y of L)Af(Y,i,o,h)}}else{if(!E)return!1;{if(null!=E.imports&&!k){let Y;h.add(p);try{Oa(E.imports,se=>{Af(se,i,o,h)&&(Y||(Y=[]),Y.push(se))})}finally{}void 0!==Y&&Yd(Y,i)}if(!k){const Y=ns(p)||(()=>new p);i.push({provide:p,useFactory:Y,deps:Fe},{provide:Oh,useValue:p,multi:!0},{provide:Sf,useValue:()=>Tr(p),multi:!0})}const L=E.providers;null==L||k||Hl(L,se=>{i.push(se)})}}return p!==n&&void 0!==n.providers}function Hl(n,i){for(let o of n)Ve(o)&&(o=o.\u0275providers),Array.isArray(o)?Hl(o,i):i(o)}const Op=ke({provide:String,useValue:ke});function xf(n){return null!==n&&"object"==typeof n&&Op in n}function kc(n){return"function"==typeof n}const Np=new Dr("Set Injector scope."),Rf={},Zd={};let gd;function Xd(){return void 0===gd&&(gd=new ou),gd}class Ou{}class md extends Ou{get destroyed(){return this._destroyed}constructor(i,o,h,p){super(),this.parent=o,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qd(i,S=>this.processProvider(S)),this.records.set(Mp,lc(void 0,this)),p.has("environment")&&this.records.set(Ou,lc(void 0,this));const E=this.records.get(Np);null!=E&&"string"==typeof E.value&&this.scopes.add(E.value),this.injectorDefTypes=new Set(this.get(Oh.multi,Fe,nn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Yn(this),h=Nr(void 0);try{return i()}finally{Yn(o),Nr(h)}}get(i,o=Vr,h=nn.Default){this.assertNotDestroyed(),h=Be(h);const p=Yn(this),E=Nr(void 0);try{if(!(h&nn.SkipSelf)){let k=this.records.get(i);if(void 0===k){const L=function Nu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Dr}(i)&&Gn(i);k=L&&this.injectableDefInScope(L)?lc(ku(i),Rf):null,this.records.set(i,k)}if(null!=k)return this.hydrate(i,k)}return(h&nn.Self?Xd():this.parent).get(i,o=h&nn.Optional&&o===Vr?null:o)}catch(S){if("NullInjectorError"===S.name){if((S[_r]=S[_r]||[]).unshift(Ne(i)),p)throw S;return function ge(n,i,o,h){const p=n[_r];throw i[Di]&&p.unshift(i[Di]),n.message=function fe(n,i,o,h=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Fr?n.slice(2):n;let p=Ne(i);if(Array.isArray(i))p=i.map(Ne).join(" -> ");else if("object"==typeof i){let E=[];for(let S in i)if(i.hasOwnProperty(S)){let k=i[S];E.push(S+":"+("string"==typeof k?JSON.stringify(k):Ne(k)))}p=`{${E.join(", ")}}`}return`${o}${h?"("+h+")":""}[${p}]: ${n.replace(ii,"\n  ")}`}("\n"+n.message,p,o,h),n[ei]=p,n[_r]=null,n}(S,i,"R3InjectorError",this.source)}throw S}finally{Nr(E),Yn(p)}}resolveInjectorInitializers(){const i=Yn(this),o=Nr(void 0);try{const h=this.get(Sf.multi,Fe,nn.Self);for(const p of h)p()}finally{Yn(i),Nr(o)}}toString(){const i=[],o=this.records;for(const h of o.keys())i.push(Ne(h));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(i){let o=kc(i=he(i))?i:he(i&&i.provide);const h=function Lp(n){return xf(n)?lc(void 0,n.useValue):lc(Ng(n),Rf)}(i);if(kc(i)||!0!==i.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=lc(void 0,Rf,!0),p.factory=()=>Ge(p.multi),this.records.set(o,p)),o=i,p.multi.push(i)}this.records.set(o,h)}hydrate(i,o){return o.value===Rf&&(o.value=Zd,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Nc(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=he(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function ku(n){const i=Gn(n),o=null!==i?i.factory:ns(n);if(null!==o)return o;if(n instanceof Dr)throw new De(204,!1);if(n instanceof Function)return function Fp(n){const i=n.length;if(i>0)throw fr(i,"?"),new De(204,!1);const o=function kn(n){const i=n&&(n[Pr]||n[Sn]);return i?(function dn(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new De(204,!1)}function Ng(n,i,o){let h;if(kc(n)){const p=he(n);return ns(p)||ku(p)}if(xf(n))h=()=>he(n.useValue);else if(function Nh(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...Ge(n.deps||[]));else if(function Oc(n){return!(!n||!n.useExisting)}(n))h=()=>Tr(he(n.useExisting));else{const p=he(n&&(n.useClass||n.provide));if(!function Fg(n){return!!n.deps}(n))return ns(p)||ku(p);h=()=>new p(...Ge(n.deps))}return h}function lc(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Qd(n,i){for(const o of n)Array.isArray(o)?Qd(o,i):o&&Ve(o)?Qd(o.\u0275providers,i):i(o)}class zm{}class Bp{}class Up{resolveComponentFactory(i){throw function uc(n){const i=Error(`No component factory found for ${Ne(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Fc=(()=>{class n{}return n.NULL=new Up,n})();function au(){return _o(Le(),I())}function _o(n,i){return new Ja(Mi(n,i))}let Ja=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=au,n})();function Lh(n){return n instanceof Ja?n.nativeElement:n}class Mf{}let Bh=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function yd(){const n=I(),o=$i(Le().index,n);return(Xn(o)?o:n)[ae]}(),n})(),Jd=(()=>{class n{}return n.\u0275prov=Wt({token:n,providedIn:"root",factory:()=>null}),n})();class Vp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Dl=new Vp("15.2.4"),$h={},Pf="ngOriginalError";function Lc(n){return n[Pf]}class Hs{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Lc(i);for(;o&&Lc(o);)o=Lc(o);return o||null}}function lu(n){return n instanceof Function?n():n}function kf(n,i,o){let h=n.length;for(;;){const p=n.indexOf(i,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const E=i.length;if(p+E===h||n.charCodeAt(p+E)<=32)return p}o=p+1}}const Nf="ng-template";function Hg(n,i,o){let h=0,p=!0;for(;h<n.length;){let E=n[h++];if("string"==typeof E&&p){const S=n[h++];if(o&&"class"===E&&-1!==kf(S.toLowerCase(),i,0))return!0}else{if(1===E){for(;h<n.length&&"string"==typeof(E=n[h++]);)if(E.toLowerCase()===i)return!0;return!1}"number"==typeof E&&(p=!1)}}return!1}function eh(n){return 4===n.type&&n.value!==Nf}function qm(n,i,o){return i===(4!==n.type||o?n.value:Nf)}function Hp(n,i,o){let h=4;const p=n.attrs||[],E=function cc(n){for(let i=0;i<n.length;i++)if(To(n[i]))return i;return n.length}(p);let S=!1;for(let k=0;k<i.length;k++){const L=i[k];if("number"!=typeof L){if(!S)if(4&h){if(h=2|1&h,""!==L&&!qm(n,L,o)||""===L&&1===i.length){if(cl(h))return!1;S=!0}}else{const Y=8&h?L:i[++k];if(8&h&&null!==n.attrs){if(!Hg(n.attrs,Y,o)){if(cl(h))return!1;S=!0}continue}const Ce=zp(8&h?"class":L,p,eh(n),o);if(-1===Ce){if(cl(h))return!1;S=!0;continue}if(""!==Y){let gt;gt=Ce>E?"":p[Ce+1].toLowerCase();const Ot=8&h?gt:null;if(Ot&&-1!==kf(Ot,Y,0)||2&h&&Y!==gt){if(cl(h))return!1;S=!0}}}}else{if(!S&&!cl(h)&&!cl(L))return!1;if(S&&cl(L))continue;S=!1,h=L|1&h}}return cl(h)||S}function cl(n){return 0==(1&n)}function zp(n,i,o,h){if(null===i)return-1;let p=0;if(h||!o){let E=!1;for(;p<i.length;){const S=i[p];if(S===n)return p;if(3===S||6===S)E=!0;else{if(1===S||2===S){let k=i[++p];for(;"string"==typeof k;)k=i[++p];continue}if(4===S)break;if(0===S){p+=4;continue}}p+=E?1:2}return-1}return function zl(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const h=n[o];if("number"==typeof h)return-1;if(h===i)return o;o++}return-1}(i,n)}function Ff(n,i,o=!1){for(let h=0;h<i.length;h++)if(Hp(n,i[h],o))return!0;return!1}function zg(n,i){e:for(let o=0;o<i.length;o++){const h=i[o];if(n.length===h.length){for(let p=0;p<n.length;p++)if(n[p]!==h[p])continue e;return!0}}return!1}function Hh(n,i){return n?":not("+i.trim()+")":i}function zo(n){let i=n[0],o=1,h=2,p="",E=!1;for(;o<n.length;){let S=n[o];if("string"==typeof S)if(2&h){const k=n[++o];p+="["+S+(k.length>0?'="'+k+'"':"")+"]"}else 8&h?p+="."+S:4&h&&(p+=" "+S);else""!==p&&!cl(S)&&(i+=Hh(E,p),p=""),h=S,E=E||!cl(h);o++}return""!==p&&(i+=Hh(E,p)),i}const Zr={};function Lf(n){Fu(f(),I(),qr()+n,!1)}function Fu(n,i,o,h){if(!h)if(3==(3&i[nr])){const E=n.preOrderCheckHooks;null!==E&&rl(i,E,o)}else{const E=n.preOrderHooks;null!==E&&F(i,E,0,o)}rs(o)}function Wp(n,i=null,o=null,h){const p=qp(n,i,o,h);return p.resolveInjectorInitializers(),p}function qp(n,i=null,o=null,h,p=new Set){const E=[o||Fe,Pp(n)];return h=h||("object"==typeof n?void 0:Ne(n)),new md(E,i||Xd(),h||null,p)}let fc=(()=>{class n{static create(o,h){if(Array.isArray(o))return Wp({name:""},h,o,"");{var p;const E=null!==(p=o.name)&&void 0!==p?p:"";return Wp({name:E},o.parent,o.providers,E)}}}return n.THROW_IF_NOT_FOUND=Vr,n.NULL=new ou,n.\u0275prov=Wt({token:n,providedIn:"any",factory:()=>Tr(Mp)}),n.__NG_ELEMENT_ID__=-1,n})();function jc(n,i=nn.Default){const o=I();return null===o?Tr(n,i):Mn(Le(),o,he(n),i)}function jf(){throw new Error("invalid")}function Zg(n,i){const o=n.contentQueries;if(null!==o)for(let h=0;h<o.length;h+=2){const E=o[h+1];if(-1!==E){const S=n.data[E];go(o[h]),S.contentQueries(2,i[E],E)}}}function sh(n,i,o,h,p,E,S,k,L,Y,se){const Ce=i.blueprint.slice();return Ce[Wr]=p,Ce[nr]=76|h,(null!==se||n&&1024&n[nr])&&(Ce[nr]|=1024),ua(Ce),Ce[li]=Ce[Vt]=n,Ce[Ze]=o,Ce[Nt]=S||n&&n[Nt],Ce[ae]=k||n&&n[ae],Ce[Je]=L||n&&n[Je]||null,Ce[ft]=Y||n&&n[ft]||null,Ce[te]=E,Ce[zr]=function Ll(){return ed++}(),Ce[xi]=se,Ce[sn]=2==i.type?n[sn]:Ce,Ce}function oh(n,i,o,h,p){let E=n.data[i];if(null===E)E=function Hf(n,i,o,h,p){const E=tn(),S=Sr(),L=n.data[i]=function Qm(n,i,o,h,p,E){return{type:o,index:h,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?E:E&&E.parent,o,i,h,p);return null===n.firstChild&&(n.firstChild=L),null!==E&&(S?null==E.child&&null!==L.parent&&(E.child=L):null===E.next&&(E.next=L,L.prev=E)),L}(n,i,o,h,p),function za(){return ur.lFrame.inI18n}()&&(E.flags|=32);else if(64&E.type){E.type=o,E.value=h,E.attrs=p;const S=function gn(){const n=ur.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();E.injectorIndex=null===S?-1:S.injectorIndex}return qn(E,!0),E}function Yh(n,i,o,h){if(0===o)return-1;const p=i.length;for(let E=0;E<o;E++)i.push(h),n.blueprint.push(h),n.data.push(null);return p}function zf(n,i,o){Bo(i);try{const h=n.viewQuery;null!==h&&ef(1,h,o);const p=n.template;null!==p&&wd(n,i,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Zg(n,i),n.staticViewQueries&&ef(2,n.viewQuery,o);const E=n.components;null!==E&&function Qg(n,i){for(let o=0;o<i.length;o++)Jh(n,i[o])}(i,E)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{i[nr]&=-5,$o()}}function Gf(n,i,o,h){const p=i[nr];if(128!=(128&p)){Bo(i);try{ua(i),function bo(n){return ur.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&wd(n,i,o,2,h);const S=3==(3&p);if(S){const Y=n.preOrderCheckHooks;null!==Y&&rl(i,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&F(i,Y,0,null),K(i,0)}if(function og(n){for(let i=Ci(n);null!==i;i=_l(i)){if(!i[Xe])continue;const o=i[an];for(let h=0;h<o.length;h++){const p=o[h];512&p[nr]||Lo(p[li],1),p[nr]|=512}}}(i),function sm(n){for(let i=Ci(n);null!==i;i=_l(i))for(let o=Fn;o<i.length;o++){const h=i[o],p=h[pn];vs(h)&&Gf(p,h,p.template,h[Ze])}}(i),null!==n.contentQueries&&Zg(n,i),S){const Y=n.contentCheckHooks;null!==Y&&rl(i,Y)}else{const Y=n.contentHooks;null!==Y&&F(i,Y,1),K(i,1)}!function eg(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let h=0;h<o.length;h++){const p=o[h];if(p<0)rs(~p);else{const E=p,S=o[++h],k=o[++h];pu(S,E),k(2,i[E])}}}finally{rs(-1)}}(n,i);const k=n.components;null!==k&&function Xg(n,i){for(let o=0;o<i.length;o++)ry(n,i[o])}(i,k);const L=n.viewQuery;if(null!==L&&ef(2,L,h),S){const Y=n.viewCheckHooks;null!==Y&&rl(i,Y)}else{const Y=n.viewHooks;null!==Y&&F(i,Y,2),K(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[nr]&=-41,512&i[nr]&&(i[nr]&=-513,Lo(i[li],-1))}finally{$o()}}}function wd(n,i,o,h,p){const E=qr(),S=2&h;try{rs(-1),S&&i.length>ar&&Fu(n,i,ar,!1),yi(S?2:0,p),o(h,p)}finally{rs(E),yi(S?3:1,p)}}function Hc(n,i,o){if(Bs(i)){const p=i.directiveEnd;for(let E=i.directiveStart;E<p;E++){const S=n.data[E];S.contentQueries&&S.contentQueries(1,o[E],E)}}}function Zh(n,i,o){ji()&&(function ng(n,i,o,h){const p=o.directiveStart,E=o.directiveEnd;qs(o)&&function Qh(n,i,o){const h=Mi(i,n),p=tg(o),E=n[Nt],S=Ms(n,sh(n,p,null,o.onPush?32:16,h,i,E,E.createRenderer(h,o),null,null,null));n[i.index]=S}(i,o,n.data[p+o.componentOffset]),n.firstCreatePass||Ml(o,i),io(h,i);const S=o.initialInputs;for(let k=p;k<E;k++){const L=n.data[k],Y=So(i,n,k,o);io(Y,i),null!==S&&ty(0,k-p,Y,L,0,S),Xi(L)&&($i(o.index,i)[Ze]=So(i,n,k,o))}}(n,i,o,Mi(o,i)),64==(64&o.flags)&&Xh(n,i,o))}function ah(n,i,o=Mi){const h=i.localNames;if(null!==h){let p=i.index+1;for(let E=0;E<h.length;E+=2){const S=h[E+1],k=-1===S?o(i,n):n[S];n[p++]=k}}}function tg(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Wf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Wf(n,i,o,h,p,E,S,k,L,Y){const se=ar+h,Ce=se+p,gt=function Jg(n,i){const o=[];for(let h=0;h<i;h++)o.push(h<n?null:Zr);return o}(se,Ce),Ot="function"==typeof Y?Y():Y;return gt[pn]={type:n,blueprint:gt,template:o,queries:null,viewQuery:k,declTNode:i,data:gt.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:L,consts:Ot,incompleteFirstPass:!1}}function dl(n,i,o,h){const p=Jf(i);null===o?p.push(h):(p.push(o),n.firstCreatePass&&ep(n).push(h,p.length-1))}function lh(n,i,o,h){for(let p in n)if(n.hasOwnProperty(p)){o=null===o?{}:o;const E=n[p];null===h?qf(o,i,p,E):h.hasOwnProperty(p)&&qf(o,i,h[p],E)}return o}function qf(n,i,o,h){n.hasOwnProperty(o)?n[o].push(i,h):n[o]=[i,h]}function uh(n,i){const o=$i(i,n);16&o[nr]||(o[nr]|=32)}function ch(n,i,o,h){if(ji()){const p=null===h?null:{"":-1},E=function Jm(n,i){const o=n.directiveRegistry;let h=null,p=null;if(o)for(let S=0;S<o.length;S++){const k=o[S];if(Ff(i,k.selectors,!1))if(h||(h=[]),Xi(k))if(null!==k.findHostDirectiveDefs){const L=[];p=p||new Map,k.findHostDirectiveDefs(k,L,p),h.unshift(...L,k),ig(n,i,L.length)}else h.unshift(k),ig(n,i,0);else{var E;p=p||new Map,null===(E=k.findHostDirectiveDefs)||void 0===E||E.call(k,k,h,p),h.push(k)}}return null===h?null:[h,p]}(n,o);let S,k;null===E?S=k=null:[S,k]=E,null!==S&&Zf(n,i,o,S,p,k),p&&function $a(n,i,o){if(i){const h=n.localNames=[];for(let p=0;p<i.length;p+=2){const E=o[i[p+1]];if(null==E)throw new De(-301,!1);h.push(i[p],E)}}}(o,h,p)}o.mergedAttrs=Vs(o.mergedAttrs,o.attrs)}function Zf(n,i,o,h,p,E){for(let Y=0;Y<h.length;Y++)Pl(Ml(o,i),n,h[Y].type);!function rm(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,h.length);for(let Y=0;Y<h.length;Y++){const se=h[Y];se.providersResolver&&se.providersResolver(se)}let S=!1,k=!1,L=Yh(n,i,h.length,null);for(let Y=0;Y<h.length;Y++){const se=h[Y];o.mergedAttrs=Vs(o.mergedAttrs,se.hostAttrs),Xf(n,o,i,L,se),ey(L,se,p),null!==se.contentQueries&&(o.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=64);const Ce=se.type.prototype;!S&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),S=!0),!k&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),k=!0),L++}!function em(n,i,o){const p=i.directiveEnd,E=n.data,S=i.attrs,k=[];let L=null,Y=null;for(let se=i.directiveStart;se<p;se++){const Ce=E[se],gt=o?o.get(Ce):null,rn=gt?gt.outputs:null;L=lh(Ce.inputs,se,L,gt?gt.inputs:null),Y=lh(Ce.outputs,se,Y,rn);const Dn=null===L||null===S||eh(i)?null:ny(L,se,S);k.push(Dn)}null!==L&&(L.hasOwnProperty("class")&&(i.flags|=8),L.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=k,i.inputs=L,i.outputs=Y}(n,o,E)}function Xh(n,i,o){const h=o.directiveStart,p=o.directiveEnd,E=o.index,S=function gu(){return ur.lFrame.currentDirectiveIndex}();try{rs(E);for(let k=h;k<p;k++){const L=n.data[k],Y=i[k];po(k),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&rg(L,Y)}}finally{rs(-1),po(S)}}function rg(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ig(n,i,o){i.componentOffset=o,(n.components||(n.components=[])).push(i.index)}function ey(n,i,o){if(o){if(i.exportAs)for(let h=0;h<i.exportAs.length;h++)o[i.exportAs[h]]=n;Xi(i)&&(o[""]=n)}}function Xf(n,i,o,h,p){n.data[h]=p;const E=p.factory||(p.factory=ns(p.type)),S=new Lt(E,Xi(p),jc);n.blueprint[h]=S,o[h]=S,function nm(n,i,o,h,p){const E=p.hostBindings;if(E){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const k=~i.index;(function Qy(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(S)!=k&&S.push(k),S.push(o,h,E)}}(n,i,h,Yh(n,o,p.hostVars,Zr),p)}function uu(n,i,o,h,p,E){const S=Mi(n,i);!function sg(n,i,o,h,p,E,S){if(null==E)n.removeAttribute(i,p,o);else{const k=null==S?ue(E):S(E,h||"",p);n.setAttribute(i,p,k,o)}}(i[ae],S,E,n.value,o,h,p)}function ty(n,i,o,h,p,E){const S=E[i];if(null!==S){const k=h.setInput;for(let L=0;L<S.length;){const Y=S[L++],se=S[L++],Ce=S[L++];null!==k?h.setInput(o,Ce,Y,se):o[se]=Ce}}}function ny(n,i,o){let h=null,p=0;for(;p<o.length;){const E=o[p];if(0!==E)if(5!==E){if("number"==typeof E)break;if(n.hasOwnProperty(E)){null===h&&(h=[]);const S=n[E];for(let k=0;k<S.length;k+=2)if(S[k]===i){h.push(E,S[k+1],o[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function im(n,i,o,h){return[n,!0,!1,i,null,0,h,o,null,null]}function ry(n,i){const o=$i(i,n);if(vs(o)){const h=o[pn];48&o[nr]?Gf(h,o,h.template,o[Ze]):o[Zi]>0&&ag(o)}}function ag(n){for(let h=Ci(n);null!==h;h=_l(h))for(let p=Fn;p<h.length;p++){const E=h[p];if(vs(E))if(512&E[nr]){const S=E[pn];Gf(S,E,S.template,E[Ze])}else E[Zi]>0&&ag(E)}const o=n[pn].components;if(null!==o)for(let h=0;h<o.length;h++){const p=$i(o[h],n);vs(p)&&p[Zi]>0&&ag(p)}}function Jh(n,i){const o=$i(i,n),h=o[pn];(function Bu(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(h,o),zf(h,o,o[Ze])}function Ms(n,i){return n[vt]?n[Ft][Ir]=i:n[vt]=i,n[Ft]=i,i}function Da(n){for(;n;){n[nr]|=32;const i=Fd(n);if(os(n)&&!i)return n;n=i}return null}function cu(n,i,o,h=!0){const p=i[Nt];p.begin&&p.begin();try{Gf(n,i,n.template,o)}catch(S){throw h&&tp(i,S),S}finally{p.end&&p.end()}}function ef(n,i,o){go(0),i(n,o)}function Jf(n){return n[pe]||(n[pe]=[])}function ep(n){return n.cleanup||(n.cleanup=[])}function tp(n,i){const o=n[ft],h=o?o.get(Hs,null):null;h&&h.handleError(i)}function np(n,i,o,h,p){for(let E=0;E<o.length;){const S=o[E++],k=o[E++],L=i[S],Y=n.data[S];null!==Y.setInput?Y.setInput(L,p,h,k):L[k]=p}}function tf(n,i,o){let h=o?n.styles:null,p=o?n.classes:null,E=0;if(null!==i)for(let S=0;S<i.length;S++){const k=i[S];"number"==typeof k?E=k:1==E?p=je(p,k):2==E&&(h=je(h,k+": "+i[++S]+";"))}o?n.styles=h:n.stylesWithoutHost=h,o?n.classes=p:n.classesWithoutHost=p}function $u(n,i,o,h,p=!1){for(;null!==o;){const E=i[o.index];if(null!==E&&h.push(Ei(E)),Rr(E))for(let k=Fn;k<E.length;k++){const L=E[k],Y=L[pn].firstChild;null!==Y&&$u(L[pn],L,Y,h)}const S=o.type;if(8&S)$u(n,i,o.child,h);else if(32&S){const k=Qu(o,i);let L;for(;L=k();)h.push(L)}else if(16&S){const k=tu(i,o);if(Array.isArray(k))h.push(...k);else{const L=Fd(i[sn]);$u(L[pn],L,k,h,!0)}}o=p?o.projectionNext:o.next}return h}class nf{get rootNodes(){const i=this._lView,o=i[pn];return $u(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ze]}set context(i){this._lView[Ze]=i}get destroyed(){return 128==(128&this._lView[nr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[li];if(Rr(i)){const o=i[Gt],h=o?o.indexOf(this):-1;h>-1&&(Ud(i,h),Qr(o,h))}this._attachedToViewContainer=!1}nc(this._lView[pn],this._lView)}onDestroy(i){dl(this._lView[pn],this._lView,null,i)}markForCheck(){Da(this._cdRefInjectingView||this._lView)}detach(){this._lView[nr]&=-65}reattach(){this._lView[nr]|=64}detectChanges(){cu(this._lView[pn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bd(n,i){Du(n,i,i[ae],2,null,null)}(this._lView[pn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=i}}class rp extends nf{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;cu(i[pn],i,i[Ze],!1)}checkNoChanges(){}get context(){return null}}class rf extends Fc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=$n(i);return new zc(o,this.ngModule)}}function ip(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Cd{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,h){h=Be(h);const p=this.injector.get(i,$h,h);return p!==$h||o===$h?p:this.parentInjector.get(i,o,h)}}class zc extends Bp{get inputs(){return ip(this.componentDef.inputs)}get outputs(){return ip(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Gg(n){return n.map(zo).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,h,p){var E;let S=(p=p||this.ngModule)instanceof Ou?p:null===(E=p)||void 0===E?void 0:E.injector;S&&null!==this.componentDef.getStandaloneInjector&&(S=this.componentDef.getStandaloneInjector(S)||S);const k=S?new Cd(i,S):i,L=k.get(Mf,null);if(null===L)throw new De(407,!1);const Y=k.get(Jd,null),se=L.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",gt=h?function Xm(n,i,o){return n.selectRootElement(i,o===dt.ShadowDom)}(se,h,this.componentDef.encapsulation):Il(se,Ce,function lg(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Ce)),Ot=this.componentDef.onPush?288:272,rn=Wf(0,null,null,1,0,null,null,null,null,null),Dn=sh(null,rn,null,Ot,null,null,L,se,Y,k,null);let Qn,Cr;Bo(Dn);try{const Hr=this.componentDef;let fn,si=null;Hr.findHostDirectiveDefs?(fn=[],si=new Map,Hr.findHostDirectiveDefs(Hr,fn,si),fn.push(Hr)):fn=[Hr];const Gs=function om(n,i){const o=n[pn],h=ar;return n[h]=i,oh(o,h,2,"#host",null)}(Dn,gt),qo=function ug(n,i,o,h,p,E,S,k){const L=p[pn];!function oy(n,i,o,h){for(const p of n)i.mergedAttrs=Vs(i.mergedAttrs,p.hostAttrs);null!==i.mergedAttrs&&(tf(i,i.mergedAttrs,!0),null!==o&&oc(h,o,i))}(h,n,i,S);const Y=E.createRenderer(i,o),se=sh(p,tg(o),null,o.onPush?32:16,p[n.index],n,E,Y,k||null,null,null);return L.firstCreatePass&&ig(L,n,h.length-1),Ms(p,se),p[n.index]=se}(Gs,gt,Hr,fn,Dn,L,se);Cr=ys(rn,ar),gt&&function am(n,i,o,h){if(h)Ti(n,o,["ng-version",Dl.full]);else{const{attrs:p,classes:E}=function dc(n){const i=[],o=[];let h=1,p=2;for(;h<n.length;){let E=n[h];if("string"==typeof E)2===p?""!==E&&i.push(E,n[++h]):8===p&&o.push(E);else{if(!cl(p))break;p=E}h++}return{attrs:i,classes:o}}(i.selectors[0]);p&&Ti(n,o,p),E&&E.length>0&&Dh(n,o,E.join(" "))}}(se,Hr,gt,h),void 0!==o&&function dg(n,i,o){const h=n.projection=[];for(let p=0;p<i.length;p++){const E=o[p];h.push(null!=E?Array.from(E):null)}}(Cr,this.ngContentSelectors,o),Qn=function cg(n,i,o,h,p,E){const S=Le(),k=p[pn],L=Mi(S,p);Zf(k,p,S,o,null,h);for(let se=0;se<o.length;se++)io(So(p,k,S.directiveStart+se,S),p);Xh(k,p,S),L&&io(L,p);const Y=So(p,k,S.directiveStart+S.componentOffset,S);if(n[Ze]=p[Ze]=Y,null!==E)for(const se of E)se(Y,i);return Hc(k,S,n),Y}(qo,Hr,fn,si,Dn,[ay]),zf(rn,Dn,null)}finally{$o()}return new sy(this.componentType,Qn,_o(Cr,Dn),Dn,Cr)}}class sy extends zm{constructor(i,o,h,p,E){super(),this.location=h,this._rootLView=p,this._tNode=E,this.instance=o,this.hostView=this.changeDetectorRef=new rp(p),this.componentType=i}setInput(i,o){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[i])){const E=this._rootLView;np(E[pn],E,p,i,o),uh(E,this._tNode.index)}}get injector(){return new qa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ay(){const n=Le();ml(I()[pn],n)}function hg(n){let i=function sp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const h=[n];for(;i;){let p;if(Xi(n))p=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new De(903,!1);p=i.\u0275dir}if(p){if(o){h.push(p);const S=n;S.inputs=sf(n.inputs),S.declaredInputs=sf(n.declaredInputs),S.outputs=sf(n.outputs);const k=p.hostBindings;k&&d(n,k);const L=p.viewQuery,Y=p.contentQueries;if(L&&pg(n,L),Y&&gg(n,Y),ve(n.inputs,p.inputs),ve(n.declaredInputs,p.declaredInputs),ve(n.outputs,p.outputs),Xi(p)&&p.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(p.data.animation)}}const E=p.features;if(E)for(let S=0;S<E.length;S++){const k=E[S];k&&k.ngInherit&&k(n),k===hg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function fg(n){let i=0,o=null;for(let h=n.length-1;h>=0;h--){const p=n[h];p.hostVars=i+=p.hostVars,p.hostAttrs=Vs(p.hostAttrs,o=Vs(o,p.hostAttrs))}}(h)}function sf(n){return n===un?{}:n===Fe?[]:n}function pg(n,i){const o=n.viewQuery;n.viewQuery=o?(h,p)=>{i(h,p),o(h,p)}:i}function gg(n,i){const o=n.contentQueries;n.contentQueries=o?(h,p,E)=>{i(h,p,E),o(h,p,E)}:i}function d(n,i){const o=n.hostBindings;n.hostBindings=o?(h,p)=>{i(h,p),o(h,p)}:i}function Pt(n){return!!Ln(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ln(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ur(n,i,o){return n[i]=o}function Oi(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function gc(n,i,o,h){const p=I();return Oi(p,Do(),i)&&(f(),uu(wi(),p,n,i,o,h)),gc}function rv(n,i,o,h,p,E,S,k){const L=I(),Y=f(),se=n+ar,Ce=Y.firstCreatePass?function cy(n,i,o,h,p,E,S,k,L){const Y=i.consts,se=oh(i,n,4,S||null,ls(Y,k));ch(i,o,se,ls(Y,L)),ml(i,se);const Ce=se.tView=Wf(2,se,h,p,E,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Y);return null!==i.queries&&(i.queries.template(i,se),Ce.queries=i.queries.embeddedTView(se)),se}(se,Y,L,i,o,h,p,E,S):Y.data[se];qn(Ce,!1);const gt=L[ae].createComment("");Tc(Y,L,gt,Ce),io(gt,L),Ms(L,L[se]=im(gt,L,gt,Ce)),Fi(Ce)&&Zh(Y,L,Ce),null!=S&&ah(L,Ce,k)}function mg(n,i,o){const h=I();return Oi(h,Do(),i)&&function Ba(n,i,o,h,p,E,S,k){const L=Mi(i,o);let se,Y=i.inputs;!k&&null!=Y&&(se=Y[h])?(np(n,o,se,h,p),qs(i)&&uh(o,i.index)):3&i.type&&(h=function Kf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),p=null!=S?S(p,i.value||"",h):p,E.setProperty(L,h,p))}(f(),wi(),h,n,i,h[ae],o,!1),mg}function yg(n,i,o,h,p){const S=p?"class":"style";np(n,o,i.inputs[S],S,h)}function bd(n,i,o,h){const p=I(),E=f(),S=ar+n,k=p[ae],L=E.firstCreatePass?function hy(n,i,o,h,p,E){const S=i.consts,L=oh(i,n,2,h,ls(S,p));return ch(i,o,L,ls(S,E)),null!==L.attrs&&tf(L,L.attrs,!1),null!==L.mergedAttrs&&tf(L,L.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,L),L}(S,E,p,i,o,h):E.data[S],Y=p[S]=Il(k,i,function Al(){return ur.lFrame.currentNamespace}()),se=Fi(L);return qn(L,!0),oc(k,Y,L),32!=(32&L.flags)&&Tc(E,p,Y,L),0===function us(){return ur.lFrame.elementDepthCount}()&&io(Y,p),function fo(){ur.lFrame.elementDepthCount++}(),se&&(Zh(E,p,L),Hc(E,L,p)),null!==h&&ah(p,L),bd}function vg(){let n=Le();Sr()?hi():(n=n.parent,qn(n,!1));const i=n;!function nl(){ur.lFrame.elementDepthCount--}();const o=f();return o.firstCreatePass&&(ml(o,n),Bs(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Ar(n){return 0!=(8&n.flags)}(i)&&yg(o,i,I(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function wr(n){return 0!=(16&n.flags)}(i)&&yg(o,i,I(),i.stylesWithoutHost,!1),vg}function _g(n,i,o,h){return bd(n,i,o,h),vg(),_g}function up(n,i,o){const h=I(),p=f(),E=n+ar,S=p.firstCreatePass?function w_(n,i,o,h,p){const E=i.consts,S=ls(E,h),k=oh(i,n,8,"ng-container",S);return null!==S&&tf(k,S,!0),ch(i,o,k,ls(E,p)),null!==i.queries&&i.queries.elementStart(i,k),k}(E,p,h,i,o):p.data[E];qn(S,!0);const k=h[E]=h[ae].createComment("");return Tc(p,h,k,S),io(k,h),Fi(S)&&(Zh(p,h,S),Hc(p,S,h)),null!=o&&ah(h,S),up}function Uu(){let n=Le();const i=f();return Sr()?hi():(n=n.parent,qn(n,!1)),i.firstCreatePass&&(ml(i,n),Bs(n)&&i.queries.elementEnd(n)),Uu}function Eg(n,i,o){return up(n,i,o),Uu(),Eg}function iv(){return I()}function Ig(n){return!!n&&"function"==typeof n.then}function sv(n){return!!n&&"function"==typeof n.subscribe}const ov=sv;function wg(n,i,o,h){const p=I(),E=f(),S=Le();return function lv(n,i,o,h,p,E,S){const k=Fi(h),Y=n.firstCreatePass&&ep(n),se=i[Ze],Ce=Jf(i);let gt=!0;if(3&h.type||S){const Dn=Mi(h,i),Qn=S?S(Dn):Dn,Cr=Ce.length,Hr=S?si=>S(Ei(si[h.index])):h.index;let fn=null;if(!S&&k&&(fn=function fy(n,i,o,h){const p=n.cleanup;if(null!=p)for(let E=0;E<p.length-1;E+=2){const S=p[E];if(S===o&&p[E+1]===h){const k=i[pe],L=p[E+2];return k.length>L?k[L]:null}"string"==typeof S&&(E+=2)}return null}(n,i,p,h.index)),null!==fn)(fn.__ngLastListenerFn__||fn).__ngNextListenerFn__=E,fn.__ngLastListenerFn__=E,gt=!1;else{E=uv(h,i,se,E,!1);const si=o.listen(Qn,p,E);Ce.push(E,si),Y&&Y.push(p,Hr,Cr,Cr+1)}}else E=uv(h,i,se,E,!1);const Ot=h.outputs;let rn;if(gt&&null!==Ot&&(rn=Ot[p])){const Dn=rn.length;if(Dn)for(let Qn=0;Qn<Dn;Qn+=2){const Gs=i[rn[Qn]][rn[Qn+1]].subscribe(E),qo=Ce.length;Ce.push(E,Gs),Y&&Y.push(p,h.index,qo,-(qo+1))}}}(E,p,p[ae],S,n,i,h),wg}function hm(n,i,o,h){try{return yi(6,i,o),!1!==o(h)}catch(p){return tp(n,p),!1}finally{yi(7,i,o)}}function uv(n,i,o,h,p){return function E(S){if(S===Function)return h;Da(n.componentOffset>-1?$i(n.index,i):i);let L=hm(i,o,h,S),Y=E.__ngNextListenerFn__;for(;Y;)L=hm(i,o,Y,S)&&L,Y=Y.__ngNextListenerFn__;return p&&!1===L&&(S.preventDefault(),S.returnValue=!1),L}}function fm(n=1){return function Jo(n){return(ur.lFrame.contextLView=function mo(n,i){for(;n>0;)i=i[Vt],n--;return i}(n,ur.lFrame.contextLView))[Ze]}(n)}function cv(n,i){let o=null;const h=function jh(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let p=0;p<i.length;p++){const E=i[p];if("*"!==E){if(null===h?Ff(n,E,!0):zg(h,E))return p}else o=p}return o}function pm(n){const i=I()[sn][te];if(!i.projection){const h=i.projection=fr(n?n.length:1,null),p=h.slice();let E=i.child;for(;null!==E;){const S=n?cv(E,n):0;null!==S&&(p[S]?p[S].projectionNext=E:h[S]=E,p[S]=E),E=E.next}}}function py(n,i=0,o){const h=I(),p=f(),E=oh(p,ar+n,16,null,o||null);null===E.projection&&(E.projection=i),hi(),32!=(32&E.flags)&&function bh(n,i,o){wf(i[ae],0,i,o,Vi(n,o,i),bu(o.parent||i[te],o,i))}(p,h,E)}function dp(n,i){return n<<17|i<<2}function Dd(n){return n>>17&32767}function fp(n){return 2|n}function af(n){return(131068&n)>>2}function my(n,i){return-131069&n|i<<2}function yy(n){return 1|n}function Iy(n,i,o,h,p){const E=n[o+1],S=null===i;let k=h?Dd(E):af(E),L=!1;for(;0!==k&&(!1===L||S);){const se=n[k+1];wy(n[k],i)&&(L=!0,n[k+1]=h?yy(se):fp(se)),k=h?Dd(se):af(se)}L&&(n[o+1]=h?fp(E):yy(E))}function wy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&R(n,i)>=0}function Ay(n,i){return function hu(n,i,o,h){const p=I(),E=f(),S=function Qs(n){const i=ur.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);E.firstUpdatePass&&function Ry(n,i,o,h){const p=n.data;if(null===p[o+1]){const E=p[qr()],S=function xy(n,i){return i>=n.expandoStartIndex}(n,o);(function Im(n,i){return 0!=(n.flags&(i?8:16))})(E,h)&&null===i&&!S&&(i=!1),i=function Em(n,i,o,h){const p=function Xo(n){const i=ur.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let E=h?i.residualClasses:i.residualStyles;if(null===p)0===(h?i.classBindings:i.styleBindings)&&(o=pp(o=lf(null,n,i,o,h),i.attrs,h),E=null);else{const S=i.directiveStylingLast;if(-1===S||n[S]!==p)if(o=lf(p,n,i,o,h),null===E){let L=function ki(n,i,o){const h=o?i.classBindings:i.styleBindings;if(0!==af(h))return n[Dd(h)]}(n,i,h);void 0!==L&&Array.isArray(L)&&(L=lf(null,n,i,L[1],h),L=pp(L,i.attrs,h),function Ev(n,i,o,h){n[Dd(o?i.classBindings:i.styleBindings)]=h}(n,i,h,L))}else E=function Iv(n,i,o){let h;const p=i.directiveEnd;for(let E=1+i.directiveStylingLast;E<p;E++)h=pp(h,n[E].hostAttrs,o);return pp(h,i.attrs,o)}(n,i,h)}return void 0!==E&&(h?i.residualClasses=E:i.residualStyles=E),o}(p,E,i,h),function _y(n,i,o,h,p,E){let S=E?i.classBindings:i.styleBindings,k=Dd(S),L=af(S);n[h]=o;let se,Y=!1;if(Array.isArray(o)?(se=o[1],(null===se||R(o,se)>0)&&(Y=!0)):se=o,p)if(0!==L){const gt=Dd(n[k+1]);n[h+1]=dp(gt,k),0!==gt&&(n[gt+1]=my(n[gt+1],h)),n[k+1]=function gv(n,i){return 131071&n|i<<17}(n[k+1],h)}else n[h+1]=dp(k,0),0!==k&&(n[k+1]=my(n[k+1],h)),k=h;else n[h+1]=dp(L,0),0===k?k=h:n[L+1]=my(n[L+1],h),L=h;Y&&(n[h+1]=fp(n[h+1])),Iy(n,se,h,!0),Iy(n,se,h,!1),function Ey(n,i,o,h,p){const E=p?n.residualClasses:n.residualStyles;null!=E&&"string"==typeof i&&R(E,i)>=0&&(o[h+1]=yy(o[h+1]))}(i,se,n,h,E),S=dp(k,L),E?i.classBindings=S:i.styleBindings=S}(p,E,i,o,S,h)}}(E,n,S,h),i!==Zr&&Oi(p,S,i)&&function My(n,i,o,h,p,E,S,k){if(!(3&i.type))return;const L=n.data,Y=L[k+1],se=function C_(n){return 1==(1&n)}(Y)?wv(L,i,o,p,af(Y),S):void 0;uf(se)||(uf(E)||function hp(n){return 2==(2&n)}(Y)&&(E=wv(L,null,o,p,k,S)),function xp(n,i,o,h,p){if(i)p?n.addClass(o,h):n.removeClass(o,h);else{let E=-1===h.indexOf("-")?void 0:Na.DashCase;null==p?n.removeStyle(o,h,E):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),E|=Na.Important),n.setStyle(o,h,p,E))}}(h,S,Xs(qr(),o),p,E))}(E,E.data[qr()],p,p[ae],n,p[S+1]=function Cv(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ne(Ia(n)))),n}(i,o),h,S)}(n,i,null,!0),Ay}function lf(n,i,o,h,p){let E=null;const S=o.directiveEnd;let k=o.directiveStylingLast;for(-1===k?k=o.directiveStart:k++;k<S&&(E=i[k],h=pp(h,E.hostAttrs,p),E!==n);)k++;return null!==n&&(o.directiveStylingLast=k),h}function pp(n,i,o){const h=o?1:2;let p=-1;if(null!==i)for(let E=0;E<i.length;E++){const S=i[E];"number"==typeof S?p=S:p===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),hs(n,S,!!o||i[++E]))}return void 0===n?null:n}function wv(n,i,o,h,p,E){const S=null===i;let k;for(;p>0;){const L=n[p],Y=Array.isArray(L),se=Y?L[1]:L,Ce=null===se;let gt=o[p+1];gt===Zr&&(gt=Ce?Fe:void 0);let Ot=Ce?A(gt,h):se===h?gt:void 0;if(Y&&!uf(Ot)&&(Ot=A(L,h)),uf(Ot)&&(k=Ot,S))return k;const rn=n[p+1];p=S?Dd(rn):af(rn)}if(null!==i){let L=E?i.residualClasses:i.residualStyles;null!=L&&(k=A(L,h))}return k}function uf(n){return void 0!==n}function bv(n,i=""){const o=I(),h=f(),p=n+ar,E=h.firstCreatePass?oh(h,p,1,i,null):h.data[p],S=o[p]=function Cu(n,i){return n.createText(i)}(o[ae],i);Tc(h,o,S,E),qn(E,!1)}function Dg(n){return wm("",n,""),Dg}function wm(n,i,o){const h=I(),p=function du(n,i,o,h){return Oi(n,Do(),o)?i+ue(o)+h:Zr}(h,n,i,o);return p!==Zr&&function Wl(n,i,o){const h=Xs(i,n);!function Bl(n,i,o){n.setValue(i,o)}(n[ae],h,o)}(h,qr(),p),wm}const df=void 0;var Ly=["en",[["a","p"],["AM","PM"],df],[["AM","PM"],df,df],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],df,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],df,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",df,"{1} 'at' {0}",df],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Fy(n){const o=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===h?1:5}];let hf={};function Dm(n){const i=function Sm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=yp(i);if(o)return o;const h=i.split("-")[0];if(o=yp(h),o)return o;if("en"===h)return Ly;throw new De(701,!1)}function Tm(n){return Dm(n)[Mr.PluralCase]}function yp(n){return n in hf||(hf[n]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[n]),hf[n]}var Mr=(()=>((Mr=Mr||{})[Mr.LocaleId=0]="LocaleId",Mr[Mr.DayPeriodsFormat=1]="DayPeriodsFormat",Mr[Mr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mr[Mr.DaysFormat=3]="DaysFormat",Mr[Mr.DaysStandalone=4]="DaysStandalone",Mr[Mr.MonthsFormat=5]="MonthsFormat",Mr[Mr.MonthsStandalone=6]="MonthsStandalone",Mr[Mr.Eras=7]="Eras",Mr[Mr.FirstDayOfWeek=8]="FirstDayOfWeek",Mr[Mr.WeekendRange=9]="WeekendRange",Mr[Mr.DateFormat=10]="DateFormat",Mr[Mr.TimeFormat=11]="TimeFormat",Mr[Mr.DateTimeFormat=12]="DateTimeFormat",Mr[Mr.NumberSymbols=13]="NumberSymbols",Mr[Mr.NumberFormats=14]="NumberFormats",Mr[Mr.CurrencyCode=15]="CurrencyCode",Mr[Mr.CurrencySymbol=16]="CurrencySymbol",Mr[Mr.CurrencyName=17]="CurrencyName",Mr[Mr.Currencies=18]="Currencies",Mr[Mr.Directionality=19]="Directionality",Mr[Mr.PluralCase=20]="PluralCase",Mr[Mr.ExtraData=21]="ExtraData",Mr))();const vp="en-US";let Ep=vp;function Og(n,i,o,h,p){if(n=he(n),Array.isArray(n))for(let E=0;E<n.length;E++)Og(n[E],i,o,h,p);else{const E=f(),S=I();let k=kc(n)?n:he(n.provide),L=Ng(n);const Y=Le(),se=1048575&Y.providerIndexes,Ce=Y.directiveStart,gt=Y.providerIndexes>>20;if(kc(n)||!n.multi){const Ot=new Lt(L,p,jc),rn=Lm(k,i,p?se:se+gt,Ce);-1===rn?(Pl(Ml(Y,S),E,k),Gy(E,n,i.length),i.push(k),Y.directiveStart++,Y.directiveEnd++,p&&(Y.providerIndexes+=1048576),o.push(Ot),S.push(Ot)):(o[rn]=Ot,S[rn]=Ot)}else{const Ot=Lm(k,i,se+gt,Ce),rn=Lm(k,i,se,se+gt),Qn=rn>=0&&o[rn];if(p&&!Qn||!p&&!(Ot>=0&&o[Ot])){Pl(Ml(Y,S),E,k);const Cr=function Qv(n,i,o,h,p){const E=new Lt(n,o,jc);return E.multi=[],E.index=i,E.componentProviders=0,Xv(E,p,h&&!o),E}(p?y0:Bm,o.length,p,h,L);!p&&Qn&&(o[rn].providerFactory=Cr),Gy(E,n,i.length,0),i.push(k),Y.directiveStart++,Y.directiveEnd++,p&&(Y.providerIndexes+=1048576),o.push(Cr),S.push(Cr)}else Gy(E,n,Ot>-1?Ot:rn,Xv(o[p?rn:Ot],L,!p&&h));!p&&h&&Qn&&o[rn].componentProviders++}}}function Gy(n,i,o,h){const p=kc(i),E=function kp(n){return!!n.useClass}(i);if(p||E){const L=(E?he(i.useClass):i).prototype.ngOnDestroy;if(L){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!p&&i.multi){const se=Y.indexOf(o);-1===se?Y.push(o,[h,L]):Y[se+1].push(h,L)}else Y.push(o,L)}}}function Xv(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Lm(n,i,o,h){for(let p=o;p<h;p++)if(i[p]===n)return p;return-1}function Bm(n,i,o,h){return $m(this.multi,[])}function y0(n,i,o,h){const p=this.multi;let E;if(this.providerFactory){const S=this.providerFactory.componentProviders,k=So(o,o[pn],this.providerFactory.index,h);E=k.slice(0,S),$m(p,E);for(let L=S;L<k.length;L++)E.push(k[L])}else E=[],$m(p,E);return E}function $m(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function vh(n,i=[]){return o=>{o.providersResolver=(h,p)=>function Pg(n,i,o){const h=f();if(h.firstCreatePass){const p=Xi(n);Og(o,h.data,h.blueprint,p,!0),Og(i,h.data,h.blueprint,p,!1)}}(h,p?p(n):n,i)}}class tl{}class hl{}function Jv(n,i){return new Dp(n,null!=i?i:null)}class Dp extends tl{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rf(this);const h=Xr(i);this._bootstrapComponents=lu(h.bootstrap),this._r3Injector=qp(i,o,[{provide:tl,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],Ne(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class yf extends hl{constructor(i){super(),this.moduleType=i}create(i){return new Dp(this.moduleType,i)}}class Sl extends tl{constructor(i,o,h){super(),this.componentFactoryResolver=new rf(this),this.instance=null;const p=new md([...i,{provide:tl,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],o||Xd(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Wy(n,i,o=null){return new Sl(n,i,o).injector}let qy=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const h=Ns(0,o.type),p=h.length>0?Wy([h],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Wt({token:n,providedIn:"environment",factory:()=>new n(Tr(Ou))}),n})();function vf(n){n.getStandaloneInjector=i=>i.get(qy).getOrCreateStandaloneInjector(n)}function i_(n,i,o){const h=Ii()+n,p=I();return p[h]===Zr?Ur(p,h,o?i.call(o):i()):function ws(n,i){return n[i]}(p,h)}function d_(n,i,o,h,p,E){const S=i+o;return Oi(n,S,p)?Ur(n,S+1,E?h.call(E,p):h(p)):function Tp(n,i){const o=n[i];return o===Zr?void 0:o}(n,S+1)}function c(n,i){const o=f();let h;const p=n+ar;o.firstCreatePass?(h=function g(n,i){if(i)for(let o=i.length-1;o>=0;o--){const h=i[o];if(n===h.name)return h}}(i,o.pipeRegistry),o.data[p]=h,h.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(p,h.onDestroy)):h=o.data[p];const E=h.factory||(h.factory=ns(h.type)),S=Nr(jc);try{const k=il(!1),L=E();return il(k),function dy(n,i,o,h){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=h}(o,I(),p,L),L}finally{Nr(S)}}function O(n,i,o){const h=n+ar,p=I(),E=function ho(n,i){return n[i]}(p,h);return function Tt(n,i){return n[pn].data[i].pure}(p,h)?d_(p,Ii(),i,E.transform,o,E):E.transform(o)}function Cn(n){return i=>{setTimeout(n,void 0,i)}}const Tn=class Qt extends u.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,h){let p=i,E=o||(()=>null),S=h;if(i&&"object"==typeof i){var k,L,Y;const Ce=i;p=null===(k=Ce.next)||void 0===k?void 0:k.bind(Ce),E=null===(L=Ce.error)||void 0===L?void 0:L.bind(Ce),S=null===(Y=Ce.complete)||void 0===Y?void 0:Y.bind(Ce)}this.__isAsync&&(E=Cn(E),p&&(p=Cn(p)),S&&(S=Cn(S)));const se=super.subscribe({next:p,error:E,complete:S});return i instanceof Q.w0&&i.add(se),se}};function sr(){return this._results[Symbol.iterator]()}class ni{get changes(){return this._changes||(this._changes=new Tn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ni.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=sr)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const h=this;h.dirty=!1;const p=function ds(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Yl(n,i,o){if(n.length!==i.length)return!1;for(let h=0;h<n.length;h++){let p=n[h],E=i[h];if(o&&(p=o(p),E=o(E)),E!==p)return!1}return!0}(h._results,p,o))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ps,n})();const ri=Ri,Va=class extends ri{constructor(i,o,h){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=h}createEmbeddedView(i,o){const h=this._declarationTContainer.tView,p=sh(this._declarationLView,h,i,16,null,h.declTNode,null,null,null,null,o||null);p[Pn]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[xr];return null!==S&&(p[xr]=S.createEmbeddedView(h)),zf(h,p,i),new nf(p)}};function Ps(){return ps(Le(),I())}function ps(n,i){return 4&n.type?new Va(i,n,_o(n,i)):null}let ja=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ih,n})();function Ih(){return hE(Le(),I())}const mI=ja,cE=class extends mI{constructor(i,o,h){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=h}get element(){return _o(this._hostTNode,this._hostLView)}get injector(){return new qa(this._hostTNode,this._hostLView)}get parentInjector(){const i=pi(this._hostTNode,this._hostLView);if(fa(i)){const o=Wa(i,this._hostLView),h=Js(i);return new qa(o[pn].data[h+8],o)}return new qa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(i,o,h){let p,E;"number"==typeof h?p=h:null!=h&&(p=h.index,E=h.injector);const S=i.createEmbeddedView(o||{},E);return this.insert(S,p),S}createComponent(i,o,h,p,E){const S=i&&!function al(n){return"function"==typeof n}(i);let k;if(S)k=o;else{const Ce=o||{};k=Ce.index,h=Ce.injector,p=Ce.projectableNodes,E=Ce.environmentInjector||Ce.ngModuleRef}const L=S?i:new zc($n(i)),Y=h||this.parentInjector;if(!E&&null==L.ngModule){const gt=(S?Y:this.parentInjector).get(Ou,null);gt&&(E=gt)}const se=L.create(Y,p,void 0,E);return this.insert(se.hostView,k),se}insert(i,o){const h=i._lView,p=h[pn];if(function Fo(n){return Rr(n[li])}(h)){const se=this.indexOf(i);if(-1!==se)this.detach(se);else{const Ce=h[li],gt=new cE(Ce,Ce[te],Ce[li]);gt.detach(gt.indexOf(i))}}const E=this._adjustIndex(o),S=this._lContainer;!function If(n,i,o,h){const p=Fn+h,E=o.length;h>0&&(o[p-1][Ir]=i),h<E-Fn?(i[Ir]=o[p],mt(o,Fn+h,i)):(o.push(i),i[Ir]=null),i[li]=o;const S=i[Pn];null!==S&&o!==S&&function $d(n,i){const o=n[an];i[sn]!==i[li][li][sn]&&(n[Xe]=!0),null===o?n[an]=[i]:o.push(i)}(S,i);const k=i[xr];null!==k&&k.insertView(n),i[nr]|=64}(p,h,S,E);const k=jd(E,S),L=h[ae],Y=$l(L,S[wt]);return null!==Y&&function Ap(n,i,o,h,p,E){h[Wr]=p,h[te]=i,Du(n,h,o,1,p,E)}(p,S[te],L,h,Y,k),i.attachToViewContainerRef(),mt(A0(S),E,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),h=Ud(this._lContainer,o);h&&(Qr(A0(this._lContainer),o),nc(h[pn],h))}detach(i){const o=this._adjustIndex(i,-1),h=Ud(this._lContainer,o);return h&&null!=Qr(A0(this._lContainer),o)?new nf(h):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(n){return n[Gt]}function A0(n){return n[Gt]||(n[Gt]=[])}function hE(n,i){let o;const h=i[n.index];if(Rr(h))o=h;else{let p;if(8&n.type)p=Ei(h);else{const E=i[ae];p=E.createComment("");const S=Mi(n,i);ia(E,$l(E,S),p,function Ul(n,i){return n.nextSibling(i)}(E,S),!1)}i[n.index]=o=im(h,i,p,n),Ms(i,o)}return new cE(o,n,i)}class x0{constructor(i){this.queryList=i,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const h=null!==i.contentQueries?i.contentQueries[0]:o.length,p=[];for(let E=0;E<h;E++){const S=o.getByIndex(E);p.push(this.queries[S.indexInDeclarationView].clone())}return new R0(p)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==IE(i,o).matches&&this.queries[o].setDirty()}}class fE{constructor(i,o,h=null){this.predicate=i,this.flags=o,this.read=h}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let h=0;h<this.length;h++){const p=null!==o?o.length:0,E=this.getByIndex(h).embeddedTView(i,p);E&&(E.indexInDeclarationView=h,null!==o?o.push(E):o=[E])}return null!==o?new M0(o):null}template(i,o){for(let h=0;h<this.queries.length;h++)this.queries[h].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let h=i.parent;for(;null!==h&&8&h.type&&h.index!==o;)h=h.parent;return o===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const E=h[p];this.matchTNodeWithReadOption(i,o,yI(o,E)),this.matchTNodeWithReadOption(i,o,is(o,i,E,!1,!1))}else h===Ri?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,is(o,i,h,!1,!1))}matchTNodeWithReadOption(i,o,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Ja||p===ja||p===Ri&&4&o.type)this.addMatch(o.index,-2);else{const E=is(o,i,p,!1,!1);null!==E&&this.addMatch(o.index,E)}else this.addMatch(o.index,h)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function yI(n,i){const o=n.localNames;if(null!==o)for(let h=0;h<o.length;h+=2)if(o[h]===i)return o[h+1];return null}function _I(n,i,o,h){return-1===o?function vI(n,i){return 11&n.type?_o(n,i):4&n.type?ps(n,i):null}(i,n):-2===o?function EI(n,i,o){return o===Ja?_o(i,n):o===Ri?ps(i,n):o===ja?hE(i,n):void 0}(n,i,h):So(n,n[pn],o,i)}function pE(n,i,o,h){const p=i[xr].queries[h];if(null===p.matches){const E=n.data,S=o.matches,k=[];for(let L=0;L<S.length;L+=2){const Y=S[L];k.push(Y<0?null:_I(i,E[Y],S[L+1],o.metadata.read))}p.matches=k}return p.matches}function O0(n,i,o,h){const p=n.queries.getByIndex(o),E=p.matches;if(null!==E){const S=pE(n,i,p,o);for(let k=0;k<E.length;k+=2){const L=E[k];if(L>0)h.push(S[k/2]);else{const Y=E[k+1],se=i[-L];for(let Ce=Fn;Ce<se.length;Ce++){const gt=se[Ce];gt[Pn]===gt[li]&&O0(gt[pn],gt,Y,h)}if(null!==se[an]){const Ce=se[an];for(let gt=0;gt<Ce.length;gt++){const Ot=Ce[gt];O0(Ot[pn],Ot,Y,h)}}}}}return h}function gE(n){const i=I(),o=f(),h=xa();go(h+1);const p=IE(o,h);if(n.dirty&&function as(n){return 4==(4&n[nr])}(i)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const E=p.crossesNgTemplate?O0(o,i,h,[]):pE(o,i,p,h);n.reset(E,Lh),n.notifyOnChanges()}return!0}return!1}function mE(n,i,o){const h=f();h.firstCreatePass&&(EE(h,new fE(n,i,o),-1),2==(2&i)&&(h.staticViewQueries=!0)),_E(h,I(),i)}function yE(n,i,o,h){const p=f();if(p.firstCreatePass){const E=Le();EE(p,new fE(i,o,h),E.index),function wI(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}_E(p,I(),o)}function vE(){return function II(n,i){return n[xr].queries[i].queryList}(I(),xa())}function _E(n,i,o){const h=new ni(4==(4&o));dl(n,i,h,h.destroy),null===i[xr]&&(i[xr]=new R0),i[xr].queries.push(new x0(h))}function EE(n,i,o){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(i,o))}function IE(n,i){return n.queries.getByIndex(i)}function k0(n){return!!Xr(n)}function f_(...n){}const $E=new Dr("Application Initializer");let p_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const E=this.appInits[p]();if(Ig(E))o.push(E);else if(ov(E)){const S=new Promise((k,L)=>{E.subscribe({complete:k,error:L})});o.push(S)}}Promise.all(o).then(()=>{h()}).catch(p=>{this.reject(p)}),0===o.length&&h(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Tr($E,8))},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UE=new Dr("AppId",{providedIn:"root",factory:function VE(){return`${$0()}${$0()}${$0()}`}});function $0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jE=new Dr("Platform Initializer"),HI=new Dr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let zI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const g_=new Dr("LocaleId",{providedIn:"root",factory:()=>kt(g_,nn.Optional|nn.SkipSelf)||function GI(){return typeof $localize<"u"&&$localize.locale||vp}()}),WI=new Dr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qI{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let KI=(()=>{class n{compileModuleSync(o){return new yf(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const h=this.compileModuleSync(o),E=lu(Xr(o).declarations).reduce((S,k)=>{const L=$n(k);return L&&S.push(new zc(L)),S},[]);return new qI(h,E)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Yc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tn(!1),this.onMicrotaskEmpty=new Tn(!1),this.onStable=new Tn(!1),this.onError=new Tn(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&o,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function QI(){let n=Rn.requestAnimationFrame,i=Rn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const h=i[Zone.__symbol__("OriginalDelegate")];h&&(i=h)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function tw(n){const i=()=>{!function ew(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,h,p,E,S,k)=>{try{return GE(n),o.invokeTask(p,E,S,k)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||n.shouldCoalesceRunChangeDetection)&&i(),WE(n)}},onInvoke:(o,h,p,E,S,k,L)=>{try{return GE(n),o.invoke(p,E,S,k,L)}finally{n.shouldCoalesceRunChangeDetection&&i(),WE(n)}},onHasTask:(o,h,p,E)=>{o.hasTask(p,E),h===p&&("microTask"==E.change?(n._hasPendingMicrotasks=E.microTask,j0(n),V0(n)):"macroTask"==E.change&&(n.hasPendingMacrotasks=E.macroTask))},onHandleError:(o,h,p,E)=>(o.handleError(p,E),n.runOutsideAngular(()=>n.onError.emit(E)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yc.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Yc.isInAngularZone())throw new De(909,!1)}run(i,o,h){return this._inner.run(i,o,h)}runTask(i,o,h,p){const E=this._inner,S=E.scheduleEventTask("NgZoneEvent: "+p,i,JI,f_,f_);try{return E.runTask(S,o,h)}finally{E.cancelTask(S)}}runGuarded(i,o,h){return this._inner.runGuarded(i,o,h)}runOutsideAngular(i){return this._outer.run(i)}}const JI={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function GE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WE(n){n._nesting--,V0(n)}class nw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tn,this.onMicrotaskEmpty=new Tn,this.onStable=new Tn,this.onError=new Tn}run(i,o,h){return i.apply(o,h)}runGuarded(i,o,h){return i.apply(o,h)}runOutsideAngular(i){return i()}runTask(i,o,h,p){return i.apply(o,h)}}const qE=new Dr(""),KE=new Dr("");let H0,rw=(()=>{class n{constructor(o,h,p){this._ngZone=o,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function iw(n){H0=n}(p),p.addToWindow(h)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yc.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(o)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,h,p){let E=-1;h&&h>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==E),o(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:o,timeoutId:E,updateCb:p})}whenStable(o,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,h,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(Tr(Yc),Tr(YE),Tr(KE))},n.\u0275prov=Wt({token:n,factory:n.\u0275fac}),n})(),YE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,h){this._applications.set(o,h)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,h=!0){var p,E;return null!==(p=null===(E=H0)||void 0===E?void 0:E.findTestabilityInTree(this,o,h))&&void 0!==p?p:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const _f=!1;let Sp=null;const ZE=new Dr("AllowMultipleToken"),z0=new Dr("PlatformDestroyListeners"),XE=new Dr("appBootstrapListener");class aw{constructor(i,o){this.name=i,this.token=o}}function JE(n,i,o=[]){const h=`Platform: ${i}`,p=new Dr(h);return(E=[])=>{let S=G0();if(!S||S.injector.get(ZE,!1)){const k=[...o,...E,{provide:p,useValue:!0}];n?n(k):function lw(n){if(Sp&&!Sp.get(ZE,!1))throw new De(400,!1);Sp=n;const i=n.get(tI);(function QE(n){const i=n.get(jE,null);i&&i.forEach(o=>o())})(n)}(function eI(n=[],i){return fc.create({name:i,providers:[{provide:Np,useValue:"platform"},{provide:z0,useValue:new Set([()=>Sp=null])},...n]})}(k,h))}return function cw(n){const i=G0();if(!i)throw new De(401,!1);return i}()}}function G0(){var n,i;return null!==(n=null===(i=Sp)||void 0===i?void 0:i.get(tI))&&void 0!==n?n:null}let tI=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,h){const p=function rI(n,i){let o;return o="noop"===n?new nw:("zone.js"===n?void 0:n)||new Yc(i),o}(null==h?void 0:h.ngZone,function nI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(h)),E=[{provide:Yc,useValue:p}];return p.run(()=>{const S=fc.create({providers:E,parent:this.injector,name:o.moduleType.name}),k=o.create(S),L=k.injector.get(Hs,null);if(!L)throw new De(402,!1);return p.runOutsideAngular(()=>{const Y=p.onError.subscribe({next:se=>{L.handleError(se)}});k.onDestroy(()=>{y_(this._modules,k),Y.unsubscribe()})}),function iI(n,i,o){try{const h=o();return Ig(h)?h.catch(p=>{throw i.runOutsideAngular(()=>n.handleError(p)),p}):h}catch(h){throw i.runOutsideAngular(()=>n.handleError(h)),h}}(L,p,()=>{const Y=k.injector.get(p_);return Y.runInitializers(),Y.donePromise.then(()=>(function kv(n){at(n,"Expected localeId to be defined"),"string"==typeof n&&(Ep=n.toLowerCase().replace(/_/g,"-"))}(k.injector.get(g_,vp)||vp),this._moduleDoBootstrap(k),k))})})}bootstrapModule(o,h=[]){const p=sI({},h);return function sw(n,i,o){const h=new yf(o);return Promise.resolve(h)}(0,0,o).then(E=>this.bootstrapModuleFactory(E,p))}_moduleDoBootstrap(o){const h=o.injector.get(m_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new De(-403,!1);o.instance.ngDoBootstrap(h)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const o=this._injector.get(z0,null);o&&(o.forEach(h=>h()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Tr(fc))},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function sI(n,i){return Array.isArray(i)?i.reduce(sI,n):{...n,...i}}let m_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,h,p){this._zone=o,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new W.y(k=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{k.next(this._stable),k.complete()})}),S=new W.y(k=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Yc.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,k.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{Yc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{k.next(!1)}))});return()=>{L.unsubscribe(),Y.unsubscribe()}});this.isStable=(0,xe.T)(E,S.pipe((0,Oe.B)()))}bootstrap(o,h){const p=o instanceof Bp;if(!this._injector.get(p_).done){!p&&jr(o);throw new De(405,_f)}let S;S=p?o:this._injector.get(Fc).resolveComponentFactory(o),this.componentTypes.push(S.componentType);const k=function ow(n){return n.isBoundToModule}(S)?void 0:this._injector.get(tl),Y=S.create(fc.NULL,[],h||S.selector,k),se=Y.location.nativeElement,Ce=Y.injector.get(qE,null);return null==Ce||Ce.registerApplication(se),Y.onDestroy(()=>{this.detachView(Y.hostView),y_(this.components,Y),null==Ce||Ce.unregisterApplication(se)}),this._loadComponent(Y),Y}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const h=o;this._views.push(h),h.attachToAppRef(this)}detachView(o){const h=o;y_(this._views,h),h.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const h=this._injector.get(XE,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>y_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new De(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Tr(Yc),Tr(Ou),Tr(Hs))},n.\u0275prov=Wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,o){if(qs(n)&&!o){const h=$i(n.index,i);return new nf(h,h)}return 47&n.type?new nf(i[sn],i):null}(Le(),I(),16==(16&n))}class cI{constructor(){}supports(i){return Pt(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,h=this._removalsHead,p=0,E=null;for(;o||h;){const S=!h||o&&o.currentIndex<hI(h,p,E)?o:h,k=hI(S,p,E),L=S.currentIndex;if(S===h)p--,h=h._nextRemoved;else if(o=o._next,null==S.previousIndex)p++;else{E||(E=[]);const Y=k-p,se=L-p;if(Y!=se){for(let gt=0;gt<Y;gt++){const Ot=gt<E.length?E[gt]:E[gt]=0,rn=Ot+gt;se<=rn&&rn<Y&&(E[gt]=Ot+1)}E[S.previousIndex]=se-Y}}k!==L&&i(S,k,L)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Pt(i))throw new De(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let p,E,S,o=this._itHead,h=!1;if(Array.isArray(i)){this.length=i.length;for(let k=0;k<this.length;k++)E=i[k],S=this._trackByFn(k,E),null!==o&&Object.is(o.trackById,S)?(h&&(o=this._verifyReinsertion(o,E,S,k)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,S,k),h=!0),o=o._next}else p=0,function En(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let h;for(;!(h=o.next()).done;)i(h.value)}}(i,k=>{S=this._trackByFn(p,k),null!==o&&Object.is(o.trackById,S)?(h&&(o=this._verifyReinsertion(o,k,S,p)),Object.is(o.item,k)||this._addIdentityChange(o,k)):(o=this._mismatch(o,k,S,p),h=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,h,p){let E;return null===i?E=this._itTail:(E=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,E,p)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,E,p)):i=this._addAfter(new Cw(o,h),E,p),i}_verifyReinsertion(i,o,h,p){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==E?i=this._reinsertAfter(E,i._prev,p):i.currentIndex!=p&&(i.currentIndex=p,this._addToMoves(i,p)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const p=i._prevRemoved,E=i._nextRemoved;return null===p?this._removalsHead=E:p._nextRemoved=E,null===E?this._removalsTail=p:E._prevRemoved=p,this._insertAfter(i,o,h),this._addToMoves(i,h),i}_moveAfter(i,o,h){return this._unlink(i),this._insertAfter(i,o,h),this._addToMoves(i,h),i}_addAfter(i,o,h){return this._insertAfter(i,o,h),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,h){const p=null===o?this._itHead:o._next;return i._next=p,i._prev=o,null===p?this._itTail=i:p._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new dI),this._linkedRecords.put(i),i.currentIndex=h,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,h=i._next;return null===o?this._itHead=h:o._next=h,null===h?this._itTail=o:h._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Cw{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===o||o<=h.currentIndex)&&Object.is(h.trackById,i))return h;return null}remove(i){const o=i._prevDup,h=i._nextDup;return null===o?this._head=h:o._nextDup=h,null===h?this._tail=o:h._prevDup=o,null===this._head}}class dI{constructor(){this.map=new Map}put(i){const o=i.trackById;let h=this.map.get(o);h||(h=new bw,this.map.set(o,h)),h.add(i)}get(i,o){const p=this.map.get(i);return p?p.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hI(n,i,o){const h=n.previousIndex;if(null===h)return h;let p=0;return o&&h<o.length&&(p=o[h]),h+i+p}class fI{constructor(){}supports(i){return i instanceof Map||Ln(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Ln(i)))throw new De(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(h,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,h),this._appendAfter=o,o=o._next;else{const E=this._getOrCreateRecordForKey(p,h);o=this._insertBeforeOrAppend(o,E)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let h=o;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const h=i._prev;return o._next=i,o._prev=h,i._prev=o,h&&(h._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const p=this._records.get(i);this._maybeAddToChanges(p,o);const E=p._prev,S=p._next;return E&&(E._next=S),S&&(S._prev=E),p._next=null,p._prev=null,p}const h=new Tw(i);return this._records.set(i,h),h.currentValue=o,this._addToAdditions(h),h}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(h=>o(i[h],h))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pI(){return new Z0([new cI])}let Z0=(()=>{class n{constructor(o){this.factories=o}static create(o,h){if(null!=h){const p=h.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:h=>n.create(o,h||pI()),deps:[[n,new to,new _i]]}}find(o){const h=this.factories.find(p=>p.supports(o));if(null!=h)return h;throw new De(901,!1)}}return n.\u0275prov=Wt({token:n,providedIn:"root",factory:pI}),n})();function gI(){return new X0([new fI])}let X0=(()=>{class n{constructor(o){this.factories=o}static create(o,h){if(h){const p=h.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:h=>n.create(o,h||gI()),deps:[[n,new to,new _i]]}}find(o){const h=this.factories.find(p=>p.supports(o));if(h)return h;throw new De(901,!1)}}return n.\u0275prov=Wt({token:n,providedIn:"root",factory:gI}),n})();const xw=JE(null,"core",[]);let Rw=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Tr(m_))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Ct({}),n})();function Mw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(yn,Et,V)=>{"use strict";V.d(Et,{Fj:()=>pt,qu:()=>ca,NI:()=>Vt,u:()=>wo,sg:()=>Eo,u5:()=>ji,JU:()=>lt,a5:()=>ci,JJ:()=>dr,JL:()=>Rn,F:()=>Je,On:()=>Gt,c5:()=>$i,UX:()=>Us,Q7:()=>Ts,kI:()=>it,_Y:()=>an});var u=V(4650),Q=V(6895),W=V(8996),xe=V(9751),Oe=V(4742),ke=V(8421),ve=V(7669),Ne=V(5403),je=V(3268),me=V(1810),he=V(4004);let Re=(()=>{class y{constructor(f,T){this._renderer=f,this._elementRef=T,this.onChange=q=>{},this.onTouched=()=>{}}setProperty(f,T){this._renderer.setProperty(this._elementRef.nativeElement,f,T)}registerOnTouched(f){this.onTouched=f}registerOnChange(f){this.onChange=f}setDisabledState(f){this.setProperty("disabled",f)}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.Qsj),u.Y36(u.SBq))},y.\u0275dir=u.lG2({type:y}),y})(),Ve=(()=>{class y extends Re{}return y.\u0275fac=function(){let I;return function(T){return(I||(I=u.n5z(y)))(T||y)}}(),y.\u0275dir=u.lG2({type:y,features:[u.qOj]}),y})();const lt=new u.OlP("NgValueAccessor"),ye={provide:lt,useExisting:(0,u.Gpc)(()=>pt),multi:!0},rt=new u.OlP("CompositionEventMode");let pt=(()=>{class y extends Re{constructor(f,T,q){super(f,T),this._compositionMode=q,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ue(){const y=(0,Q.q)()?(0,Q.q)().getUserAgent():"";return/android (\d+)/.test(y.toLowerCase())}())}writeValue(f){this.setProperty("value",null==f?"":f)}_handleInput(f){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(f)}_compositionStart(){this._composing=!0}_compositionEnd(f){this._composing=!1,this._compositionMode&&this.onChange(f)}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(rt,8))},y.\u0275dir=u.lG2({type:y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(f,T){1&f&&u.NdJ("input",function(Le){return T._handleInput(Le.target.value)})("blur",function(){return T.onTouched()})("compositionstart",function(){return T._compositionStart()})("compositionend",function(Le){return T._compositionEnd(Le.target.value)})},features:[u._Bn([ye]),u.qOj]}),y})();const et=!1;function He(y){return null==y||("string"==typeof y||Array.isArray(y))&&0===y.length}function z(y){return null!=y&&"number"==typeof y.length}const Pe=new u.OlP("NgValidators"),Te=new u.OlP("NgAsyncValidators"),Se=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class it{static min(I){return function qe(y){return I=>{if(He(I.value)||He(y))return null;const f=parseFloat(I.value);return!isNaN(f)&&f<y?{min:{min:y,actual:I.value}}:null}}(I)}static max(I){return function nt(y){return I=>{if(He(I.value)||He(y))return null;const f=parseFloat(I.value);return!isNaN(f)&&f>y?{max:{max:y,actual:I.value}}:null}}(I)}static required(I){return tt(I)}static requiredTrue(I){return function ze(y){return!0===y.value?null:{required:!0}}(I)}static email(I){return function _t(y){return He(y.value)||Se.test(y.value)?null:{email:!0}}(I)}static minLength(I){return function ct(y){return I=>He(I.value)||!z(I.value)?null:I.value.length<y?{minlength:{requiredLength:y,actualLength:I.value.length}}:null}(I)}static maxLength(I){return function we(y){return I=>z(I.value)&&I.value.length>y?{maxlength:{requiredLength:y,actualLength:I.value.length}}:null}(I)}static pattern(I){return Ae(I)}static nullValidator(I){return null}static compose(I){return Yt(I)}static composeAsync(I){return Gn(I)}}function tt(y){return He(y.value)?{required:!0}:null}function Ae(y){if(!y)return Ie;let I,f;return"string"==typeof y?(f="","^"!==y.charAt(0)&&(f+="^"),f+=y,"$"!==y.charAt(y.length-1)&&(f+="$"),I=new RegExp(f)):(f=y.toString(),I=y),T=>{if(He(T.value))return null;const q=T.value;return I.test(q)?null:{pattern:{requiredPattern:f,actualValue:q}}}}function Ie(y){return null}function at(y){return null!=y}function Ye(y){const I=(0,u.QGY)(y)?(0,W.D)(y):y;if(et&&!(0,u.CqO)(I)){let f="Expected async validator to return Promise or Observable.";throw"object"==typeof y&&(f+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,f)}return I}function Ke(y){let I={};return y.forEach(f=>{I=null!=f?{...I,...f}:I}),0===Object.keys(I).length?null:I}function Ue(y,I){return I.map(f=>f(y))}function Wt(y){return y.map(I=>function Bt(y){return!y.validate}(I)?I:f=>I.validate(f))}function Yt(y){if(!y)return null;const I=y.filter(at);return 0==I.length?null:function(f){return Ke(Ue(f,I))}}function Ct(y){return null!=y?Yt(Wt(y)):null}function Gn(y){if(!y)return null;const I=y.filter(at);return 0==I.length?null:function(f){return function ce(...y){const I=(0,ve.jO)(y),{args:f,keys:T}=(0,Oe.D)(y),q=new xe.y(Le=>{const{length:tn}=f;if(!tn)return void Le.complete();const gn=new Array(tn);let qn=tn,Sr=tn;for(let hi=0;hi<tn;hi++){let br=!1;(0,ke.Xf)(f[hi]).subscribe((0,Ne.x)(Le,cs=>{br||(br=!0,Sr--),gn[hi]=cs},()=>qn--,void 0,()=>{(!qn||!br)&&(Sr||Le.next(T?(0,me.n)(T,gn):gn),Le.complete())}))}});return I?q.pipe((0,je.Z)(I)):q}(Ue(f,I).map(Ye)).pipe((0,he.U)(Ke))}}function Kn(y){return null!=y?Gn(Wt(y)):null}function er(y,I){return null===y?[I]:Array.isArray(y)?[...y,I]:[y,I]}function kn(y){return y._rawValidators}function dn(y){return y._rawAsyncValidators}function hr(y){return y?Array.isArray(y)?y:[y]:[]}function Pr(y,I){return Array.isArray(y)?y.includes(I):y===I}function yr(y,I){const f=hr(I);return hr(y).forEach(q=>{Pr(f,q)||f.push(q)}),f}function Sn(y,I){return hr(I).filter(f=>!Pr(y,f))}class vr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(I){this._rawValidators=I||[],this._composedValidatorFn=Ct(this._rawValidators)}_setAsyncValidators(I){this._rawAsyncValidators=I||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(I){this._onDestroyCallbacks.push(I)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(I=>I()),this._onDestroyCallbacks=[]}reset(I){this.control&&this.control.reset(I)}hasError(I,f){return!!this.control&&this.control.hasError(I,f)}getError(I,f){return this.control?this.control.getError(I,f):null}}class nn extends vr{get formDirective(){return null}get path(){return null}}class ci extends vr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oi{constructor(I){this._cd=I}get isTouched(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.touched)}get isUntouched(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.untouched)}get isPristine(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.pristine)}get isDirty(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.dirty)}get isValid(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.valid)}get isInvalid(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.invalid)}get isPending(){var I,f;return!(null===(I=this._cd)||void 0===I||null===(f=I.control)||void 0===f||!f.pending)}get isSubmitted(){var I;return!(null===(I=this._cd)||void 0===I||!I.submitted)}}let dr=(()=>{class y extends oi{constructor(f){super(f)}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(ci,2))},y.\u0275dir=u.lG2({type:y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(f,T){2&f&&u.ekj("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)},features:[u.qOj]}),y})(),Rn=(()=>{class y extends oi{constructor(f){super(f)}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(nn,10))},y.\u0275dir=u.lG2({type:y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(f,T){2&f&&u.ekj("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)("ng-submitted",T.isSubmitted)},features:[u.qOj]}),y})();function Tr(y,I){return y?`with name: '${I}'`:`at index: ${I}`}const Ge=!1,jt="VALID",$t="INVALID",ge="PENDING",fe="DISABLED";function $e(y){return(Fe(y)?y.validators:y)||null}function dt(y,I){return(Fe(I)?I.asyncValidators:y)||null}function Fe(y){return null!=y&&!Array.isArray(y)&&"object"==typeof y}function Me(y,I,f){const T=y.controls;if(!(I?Object.keys(T):T).length)throw new u.vHH(1e3,Ge?function Or(y){return`\n    There are no form controls registered with this ${y?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(I):"");if(!T[f])throw new u.vHH(1001,Ge?function kt(y,I){return`Cannot find form control ${Tr(y,I)}`}(I,f):"")}function de(y,I,f){y._forEachChild((T,q)=>{if(void 0===f[q])throw new u.vHH(1002,Ge?function Be(y,I){return`Must supply a value for form control ${Tr(y,I)}`}(I,q):"")})}class ut{constructor(I,f){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(I),this._assignAsyncValidators(f)}get validator(){return this._composedValidatorFn}set validator(I){this._rawValidators=this._composedValidatorFn=I}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(I){this._rawAsyncValidators=this._composedAsyncValidatorFn=I}get parent(){return this._parent}get valid(){return this.status===jt}get invalid(){return this.status===$t}get pending(){return this.status==ge}get disabled(){return this.status===fe}get enabled(){return this.status!==fe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(I){this._assignValidators(I)}setAsyncValidators(I){this._assignAsyncValidators(I)}addValidators(I){this.setValidators(yr(I,this._rawValidators))}addAsyncValidators(I){this.setAsyncValidators(yr(I,this._rawAsyncValidators))}removeValidators(I){this.setValidators(Sn(I,this._rawValidators))}removeAsyncValidators(I){this.setAsyncValidators(Sn(I,this._rawAsyncValidators))}hasValidator(I){return Pr(this._rawValidators,I)}hasAsyncValidator(I){return Pr(this._rawAsyncValidators,I)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(I={}){this.touched=!0,this._parent&&!I.onlySelf&&this._parent.markAsTouched(I)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(I=>I.markAllAsTouched())}markAsUntouched(I={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(f=>{f.markAsUntouched({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}markAsDirty(I={}){this.pristine=!1,this._parent&&!I.onlySelf&&this._parent.markAsDirty(I)}markAsPristine(I={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(f=>{f.markAsPristine({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}markAsPending(I={}){this.status=ge,!1!==I.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!I.onlySelf&&this._parent.markAsPending(I)}disable(I={}){const f=this._parentMarkedDirty(I.onlySelf);this.status=fe,this.errors=null,this._forEachChild(T=>{T.disable({...I,onlySelf:!0})}),this._updateValue(),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...I,skipPristineCheck:f}),this._onDisabledChange.forEach(T=>T(!0))}enable(I={}){const f=this._parentMarkedDirty(I.onlySelf);this.status=jt,this._forEachChild(T=>{T.enable({...I,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent}),this._updateAncestors({...I,skipPristineCheck:f}),this._onDisabledChange.forEach(T=>T(!1))}_updateAncestors(I){this._parent&&!I.onlySelf&&(this._parent.updateValueAndValidity(I),I.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(I){this._parent=I}getRawValue(){return this.value}updateValueAndValidity(I={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jt||this.status===ge)&&this._runAsyncValidator(I.emitEvent)),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!I.onlySelf&&this._parent.updateValueAndValidity(I)}_updateTreeValidity(I={emitEvent:!0}){this._forEachChild(f=>f._updateTreeValidity(I)),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fe:jt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(I){if(this.asyncValidator){this.status=ge,this._hasOwnPendingAsyncValidator=!0;const f=Ye(this.asyncValidator(this));this._asyncValidationSubscription=f.subscribe(T=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(T,{emitEvent:I})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(I,f={}){this.errors=I,this._updateControlsErrors(!1!==f.emitEvent)}get(I){let f=I;return null==f||(Array.isArray(f)||(f=f.split(".")),0===f.length)?null:f.reduce((T,q)=>T&&T._find(q),this)}getError(I,f){const T=f?this.get(f):this;return T&&T.errors?T.errors[I]:null}hasError(I,f){return!!this.getError(I,f)}get root(){let I=this;for(;I._parent;)I=I._parent;return I}_updateControlsErrors(I){this.status=this._calculateStatus(),I&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(I)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?fe:this.errors?$t:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ge)?ge:this._anyControlsHaveStatus($t)?$t:jt}_anyControlsHaveStatus(I){return this._anyControls(f=>f.status===I)}_anyControlsDirty(){return this._anyControls(I=>I.dirty)}_anyControlsTouched(){return this._anyControls(I=>I.touched)}_updatePristine(I={}){this.pristine=!this._anyControlsDirty(),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}_updateTouched(I={}){this.touched=this._anyControlsTouched(),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}_registerOnCollectionChange(I){this._onCollectionChange=I}_setUpdateStrategy(I){Fe(I)&&null!=I.updateOn&&(this._updateOn=I.updateOn)}_parentMarkedDirty(I){return!I&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(I){return null}_assignValidators(I){this._rawValidators=Array.isArray(I)?I.slice():I,this._composedValidatorFn=function It(y){return Array.isArray(y)?Ct(y):y||null}(this._rawValidators)}_assignAsyncValidators(I){this._rawAsyncValidators=Array.isArray(I)?I.slice():I,this._composedAsyncValidatorFn=function un(y){return Array.isArray(y)?Kn(y):y||null}(this._rawAsyncValidators)}}class Mt extends ut{constructor(I,f,T){super($e(f),dt(T,f)),this.controls=I,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(I,f){return this.controls[I]?this.controls[I]:(this.controls[I]=f,f.setParent(this),f._registerOnCollectionChange(this._onCollectionChange),f)}addControl(I,f,T={}){this.registerControl(I,f),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}removeControl(I,f={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}setControl(I,f,T={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],f&&this.registerControl(I,f),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}contains(I){return this.controls.hasOwnProperty(I)&&this.controls[I].enabled}setValue(I,f={}){de(this,!0,I),Object.keys(I).forEach(T=>{Me(this,!0,T),this.controls[T].setValue(I[T],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(I,f={}){null!=I&&(Object.keys(I).forEach(T=>{const q=this.controls[T];q&&q.patchValue(I[T],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(I={},f={}){this._forEachChild((T,q)=>{T.reset(I[q],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this._reduceChildren({},(I,f,T)=>(I[T]=f.getRawValue(),I))}_syncPendingControls(){let I=this._reduceChildren(!1,(f,T)=>!!T._syncPendingControls()||f);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){Object.keys(this.controls).forEach(f=>{const T=this.controls[f];T&&I(T,f)})}_setUpControls(){this._forEachChild(I=>{I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(I){for(const[f,T]of Object.entries(this.controls))if(this.contains(f)&&I(T))return!0;return!1}_reduceValue(){return this._reduceChildren({},(f,T,q)=>((T.enabled||this.disabled)&&(f[q]=T.value),f))}_reduceChildren(I,f){let T=I;return this._forEachChild((q,Le)=>{T=f(T,q,Le)}),T}_allControlsDisabled(){for(const I of Object.keys(this.controls))if(this.controls[I].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(I){return this.controls.hasOwnProperty(I)?this.controls[I]:null}}class Nn extends Mt{}const di=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Rt}),Rt="always";function bt(y,I){return[...I.path,y]}function Kt(y,I,f=Rt){var T,q;Er(y,I),I.valueAccessor.writeValue(y.value),(y.disabled||"always"===f)&&(null===(T=(q=I.valueAccessor).setDisabledState)||void 0===T||T.call(q,y.disabled)),function pr(y,I){I.valueAccessor.registerOnChange(f=>{y._pendingValue=f,y._pendingChange=!0,y._pendingDirty=!0,"change"===y.updateOn&&jr(y,I)})}(y,I),function Xr(y,I){const f=(T,q)=>{I.valueAccessor.writeValue(T),q&&I.viewToModelUpdate(T)};y.registerOnChange(f),I._registerOnDestroy(()=>{y._unregisterOnChange(f)})}(y,I),function mr(y,I){I.valueAccessor.registerOnTouched(()=>{y._pendingTouched=!0,"blur"===y.updateOn&&y._pendingChange&&jr(y,I),"submit"!==y.updateOn&&y.markAsTouched()})}(y,I),function lr(y,I){if(I.valueAccessor.setDisabledState){const f=T=>{I.valueAccessor.setDisabledState(T)};y.registerOnDisabledChange(f),I._registerOnDestroy(()=>{y._unregisterOnDisabledChange(f)})}}(y,I)}function An(y,I,f=!0){const T=()=>{};I.valueAccessor&&(I.valueAccessor.registerOnChange(T),I.valueAccessor.registerOnTouched(T)),$n(y,I),y&&(I._invokeOnDestroyCallbacks(),y._registerOnCollectionChange(()=>{}))}function jn(y,I){y.forEach(f=>{f.registerOnValidatorChange&&f.registerOnValidatorChange(I)})}function Er(y,I){const f=kn(y);null!==I.validator?y.setValidators(er(f,I.validator)):"function"==typeof f&&y.setValidators([f]);const T=dn(y);null!==I.asyncValidator?y.setAsyncValidators(er(T,I.asyncValidator)):"function"==typeof T&&y.setAsyncValidators([T]);const q=()=>y.updateValueAndValidity();jn(I._rawValidators,q),jn(I._rawAsyncValidators,q)}function $n(y,I){let f=!1;if(null!==y){if(null!==I.validator){const q=kn(y);if(Array.isArray(q)&&q.length>0){const Le=q.filter(tn=>tn!==I.validator);Le.length!==q.length&&(f=!0,y.setValidators(Le))}}if(null!==I.asyncValidator){const q=dn(y);if(Array.isArray(q)&&q.length>0){const Le=q.filter(tn=>tn!==I.asyncValidator);Le.length!==q.length&&(f=!0,y.setAsyncValidators(Le))}}}const T=()=>{};return jn(I._rawValidators,T),jn(I._rawAsyncValidators,T),f}function jr(y,I){y._pendingDirty&&y.markAsDirty(),y.setValue(y._pendingValue,{emitModelToViewChange:!1}),I.viewToModelUpdate(y._pendingValue),y._pendingChange=!1}function Ni(y,I){Er(y,I)}function Ir(y,I){if(!y.hasOwnProperty("model"))return!1;const f=y.model;return!!f.isFirstChange()||!Object.is(I,f.currentValue)}function te(y,I){y._syncPendingControls(),I.forEach(f=>{const T=f.control;"submit"===T.updateOn&&T._pendingChange&&(f.viewToModelUpdate(T._pendingValue),T._pendingChange=!1)})}function pe(y,I){if(!I)return null;let f,T,q;return Array.isArray(I),I.forEach(Le=>{Le.constructor===pt?f=Le:function Zi(y){return Object.getPrototypeOf(y.constructor)===Ve}(Le)?T=Le:q=Le}),q||T||f||null}const Nt={provide:nn,useExisting:(0,u.Gpc)(()=>Je)},ae=(()=>Promise.resolve())();let Je=(()=>{class y extends nn{constructor(f,T,q){super(),this.callSetDisabledState=q,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Mt({},Ct(f),Kn(T))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(f){ae.then(()=>{const T=this._findContainer(f.path);f.control=T.registerControl(f.name,f.control),Kt(f.control,f,this.callSetDisabledState),f.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(f)})}getControl(f){return this.form.get(f.path)}removeControl(f){ae.then(()=>{const T=this._findContainer(f.path);T&&T.removeControl(f.name),this._directives.delete(f)})}addFormGroup(f){ae.then(()=>{const T=this._findContainer(f.path),q=new Mt({});Ni(q,f),T.registerControl(f.name,q),q.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(f){ae.then(()=>{const T=this._findContainer(f.path);T&&T.removeControl(f.name)})}getFormGroup(f){return this.form.get(f.path)}updateModel(f,T){ae.then(()=>{this.form.get(f.path).setValue(T)})}setValue(f){this.control.setValue(f)}onSubmit(f){var T;return this.submitted=!0,te(this.form,this._directives),this.ngSubmit.emit(f),"dialog"===(null==f||null===(T=f.target)||void 0===T?void 0:T.method)}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(f){return f.pop(),f.length?this.form.get(f):this.form}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(Pe,10),u.Y36(Te,10),u.Y36(di,8))},y.\u0275dir=u.lG2({type:y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(f,T){1&f&&u.NdJ("submit",function(Le){return T.onSubmit(Le)})("reset",function(){return T.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Nt]),u.qOj]}),y})();function vt(y,I){const f=y.indexOf(I);f>-1&&y.splice(f,1)}function Ft(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}const Vt=class extends ut{constructor(I=null,f,T){super($e(f),dt(T,f)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(I),this._setUpdateStrategy(f),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fe(f)&&(f.nonNullable||f.initialValueIsDefault)&&(this.defaultValue=Ft(I)?I.value:I)}setValue(I,f={}){this.value=this._pendingValue=I,this._onChange.length&&!1!==f.emitModelToViewChange&&this._onChange.forEach(T=>T(this.value,!1!==f.emitViewToModelChange)),this.updateValueAndValidity(f)}patchValue(I,f={}){this.setValue(I,f)}reset(I=this.defaultValue,f={}){this._applyFormState(I),this.markAsPristine(f),this.markAsUntouched(f),this.setValue(this.value,f),this._pendingChange=!1}_updateValue(){}_anyControls(I){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(I){this._onChange.push(I)}_unregisterOnChange(I){vt(this._onChange,I)}registerOnDisabledChange(I){this._onDisabledChange.push(I)}_unregisterOnDisabledChange(I){vt(this._onDisabledChange,I)}_forEachChild(I){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(I){Ft(I)?(this.value=this._pendingValue=I.value,I.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=I}},Xe={provide:ci,useExisting:(0,u.Gpc)(()=>Gt)},wt=(()=>Promise.resolve())();let Gt=(()=>{class y extends ci{constructor(f,T,q,Le,tn,gn){super(),this._changeDetectorRef=tn,this.callSetDisabledState=gn,this.control=new Vt,this._registered=!1,this.update=new u.vpe,this._parent=f,this._setValidators(T),this._setAsyncValidators(q),this.valueAccessor=pe(0,Le)}ngOnChanges(f){if(this._checkForErrors(),!this._registered||"name"in f){if(this._registered&&(this._checkName(),this.formDirective)){const T=f.name.previousValue;this.formDirective.removeControl({name:T,path:this._getPath(T)})}this._setUpControl()}"isDisabled"in f&&this._updateDisabled(f),Ir(f,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(f){wt.then(()=>{var T;this.control.setValue(f,{emitViewToModelChange:!1}),null===(T=this._changeDetectorRef)||void 0===T||T.markForCheck()})}_updateDisabled(f){const T=f.isDisabled.currentValue,q=0!==T&&(0,u.D6c)(T);wt.then(()=>{var Le;q&&!this.control.disabled?this.control.disable():!q&&this.control.disabled&&this.control.enable(),null===(Le=this._changeDetectorRef)||void 0===Le||Le.markForCheck()})}_getPath(f){return this._parent?bt(f,this._parent):[f]}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(nn,9),u.Y36(Pe,10),u.Y36(Te,10),u.Y36(lt,10),u.Y36(u.sBO,8),u.Y36(di,8))},y.\u0275dir=u.lG2({type:y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Xe]),u.qOj,u.TTD]}),y})(),an=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275dir=u.lG2({type:y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),y})(),Bs=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({}),y})();const ko=new u.OlP("NgModelWithFormControlWarning"),oo={provide:nn,useExisting:(0,u.Gpc)(()=>Eo)};let Eo=(()=>{class y extends nn{constructor(f,T,q){super(),this.callSetDisabledState=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(f),this._setAsyncValidators(T)}ngOnChanges(f){this._checkFormPresent(),f.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($n(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(f){const T=this.form.get(f.path);return Kt(T,f,this.callSetDisabledState),T.updateValueAndValidity({emitEvent:!1}),this.directives.push(f),T}getControl(f){return this.form.get(f.path)}removeControl(f){An(f.control||null,f,!1),function Ze(y,I){const f=y.indexOf(I);f>-1&&y.splice(f,1)}(this.directives,f)}addFormGroup(f){this._setUpFormContainer(f)}removeFormGroup(f){this._cleanUpFormContainer(f)}getFormGroup(f){return this.form.get(f.path)}addFormArray(f){this._setUpFormContainer(f)}removeFormArray(f){this._cleanUpFormContainer(f)}getFormArray(f){return this.form.get(f.path)}updateModel(f,T){this.form.get(f.path).setValue(T)}onSubmit(f){var T;return this.submitted=!0,te(this.form,this.directives),this.ngSubmit.emit(f),"dialog"===(null==f||null===(T=f.target)||void 0===T?void 0:T.method)}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_updateDomValue(){this.directives.forEach(f=>{const T=f.control,q=this.form.get(f.path);T!==q&&(An(T||null,f),(y=>y instanceof Vt)(q)&&(Kt(q,f,this.callSetDisabledState),f.control=q))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(f){const T=this.form.get(f.path);Ni(T,f),T.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(f){if(this.form){const T=this.form.get(f.path);T&&function gs(y,I){return $n(y,I)}(T,f)&&T.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Er(this.form,this),this._oldForm&&$n(this._oldForm,this)}_checkFormPresent(){}}return y.\u0275fac=function(f){return new(f||y)(u.Y36(Pe,10),u.Y36(Te,10),u.Y36(di,8))},y.\u0275dir=u.lG2({type:y,selectors:[["","formGroup",""]],hostBindings:function(f,T){1&f&&u.NdJ("submit",function(Le){return T.onSubmit(Le)})("reset",function(){return T.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([oo]),u.qOj,u.TTD]}),y})();const Ha={provide:ci,useExisting:(0,u.Gpc)(()=>wo)};let wo=(()=>{class y extends ci{set isDisabled(f){}constructor(f,T,q,Le,tn){super(),this._ngModelWarningConfig=tn,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=f,this._setValidators(T),this._setAsyncValidators(q),this.valueAccessor=pe(0,Le)}ngOnChanges(f){this._added||this._setUpControl(),Ir(f,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}get path(){return bt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return y._ngModelWarningSentOnce=!1,y.\u0275fac=function(f){return new(f||y)(u.Y36(nn,13),u.Y36(Pe,10),u.Y36(Te,10),u.Y36(lt,10),u.Y36(ko,8))},y.\u0275dir=u.lG2({type:y,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Ha]),u.qOj,u.TTD]}),y})(),bs=(()=>{class y{constructor(){this._validator=Ie}ngOnChanges(f){if(this.inputName in f){const T=this.normalizeInput(f[this.inputName].currentValue);this._enabled=this.enabled(T),this._validator=this._enabled?this.createValidator(T):Ie,this._onChange&&this._onChange()}}validate(f){return this._validator(f)}registerOnValidatorChange(f){this._onChange=f}enabled(f){return null!=f}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275dir=u.lG2({type:y,features:[u.TTD]}),y})();const co={provide:Pe,useExisting:(0,u.Gpc)(()=>Ts),multi:!0};let Ts=(()=>{class y extends bs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=f=>tt}enabled(f){return f}}return y.\u0275fac=function(){let I;return function(T){return(I||(I=u.n5z(y)))(T||y)}}(),y.\u0275dir=u.lG2({type:y,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(f,T){2&f&&u.uIk("required",T._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([co]),u.qOj]}),y})();const ho={provide:Pe,useExisting:(0,u.Gpc)(()=>$i),multi:!0};let $i=(()=>{class y extends bs{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=f=>f,this.createValidator=f=>Ae(f)}}return y.\u0275fac=function(){let I;return function(T){return(I||(I=u.n5z(y)))(T||y)}}(),y.\u0275dir=u.lG2({type:y,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(f,T){2&f&&u.uIk("pattern",T._enabled?T.pattern:null)},inputs:{pattern:"pattern"},features:[u._Bn([ho]),u.qOj]}),y})(),ls=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({imports:[Bs]}),y})();class ua extends ut{constructor(I,f,T){super($e(f),dt(T,f)),this.controls=I,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(I){return this.controls[this._adjustIndex(I)]}push(I,f={}){this.controls.push(I),this._registerControl(I),this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}insert(I,f,T={}){this.controls.splice(I,0,f),this._registerControl(f),this.updateValueAndValidity({emitEvent:T.emitEvent})}removeAt(I,f={}){let T=this._adjustIndex(I);T<0&&(T=0),this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),this.controls.splice(T,1),this.updateValueAndValidity({emitEvent:f.emitEvent})}setControl(I,f,T={}){let q=this._adjustIndex(I);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),f&&(this.controls.splice(q,0,f),this._registerControl(f)),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(I,f={}){de(this,!1,I),I.forEach((T,q)=>{Me(this,!1,q),this.at(q).setValue(T,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(I,f={}){null!=I&&(I.forEach((T,q)=>{this.at(q)&&this.at(q).patchValue(T,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(I=[],f={}){this._forEachChild((T,q)=>{T.reset(I[q],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this.controls.map(I=>I.getRawValue())}clear(I={}){this.controls.length<1||(this._forEachChild(f=>f._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:I.emitEvent}))}_adjustIndex(I){return I<0?I+this.length:I}_syncPendingControls(){let I=this.controls.reduce((f,T)=>!!T._syncPendingControls()||f,!1);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){this.controls.forEach((f,T)=>{I(f,T)})}_updateValue(){this.value=this.controls.filter(I=>I.enabled||this.disabled).map(I=>I.value)}_anyControls(I){return this.controls.some(f=>f.enabled&&I(f))}_setUpControls(){this._forEachChild(I=>this._registerControl(I))}_allControlsDisabled(){for(const I of this.controls)if(I.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(I){I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)}_find(I){var f;return null!==(f=this.at(I))&&void 0!==f?f:null}}function Co(y){return!!y&&(void 0!==y.asyncValidators||void 0!==y.validators||void 0!==y.updateOn)}let ca=(()=>{class y{constructor(){this.useNonNullable=!1}get nonNullable(){const f=new y;return f.useNonNullable=!0,f}group(f,T=null){const q=this._reduceControls(f);let Le={};return Co(T)?Le=T:null!==T&&(Le.validators=T.validator,Le.asyncValidators=T.asyncValidator),new Mt(q,Le)}record(f,T=null){const q=this._reduceControls(f);return new Nn(q,T)}control(f,T,q){let Le={};return this.useNonNullable?(Co(T)?Le=T:(Le.validators=T,Le.asyncValidators=q),new Vt(f,{...Le,nonNullable:!0})):new Vt(f,T,q)}array(f,T,q){const Le=f.map(tn=>this._createControl(tn));return new ua(Le,T,q)}_reduceControls(f){const T={};return Object.keys(f).forEach(q=>{T[q]=this._createControl(f[q])}),T}_createControl(f){return f instanceof Vt||f instanceof ut?f:Array.isArray(f)?this.control(f[0],f.length>1?f[1]:null,f.length>2?f[2]:null):this.control(f)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=u.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),ji=(()=>{class y{static withConfig(f){var T;return{ngModule:y,providers:[{provide:di,useValue:null!==(T=f.callSetDisabledState)&&void 0!==T?T:Rt}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({imports:[ls]}),y})(),Us=(()=>{class y{static withConfig(f){var T,q;return{ngModule:y,providers:[{provide:ko,useValue:null!==(T=f.warnOnNgModelWithFormControl)&&void 0!==T?T:"always"},{provide:di,useValue:null!==(q=f.callSetDisabledState)&&void 0!==q?q:Rt}]}}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({imports:[ls]}),y})()},1481:(yn,Et,V)=>{"use strict";V.d(Et,{Dx:()=>Rn,b2:()=>ci,q6:()=>yr});var u=V(6895),Q=V(4650);class W extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends W{static makeCurrent(){(0,u.HT)(new xe)}onAndCancel(Me,de,ut){return Me.addEventListener(de,ut,!1),()=>{Me.removeEventListener(de,ut,!1)}}dispatchEvent(Me,de){Me.dispatchEvent(de)}remove(Me){Me.parentNode&&Me.parentNode.removeChild(Me)}createElement(Me,de){return(de=de||this.getDefaultDocument()).createElement(Me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Me){return Me.nodeType===Node.ELEMENT_NODE}isShadowRoot(Me){return Me instanceof DocumentFragment}getGlobalEventTarget(Me,de){return"window"===de?window:"document"===de?Me:"body"===de?Me.body:null}getBaseHref(Me){const de=function ke(){return Oe=Oe||document.querySelector("base"),Oe?Oe.getAttribute("href"):null}();return null==de?null:function Ne(Fe){ve=ve||document.createElement("a"),ve.setAttribute("href",Fe);const Me=ve.pathname;return"/"===Me.charAt(0)?Me:`/${Me}`}(de)}resetBaseElement(){Oe=null}getUserAgent(){return window.navigator.userAgent}getCookie(Me){return(0,u.Mx)(document.cookie,Me)}}let ve,Oe=null;const je=new Q.OlP("TRANSITION_ID"),ce=[{provide:Q.ip1,useFactory:function me(Fe,Me,de){return()=>{de.get(Q.CZH).donePromise.then(()=>{const ut=(0,u.q)(),Mt=Me.querySelectorAll(`style[ng-transition="${Fe}"]`);for(let Xt=0;Xt<Mt.length;Xt++)ut.remove(Mt[Xt])})}},deps:[je,u.K0,Q.zs3],multi:!0}];let Re=(()=>{class Fe{build(){return new XMLHttpRequest}}return Fe.\u0275fac=function(de){return new(de||Fe)},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Ve=new Q.OlP("EventManagerPlugins");let lt=(()=>{class Fe{constructor(de,ut){this._zone=ut,this._eventNameToPlugin=new Map,de.forEach(Mt=>{Mt.manager=this}),this._plugins=de.slice().reverse()}addEventListener(de,ut,Mt){return this._findPluginFor(ut).addEventListener(de,ut,Mt)}addGlobalEventListener(de,ut,Mt){return this._findPluginFor(ut).addGlobalEventListener(de,ut,Mt)}getZone(){return this._zone}_findPluginFor(de){const ut=this._eventNameToPlugin.get(de);if(ut)return ut;const Mt=this._plugins;for(let Xt=0;Xt<Mt.length;Xt++){const vn=Mt[Xt];if(vn.supports(de))return this._eventNameToPlugin.set(de,vn),vn}throw new Error(`No event manager plugin found for event ${de}`)}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(Ve),Q.LFG(Q.R0b))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class At{constructor(Me){this._doc=Me}addGlobalEventListener(Me,de,ut){const Mt=(0,u.q)().getGlobalEventTarget(this._doc,Me);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${de}`);return this.addEventListener(Mt,de,ut)}}let De=(()=>{class Fe{constructor(){this.usageCount=new Map}addStyles(de){for(const ut of de)1===this.changeUsageCount(ut,1)&&this.onStyleAdded(ut)}removeStyles(de){for(const ut of de)0===this.changeUsageCount(ut,-1)&&this.onStyleRemoved(ut)}onStyleRemoved(de){}onStyleAdded(de){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(de,ut){var Mt;const Xt=this.usageCount;let vn=null!==(Mt=Xt.get(de))&&void 0!==Mt?Mt:0;return vn+=ut,vn>0?Xt.set(de,vn):Xt.delete(de),vn}ngOnDestroy(){for(const de of this.getAllStyles())this.onStyleRemoved(de);this.usageCount.clear()}}return Fe.\u0275fac=function(de){return new(de||Fe)},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})(),ye=(()=>{class Fe extends De{constructor(de){super(),this.doc=de,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(de){for(const ut of this.hostNodes)this.addStyleToHost(ut,de)}onStyleRemoved(de){const ut=this.styleRef,Mt=ut.get(de);null==Mt||Mt.forEach(Xt=>Xt.remove()),ut.delete(de)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(de){this.hostNodes.add(de);for(const ut of this.getAllStyles())this.addStyleToHost(de,ut)}removeHost(de){this.hostNodes.delete(de)}addStyleToHost(de,ut){const Mt=this.doc.createElement("style");Mt.textContent=ut,de.appendChild(Mt);const Xt=this.styleRef.get(ut);Xt?Xt.push(Mt):this.styleRef.set(ut,[Mt])}resetHostNodes(){const de=this.hostNodes;de.clear(),de.add(this.doc.head)}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(u.K0))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Te=new Q.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qe(Fe,Me){return Me.flat(100).map(de=>de.replace(rt,Fe))}function nt(Fe){return Me=>{if("__ngUnwrap__"===Me)return Fe;!1===Fe(Me)&&(Me.preventDefault(),Me.returnValue=!1)}}let tt=(()=>{class Fe{constructor(de,ut,Mt,Xt){this.eventManager=de,this.sharedStylesHost=ut,this.appId=Mt,this.removeStylesOnCompDestory=Xt,this.rendererByCompId=new Map,this.defaultRenderer=new ze(de)}createRenderer(de,ut){if(!de||!ut)return this.defaultRenderer;const Mt=this.getOrCreateRenderer(de,ut);return Mt instanceof at?Mt.applyToHost(de):Mt instanceof Ie&&Mt.applyStyles(),Mt}getOrCreateRenderer(de,ut){const Mt=this.rendererByCompId;let Xt=Mt.get(ut.id);if(!Xt){const vn=this.eventManager,Nn=this.sharedStylesHost,rr=this.removeStylesOnCompDestory;switch(ut.encapsulation){case Q.ifc.Emulated:Xt=new at(vn,Nn,ut,this.appId,rr);break;case Q.ifc.ShadowDom:return new Ae(vn,Nn,de,ut);default:Xt=new Ie(vn,Nn,ut,rr)}Xt.onDestroy=()=>Mt.delete(ut.id),Mt.set(ut.id,Xt)}return Xt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(lt),Q.LFG(ye),Q.LFG(Q.AFp),Q.LFG(Te))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class ze{constructor(Me){this.eventManager=Me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Me,de){return de?document.createElementNS(ue[de]||de,Me):document.createElement(Me)}createComment(Me){return document.createComment(Me)}createText(Me){return document.createTextNode(Me)}appendChild(Me,de){(we(Me)?Me.content:Me).appendChild(de)}insertBefore(Me,de,ut){Me&&(we(Me)?Me.content:Me).insertBefore(de,ut)}removeChild(Me,de){Me&&Me.removeChild(de)}selectRootElement(Me,de){let ut="string"==typeof Me?document.querySelector(Me):Me;if(!ut)throw new Error(`The selector "${Me}" did not match any elements`);return de||(ut.textContent=""),ut}parentNode(Me){return Me.parentNode}nextSibling(Me){return Me.nextSibling}setAttribute(Me,de,ut,Mt){if(Mt){de=Mt+":"+de;const Xt=ue[Mt];Xt?Me.setAttributeNS(Xt,de,ut):Me.setAttribute(de,ut)}else Me.setAttribute(de,ut)}removeAttribute(Me,de,ut){if(ut){const Mt=ue[ut];Mt?Me.removeAttributeNS(Mt,de):Me.removeAttribute(`${ut}:${de}`)}else Me.removeAttribute(de)}addClass(Me,de){Me.classList.add(de)}removeClass(Me,de){Me.classList.remove(de)}setStyle(Me,de,ut,Mt){Mt&(Q.JOm.DashCase|Q.JOm.Important)?Me.style.setProperty(de,ut,Mt&Q.JOm.Important?"important":""):Me.style[de]=ut}removeStyle(Me,de,ut){ut&Q.JOm.DashCase?Me.style.removeProperty(de):Me.style[de]=""}setProperty(Me,de,ut){Me[de]=ut}setValue(Me,de){Me.nodeValue=de}listen(Me,de,ut){return"string"==typeof Me?this.eventManager.addGlobalEventListener(Me,de,nt(ut)):this.eventManager.addEventListener(Me,de,nt(ut))}}function we(Fe){return"TEMPLATE"===Fe.tagName&&void 0!==Fe.content}class Ae extends ze{constructor(Me,de,ut,Mt){super(Me),this.sharedStylesHost=de,this.hostEl=ut,this.shadowRoot=ut.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=qe(Mt.id,Mt.styles);for(const vn of Xt){const Nn=document.createElement("style");Nn.textContent=vn,this.shadowRoot.appendChild(Nn)}}nodeOrShadowRoot(Me){return Me===this.hostEl?this.shadowRoot:Me}appendChild(Me,de){return super.appendChild(this.nodeOrShadowRoot(Me),de)}insertBefore(Me,de,ut){return super.insertBefore(this.nodeOrShadowRoot(Me),de,ut)}removeChild(Me,de){return super.removeChild(this.nodeOrShadowRoot(Me),de)}parentNode(Me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Me)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ie extends ze{constructor(Me,de,ut,Mt,Xt=ut.id){super(Me),this.sharedStylesHost=de,this.removeStylesOnCompDestory=Mt,this.rendererUsageCount=0,this.styles=qe(Xt,ut.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Me;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Me=this.onDestroy)||void 0===Me||Me.call(this))}}class at extends Ie{constructor(Me,de,ut,Mt,Xt){const vn=Mt+"-"+ut.id;super(Me,de,ut,Xt,vn),this.contentAttr=function Se(Fe){return"_ngcontent-%COMP%".replace(rt,Fe)}(vn),this.hostAttr=function it(Fe){return"_nghost-%COMP%".replace(rt,Fe)}(vn)}applyToHost(Me){this.applyStyles(),this.setAttribute(Me,this.hostAttr,"")}createElement(Me,de){const ut=super.createElement(Me,de);return super.setAttribute(ut,this.contentAttr,""),ut}}let Ye=(()=>{class Fe extends At{constructor(de){super(de)}supports(de){return!0}addEventListener(de,ut,Mt){return de.addEventListener(ut,Mt,!1),()=>this.removeEventListener(de,ut,Mt)}removeEventListener(de,ut,Mt){return de.removeEventListener(ut,Mt)}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(u.K0))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Ke=["alt","control","meta","shift"],Ue={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bt={alt:Fe=>Fe.altKey,control:Fe=>Fe.ctrlKey,meta:Fe=>Fe.metaKey,shift:Fe=>Fe.shiftKey};let Wt=(()=>{class Fe extends At{constructor(de){super(de)}supports(de){return null!=Fe.parseEventName(de)}addEventListener(de,ut,Mt){const Xt=Fe.parseEventName(ut),vn=Fe.eventCallback(Xt.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(de,Xt.domEventName,vn))}static parseEventName(de){const ut=de.toLowerCase().split("."),Mt=ut.shift();if(0===ut.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const Xt=Fe._normalizeKey(ut.pop());let vn="",Nn=ut.indexOf("code");if(Nn>-1&&(ut.splice(Nn,1),vn="code."),Ke.forEach(di=>{const Rt=ut.indexOf(di);Rt>-1&&(ut.splice(Rt,1),vn+=di+".")}),vn+=Xt,0!=ut.length||0===Xt.length)return null;const rr={};return rr.domEventName=Mt,rr.fullKey=vn,rr}static matchEventFullKeyCode(de,ut){let Mt=Ue[de.key]||de.key,Xt="";return ut.indexOf("code.")>-1&&(Mt=de.code,Xt="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Ke.forEach(vn=>{vn!==Mt&&(0,Bt[vn])(de)&&(Xt+=vn+".")}),Xt+=Mt,Xt===ut)}static eventCallback(de,ut,Mt){return Xt=>{Fe.matchEventFullKeyCode(Xt,de)&&Mt.runGuarded(()=>ut(Xt))}}static _normalizeKey(de){return"esc"===de?"escape":de}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(u.K0))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const yr=(0,Q.eFA)(Q._c5,"browser",[{provide:Q.Lbi,useValue:u.bD},{provide:Q.g9A,useValue:function kn(){xe.makeCurrent()},multi:!0},{provide:u.K0,useFactory:function hr(){return(0,Q.RDi)(document),document},deps:[]}]),Sn=new Q.OlP(""),vr=[{provide:Q.rWj,useClass:class he{addToWindow(Me){Q.dqk.getAngularTestability=(ut,Mt=!0)=>{const Xt=Me.findTestabilityInTree(ut,Mt);if(null==Xt)throw new Error("Could not find testability for element.");return Xt},Q.dqk.getAllAngularTestabilities=()=>Me.getAllTestabilities(),Q.dqk.getAllAngularRootElements=()=>Me.getAllRootElements(),Q.dqk.frameworkStabilizers||(Q.dqk.frameworkStabilizers=[]),Q.dqk.frameworkStabilizers.push(ut=>{const Mt=Q.dqk.getAllAngularTestabilities();let Xt=Mt.length,vn=!1;const Nn=function(rr){vn=vn||rr,Xt--,0==Xt&&ut(vn)};Mt.forEach(function(rr){rr.whenStable(Nn)})})}findTestabilityInTree(Me,de,ut){if(null==de)return null;const Mt=Me.getTestability(de);return null!=Mt?Mt:ut?(0,u.q)().isShadowRoot(de)?this.findTestabilityInTree(Me,de.host,!0):this.findTestabilityInTree(Me,de.parentElement,!0):null}},deps:[]},{provide:Q.lri,useClass:Q.dDg,deps:[Q.R0b,Q.eoX,Q.rWj]},{provide:Q.dDg,useClass:Q.dDg,deps:[Q.R0b,Q.eoX,Q.rWj]}],nn=[{provide:Q.zSh,useValue:"root"},{provide:Q.qLn,useFactory:function dn(){return new Q.qLn},deps:[]},{provide:Ve,useClass:Ye,multi:!0,deps:[u.K0,Q.R0b,Q.Lbi]},{provide:Ve,useClass:Wt,multi:!0,deps:[u.K0]},{provide:tt,useClass:tt,deps:[lt,ye,Q.AFp,Te]},{provide:Q.FYo,useExisting:tt},{provide:De,useExisting:ye},{provide:ye,useClass:ye,deps:[u.K0]},{provide:lt,useClass:lt,deps:[Ve,Q.R0b]},{provide:u.JF,useClass:Re,deps:[]},[]];let ci=(()=>{class Fe{constructor(de){}static withServerTransition(de){return{ngModule:Fe,providers:[{provide:Q.AFp,useValue:de.appId},{provide:je,useExisting:Q.AFp},ce]}}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(Sn,12))},Fe.\u0275mod=Q.oAB({type:Fe}),Fe.\u0275inj=Q.cJS({providers:[...nn,...vr],imports:[u.ez,Q.hGG]}),Fe})(),Rn=(()=>{class Fe{constructor(de){this._doc=de}getTitle(){return this._doc.title}setTitle(de){this._doc.title=de||""}}return Fe.\u0275fac=function(de){return new(de||Fe)(Q.LFG(u.K0))},Fe.\u0275prov=Q.Yz7({token:Fe,factory:function(de){let ut=null;return ut=de?new de:function dr(){return new Rn((0,Q.LFG)(u.K0))}(),ut},providedIn:"root"}),Fe})();typeof window<"u"&&window},1194:(yn,Et,V)=>{"use strict";V.d(Et,{gz:()=>Cs,y6:()=>No,OD:()=>Vt,eC:()=>dn,wm:()=>qa,wN:()=>qi,F0:()=>Zt,rH:()=>So,Bz:()=>Oa,Hx:()=>Be});var u=V(4650),Q=V(8996),W=V(9646),xe=V(1135),Oe=V(6805),ke=V(9751),ve=V(4742),Ne=V(4671),je=V(3268),me=V(7669),ce=V(1810),he=V(5403),Re=V(9672);function Ve(...A){const R=(0,me.yG)(A),b=(0,me.jO)(A),{args:P,keys:j}=(0,ve.D)(A);if(0===P.length)return(0,Q.D)([],R);const ee=new ke.y(function lt(A,R,b=Ne.y){return P=>{At(R,()=>{const{length:j}=A,ee=new Array(j);let ie=j,st=j;for(let xt=0;xt<j;xt++)At(R,()=>{const _n=(0,Q.D)(A[xt],R);let Hn=!1;_n.subscribe((0,he.x)(P,In=>{ee[xt]=In,Hn||(Hn=!0,st--),st||P.next(b(ee.slice()))},()=>{--ie||P.complete()}))},P)},P)}}(P,R,j?ie=>(0,ce.n)(j,ie):Ne.y));return b?ee.pipe((0,je.Z)(b)):ee}function At(A,R,b){A?(0,Re.f)(b,A,R):R()}var De=V(7272),ye=V(8421);function ue(A){return new ke.y(R=>{(0,ye.Xf)(A()).subscribe(R)})}var rt=V(9635),pt=V(576);function et(A,R){const b=(0,pt.m)(A)?A:()=>A,P=j=>j.error(b());return new ke.y(R?j=>R.schedule(P,0,j):P)}var He=V(515),z=V(727),Pe=V(4482);function Te(){return(0,Pe.e)((A,R)=>{let b=null;A._refCount++;const P=(0,he.x)(R,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const j=A._connection,ee=b;b=null,j&&(!ee||j===ee)&&j.unsubscribe(),R.unsubscribe()});A.subscribe(P),P.closed||(b=A.connect())})}class Se extends ke.y{constructor(R,b){super(),this.source=R,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Pe.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,null==R||R.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new z.w0;const b=this.getSubject();R.add(this.source.subscribe((0,he.x)(b,void 0,()=>{this._teardown(),b.complete()},P=>{this._teardown(),b.error(P)},()=>this._teardown()))),R.closed&&(this._connection=null,R=z.w0.EMPTY)}return R}refCount(){return Te()(this)}}var it=V(7579),qe=V(6895),nt=V(4004),tt=V(3900),ze=V(5698),_t=V(8675),ct=V(9300),we=V(5577),Ae=V(590),Ie=V(4351),at=V(8505);function Ye(A){return(0,Pe.e)((R,b)=>{let ee,P=null,j=!1;P=R.subscribe((0,he.x)(b,void 0,void 0,ie=>{ee=(0,ye.Xf)(A(ie,Ye(A)(R))),P?(P.unsubscribe(),P=null,ee.subscribe(b)):j=!0})),j&&(P.unsubscribe(),P=null,ee.subscribe(b))})}var Ke=V(5026);function Ue(A){return A<=0?()=>He.E:(0,Pe.e)((R,b)=>{let P=[];R.subscribe((0,he.x)(b,j=>{P.push(j),A<P.length&&P.shift()},()=>{for(const j of P)b.next(j);b.complete()},void 0,()=>{P=null}))})}var Bt=V(8068),Wt=V(6590);function Yt(A,R){const b=arguments.length>=2;return P=>P.pipe(A?(0,ct.h)((j,ee)=>A(j,ee,P)):Ne.y,Ue(1),b?(0,Wt.d)(R):(0,Bt.T)(()=>new Oe.K))}function Kn(A){return(0,Pe.e)((R,b)=>{try{R.subscribe(b)}finally{b.add(A)}})}var er=V(8189),kn=V(1481);const dn="primary",hr=Symbol("RouteTitle");class Pr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b[0]:b}return null}getAll(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function yr(A){return new Pr(A)}function Sn(A,R,b){const P=b.path.split("/");if(P.length>A.length||"full"===b.pathMatch&&(R.hasChildren()||P.length<A.length))return null;const j={};for(let ee=0;ee<P.length;ee++){const ie=P[ee],st=A[ee];if(ie.startsWith(":"))j[ie.substring(1)]=st;else if(ie!==st.path)return null}return{consumed:A.slice(0,P.length),posParams:j}}function nn(A,R){const b=A?Object.keys(A):void 0,P=R?Object.keys(R):void 0;if(!b||!P||b.length!=P.length)return!1;let j;for(let ee=0;ee<b.length;ee++)if(j=b[ee],!ci(A[j],R[j]))return!1;return!0}function ci(A,R){if(Array.isArray(A)&&Array.isArray(R)){if(A.length!==R.length)return!1;const b=[...A].sort(),P=[...R].sort();return b.every((j,ee)=>P[ee]===j)}return A===R}function oi(A){return Array.prototype.concat.apply([],A)}function Nr(A){return A.length>0?A[A.length-1]:null}function dr(A,R){for(const b in A)A.hasOwnProperty(b)&&R(A[b],b)}function Rn(A){return(0,u.CqO)(A)?A:(0,u.QGY)(A)?(0,Q.D)(Promise.resolve(A)):(0,W.of)(A)}const mn=!1,cn={exact:function _r(A,R,b){if(!Or(A.segments,R.segments)||!Di(A.segments,R.segments,b)||A.numberOfChildren!==R.numberOfChildren)return!1;for(const P in R.children)if(!A.children[P]||!_r(A.children[P],R.children[P],b))return!1;return!0},subset:ii},Vn={exact:function Jt(A,R){return nn(A,R)},subset:function ei(A,R){return Object.keys(R).length<=Object.keys(A).length&&Object.keys(R).every(b=>ci(A[b],R[b]))},ignored:()=>!0};function Vr(A,R,b){return cn[b.paths](A.root,R.root,b.matrixParams)&&Vn[b.queryParams](A.queryParams,R.queryParams)&&!("exact"===b.fragment&&A.fragment!==R.fragment)}function ii(A,R,b){return Fr(A,R,R.segments,b)}function Fr(A,R,b,P){if(A.segments.length>b.length){const j=A.segments.slice(0,b.length);return!(!Or(j,b)||R.hasChildren()||!Di(j,b,P))}if(A.segments.length===b.length){if(!Or(A.segments,b)||!Di(A.segments,b,P))return!1;for(const j in R.children)if(!A.children[j]||!ii(A.children[j],R.children[j],P))return!1;return!0}{const j=b.slice(0,A.segments.length),ee=b.slice(A.segments.length);return!!(Or(A.segments,j)&&Di(A.segments,j,P)&&A.children[dn])&&Fr(A.children[dn],R,ee,P)}}function Di(A,R,b){return R.every((P,j)=>Vn[b](A[j].parameters,P.parameters))}class or{constructor(R=new Yn([],{}),b={},P=null){this.root=R,this.queryParams=b,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return jt.serialize(this)}}class Yn{constructor(R,b){this.segments=R,this.children=b,this.parent=null,dr(b,(P,j)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $t(this)}}class ai{constructor(R,b){this.path=R,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=yr(this.parameters)),this._parameterMap}toString(){return Me(this)}}function Or(A,R){return A.length===R.length&&A.every((b,P)=>b.path===R[P].path)}let Be=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return new Ge},providedIn:"root"}),A})();class Ge{parse(R){const b=new Rt(R);return new or(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(R){const b=`/${ge(R.root,!0)}`,P=function ut(A){const R=Object.keys(A).map(b=>{const P=A[b];return Array.isArray(P)?P.map(j=>`${$e(b)}=${$e(j)}`).join("&"):`${$e(b)}=${$e(P)}`}).filter(b=>!!b);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${b}${P}${"string"==typeof R.fragment?`#${function It(A){return encodeURI(A)}(R.fragment)}`:""}`}}const jt=new Ge;function $t(A){return A.segments.map(R=>Me(R)).join("/")}function ge(A,R){if(!A.hasChildren())return $t(A);if(R){const b=A.children[dn]?ge(A.children[dn],!1):"",P=[];return dr(A.children,(j,ee)=>{ee!==dn&&P.push(`${ee}:${ge(j,!1)}`)}),P.length>0?`${b}(${P.join("//")})`:b}{const b=function kt(A,R){let b=[];return dr(A.children,(P,j)=>{j===dn&&(b=b.concat(R(P,j)))}),dr(A.children,(P,j)=>{j!==dn&&(b=b.concat(R(P,j)))}),b}(A,(P,j)=>j===dn?[ge(A.children[dn],!1)]:[`${j}:${ge(P,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[dn]?`${$t(A)}/${b[0]}`:`${$t(A)}/(${b.join("//")})`}}function fe(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $e(A){return fe(A).replace(/%3B/gi,";")}function dt(A){return fe(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function un(A){return decodeURIComponent(A)}function Fe(A){return un(A.replace(/\+/g,"%20"))}function Me(A){return`${dt(A.path)}${function de(A){return Object.keys(A).map(R=>`;${dt(R)}=${dt(A[R])}`).join("")}(A.parameters)}`}const Mt=/^[^\/()?;=#]+/;function Xt(A){const R=A.match(Mt);return R?R[0]:""}const vn=/^[^=?&#]+/,rr=/^[^&#]+/;class Rt{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(R.length>0||Object.keys(b).length>0)&&(P[dn]=new Yn(R,b)),P}parseSegment(){const R=Xt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new u.vHH(4009,mn);return this.capture(R),new ai(un(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const b=Xt(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const j=Xt(this.remaining);j&&(P=j,this.capture(P))}R[un(b)]=un(P)}parseQueryParam(R){const b=function Nn(A){const R=A.match(vn);return R?R[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const ie=function di(A){const R=A.match(rr);return R?R[0]:""}(this.remaining);ie&&(P=ie,this.capture(P))}const j=Fe(b),ee=Fe(P);if(R.hasOwnProperty(j)){let ie=R[j];Array.isArray(ie)||(ie=[ie],R[j]=ie),ie.push(ee)}else R[j]=ee}parseParens(R){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Xt(this.remaining),j=this.remaining[P.length];if("/"!==j&&")"!==j&&";"!==j)throw new u.vHH(4010,mn);let ee;P.indexOf(":")>-1?(ee=P.slice(0,P.indexOf(":")),this.capture(ee),this.capture(":")):R&&(ee=dn);const ie=this.parseChildren();b[ee]=1===Object.keys(ie).length?ie[dn]:new Yn([],ie),this.consumeOptional("//")}return b}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new u.vHH(4011,mn)}}function bt(A){return A.segments.length>0?new Yn([],{[dn]:A}):A}function Kt(A){const R={};for(const P of Object.keys(A.children)){const ee=Kt(A.children[P]);(ee.segments.length>0||ee.hasChildren())&&(R[P]=ee)}return function An(A){if(1===A.numberOfChildren&&A.children[dn]){const R=A.children[dn];return new Yn(A.segments.concat(R.segments),R.children)}return A}(new Yn(A.segments,R))}function jn(A){return A instanceof or}const lr=!1;function mr(A,R,b,P,j){var ee;if(0===b.length)return Ni(R.root,R.root,R.root,P,j);const ie=function Wr(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new ss(!0,0,A);let R=0,b=!1;const P=A.reduce((j,ee,ie)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const st={};return dr(ee.outlets,(xt,_n)=>{st[_n]="string"==typeof xt?xt.split("/"):xt}),[...j,{outlets:st}]}if(ee.segmentPath)return[...j,ee.segmentPath]}return"string"!=typeof ee?[...j,ee]:0===ie?(ee.split("/").forEach((st,xt)=>{0==xt&&"."===st||(0==xt&&""===st?b=!0:".."===st?R++:""!=st&&j.push(st))}),j):[...j,ee]},[]);return new ss(b,R,P)}(b);return ie.toRoot()?Ni(R.root,R.root,new Yn([],{}),P,j):function st(_n){var Hn;const In=function li(A,R,b,P){if(A.isAbsolute)return new pn(R.root,!0,0);if(-1===P)return new pn(b,b===R.root,0);return function Ir(A,R,b){let P=A,j=R,ee=b;for(;ee>j;){if(ee-=j,P=P.parent,!P)throw new u.vHH(4005,lr&&"Invalid number of '../'");j=P.segments.length}return new pn(P,!1,j-ee)}(b,P+(jr(A.commands[0])?0:1),A.numberOfDoubleDots)}(ie,R,null===(Hn=A.snapshot)||void 0===Hn?void 0:Hn._urlSegment,_n),mi=In.processChildren?pe(In.segmentGroup,In.index,ie.commands):te(In.segmentGroup,In.index,ie.commands);return Ni(R.root,In.segmentGroup,mi,P,j)}(null===(ee=A.snapshot)||void 0===ee?void 0:ee._lastPathIndex)}function jr(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Xr(A){return"object"==typeof A&&null!=A&&A.outlets}function Ni(A,R,b,P,j){let ie,ee={};P&&dr(P,(xt,_n)=>{ee[_n]=Array.isArray(xt)?xt.map(Hn=>`${Hn}`):`${xt}`}),ie=A===R?b:gs(A,R,b);const st=bt(Kt(ie));return new or(st,ee,j)}function gs(A,R,b){const P={};return dr(A.children,(j,ee)=>{P[ee]=j===R?b:gs(j,R,b)}),new Yn(A.segments,P)}class ss{constructor(R,b,P){if(this.isAbsolute=R,this.numberOfDoubleDots=b,this.commands=P,R&&P.length>0&&jr(P[0]))throw new u.vHH(4003,lr&&"Root segment cannot have matrix parameters");const j=P.find(Xr);if(j&&j!==Nr(P))throw new u.vHH(4004,lr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pn{constructor(R,b,P){this.segmentGroup=R,this.processChildren=b,this.index=P}}function te(A,R,b){if(A||(A=new Yn([],{})),0===A.segments.length&&A.hasChildren())return pe(A,R,b);const P=function Ze(A,R,b){let P=0,j=R;const ee={match:!1,pathIndex:0,commandIndex:0};for(;j<A.segments.length;){if(P>=b.length)return ee;const ie=A.segments[j],st=b[P];if(Xr(st))break;const xt=`${st}`,_n=P<b.length-1?b[P+1]:null;if(j>0&&void 0===xt)break;if(xt&&_n&&"object"==typeof _n&&void 0===_n.outlets){if(!Je(xt,_n,ie))return ee;P+=2}else{if(!Je(xt,{},ie))return ee;P++}j++}return{match:!0,pathIndex:j,commandIndex:P}}(A,R,b),j=b.slice(P.commandIndex);if(P.match&&P.pathIndex<A.segments.length){const ee=new Yn(A.segments.slice(0,P.pathIndex),{});return ee.children[dn]=new Yn(A.segments.slice(P.pathIndex),A.children),pe(ee,0,j)}return P.match&&0===j.length?new Yn(A.segments,{}):P.match&&!A.hasChildren()?ft(A,R,b):P.match?pe(A,0,j):ft(A,R,b)}function pe(A,R,b){if(0===b.length)return new Yn(A.segments,{});{const P=function Zi(A){return Xr(A[0])?A[0].outlets:{[dn]:A}}(b),j={};return!P[dn]&&A.children[dn]&&1===A.numberOfChildren&&0===A.children[dn].segments.length?pe(A.children[dn],R,b):(dr(P,(ee,ie)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(j[ie]=te(A.children[ie],R,ee))}),dr(A.children,(ee,ie)=>{void 0===P[ie]&&(j[ie]=ee)}),new Yn(A.segments,j))}}function ft(A,R,b){const P=A.segments.slice(0,R);let j=0;for(;j<b.length;){const ee=b[j];if(Xr(ee)){const xt=Nt(ee.outlets);return new Yn(P,xt)}if(0===j&&jr(b[0])){P.push(new ai(A.segments[R].path,ae(b[0]))),j++;continue}const ie=Xr(ee)?ee.outlets[dn]:`${ee}`,st=j<b.length-1?b[j+1]:null;ie&&st&&jr(st)?(P.push(new ai(ie,ae(st))),j+=2):(P.push(new ai(ie,{})),j++)}return new Yn(P,{})}function Nt(A){const R={};return dr(A,(b,P)=>{"string"==typeof b&&(b=[b]),null!==b&&(R[P]=ft(new Yn([],{}),0,b))}),R}function ae(A){const R={};return dr(A,(b,P)=>R[P]=`${b}`),R}function Je(A,R,b){return A==b.path&&nn(R,b.parameters)}const vt="imperative";class Ft{constructor(R,b){this.id=R,this.url=b}}class Vt extends Ft{constructor(R,b,P="imperative",j=null){super(R,b),this.type=0,this.navigationTrigger=P,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sn extends Ft{constructor(R,b,P){super(R,b),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pn extends Ft{constructor(R,b,P,j){super(R,b),this.reason=P,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bn extends Ft{constructor(R,b,P,j){super(R,b),this.reason=P,this.code=j,this.type=16}}class xr extends Ft{constructor(R,b,P,j){super(R,b),this.error=P,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zr extends Ft{constructor(R,b,P,j){super(R,b),this.urlAfterRedirects=P,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xi extends Ft{constructor(R,b,P,j){super(R,b),this.urlAfterRedirects=P,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends Ft{constructor(R,b,P,j,ee){super(R,b),this.urlAfterRedirects=P,this.state=j,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ws extends Ft{constructor(R,b,P,j){super(R,b),this.urlAfterRedirects=P,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ht extends Ft{constructor(R,b,P,j){super(R,b),this.urlAfterRedirects=P,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wt{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gt{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lr{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xn{constructor(R,b,P){this.routerEvent=R,this.position=b,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let qs=(()=>{class A{createUrlTree(b,P,j,ee,ie,st){return mr(b||P.root,j,ee,ie,st)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})(),Xi=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(R){return qs.\u0275fac(R)},providedIn:"root"}),A})();class os{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const b=this.pathFromRoot(R);return b.length>1?b[b.length-2]:null}children(R){const b=ko(R,this._root);return b?b.children.map(P=>P.value):[]}firstChild(R){const b=ko(R,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(R){const b=Ko(R,this._root);return b.length<2?[]:b[b.length-2].children.map(j=>j.value).filter(j=>j!==R)}pathFromRoot(R){return Ko(R,this._root).map(b=>b.value)}}function ko(A,R){if(A===R.value)return R;for(const b of R.children){const P=ko(A,b);if(P)return P}return null}function Ko(A,R){if(A===R.value)return[R];for(const b of R.children){const P=Ko(A,b);if(P.length)return P.unshift(R),P}return[]}class Li{constructor(R,b){this.value=R,this.children=b}toString(){return`TreeNode(${this.value})`}}function oo(A){const R={};return A&&A.children.forEach(b=>R[b.value.outlet]=b),R}class Eo extends os{constructor(R,b){super(R),this.snapshot=b,Qi(this,R)}toString(){return this.snapshot.toString()}}function Yo(A,R){const b=function Io(A,R){const ie=new Ha([],{},{},"",{},dn,R,null,A.root,-1,{});return new wo("",new Li(ie,[]))}(A,R),P=new xe.X([new ai("",{})]),j=new xe.X({}),ee=new xe.X({}),ie=new xe.X({}),st=new xe.X(""),xt=new Cs(P,j,ie,st,ee,dn,R,b.root);return xt.snapshot=b.root,new Eo(new Li(xt,[]),b)}class Cs{constructor(R,b,P,j,ee,ie,st,xt){var _n,Hn;this.url=R,this.params=b,this.queryParams=P,this.fragment=j,this.data=ee,this.outlet=ie,this.component=st,this.title=null!==(_n=null===(Hn=this.data)||void 0===Hn?void 0:Hn.pipe((0,nt.U)(In=>In[hr])))&&void 0!==_n?_n:(0,W.of)(void 0),this._futureSnapshot=xt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(R=>yr(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(R=>yr(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ks(A,R="emptyOnly"){const b=A.pathFromRoot;let P=0;if("always"!==R)for(P=b.length-1;P>=1;){const j=b[P],ee=b[P-1];if(j.routeConfig&&""===j.routeConfig.path)P--;else{if(ee.component)break;P--}}return function Ta(A){return A.reduce((R,b)=>{var P;return{params:{...R.params,...b.params},data:{...R.data,...b.data},resolve:{...b.data,...R.resolve,...null===(P=b.routeConfig)||void 0===P?void 0:P.data,...b._resolvedData}}},{params:{},data:{},resolve:{}})}(b.slice(P))}class Ha{get title(){var R;return null===(R=this.data)||void 0===R?void 0:R[hr]}constructor(R,b,P,j,ee,ie,st,xt,_n,Hn,In){this.url=R,this.params=b,this.queryParams=P,this.fragment=j,this.data=ee,this.outlet=ie,this.component=st,this.routeConfig=xt,this._urlSegment=_n,this._lastPathIndex=Hn,this._resolve=In}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wo extends os{constructor(R,b){super(b),this.url=R,Qi(this,b)}toString(){return Sa(this._root)}}function Qi(A,R){R.value._routerState=A,R.children.forEach(b=>Qi(A,b))}function Sa(A){const R=A.children.length>0?` { ${A.children.map(Sa).join(", ")} } `:"";return`${A.value}${R}`}function $s(A){if(A.snapshot){const R=A.snapshot,b=A._futureSnapshot;A.snapshot=b,nn(R.queryParams,b.queryParams)||A.queryParams.next(b.queryParams),R.fragment!==b.fragment&&A.fragment.next(b.fragment),nn(R.params,b.params)||A.params.next(b.params),function vr(A,R){if(A.length!==R.length)return!1;for(let b=0;b<A.length;++b)if(!nn(A[b],R[b]))return!1;return!0}(R.url,b.url)||A.url.next(b.url),nn(R.data,b.data)||A.data.next(b.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Bi(A,R){const b=nn(A.params,R.params)&&function Tr(A,R){return Or(A,R)&&A.every((b,P)=>nn(b.parameters,R[P].parameters))}(A.url,R.url);return b&&!(!A.parent!=!R.parent)&&(!A.parent||Bi(A.parent,R.parent))}function ao(A,R,b){if(b&&A.shouldReuseRoute(R.value,b.value.snapshot)){const P=b.value;P._futureSnapshot=R.value;const j=function ms(A,R,b){return R.children.map(P=>{for(const j of b.children)if(A.shouldReuseRoute(P.value,j.value.snapshot))return ao(A,P,j);return ao(A,P)})}(A,R,b);return new Li(P,j)}{if(A.shouldAttach(R.value)){const ee=A.retrieve(R.value);if(null!==ee){const ie=ee.route;return ie.value._futureSnapshot=R.value,ie.children=R.children.map(st=>ao(A,st)),ie}}const P=function ui(A){return new Cs(new xe.X(A.url),new xe.X(A.params),new xe.X(A.queryParams),new xe.X(A.fragment),new xe.X(A.data),A.outlet,A.component,A)}(R.value),j=R.children.map(ee=>ao(A,ee));return new Li(P,j)}}const ns="ngNavigationCancelingError";function lo(A,R){const{redirectTo:b,navigationBehaviorOptions:P}=jn(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,j=Os(!1,0,R);return j.url=b,j.navigationBehaviorOptions=P,j}function Os(A,R,b){const P=new Error("NavigationCancelingError: "+(A||""));return P[ns]=!0,P.cancellationCode=R,b&&(P.url=b),P}function uo(A){return la(A)&&jn(A.url)}function la(A){return A&&A[ns]}class bs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new No,this.attachRef=null}}let No=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(b,P){const j=this.getOrCreateContext(b);j.outlet=P,this.contexts.set(b,j)}onChildOutletDestroyed(b){const P=this.getContext(b);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let P=this.getContext(b);return P||(P=new bs,this.contexts.set(b,P)),P}getContext(b){return this.contexts.get(b)||null}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Ys=!1;let Aa=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=dn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(No),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(b){if(b.name){const{firstChange:P,previousValue:j}=b.name;if(P)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){var P;return(null===(P=this.parentContexts.getContext(b))||void 0===P?void 0:P.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);null!=b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,Ys);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,Ys);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,Ys);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,P){this.activated=b,this._activatedRoute=P,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,P){if(this.isActivated)throw new u.vHH(4013,Ys);this._activatedRoute=b;const j=this.location,ie=b.snapshot.component,st=this.parentContexts.getOrCreateContext(this.name).children,xt=new Ds(b,st,j.injector);if(P&&function co(A){return!!A.resolveComponentFactory}(P)){const _n=P.resolveComponentFactory(ie);this.activated=j.createComponent(_n,j.length,xt)}else this.activated=j.createComponent(ie,{index:j.length,injector:xt,environmentInjector:null!=P?P:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275dir=u.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),A})();class Ds{constructor(R,b,P){this.route=R,this.childContexts=b,this.parent=P}get(R,b){return R===Cs?this.route:R===No?this.childContexts:this.parent.get(R,b)}}let yi=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=u.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(b,P){1&b&&u._UZ(0,"router-outlet")},dependencies:[Aa],encapsulation:2}),A})();function Ts(A,R){var b;return A.providers&&!A._injector&&(A._injector=(0,u.MMx)(A.providers,R,`Route: ${A.path}`)),null!==(b=A._injector)&&void 0!==b?b:R}function $i(A){const R=A.children&&A.children.map($i),b=R?{...A,children:R}:{...A};return!b.component&&!b.loadComponent&&(R||b.loadChildren)&&b.outlet&&b.outlet!==dn&&(b.component=yi),b}function as(A){return A.outlet||dn}function vs(A,R){const b=A.filter(P=>as(P)===R);return b.push(...A.filter(P=>as(P)!==R)),b}function Fo(A){var R;if(!A)return null;if(null!==(R=A.routeConfig)&&void 0!==R&&R._injector)return A.routeConfig._injector;for(let b=A.parent;b;b=b.parent){const P=b.routeConfig;if(null!=P&&P._loadedInjector)return P._loadedInjector;if(null!=P&&P._injector)return P._injector}return null}class ua{constructor(R,b,P,j){this.routeReuseStrategy=R,this.futureState=b,this.currState=P,this.forwardEvent=j}activate(R){const b=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,P,R),$s(this.futureState.root),this.activateChildRoutes(b,P,R)}deactivateChildRoutes(R,b,P){const j=oo(b);R.children.forEach(ee=>{const ie=ee.value.outlet;this.deactivateRoutes(ee,j[ie],P),delete j[ie]}),dr(j,(ee,ie)=>{this.deactivateRouteAndItsChildren(ee,P)})}deactivateRoutes(R,b,P){const j=R.value,ee=b?b.value:null;if(j===ee)if(j.component){const ie=P.getContext(j.outlet);ie&&this.deactivateChildRoutes(R,b,ie.children)}else this.deactivateChildRoutes(R,b,P);else ee&&this.deactivateRouteAndItsChildren(b,P)}deactivateRouteAndItsChildren(R,b){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,b):this.deactivateRouteAndOutlet(R,b)}detachAndStoreRouteSubtree(R,b){const P=b.getContext(R.value.outlet),j=P&&R.value.component?P.children:b,ee=oo(R);for(const ie of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ie],j);if(P&&P.outlet){const ie=P.outlet.detach(),st=P.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ie,route:R,contexts:st})}}deactivateRouteAndOutlet(R,b){const P=b.getContext(R.value.outlet),j=P&&R.value.component?P.children:b,ee=oo(R);for(const ie of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ie],j);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(R,b,P){const j=oo(b);R.children.forEach(ee=>{this.activateRoutes(ee,j[ee.value.outlet],P),this.forwardEvent(new Lr(ee.value.snapshot))}),R.children.length&&this.forwardEvent(new an(R.value.snapshot))}activateRoutes(R,b,P){const j=R.value,ee=b?b.value:null;if($s(j),j===ee)if(j.component){const st=P.getOrCreateContext(j.outlet);this.activateChildRoutes(R,b,st.children)}else this.activateChildRoutes(R,b,P);else if(j.component){const st=P.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const xt=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),st.children.onOutletReAttached(xt.contexts),st.attachRef=xt.componentRef,st.route=xt.route.value,st.outlet&&st.outlet.attach(xt.componentRef,xt.route.value),$s(xt.route.value),this.activateChildRoutes(R,null,st.children)}else{var ie;const xt=Fo(j.snapshot),_n=null!==(ie=null==xt?void 0:xt.get(u._Vd))&&void 0!==ie?ie:null;st.attachRef=null,st.route=j,st.resolver=_n,st.injector=xt,st.outlet&&st.outlet.activateWith(j,st.injector),this.activateChildRoutes(R,null,st.children)}}else this.activateChildRoutes(R,null,P)}}class Lo{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class ur{constructor(R,b){this.component=R,this.route=b}}function Co(A,R,b){const P=A._root;return fo(P,R?R._root:null,b,[P.value])}function us(A,R){const b=Symbol(),P=R.get(A,b);return P===b?"function"!=typeof A||(0,u.Z0I)(A)?R.get(A):A:P}function fo(A,R,b,P,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=oo(R);return A.children.forEach(ie=>{(function nl(A,R,b,P,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=A.value,ie=R?R.value:null,st=b?b.getContext(A.value.outlet):null;if(ie&&ee.routeConfig===ie.routeConfig){const xt=function ji(A,R,b){if("function"==typeof b)return b(A,R);switch(b){case"pathParamsChange":return!Or(A.url,R.url);case"pathParamsOrQueryParamsChange":return!Or(A.url,R.url)||!nn(A.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bi(A,R)||!nn(A.queryParams,R.queryParams);default:return!Bi(A,R)}}(ie,ee,ee.routeConfig.runGuardsAndResolvers);xt?j.canActivateChecks.push(new Lo(P)):(ee.data=ie.data,ee._resolvedData=ie._resolvedData),fo(A,R,ee.component?st?st.children:null:b,P,j),xt&&st&&st.outlet&&st.outlet.isActivated&&j.canDeactivateChecks.push(new ur(st.outlet.component,ie))}else ie&&Us(R,st,j),j.canActivateChecks.push(new Lo(P)),fo(A,null,ee.component?st?st.children:null:b,P,j)})(ie,ee[ie.value.outlet],b,P.concat([ie.value]),j),delete ee[ie.value.outlet]}),dr(ee,(ie,st)=>Us(ie,b.getContext(st),j)),j}function Us(A,R,b){const P=oo(A),j=A.value;dr(P,(ee,ie)=>{Us(ee,j.component?R?R.children.getContext(ie):null:R,b)}),b.canDeactivateChecks.push(new ur(j.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,j))}function y(A){return"function"==typeof A}function Sr(A){return A instanceof Oe.K||"EmptyError"===(null==A?void 0:A.name)}const hi=Symbol("INITIAL_VALUE");function br(){return(0,tt.w)(A=>Ve(A.map(R=>R.pipe((0,ze.q)(1),(0,_t.O)(hi)))).pipe((0,nt.U)(R=>{for(const b of R)if(!0!==b){if(b===hi)return hi;if(!1===b||b instanceof or)return b}return!0}),(0,ct.h)(R=>R!==hi),(0,ze.q)(1)))}function pu(A){return(0,rt.z)((0,at.b)(R=>{if(jn(R))throw lo(0,R)}),(0,nt.U)(R=>!0===R))}const po={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xo(A,R,b,P,j){const ee=xa(A,R,b);return ee.matched?function gu(A,R,b,P){const j=R.canMatch;if(!j||0===j.length)return(0,W.of)(!0);const ee=j.map(ie=>{const st=us(ie,A);return Rn(function tn(A){return A&&y(A.canMatch)}(st)?st.canMatch(R,b):A.runInContext(()=>st(R,b)))});return(0,W.of)(ee).pipe(br(),pu())}(P=Ts(R,P),R,b).pipe((0,nt.U)(ie=>!0===ie?ee:{...po})):(0,W.of)(ee)}function xa(A,R,b){var P;if(""===R.path)return"full"===R.pathMatch&&(A.hasChildren()||b.length>0)?{...po}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const ee=(R.matcher||Sn)(b,A,R);if(!ee)return{...po};const ie={};dr(ee.posParams,(xt,_n)=>{ie[_n]=xt.path});const st=ee.consumed.length>0?{...ie,...ee.consumed[ee.consumed.length-1].parameters}:ie;return{matched:!0,consumedSegments:ee.consumed,remainingSegments:b.slice(ee.consumed.length),parameters:st,positionalParamSegments:null!==(P=ee.posParams)&&void 0!==P?P:{}}}function go(A,R,b,P){if(b.length>0&&function Bo(A,R,b){return b.some(P=>Qo(A,R,P)&&as(P)!==dn)}(A,b,P)){const ee=new Yn(R,function gl(A,R,b,P){const j={};j[dn]=P,P._sourceSegment=A,P._segmentIndexShift=R.length;for(const ee of b)if(""===ee.path&&as(ee)!==dn){const ie=new Yn([],{});ie._sourceSegment=A,ie._segmentIndexShift=R.length,j[as(ee)]=ie}return j}(A,R,P,new Yn(b,A.children)));return ee._sourceSegment=A,ee._segmentIndexShift=R.length,{segmentGroup:ee,slicedSegments:[]}}if(0===b.length&&function da(A,R,b){return b.some(P=>Qo(A,R,P))}(A,b,P)){const ee=new Yn(A.segments,function pl(A,R,b,P,j){const ee={};for(const ie of P)if(Qo(A,b,ie)&&!j[as(ie)]){const st=new Yn([],{});st._sourceSegment=A,st._segmentIndexShift=R.length,ee[as(ie)]=st}return{...j,...ee}}(A,R,b,P,A.children));return ee._sourceSegment=A,ee._segmentIndexShift=R.length,{segmentGroup:ee,slicedSegments:b}}const j=new Yn(A.segments,A.children);return j._sourceSegment=A,j._segmentIndexShift=R.length,{segmentGroup:j,slicedSegments:b}}function Qo(A,R,b){return(!(A.hasChildren()||R.length>0)||"full"!==b.pathMatch)&&""===b.path}function ha(A,R,b,P){return!!(as(A)===P||P!==dn&&Qo(R,b,A))&&("**"===A.path||xa(R,A,b).matched)}function Hi(A,R,b){return 0===R.length&&!A.children[b]}const $o=!1;class Jo{constructor(R){this.segmentGroup=R||null}}class mo{constructor(R){this.urlTree=R}}function qr(A){return et(new Jo(A))}function rs(A){return et(new mo(A))}class Uo{constructor(R,b,P,j,ee){this.injector=R,this.configLoader=b,this.urlSerializer=P,this.urlTree=j,this.config=ee,this.allowRedirects=!0}apply(){const R=go(this.urlTree.root,[],[],this.config).segmentGroup,b=new Yn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,b,dn).pipe((0,nt.U)(ee=>this.createUrlTree(Kt(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ye(ee=>{if(ee instanceof mo)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof Jo?this.noMatchError(ee):ee}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,dn).pipe((0,nt.U)(j=>this.createUrlTree(Kt(j),R.queryParams,R.fragment))).pipe(Ye(j=>{throw j instanceof Jo?this.noMatchError(j):j}))}noMatchError(R){return new u.vHH(4002,$o)}createUrlTree(R,b,P){const j=bt(R);return new or(j,b,P)}expandSegmentGroup(R,b,P,j){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(R,b,P).pipe((0,nt.U)(ee=>new Yn([],ee))):this.expandSegment(R,P,b,P.segments,j,!0)}expandChildren(R,b,P){const j=[];for(const ee of Object.keys(P.children))"primary"===ee?j.unshift(ee):j.push(ee);return(0,Q.D)(j).pipe((0,Ie.b)(ee=>{const ie=P.children[ee],st=vs(b,ee);return this.expandSegmentGroup(R,st,ie,ee).pipe((0,nt.U)(xt=>({segment:xt,outlet:ee})))}),(0,Ke.R)((ee,ie)=>(ee[ie.outlet]=ie.segment,ee),{}),Yt())}expandSegment(R,b,P,j,ee,ie){return(0,Q.D)(P).pipe((0,Ie.b)(st=>this.expandSegmentAgainstRoute(R,b,P,st,j,ee,ie).pipe(Ye(_n=>{if(_n instanceof Jo)return(0,W.of)(null);throw _n}))),(0,Ae.P)(st=>!!st),Ye((st,xt)=>{if(Sr(st))return Hi(b,j,ee)?(0,W.of)(new Yn([],{})):qr(b);throw st}))}expandSegmentAgainstRoute(R,b,P,j,ee,ie,st){return ha(j,b,ee,ie)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(R,b,j,ee,ie):st&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,b,P,j,ee,ie):qr(b):qr(b)}expandSegmentAgainstRouteUsingRedirect(R,b,P,j,ee,ie){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,P,j,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(R,b,P,j,ee,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,b,P,j){const ee=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?rs(ee):this.lineralizeSegments(P,ee).pipe((0,we.z)(ie=>{const st=new Yn(ie,{});return this.expandSegment(R,st,b,ie,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,b,P,j,ee,ie){const{matched:st,consumedSegments:xt,remainingSegments:_n,positionalParamSegments:Hn}=xa(b,j,ee);if(!st)return qr(b);const In=this.applyRedirectCommands(xt,j.redirectTo,Hn);return j.redirectTo.startsWith("/")?rs(In):this.lineralizeSegments(j,In).pipe((0,we.z)(mi=>this.expandSegment(R,b,P,mi.concat(_n),ie,!1)))}matchSegmentAgainstRoute(R,b,P,j,ee){return"**"===P.path?(R=Ts(P,R),P.loadChildren?(P._loadedRoutes?(0,W.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(R,P)).pipe((0,nt.U)(st=>(P._loadedRoutes=st.routes,P._loadedInjector=st.injector,new Yn(j,{})))):(0,W.of)(new Yn(j,{}))):Xo(b,P,j,R).pipe((0,tt.w)(({matched:ie,consumedSegments:st,remainingSegments:xt})=>{var _n;return ie?(R=null!==(_n=P._injector)&&void 0!==_n?_n:R,this.getChildConfig(R,P,j).pipe((0,we.z)(In=>{var mi;const _i=null!==(mi=In.injector)&&void 0!==mi?mi:R,xs=In.routes,{segmentGroup:to,slicedSegments:jo}=go(b,st,xt,xs),ta=new Yn(to.segments,to.children);if(0===jo.length&&ta.hasChildren())return this.expandChildren(_i,xs,ta).pipe((0,nt.U)(Gr=>new Yn(st,Gr)));if(0===xs.length&&0===jo.length)return(0,W.of)(new Yn(st,{}));const yo=as(P)===ee;return this.expandSegment(_i,ta,xs,jo,yo?dn:ee,!0).pipe((0,nt.U)(Es=>new Yn(st.concat(Es.segments),Es.children)))}))):qr(b)}))}getChildConfig(R,b,P){return b.children?(0,W.of)({routes:b.children,injector:R}):b.loadChildren?void 0!==b._loadedRoutes?(0,W.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function Ga(A,R,b,P){const j=R.canLoad;if(void 0===j||0===j.length)return(0,W.of)(!0);const ee=j.map(ie=>{const st=us(ie,A);return Rn(function f(A){return A&&y(A.canLoad)}(st)?st.canLoad(R,b):A.runInContext(()=>st(R,b)))});return(0,W.of)(ee).pipe(br(),pu())}(R,b,P).pipe((0,we.z)(j=>j?this.configLoader.loadChildren(R,b).pipe((0,at.b)(ee=>{b._loadedRoutes=ee.routes,b._loadedInjector=ee.injector})):function ju(A){return et(Os($o,3))}())):(0,W.of)({routes:[],injector:R})}lineralizeSegments(R,b){let P=[],j=b.root;for(;;){if(P=P.concat(j.segments),0===j.numberOfChildren)return(0,W.of)(P);if(j.numberOfChildren>1||!j.children[dn])return R.redirectTo,et(new u.vHH(4e3,$o));j=j.children[dn]}}applyRedirectCommands(R,b,P){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),R,P)}applyRedirectCreateUrlTree(R,b,P,j){const ee=this.createSegmentGroup(R,b.root,P,j);return new or(ee,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(R,b){const P={};return dr(R,(j,ee)=>{if("string"==typeof j&&j.startsWith(":")){const st=j.substring(1);P[ee]=b[st]}else P[ee]=j}),P}createSegmentGroup(R,b,P,j){const ee=this.createSegments(R,b.segments,P,j);let ie={};return dr(b.children,(st,xt)=>{ie[xt]=this.createSegmentGroup(R,st,P,j)}),new Yn(ee,ie)}createSegments(R,b,P,j){return b.map(ee=>ee.path.startsWith(":")?this.findPosParam(R,ee,j):this.findOrReturn(ee,P))}findPosParam(R,b,P){const j=P[b.path.substring(1)];if(!j)throw new u.vHH(4001,$o);return j}findOrReturn(R,b){let P=0;for(const j of b){if(j.path===R.path)return b.splice(P),j;P++}return R}}class fi{}class F{constructor(R,b,P,j,ee,ie,st){this.injector=R,this.rootComponentType=b,this.config=P,this.urlTree=j,this.url=ee,this.paramsInheritanceStrategy=ie,this.urlSerializer=st}recognize(){const R=go(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,dn).pipe((0,nt.U)(b=>{if(null===b)return null;const P=new Ha([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Li(P,b),ee=new wo(this.url,j);return this.inheritParamsAndData(ee._root),ee}))}inheritParamsAndData(R){const b=R.value,P=Ks(b,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data),R.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(R,b,P,j){return 0===P.segments.length&&P.hasChildren()?this.processChildren(R,b,P):this.processSegment(R,b,P,P.segments,j)}processChildren(R,b,P){return(0,Q.D)(Object.keys(P.children)).pipe((0,Ie.b)(j=>{const ee=P.children[j],ie=vs(b,j);return this.processSegmentGroup(R,ie,ee,j)}),(0,Ke.R)((j,ee)=>j&&ee?(j.push(...ee),j):null),function Ct(A,R=!1){return(0,Pe.e)((b,P)=>{let j=0;b.subscribe((0,he.x)(P,ee=>{const ie=A(ee,j++);(ie||R)&&P.next(ee),!ie&&P.complete()}))})}(j=>null!==j),(0,Wt.d)(null),Yt(),(0,nt.U)(j=>{if(null===j)return null;const ee=be(j);return function K(A){A.sort((R,b)=>R.value.outlet===dn?-1:b.value.outlet===dn?1:R.value.outlet.localeCompare(b.value.outlet))}(ee),ee}))}processSegment(R,b,P,j,ee){return(0,Q.D)(b).pipe((0,Ie.b)(ie=>{var st;return this.processSegmentAgainstRoute(null!==(st=ie._injector)&&void 0!==st?st:R,ie,P,j,ee)}),(0,Ae.P)(ie=>!!ie),Ye(ie=>{if(Sr(ie))return Hi(P,j,ee)?(0,W.of)([]):(0,W.of)(null);throw ie}))}processSegmentAgainstRoute(R,b,P,j,ee){if(b.redirectTo||!ha(b,P,j,ee))return(0,W.of)(null);let ie;if("**"===b.path){var st,xt;const _n=j.length>0?Nr(j).parameters:{},Hn=On(P)+j.length,In=new Ha(j,_n,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kr(b),as(b),null!==(st=null!==(xt=b.component)&&void 0!==xt?xt:b._loadedComponent)&&void 0!==st?st:null,b,qt(P),Hn,Ar(b));ie=(0,W.of)({snapshot:In,consumedSegments:[],remainingSegments:[]})}else ie=Xo(P,b,j,R).pipe((0,nt.U)(({matched:_n,consumedSegments:Hn,remainingSegments:In,parameters:mi})=>{var _i,xs;if(!_n)return null;const to=On(P)+Hn.length;return{snapshot:new Ha(Hn,mi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kr(b),as(b),null!==(_i=null!==(xs=b.component)&&void 0!==xs?xs:b._loadedComponent)&&void 0!==_i?_i:null,b,qt(P),to,Ar(b)),consumedSegments:Hn,remainingSegments:In}}));return ie.pipe((0,tt.w)(_n=>{var Hn,In;if(null===_n)return(0,W.of)(null);const{snapshot:mi,consumedSegments:_i,remainingSegments:xs}=_n;R=null!==(Hn=b._injector)&&void 0!==Hn?Hn:R;const to=null!==(In=b._loadedInjector)&&void 0!==In?In:R,jo=function U(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(b),{segmentGroup:ta,slicedSegments:yo}=go(P,_i,xs,jo.filter(Es=>void 0===Es.redirectTo));if(0===yo.length&&ta.hasChildren())return this.processChildren(to,jo,ta).pipe((0,nt.U)(Es=>null===Es?null:[new Li(mi,Es)]));if(0===jo.length&&0===yo.length)return(0,W.of)([new Li(mi,[])]);const ll=as(b)===ee;return this.processSegment(to,jo,ta,yo,ll?dn:ee).pipe((0,nt.U)(Es=>null===Es?null:[new Li(mi,Es)]))}))}}function ne(A){const R=A.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function be(A){const R=[],b=new Set;for(const P of A){if(!ne(P)){R.push(P);continue}const j=R.find(ee=>P.value.routeConfig===ee.value.routeConfig);void 0!==j?(j.children.push(...P.children),b.add(j)):R.push(P)}for(const P of b){const j=be(P.children);R.push(new Li(P.value,j))}return R.filter(P=>!b.has(P))}function qt(A){let R=A;for(;R._sourceSegment;)R=R._sourceSegment;return R}function On(A){var R;let b=A,P=null!==(R=b._segmentIndexShift)&&void 0!==R?R:0;for(;b._sourceSegment;){var j;b=b._sourceSegment,P+=null!==(j=b._segmentIndexShift)&&void 0!==j?j:0}return P-1}function kr(A){return A.data||{}}function Ar(A){return A.resolve||{}}function Vs(A){return"string"==typeof A.title||null===A.title}function Si(A){return(0,tt.w)(R=>{const b=A(R);return b?(0,Q.D)(b).pipe((0,nt.U)(()=>R)):(0,W.of)(R)})}const Js=new u.OlP("ROUTES");let Ra=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,W.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const P=Rn(b.loadComponent()).pipe((0,nt.U)(xl),(0,at.b)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=ee}),Kn(()=>{this.componentLoaders.delete(b)})),j=new Se(P,()=>new it.x).pipe(Te());return this.componentLoaders.set(b,j),j}loadChildren(b,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,W.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const ee=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,nt.U)(st=>{this.onLoadEndListener&&this.onLoadEndListener(P);let xt,_n,Hn=!1;Array.isArray(st)?_n=st:(xt=st.create(b).injector,_n=oi(xt.get(Js,[],u.XFs.Self|u.XFs.Optional)));return{routes:_n.map($i),injector:xt}}),Kn(()=>{this.childrenLoaders.delete(P)})),ie=new Se(ee,()=>new it.x).pipe(Te());return this.childrenLoaders.set(P,ie),ie}loadModuleFactoryOrRoutes(b){return Rn(b()).pipe((0,nt.U)(xl),(0,we.z)(P=>P instanceof u.YKP||Array.isArray(P)?(0,W.of)(P):(0,Q.D)(this.compiler.compileModuleAsync(P))))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function xl(A){return function Wa(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let pa=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new it.x,this.configLoader=(0,u.f3M)(Ra),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Be),this.rootContexts=(0,u.f3M)(No),this.navigationId=0,this.afterPreactivation=()=>(0,W.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new wt(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new Xe(j))}complete(){var b;null===(b=this.transitions)||void 0===b||b.complete()}handleNavigationRequest(b){var P;const j=++this.navigationId;null===(P=this.transitions)||void 0===P||P.next({...this.transitions.value,...b,id:j})}setupNavigations(b){return this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vt,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ct.h)(P=>0!==P.id),(0,nt.U)(P=>({...P,extractedUrl:b.urlHandlingStrategy.extract(P.rawUrl)})),(0,tt.w)(P=>{let j=!1,ee=!1;return(0,W.of)(P).pipe((0,at.b)(ie=>{this.currentNavigation={id:ie.id,initialUrl:ie.rawUrl,extractedUrl:ie.extractedUrl,trigger:ie.source,extras:ie.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,tt.w)(ie=>{var st;const xt=b.browserUrlTree.toString(),_n=!b.navigated||ie.extractedUrl.toString()!==xt||xt!==b.currentUrlTree.toString(),Hn=null!==(st=ie.extras.onSameUrlNavigation)&&void 0!==st?st:b.onSameUrlNavigation;if(!_n&&"reload"!==Hn){const In="";return this.events.next(new bn(ie.id,b.serializeUrl(P.rawUrl),In,0)),b.rawUrlTree=ie.rawUrl,ie.resolve(null),He.E}if(b.urlHandlingStrategy.shouldProcessUrl(ie.rawUrl))return ql(ie.source)&&(b.browserUrlTree=ie.extractedUrl),(0,W.of)(ie).pipe((0,tt.w)(In=>{var mi,_i;const xs=null===(mi=this.transitions)||void 0===mi?void 0:mi.getValue();return this.events.next(new Vt(In.id,this.urlSerializer.serialize(In.extractedUrl),In.source,In.restoredState)),xs!==(null===(_i=this.transitions)||void 0===_i?void 0:_i.getValue())?He.E:Promise.resolve(In)}),function As(A,R,b,P){return(0,tt.w)(j=>function Ss(A,R,b,P,j){return new Uo(A,R,b,P,j).apply()}(A,R,b,j.extractedUrl,P).pipe((0,nt.U)(ee=>({...j,urlAfterRedirects:ee}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,at.b)(In=>{this.currentNavigation={...this.currentNavigation,finalUrl:In.urlAfterRedirects},P.urlAfterRedirects=In.urlAfterRedirects}),function wr(A,R,b,P,j){return(0,we.z)(ee=>function rl(A,R,b,P,j,ee,ie="emptyOnly"){return new F(A,R,b,P,j,ie,ee).recognize().pipe((0,tt.w)(st=>null===st?function ml(A){return new ke.y(R=>R.error(A))}(new fi):(0,W.of)(st)))}(A,R,b,ee.urlAfterRedirects,P.serialize(ee.urlAfterRedirects),P,j).pipe((0,nt.U)(ie=>({...ee,targetSnapshot:ie}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,at.b)(In=>{if(P.targetSnapshot=In.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!In.extras.skipLocationChange){const _i=b.urlHandlingStrategy.merge(In.urlAfterRedirects,In.rawUrl);b.setBrowserUrl(_i,In)}b.browserUrlTree=In.urlAfterRedirects}const mi=new zr(In.id,this.urlSerializer.serialize(In.extractedUrl),this.urlSerializer.serialize(In.urlAfterRedirects),In.targetSnapshot);this.events.next(mi)}));if(_n&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:In,extractedUrl:mi,source:_i,restoredState:xs,extras:to}=ie,jo=new Vt(In,this.urlSerializer.serialize(mi),_i,xs);this.events.next(jo);const ta=Yo(mi,this.rootComponentType).snapshot;return P={...ie,targetSnapshot:ta,urlAfterRedirects:mi,extras:{...to,skipLocationChange:!1,replaceUrl:!1}},(0,W.of)(P)}{const In="";return this.events.next(new bn(ie.id,b.serializeUrl(P.extractedUrl),In,1)),b.rawUrlTree=ie.rawUrl,ie.resolve(null),He.E}}),(0,at.b)(ie=>{const st=new xi(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot);this.events.next(st)}),(0,nt.U)(ie=>P={...ie,guards:Co(ie.targetSnapshot,ie.currentSnapshot,this.rootContexts)}),function cs(A,R){return(0,we.z)(b=>{const{targetSnapshot:P,currentSnapshot:j,guards:{canActivateChecks:ee,canDeactivateChecks:ie}}=b;return 0===ie.length&&0===ee.length?(0,W.of)({...b,guardsResult:!0}):function _s(A,R,b,P){return(0,Q.D)(A).pipe((0,we.z)(j=>function za(A,R,b,P,j){const ee=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,W.of)(!0);const ie=ee.map(st=>{var xt;const _n=null!==(xt=Fo(R))&&void 0!==xt?xt:j,Hn=us(st,_n);return Rn(function Le(A){return A&&y(A.canDeactivate)}(Hn)?Hn.canDeactivate(A,R,b,P):_n.runInContext(()=>Hn(A,R,b,P))).pipe((0,Ae.P)())});return(0,W.of)(ie).pipe(br())}(j.component,j.route,b,R,P)),(0,Ae.P)(j=>!0!==j,!0))}(ie,P,j,A).pipe((0,we.z)(st=>st&&function I(A){return"boolean"==typeof A}(st)?function Ii(A,R,b,P){return(0,Q.D)(R).pipe((0,Ie.b)(j=>(0,De.z)(function bo(A,R){return null!==A&&R&&R(new Gt(A)),(0,W.of)(!0)}(j.route.parent,P),function Ui(A,R){return null!==A&&R&&R(new Fn(A)),(0,W.of)(!0)}(j.route,P),function Qs(A,R,b){const P=R[R.length-1],ee=R.slice(0,R.length-1).reverse().map(ie=>function ca(A){const R=A.routeConfig?A.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:A,guards:R}:null}(ie)).filter(ie=>null!==ie).map(ie=>ue(()=>{const st=ie.guards.map(xt=>{var _n;const Hn=null!==(_n=Fo(ie.node))&&void 0!==_n?_n:b,In=us(xt,Hn);return Rn(function q(A){return A&&y(A.canActivateChild)}(In)?In.canActivateChild(P,A):Hn.runInContext(()=>In(P,A))).pipe((0,Ae.P)())});return(0,W.of)(st).pipe(br())}));return(0,W.of)(ee).pipe(br())}(A,j.path,b),function Do(A,R,b){const P=R.routeConfig?R.routeConfig.canActivate:null;if(!P||0===P.length)return(0,W.of)(!0);const j=P.map(ee=>ue(()=>{var ie;const st=null!==(ie=Fo(R))&&void 0!==ie?ie:b,xt=us(ee,st);return Rn(function T(A){return A&&y(A.canActivate)}(xt)?xt.canActivate(R,A):st.runInContext(()=>xt(R,A))).pipe((0,Ae.P)())}));return(0,W.of)(j).pipe(br())}(A,j.route,b))),(0,Ae.P)(j=>!0!==j,!0))}(P,ee,A,R):(0,W.of)(st)),(0,nt.U)(st=>({...b,guardsResult:st})))})}(this.environmentInjector,ie=>this.events.next(ie)),(0,at.b)(ie=>{if(P.guardsResult=ie.guardsResult,jn(ie.guardsResult))throw lo(0,ie.guardsResult);const st=new ar(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot,!!ie.guardsResult);this.events.next(st)}),(0,ct.h)(ie=>!!ie.guardsResult||(b.restoreHistory(ie),this.cancelNavigationTransition(ie,"",3),!1)),Si(ie=>{if(ie.guards.canActivateChecks.length)return(0,W.of)(ie).pipe((0,at.b)(st=>{const xt=new Ws(st.id,this.urlSerializer.serialize(st.extractedUrl),this.urlSerializer.serialize(st.urlAfterRedirects),st.targetSnapshot);this.events.next(xt)}),(0,tt.w)(st=>{let xt=!1;return(0,W.of)(st).pipe(function Gi(A,R){return(0,we.z)(b=>{const{targetSnapshot:P,guards:{canActivateChecks:j}}=b;if(!j.length)return(0,W.of)(b);let ee=0;return(0,Q.D)(j).pipe((0,Ie.b)(ie=>function Pi(A,R,b,P){const j=A.routeConfig,ee=A._resolve;return void 0!==(null==j?void 0:j.title)&&!Vs(j)&&(ee[hr]=j.title),function Ti(A,R,b,P){const j=function To(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===j.length)return(0,W.of)({});const ee={};return(0,Q.D)(j).pipe((0,we.z)(ie=>function bi(A,R,b,P){var j;const ee=null!==(j=Fo(R))&&void 0!==j?j:P,ie=us(A,ee);return Rn(ie.resolve?ie.resolve(R,b):ee.runInContext(()=>ie(R,b)))}(A[ie],R,b,P).pipe((0,Ae.P)(),(0,at.b)(st=>{ee[ie]=st}))),Ue(1),function Gn(A){return(0,nt.U)(()=>A)}(ee),Ye(ie=>Sr(ie)?He.E:et(ie)))}(ee,A,R,P).pipe((0,nt.U)(ie=>(A._resolvedData=ie,A.data=Ks(A,b).resolve,j&&Vs(j)&&(A.data[hr]=j.title),null)))}(ie.route,P,A,R)),(0,at.b)(()=>ee++),Ue(1),(0,we.z)(ie=>ee===j.length?(0,W.of)(b):He.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,at.b)({next:()=>xt=!0,complete:()=>{xt||(b.restoreHistory(st),this.cancelNavigationTransition(st,"",2))}}))}),(0,at.b)(st=>{const xt=new ht(st.id,this.urlSerializer.serialize(st.extractedUrl),this.urlSerializer.serialize(st.urlAfterRedirects),st.targetSnapshot);this.events.next(xt)}))}),Si(ie=>{const st=xt=>{var _n;const Hn=[];null!==(_n=xt.routeConfig)&&void 0!==_n&&_n.loadComponent&&!xt.routeConfig._loadedComponent&&Hn.push(this.configLoader.loadComponent(xt.routeConfig).pipe((0,at.b)(In=>{xt.component=In}),(0,nt.U)(()=>{})));for(const In of xt.children)Hn.push(...st(In));return Hn};return Ve(st(ie.targetSnapshot.root)).pipe((0,Wt.d)(),(0,ze.q)(1))}),Si(()=>this.afterPreactivation()),(0,nt.U)(ie=>{const st=function aa(A,R,b){const P=ao(A,R._root,b?b._root:void 0);return new Eo(P,R)}(b.routeReuseStrategy,ie.targetSnapshot,ie.currentRouterState);return P={...ie,targetRouterState:st}}),(0,at.b)(ie=>{b.currentUrlTree=ie.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(ie.urlAfterRedirects,ie.rawUrl),b.routerState=ie.targetRouterState,"deferred"===b.urlUpdateStrategy&&(ie.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,ie),b.browserUrlTree=ie.urlAfterRedirects)}),((A,R,b)=>(0,nt.U)(P=>(new ua(R,P.targetRouterState,P.currentRouterState,b).activate(A),P)))(this.rootContexts,b.routeReuseStrategy,ie=>this.events.next(ie)),(0,at.b)({next:ie=>{var st;j=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new sn(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),null===(st=b.titleStrategy)||void 0===st||st.updateTitle(ie.targetRouterState.snapshot),ie.resolve(!0)},complete:()=>{j=!0}}),Kn(()=>{var ie;j||ee||this.cancelNavigationTransition(P,"",1),(null===(ie=this.currentNavigation)||void 0===ie?void 0:ie.id)===P.id&&(this.currentNavigation=null)}),Ye(ie=>{if(ee=!0,la(ie)){uo(ie)||(b.navigated=!0,b.restoreHistory(P,!0));const xt=new Pn(P.id,this.urlSerializer.serialize(P.extractedUrl),ie.message,ie.cancellationCode);if(this.events.next(xt),uo(ie)){const _n=b.urlHandlingStrategy.merge(ie.url,b.rawUrlTree),Hn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||ql(P.source)};b.scheduleNavigation(_n,vt,null,Hn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{var st;b.restoreHistory(P,!0);const xt=new xr(P.id,this.urlSerializer.serialize(P.extractedUrl),ie,null!==(st=P.targetSnapshot)&&void 0!==st?st:void 0);this.events.next(xt);try{P.resolve(b.errorHandler(ie))}catch(_n){P.reject(_n)}}return He.E}))}))}cancelNavigationTransition(b,P,j){const ee=new Pn(b.id,this.urlSerializer.serialize(b.extractedUrl),P,j);this.events.next(ee),b.resolve(!1)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function ql(A){return A!==vt}let Wi=(()=>{class A{buildTitle(b){let P,j=b.root;for(;void 0!==j;){var ee;P=null!==(ee=this.getResolvedTitleForRoute(j))&&void 0!==ee?ee:P,j=j.children.find(ie=>ie.outlet===dn)}return P}getResolvedTitleForRoute(b){return b.data[hr]}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(Rl)},providedIn:"root"}),A})(),Rl=(()=>{class A extends Wi{constructor(b){super(),this.title=b}updateTitle(b){const P=this.buildTitle(b);void 0!==P&&this.title.setTitle(P)}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(kn.Dx))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),qi=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(Ml)},providedIn:"root"}),A})();class Kl{shouldDetach(R){return!1}store(R,b){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,b){return R.routeConfig===b.routeConfig}}let Ml=(()=>{class A extends Kl{}return A.\u0275fac=function(){let R;return function(P){return(R||(R=u.n5z(A)))(P||A)}}(),A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Ki=new u.OlP("",{providedIn:"root",factory:()=>({})});let pi=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(Pl)},providedIn:"root"}),A})(),Pl=(()=>{class A{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,P){return b}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Jn(A){throw A}function mu(A,R,b){return R.parse("/")}const Mn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ut={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zt=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var b;this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(Ki,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Jn,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mu,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(pi),this.routeReuseStrategy=(0,u.f3M)(qi),this.urlCreationStrategy=(0,u.f3M)(Xi),this.titleStrategy=(0,u.f3M)(Wi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=oi(null!==(b=(0,u.f3M)(Js,{optional:!0}))&&void 0!==b?b:[]),this.navigationTransitions=(0,u.f3M)(pa),this.urlSerializer=(0,u.f3M)(Be),this.location=(0,u.f3M)(qe.Ye),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new or,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yo(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(P=>{this.lastSuccessfulId=P.id,this.currentPageId=P.targetPageId},P=>{this.console.warn(`Unhandled Navigation Error: ${P}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vt,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const P="popstate"===b.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,P,b.state)},0)}))}navigateToSyncWithBrowser(b,P,j){const ee={replaceUrl:!0},ie=null!=j&&j.navigationId?j:null;if(j){const xt={...j};delete xt.navigationId,delete xt.\u0275routerPageId,0!==Object.keys(xt).length&&(ee.state=xt)}const st=this.parseUrl(b);this.scheduleNavigation(st,P,ie,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map($i),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,P={}){const{relativeTo:j,queryParams:ee,fragment:ie,queryParamsHandling:st,preserveFragment:xt}=P,_n=xt?this.currentUrlTree.fragment:ie;let Hn=null;switch(st){case"merge":Hn={...this.currentUrlTree.queryParams,...ee};break;case"preserve":Hn=this.currentUrlTree.queryParams;break;default:Hn=ee||null}return null!==Hn&&(Hn=this.removeEmptyProps(Hn)),this.urlCreationStrategy.createUrlTree(j,this.routerState,this.currentUrlTree,b,Hn,null!=_n?_n:null)}navigateByUrl(b,P={skipLocationChange:!1}){const j=jn(b)?b:this.parseUrl(b),ee=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(ee,vt,null,P)}navigate(b,P={skipLocationChange:!1}){return function is(A){for(let R=0;R<A.length;R++){const b=A[R];if(null==b)throw new u.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,P),P)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let P;try{P=this.urlSerializer.parse(b)}catch(j){P=this.malformedUriErrorHandler(j,this.urlSerializer,b)}return P}isActive(b,P){let j;if(j=!0===P?{...Mn}:!1===P?{...Ut}:P,jn(b))return Vr(this.currentUrlTree,b,j);const ee=this.parseUrl(b);return Vr(this.currentUrlTree,ee,j)}removeEmptyProps(b){return Object.keys(b).reduce((P,j)=>{const ee=b[j];return null!=ee&&(P[j]=ee),P},{})}scheduleNavigation(b,P,j,ee,ie){if(this.disposed)return Promise.resolve(!1);let st,xt,_n,Hn;if(ie?(st=ie.resolve,xt=ie.reject,_n=ie.promise):_n=new Promise((_i,xs)=>{st=_i,xt=xs}),"computed"===this.canceledNavigationResolution)if(j&&j.\u0275routerPageId)Hn=j.\u0275routerPageId;else if(ee.replaceUrl||ee.skipLocationChange){var In;Hn=null!==(In=this.browserPageId)&&void 0!==In?In:0}else{var mi;Hn=(null!==(mi=this.browserPageId)&&void 0!==mi?mi:0)+1}else Hn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Hn,source:P,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:ee,resolve:st,reject:xt,promise:_n,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_n.catch(_i=>Promise.reject(_i))}setBrowserUrl(b,P){const j=this.urlSerializer.serialize(b),ee={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(j)||P.extras.replaceUrl?this.location.replaceState(j,"",ee):this.location.go(j,"",ee)}restoreHistory(b,P=!1){if("computed"===this.canceledNavigationResolution){var j,ee;const ie=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.getCurrentNavigation())||void 0===j?void 0:j.finalUrl)||0===ie?this.currentUrlTree===(null===(ee=this.getCurrentNavigation())||void 0===ee?void 0:ee.finalUrl)&&0===ie&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,P){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:P}:{navigationId:b}}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),So=(()=>{class A{constructor(b,P,j,ee,ie,st){var xt;this.router=b,this.route=P,this.tabIndexAttribute=j,this.renderer=ee,this.el=ie,this.locationStrategy=st,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new it.x;const _n=null===(xt=ie.nativeElement.tagName)||void 0===xt?void 0:xt.toLowerCase();this.isAnchorElement="a"===_n||"area"===_n,this.isAnchorElement?this.subscription=b.events.subscribe(Hn=>{Hn instanceof sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,u.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,u.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,u.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,P,j,ee,ie){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||P||j||ee||ie||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var b;null===(b=this.subscription)||void 0===b||b.unsubscribe()}updateHref(){var b;this.href=null!==this.urlTree&&this.locationStrategy?null===(b=this.locationStrategy)||void 0===b?void 0:b.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const P=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",P)}applyAttributeValue(b,P){const j=this.renderer,ee=this.el.nativeElement;null!==P?j.setAttribute(ee,b,P):j.removeAttribute(ee,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(b){return new(b||A)(u.Y36(Zt),u.Y36(Cs),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(qe.S$))},A.\u0275dir=u.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,P){1&b&&u.NdJ("click",function(ee){return P.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&b&&u.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),A})();class Ol{}let qa=(()=>{class A{preload(b,P){return P().pipe(Ye(()=>(0,W.of)(null)))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),kl=(()=>{class A{constructor(b,P,j,ee,ie){this.router=b,this.injector=j,this.preloadingStrategy=ee,this.loader=ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,ct.h)(b=>b instanceof sn),(0,Ie.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,P){const j=[];for(const xt of P){var ee,ie;xt.providers&&!xt._injector&&(xt._injector=(0,u.MMx)(xt.providers,b,`Route: ${xt.path}`));const _n=null!==(ee=xt._injector)&&void 0!==ee?ee:b,Hn=null!==(ie=xt._loadedInjector)&&void 0!==ie?ie:_n;if(xt.loadChildren&&!xt._loadedRoutes&&void 0===xt.canLoad||xt.loadComponent&&!xt._loadedComponent)j.push(this.preloadConfig(_n,xt));else if(xt.children||xt._loadedRoutes){var st;j.push(this.processRoutes(Hn,null!==(st=xt.children)&&void 0!==st?st:xt._loadedRoutes))}}return(0,Q.D)(j).pipe((0,er.J)())}preloadConfig(b,P){return this.preloadingStrategy.preload(P,()=>{let j;j=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(b,P):(0,W.of)(null);const ee=j.pipe((0,we.z)(ie=>{var st;return null===ie?(0,W.of)(void 0):(P._loadedRoutes=ie.routes,P._loadedInjector=ie.injector,this.processRoutes(null!==(st=ie.injector)&&void 0!==st?st:b,ie.routes))}));if(P.loadComponent&&!P._loadedComponent){const ie=this.loader.loadComponent(P);return(0,Q.D)([ee,ie]).pipe((0,er.J)())}return ee})}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(Zt),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Ol),u.LFG(Ra))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const yl=new u.OlP("");let zu=(()=>{class A{constructor(b,P,j,ee,ie={}){this.urlSerializer=b,this.transitions=P,this.viewportScroller=j,this.zone=ee,this.options=ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ie.scrollPositionRestoration=ie.scrollPositionRestoration||"disabled",ie.anchorScrolling=ie.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Vt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof sn&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Xn&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xn(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){var b,P;null===(b=this.routerEventsSubscription)||void 0===b||b.unsubscribe(),null===(P=this.scrollEventsSubscription)||void 0===P||P.unsubscribe()}}return A.\u0275fac=function(b){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();var Ji=(()=>((Ji=Ji||{})[Ji.COMPLETE=0]="COMPLETE",Ji[Ji.FAILED=1]="FAILED",Ji[Ji.REDIRECTING=2]="REDIRECTING",Ji))();const cr=!1;function Br(A,R){return{\u0275kind:A,\u0275providers:R}}const Zn=new u.OlP("",{providedIn:"root",factory:()=>!1});function Dr(){const A=(0,u.f3M)(u.zs3);return R=>{var b,P;const j=A.get(u.z2F);if(R!==j.components[0])return;const ee=A.get(Zt),ie=A.get(xn);1===A.get(ol)&&ee.initialNavigation(),null===(b=A.get(Nl,null,u.XFs.Optional))||void 0===b||b.setUpPreloading(),null===(P=A.get(yl,null,u.XFs.Optional))||void 0===P||P.init(),ee.resetRootComponentType(j.componentTypes[0]),ie.closed||(ie.next(),ie.unsubscribe())}}const xn=new u.OlP(cr?"bootstrap done indicator":"",{factory:()=>new it.x}),ol=new u.OlP(cr?"initial navigation":"",{providedIn:"root",factory:()=>1});function Gu(){let A=[];return A=cr?[{provide:u.Xts,multi:!0,useFactory:()=>{const R=(0,u.f3M)(Zt);return()=>R.events.subscribe(b=>{var P,j,ee,ie;null===(P=(j=console).group)||void 0===P||P.call(j,`Router Event: ${b.constructor.name}`),console.log(function Rr(A){var R,b,P,j;if(!("type"in A))return`Unknown Router Event: ${A.constructor.name}`;switch(A.type){case 14:return`ActivationEnd(path: '${(null===(R=A.snapshot.routeConfig)||void 0===R?void 0:R.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(b=A.snapshot.routeConfig)||void 0===b?void 0:b.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(P=A.snapshot.routeConfig)||void 0===P?void 0:P.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(j=A.snapshot.routeConfig)||void 0===j?void 0:j.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state}, shouldActivate: ${A.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 2:return`NavigationCancel(id: ${A.id}, url: '${A.url}')`;case 16:return`NavigationSkipped(id: ${A.id}, url: '${A.url}')`;case 1:return`NavigationEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${A.id}, url: '${A.url}', error: ${A.error})`;case 0:return`NavigationStart(id: ${A.id}, url: '${A.url}')`;case 6:return`ResolveEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 5:return`ResolveStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 10:return`RouteConfigLoadEnd(path: ${A.route.path})`;case 9:return`RouteConfigLoadStart(path: ${A.route.path})`;case 4:return`RoutesRecognized(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 15:return`Scroll(anchor: '${A.anchor}', position: '${A.position?`${A.position[0]}, ${A.position[1]}`:null}')`}}(b)),console.log(b),null===(ee=(ie=console).groupEnd)||void 0===ee||ee.call(ie)})}}]:[],Br(1,A)}const Nl=new u.OlP(cr?"router preloader":"");function yu(A){return Br(0,[{provide:Nl,useExisting:kl},{provide:Ol,useExisting:A}])}const ti=!1,al=new u.OlP(ti?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Yl=[qe.Ye,{provide:Be,useClass:Ge},Zt,No,{provide:Cs,useFactory:function Ma(A){return A.routerState.root},deps:[Zt]},Ra,ti?{provide:Zn,useValue:!0}:[]];function ds(){return new u.PXZ("Router",Zt)}let Oa=(()=>{class A{constructor(b){}static forRoot(b,P){return{ngModule:A,providers:[Yl,ti&&null!=P&&P.enableTracing?Gu().\u0275providers:[],{provide:Js,multi:!0,useValue:b},{provide:al,useFactory:vl,deps:[[Zt,new u.FiY,new u.tp0]]},{provide:Ki,useValue:P||{}},null!=P&&P.useHash?{provide:qe.S$,useClass:qe.Do}:{provide:qe.S$,useClass:qe.b0},{provide:yl,useFactory:()=>{const A=(0,u.f3M)(qe.EM),R=(0,u.f3M)(u.R0b),b=(0,u.f3M)(Ki),P=(0,u.f3M)(pa),j=(0,u.f3M)(Be);return b.scrollOffset&&A.setOffset(b.scrollOffset),new zu(j,P,A,R,b)}},null!=P&&P.preloadingStrategy?yu(P.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:ds},null!=P&&P.initialNavigation?gi(P):[],[{provide:Vo,useFactory:Dr},{provide:u.tb,multi:!0,useExisting:Vo}]]}}static forChild(b){return{ngModule:A,providers:[{provide:Js,multi:!0,useValue:b}]}}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(al,8))},A.\u0275mod=u.oAB({type:A}),A.\u0275inj=u.cJS({imports:[yi]}),A})();function vl(A){if(ti&&A)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gi(A){return["disabled"===A.initialNavigation?Br(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const R=(0,u.f3M)(Zt);return()=>{R.setUpLocationChangeListener()}}},{provide:ol,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Br(2,[{provide:ol,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:R=>{const b=R.get(qe.V_,Promise.resolve());return()=>b.then(()=>new Promise(P=>{const j=R.get(Zt),ee=R.get(xn);(function Ka(A,R){A.events.pipe((0,ct.h)(b=>b instanceof sn||b instanceof Pn||b instanceof xr||b instanceof bn),(0,nt.U)(b=>b instanceof sn||b instanceof bn?Ji.COMPLETE:b instanceof Pn&&(0===b.code||1===b.code)?Ji.REDIRECTING:Ji.FAILED),(0,ct.h)(b=>b!==Ji.REDIRECTING),(0,ze.q)(1)).subscribe(()=>{R()})})(j,()=>{P(!0)}),R.get(pa).afterPreactivation=()=>(P(!0),ee.closed?(0,W.of)(void 0):ee),j.initialNavigation()}))}}]).\u0275providers:[]]}const Vo=new u.OlP(ti?"Router Initializer":"")},3942:(yn,Et,V)=>{"use strict";V.d(Et,{Z:()=>lt});var u=V(2090),Q=V(4859),W=V(2951),xe=V(1877);class Oe{constructor(De,ye){this._delegate=De,this.firebase=ye,(0,W._addComponent)(De,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(De,ye=W._DEFAULT_ENTRY_NAME){var ue;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(De);return!rt.isInitialized()&&"EXPLICIT"===(null===(ue=rt.getComponent())||void 0===ue?void 0:ue.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:ye})}_removeServiceInstance(De,ye=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(ye)}_addComponent(De){(0,W._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,W._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),me=function je(){const At=function Ne(At){const De={},ye={__esModule:!0,initializeApp:function pt(Pe,Te={}){const Se=W.initializeApp(Pe,Te);if((0,u.r3)(De,Se.name))return De[Se.name];const it=new At(Se,ye);return De[Se.name]=it,it},app:rt,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function He(Pe){const Te=Pe.name,Se=Te.replace("-compat","");if(W._registerComponent(Pe)&&"PUBLIC"===Pe.type){const it=(qe=rt())=>{if("function"!=typeof qe[Se])throw ve.create("invalid-app-argument",{appName:Te});return qe[Se]()};void 0!==Pe.serviceProps&&(0,u.ZB)(it,Pe.serviceProps),ye[Se]=it,At.prototype[Se]=function(...qe){return this._getService.bind(this,Te).apply(this,Pe.multipleInstances?qe:[])}}return"PUBLIC"===Pe.type?ye[Se]:null},removeApp:function ue(Pe){delete De[Pe]},useAsService:function z(Pe,Te){return"serverAuth"===Te?null:Te},modularAPIs:W}};function rt(Pe){if(!(0,u.r3)(De,Pe=Pe||W._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Pe});return De[Pe]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function et(){return Object.keys(De).map(Pe=>De[Pe])}}),rt.App=At,ye}(Oe);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:je,extendNamespace:function De(ye){(0,u.ZB)(At,ye)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),At}(),ce=new xe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const At=self.firebase.SDK_VERSION;At&&At.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=me;!function Ve(At){(0,W.registerVersion)("@firebase/app-compat","0.2.9",At)}()},2951:(yn,Et,V)=>{"use strict";V.r(Et),V.d(Et,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>Di,_DEFAULT_ENTRY_NAME:()=>Nr,_addComponent:()=>mn,_addOrOverwriteComponent:()=>cn,_apps:()=>dr,_clearComponents:()=>_r,_components:()=>Rn,_getProvider:()=>Vr,_registerComponent:()=>Vn,_removeServiceInstance:()=>Jt,deleteApp:()=>Tr,getApp:()=>Yn,getApps:()=>ai,initializeApp:()=>or,onLog:()=>Be,registerVersion:()=>kt,setLogLevel:()=>Ge});var u=V(5861),Q=V(4859),W=V(1877),xe=V(2090);const Oe=(Rt,bt)=>bt.some(Kt=>Rt instanceof Kt);let ke,ve;const me=new WeakMap,ce=new WeakMap,he=new WeakMap,Re=new WeakMap,Ve=new WeakMap;let De={get(Rt,bt,Kt){if(Rt instanceof IDBTransaction){if("done"===bt)return ce.get(Rt);if("objectStoreNames"===bt)return Rt.objectStoreNames||he.get(Rt);if("store"===bt)return Kt.objectStoreNames[1]?void 0:Kt.objectStore(Kt.objectStoreNames[0])}return pt(Rt[bt])},set:(Rt,bt,Kt)=>(Rt[bt]=Kt,!0),has:(Rt,bt)=>Rt instanceof IDBTransaction&&("done"===bt||"store"===bt)||bt in Rt};function rt(Rt){return"function"==typeof Rt?function ue(Rt){return Rt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function je(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Rt)?function(...bt){return Rt.apply(et(this),bt),pt(me.get(this))}:function(...bt){return pt(Rt.apply(et(this),bt))}:function(bt,...Kt){const An=Rt.call(et(this),bt,...Kt);return he.set(An,bt.sort?bt.sort():[bt]),pt(An)}}(Rt):(Rt instanceof IDBTransaction&&function At(Rt){if(ce.has(Rt))return;const bt=new Promise((Kt,An)=>{const jn=()=>{Rt.removeEventListener("complete",lr),Rt.removeEventListener("error",Er),Rt.removeEventListener("abort",Er)},lr=()=>{Kt(),jn()},Er=()=>{An(Rt.error||new DOMException("AbortError","AbortError")),jn()};Rt.addEventListener("complete",lr),Rt.addEventListener("error",Er),Rt.addEventListener("abort",Er)});ce.set(Rt,bt)}(Rt),Oe(Rt,function Ne(){return ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Rt,De):Rt)}function pt(Rt){if(Rt instanceof IDBRequest)return function lt(Rt){const bt=new Promise((Kt,An)=>{const jn=()=>{Rt.removeEventListener("success",lr),Rt.removeEventListener("error",Er)},lr=()=>{Kt(pt(Rt.result)),jn()},Er=()=>{An(Rt.error),jn()};Rt.addEventListener("success",lr),Rt.addEventListener("error",Er)});return bt.then(Kt=>{Kt instanceof IDBCursor&&me.set(Kt,Rt)}).catch(()=>{}),Ve.set(bt,Rt),bt}(Rt);if(Re.has(Rt))return Re.get(Rt);const bt=rt(Rt);return bt!==Rt&&(Re.set(Rt,bt),Ve.set(bt,Rt)),bt}const et=Rt=>Ve.get(Rt),Pe=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Se=new Map;function it(Rt,bt){if(!(Rt instanceof IDBDatabase)||bt in Rt||"string"!=typeof bt)return;if(Se.get(bt))return Se.get(bt);const Kt=bt.replace(/FromIndex$/,""),An=bt!==Kt,jn=Te.includes(Kt);if(!(Kt in(An?IDBIndex:IDBObjectStore).prototype)||!jn&&!Pe.includes(Kt))return;const lr=function(){var Er=(0,u.Z)(function*($n,...pr){const mr=this.transaction($n,jn?"readwrite":"readonly");let jr=mr.store;return An&&(jr=jr.index(pr.shift())),(yield Promise.all([jr[Kt](...pr),jn&&mr.done]))[0]});return function(pr){return Er.apply(this,arguments)}}();return Se.set(bt,lr),lr}!function ye(Rt){De=Rt(De)}(Rt=>({...Rt,get:(bt,Kt,An)=>it(bt,Kt)||Rt.get(bt,Kt,An),has:(bt,Kt)=>!!it(bt,Kt)||Rt.has(bt,Kt)}));class qe{constructor(bt){this.container=bt}getPlatformInfoString(){return this.container.getProviders().map(Kt=>{if(function nt(Rt){const bt=Rt.getComponent();return"VERSION"===(null==bt?void 0:bt.type)}(Kt)){const An=Kt.getImmediate();return`${An.library}/${An.version}`}return null}).filter(Kt=>Kt).join(" ")}}const tt="@firebase/app",_t=new W.Yd("@firebase/app"),Nr="[DEFAULT]",Ai={[tt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dr=new Map,Rn=new Map;function mn(Rt,bt){try{Rt.container.addComponent(bt)}catch(Kt){_t.debug(`Component ${bt.name} failed to register with FirebaseApp ${Rt.name}`,Kt)}}function cn(Rt,bt){Rt.container.addOrOverwriteComponent(bt)}function Vn(Rt){const bt=Rt.name;if(Rn.has(bt))return _t.debug(`There were multiple attempts to register component ${bt}.`),!1;Rn.set(bt,Rt);for(const Kt of dr.values())mn(Kt,Rt);return!0}function Vr(Rt,bt){const Kt=Rt.container.getProvider("heartbeat").getImmediate({optional:!0});return Kt&&Kt.triggerHeartbeat(),Rt.container.getProvider(bt)}function Jt(Rt,bt,Kt=Nr){Vr(Rt,bt).clearInstance(Kt)}function _r(){Rn.clear()}const ii=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fr{constructor(bt,Kt,An){this._isDeleted=!1,this._options=Object.assign({},bt),this._config=Object.assign({},Kt),this._name=Kt.name,this._automaticDataCollectionEnabled=Kt.automaticDataCollectionEnabled,this._container=An,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(bt){this.checkDestroyed(),this._automaticDataCollectionEnabled=bt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(bt){this._isDeleted=bt}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const Di="9.21.0";function or(Rt,bt={}){let Kt=Rt;"object"!=typeof bt&&(bt={name:bt});const An=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},bt),jn=An.name;if("string"!=typeof jn||!jn)throw ii.create("bad-app-name",{appName:String(jn)});if(Kt||(Kt=(0,xe.aH)()),!Kt)throw ii.create("no-options");const lr=dr.get(jn);if(lr){if((0,xe.vZ)(Kt,lr.options)&&(0,xe.vZ)(An,lr.config))return lr;throw ii.create("duplicate-app",{appName:jn})}const Er=new Q.H0(jn);for(const pr of Rn.values())Er.addComponent(pr);const $n=new Fr(Kt,An,Er);return dr.set(jn,$n),$n}function Yn(Rt=Nr){const bt=dr.get(Rt);if(!bt&&Rt===Nr)return or();if(!bt)throw ii.create("no-app",{appName:Rt});return bt}function ai(){return Array.from(dr.values())}function Tr(Rt){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(Rt){const bt=Rt.name;dr.has(bt)&&(dr.delete(bt),yield Promise.all(Rt.container.getProviders().map(Kt=>Kt.delete())),Rt.isDeleted=!0)})).apply(this,arguments)}function kt(Rt,bt,Kt){var An;let jn=null!==(An=Ai[Rt])&&void 0!==An?An:Rt;Kt&&(jn+=`-${Kt}`);const lr=jn.match(/\s|\//),Er=bt.match(/\s|\//);if(lr||Er){const $n=[`Unable to register library "${jn}" with version "${bt}":`];return lr&&$n.push(`library name "${jn}" contains illegal characters (whitespace or "/")`),lr&&Er&&$n.push("and"),Er&&$n.push(`version name "${bt}" contains illegal characters (whitespace or "/")`),void _t.warn($n.join(" "))}Vn(new Q.wA(`${jn}-version`,()=>({library:jn,version:bt}),"VERSION"))}function Be(Rt,bt){if(null!==Rt&&"function"!=typeof Rt)throw ii.create("invalid-log-argument");(0,W.Am)(Rt,bt)}function Ge(Rt){(0,W.Ub)(Rt)}const jt="firebase-heartbeat-database",$t=1,ge="firebase-heartbeat-store";let fe=null;function $e(){return fe||(fe=function He(Rt,bt,{blocked:Kt,upgrade:An,blocking:jn,terminated:lr}={}){const Er=indexedDB.open(Rt,bt),$n=pt(Er);return An&&Er.addEventListener("upgradeneeded",pr=>{An(pt(Er.result),pr.oldVersion,pr.newVersion,pt(Er.transaction),pr)}),Kt&&Er.addEventListener("blocked",pr=>Kt(pr.oldVersion,pr.newVersion,pr)),$n.then(pr=>{lr&&pr.addEventListener("close",()=>lr()),jn&&pr.addEventListener("versionchange",mr=>jn(mr.oldVersion,mr.newVersion,mr))}).catch(()=>{}),$n}(jt,$t,{upgrade:(Rt,bt)=>{0===bt&&Rt.createObjectStore(ge)}}).catch(Rt=>{throw ii.create("idb-open",{originalErrorMessage:Rt.message})})),fe}function dt(){return(dt=(0,u.Z)(function*(Rt){try{return(yield $e()).transaction(ge).objectStore(ge).get(Me(Rt))}catch(bt){if(bt instanceof xe.ZR)_t.warn(bt.message);else{const Kt=ii.create("idb-get",{originalErrorMessage:null==bt?void 0:bt.message});_t.warn(Kt.message)}}})).apply(this,arguments)}function un(Rt,bt){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,u.Z)(function*(Rt,bt){try{const An=(yield $e()).transaction(ge,"readwrite");return yield An.objectStore(ge).put(bt,Me(Rt)),An.done}catch(Kt){if(Kt instanceof xe.ZR)_t.warn(Kt.message);else{const An=ii.create("idb-set",{originalErrorMessage:null==Kt?void 0:Kt.message});_t.warn(An.message)}}})).apply(this,arguments)}function Me(Rt){return`${Rt.name}!${Rt.options.appId}`}class Mt{constructor(bt){this.container=bt,this._heartbeatsCache=null;const Kt=this.container.getProvider("app").getImmediate();this._storage=new Nn(Kt),this._heartbeatsCachePromise=this._storage.read().then(An=>(this._heartbeatsCache=An,An))}triggerHeartbeat(){var bt=this;return(0,u.Z)(function*(){const An=bt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jn=Xt();if(null===bt._heartbeatsCache&&(bt._heartbeatsCache=yield bt._heartbeatsCachePromise),bt._heartbeatsCache.lastSentHeartbeatDate!==jn&&!bt._heartbeatsCache.heartbeats.some(lr=>lr.date===jn))return bt._heartbeatsCache.heartbeats.push({date:jn,agent:An}),bt._heartbeatsCache.heartbeats=bt._heartbeatsCache.heartbeats.filter(lr=>{const Er=new Date(lr.date).valueOf();return Date.now()-Er<=2592e6}),bt._storage.overwrite(bt._heartbeatsCache)})()}getHeartbeatsHeader(){var bt=this;return(0,u.Z)(function*(){if(null===bt._heartbeatsCache&&(yield bt._heartbeatsCachePromise),null===bt._heartbeatsCache||0===bt._heartbeatsCache.heartbeats.length)return"";const Kt=Xt(),{heartbeatsToSend:An,unsentEntries:jn}=function vn(Rt,bt=1024){const Kt=[];let An=Rt.slice();for(const jn of Rt){const lr=Kt.find(Er=>Er.agent===jn.agent);if(lr){if(lr.dates.push(jn.date),rr(Kt)>bt){lr.dates.pop();break}}else if(Kt.push({agent:jn.agent,dates:[jn.date]}),rr(Kt)>bt){Kt.pop();break}An=An.slice(1)}return{heartbeatsToSend:Kt,unsentEntries:An}}(bt._heartbeatsCache.heartbeats),lr=(0,xe.L)(JSON.stringify({version:2,heartbeats:An}));return bt._heartbeatsCache.lastSentHeartbeatDate=Kt,jn.length>0?(bt._heartbeatsCache.heartbeats=jn,yield bt._storage.overwrite(bt._heartbeatsCache)):(bt._heartbeatsCache.heartbeats=[],bt._storage.overwrite(bt._heartbeatsCache)),lr})()}}function Xt(){return(new Date).toISOString().substring(0,10)}class Nn{constructor(bt){this.app=bt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var bt=this;return(0,u.Z)(function*(){return(yield bt._canUseIndexedDBPromise)&&(yield function It(Rt){return dt.apply(this,arguments)}(bt.app))||{heartbeats:[]}})()}overwrite(bt){var Kt=this;return(0,u.Z)(function*(){var An;if(yield Kt._canUseIndexedDBPromise){const lr=yield Kt.read();return un(Kt.app,{lastSentHeartbeatDate:null!==(An=bt.lastSentHeartbeatDate)&&void 0!==An?An:lr.lastSentHeartbeatDate,heartbeats:bt.heartbeats})}})()}add(bt){var Kt=this;return(0,u.Z)(function*(){var An;if(yield Kt._canUseIndexedDBPromise){const lr=yield Kt.read();return un(Kt.app,{lastSentHeartbeatDate:null!==(An=bt.lastSentHeartbeatDate)&&void 0!==An?An:lr.lastSentHeartbeatDate,heartbeats:[...lr.heartbeats,...bt.heartbeats]})}})()}}function rr(Rt){return(0,xe.L)(JSON.stringify({version:2,heartbeats:Rt})).length}!function di(Rt){Vn(new Q.wA("platform-logger",bt=>new qe(bt),"PRIVATE")),Vn(new Q.wA("heartbeat",bt=>new Mt(bt),"PRIVATE")),kt(tt,"0.9.9",Rt),kt(tt,"0.9.9","esm2017"),kt("fire-js","")}("")},4859:(yn,Et,V)=>{"use strict";V.d(Et,{H0:()=>Ne,wA:()=>W,zt:()=>Oe});var u=V(5861),Q=V(2090);class W{constructor(me,ce,he){this.name=me,this.instanceFactory=ce,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const xe="[DEFAULT]";class Oe{constructor(me,ce){this.name=me,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const ce=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(ce)){const he=new Q.BH;if(this.instancesDeferred.set(ce,he),this.isInitialized(ce)||this.shouldAutoInitialize())try{const Re=this.getOrInitializeService({instanceIdentifier:ce});Re&&he.resolve(Re)}catch(Re){}}return this.instancesDeferred.get(ce).promise}getImmediate(me){var ce;const he=this.normalizeInstanceIdentifier(null==me?void 0:me.identifier),Re=null!==(ce=null==me?void 0:me.optional)&&void 0!==ce&&ce;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(Re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(Ve){if(Re)return null;throw Ve}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function ve(je){return"EAGER"===je.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(ce){}for(const[ce,he]of this.instancesDeferred.entries()){const Re=this.normalizeInstanceIdentifier(ce);try{const Ve=this.getOrInitializeService({instanceIdentifier:Re});he.resolve(Ve)}catch(Ve){}}}}clearInstance(me=xe){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,u.Z)(function*(){const ce=Array.from(me.instances.values());yield Promise.all([...ce.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...ce.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=xe){return this.instances.has(me)}getOptions(me=xe){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:ce={}}=me,he=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Re=this.getOrInitializeService({instanceIdentifier:he,options:ce});for(const[Ve,lt]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(Ve)&&lt.resolve(Re);return Re}onInit(me,ce){var he;const Re=this.normalizeInstanceIdentifier(ce),Ve=null!==(he=this.onInitCallbacks.get(Re))&&void 0!==he?he:new Set;Ve.add(me),this.onInitCallbacks.set(Re,Ve);const lt=this.instances.get(Re);return lt&&me(lt,Re),()=>{Ve.delete(me)}}invokeOnInitCallbacks(me,ce){const he=this.onInitCallbacks.get(ce);if(he)for(const Re of he)try{Re(me,ce)}catch(Ve){}}getOrInitializeService({instanceIdentifier:me,options:ce={}}){let he=this.instances.get(me);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(je=me,je===xe?void 0:je),options:ce}),this.instances.set(me,he),this.instancesOptions.set(me,ce),this.invokeOnInitCallbacks(he,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,he)}catch(Re){}var je;return he||null}normalizeInstanceIdentifier(me=xe){return this.component?this.component.multipleInstances?me:xe:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const ce=this.getProvider(me.name);if(ce.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);ce.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const ce=new Oe(me,this);return this.providers.set(me,ce),ce}getProviders(){return Array.from(this.providers.values())}}},1877:(yn,Et,V)=>{"use strict";V.d(Et,{Am:()=>je,Ub:()=>Ne,Yd:()=>ve,in:()=>Q});const u=[];var Q=(()=>{return(me=Q||(Q={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",Q;var me})();const W={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},xe=Q.INFO,Oe={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ke=(me,ce,...he)=>{if(ce<me.logLevel)return;const Re=(new Date).toISOString(),Ve=Oe[ce];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[Ve](`[${Re}]  ${me.name}:`,...he)};class ve{constructor(ce){this.name=ce,this._logLevel=xe,this._logHandler=ke,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in Q))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?W[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...ce),this._logHandler(this,Q.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...ce),this._logHandler(this,Q.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...ce),this._logHandler(this,Q.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...ce),this._logHandler(this,Q.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...ce),this._logHandler(this,Q.ERROR,...ce)}}function Ne(me){u.forEach(ce=>{ce.setLogLevel(me)})}function je(me,ce){for(const he of u){let Re=null;ce&&ce.level&&(Re=W[ce.level]),he.userLogHandler=null===me?null:(Ve,lt,...At)=>{const De=At.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(ue){return null}}).filter(ye=>ye).join(" ");lt>=(null!=Re?Re:Ve.logLevel)&&me({level:Q[lt].toLowerCase(),message:De,args:At,type:Ve.name})}}}},259:(yn,Et,V)=>{"use strict";V.d(Et,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=V(2951);(0,u.registerVersion)("firebase","9.21.0","app")},9260:(yn,Et,V)=>{"use strict";V.d(Et,{Z:()=>u.Z});var u=V(3942);u.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(yn,Et,V)=>{"use strict";V.r(Et);var u=V(5861),Q=V(3942),W=V(2090),xe=V(2951),Oe=V(655),ke=V(1877),ve=V(4859);const je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},he_EMAIL_SIGNIN="EMAIL_SIGNIN",he_PASSWORD_RESET="PASSWORD_RESET",he_RECOVER_EMAIL="RECOVER_EMAIL",he_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",he_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",he_VERIFY_EMAIL="VERIFY_EMAIL";const lt=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},At=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},De=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ue=new ke.Yd("@firebase/auth");function pt(D,...v){ue.logLevel<=ke.in.ERROR&&ue.error(`Auth (${xe.SDK_VERSION}): ${D}`,...v)}function et(D,...v){throw Te(D,...v)}function He(D,...v){return Te(D,...v)}function z(D,v,_){const x=Object.assign(Object.assign({},At()),{[v]:_});return new W.LL("auth","Firebase",x).create(v,{appName:D.name})}function Pe(D,v,_){if(!(v instanceof _))throw _.name!==v.constructor.name&&et(D,"argument-error"),z(D,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(D,...v){if("string"!=typeof D){const _=v[0],x=[...v.slice(1)];return x[0]&&(x[0].appName=D.name),D._errorFactory.create(_,...x)}return De.create(D,...v)}function Se(D,v,..._){if(!D)throw Te(v,..._)}function it(D){const v="INTERNAL ASSERTION FAILED: "+D;throw pt(v),new Error(v)}function qe(D,v){D||it(v)}function nt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function tt(){return"http:"===ze()||"https:"===ze()}function ze(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class we{constructor(v,_){this.shortDelay=v,this.longDelay=_,qe(_>v,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function _t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tt()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(D,v){qe(D.emulator,"Emulator should always be set here");const{url:_}=D.emulator;return v?`${_}${v.startsWith("/")?v.slice(1):v}`:_}class Ie{static initialize(v,_,x){this.fetchImpl=v,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const at={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ye=new we(3e4,6e4);function Ke(D,v){return D.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:D.tenantId}):v}function Ue(D,v,_,x){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*(D,v,_,x,G={}){return Wt(D,G,(0,u.Z)(function*(){let re={},Qe={};x&&("GET"===v?Qe=x:re={body:JSON.stringify(x)});const yt=(0,W.xO)(Object.assign({key:D.config.apiKey},Qe)).slice(1),zt=yield D._getAdditionalHeaders();return zt["Content-Type"]="application/json",D.languageCode&&(zt["X-Firebase-Locale"]=D.languageCode),Ie.fetch()(Kn(D,D.config.apiHost,_,yt),Object.assign({method:v,headers:zt,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function Wt(D,v,_){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,u.Z)(function*(D,v,_){D._canInitEmulator=!1;const x=Object.assign(Object.assign({},at),v);try{const G=new er(D),re=yield Promise.race([_(),G.promise]);G.clearNetworkTimeout();const Qe=yield re.json();if("needConfirmation"in Qe)throw kn(D,"account-exists-with-different-credential",Qe);if(re.ok&&!("errorMessage"in Qe))return Qe;{const yt=re.ok?Qe.errorMessage:Qe.error.message,[zt,wn]=yt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zt)throw kn(D,"credential-already-in-use",Qe);if("EMAIL_EXISTS"===zt)throw kn(D,"email-already-in-use",Qe);if("USER_DISABLED"===zt)throw kn(D,"user-disabled",Qe);const zn=x[zt]||zt.toLowerCase().replace(/[_\s]+/g,"-");if(wn)throw z(D,zn,wn);et(D,zn)}}catch(G){if(G instanceof W.ZR)throw G;et(D,"network-request-failed",{message:String(G)})}})).apply(this,arguments)}function Ct(D,v,_,x){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,u.Z)(function*(D,v,_,x,G={}){const re=yield Ue(D,v,_,x,G);return"mfaPendingCredential"in re&&et(D,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function Kn(D,v,_,x){const G=`${v}${_}?${x}`;return D.config.emulator?Ae(D.config,G):`${D.config.apiScheme}://${G}`}class er{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(He(this.auth,"network-request-failed")),Ye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(D,v,_){const x={appName:D.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const G=He(D,v,x);return G.customData._tokenResponse=_,G}function hr(){return(hr=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function yr(){return(yr=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function nn(D){if(D)try{const v=new Date(Number(D));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function Nr(){return(Nr=(0,u.Z)(function*(D,v=!1){const _=(0,W.m9)(D),x=yield _.getIdToken(v),G=dr(x);Se(G&&G.exp&&G.auth_time&&G.iat,_.auth,"internal-error");const re="object"==typeof G.firebase?G.firebase:void 0,Qe=null==re?void 0:re.sign_in_provider;return{claims:G,token:x,authTime:nn(Ai(G.auth_time)),issuedAtTime:nn(Ai(G.iat)),expirationTime:nn(Ai(G.exp)),signInProvider:Qe||null,signInSecondFactor:(null==re?void 0:re.sign_in_second_factor)||null}})).apply(this,arguments)}function Ai(D){return 1e3*Number(D)}function dr(D){const[v,_,x]=D.split(".");if(void 0===v||void 0===_||void 0===x)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,W.tV)(_);return G?JSON.parse(G):(pt("Failed to decode base64 JWT payload"),null)}catch(G){return pt("Caught error parsing JWT payload as JSON",null==G?void 0:G.toString()),null}}function mn(D,v){return cn.apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(D,v,_=!1){if(_)return v;try{return yield v}catch(x){throw x instanceof W.ZR&&function Vn({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(x)&&D.auth.currentUser===D&&(yield D.auth.signOut()),x}})).apply(this,arguments)}class Vr{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var _;if(v){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const G=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(v=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(v);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),x)}iteration(){var v=this;return(0,u.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null==_?void 0:_.code)&&v.schedule(!0))}v.schedule()})()}}class Jt{constructor(v,_){this.createdAt=v,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _r(D){return ei.apply(this,arguments)}function ei(){return ei=(0,u.Z)(function*(D){var v;const _=D.auth,x=yield D.getIdToken(),G=yield mn(D,function Sn(D,v){return vr.apply(this,arguments)}(_,{idToken:x}));Se(null==G?void 0:G.users.length,_,"internal-error");const re=G.users[0];D._notifyReloadListener(re);const Qe=null!==(v=re.providerUserInfo)&&void 0!==v&&v.length?function or(D){return D.map(v=>{var{providerId:_}=v,x=(0,Oe._T)(v,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(re.providerUserInfo):[],yt=function Di(D,v){return[...D.filter(x=>!v.some(G=>G.providerId===x.providerId)),...v]}(D.providerData,Qe),zn=!!D.isAnonymous&&!(D.email&&re.passwordHash||null!=yt&&yt.length),Wn={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:yt,metadata:new Jt(re.createdAt,re.lastLoginAt),isAnonymous:zn};Object.assign(D,Wn)}),ei.apply(this,arguments)}function Fr(){return(Fr=(0,u.Z)(function*(D){const v=(0,W.m9)(D);yield _r(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(D,v){const _=yield Wt(D,{},(0,u.Z)(function*(){const x=(0,W.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:G,apiKey:re}=D.config,Qe=Kn(D,G,"/v1/token",`key=${re}`),yt=yield D._getAdditionalHeaders();return yt["Content-Type"]="application/x-www-form-urlencoded",Ie.fetch()(Qe,{method:"POST",headers:yt,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Se(v.idToken,"internal-error"),Se(typeof v.idToken<"u","internal-error"),Se(typeof v.refreshToken<"u","internal-error");const _="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Rn(D){const v=dr(D);return Se(v,"internal-error"),Se(typeof v.exp<"u","internal-error"),Se(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,_)}getToken(v,_=!1){var x=this;return(0,u.Z)(function*(){return Se(!x.accessToken||x.refreshToken,v,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(v,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,_){var x=this;return(0,u.Z)(function*(){const{accessToken:G,refreshToken:re,expiresIn:Qe}=yield function Yn(D,v){return ai.apply(this,arguments)}(v,_);x.updateTokensAndExpiration(G,re,Number(Qe))})()}updateTokensAndExpiration(v,_,x){this.refreshToken=_||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(v,_){const{refreshToken:x,accessToken:G,expirationTime:re}=_,Qe=new Tr;return x&&(Se("string"==typeof x,"internal-error",{appName:v}),Qe.refreshToken=x),G&&(Se("string"==typeof G,"internal-error",{appName:v}),Qe.accessToken=G),re&&(Se("number"==typeof re,"internal-error",{appName:v}),Qe.expirationTime=re),Qe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return it("not implemented")}}function Or(D,v){Se("string"==typeof D||typeof D>"u","internal-error",{appName:v})}class kt{constructor(v){var{uid:_,auth:x,stsTokenManager:G}=v,re=(0,Oe._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new Jt(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(v){var _=this;return(0,u.Z)(function*(){const x=yield mn(_,_.stsTokenManager.getToken(_.auth,v));return Se(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(v){return function oi(D){return Nr.apply(this,arguments)}(this,v)}reload(){return function ii(D){return Fr.apply(this,arguments)}(this)}_assign(v){this!==v&&(Se(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(_=>Object.assign({},_)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const _=new kt(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(v){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,_=!1){var x=this;return(0,u.Z)(function*(){let G=!1;v.idToken&&v.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(v),G=!0),_&&(yield _r(x)),yield x.auth._persistUserIfCurrent(x),G&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var v=this;return(0,u.Z)(function*(){const _=yield v.getIdToken();return yield mn(v,function dn(D,v){return hr.apply(this,arguments)}(v.auth,{idToken:_})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,_){var x,G,re,Qe,yt,zt,wn,zn;const Wn=null!==(x=_.displayName)&&void 0!==x?x:void 0,ts=null!==(G=_.email)&&void 0!==G?G:void 0,wa=null!==(re=_.phoneNumber)&&void 0!==re?re:void 0,qd=null!==(Qe=_.photoURL)&&void 0!==Qe?Qe:void 0,Ac=null!==(yt=_.tenantId)&&void 0!==yt?yt:void 0,xc=null!==(zt=_._redirectEventId)&&void 0!==zt?zt:void 0,Rs=null!==(wn=_.createdAt)&&void 0!==wn?wn:void 0,Qa=null!==(zn=_.lastLoginAt)&&void 0!==zn?zn:void 0,{uid:bl,emailVerified:Mu,isAnonymous:Rc,providerData:Kd,stsTokenManager:Mc}=_;Se(bl&&Mc,v,"internal-error");const Mh=Tr.fromJSON(this.name,Mc);Se("string"==typeof bl,v,"internal-error"),Or(Wn,v.name),Or(ts,v.name),Se("boolean"==typeof Mu,v,"internal-error"),Se("boolean"==typeof Rc,v,"internal-error"),Or(wa,v.name),Or(qd,v.name),Or(Ac,v.name),Or(xc,v.name),Or(Rs,v.name),Or(Qa,v.name);const Ph=new kt({uid:bl,auth:v,email:ts,emailVerified:Mu,displayName:Wn,isAnonymous:Rc,photoURL:qd,phoneNumber:wa,tenantId:Ac,stsTokenManager:Mh,createdAt:Rs,lastLoginAt:Qa});return Kd&&Array.isArray(Kd)&&(Ph.providerData=Kd.map(pd=>Object.assign({},pd))),xc&&(Ph._redirectEventId=xc),Ph}static _fromIdTokenResponse(v,_,x=!1){return(0,u.Z)(function*(){const G=new Tr;G.updateFromServerResponse(_);const re=new kt({uid:_.localId,auth:v,stsTokenManager:G,isAnonymous:x});return yield _r(re),re})()}}const Be=new Map;function Ge(D){qe(D instanceof Function,"Expected a class definition");let v=Be.get(D);return v?(qe(v instanceof D,"Instance stored in cache mismatched with class"),v):(v=new D,Be.set(D,v),v)}const $t=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,x){var G=this;return(0,u.Z)(function*(){G.storage[_]=x})()}_get(_){var x=this;return(0,u.Z)(function*(){const G=x.storage[_];return void 0===G?null:G})()}_remove(_){var x=this;return(0,u.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return D.type="NONE",D})();function ge(D,v,_){return`firebase:${D}:${v}:${_}`}class fe{constructor(v,_,x){this.persistence=v,this.auth=_,this.userKey=x;const{config:G,name:re}=this.auth;this.fullUserKey=ge(this.userKey,G.apiKey,re),this.fullPersistenceKey=ge("persistence",G.apiKey,re),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,u.Z)(function*(){const _=yield v.persistence._get(v.fullUserKey);return _?kt._fromJSON(v.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var _=this;return(0,u.Z)(function*(){if(_.persistence===v)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=v,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,_,x="authUser"){return(0,u.Z)(function*(){if(!_.length)return new fe(Ge($t),v,x);const G=(yield Promise.all(_.map(function(){var wn=(0,u.Z)(function*(zn){if(yield zn._isAvailable())return zn});return function(zn){return wn.apply(this,arguments)}}()))).filter(wn=>wn);let re=G[0]||Ge($t);const Qe=ge(x,v.config.apiKey,v.name);let yt=null;for(const wn of _)try{const zn=yield wn._get(Qe);if(zn){const Wn=kt._fromJSON(v,zn);wn!==re&&(yt=Wn),re=wn;break}}catch(zn){}const zt=G.filter(wn=>wn._shouldAllowMigration);return re._shouldAllowMigration&&zt.length?(re=zt[0],yt&&(yield re._set(Qe,yt.toJSON())),yield Promise.all(_.map(function(){var wn=(0,u.Z)(function*(zn){if(zn!==re)try{yield zn._remove(Qe)}catch(Wn){}});return function(zn){return wn.apply(this,arguments)}}())),new fe(re,v,x)):new fe(re,v,x)})()}}function $e(D){const v=D.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Fe(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(It(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(de(v))return"Blackberry";if(ut(v))return"Webos";if(dt(v))return"Safari";if((v.includes("chrome/")||un(v))&&!v.includes("edge/"))return"Chrome";if(Me(v))return"Android";{const x=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function It(D=(0,W.z$)()){return/firefox\//i.test(D)}function dt(D=(0,W.z$)()){const v=D.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function un(D=(0,W.z$)()){return/crios\//i.test(D)}function Fe(D=(0,W.z$)()){return/iemobile/i.test(D)}function Me(D=(0,W.z$)()){return/android/i.test(D)}function de(D=(0,W.z$)()){return/blackberry/i.test(D)}function ut(D=(0,W.z$)()){return/webos/i.test(D)}function Mt(D=(0,W.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function rr(D=(0,W.z$)()){return Mt(D)||Me(D)||ut(D)||de(D)||/windows phone/i.test(D)||Fe(D)}function Rt(D,v=[]){let _;switch(D){case"Browser":_=$e((0,W.z$)());break;case"Worker":_=`${$e((0,W.z$)())}-${D}`;break;default:_=D}const x=v.length?v.join(","):"FirebaseCore-web";return`${_}/JsCore/${xe.SDK_VERSION}/${x}`}function Kt(){return(Kt=(0,u.Z)(function*(D){return(yield Ue(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function An(D,v){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(D,v){return Ue(D,"GET","/v2/recaptchaConfig",Ke(D,v))})).apply(this,arguments)}function lr(D){return void 0!==D&&void 0!==D.getResponse}function Er(D){return void 0!==D&&void 0!==D.enterprise}class $n{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function mr(D){return new Promise((v,_)=>{const x=document.createElement("script");x.setAttribute("src",D),x.onload=v,x.onerror=G=>{const re=He("internal-error");re.customData=G,_(re)},x.type="text/javascript",x.charset="UTF-8",function pr(){var D,v;return null!==(v=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==v?v:document}().appendChild(x)})}function jr(D){return`__${D}${Math.floor(1e6*Math.random())}`}const gs="NO_RECAPTCHA";class ss{constructor(v){this.type="recaptcha-enterprise",this.auth=Ir(v)}verify(v="verify",_=!1){var x=this;return(0,u.Z)(function*(){function re(){return re=(0,u.Z)(function*(yt){if(!_){if(null==yt.tenantId&&null!=yt._agentRecaptchaConfig)return yt._agentRecaptchaConfig.siteKey;if(null!=yt.tenantId&&void 0!==yt._tenantRecaptchaConfigs[yt.tenantId])return yt._tenantRecaptchaConfigs[yt.tenantId].siteKey}return new Promise(function(){var zt=(0,u.Z)(function*(wn,zn){An(yt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wn=>{if(void 0!==Wn.recaptchaKey){const ts=new $n(Wn);return null==yt.tenantId?yt._agentRecaptchaConfig=ts:yt._tenantRecaptchaConfigs[yt.tenantId]=ts,wn(ts.siteKey)}zn(new Error("recaptcha Enterprise site key undefined"))}).catch(Wn=>{zn(Wn)})});return function(wn,zn){return zt.apply(this,arguments)}}())}),re.apply(this,arguments)}function Qe(yt,zt,wn){const zn=window.grecaptcha;Er(zn)?zn.enterprise.ready(()=>{zn.enterprise.execute(yt,{action:v}).then(Wn=>{zt(Wn)}).catch(()=>{zt(gs)})}):wn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((yt,zt)=>{(function G(yt){return re.apply(this,arguments)})(x.auth).then(wn=>{if(!_&&Er(window.grecaptcha))Qe(wn,yt,zt);else{if(typeof window>"u")return void zt(new Error("RecaptchaVerifier is only supported in browser"));mr("https://www.google.com/recaptcha/enterprise.js?render="+wn).then(()=>{Qe(wn,yt,zt)}).catch(zn=>{zt(zn)})}}).catch(wn=>{zt(wn)})})})()}}function Wr(D,v,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(D,v,_,x=!1){const G=new ss(D);let re;try{re=yield G.verify(_)}catch(yt){re=yield G.verify(_,!0)}const Qe=Object.assign({},v);return Object.assign(Qe,x?{captchaResp:re}:{captchaResponse:re}),Object.assign(Qe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Qe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Qe})).apply(this,arguments)}class nr{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,_){const x=re=>new Promise((Qe,yt)=>{try{Qe(v(re))}catch(zt){yt(zt)}});x.onAbort=_,this.queue.push(x);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(v){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===v)return;const x=[];try{for(const G of _.queue)yield G(v),G.onAbort&&x.push(G.onAbort)}catch(G){x.reverse();for(const re of x)try{re()}catch(Qe){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null==G?void 0:G.message})}})()}}class li{constructor(v,_,x,G){this.app=v,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=x,this.config=G,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zi(this),this.idTokenSubscription=new Zi(this),this.beforeStateQueue=new nr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=De,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=G.sdkClientVersion}_initializeWithPersistence(v,_){var x=this;return _&&(this._popupRedirectResolver=Ge(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var G,re;if(!x._deleted&&(x.persistenceManager=yield fe.create(x,v),!x._deleted)){if(null!==(G=x._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(Qe){}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(re=x.currentUser)||void 0===re?void 0:re.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,u.Z)(function*(){if(v._deleted)return;const _=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||_){if(v.currentUser&&_&&v.currentUser.uid===_.uid)return v._currentUser._assign(_),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(_,!0)}})()}initializeCurrentUser(v){var _=this;return(0,u.Z)(function*(){var x;const G=yield _.assertedPersistence.getCurrentUser();let re=G,Qe=!1;if(v&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const yt=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,zt=null==re?void 0:re._redirectEventId,wn=yield _.tryRedirectSignIn(v);(!yt||yt===zt)&&null!=wn&&wn.user&&(re=wn.user,Qe=!0)}if(!re)return _.directlySetCurrentUser(null);if(!re._redirectEventId){if(Qe)try{yield _.beforeStateQueue.runMiddleware(re)}catch(yt){re=G,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(yt))}return re?_.reloadAndSetCurrentUserOrClear(re):_.directlySetCurrentUser(null)}return Se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===re._redirectEventId?_.directlySetCurrentUser(re):_.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(v){var _=this;return(0,u.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,v,!0)}catch(G){yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(v){var _=this;return(0,u.Z)(function*(){try{yield _r(v)}catch(x){if("auth/network-request-failed"!==(null==x?void 0:x.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function ct(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var v=this;return(0,u.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var _=this;return(0,u.Z)(function*(){const x=v?(0,W.m9)(v):null;return x&&Se(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(v,_=!1){var x=this;return(0,u.Z)(function*(){if(!x._deleted)return v&&Se(x.tenantId===v.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(v)),x.queue((0,u.Z)(function*(){yield x.directlySetCurrentUser(v),x.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,u.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(Ge(v))}))}initializeRecaptchaConfig(){var v=this;return(0,u.Z)(function*(){const _=yield An(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new $n(_);null==v.tenantId?v._agentRecaptchaConfig=x:v._tenantRecaptchaConfigs[v.tenantId]=x,x.emailPasswordEnabled&&new ss(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new W.LL("auth","Firebase",v())}onAuthStateChanged(v,_,x){return this.registerStateListener(this.authStateSubscription,v,_,x)}beforeAuthStateChanged(v,_){return this.beforeStateQueue.pushCallback(v,_)}onIdTokenChanged(v,_,x){return this.registerStateListener(this.idTokenSubscription,v,_,x)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,_){var x=this;return(0,u.Z)(function*(){const G=yield x.getOrInitRedirectPersistenceManager(_);return null===v?G.removeCurrentUser():G.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const x=v&&Ge(v)||_._popupRedirectResolver;Se(x,_,"argument-error"),_.redirectPersistenceManager=yield fe.create(_,[Ge(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(v){var _=this;return(0,u.Z)(function*(){var x,G;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===v?_._currentUser:(null===(G=_.redirectUser)||void 0===G?void 0:G._redirectEventId)===v?_.redirectUser:null})()}_persistUserIfCurrent(v){var _=this;return(0,u.Z)(function*(){if(v===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,_,x,G){if(this._deleted)return()=>{};const re="function"==typeof _?_:_.next.bind(_),Qe=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(Qe,this,"internal-error"),Qe.then(()=>re(this.currentUser)),"function"==typeof _?v.addObserver(_,x,G):v.addObserver(_)}directlySetCurrentUser(v){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==v&&_._currentUser._stopProactiveRefresh(),v&&_.isProactiveRefreshEnabled&&v._startProactiveRefresh(),_.currentUser=v,v?yield _.assertedPersistence.setCurrentUser(v):yield _.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,u.Z)(function*(){var _;const x={"X-Client-Version":v.clientVersion};v.app.options.appId&&(x["X-Firebase-gmpid"]=v.app.options.appId);const G=yield null===(_=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();G&&(x["X-Firebase-Client"]=G);const re=yield v._getAppCheckToken();return re&&(x["X-Firebase-AppCheck"]=re),x})()}_getAppCheckToken(){var v=this;return(0,u.Z)(function*(){var _;const x=yield null===(_=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return null!=x&&x.error&&function rt(D,...v){ue.logLevel<=ke.in.WARN&&ue.warn(`Auth (${xe.SDK_VERSION}): ${D}`,...v)}(`Error while retrieving App Check token: ${x.error}`),null==x?void 0:x.token})()}}function Ir(D){return(0,W.m9)(D)}class Zi{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,W.ne)(_=>this.observer=_)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ft(D){const v=D.indexOf(":");return v<0?"":D.substr(0,v+1)}function ae(D){if(!D)return null;const v=Number(D);return isNaN(v)?null:v}class vt{constructor(v,_){this.providerId=v,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(v){return it("not implemented")}_linkToIdToken(v,_){return it("not implemented")}_getReauthenticationResolver(v){return it("not implemented")}}function Ft(D,v){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:resetPassword",Ke(D,v))})).apply(this,arguments)}function sn(D,v){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:update",Ke(D,v))})).apply(this,arguments)}function zr(D,v){return xi.apply(this,arguments)}function xi(){return(xi=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithPassword",Ke(D,v))})).apply(this,arguments)}function ar(D,v){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:sendOobCode",Ke(D,v))})).apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(function*(D,v){return ar(D,v)})).apply(this,arguments)}function wt(D,v){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(function*(D,v){return ar(D,v)})).apply(this,arguments)}function an(D,v){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,u.Z)(function*(D,v){return ar(D,v)})).apply(this,arguments)}function Xn(){return(Xn=(0,u.Z)(function*(D,v){return ar(D,v)})).apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithEmailLink",Ke(D,v))})).apply(this,arguments)}function Fi(){return(Fi=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithEmailLink",Ke(D,v))})).apply(this,arguments)}class Xi extends vt{constructor(v,_,x,G=null){super("password",x),this._email=v,this._password=_,this._tenantId=G}static _fromEmailAndPassword(v,_){return new Xi(v,_,"password")}static _fromEmailAndCode(v,_,x=null){return new Xi(v,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v;if(null!=_&&_.email&&null!=_&&_.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(v){var _=this;return(0,u.Z)(function*(){var x;switch(_.signInMethod){case"password":const G={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=v._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const re=yield Wr(v,G,"signInWithPassword");return zr(v,re)}return zr(v,G).catch(function(){var re=(0,u.Z)(function*(Qe){if("auth/missing-recaptcha-token"===Qe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const yt=yield Wr(v,G,"signInWithPassword");return zr(v,yt)}return Promise.reject(Qe)});return function(Qe){return re.apply(this,arguments)}}());case"emailLink":return function Rr(D,v){return Bs.apply(this,arguments)}(v,{email:_._email,oobCode:_._password});default:et(v,"internal-error")}})()}_linkToIdToken(v,_){var x=this;return(0,u.Z)(function*(){switch(x.signInMethod){case"password":return sn(v,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function qs(D,v){return Fi.apply(this,arguments)}(v,{idToken:_,email:x._email,oobCode:x._password});default:et(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function os(D,v){return ko.apply(this,arguments)}function ko(){return(ko=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithIdp",Ke(D,v))})).apply(this,arguments)}class Li extends vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const _=new Li(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(_.idToken=v.idToken),v.accessToken&&(_.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(_.nonce=v.nonce),v.pendingToken&&(_.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(_.accessToken=v.oauthToken,_.secret=v.oauthTokenSecret):et("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:G}=_,re=(0,Oe._T)(_,["providerId","signInMethod"]);if(!x||!G)return null;const Qe=new Li(x,G);return Qe.idToken=re.idToken||void 0,Qe.accessToken=re.accessToken||void 0,Qe.secret=re.secret,Qe.nonce=re.nonce,Qe.pendingToken=re.pendingToken||null,Qe}_getIdTokenResponse(v){return os(v,this.buildRequest())}_linkToIdToken(v,_){const x=this.buildRequest();return x.idToken=_,os(v,x)}_getReauthenticationResolver(v){const _=this.buildRequest();return _.autoCreate=!1,os(v,_)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),v.postBody=(0,W.xO)(_)}return v}}function Eo(){return(Eo=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:sendVerificationCode",Ke(D,v))})).apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithPhoneNumber",Ke(D,v))})).apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(D,v){const _=yield Ct(D,"POST","/v1/accounts:signInWithPhoneNumber",Ke(D,v));if(_.temporaryProof)throw kn(D,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ta={USER_NOT_FOUND:"user-not-found"};function wo(){return(wo=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithPhoneNumber",Ke(D,Object.assign(Object.assign({},v),{operation:"REAUTH"})),Ta)})).apply(this,arguments)}class Qi extends vt{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,_){return new Qi({verificationId:v,verificationCode:_})}static _fromTokenResponse(v,_){return new Qi({phoneNumber:v,temporaryProof:_})}_getIdTokenResponse(v){return function Yo(D,v){return Io.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,_){return function Cs(D,v){return Ks.apply(this,arguments)}(v,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Ha(D,v){return wo.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:_,verificationId:x,verificationCode:G}=this.params;return v&&_?{temporaryProof:v,phoneNumber:_}:{sessionInfo:x,code:G}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:_,verificationCode:x,phoneNumber:G,temporaryProof:re}=v;return x||_||G||re?new Qi({verificationId:_,verificationCode:x,phoneNumber:G,temporaryProof:re}):null}}class Bi{constructor(v){var _,x,G,re,Qe,yt;const zt=(0,W.zd)((0,W.pd)(v)),wn=null!==(_=zt.apiKey)&&void 0!==_?_:null,zn=null!==(x=zt.oobCode)&&void 0!==x?x:null,Wn=function Sa(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=zt.mode)&&void 0!==G?G:null);Se(wn&&zn&&Wn,"argument-error"),this.apiKey=wn,this.operation=Wn,this.code=zn,this.continueUrl=null!==(re=zt.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(Qe=zt.languageCode)&&void 0!==Qe?Qe:null,this.tenantId=null!==(yt=zt.tenantId)&&void 0!==yt?yt:null}static parseLink(v){const _=function $s(D){const v=(0,W.zd)((0,W.pd)(D)).link,_=v?(0,W.zd)((0,W.pd)(v)).deep_link_id:null,x=(0,W.zd)((0,W.pd)(D)).deep_link_id;return(x?(0,W.zd)((0,W.pd)(x)).link:null)||x||_||v||D}(v);try{return new Bi(_)}catch(x){return null}}}let ao=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(_,x){return Xi._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const G=Bi.parseLink(x);return Se(G,"argument-error"),Xi._fromEmailAndCode(_,G.code,G.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class ms{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class ui extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ns extends ui{static credentialFromJSON(v){const _="string"==typeof v?JSON.parse(v):v;return Se("providerId"in _&&"signInMethod"in _,"argument-error"),Li._fromParams(_)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Se(v.idToken||v.accessToken,"argument-error"),Li._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ns.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ns.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:G,pendingToken:re,nonce:Qe,providerId:yt}=v;if(!x&&!G&&!_&&!re||!yt)return null;try{return new ns(yt)._credential({idToken:_,accessToken:x,nonce:Qe,pendingToken:re})}catch(zt){return null}}}let lo=(()=>{class D extends ui{constructor(){super("facebook.com")}static credential(_){return Li._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(x){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Os=(()=>{class D extends ui{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return Li._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:G}=_;if(!x&&!G)return null;try{return D.credential(x,G)}catch(re){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),uo=(()=>{class D extends ui{constructor(){super("github.com")}static credential(_){return Li._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(x){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class bs extends vt{constructor(v,_){super(v,v),this.pendingToken=_}_getIdTokenResponse(v){return os(v,this.buildRequest())}_linkToIdToken(v,_){const x=this.buildRequest();return x.idToken=_,os(v,x)}_getReauthenticationResolver(v){const _=this.buildRequest();return _.autoCreate=!1,os(v,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const _="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:G,pendingToken:re}=_;return x&&G&&re&&x===G?new bs(x,re):null}static _create(v,_){return new bs(v,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ys extends ms{constructor(v){Se(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return Ys.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return Ys.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const _=bs.fromJSON(v);return Se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:_,providerId:x}=v;if(!_||!x)return null;try{return bs._create(x,_)}catch(G){return null}}}let Aa=(()=>{class D extends ui{constructor(){super("twitter.com")}static credential(_,x){return Li._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:G}=_;if(!x||!G)return null;try{return D.credential(x,G)}catch(re){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Ds(D,v){return co.apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signUp",Ke(D,v))})).apply(this,arguments)}class yi{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,_,x,G=!1){return(0,u.Z)(function*(){const re=yield kt._fromIdTokenResponse(v,x,G),Qe=Ts(x);return new yi({user:re,providerId:Qe,_tokenResponse:x,operationType:_})})()}static _forOperation(v,_,x){return(0,u.Z)(function*(){yield v._updateTokensIfNecessary(x,!0);const G=Ts(x);return new yi({user:v,providerId:G,_tokenResponse:x,operationType:_})})()}}function Ts(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Ei(){return(Ei=(0,u.Z)(function*(D){var v;const _=Ir(D);if(yield _._initializationPromise,null!==(v=_.currentUser)&&void 0!==v&&v.isAnonymous)return new yi({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield Ds(_,{returnSecureToken:!0}),G=yield yi._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(G.user),G})).apply(this,arguments)}class Zo extends W.ZR{constructor(v,_,x,G){var re;super(_.code,_.message),this.operationType=x,this.user=G,Object.setPrototypeOf(this,Zo.prototype),this.customData={appName:v.name,tenantId:null!==(re=v.tenantId)&&void 0!==re?re:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(v,_,x,G){return new Zo(v,_,x,G)}}function Xs(D,v,_,x){return("reauthenticate"===v?_._getReauthenticationResolver(D):_._getIdTokenResponse(D)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?Zo._fromErrorAndOperation(D,re,v,x):re})}function Mi(D){return new Set(D.map(({providerId:v})=>v).filter(v=>!!v))}function ys(){return ys=(0,u.Z)(function*(D,v){const _=(0,W.m9)(D);yield as(!0,_,v);const{providerUserInfo:x}=yield function Pr(D,v){return yr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[v]}),G=Mi(x||[]);return _.providerData=_.providerData.filter(re=>G.has(re.providerId)),G.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ys.apply(this,arguments)}function ho(D,v){return $i.apply(this,arguments)}function $i(){return($i=(0,u.Z)(function*(D,v,_=!1){const x=yield mn(D,v._linkToIdToken(D.auth,yield D.getIdToken()),_);return yi._forOperation(D,"link",x)})).apply(this,arguments)}function as(D,v,_){return vs.apply(this,arguments)}function vs(){return(vs=(0,u.Z)(function*(D,v,_){yield _r(v);const G=!1===D?"provider-already-linked":"no-such-provider";Se(Mi(v.providerData).has(_)===D,v.auth,G)})).apply(this,arguments)}function Fo(D,v){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(D,v,_=!1){const{auth:x}=D,G="reauthenticate";try{const re=yield mn(D,Xs(x,G,v,D),_);Se(re.idToken,x,"internal-error");const Qe=dr(re.idToken);Se(Qe,x,"internal-error");const{sub:yt}=Qe;return Se(D.uid===yt,x,"user-mismatch"),yi._forOperation(D,G,re)}catch(re){throw"auth/user-not-found"===(null==re?void 0:re.code)&&et(x,"user-mismatch"),re}})).apply(this,arguments)}function ua(D,v){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,u.Z)(function*(D,v,_=!1){const x="signIn",G=yield Xs(D,x,v),re=yield yi._fromIdTokenResponse(D,x,G);return _||(yield D._updateCurrentUser(re.user)),re})).apply(this,arguments)}function ur(D,v){return Co.apply(this,arguments)}function Co(){return(Co=(0,u.Z)(function*(D,v){return ua(Ir(D),v)})).apply(this,arguments)}function ca(D,v){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(D,v){const _=(0,W.m9)(D);return yield as(!1,_,v.providerId),ho(_,v)})).apply(this,arguments)}function fo(D,v){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(D,v){return Fo((0,W.m9)(D),v)})).apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(D,v){return Ct(D,"POST","/v1/accounts:signInWithCustomToken",Ke(D,v))})).apply(this,arguments)}function I(){return I=(0,u.Z)(function*(D,v){const _=Ir(D),x=yield function ji(D,v){return Us.apply(this,arguments)}(_,{token:v,returnSecureToken:!0}),G=yield yi._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(G.user),G}),I.apply(this,arguments)}class f{constructor(v,_){this.factorId=v,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(v,_){return"phoneInfo"in _?T._fromServerResponse(v,_):"totpInfo"in _?q._fromServerResponse(v,_):et(v,"internal-error")}}class T extends f{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,_){return new T(_)}}class q extends f{constructor(v){super("totp",v)}static _fromServerResponse(v,_){return new q(_)}}function Le(D,v,_){var x;Se((null===(x=_.url)||void 0===x?void 0:x.length)>0,D,"invalid-continue-uri"),Se(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),v.continueUrl=_.url,v.dynamicLinkDomain=_.dynamicLinkDomain,v.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Se(_.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),v.iOSBundleId=_.iOS.bundleId),_.android&&(Se(_.android.packageName.length>0,D,"missing-android-pkg-name"),v.androidInstallApp=_.android.installApp,v.androidMinimumVersionCode=_.android.minimumVersion,v.androidPackageName=_.android.packageName)}function gn(){return gn=(0,u.Z)(function*(D,v,_){var x;const G=Ir(D),re={requestType:"PASSWORD_RESET",email:v,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=G._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Qe=yield Wr(G,re,"getOobCode",!0);_&&Le(G,Qe,_),yield wt(G,Qe)}else _&&Le(G,re,_),yield wt(G,re).catch(function(){var Qe=(0,u.Z)(function*(yt){if("auth/missing-recaptcha-token"!==yt.code)return Promise.reject(yt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const zt=yield Wr(G,re,"getOobCode",!0);_&&Le(G,zt,_),yield wt(G,zt)}});return function(yt){return Qe.apply(this,arguments)}}())}),gn.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(D,v,_){yield Ft((0,W.m9)(D),{oobCode:v,newPassword:_})})).apply(this,arguments)}function br(){return br=(0,u.Z)(function*(D,v){yield function bn(D,v){return xr.apply(this,arguments)}((0,W.m9)(D),{oobCode:v})}),br.apply(this,arguments)}function cs(D,v){return _s.apply(this,arguments)}function _s(){return(_s=(0,u.Z)(function*(D,v){const _=(0,W.m9)(D),x=yield Ft(_,{oobCode:v}),G=x.requestType;switch(Se(G,_,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(x.mfaInfo,_,"internal-error");default:Se(x.email,_,"internal-error")}let re=null;return x.mfaInfo&&(re=f._fromServerResponse(Ir(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:re},operation:G}})).apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(D,v){const{data:_}=yield cs((0,W.m9)(D),v);return _.email})).apply(this,arguments)}function Do(){return Do=(0,u.Z)(function*(D,v,_){var x;const G=Ir(D),re={returnSecureToken:!0,email:v,password:_,clientType:"CLIENT_TYPE_WEB"};let Qe;if(null!==(x=G._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const wn=yield Wr(G,re,"signUpPassword");Qe=Ds(G,wn)}else Qe=Ds(G,re).catch(function(){var wn=(0,u.Z)(function*(zn){if("auth/missing-recaptcha-token"===zn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Wn=yield Wr(G,re,"signUpPassword");return Ds(G,Wn)}return Promise.reject(zn)});return function(zn){return wn.apply(this,arguments)}}());const yt=yield Qe.catch(wn=>Promise.reject(wn)),zt=yield yi._fromIdTokenResponse(G,"signIn",yt);return yield G._updateCurrentUser(zt.user),zt}),Do.apply(this,arguments)}function Ga(){return Ga=(0,u.Z)(function*(D,v,_){var x;const G=Ir(D),re={requestType:"EMAIL_SIGNIN",email:v,clientType:"CLIENT_TYPE_WEB"};function Qe(yt,zt){Se(zt.handleCodeInApp,G,"argument-error"),zt&&Le(G,yt,zt)}if(null!==(x=G._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const yt=yield Wr(G,re,"getOobCode",!0);Qe(yt,_),yield an(G,yt)}else Qe(re,_),yield an(G,re).catch(function(){var yt=(0,u.Z)(function*(zt){if("auth/missing-recaptcha-token"!==zt.code)return Promise.reject(zt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const wn=yield Wr(G,re,"getOobCode",!0);Qe(wn,_),yield an(G,wn)}});return function(zt){return yt.apply(this,arguments)}}())}),Ga.apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D),G=ao.credentialWithLink(v,_||nt());return Se(G._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),ur(x,G)})).apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:createAuthUri",Ke(D,v))})).apply(this,arguments)}function pl(){return pl=(0,u.Z)(function*(D,v){const x={identifier:v,continueUri:tt()?nt():"http://localhost"},{signinMethods:G}=yield function Xo(D,v){return xa.apply(this,arguments)}((0,W.m9)(D),x);return G||[]}),pl.apply(this,arguments)}function Bo(){return Bo=(0,u.Z)(function*(D,v){const _=(0,W.m9)(D),G={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};v&&Le(_.auth,G,v);const{email:re}=yield function ht(D,v){return Xe.apply(this,arguments)}(_.auth,G);re!==D.email&&(yield D.reload())}),Bo.apply(this,arguments)}function Qo(){return Qo=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:v};_&&Le(x.auth,re,_);const{email:Qe}=yield function Lr(D,v){return Xn.apply(this,arguments)}(x.auth,re);Qe!==D.email&&(yield D.reload())}),Qo.apply(this,arguments)}function Hi(){return(Hi=(0,u.Z)(function*(D,v){return Ue(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Jo(){return Jo=(0,u.Z)(function*(D,{displayName:v,photoURL:_}){if(void 0===v&&void 0===_)return;const x=(0,W.m9)(D),re={idToken:yield x.getIdToken(),displayName:v,photoUrl:_,returnSecureToken:!0},Qe=yield mn(x,function ha(D,v){return Hi.apply(this,arguments)}(x.auth,re));x.displayName=Qe.displayName||null,x.photoURL=Qe.photoUrl||null;const yt=x.providerData.find(({providerId:zt})=>"password"===zt);yt&&(yt.displayName=x.displayName,yt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(Qe)}),Jo.apply(this,arguments)}function rs(D,v,_){return wi.apply(this,arguments)}function wi(){return(wi=(0,u.Z)(function*(D,v,_){const{auth:x}=D,re={idToken:yield D.getIdToken(),returnSecureToken:!0};v&&(re.email=v),_&&(re.password=_);const Qe=yield mn(D,sn(x,re));yield D._updateTokensIfNecessary(Qe,!0)})).apply(this,arguments)}class Ss{constructor(v,_,x={}){this.isNewUser=v,this.providerId=_,this.profile=x}}class Uo extends Ss{constructor(v,_,x,G){super(v,_,x),this.username=G}}class As extends Ss{constructor(v,_){super(v,"facebook.com",_)}}class Al extends Uo{constructor(v,_){super(v,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class fi extends Ss{constructor(v,_){super(v,"google.com",_)}}class ml extends Uo{constructor(v,_,x){super(v,"twitter.com",_,x)}}function rl(D){const{user:v,_tokenResponse:_}=D;return v.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ju(D){var v,_;if(!D)return null;const{providerId:x}=D,G=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},re=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!x&&null!=D&&D.idToken){const Qe=null===(_=null===(v=dr(D.idToken))||void 0===v?void 0:v.firebase)||void 0===_?void 0:_.sign_in_provider;if(Qe)return new Ss(re,"anonymous"!==Qe&&"custom"!==Qe?Qe:null)}if(!x)return null;switch(x){case"facebook.com":return new As(re,G);case"github.com":return new Al(re,G);case"google.com":return new fi(re,G);case"twitter.com":return new ml(re,G,D.screenName||null);case"custom":case"anonymous":return new Ss(re,null);default:return new Ss(re,x,G)}}(_)}class Ar{constructor(v,_,x){this.type=v,this.credential=_,this.auth=x}static _fromIdtoken(v,_){return new Ar("enroll",v,_)}static _fromMfaPendingCredential(v){return new Ar("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var _,x;if(null!=v&&v.multiFactorSession){if(null!==(_=v.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ar._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(x=v.multiFactorSession)&&void 0!==x&&x.idToken)return Ar._fromIdtoken(v.multiFactorSession.idToken)}return null}}class wr{constructor(v,_,x){this.session=v,this.hints=_,this.signInResolver=x}static _fromError(v,_){const x=Ir(v),G=_.customData._serverResponse,re=(G.mfaInfo||[]).map(yt=>f._fromServerResponse(x,yt));Se(G.mfaPendingCredential,x,"internal-error");const Qe=Ar._fromMfaPendingCredential(G.mfaPendingCredential);return new wr(Qe,re,function(){var yt=(0,u.Z)(function*(zt){const wn=yield zt._process(x,Qe);delete G.mfaInfo,delete G.mfaPendingCredential;const zn=Object.assign(Object.assign({},G),{idToken:wn.idToken,refreshToken:wn.refreshToken});switch(_.operationType){case"signIn":const Wn=yield yi._fromIdTokenResponse(x,_.operationType,zn);return yield x._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return Se(_.user,x,"internal-error"),yi._forOperation(_.user,_.operationType,zn);default:et(x,"internal-error")}});return function(zt){return yt.apply(this,arguments)}}())}resolveSignIn(v){var _=this;return(0,u.Z)(function*(){return _.signInResolver(v)})()}}class Si{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>f._fromServerResponse(v.auth,x)))})}static _fromUser(v){return new Si(v)}getSession(){var v=this;return(0,u.Z)(function*(){return Ar._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,_){var x=this;return(0,u.Z)(function*(){const G=v,re=yield x.getSession(),Qe=yield mn(x.user,G._process(x.user.auth,re,_));return yield x.user._updateTokensIfNecessary(Qe),x.user.reload()})()}unenroll(v){var _=this;return(0,u.Z)(function*(){const x="string"==typeof v?v:v.uid,G=yield _.user.getIdToken();try{const re=yield mn(_.user,function Vs(D,v){return Ue(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ke(D,v))}(_.user.auth,{idToken:G,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Qe})=>Qe!==x),yield _.user._updateTokensIfNecessary(re),yield _.user.reload()}catch(re){throw re}})()}}const fa=new WeakMap,Ra="__sak";class Wa{constructor(v,_){this.storageRetriever=v,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ra,"1"),this.storage.removeItem(Ra),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,_){return this.storage.setItem(v,JSON.stringify(_)),Promise.resolve()}_get(v){const _=this.storage.getItem(v);return Promise.resolve(_?JSON.parse(_):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wi=(()=>{class D extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xl(){const D=(0,W.z$)();return dt(D)||Mt(D)}()&&function di(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=rr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const G=this.storage.getItem(x),re=this.localCache[x];G!==re&&_(x,re,G)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((yt,zt,wn)=>{this.notifyListeners(yt,wn)});const G=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const yt=this.storage.getItem(G);if(_.newValue!==yt)null!==_.newValue?this.storage.setItem(G,_.newValue):this.storage.removeItem(G);else if(this.localCache[G]===_.newValue&&!x)return}const re=()=>{const yt=this.storage.getItem(G);!x&&this.localCache[G]===yt||this.notifyListeners(G,yt)},Qe=this.storage.getItem(G);!function Nn(){return(0,W.w1)()&&10===document.documentMode}()||Qe===_.newValue||_.newValue===_.oldValue?re():setTimeout(re,10)}notifyListeners(_,x){this.localCache[_]=x;const G=this.listeners[_];if(G)for(const re of Array.from(G))re(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var G=()=>super._set,re=this;return(0,u.Z)(function*(){yield G().call(re,_,x),re.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,G=this;return(0,u.Z)(function*(){const re=yield x().call(G,_);return G.localCache[_]=JSON.stringify(re),re})()}_remove(_){var x=()=>super._remove,G=this;return(0,u.Z)(function*(){yield x().call(G,_),delete G.localCache[_]})()}}return D.type="LOCAL",D})(),qi=(()=>{class D extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return D.type="SESSION",D})();let Ml=(()=>{class D{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(re=>re.isListeningto(_));if(x)return x;const G=new D(_);return this.receivers.push(G),G}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,u.Z)(function*(){const G=_,{eventId:re,eventType:Qe,data:yt}=G.data,zt=x.handlersMap[Qe];if(null==zt||!zt.size)return;G.ports[0].postMessage({status:"ack",eventId:re,eventType:Qe});const wn=Array.from(zt).map(function(){var Wn=(0,u.Z)(function*(ts){return ts(G.origin,yt)});return function(ts){return Wn.apply(this,arguments)}}()),zn=yield function Kl(D){return Promise.all(D.map(function(){var v=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return v.apply(this,arguments)}}()))}(wn);G.ports[0].postMessage({status:"done",eventId:re,eventType:Qe,response:zn})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function on(D="",v=10){let _="";for(let x=0;x<v;x++)_+=Math.floor(10*Math.random());return D+_}class Ki{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,_,x=50){var G=this;return(0,u.Z)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Qe,yt;return new Promise((zt,wn)=>{const zn=on("",20);re.port1.start();const Wn=setTimeout(()=>{wn(new Error("unsupported_event"))},x);yt={messageChannel:re,onMessage(ts){const wa=ts;if(wa.data.eventId===zn)switch(wa.data.status){case"ack":clearTimeout(Wn),Qe=setTimeout(()=>{wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Qe),zt(wa.data.response);break;default:clearTimeout(Wn),clearTimeout(Qe),wn(new Error("invalid_response"))}}},G.handlers.add(yt),re.port1.addEventListener("message",yt.onMessage),G.target.postMessage({eventType:v,eventId:zn,data:_},[re.port2])}).finally(()=>{yt&&G.removeMessageHandler(yt)})})()}}function pi(){return window}function Un(){return typeof pi().WorkerGlobalScope<"u"&&"function"==typeof pi().importScripts}function mu(){return(mu=(0,u.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Zt="firebaseLocalStorageDb",is=1,So="firebaseLocalStorage",_c="fbase_key";class sl{constructor(v){this.request=v}toPromise(){return new Promise((v,_)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ol(D,v){return D.transaction([So],v?"readwrite":"readonly").objectStore(So)}function Hu(){const D=indexedDB.open(Zt,is);return new Promise((v,_)=>{D.addEventListener("error",()=>{_(D.error)}),D.addEventListener("upgradeneeded",()=>{const x=D.result;try{x.createObjectStore(So,{keyPath:_c})}catch(G){_(G)}}),D.addEventListener("success",(0,u.Z)(function*(){const x=D.result;x.objectStoreNames.contains(So)?v(x):(x.close(),yield function qa(){const D=indexedDB.deleteDatabase(Zt);return new sl(D).toPromise()}(),v(yield Hu()))}))})}function kl(D,v,_){return yl.apply(this,arguments)}function yl(){return(yl=(0,u.Z)(function*(D,v,_){const x=Ol(D,!0).put({[_c]:v,value:_});return new sl(x).toPromise()})).apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(function*(D,v){const _=Ol(D,!1).get(v),x=yield new sl(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Ka(D,v){const _=Ol(D,!0).delete(v);return new sl(_).toPromise()}const Br=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Hu()),_.db})()}_withRetries(_){var x=this;return(0,u.Z)(function*(){let G=0;for(;;)try{const re=yield x._openDb();return yield _(re)}catch(re){if(G++>3)throw re;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return Un()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Ml._getInstance(function Ut(){return Un()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,u.Z)(function*(G,re){return{keyProcessed:(yield _._poll()).includes(re.key)}});return function(G,re){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,u.Z)(function*(G,re){return["keyChanged"]});return function(G,re){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var x,G;if(_.activeServiceWorker=yield function Jn(){return mu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ki(_.activeServiceWorker);const re=yield _.sender._send("ping",{},800);re&&null!==(x=re[0])&&void 0!==x&&x.fulfilled&&null!==(G=re[0])&&void 0!==G&&G.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,u.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Mn(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch(G){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Hu();return yield kl(_,Ra,"1"),yield Ka(_,Ra),!0}catch(_){}return!1})()}_withPendingWrite(_){var x=this;return(0,u.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var G=this;return(0,u.Z)(function*(){return G._withPendingWrite((0,u.Z)(function*(){return yield G._withRetries(re=>kl(re,_,x)),G.localCache[_]=x,G.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,u.Z)(function*(){const G=yield x._withRetries(re=>function zu(D,v){return Ji.apply(this,arguments)}(re,_));return x.localCache[_]=G,G})()}_remove(_){var x=this;return(0,u.Z)(function*(){return x._withPendingWrite((0,u.Z)(function*(){return yield x._withRetries(G=>Ka(G,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const x=yield _._withRetries(Qe=>{const yt=Ol(Qe,!1).getAll();return new sl(yt).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const G=[],re=new Set;for(const{fbase_key:Qe,value:yt}of x)re.add(Qe),JSON.stringify(_.localCache[Qe])!==JSON.stringify(yt)&&(_.notifyListeners(Qe,yt),G.push(Qe));for(const Qe of Object.keys(_.localCache))_.localCache[Qe]&&!re.has(Qe)&&(_.notifyListeners(Qe,null),G.push(Qe));return G})()}notifyListeners(_,x){this.localCache[_]=x;const G=this.listeners[_];if(G)for(const re of Array.from(G))re(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),xn=1e12;class ol{constructor(v){this.auth=v,this.counter=xn,this._widgets=new Map}render(v,_){const x=this.counter;return this._widgets.set(x,new Ec(v,this.auth.name,_||{})),this.counter++,x}reset(v){var _;const x=v||xn;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(v){var _;return(null===(_=this._widgets.get(v||xn))||void 0===_?void 0:_.getResponse())||""}execute(v){var _=this;return(0,u.Z)(function*(){var x;return null===(x=_._widgets.get(v||xn))||void 0===x||x.execute(),""})()}}class Ec{constructor(v,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof v?document.getElementById(v):v;Se(G,"argument-error",{appName:_}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eo(D){const v=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<D;x++)v.push(_.charAt(Math.floor(Math.random()*_.length)));return v.join("")}(50);const{callback:v,"expired-callback":_}=this.params;if(v)try{v(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gu=jr("rcb"),Nl=new we(3e4,6e4);class Pa{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=pi().grecaptcha)||void 0===v||!v.render)}load(v,_=""){return Se(function Ic(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(_),v,"argument-error"),this.shouldResolveImmediately(_)&&lr(pi().grecaptcha)?Promise.resolve(pi().grecaptcha):new Promise((x,G)=>{const re=pi().setTimeout(()=>{G(He(v,"network-request-failed"))},Nl.get());pi()[Gu]=()=>{pi().clearTimeout(re),delete pi()[Gu];const yt=pi().grecaptcha;if(!yt||!lr(yt))return void G(He(v,"internal-error"));const zt=yt.render;yt.render=(wn,zn)=>{const Wn=zt(wn,zn);return this.counter++,Wn},this.hostLanguage=_,x(yt)},mr(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Gu,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(re),G(He(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var _;return!(null===(_=pi().grecaptcha)||void 0===_||!_.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ya{load(v){return(0,u.Z)(function*(){return new ol(v)})()}clearedOneInstance(){}}const ti="recaptcha",vu={theme:"light",type:"image"};class al{constructor(v,_=Object.assign({},vu),x){this.parameters=_,this.type=ti,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ir(x),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof v?document.getElementById(v):v;Se(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ya:new Pa,this.validateStartingState()}verify(){var v=this;return(0,u.Z)(function*(){v.assertNotDestroyed();const _=yield v.render(),x=v.getAssertedRecaptcha();return x.getResponse(_)||new Promise(re=>{const Qe=yt=>{yt&&(v.tokenChangeListeners.delete(Qe),re(yt))};v.tokenChangeListeners.add(Qe),v.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof v)v(_);else if("string"==typeof v){const x=pi()[v];"function"==typeof x&&x(_)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,u.Z)(function*(){if(yield v.init(),!v.widgetId){let _=v.container;if(!v.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}v.widgetId=v.getAssertedRecaptcha().render(_,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,u.Z)(function*(){Se(tt()&&!Un(),v.auth,"internal-error"),yield function Yl(){let D=null;return new Promise(v=>{"complete"!==document.readyState?(D=()=>v(),window.addEventListener("load",D)):v()}).catch(v=>{throw D&&window.removeEventListener("load",D),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const _=yield function bt(D){return Kt.apply(this,arguments)}(v.auth);Se(_,v.auth,"internal-error"),v.parameters.sitekey=_})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(v,_){this.verificationId=v,this.onConfirmation=_}confirm(v){const _=Qi._fromVerification(this.verificationId,v);return this.onConfirmation(_)}}function mt(){return(mt=(0,u.Z)(function*(D,v,_){const x=Ir(D),G=yield Vo(x,v,(0,W.m9)(_));return new ds(G,re=>ur(x,re))})).apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D);yield as(!1,x,"phone");const G=yield Vo(x.auth,v,(0,W.m9)(_));return new ds(G,re=>ca(x,re))})).apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D),G=yield Vo(x.auth,v,(0,W.m9)(_));return new ds(G,re=>fo(x,re))})).apply(this,arguments)}function Vo(D,v,_){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,u.Z)(function*(D,v,_){var x;const G=yield _.verify();try{let re;if(Se("string"==typeof G,D,"argument-error"),Se(_.type===ti,D,"argument-error"),re="string"==typeof v?{phoneNumber:v}:v,"session"in re){const Qe=re.session;if("phoneNumber"in re)return Se("enroll"===Qe.type,D,"internal-error"),(yield function Pi(D,v){return Ue(D,"POST","/v2/accounts/mfaEnrollment:start",Ke(D,v))}(D,{idToken:Qe.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{Se("signin"===Qe.type,D,"internal-error");const yt=(null===(x=re.multiFactorHint)||void 0===x?void 0:x.uid)||re.multiFactorUid;return Se(yt,D,"missing-multi-factor-info"),(yield function Zn(D,v){return Ue(D,"POST","/v2/accounts/mfaSignIn:start",Ke(D,v))}(D,{mfaPendingCredential:Qe.credential,mfaEnrollmentId:yt,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Qe}=yield function oo(D,v){return Eo.apply(this,arguments)}(D,{phoneNumber:re.phoneNumber,recaptchaToken:G});return Qe}}finally{_._reset()}}),Zc.apply(this,arguments)}function A(){return(A=(0,u.Z)(function*(D,v){yield ho((0,W.m9)(D),v)})).apply(this,arguments)}let R=(()=>{class D{constructor(_){this.providerId=D.PROVIDER_ID,this.auth=Ir(_)}verifyPhoneNumber(_,x){return Vo(this.auth,_,(0,W.m9)(x))}static credential(_,x){return Qi._fromVerification(_,x)}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:G}=_;return x&&G?Qi._fromTokenResponse(x,G):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function b(D,v){return v?Ge(v):(Se(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class P extends vt{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return os(v,this._buildIdpRequest())}_linkToIdToken(v,_){return os(v,this._buildIdpRequest(_))}_getReauthenticationResolver(v){return os(v,this._buildIdpRequest())}_buildIdpRequest(v){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(_.idToken=v),_}}function j(D){return ua(D.auth,new P(D),D.bypassAuthState)}function ee(D){const{auth:v,user:_}=D;return Se(_,v,"internal-error"),Fo(_,new P(D),D.bypassAuthState)}function ie(D){return st.apply(this,arguments)}function st(){return(st=(0,u.Z)(function*(D){const{auth:v,user:_}=D;return Se(_,v,"internal-error"),ho(_,new P(D),D.bypassAuthState)})).apply(this,arguments)}class xt{constructor(v,_,x,G,re=!1){this.auth=v,this.resolver=x,this.user=G,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var v=this;return new Promise(function(){var _=(0,u.Z)(function*(x,G){v.pendingPromise={resolve:x,reject:G};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(re){v.reject(re)}});return function(x,G){return _.apply(this,arguments)}}())}onAuthEvent(v){var _=this;return(0,u.Z)(function*(){const{urlResponse:x,sessionId:G,postBody:re,tenantId:Qe,error:yt,type:zt}=v;if(yt)return void _.reject(yt);const wn={auth:_.auth,requestUri:x,sessionId:G,tenantId:Qe||void 0,postBody:re||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(zt)(wn))}catch(zn){_.reject(zn)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return j;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return ee;default:et(this.auth,"internal-error")}}resolve(v){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _n=new we(2e3,1e4);function In(){return(In=(0,u.Z)(function*(D,v,_){const x=Ir(D);Pe(D,v,ms);const G=b(x,_);return new jo(x,"signInViaPopup",v,G).executeNotNull()})).apply(this,arguments)}function _i(){return(_i=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D);Pe(x.auth,v,ms);const G=b(x.auth,_);return new jo(x.auth,"reauthViaPopup",v,G,x).executeNotNull()})).apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D);Pe(x.auth,v,ms);const G=b(x.auth,_);return new jo(x.auth,"linkViaPopup",v,G,x).executeNotNull()})).apply(this,arguments)}let jo=(()=>{class D extends xt{constructor(_,x,G,re,Qe){super(_,x,re,Qe),this.provider=G,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const x=yield _.execute();return Se(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,u.Z)(function*(){qe(1===_.filter.length,"Popup operations only handle one event");const x=on();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(G=>{_.reject(G)}),_.resolver._isIframeWebStorageSupported(_.auth,G=>{G||_.reject(He(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,G;this.pollId=null!==(G=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,_n.get())};_()}}return D.currentPopupAction=null,D})();const ta="pendingRedirect",yo=new Map;class ll extends xt{constructor(v,_,x=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var v=()=>super.execute,_=this;return(0,u.Z)(function*(){let x=yo.get(_.auth._key());if(!x){try{const re=(yield function Es(D,v){return Gr.apply(this,arguments)}(_.resolver,_.auth))?yield v().call(_):null;x=()=>Promise.resolve(re)}catch(G){x=()=>Promise.reject(G)}yo.set(_.auth._key(),x)}return _.bypassAuthState||yo.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(v){var _=()=>super.onAuthEvent,x=this;return(0,u.Z)(function*(){if("signInViaRedirect"===v.type)return _().call(x,v);if("unknown"!==v.type){if(v.eventId){const G=yield x.auth._redirectUserForId(v.eventId);if(G)return x.user=G,_().call(x,v);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Gr(){return(Gr=(0,u.Z)(function*(D,v){const _=ya(v),x=Xc(D);if(!(yield x._isAvailable()))return!1;const G="true"===(yield x._get(_));return yield x._remove(_),G})).apply(this,arguments)}function Fl(D,v){return ma.apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(D,v){return Xc(D)._set(ya(v),"true")})).apply(this,arguments)}function Za(D,v){yo.set(D._key(),v)}function Xc(D){return Ge(D._redirectPersistence)}function ya(D){return ge(ta,D.config.apiKey,D.name)}function wh(D,v,_){return function no(D,v,_){return qu.apply(this,arguments)}(D,v,_)}function qu(){return(qu=(0,u.Z)(function*(D,v,_){const x=Ir(D);Pe(D,v,ms),yield x._initializationPromise;const G=b(x,_);return yield Fl(G,x),G._openRedirect(x,v,"signInViaRedirect")})).apply(this,arguments)}function Qc(D,v,_){return function wc(D,v,_){return va.apply(this,arguments)}(D,v,_)}function va(){return(va=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D);Pe(x.auth,v,ms),yield x.auth._initializationPromise;const G=b(x.auth,_);yield Fl(G,x.auth);const re=yield Cc(x);return G._openRedirect(x.auth,v,"reauthViaRedirect",re)})).apply(this,arguments)}function Jc(D,v,_){return function ul(D,v,_){return Is.apply(this,arguments)}(D,v,_)}function Is(){return(Is=(0,u.Z)(function*(D,v,_){const x=(0,W.m9)(D);Pe(x.auth,v,ms),yield x.auth._initializationPromise;const G=b(x.auth,_);yield as(!1,x,v.providerId),yield Fl(G,x.auth);const re=yield Cc(x);return G._openRedirect(x.auth,v,"linkViaRedirect",re)})).apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(D,v){return yield Ir(D)._initializationPromise,Yu(D,v,!1)})).apply(this,arguments)}function Yu(D,v){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(function*(D,v,_=!1){const x=Ir(D),G=b(x,v),Qe=yield new ll(x,G,_).execute();return Qe&&!_&&(delete Qe.user._redirectEventId,yield x._persistUserIfCurrent(Qe.user),yield x._setRedirectUser(null,v)),Qe})).apply(this,arguments)}function Cc(D){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)(function*(D){const v=on(`${D.uid}:::`);return D._redirectEventId=v,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),v})).apply(this,arguments)}class J{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(v,x)&&(_=!0,this.sendToConsumer(v,x),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function St(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ot(D);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=v,_=!0)),_}sendToConsumer(v,_){var x;if(v.error&&!ot(v)){const G=(null===(x=v.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(He(this.auth,G))}else _.onAuthEvent(v)}isEventForConsumer(v,_){const x=null===_.eventId||!!v.eventId&&v.eventId===_.eventId;return _.filter.includes(v.type)&&x}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ee(v))}saveEventToCache(v){this.cachedEventUids.add(Ee(v)),this.lastProcessedEventTime=Date.now()}}function Ee(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(v=>v).join("-")}function ot({type:D,error:v}){return"unknown"===D&&"auth/no-auth-event"===(null==v?void 0:v.code)}function en(D){return hn.apply(this,arguments)}function hn(){return(hn=(0,u.Z)(function*(D,v={}){return Ue(D,"GET","/v1/projects",v)})).apply(this,arguments)}const Bn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ln=/^https?/;function ir(){return(ir=(0,u.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:v}=yield en(D);for(const _ of v)try{if(Ao(_))return}catch(x){}et(D,"unauthorized-domain")})).apply(this,arguments)}function Ao(D){const v=nt(),{protocol:_,hostname:x}=new URL(v);if(D.startsWith("chrome-extension://")){const Qe=new URL(D);return""===Qe.hostname&&""===x?"chrome-extension:"===_&&D.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===_&&Qe.hostname===x}if(!ln.test(_))return!1;if(Bn.test(D))return x===D;const G=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(x)}const Kr=new we(3e4,6e4);function ka(){const D=pi().___jsl;if(null!=D&&D.H)for(const v of Object.keys(D.H))if(D.H[v].r=D.H[v].r||[],D.H[v].L=D.H[v].L||[],D.H[v].r=[...D.H[v].L],D.CP)for(let _=0;_<D.CP.length;_++)D.CP[_]=null}let vo=null;const xo=new we(5e3,15e3),na="__/auth/iframe",ra="emulator/auth/iframe",ed={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ll=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bc(D){const v=D.config;Se(v.authDomain,D,"auth-domain-config-required");const _=v.emulator?Ae(v,ra):`https://${D.config.authDomain}/${na}`,x={apiKey:v.apiKey,appName:D.name,v:xe.SDK_VERSION},G=Ll.get(D.config.apiHost);G&&(x.eid=G);const re=D._getFrameworks();return re.length&&(x.fw=re.join(",")),`${_}?${(0,W.xO)(x).slice(1)}`}function _u(){return _u=(0,u.Z)(function*(D){const v=yield function js(D){return vo=vo||function Na(D){return new Promise((v,_)=>{var x,G,re;function Qe(){ka(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{ka(),_(He(D,"network-request-failed"))},timeout:Kr.get()})}if(null!==(G=null===(x=pi().gapi)||void 0===x?void 0:x.iframes)&&void 0!==G&&G.Iframe)v(gapi.iframes.getContext());else{if(null===(re=pi().gapi)||void 0===re||!re.load){const yt=jr("iframefcb");return pi()[yt]=()=>{gapi.load?Qe():_(He(D,"network-request-failed"))},mr(`https://apis.google.com/js/api.js?onload=${yt}`).catch(zt=>_(zt))}Qe()}}).catch(v=>{throw vo=null,v})}(D),vo}(D),_=pi().gapi;return Se(_,D,"internal-error"),v.open({where:document.body,url:bc(D),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ed,dontclear:!0},x=>new Promise(function(){var G=(0,u.Z)(function*(re,Qe){yield x.restyle({setHideOnLeave:!1});const yt=He(D,"network-request-failed"),zt=pi().setTimeout(()=>{Qe(yt)},xo.get());function wn(){pi().clearTimeout(zt),re(x)}x.ping(wn).then(wn,()=>{Qe(yt)})});return function(re,Qe){return G.apply(this,arguments)}}()))}),_u.apply(this,arguments)}const Md={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ro=500,td=600,Eu="_blank",Pd="http://localhost";class io{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}const Od="__/auth/handler",Ef="emulator/auth/handler",nd=encodeURIComponent("fac");function kd(D,v,_,x,G,re){return wu.apply(this,arguments)}function wu(){return(wu=(0,u.Z)(function*(D,v,_,x,G,re){Se(D.config.authDomain,D,"auth-domain-config-required"),Se(D.config.apiKey,D,"invalid-api-key");const Qe={apiKey:D.config.apiKey,appName:D.name,authType:_,redirectUrl:x,v:xe.SDK_VERSION,eventId:G};if(v instanceof ms){v.setDefaultLanguage(D.languageCode),Qe.providerId=v.providerId||"",(0,W.xb)(v.getCustomParameters())||(Qe.customParameters=JSON.stringify(v.getCustomParameters()));for(const[zn,Wn]of Object.entries(re||{}))Qe[zn]=Wn}if(v instanceof ui){const zn=v.getScopes().filter(Wn=>""!==Wn);zn.length>0&&(Qe.scopes=zn.join(","))}D.tenantId&&(Qe.tid=D.tenantId);const yt=Qe;for(const zn of Object.keys(yt))void 0===yt[zn]&&delete yt[zn];const zt=yield D._getAppCheckToken(),wn=zt?`#${nd}=${encodeURIComponent(zt)}`:"";return`${function ks({config:D}){return D.emulator?Ae(D,Ef):`https://${D.authDomain}/${Od}`}(D)}?${(0,W.xO)(yt).slice(1)}${wn}`})).apply(this,arguments)}const Xu="webStorageSupport",Xl=class es{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qi,this._completeRedirectFn=Yu,this._overrideRedirectResult=Za}_openPopup(v,_,x,G){var re=this;return(0,u.Z)(function*(){var Qe;qe(null===(Qe=re.eventManagers[v._key()])||void 0===Qe?void 0:Qe.manager,"_initialize() not called before _openPopup()");const yt=yield kd(v,_,x,nt(),G);return function Iu(D,v,_,x=ro,G=td){const re=Math.max((window.screen.availHeight-G)/2,0).toString(),Qe=Math.max((window.screen.availWidth-x)/2,0).toString();let yt="";const zt=Object.assign(Object.assign({},Md),{width:x.toString(),height:G.toString(),top:re,left:Qe}),wn=(0,W.z$)().toLowerCase();_&&(yt=un(wn)?Eu:_),It(wn)&&(v=v||Pd,zt.scrollbars="yes");const zn=Object.entries(zt).reduce((ts,[wa,qd])=>`${ts}${wa}=${qd},`,"");if(function vn(D=(0,W.z$)()){var v;return Mt(D)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(wn)&&"_self"!==yt)return function Zl(D,v){const _=document.createElement("a");_.href=D,_.target=v;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(v||"",yt),new io(null);const Wn=window.open(v||"",yt,zn);Se(Wn,D,"popup-blocked");try{Wn.focus()}catch(ts){}return new io(Wn)}(v,yt,on())})()}_openRedirect(v,_,x,G){var re=this;return(0,u.Z)(function*(){return yield re._originValidation(v),function Pl(D){pi().location.href=D}(yield kd(v,_,x,nt(),G)),new Promise(()=>{})})()}_initialize(v){const _=v._key();if(this.eventManagers[_]){const{manager:G,promise:re}=this.eventManagers[_];return G?Promise.resolve(G):(qe(re,"If manager is not set, promise should be"),re)}const x=this.initAndGetManager(v);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(v){var _=this;return(0,u.Z)(function*(){const x=yield function Zu(D){return _u.apply(this,arguments)}(v),G=new J(v);return x.register("authEvent",re=>(Se(null==re?void 0:re.authEvent,v,"invalid-auth-event"),{status:G.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[v._key()]={manager:G},_.iframes[v._key()]=x,G})()}_isIframeWebStorageSupported(v,_){this.iframes[v._key()].send(Xu,{type:Xu},G=>{var re;const Qe=null===(re=null==G?void 0:G[0])||void 0===re?void 0:re[Xu];void 0!==Qe&&_(!!Qe),et(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const _=v._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function tr(D){return ir.apply(this,arguments)}(v)),this.originValidationPromises[_]}get _shouldInitProactively(){return rr()||dt()||Mt()}};class Nd{constructor(v){this.factorId=v}_process(v,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(v,_.credential,x);case"signin":return this._finalizeSignIn(v,_.credential);default:return it("unexpected MultiFactorSessionType")}}}class Qu extends Nd{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Qu(v)}_finalizeEnroll(v,_,x){return function Ti(D,v){return Ue(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(D,v))}(v,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,_){return function ga(D,v){return Ue(D,"POST","/v2/accounts/mfaSignIn:finalize",Ke(D,v))}(v,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dc=(()=>{class D{constructor(){}static assertion(_){return Qu._fromCredential(_)}}return D.FACTOR_ID="phone",D})();var _l="@firebase/auth";class El{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const _=this.auth.onIdTokenChanged(x=>{v((null==x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,_),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const _=this.internalListeners.get(v);_&&(this.internalListeners.delete(v),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tc(){return window}(0,W.Pz)("authIdTokenMaxAge"),function Bl(D){(0,xe._registerComponent)(new ve.wA("auth",(v,{options:_})=>{const x=v.getProvider("app").getImmediate(),G=v.getProvider("heartbeat"),re=v.getProvider("app-check-internal"),{apiKey:Qe,authDomain:yt}=x.options;Se(Qe&&!Qe.includes(":"),"invalid-api-key",{appName:x.name}),Se(!(null!=yt&&yt.includes(":")),"argument-error",{appName:x.name});const zt={apiKey:Qe,authDomain:yt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rt(D)},wn=new li(x,G,re,zt);return function pe(D,v){const _=(null==v?void 0:v.persistence)||[],x=(Array.isArray(_)?_:[_]).map(Ge);null!=v&&v.errorMap&&D._updateErrorMap(v.errorMap),D._initializeWithPersistence(x,null==v?void 0:v.popupRedirectResolver)}(wn,_),wn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,_,x)=>{v.getProvider("auth-internal").initialize()})),(0,xe._registerComponent)(new ve.wA("auth-internal",v=>{const _=Ir(v.getProvider("auth").getImmediate());return new El(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)(_l,"0.23.1",function Cu(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,xe.registerVersion)(_l,"0.23.1","esm2017")}("Browser");const If=2e3;function Ql(){return Ql=(0,u.Z)(function*(D,v,_){var x;const{BuildInfo:G}=tc();qe(v.sessionId,"AuthEvent did not contain a session ID");const re=yield function Ea(D){return ia.apply(this,arguments)}(v.sessionId),Qe={};return Mt()?Qe.ibi=G.packageName:Me()?Qe.apn=G.packageName:et(D,"operation-not-supported-in-this-environment"),G.displayName&&(Qe.appDisplayName=G.displayName),Qe.sessionId=re,kd(D,_,v.type,void 0,null!==(x=v.eventId)&&void 0!==x?x:void 0,Qe)}),Ql.apply(this,arguments)}function nc(){return(nc=(0,u.Z)(function*(D){const{BuildInfo:v}=tc(),_={};Mt()?_.iosBundleId=v.packageName:Me()?_.androidPackageName=v.packageName:et(D,"operation-not-supported-in-this-environment"),yield en(D,_)})).apply(this,arguments)}function eu(){return(eu=(0,u.Z)(function*(D,v,_){const{cordova:x}=tc();let G=()=>{};try{yield new Promise((re,Qe)=>{let yt=null;function zt(){var Wn;re();const ts=null===(Wn=x.plugins.browsertab)||void 0===Wn?void 0:Wn.close;"function"==typeof ts&&ts(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function wn(){yt||(yt=window.setTimeout(()=>{Qe(He(D,"redirect-cancelled-by-user"))},If))}function zn(){"visible"===(null==document?void 0:document.visibilityState)&&wn()}v.addPassiveListener(zt),document.addEventListener("resume",wn,!1),Me()&&document.addEventListener("visibilitychange",zn,!1),G=()=>{v.removePassiveListener(zt),document.removeEventListener("resume",wn,!1),document.removeEventListener("visibilitychange",zn,!1),yt&&window.clearTimeout(yt)}})}finally{G()}})).apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(D){const v=function id(D){if(qe(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const v=new ArrayBuffer(D.length),_=new Uint8Array(v);for(let x=0;x<D.length;x++)_[x]=D.charCodeAt(x);return _}(D),_=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(_)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Vd=20;class wl extends J{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(v=>{this.resolveInialized=v})}addPassiveListener(v){this.passiveListeners.add(v)}removePassiveListener(v){this.passiveListeners.delete(v)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(v){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(v)),super.onEvent(v)}initialized(){var v=this;return(0,u.Z)(function*(){yield v.initPromise})()}}function Ul(D){return bu.apply(this,arguments)}function bu(){return(bu=(0,u.Z)(function*(D){const v=yield Fa()._get(Ro(D));return v&&(yield Fa()._remove(Ro(D))),v})).apply(this,arguments)}function sd(){const D=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<Vd;_++){const x=Math.floor(Math.random()*v.length);D.push(v.charAt(x))}return D.join("")}function Fa(){return Ge(Wi)}function Ro(D){return ge("authEvent",D.config.apiKey,D.name)}function tu(D){if(null==D||!D.includes("?"))return{};const[v,..._]=D.split("?");return(0,W.zd)(_.join("?"))}const sc=class od{constructor(){this._redirectPersistence=qi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yu,this._overrideRedirectResult=Za}_initialize(v){var _=this;return(0,u.Z)(function*(){const x=v._key();let G=_.eventManagers.get(x);return G||(G=new wl(v),_.eventManagers.set(x,G),_.attachCallbackListeners(v,G)),G})()}_openPopup(v){et(v,"operation-not-supported-in-this-environment")}_openRedirect(v,_,x,G){var re=this;return(0,u.Z)(function*(){!function Vi(D){var v,_,x,G,re,Qe,yt,zt,wn,zn;const Wn=tc();Se("function"==typeof(null===(v=null==Wn?void 0:Wn.universalLinks)||void 0===v?void 0:v.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(typeof(null===(_=null==Wn?void 0:Wn.BuildInfo)||void 0===_?void 0:_.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(re=null===(G=null===(x=null==Wn?void 0:Wn.cordova)||void 0===x?void 0:x.plugins)||void 0===G?void 0:G.browsertab)||void 0===re?void 0:re.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(zt=null===(yt=null===(Qe=null==Wn?void 0:Wn.cordova)||void 0===Qe?void 0:Qe.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===zt?void 0:zt.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(zn=null===(wn=null==Wn?void 0:Wn.cordova)||void 0===wn?void 0:wn.InAppBrowser)||void 0===zn?void 0:zn.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(v);const Qe=yield re._initialize(v);yield Qe.initialized(),Qe.resetRedirect(),function Wu(){yo.clear()}(),yield re._originValidation(v);const yt=function rc(D,v,_=null){return{type:v,eventId:_,urlResponse:null,sessionId:sd(),postBody:null,tenantId:D.tenantId,error:He(D,"no-auth-event")}}(v,x,G);yield function $l(D,v){return Fa()._set(Ro(D),v)}(v,yt);const zt=yield function $d(D,v,_){return Ql.apply(this,arguments)}(v,yt,_),wn=yield function Jl(D){const{cordova:v}=tc();return new Promise(_=>{v.plugins.browsertab.isAvailable(x=>{let G=null;x?v.plugins.browsertab.openUrl(D):G=v.InAppBrowser.open(D,function Xt(D=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),_(G)})})}(zt);return function rd(D,v,_){return eu.apply(this,arguments)}(v,Qe,wn)})()}_isIframeWebStorageSupported(v,_){throw new Error("Method not implemented.")}_originValidation(v){const _=v._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ud(D){return nc.apply(this,arguments)}(v)),this.originValidationPromises[_]}attachCallbackListeners(v,_){const{universalLinks:x,handleOpenURL:G,BuildInfo:re}=tc(),Qe=setTimeout((0,u.Z)(function*(){yield Ul(v),_.onEvent(Du())}),500),yt=function(){var zn=(0,u.Z)(function*(Wn){clearTimeout(Qe);const ts=yield Ul(v);let wa=null;ts&&null!=Wn&&Wn.url&&(wa=function Vl(D,v){var _,x;const G=function ic(D){const v=tu(D),_=v.link?decodeURIComponent(v.link):void 0,x=tu(_).link,G=v.deep_link_id?decodeURIComponent(v.deep_link_id):void 0;return tu(G).link||G||x||_||D}(v);if(G.includes("/__/auth/callback")){const re=tu(G),Qe=re.firebaseError?function Tc(D){try{return JSON.parse(D)}catch(v){return null}}(decodeURIComponent(re.firebaseError)):null,yt=null===(x=null===(_=null==Qe?void 0:Qe.code)||void 0===_?void 0:_.split("auth/"))||void 0===x?void 0:x[1],zt=yt?He(yt):null;return zt?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:G,postBody:null}}return null}(ts,Wn.url)),_.onEvent(wa||Du())});return function(ts){return zn.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,yt);const zt=G,wn=`${re.packageName.toLowerCase()}://`;tc().handleOpenURL=function(){var zn=(0,u.Z)(function*(Wn){if(Wn.toLowerCase().startsWith(wn)&&yt({url:Wn}),"function"==typeof zt)try{zt(Wn)}catch(ts){console.error(ts)}});return function(Wn){return zn.apply(this,arguments)}}()}};function Du(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:He("no-auth-event")}}const xp=1e3;function Mo(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function oc(D=(0,W.z$)()){return!("file:"!==Mo()&&"ionic:"!==Mo()&&"capacitor:"!==Mo()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cf(){try{const D=self.localStorage,v=on();if(D)return D.setItem(v,"1"),D.removeItem(v),!function Au(D=(0,W.z$)()){return function La(){return(0,W.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Su(D=(0,W.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,W.hl)()}catch(D){return Hd()&&(0,W.hl)()}return!1}function Hd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yr(){return(function Dh(){return"http:"===Mo()||"https:"===Mo()}()||(0,W.ru)()||oc())&&!function Tu(){return(0,W.b$)()||(0,W.UG)()}()&&Cf()&&!Hd()}function ad(){return oc()&&typeof document<"u"}function ld(){return(ld=(0,u.Z)(function*(){return!!ad()&&new Promise(D=>{const v=setTimeout(()=>{D(!1)},xp);document.addEventListener("deviceready",()=>{clearTimeout(v),D(!0)})})})).apply(this,arguments)}const Po={LOCAL:"local",NONE:"none",SESSION:"session"},ru=Se,Sh="persistence";function ud(D){return iu.apply(this,arguments)}function iu(){return(iu=(0,u.Z)(function*(D){yield D._initializationPromise;const v=cd(),_=ge(Sh,D.config.apiKey,D.name);v&&v.setItem(_,D._getPersistence())})).apply(this,arguments)}function cd(){var D;try{return(null===(D=function Sc(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch(v){return null}}const xu=Se;class su{constructor(){this.browserResolver=Ge(Xl),this.cordovaResolver=Ge(sc),this.underlyingResolver=null,this._redirectPersistence=qi,this._completeRedirectFn=Yu,this._overrideRedirectResult=Za}_initialize(v){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(v)})()}_openPopup(v,_,x,G){var re=this;return(0,u.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openPopup(v,_,x,G)})()}_openRedirect(v,_,x,G){var re=this;return(0,u.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openRedirect(v,_,x,G)})()}_isIframeWebStorageSupported(v,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(v,_)}_originValidation(v){return this.assertedUnderlyingResolver._originValidation(v)}get _shouldInitProactively(){return ad()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var v=this;return(0,u.Z)(function*(){if(v.underlyingResolver)return;const _=yield function Th(){return ld.apply(this,arguments)}();v.underlyingResolver=_?v.cordovaResolver:v.browserResolver})()}}function Ia(D){return D.unwrap()}function Df(D){return Rp(D)}function Rp(D){const{_tokenResponse:v}=D instanceof W.ZR?D.customData:D;if(!v)return null;if(!(D instanceof W.ZR)&&"temporaryProof"in v&&"phoneNumber"in v)return R.credentialFromResult(D);const _=v.providerId;if(!_||_===je.PASSWORD)return null;let x;switch(_){case je.GOOGLE:x=Os;break;case je.FACEBOOK:x=lo;break;case je.GITHUB:x=uo;break;case je.TWITTER:x=Aa;break;default:const{oauthIdToken:G,oauthAccessToken:re,oauthTokenSecret:Qe,pendingToken:yt,nonce:zt}=v;return re||Qe||G||yt?yt?_.startsWith("saml.")?bs._create(_,yt):Li._fromParams({providerId:_,signInMethod:_,pendingToken:yt,idToken:G,accessToken:re}):new ns(_).credential({idToken:G,accessToken:re,rawNonce:zt}):null}return D instanceof W.ZR?x.credentialFromError(D):x.credentialFromResult(D)}function Xa(D,v){return v.catch(_=>{throw _ instanceof W.ZR&&function zd(D,v){var _;const x=null===(_=v.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null==v?void 0:v.code))v.resolver=new hd(D,function Gi(D,v){var _;const x=(0,W.m9)(D),G=v;return Se(v.customData.operationType,x,"argument-error"),Se(null===(_=G.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),wr._fromError(x,G)}(D,v));else if(x){const G=Rp(v),re=v;G&&(re.credential=G,re.tenantId=x.tenantId||void 0,re.email=x.email||void 0,re.phoneNumber=x.phoneNumber||void 0)}}(D,_),_}).then(_=>{const G=_.user;return{operationType:_.operationType,credential:Df(_),additionalUserInfo:rl(_),user:Cl.getOrCreate(G)}})}function fs(D,v){return dd.apply(this,arguments)}function dd(){return(dd=(0,u.Z)(function*(D,v){const _=yield v;return{verificationId:_.verificationId,confirm:x=>Xa(D,_.confirm(x))}})).apply(this,arguments)}class hd{constructor(v,_){this.resolver=_,this.auth=function Ru(D){return D.wrapped()}(v)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(v){return Xa(Ia(this.auth),this.resolver.resolveSignIn(v))}}class Cl{constructor(v){this._delegate=v,this.multiFactor=function Js(D){const v=(0,W.m9)(D);return fa.has(v)||fa.set(v,Si._fromUser(v)),fa.get(v)}(v)}static getOrCreate(v){return Cl.USER_MAP.has(v)||Cl.USER_MAP.set(v,new Cl(v)),Cl.USER_MAP.get(v)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(v){return this._delegate.getIdTokenResult(v)}getIdToken(v){return this._delegate.getIdToken(v)}linkAndRetrieveDataWithCredential(v){return this.linkWithCredential(v)}linkWithCredential(v){var _=this;return(0,u.Z)(function*(){return Xa(_.auth,ca(_._delegate,v))})()}linkWithPhoneNumber(v,_){var x=this;return(0,u.Z)(function*(){return fs(x.auth,function Qr(D,v,_){return fr.apply(this,arguments)}(x._delegate,v,_))})()}linkWithPopup(v){var _=this;return(0,u.Z)(function*(){return Xa(_.auth,function xs(D,v,_){return to.apply(this,arguments)}(_._delegate,v,su))})()}linkWithRedirect(v){var _=this;return(0,u.Z)(function*(){return yield ud(Ir(_.auth)),Jc(_._delegate,v,su)})()}reauthenticateAndRetrieveDataWithCredential(v){return this.reauthenticateWithCredential(v)}reauthenticateWithCredential(v){var _=this;return(0,u.Z)(function*(){return Xa(_.auth,fo(_._delegate,v))})()}reauthenticateWithPhoneNumber(v,_){return fs(this.auth,function vl(D,v,_){return gi.apply(this,arguments)}(this._delegate,v,_))}reauthenticateWithPopup(v){return Xa(this.auth,function mi(D,v,_){return _i.apply(this,arguments)}(this._delegate,v,su))}reauthenticateWithRedirect(v){var _=this;return(0,u.Z)(function*(){return yield ud(Ir(_.auth)),Qc(_._delegate,v,su)})()}sendEmailVerification(v){return function gl(D,v){return Bo.apply(this,arguments)}(this._delegate,v)}unlink(v){var _=this;return(0,u.Z)(function*(){return yield function fl(D,v){return ys.apply(this,arguments)}(_._delegate,v),_})()}updateEmail(v){return function mo(D,v){return rs((0,W.m9)(D),v,null)}(this._delegate,v)}updatePassword(v){return function qr(D,v){return rs((0,W.m9)(D),null,v)}(this._delegate,v)}updatePhoneNumber(v){return function hs(D,v){return A.apply(this,arguments)}(this._delegate,v)}updateProfile(v){return function $o(D,v){return Jo.apply(this,arguments)}(this._delegate,v)}verifyBeforeUpdateEmail(v,_){return function da(D,v,_){return Qo.apply(this,arguments)}(this._delegate,v,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cl.USER_MAP=new WeakMap;const fd=Se;let ac=(()=>{class D{constructor(_,x){if(this.app=_,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=_.options;fd(G,"invalid-api-key",{appName:_.name}),fd(G,"invalid-api-key",{appName:_.name});const re=typeof window<"u"?su:void 0;this._delegate=x.initialize({options:{persistence:Gd(G,_.name),popupRedirectResolver:re}}),this._delegate._updateErrorMap(lt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,x){!function Ze(D,v,_){const x=Ir(D);Se(x._canInitEmulator,x,"emulator-config-failed"),Se(/^https?:\/\//.test(v),x,"invalid-emulator-scheme");const G=!(null==_||!_.disableWarnings),re=ft(v),{host:Qe,port:yt}=function Nt(D){const v=ft(D),_=/(\/\/)?([^?#/]+)/.exec(D.substr(v.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(x);if(G){const re=G[1];return{host:re,port:ae(x.substr(re.length+1))}}{const[re,Qe]=x.split(":");return{host:re,port:ae(Qe)}}}(v);x.config.emulator={url:`${re}//${Qe}${null===yt?"":`:${yt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:Qe,port:yt,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Je(){function D(){const v=document.createElement("p"),_=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,_,x)}applyActionCode(_){return function hi(D,v){return br.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return cs(this._delegate,_)}confirmPasswordReset(_,x){return function qn(D,v,_){return Sr.apply(this,arguments)}(this._delegate,_,x)}createUserWithEmailAndPassword(_,x){var G=this;return(0,u.Z)(function*(){return Xa(G._delegate,function bo(D,v,_){return Do.apply(this,arguments)}(G._delegate,_,x))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function go(D,v){return pl.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function pu(D,v){const _=Bi.parseLink(v);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){fd(Yr(),_._delegate,"operation-not-supported-in-this-environment");const x=yield function Ku(D,v){return _a.apply(this,arguments)}(_._delegate,su);return x?Xa(_._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function bh(D,v){Ir(D)._logFramework(v)}(this._delegate,_)}onAuthStateChanged(_,x,G){const{next:re,error:Qe,complete:yt}=Ah(_,x,G);return this._delegate.onAuthStateChanged(re,Qe,yt)}onIdTokenChanged(_,x,G){const{next:re,error:Qe,complete:yt}=Ah(_,x,G);return this._delegate.onIdTokenChanged(re,Qe,yt)}sendSignInLinkToEmail(_,x){return function za(D,v,_){return Ga.apply(this,arguments)}(this._delegate,_,x)}sendPasswordResetEmail(_,x){return function tn(D,v,_){return gn.apply(this,arguments)}(this._delegate,_,x||void 0)}setPersistence(_){var x=this;return(0,u.Z)(function*(){let G;switch(function bf(D,v){ru(Object.values(Po).includes(v),D,"invalid-persistence-type"),(0,W.b$)()?ru(v!==Po.SESSION,D,"unsupported-persistence-type"):(0,W.UG)()?ru(v===Po.NONE,D,"unsupported-persistence-type"):Hd()?ru(v===Po.NONE||v===Po.LOCAL&&(0,W.hl)(),D,"unsupported-persistence-type"):ru(v===Po.NONE||Cf(),D,"unsupported-persistence-type")}(x._delegate,_),_){case Po.SESSION:G=qi;break;case Po.LOCAL:G=(yield Ge(Br)._isAvailable())?Br:Wi;break;case Po.NONE:G=$t;break;default:return et("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Xa(this._delegate,function Zs(D){return Ei.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Xa(this._delegate,ur(this._delegate,_))}signInWithCustomToken(_){return Xa(this._delegate,function y(D,v){return I.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,x){return Xa(this._delegate,function Qs(D,v,_){return ur((0,W.m9)(D),ao.credential(v,_))}(this._delegate,_,x))}signInWithEmailLink(_,x){return Xa(this._delegate,function gu(D,v,_){return po.apply(this,arguments)}(this._delegate,_,x))}signInWithPhoneNumber(_,x){return fs(this._delegate,function Oa(D,v,_){return mt.apply(this,arguments)}(this._delegate,_,x))}signInWithPopup(_){var x=this;return(0,u.Z)(function*(){return fd(Yr(),x._delegate,"operation-not-supported-in-this-environment"),Xa(x._delegate,function Hn(D,v,_){return In.apply(this,arguments)}(x._delegate,_,su))})()}signInWithRedirect(_){var x=this;return(0,u.Z)(function*(){return fd(Yr(),x._delegate,"operation-not-supported-in-this-environment"),yield ud(x._delegate),wh(x._delegate,_,su)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Ii(D,v){return Ui.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Po,D})();function Ah(D,v,_){let x=D;"function"!=typeof D&&({next:x,error:v,complete:_}=D);const G=x;return{next:Qe=>G(Qe&&Cl.getOrCreate(Qe)),error:v,complete:_}}function Gd(D,v){const _=function jl(D,v){const _=cd();if(!_)return[];const x=ge(Sh,D,v);switch(_.getItem(x)){case Po.NONE:return[$t];case Po.LOCAL:return[Br,qi];case Po.SESSION:return[qi];default:return[]}}(D,v);if(typeof self<"u"&&!_.includes(Br)&&_.push(Br),typeof window<"u")for(const x of[Wi,qi])_.includes(x)||_.push(x);return _.includes($t)||_.push($t),_}class Ho{constructor(){this.providerId="phone",this._delegate=new R(Ia(Q.Z.auth()))}static credential(v,_){return R.credential(v,_)}verifyPhoneNumber(v,_){return this._delegate.verifyPhoneNumber(v,_)}unwrap(){return this._delegate}}Ho.PHONE_SIGN_IN_METHOD=R.PHONE_SIGN_IN_METHOD,Ho.PROVIDER_ID=R.PROVIDER_ID;const sa=Se;class Wd{constructor(v,_,x=Q.Z.app()){var G;sa(null===(G=x.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new al(v,_,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rh(D){D.INTERNAL.registerComponent(new ve.wA("auth-compat",v=>{const _=v.getProvider("app-compat").getImmediate(),x=v.getProvider("auth");return new ac(_,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:he_EMAIL_SIGNIN,PASSWORD_RESET:he_PASSWORD_RESET,RECOVER_EMAIL:he_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:he_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:he_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:he_VERIFY_EMAIL}},EmailAuthProvider:ao,FacebookAuthProvider:lo,GithubAuthProvider:uo,GoogleAuthProvider:Os,OAuthProvider:ns,SAMLAuthProvider:Ys,PhoneAuthProvider:Ho,PhoneMultiFactorGenerator:Dc,RecaptchaVerifier:Wd,TwitterAuthProvider:Aa,Auth:ac,AuthCredential:vt,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.1")}(Q.Z)},5861:(yn,Et,V)=>{"use strict";function u(W,xe,Oe,ke,ve,Ne,je){try{var me=W[Ne](je),ce=me.value}catch(he){return void Oe(he)}me.done?xe(ce):Promise.resolve(ce).then(ke,ve)}function Q(W){return function(){var xe=this,Oe=arguments;return new Promise(function(ke,ve){var Ne=W.apply(xe,Oe);function je(ce){u(Ne,ke,ve,je,me,"next",ce)}function me(ce){u(Ne,ke,ve,je,me,"throw",ce)}je(void 0)})}}V.d(Et,{Z:()=>Q})}},yn=>{yn(yn.s=8080)}]);